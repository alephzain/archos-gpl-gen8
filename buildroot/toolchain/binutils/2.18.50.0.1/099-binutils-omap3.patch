diff -Nur binutils-2.18.50.0.1/bfd/aout-adobe.c binutils-stable/bfd/aout-adobe.c
--- binutils-2.18.50.0.1/bfd/aout-adobe.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/aout-adobe.c	2007-09-25 15:41:58.000000000 +0200
@@ -467,6 +467,8 @@
 #define aout_32_bfd_link_hash_table_free            _bfd_generic_link_hash_table_free
 #define aout_32_bfd_link_add_symbols	            _bfd_generic_link_add_symbols
 #define aout_32_bfd_link_just_syms	            _bfd_generic_link_just_syms
+#define aout_32_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define aout_32_bfd_final_link		            _bfd_generic_final_link
 #define aout_32_bfd_link_split_section	            _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/aout-target.h binutils-stable/bfd/aout-target.h
--- binutils-2.18.50.0.1/bfd/aout-target.h	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/aout-target.h	2007-09-25 15:41:58.000000000 +0200
@@ -520,6 +520,10 @@
 #ifndef MY_bfd_link_just_syms
 #define MY_bfd_link_just_syms _bfd_generic_link_just_syms
 #endif
+#ifndef MY_bfd_copy_link_hash_symbol_type
+#define MY_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
+#endif
 #ifndef MY_bfd_link_split_section
 #define MY_bfd_link_split_section  _bfd_generic_link_split_section
 #endif
diff -Nur binutils-2.18.50.0.1/bfd/aout-tic30.c binutils-stable/bfd/aout-tic30.c
--- binutils-2.18.50.0.1/bfd/aout-tic30.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/aout-tic30.c	2007-09-25 15:41:58.000000000 +0200
@@ -977,6 +977,10 @@
 #ifndef MY_bfd_link_just_syms
 #define MY_bfd_link_just_syms _bfd_generic_link_just_syms
 #endif
+#ifndef MY_bfd_copy_link_hash_symbol_type
+#define MY_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
+#endif
 #ifndef MY_bfd_link_split_section
 #define MY_bfd_link_split_section  _bfd_generic_link_split_section
 #endif
diff -Nur binutils-2.18.50.0.1/bfd/archures.c binutils-stable/bfd/archures.c
--- binutils-2.18.50.0.1/bfd/archures.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/archures.c	2007-09-25 15:41:58.000000000 +0200
@@ -101,6 +101,9 @@
 .#define bfd_mach_mcf_isa_c 26
 .#define bfd_mach_mcf_isa_c_mac 27
 .#define bfd_mach_mcf_isa_c_emac 28
+.#define bfd_mach_mcf_isa_c_nodiv 29
+.#define bfd_mach_mcf_isa_c_nodiv_mac 30
+.#define bfd_mach_mcf_isa_c_nodiv_emac 31
 .  bfd_arch_vax,       {* DEC Vax *}
 .  bfd_arch_i960,      {* Intel 960 *}
 .    {* The order of the following is important.
@@ -166,6 +169,9 @@
 .#define bfd_mach_mips12000		12000
 .#define bfd_mach_mips16		16
 .#define bfd_mach_mips5                 5
+.#define bfd_mach_mips_octeon           6402
+.#define bfd_mach_mips_loongson_2e      3001
+.#define bfd_mach_mips_loongson_2f      3002
 .#define bfd_mach_mips_sb1              12310201 {* octal 'SB', 01 *}
 .#define bfd_mach_mipsisa32             32
 .#define bfd_mach_mipsisa32r2           33
diff -Nur binutils-2.18.50.0.1/bfd/bfd-in2.h binutils-stable/bfd/bfd-in2.h
--- binutils-2.18.50.0.1/bfd/bfd-in2.h	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/bfd-in2.h	2007-09-25 15:41:59.000000000 +0200
@@ -1772,6 +1772,9 @@
 #define bfd_mach_mcf_isa_c 26
 #define bfd_mach_mcf_isa_c_mac 27
 #define bfd_mach_mcf_isa_c_emac 28
+#define bfd_mach_mcf_isa_c_nodiv 29
+#define bfd_mach_mcf_isa_c_nodiv_mac 30
+#define bfd_mach_mcf_isa_c_nodiv_emac 31
   bfd_arch_vax,       /* DEC Vax */
   bfd_arch_i960,      /* Intel 960 */
     /* The order of the following is important.
@@ -1837,6 +1840,9 @@
 #define bfd_mach_mips12000             12000
 #define bfd_mach_mips16                16
 #define bfd_mach_mips5                 5
+#define bfd_mach_mips_octeon           6402
+#define bfd_mach_mips_loongson_2e      3001
+#define bfd_mach_mips_loongson_2f      3002
 #define bfd_mach_mips_sb1              12310201 /* octal 'SB', 01 */
 #define bfd_mach_mipsisa32             32
 #define bfd_mach_mipsisa32r2           33
@@ -5278,6 +5284,7 @@
   NAME##_bfd_link_hash_table_free, \
   NAME##_bfd_link_add_symbols, \
   NAME##_bfd_link_just_syms, \
+  NAME##_bfd_copy_link_hash_symbol_type, \
   NAME##_bfd_final_link, \
   NAME##_bfd_link_split_section, \
   NAME##_bfd_gc_sections, \
@@ -5308,6 +5315,12 @@
   /* Indicate that we are only retrieving symbol values from this section.  */
   void        (*_bfd_link_just_syms) (asection *, struct bfd_link_info *);
 
+  /* Copy the symbol type of a linker hash table entry.  */
+#define bfd_copy_link_hash_symbol_type(b, t, f) \
+  BFD_SEND (b, _bfd_copy_link_hash_symbol_type, (b, t, f))
+  void (*_bfd_copy_link_hash_symbol_type)
+    (bfd *, struct bfd_link_hash_entry *, struct bfd_link_hash_entry *);
+
   /* Do a link based on the link_order structures attached to each
      section of the BFD.  */
   bfd_boolean (*_bfd_final_link) (bfd *, struct bfd_link_info *);
diff -Nur binutils-2.18.50.0.1/bfd/binary.c binutils-stable/bfd/binary.c
--- binutils-2.18.50.0.1/bfd/binary.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/binary.c	2007-09-25 15:41:59.000000000 +0200
@@ -319,6 +319,8 @@
 #define binary_bfd_link_hash_table_create         _bfd_generic_link_hash_table_create
 #define binary_bfd_link_hash_table_free           _bfd_generic_link_hash_table_free
 #define binary_bfd_link_just_syms                 _bfd_generic_link_just_syms
+#define binary_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define binary_bfd_link_add_symbols               _bfd_generic_link_add_symbols
 #define binary_bfd_final_link                     _bfd_generic_final_link
 #define binary_bfd_link_split_section             _bfd_generic_link_split_section
diff -Nur binutils-2.18.50.0.1/bfd/bout.c binutils-stable/bfd/bout.c
--- binutils-2.18.50.0.1/bfd/bout.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/bout.c	2007-09-25 15:41:59.000000000 +0200
@@ -1382,6 +1382,8 @@
 #define b_out_bfd_link_hash_table_free         _bfd_generic_link_hash_table_free
 #define b_out_bfd_link_add_symbols             _bfd_generic_link_add_symbols
 #define b_out_bfd_link_just_syms               _bfd_generic_link_just_syms
+#define b_out_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define b_out_bfd_final_link                   _bfd_generic_final_link
 #define b_out_bfd_link_split_section           _bfd_generic_link_split_section
 #define b_out_bfd_gc_sections                  bfd_generic_gc_sections
diff -Nur binutils-2.18.50.0.1/bfd/cache.c binutils-stable/bfd/cache.c
--- binutils-2.18.50.0.1/bfd/cache.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/cache.c	2007-09-25 15:41:59.000000000 +0200
@@ -120,6 +120,13 @@
 
   if (fclose ((FILE *) abfd->iostream) == 0)
     ret = TRUE;
+  /* ClearCase has an entertaining bug where close will fail and set
+     errno to EROFS when applied to any file in a read-only view, even
+     if the file was opened for reading.  Detect this situation and
+     ignore the error.  */
+  else if (errno == EROFS && (abfd->direction == no_direction
+			      || abfd->direction == read_direction))
+    ret = TRUE;
   else
     {
       ret = FALSE;
diff -Nur binutils-2.18.50.0.1/bfd/ChangeLog binutils-stable/bfd/ChangeLog
--- binutils-2.18.50.0.1/bfd/ChangeLog	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/bfd/ChangeLog	2007-09-25 15:41:59.000000000 +0200
@@ -1,176 +1,3 @@
-2007-09-08  Alan Modra  <amodra@bigpond.net.au>
-
-	* elf64-ppc.c (func_desc_adjust): When resolving undefined
-	references to dot-symbols, transfer def_regular and
-	def_dynamic from the descriptor symbol.
-
-2007-09-08  Alan Modra  <amodra@bigpond.net.au>
-
-	* config.bfd: Set want64 for spu-*-elf.
-
-2007-09-08  Alan Modra  <amodra@bigpond.net.au>
-
-	PR ld/2864, ld/5006
-	* elf.c (special_sections): Comment typo.
-	(elf_fake_sections): Force SHT_PROGBITS for sections that are
-	SHT_NOBITS if BFD section flags say they have contents.
-
-2007-09-04  Michael Snyder  <msnyder@access-company.com>
-
-	* elf32-bfin.c (howto_table): Cut and paste error?  
-	Name field of reloc is wrong.
-
-2007-09-04  Alan Modra  <amodra@bigpond.net.au>
-
-	* elf32-spu.c (elf_howto_table): Formatting.
-
-2007-09-02  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4986
-	* dwarf2.c (new_line_sorts_after): Undo the last change.
-	(add_line_info): Only keep the last entry with the same address
-	and end sequence.
-
-2007-08-31  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4986
-	* dwarf2.c (new_line_sorts_after): Also compare line number.
-
-2007-08-31  Jesse Michael  <jmichael@suse.de>
-
-	* mach-o.c (bfd_mach_o_make_bfd_section): Fix test for non
-	zerofill sections.
-
-2007-08-28  David Heine  <dlheine@tensilica.com>
-
-	* elf32-xtensa.c (compute_ebb_actions): Update removed_bytes when
-	narrowing instructions.
-
-2007-08-28  Mark Shinwell  <shinwell@codesourcery.com>
-	    Joseph Myers  <joseph@codesourcery.com>
-
-	* elf32-arm.c (elf32_arm_compare_mapping): Compare first on vma,
-	then on type.
-
-2007-08-28  Robert Sebastian Gerus  <arachnist@gmail.com>
-
-	* config.bfd: Add support for i[3-7]86-*-dragonfly*.
-	* configure.in: Likewise.
-	* configure: Regenerate.
-
-2007-08-25  Ulrich Weigand  <uweigand@de.ibm.com>
-	    Alan Modra  <amodra@bigpond.net.au>
-
-	* elf.c (elfcore_grok_spu_note): New function.
-	(elf_parse_notes): Call it.
-
-2007-08-24  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf64-x86-64.c (elf64_x86_64_relocate_section): Adjust
-	indentation.
-
-2007-08-24  Pedro Alves  <pedro_alves@portugalmail.pt>
-
-	* elf.c (elfcore_grok_win32pstatus): Remove HAVE_WIN32_PSTATUS_T
-	guard.  Make it host independent.
-	(elfcore_grok_note): Remove HAVE_WIN32_PSTATUS_T guard around
-	NT_WIN32PSTATUS.
-
-2007-08-24  Jan Kratochvil  <jan.kratochvil@redhat.com>
-
-	* elf-bfd.h (struct elf_obj_tdata): New BUILD_ID_SIZE, BUILD_ID.
-	* elf.c (elfcore_read_notes): Split to ...
-	(elf_read_notes) ... here ...
-	(elf_parse_notes): ... and here.  Check `bfd_get_format (abfd)' with
-	the former subfunctions called only for BFD_CORE.
-	Call ELFOBJ_GROK_GNU_NOTE for BFD_OBJECT files with the owner "GNU".
-	(_bfd_elf_make_section_from_shdr): Call ELF_PARSE_NOTES for SHT_NOTEs.
-	(bfd_section_from_phdr): Update the call for renamed ELFCORE_READ_NOTES.
-	(elfobj_grok_gnu_build_id, elfobj_grok_gnu_note): New functions.
-	Code advisory: Roland McGrath
-
-2007-08-24  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* elf64-mips.c (elf_backend_sign_extend_vma): Define.
-
-2007-08-24  Alan Modra  <amodra@bigpond.net.au>
-
-	* elfxx-ia64.c (elfNN_ia64_add_symbol_hook): Warning fix.
-
-2007-08-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.am: Run "make dep-am".
-	* Makefile.in: Regenerated.
-
-2007-08-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf32-i386.c: Include "bfd_stdint.h".
-	(elf_i386_rtype_to_howto): New function.
-	(elf_i386_info_to_howto_rel): Use it.
-	(x86_64_opcode16): New union type.
-	(elf_i386_check_tls_transition): New function.
-	(elf_i386_tls_transition): Updated to check transition and
-	issue an error if a transition isn't supported.
-	(elf_i386_check_relocs): Return FALSE if
-	elf_i386_tls_transition returns FALSE.
-	(elf_i386_gc_sweep_hook): Likewise.
-	(elf_i386_relocate_section): Likewise. Remove BFD_ASSERT
-	on TLS transitions.
-
-	* elf64-x86-64.c: Include "bfd_stdint.h".
-	(x86_64_opcode16): New union type.
-	(x86_64_opcode32): Likewise.
-	(elf64_x86_64_check_tls_transition): New function.
-	(elf64_x86_64_tls_transition): Updated to check transition and
-	issue an error if a transition isn't supported.
-	(elf64_x86_64_check_relocs): Return FALSE if
-	elf64_x86_64_tls_transition returns FALSE.
-	(elf64_x86_64_gc_sweep_hook): Likewise.
-	(elf64_x86_64_relocate_section): Likewise. Remove BFD_ASSERT
-	on TLS transitions.
-
-2007-08-22  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elfxx-ia64.c: Convert to ISO C90 prototypes.
-	(elfNN_hpux_backend_section_from_bfd_section): Make it static.
-
-2007-08-22  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf64-x86-64.c: Remove trailing whitespace.
-	* elfxx-ia64.c: Likewise.
-
-2007-08-21  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf32-i386.c (elf_i386_tls_transition): Accept a pointer
-	to ELF hash entry instead of an integer for local test.
-	(elf_i386_check_relocs): Updated.
-	(elf_i386_gc_sweep_hook): Likewise.
-	(elf_i386_relocate_section): Likewise.
-
-	* elf64-x86-64.c  (elf64_x86_64_tls_transition): Accept a
-	pointer to ELF hash entry instead of an integer for local
-	test.
-	(elf64_x86_64_check_relocs): Updated.
-	(elf64_x86_64_gc_sweep_hook): Likewise.
-	(elf64_x86_64_relocate_section): Likewise.
-
-2007-08-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf32-i386.c (elf_i386_tls_transition): Break long line.
-	* elf64-x86-64.c (elf64_x86_64_tls_transition): Likewise.
-
-2007-08-20  Jan Kratochvil  <jan.kratochvil@redhat.com>
-
-	* elfxx-target.h [ELF_COMMONPAGESIZE && ELF_MAXPAGESIZE]
-	(ELF_MINPAGESIZE): Fixed its size guess.  Sanity checked its size.
-	(ELF_COMMONPAGESIZE, ELF_MAXPAGESIZE): Sanity checked their size.
-
-2007-08-20  Nick Clifton  <nickc@redhat.com>
-
-	* elflink.c (elf_fixup_link_order): Rewrite conversion of
-	s->alignment_power into an offset mask in order to avoid a gcc
-	error message.
-
 2007-08-17  Jakub Jelinek  <jakub@redhat.com>
 
 	* config.bfd: Handle sparcv*-*-linux-* the same as sparc-*-linux-*.
diff -Nur binutils-2.18.50.0.1/bfd/coffcode.h binutils-stable/bfd/coffcode.h
--- binutils-2.18.50.0.1/bfd/coffcode.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/coffcode.h	2007-09-25 15:41:59.000000000 +0200
@@ -5149,6 +5149,8 @@
 #endif /* ! defined (coff_relocate_section) */
 
 #define coff_bfd_link_just_syms      _bfd_generic_link_just_syms
+#define coff_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define coff_bfd_link_split_section  _bfd_generic_link_split_section
 
 #ifndef coff_start_final_link
diff -Nur binutils-2.18.50.0.1/bfd/coff-rs6000.c binutils-stable/bfd/coff-rs6000.c
--- binutils-2.18.50.0.1/bfd/coff-rs6000.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/coff-rs6000.c	2007-09-25 15:41:59.000000000 +0200
@@ -4207,6 +4207,7 @@
     _bfd_generic_link_hash_table_free,
     _bfd_xcoff_bfd_link_add_symbols,
     _bfd_generic_link_just_syms,
+    _bfd_generic_copy_link_hash_symbol_type,
     _bfd_xcoff_bfd_final_link,
     _bfd_generic_link_split_section,
     bfd_generic_gc_sections,
@@ -4458,6 +4459,7 @@
     _bfd_generic_link_hash_table_free,
     _bfd_xcoff_bfd_link_add_symbols,
     _bfd_generic_link_just_syms,
+    _bfd_generic_copy_link_hash_symbol_type,
     _bfd_xcoff_bfd_final_link,
     _bfd_generic_link_split_section,
     bfd_generic_gc_sections,
diff -Nur binutils-2.18.50.0.1/bfd/config.bfd binutils-stable/bfd/config.bfd
--- binutils-2.18.50.0.1/bfd/config.bfd	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/config.bfd	2007-09-25 15:41:59.000000000 +0200
@@ -533,7 +533,7 @@
     targ_selvecs=i386bsd_vec
     targ_underscore=yes
     ;;
-  i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu | i[3-7]86-*-dragonfly*)
+  i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu)
     targ_defvec=bfd_elf32_i386_freebsd_vec
     targ_selvecs=i386coff_vec
     # FreeBSD <= 4.0 supports only the old nonstandard way of ABI labelling.
@@ -961,12 +961,12 @@
 #endif
   mips*el-*-linux*)
     targ_defvec=bfd_elf32_tradlittlemips_vec
-    targ_selvecs="bfd_elf32_tradbigmips_vec ecoff_little_vec ecoff_big_vec bfd_elf32_ntradlittlemips_vec bfd_elf64_tradlittlemips_vec bfd_elf32_ntradbigmips_vec bfd_elf64_tradbigmips_vec"
+    targ_selvecs="bfd_elf32_tradbigmips_vec bfd_elf32_ntradlittlemips_vec bfd_elf64_tradlittlemips_vec bfd_elf32_ntradbigmips_vec bfd_elf64_tradbigmips_vec"
     want64=true
     ;;
   mips*-*-linux*)
     targ_defvec=bfd_elf32_tradbigmips_vec
-    targ_selvecs="bfd_elf32_tradlittlemips_vec ecoff_big_vec ecoff_little_vec bfd_elf32_ntradbigmips_vec bfd_elf64_tradbigmips_vec bfd_elf32_ntradlittlemips_vec bfd_elf64_tradlittlemips_vec"
+    targ_selvecs="bfd_elf32_tradlittlemips_vec bfd_elf32_ntradbigmips_vec bfd_elf64_tradbigmips_vec bfd_elf32_ntradlittlemips_vec bfd_elf64_tradlittlemips_vec"
     want64=true
     ;;
 #ifdef BFD64
@@ -1399,7 +1399,6 @@
 
   spu-*-elf)
     targ_defvec=bfd_elf32_spu_vec
-    want64=true
     ;;
 
 #if HAVE_host_aout_vec
diff -Nur binutils-2.18.50.0.1/bfd/configure binutils-stable/bfd/configure
--- binutils-2.18.50.0.1/bfd/configure	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/configure	2007-09-25 15:41:59.000000000 +0200
@@ -458,7 +458,7 @@
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE AR ac_ct_AR RANLIB ac_ct_RANLIB LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S lt_ECHO CPP DEBUGDIR PKGVERSION REPORT_BUGS_TO REPORT_BUGS_TEXI WARN_CFLAGS NO_WERROR MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE INSTALL_LIBBFD_TRUE INSTALL_LIBBFD_FALSE host_noncanonical target_noncanonical bfdlibdir bfdincludedir USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE HDEFINES BFD_HOST_64BIT_LONG BFD_HOST_64BIT_LONG_LONG BFD_HOST_LONG_LONG BFD_HOST_64_BIT_DEFINED BFD_HOST_64_BIT BFD_HOST_U_64_BIT BFD_HOSTPTR_T CC_FOR_BUILD EXEEXT_FOR_BUILD COREFILE COREFLAG WIN32LDFLAGS WIN32LIBADD TDEFINES wordsize bfd64_libs all_backends bfd_backends bfd_machines bfd_default_target_size bfd_file_ptr bfd_ufile_ptr tdefaults datarootdir docdir htmldir LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE AR ac_ct_AR RANLIB ac_ct_RANLIB LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S lt_ECHO CPP DEBUGDIR PKGVERSION REPORT_BUGS_TO REPORT_BUGS_TEXI WARN_CFLAGS NO_WERROR MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE INSTALL_LIBBFD_TRUE INSTALL_LIBBFD_FALSE host_noncanonical target_noncanonical bfdlibdir bfdincludedir USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE HDEFINES BFD_HOST_64BIT_LONG BFD_HOST_64BIT_LONG_LONG BFD_HOST_LONG_LONG BFD_HOST_64_BIT_DEFINED BFD_HOST_64_BIT BFD_HOST_U_64_BIT BFD_HOSTPTR_T CC_FOR_BUILD EXEEXT_FOR_BUILD COREFILE COREFLAG WIN32LDFLAGS WIN32LIBADD TDEFINES wordsize bfd64_libs all_backends bfd_backends bfd_machines bfd_default_target_size bfd_file_ptr bfd_ufile_ptr tdefaults datarootdir docdir htmldir pdfdir LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -1029,7 +1029,7 @@
   --with-separate-debug-dir=DIR
                           Look for global separate debug info in DIR
                           [default=LIBDIR/debug]
-  --with-pkgversion=PKG   Use PKG in the version string in place of "Linux/GNU
+  --with-pkgversion=PKG   Use PKG in the version string in place of "GNU
                           Binutils"
   --with-bugurl=URL       Direct users to URL to report a bug
 
@@ -2994,7 +2994,7 @@
 
 # Define the identity of the package.
  PACKAGE=bfd
- VERSION=2.18.50.0.1
+ VERSION=2.18.50
 
 
 cat >>confdefs.h <<_ACEOF
@@ -10527,7 +10527,7 @@
       *)   PKGVERSION="($withval) " ;;
      esac
 else
-  PKGVERSION="(Linux/GNU Binutils) "
+  PKGVERSION="(GNU Binutils) "
 
 fi;
 
@@ -10547,7 +10547,7 @@
 	   ;;
      esac
 else
-  BUGURL="http://www.sourceware.org/bugzilla/ and mailto:hjl@lucon.org"
+  BUGURL="http://www.sourceware.org/bugzilla/"
 
 fi;
   case ${BUGURL} in
@@ -17463,7 +17463,7 @@
 	COREFILE=trad-core.lo
 	TRAD_HEADER='"hosts/i386bsd.h"'
 	;;
-  i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu | i[3-7]86-*-dragonfly*)
+  i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu)
 	COREFILE=''
 	TRAD_HEADER='"hosts/i386bsd.h"'
 	;;
@@ -19068,8 +19068,6 @@
     bfd_elf32_hppa_nbsd_vec)	tb="$tb elf32-hppa.lo elf32.lo $elf" ;;
     bfd_elf32_hppa_vec)		tb="$tb elf32-hppa.lo elf32.lo $elf" ;;
     bfd_elf32_i370_vec)		tb="$tb elf32-i370.lo elf32.lo $elf" ;;
-    bfd_elf32_i386_dragonfly_vec)
-				tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
     bfd_elf32_i386_freebsd_vec)	tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
     bfd_elf32_i386_vxworks_vec)	tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
     bfd_elf32_i386_vec)		tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
@@ -20507,7 +20505,7 @@
 esac
 
 rm -f doc/config.status
-                                                  ac_config_files="$ac_config_files ../binutils.spec Makefile doc/Makefile bfd-in3.h:bfd-in2.h po/Makefile.in:po/Make-in"
+                                        ac_config_files="$ac_config_files Makefile doc/Makefile bfd-in3.h:bfd-in2.h po/Makefile.in:po/Make-in"
 
 
           ac_config_commands="$ac_config_commands default"
@@ -20517,6 +20515,7 @@
 
 
 
+
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
@@ -21354,7 +21353,6 @@
 do
   case "$ac_config_target" in
   # Handling of arguments.
-  "../binutils.spec" ) CONFIG_FILES="$CONFIG_FILES ../binutils.spec" ;;
   "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
   "doc/Makefile" ) CONFIG_FILES="$CONFIG_FILES doc/Makefile" ;;
   "bfd-in3.h" ) CONFIG_FILES="$CONFIG_FILES bfd-in3.h:bfd-in2.h" ;;
@@ -21575,6 +21573,7 @@
 s,@datarootdir@,$datarootdir,;t t
 s,@docdir@,$docdir,;t t
 s,@htmldir@,$htmldir,;t t
+s,@pdfdir@,$pdfdir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
@@ -22287,7 +22286,7 @@
 #
 # This program is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
+# the Free Software Foundation; either version 3 of the License, or
 # (at your option) any later version.
 #
 # This program is distributed in the hope that it will be useful, but
diff -Nur binutils-2.18.50.0.1/bfd/configure.in binutils-stable/bfd/configure.in
--- binutils-2.18.50.0.1/bfd/configure.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/configure.in	2007-09-25 15:41:59.000000000 +0200
@@ -8,7 +8,7 @@
 AC_CANONICAL_TARGET
 AC_ISC_POSIX
 
-AM_INIT_AUTOMAKE(bfd, 2.18.50.0.1)
+AM_INIT_AUTOMAKE(bfd, 2.18.50)
 
 dnl These must be called before AM_PROG_LIBTOOL, because it may want
 dnl to call AC_CHECK_PROG.
@@ -74,8 +74,8 @@
 [DEBUGDIR="${withval}"])
 AC_SUBST(DEBUGDIR)
 
-ACX_PKGVERSION([Linux/GNU Binutils])
-ACX_BUGURL([http://www.sourceware.org/bugzilla/ and mailto:hjl@lucon.org])
+ACX_PKGVERSION([GNU Binutils])
+ACX_BUGURL([http://www.sourceware.org/bugzilla/])
 
 AM_BINUTILS_WARNINGS
 
@@ -248,7 +248,7 @@
 	TRAD_HEADER='"hosts/i386bsd.h"'
 	;;
 changequote(,)dnl
-  i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu | i[3-7]86-*-dragonfly*)
+  i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu)
 changequote([,])dnl
 	COREFILE=''
 	TRAD_HEADER='"hosts/i386bsd.h"'
@@ -646,8 +646,6 @@
     bfd_elf32_hppa_nbsd_vec)	tb="$tb elf32-hppa.lo elf32.lo $elf" ;;
     bfd_elf32_hppa_vec)		tb="$tb elf32-hppa.lo elf32.lo $elf" ;;
     bfd_elf32_i370_vec)		tb="$tb elf32-i370.lo elf32.lo $elf" ;;
-    bfd_elf32_i386_dragonfly_vec)
-				tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
     bfd_elf32_i386_freebsd_vec)	tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
     bfd_elf32_i386_vxworks_vec)	tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
     bfd_elf32_i386_vec)		tb="$tb elf32-i386.lo elf-vxworks.lo elf32.lo $elf" ;;
@@ -1011,7 +1009,7 @@
 esac
 
 rm -f doc/config.status
-AC_CONFIG_FILES([../binutils.spec Makefile doc/Makefile bfd-in3.h:bfd-in2.h po/Makefile.in:po/Make-in])
+AC_CONFIG_FILES([Makefile doc/Makefile bfd-in3.h:bfd-in2.h po/Makefile.in:po/Make-in])
 
 dnl We need this duplication, even though we use AM_PO_SUBDIRS, because of
 dnl our two separate POTFILES.  Yuck.
@@ -1035,10 +1033,11 @@
     -e "s,@GMOFILES@,$GMOFILES," \
     po/Makefile.in > po/Makefile]],[[]])
 
-dnl Required by html and install-html
+dnl Required by html, pdf, install-pdf and install-html
 AC_SUBST(datarootdir)
 AC_SUBST(docdir)
 AC_SUBST(htmldir)
+AC_SUBST(pdfdir)
 
 AC_OUTPUT
 
diff -Nur binutils-2.18.50.0.1/bfd/cpu-m68k.c binutils-stable/bfd/cpu-m68k.c
--- binutils-2.18.50.0.1/bfd/cpu-m68k.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/cpu-m68k.c	2007-09-25 15:41:59.000000000 +0200
@@ -83,19 +83,25 @@
       FALSE, &arch_info_struct[27]),
     N(bfd_mach_mcf_isa_c_emac, "m68k:isa-c:emac",
       FALSE, &arch_info_struct[28]),
+    N(bfd_mach_mcf_isa_c_nodiv, "m68k:isa-c:nodiv",
+      FALSE, &arch_info_struct[29]),
+    N(bfd_mach_mcf_isa_c_nodiv_mac, "m68k:isa-c:nodiv:mac",
+      FALSE, &arch_info_struct[30]),
+    N(bfd_mach_mcf_isa_c_nodiv_emac, "m68k:isa-c:nodiv:emac",
+      FALSE, &arch_info_struct[31]),
 
     /* Legacy names for CF architectures */
-    N(bfd_mach_mcf_isa_a_nodiv, "m68k:5200", FALSE, &arch_info_struct[29]),
-    N(bfd_mach_mcf_isa_a_mac,"m68k:5206e", FALSE, &arch_info_struct[30]),
-    N(bfd_mach_mcf_isa_a_mac, "m68k:5307", FALSE, &arch_info_struct[31]),
-    N(bfd_mach_mcf_isa_b_nousp_mac, "m68k:5407", FALSE, &arch_info_struct[32]),
-    N(bfd_mach_mcf_isa_aplus_emac, "m68k:528x", FALSE, &arch_info_struct[33]),
-    N(bfd_mach_mcf_isa_aplus_emac, "m68k:521x", FALSE, &arch_info_struct[34]),
-    N(bfd_mach_mcf_isa_a_emac, "m68k:5249", FALSE, &arch_info_struct[35]),
+    N(bfd_mach_mcf_isa_a_nodiv, "m68k:5200", FALSE, &arch_info_struct[32]),
+    N(bfd_mach_mcf_isa_a_mac,"m68k:5206e", FALSE, &arch_info_struct[33]),
+    N(bfd_mach_mcf_isa_a_mac, "m68k:5307", FALSE, &arch_info_struct[34]),
+    N(bfd_mach_mcf_isa_b_nousp_mac, "m68k:5407", FALSE, &arch_info_struct[35]),
+    N(bfd_mach_mcf_isa_aplus_emac, "m68k:528x", FALSE, &arch_info_struct[36]),
+    N(bfd_mach_mcf_isa_aplus_emac, "m68k:521x", FALSE, &arch_info_struct[37]),
+    N(bfd_mach_mcf_isa_a_emac, "m68k:5249", FALSE, &arch_info_struct[38]),
     N(bfd_mach_mcf_isa_b_float_emac, "m68k:547x",
-      FALSE, &arch_info_struct[36]),
+      FALSE, &arch_info_struct[39]),
     N(bfd_mach_mcf_isa_b_float_emac, "m68k:548x",
-      FALSE, &arch_info_struct[37]),
+      FALSE, &arch_info_struct[40]),
     N(bfd_mach_mcf_isa_b_float_emac, "m68k:cfv4e", FALSE, 0),
   };
 
@@ -135,6 +141,9 @@
   mcfisa_a|mcfhwdiv|mcfisa_c|mcfusp,
   mcfisa_a|mcfhwdiv|mcfisa_c|mcfusp|mcfmac,
   mcfisa_a|mcfhwdiv|mcfisa_c|mcfusp|mcfemac,
+  mcfisa_a|mcfisa_c|mcfusp,
+  mcfisa_a|mcfisa_c|mcfusp|mcfmac,
+  mcfisa_a|mcfisa_c|mcfusp|mcfemac,
 };
 
 /* Return the count of bits set in MASK  */
diff -Nur binutils-2.18.50.0.1/bfd/cpu-mips.c binutils-stable/bfd/cpu-mips.c
--- binutils-2.18.50.0.1/bfd/cpu-mips.c	2007-08-01 15:11:47.000000000 +0200
+++ binutils-stable/bfd/cpu-mips.c	2007-09-25 15:41:58.000000000 +0200
@@ -86,7 +86,10 @@
   I_mipsisa32r2,
   I_mipsisa64,
   I_mipsisa64r2,
+  I_mipsocteon,
   I_sb1,
+  I_loongson_2e,
+  I_loongson_2f
 };
 
 #define NN(index) (&arch_info_struct[(index) + 1])
@@ -119,7 +122,10 @@
   N (32, 32, bfd_mach_mipsisa32r2,"mips:isa32r2", FALSE, NN(I_mipsisa32r2)),
   N (64, 64, bfd_mach_mipsisa64,  "mips:isa64",   FALSE, NN(I_mipsisa64)),
   N (64, 64, bfd_mach_mipsisa64r2,"mips:isa64r2", FALSE, NN(I_mipsisa64r2)),
-  N (64, 64, bfd_mach_mips_sb1, "mips:sb1",       FALSE, 0),
+  N (64, 64, bfd_mach_mips_octeon,"mips:octeon",  FALSE, NN(I_mipsocteon)),
+  N (64, 64, bfd_mach_mips_sb1, "mips:sb1",       FALSE, NN(I_sb1)),
+  N (64, 64, bfd_mach_mips_loongson_2e, "mips:loongson_2e",       FALSE, NN(I_loongson_2e)),
+  N (64, 64, bfd_mach_mips_loongson_2f, "mips:loongson_2f",       FALSE, 0)
 };
 
 /* The default architecture is mips:3000, but with a machine number of
diff -Nur binutils-2.18.50.0.1/bfd/doc/Makefile.am binutils-stable/bfd/doc/Makefile.am
--- binutils-2.18.50.0.1/bfd/doc/Makefile.am	2007-04-19 16:14:24.000000000 +0200
+++ binutils-stable/bfd/doc/Makefile.am	2007-09-25 15:41:54.000000000 +0200
@@ -299,6 +299,20 @@
 # cygnus option.
 install: install-info
 
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
+
+install-pdf: install-pdf-am
+ 
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 
 install-html: install-html-am
diff -Nur binutils-2.18.50.0.1/bfd/doc/Makefile.in binutils-stable/bfd/doc/Makefile.in
--- binutils-2.18.50.0.1/bfd/doc/Makefile.in	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/doc/Makefile.in	2007-09-25 15:41:54.000000000 +0200
@@ -222,6 +222,7 @@
 mandir = @mandir@
 mkdir_p = @mkdir_p@
 oldincludedir = @oldincludedir@
+pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 sbindir = @sbindir@
@@ -340,6 +341,7 @@
 DISTCLEANFILES = bfd.?? bfd.??? bfd.h libbfd.h libcoff.h texput.log \
 	$(am__append_1)
 MAINTAINERCLEANFILES = $(DOCFILES) bfd.info
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 all: all-am
 
@@ -794,6 +796,18 @@
 # cygnus option.
 install: install-info
 
+install-pdf: install-pdf-am
+
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
 install-html: install-html-am
 
 install-html-am: $(HTMLS)
diff -Nur binutils-2.18.50.0.1/bfd/dwarf2.c binutils-stable/bfd/dwarf2.c
--- binutils-2.18.50.0.1/bfd/dwarf2.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/dwarf2.c	2007-09-25 15:41:59.000000000 +0200
@@ -967,18 +967,7 @@
 
      Note: we may receive duplicate entries from 'decode_line_info'.  */
 
-  if (table->last_line
-      && table->last_line->address == address
-      && table->last_line->end_sequence == end_sequence)
-    {
-      /* We only keep the last entry with the same address and end
-	 sequence.  See PR ld/4986.  */
-      if (table->lcl_head == table->last_line)
-	table->lcl_head = info;
-      info->prev_line = table->last_line->prev_line;
-      table->last_line = info;
-    }
-  else if (!table->last_line
+  if (!table->last_line
       || new_line_sorts_after (info, table->last_line))
     {
       /* Normal case: add 'info' to the beginning of the list */
@@ -1721,30 +1710,16 @@
 }
 
 static char *
-find_abstract_instance_name (struct comp_unit *unit,
-			     struct attribute *attr_ptr)
+find_abstract_instance_name (struct comp_unit *unit, bfd_uint64_t die_ref)
 {
   bfd *abfd = unit->abfd;
   bfd_byte *info_ptr;
   unsigned int abbrev_number, bytes_read, i;
   struct abbrev_info *abbrev;
-  bfd_uint64_t die_ref = attr_ptr->u.val;
   struct attribute attr;
   char *name = 0;
 
-  /* DW_FORM_ref_addr can reference an entry in a different CU. It
-     is an offset from the .debug_info section, not the current CU.  */
-  if (attr_ptr->form == DW_FORM_ref_addr)
-    {
-      /* FIXME: How to handle DW_FORM_ref_addr references an entry in
-	 a different file?  */ 
-      if (!die_ref)
-	abort ();
-
-      info_ptr = unit->stash->sec_info_ptr + die_ref;
-    }
-  else 
-    info_ptr = unit->info_ptr_unit + die_ref;
+  info_ptr = unit->info_ptr_unit + die_ref;
   abbrev_number = read_unsigned_leb128 (abfd, info_ptr, &bytes_read);
   info_ptr += bytes_read;
 
@@ -1770,7 +1745,7 @@
 		    name = attr.u.str;
 		  break;
 		case DW_AT_specification:
-		  name = find_abstract_instance_name (unit, &attr);
+		  name = find_abstract_instance_name (unit, attr.u.val);
 		  break;
 		case DW_AT_MIPS_linkage_name:
 		  name = attr.u.str;
@@ -1932,7 +1907,7 @@
 		  break;
 
 		case DW_AT_abstract_origin:
-		  func->name = find_abstract_instance_name (unit, &attr);
+		  func->name = find_abstract_instance_name (unit, attr.u.val);
 		  break;
 
 		case DW_AT_name:
@@ -2901,11 +2876,6 @@
       bfd *debug_bfd;
       bfd_size_type total_size;
       asection *msec;
-      bfd_vma last_vma;
-      bfd_size_type size;
-      asection *first_msec;
-      asection **msecs = NULL;
-      unsigned int i, count;
 
       *pinfo = stash;
 
@@ -2939,28 +2909,9 @@
 	 Read them all in and produce one large stash.  We do this in two
 	 passes - in the first pass we just accumulate the section sizes.
 	 In the second pass we read in the section's contents.  The allows
-	 us to avoid reallocing the data as we add sections to the stash.
-       
-	 We may need to adjust debug_info section vmas since we will
-	 concatenate them together.  Otherwise relocations may be
-	 incorrect.  */
-      first_msec = msec;
-      last_vma = 0;
-      count = 0;
+	 us to avoid reallocing the data as we add sections to the stash.  */
       for (total_size = 0; msec; msec = find_debug_info (debug_bfd, msec))
-	{
-	  size = msec->size;
-	  if (size == 0)
-	    continue;
-
-	  total_size += size;
-
-	  BFD_ASSERT (msec->vma == 0 && msec->alignment_power == 0);
-
-	  msec->vma = last_vma;
-	  last_vma += size;
-	  count++;
-	}
+	total_size += msec->size;
 
       stash->info_ptr = bfd_alloc (debug_bfd, total_size);
       if (stash->info_ptr == NULL)
@@ -2968,27 +2919,17 @@
 
       stash->info_ptr_end = stash->info_ptr;
 
-      if (count > 1)
-	{
-	  count--;
-	  msecs = (asection **) bfd_malloc2 (count, sizeof (*msecs));
-	}
-
-      for (i = 0, msec = first_msec;
+      for (msec = find_debug_info (debug_bfd, NULL);
 	   msec;
 	   msec = find_debug_info (debug_bfd, msec))
 	{
+	  bfd_size_type size;
 	  bfd_size_type start;
 
 	  size = msec->size;
 	  if (size == 0)
 	    continue;
 
-	  if (i && msecs)
-	    msecs [i - 1] = msec;
-
-	  i++;
-
 	  start = stash->info_ptr_end - stash->info_ptr;
 
 	  if ((bfd_simple_get_relocated_section_contents
@@ -2998,27 +2939,9 @@
 	  stash->info_ptr_end = stash->info_ptr + start + size;
 	}
 
-      /* Restore section vma. */
-      if (count)
-	{
-	  if (msecs)
-	    {
-	      for (i = 0; i < count; i++)
-		msecs [i]->vma = 0;
-	      free (msecs);
-	    }
-	  else
-	    {
-	      for (msec = find_debug_info (debug_bfd, first_msec);
-		   msec;
-		   msec = find_debug_info (debug_bfd, msec))
-		msec->vma = 0;
-	    }
-	}
-
       BFD_ASSERT (stash->info_ptr_end == stash->info_ptr + total_size);
 
-      stash->sec = first_msec;
+      stash->sec = find_debug_info (debug_bfd, NULL);
       stash->sec_info_ptr = stash->info_ptr;
       stash->syms = symbols;
       stash->bfd = debug_bfd;
diff -Nur binutils-2.18.50.0.1/bfd/elf32-arm.c binutils-stable/bfd/elf32-arm.c
--- binutils-2.18.50.0.1/bfd/elf32-arm.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-arm.c	2007-09-25 15:41:59.000000000 +0200
@@ -3333,10 +3333,10 @@
         }
     }
   else if (globals->vfp11_fix == BFD_ARM_VFP11_FIX_DEFAULT)
-    /* For earlier architectures, we might need the workaround, but do not
-       enable it by default.  If users is running with broken hardware, they
-       must enable the erratum fix explicitly.  */
-    globals->vfp11_fix = BFD_ARM_VFP11_FIX_NONE;
+    /* For earlier architectures, we might need the workaround.  The compiler
+       only generates scalar code at present, so this should be sufficient in
+       most cases.  */
+    globals->vfp11_fix = BFD_ARM_VFP11_FIX_SCALAR;
 }
 
 
@@ -3659,6 +3659,10 @@
   /* Skip if this bfd does not correspond to an ELF image.  */
   if (bfd_get_flavour (abfd) != bfd_target_elf_flavour)
     return TRUE;
+
+  /* Skip this BFD if it corresponds to an executable or dynamic object.  */
+  if ((abfd->flags & (EXEC_P | DYNAMIC)) != 0)
+    return TRUE;
   
   for (sec = abfd->sections; sec != NULL; sec = sec->next)
     {
@@ -3670,6 +3674,8 @@
       if (elf_section_type (sec) != SHT_PROGBITS
           || (elf_section_flags (sec) & SHF_EXECINSTR) == 0
           || (sec->flags & SEC_EXCLUDE) != 0
+	  || sec->sec_info_type == ELF_INFO_TYPE_JUST_SYMS
+	  || sec->output_section == bfd_abs_section_ptr
           || strcmp (sec->name, VFP11_ERRATUM_VENEER_SECTION_NAME) == 0)
         continue;
 
@@ -6398,12 +6404,12 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  sym_type = h->type;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf32-avr.c binutils-stable/bfd/elf32-avr.c
--- binutils-2.18.50.0.1/bfd/elf32-avr.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-avr.c	2007-09-25 15:41:59.000000000 +0200
@@ -1204,12 +1204,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  name = h->root.root.string;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf32-bfin.c binutils-stable/bfd/elf32-bfin.c
--- binutils-2.18.50.0.1/bfd/elf32-bfin.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-bfin.c	2007-09-25 15:41:59.000000000 +0200
@@ -716,7 +716,7 @@
 	 0,			/* bitpos */
 	 complain_overflow_signed, /* complain_on_overflow */
 	 bfd_elf_generic_reloc,	/* special_function */
-	 "R_BFIN_GOT17M4",	/* name */
+	 "R_BFIN_GOT12",		/* name */
 	 FALSE,			/* partial_inplace */
 	 0xffff,	        /* src_mask */
 	 0xffff,	        /* dst_mask */
@@ -2197,13 +2197,13 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 	  bfd_boolean unresolved_reloc;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	  osec = sec;
 	}
 
@@ -2895,12 +2895,12 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-cr16.c binutils-stable/bfd/elf32-cr16.c
--- binutils-2.18.50.0.1/bfd/elf32-cr16.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-cr16.c	2007-09-25 15:41:59.000000000 +0200
@@ -837,12 +837,12 @@
         }
       else
         {
-          bfd_boolean unresolved_reloc, warned, ignored;
+          bfd_boolean unresolved_reloc, warned;
 
           RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
                                    r_symndx, symtab_hdr, sym_hashes,
                                    h, sec, relocation,
-                                   unresolved_reloc, warned, ignored);
+                                   unresolved_reloc, warned);
         }
 
       r = cr16_elf_final_link_relocate (howto, input_bfd, output_bfd,
diff -Nur binutils-2.18.50.0.1/bfd/elf32-cr16c.c binutils-stable/bfd/elf32-cr16c.c
--- binutils-2.18.50.0.1/bfd/elf32-cr16c.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-cr16c.c	2007-09-25 15:41:59.000000000 +0200
@@ -718,12 +718,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-cris.c binutils-stable/bfd/elf32-cris.c
--- binutils-2.18.50.0.1/bfd/elf32-cris.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-cris.c	2007-09-25 15:41:59.000000000 +0200
@@ -996,13 +996,13 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 	  bfd_boolean unresolved_reloc;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  if (unresolved_reloc
 	      /* Perhaps we should detect the cases that
diff -Nur binutils-2.18.50.0.1/bfd/elf32-crx.c binutils-stable/bfd/elf32-crx.c
--- binutils-2.18.50.0.1/bfd/elf32-crx.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-crx.c	2007-09-25 15:41:59.000000000 +0200
@@ -869,12 +869,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-d10v.c binutils-stable/bfd/elf32-d10v.c
--- binutils-2.18.50.0.1/bfd/elf32-d10v.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-d10v.c	2007-09-25 15:41:59.000000000 +0200
@@ -456,12 +456,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-fr30.c binutils-stable/bfd/elf32-fr30.c
--- binutils-2.18.50.0.1/bfd/elf32-fr30.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-fr30.c	2007-09-25 15:41:58.000000000 +0200
@@ -567,12 +567,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  name = h->root.root.string;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf32-frv.c binutils-stable/bfd/elf32-frv.c
--- binutils-2.18.50.0.1/bfd/elf32-frv.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-frv.c	2007-09-25 15:41:59.000000000 +0200
@@ -2813,13 +2813,13 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 	  bfd_boolean unresolved_reloc;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	  osec = sec;
 	}
 
diff -Nur binutils-2.18.50.0.1/bfd/elf32-h8300.c binutils-stable/bfd/elf32-h8300.c
--- binutils-2.18.50.0.1/bfd/elf32-h8300.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-h8300.c	2007-09-25 15:41:58.000000000 +0200
@@ -452,12 +452,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-hppa.c binutils-stable/bfd/elf32-hppa.c
--- binutils-2.18.50.0.1/bfd/elf32-hppa.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-hppa.c	2007-09-25 15:41:58.000000000 +0200
@@ -3676,14 +3676,13 @@
       else
 	{
 	  struct elf_link_hash_entry *eh;
-	  bfd_boolean unresolved_reloc, ignored;
+	  bfd_boolean unresolved_reloc;
 	  struct elf_link_hash_entry **sym_hashes = elf_sym_hashes (input_bfd);
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rela,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   eh, sym_sec, relocation,
-				   unresolved_reloc, warned_undef,
-				   ignored);
+				   unresolved_reloc, warned_undef);
 
 	  if (!info->relocatable
 	      && relocation == 0
diff -Nur binutils-2.18.50.0.1/bfd/elf32-i386.c binutils-stable/bfd/elf32-i386.c
--- binutils-2.18.50.0.1/bfd/elf32-i386.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-i386.c	2007-09-25 15:41:59.000000000 +0200
@@ -25,7 +25,6 @@
 #include "libbfd.h"
 #include "elf-bfd.h"
 #include "elf-vxworks.h"
-#include "bfd_stdint.h"
 
 /* 386 uses REL relocations instead of RELA.  */
 #define USE_REL	1
@@ -346,9 +345,12 @@
   return NULL;
 }
 
-static reloc_howto_type *
-elf_i386_rtype_to_howto (bfd *abfd, unsigned r_type)
+static void
+elf_i386_info_to_howto_rel (bfd *abfd ATTRIBUTE_UNUSED,
+			    arelent *cache_ptr,
+			    Elf_Internal_Rela *dst)
 {
+  unsigned int r_type = ELF32_R_TYPE (dst->r_info);
   unsigned int indx;
 
   if ((indx = r_type) >= R_386_standard
@@ -363,17 +365,7 @@
 			     abfd, (int) r_type);
       indx = R_386_NONE;
     }
-  BFD_ASSERT (elf_howto_table [indx].type == r_type);
-  return &elf_howto_table[indx];
-}
-
-static void
-elf_i386_info_to_howto_rel (bfd *abfd ATTRIBUTE_UNUSED,
-			    arelent *cache_ptr,
-			    Elf_Internal_Rela *dst)
-{
-  unsigned int r_type = ELF32_R_TYPE (dst->r_info);
-  cache_ptr->howto = elf_i386_rtype_to_howto (abfd, r_type);
+  cache_ptr->howto = &elf_howto_table[indx];
 }
 
 /* Return whether a symbol name implies a local label.  The UnixWare
@@ -669,8 +661,6 @@
   asection *srelplt;
   asection *sdynbss;
   asection *srelbss;
-  asection *sdynsharablebss;
-  asection *srelsharablebss;
 
   /* The (unloaded but important) .rel.plt.unloaded section on VxWorks.  */
   asection *srelplt2;
@@ -763,8 +753,6 @@
   ret->srelplt = NULL;
   ret->sdynbss = NULL;
   ret->srelbss = NULL;
-  ret->sdynsharablebss = NULL;
-  ret->srelsharablebss = NULL;
   ret->tls_ldm_got.refcount = 0;
   ret->next_tls_desc_index = 0;
   ret->sgotplt_jump_table_size = 0;
@@ -825,19 +813,10 @@
   htab->srelplt = bfd_get_section_by_name (dynobj, ".rel.plt");
   htab->sdynbss = bfd_get_section_by_name (dynobj, ".dynbss");
   if (!info->shared)
-    {
-      htab->srelbss = bfd_get_section_by_name (dynobj, ".rel.bss");
-      htab->sdynsharablebss
-	= bfd_get_section_by_name (dynobj, ".dynsharablebss");
-      htab->srelsharablebss
-	= bfd_get_section_by_name (dynobj, ".rel.sharable_bss");
-    }
+    htab->srelbss = bfd_get_section_by_name (dynobj, ".rel.bss");
 
   if (!htab->splt || !htab->srelplt || !htab->sdynbss
-      || (!info->shared
-	  && (!htab->srelbss
-	      || !htab->sdynsharablebss
-	      || !htab->srelsharablebss)))
+      || (!info->shared && !htab->srelbss))
     abort ();
 
   if (htab->is_vxworks
@@ -914,293 +893,31 @@
     _bfd_elf_link_hash_copy_indirect (info, dir, ind);
 }
 
-typedef union 
-  {
-    unsigned char c[2];
-    uint16_t i;
-  }
-i386_opcode16;
-
-/* Return TRUE if the TLS access code sequence support transition
-   from R_TYPE.  */
-
-static bfd_boolean
-elf_i386_check_tls_transition (bfd *abfd, asection *sec,
-			       bfd_byte *contents,
-			       Elf_Internal_Shdr *symtab_hdr,
-			       struct elf_link_hash_entry **sym_hashes,
-			       unsigned int r_type,
-			       const Elf_Internal_Rela *rel,
-			       const Elf_Internal_Rela *relend)
-{
-  unsigned int val, type;
-  unsigned long r_symndx;
-  struct elf_link_hash_entry *h;
-  bfd_vma offset;
-
-  /* Get the section contents.  */
-  if (contents == NULL)
-    {
-      if (elf_section_data (sec)->this_hdr.contents != NULL)
-	contents = elf_section_data (sec)->this_hdr.contents;
-      else
-	{
-	  /* FIXME: How to better handle error condition?  */
-	  if (!bfd_malloc_and_get_section (abfd, sec, &contents))
-	    return FALSE;
-
-	  /* Cache the section contents for elf_link_input_bfd.  */
-	  elf_section_data (sec)->this_hdr.contents = contents;
-	}
-    }
+static int
+elf_i386_tls_transition (struct bfd_link_info *info, int r_type, int is_local)
+{
+  if (info->shared)
+    return r_type;
 
-  offset = rel->r_offset;
   switch (r_type)
     {
     case R_386_TLS_GD:
-    case R_386_TLS_LDM:
-      if (offset < 2 || (rel + 1) >= relend)
-	return FALSE;
-
-      type = bfd_get_8 (abfd, contents + offset - 2);
-      if (r_type == R_386_TLS_GD)
-	{
-	  /* Check transition from LD access model.  Only
-		leal foo@tlsgd(,%reg,1), %eax; call ___tls_get_addr
-		leal foo@tlsgd(%reg), %eax; call ___tls_get_addr; nop
-	     can transit to different access model.  */
-	  if ((offset + 10) > sec->size ||
-	      (type != 0x8d && type != 0x04))
-	    return FALSE;
-
-	  val = bfd_get_8 (abfd, contents + offset - 1);
-	  if (type == 0x04)
-	    {
-	      /* leal foo@tlsgd(,%reg,1), %eax; call ___tls_get_addr */
-	      if (offset < 3)
-		return FALSE;
-
-	      if (bfd_get_8 (abfd, contents + offset - 3) != 0x8d)
-		return FALSE;
-
-	      if ((val & 0xc7) != 0x05 || val == (4 << 3))
-		return FALSE;
-	    }
-	  else
-	    {
-	      /* leal foo@tlsgd(%reg), %eax; call ___tls_get_addr; nop  */
-	      if ((val & 0xf8) != 0x80 || (val & 7) == 4)
-		return FALSE;
-
-	      if (bfd_get_8 (abfd, contents + offset + 9) != 0x90)
-		return FALSE;
-	    }
-	}
-      else
-	{
-	  /* Check transition from LD access model.  Only
-		leal foo@tlsgd(%reg), %eax; call ___tls_get_addr
-	     can transit to different access model.  */
-	  if (type != 0x8d || (offset + 9) > sec->size)
-	    return FALSE;
-
-	  val = bfd_get_8 (abfd, contents + offset - 1);
-	  if ((val & 0xf8) != 0x80 || (val & 7) == 4)
-	    return FALSE;
-	}
-
-      if (bfd_get_8 (abfd, contents + offset + 4) != 0xe8)
-	return FALSE;
-
-      r_symndx = ELF32_R_SYM (rel[1].r_info);
-      if (r_symndx < symtab_hdr->sh_info)
-	return FALSE;
-
-      h = sym_hashes[r_symndx - symtab_hdr->sh_info];
-      return (h != NULL
-	      && h->root.root.string != NULL
-	      && (ELF32_R_TYPE (rel[1].r_info) == R_386_PC32
-		  || ELF32_R_TYPE (rel[1].r_info) == R_386_PLT32)
-	      && (strcmp (h->root.root.string, "___tls_get_addr") == 0));
-
-    case R_386_TLS_IE:
-      /* Check transition from IE access model:
-		movl foo@indntpoff(%rip), %eax
-		movl foo@indntpoff(%rip), %reg
-		addl foo@indntpoff(%rip), %reg
-       */
-
-      if (offset < 1 || (offset + 4) > sec->size)
-	return FALSE;
-
-      /* Check "movl foo@tpoff(%rip), %eax" first.  */
-      val = bfd_get_8 (abfd, contents + offset - 1);
-      if (val == 0xa1)
-	return TRUE;
-
-      if (offset < 2)
-	return FALSE;
-
-      /* Check movl|addl foo@tpoff(%rip), %reg.   */
-      type = bfd_get_8 (abfd, contents + offset - 2);
-      return ((type == 0x8b || type == 0x03)
-	      && (val & 0xc7) == 0x05);
-
-    case R_386_TLS_GOTIE:
-    case R_386_TLS_IE_32:
-      /* Check transition from {IE_32,GOTIE} access model:
-		subl foo@{tpoff,gontoff}(%reg1), %reg2
-		movl foo@{tpoff,gontoff}(%reg1), %reg2
-		addl foo@{tpoff,gontoff}(%reg1), %reg2
-       */
-
-      if (offset < 2 || (offset + 4) > sec->size)
-	return FALSE;
-
-      val = bfd_get_8 (abfd, contents + offset - 1);
-      if ((val & 0xc0) != 0x80 || (val & 7) == 4)
-	return FALSE;
-
-      type = bfd_get_8 (abfd, contents + offset - 2);
-      return type == 0x8b || type == 0x2b || type == 0x03;
-
-    case R_386_TLS_GOTDESC:
-      /* Check transition from GDesc access model:
-		leal x@tlsdesc(%ebx), %eax
-
-	 Make sure it's a leal adding ebx to a 32-bit offset
-	 into any register, although it's probably almost always
-	 going to be eax.  */
-
-      if (offset < 2 || (offset + 4) > sec->size)
-	return FALSE;
-
-      if (bfd_get_8 (abfd, contents + offset - 2) != 0x8d)
-	return FALSE;
-
-      val = bfd_get_8 (abfd, contents + offset - 1);
-      return (val & 0xc7) == 0x83;
-
-    case R_386_TLS_DESC_CALL:
-      /* Check transition from GDesc access model:
-		call *x@tlsdesc(%rax)
-       */
-      if (offset + 2 <= sec->size)
-	{
-	  /* Make sure that it's a call *x@tlsdesc(%rax).  */
-	  static i386_opcode16 call = { { 0xff, 0x10 } };
-	  return bfd_get_16 (abfd, contents + offset) == call.i;
-	}
-
-      return FALSE;
-
-    default:
-      abort ();
-    }
-}
-
-/* Return TRUE if the TLS access transition is OK or no transition
-   will be performed.  Update R_TYPE if there is a transition.  */
-
-static bfd_boolean
-elf_i386_tls_transition (struct bfd_link_info *info, bfd *abfd,
-			 asection *sec, bfd_byte *contents,
-			 Elf_Internal_Shdr *symtab_hdr,
-			 struct elf_link_hash_entry **sym_hashes,
-			 unsigned int *r_type, int tls_type,
-			 const Elf_Internal_Rela *rel,
-			 const Elf_Internal_Rela *relend,
-			 struct elf_link_hash_entry *h)
-{
-  unsigned int from_type = *r_type;
-  unsigned int to_type = from_type;
-  bfd_boolean check = TRUE;
-
-  switch (from_type)
-    {
-    case R_386_TLS_GD:
     case R_386_TLS_GOTDESC:
     case R_386_TLS_DESC_CALL:
     case R_386_TLS_IE_32:
+      if (is_local)
+	return R_386_TLS_LE_32;
+      return R_386_TLS_IE_32;
     case R_386_TLS_IE:
     case R_386_TLS_GOTIE:
-      if (!info->shared)
-	{
-	  if (h == NULL)
-	    to_type = R_386_TLS_LE_32;
-	  else if (from_type != R_386_TLS_IE
-		   && from_type != R_386_TLS_GOTIE)
-	    to_type = R_386_TLS_IE_32;
-	}
-
-      /* When we are called from elf_i386_relocate_section, CONTENTS
-	 isn't NULL and there may be additional transitions based on
-	 TLS_TYPE.  */
-      if (contents != NULL)
-	{
-	  unsigned int new_to_type = to_type;
-
-	  if (!info->shared
-	      && h != NULL
-	      && h->dynindx == -1
-	      && (tls_type & GOT_TLS_IE))
-	    new_to_type = R_386_TLS_LE_32;
-
-	  if (to_type == R_386_TLS_GD
-	      || to_type == R_386_TLS_GOTDESC
-	      || to_type == R_386_TLS_DESC_CALL)
-	    {
-	      if (tls_type == GOT_TLS_IE_POS)
-		new_to_type = R_386_TLS_GOTIE;
-	      else if (tls_type & GOT_TLS_IE)
-		new_to_type = R_386_TLS_IE_32;
-	    }
-
-	  /* We checked the transition before when we were called from
-	     elf_i386_check_relocs.  We only want to check the new
-	     transition which hasn't been checked before.  */
-	  check = new_to_type != to_type && from_type == to_type;
-	  to_type = new_to_type;
-	}
-
-      break;
-
+      if (is_local)
+	return R_386_TLS_LE_32;
+      return r_type;
     case R_386_TLS_LDM:
-      if (!info->shared)
-	to_type = R_386_TLS_LE_32;
-      break;
-
-    default:
-      return TRUE;
-    }
-
-  /* Return TRUE if there is no transition.  */
-  if (from_type == to_type)
-    return TRUE;
-
-  /* Check if the transition can be performed.  */
-  if (check
-      && ! elf_i386_check_tls_transition (abfd, sec, contents,
-					  symtab_hdr, sym_hashes,
-					  from_type, rel, relend))
-    {
-      const reloc_howto_type *from, *to;
-
-      from = elf_i386_rtype_to_howto (abfd, from_type);
-      to = elf_i386_rtype_to_howto (abfd, to_type);
-
-      (*_bfd_error_handler)
-	(_("%B: TLS transition from %s to %s against `%s' at 0x%lx "
-	   "in section `%A' failed"),
-	 abfd, sec, from->name, to->name,
-	 h ? h->root.root.string : "a local symbol",
-	 (unsigned long) rel->r_offset);
-      bfd_set_error (bfd_error_bad_value);
-      return FALSE;
+      return R_386_TLS_LE_32;
     }
 
-  *r_type = to_type;
-  return TRUE;
+  return r_type;
 }
 
 /* Look through the relocs for a section during the first phase, and
@@ -1257,11 +974,7 @@
 	    h = (struct elf_link_hash_entry *) h->root.u.i.link;
 	}
 
-      if (! elf_i386_tls_transition (info, abfd, sec, NULL,
-				     symtab_hdr, sym_hashes,
-				     &r_type, GOT_UNKNOWN,
-				     rel, rel_end, h)) 
-	return FALSE;
+      r_type = elf_i386_tls_transition (info, r_type, h == NULL);
 
       switch (r_type)
 	{
@@ -1650,12 +1363,7 @@
 	}
 
       r_type = ELF32_R_TYPE (rel->r_info);
-      if (! elf_i386_tls_transition (info, abfd, sec, NULL,
-				     symtab_hdr, sym_hashes,
-				     &r_type, GOT_UNKNOWN,
-				     rel, relend, h)) 
-	return FALSE;
-
+      r_type = elf_i386_tls_transition (info, r_type, h != NULL);
       switch (r_type)
 	{
 	case R_386_TLS_LDM:
@@ -1826,23 +1534,17 @@
      both the dynamic object and the regular object will refer to the
      same memory location for the variable.  */
 
-  s = htab->sdynbss;
-
   /* We must generate a R_386_COPY reloc to tell the dynamic linker to
      copy the initial value out of the dynamic object and into the
      runtime process image.  */
   if ((h->root.u.def.section->flags & SEC_ALLOC) != 0)
     {
-      if (elf_section_flags (h->root.u.def.section) & SHF_GNU_SHARABLE)
-	{
-	  htab->srelsharablebss->size += sizeof (Elf32_External_Rel);
-	  s = htab->sdynsharablebss;
-	}
-      else
-	htab->srelbss->size += sizeof (Elf32_External_Rel);
+      htab->srelbss->size += sizeof (Elf32_External_Rel);
       h->needs_copy = 1;
     }
 
+  s = htab->sdynbss;
+
   return _bfd_elf_adjust_dynamic_copy (h, s);
 }
 
@@ -2296,8 +1998,7 @@
       if (s == htab->splt
 	  || s == htab->sgot
 	  || s == htab->sgotplt
-	  || s == htab->sdynbss
-	  || s == htab->sdynsharablebss)
+	  || s == htab->sdynbss)
 	{
 	  /* Strip this section if we don't need it; see the
 	     comment below.  */
@@ -2645,12 +2346,12 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
@@ -2922,50 +2623,98 @@
 	case R_386_TLS_DESC_CALL:
 	case R_386_TLS_IE_32:
 	case R_386_TLS_GOTIE:
+	  r_type = elf_i386_tls_transition (info, r_type, h == NULL);
 	  tls_type = GOT_UNKNOWN;
 	  if (h == NULL && local_got_offsets)
 	    tls_type = elf_i386_local_got_tls_type (input_bfd) [r_symndx];
 	  else if (h != NULL)
-	    tls_type = elf_i386_hash_entry(h)->tls_type;
+	    {
+	      tls_type = elf_i386_hash_entry(h)->tls_type;
+	      if (!info->shared && h->dynindx == -1 && (tls_type & GOT_TLS_IE))
+		r_type = R_386_TLS_LE_32;
+	    }
 	  if (tls_type == GOT_TLS_IE)
 	    tls_type = GOT_TLS_IE_NEG;
-
-	  if (! elf_i386_tls_transition (info, input_bfd,
-					 input_section, contents,
-					 symtab_hdr, sym_hashes,
-					 &r_type, tls_type, rel,
-					 relend, h))
-	    return FALSE;
+	  if (r_type == R_386_TLS_GD
+	      || r_type == R_386_TLS_GOTDESC
+	      || r_type == R_386_TLS_DESC_CALL)
+	    {
+	      if (tls_type == GOT_TLS_IE_POS)
+		r_type = R_386_TLS_GOTIE;
+	      else if (tls_type & GOT_TLS_IE)
+		r_type = R_386_TLS_IE_32;
+	    }
 
 	  if (r_type == R_386_TLS_LE_32)
 	    {
 	      BFD_ASSERT (! unresolved_reloc);
 	      if (ELF32_R_TYPE (rel->r_info) == R_386_TLS_GD)
 		{
-		  unsigned int type;
+		  unsigned int val, type;
 		  bfd_vma roff;
+		  unsigned long tls_r_symndx;
+		  struct elf_link_hash_entry *tls_h;
 
 		  /* GD->LE transition.  */
+		  BFD_ASSERT (rel->r_offset >= 2);
 		  type = bfd_get_8 (input_bfd, contents + rel->r_offset - 2);
+		  BFD_ASSERT (type == 0x8d || type == 0x04);
+		  BFD_ASSERT (rel->r_offset + 9 <= input_section->size);
+		  BFD_ASSERT (bfd_get_8 (input_bfd,
+					 contents + rel->r_offset + 4)
+			      == 0xe8);
+		  BFD_ASSERT (rel + 1 < relend);
+		  tls_r_symndx = ELF32_R_SYM (rel[1].r_info);
+		  BFD_ASSERT (tls_r_symndx >= symtab_hdr->sh_info);
+		  tls_h = sym_hashes[tls_r_symndx - symtab_hdr->sh_info];
+		  BFD_ASSERT (tls_h != NULL
+			      && tls_h->root.root.string != NULL
+			      && strcmp (tls_h->root.root.string,
+					 "___tls_get_addr") == 0);
+		  BFD_ASSERT ((! info->shared
+			       && ELF32_R_TYPE (rel[1].r_info) == R_386_PC32)
+			      || ELF32_R_TYPE (rel[1].r_info) == R_386_PLT32);
+		  roff = rel->r_offset + 5;
+		  val = bfd_get_8 (input_bfd,
+				   contents + rel->r_offset - 1);
 		  if (type == 0x04)
 		    {
 		      /* leal foo(,%reg,1), %eax; call ___tls_get_addr
 			 Change it into:
 			 movl %gs:0, %eax; subl $foo@tpoff, %eax
 			 (6 byte form of subl).  */
+		      BFD_ASSERT (rel->r_offset >= 3);
+		      BFD_ASSERT (bfd_get_8 (input_bfd,
+					     contents + rel->r_offset - 3)
+				  == 0x8d);
+		      BFD_ASSERT ((val & 0xc7) == 0x05 && val != (4 << 3));
 		      memcpy (contents + rel->r_offset - 3,
 			      "\x65\xa1\0\0\0\0\x81\xe8\0\0\0", 12);
-		      roff = rel->r_offset + 5;
 		    }
 		  else
 		    {
-		      /* leal foo(%reg), %eax; call ___tls_get_addr; nop
-			 Change it into:
-			 movl %gs:0, %eax; subl $foo@tpoff, %eax
-			 (6 byte form of subl).  */
-		      memcpy (contents + rel->r_offset - 2,
-			      "\x65\xa1\0\0\0\0\x81\xe8\0\0\0", 12);
-		      roff = rel->r_offset + 6;
+		      BFD_ASSERT ((val & 0xf8) == 0x80 && (val & 7) != 4);
+		      if (rel->r_offset + 10 <= input_section->size
+			  && bfd_get_8 (input_bfd,
+					contents + rel->r_offset + 9) == 0x90)
+			{
+			  /* leal foo(%reg), %eax; call ___tls_get_addr; nop
+			     Change it into:
+			     movl %gs:0, %eax; subl $foo@tpoff, %eax
+			     (6 byte form of subl).  */
+			  memcpy (contents + rel->r_offset - 2,
+				  "\x65\xa1\0\0\0\0\x81\xe8\0\0\0", 12);
+			  roff = rel->r_offset + 6;
+			}
+		      else
+			{
+			  /* leal foo(%reg), %eax; call ___tls_get_addr
+			     Change it into:
+			     movl %gs:0, %eax; subl $foo@tpoff, %eax
+			     (5 byte form of subl).  */
+			  memcpy (contents + rel->r_offset - 2,
+				  "\x65\xa1\0\0\0\0\x2d\0\0\0", 11);
+			}
 		    }
 		  bfd_put_32 (output_bfd, tpoff (info, relocation),
 			      contents + roff);
@@ -2983,11 +2732,19 @@
 
 		     Registers other than %eax may be set up here.  */
 
-		  unsigned int val;
+		  unsigned int val, type;
 		  bfd_vma roff;
 
+		  /* First, make sure it's a leal adding ebx to a
+		     32-bit offset into any register, although it's
+		     probably almost always going to be eax.  */
 		  roff = rel->r_offset;
+		  BFD_ASSERT (roff >= 2);
+		  type = bfd_get_8 (input_bfd, contents + roff - 2);
+		  BFD_ASSERT (type == 0x8d);
 		  val = bfd_get_8 (input_bfd, contents + roff - 1);
+		  BFD_ASSERT ((val & 0xc7) == 0x83);
+		  BFD_ASSERT (roff + 4 <= input_section->size);
 
 		  /* Now modify the instruction as appropriate.  */
 		  /* aoliva FIXME: remove the above and xor the byte
@@ -3004,18 +2761,28 @@
 		     It's originally:
 		     call *(%eax)
 		     Turn it into:
-		     xchg %ax,%ax  */
+		     nop; nop  */
 
+		  unsigned int val, type;
 		  bfd_vma roff;
-		  
+
+		  /* First, make sure it's a call *(%eax).  */
 		  roff = rel->r_offset;
+		  BFD_ASSERT (roff + 2 <= input_section->size);
+		  type = bfd_get_8 (input_bfd, contents + roff);
+		  BFD_ASSERT (type == 0xff);
+		  val = bfd_get_8 (input_bfd, contents + roff + 1);
+		  BFD_ASSERT (val == 0x10);
+
+		  /* Now modify the instruction as appropriate.  Use
+		     xchg %ax,%ax instead of 2 nops.  */
 		  bfd_put_8 (output_bfd, 0x66, contents + roff);
 		  bfd_put_8 (output_bfd, 0x90, contents + roff + 1);
 		  continue;
 		}
 	      else if (ELF32_R_TYPE (rel->r_info) == R_386_TLS_IE)
 		{
-		  unsigned int val;
+		  unsigned int val, type;
 
 		  /* IE->LE transition:
 		     Originally it can be one of:
@@ -3026,7 +2793,9 @@
 		     movl $foo, %eax
 		     movl $foo, %reg
 		     addl $foo, %reg.  */
+		  BFD_ASSERT (rel->r_offset >= 1);
 		  val = bfd_get_8 (input_bfd, contents + rel->r_offset - 1);
+		  BFD_ASSERT (rel->r_offset + 4 <= input_section->size);
 		  if (val == 0xa1)
 		    {
 		      /* movl foo, %eax.  */
@@ -3035,14 +2804,14 @@
 		    }
 		  else
 		    {
-		      unsigned int type;
-
+		      BFD_ASSERT (rel->r_offset >= 2);
 		      type = bfd_get_8 (input_bfd,
 					contents + rel->r_offset - 2);
 		      switch (type)
 			{
 			case 0x8b:
 			  /* movl */
+			  BFD_ASSERT ((val & 0xc7) == 0x05);
 			  bfd_put_8 (output_bfd, 0xc7,
 				     contents + rel->r_offset - 2);
 			  bfd_put_8 (output_bfd,
@@ -3051,6 +2820,7 @@
 			  break;
 			case 0x03:
 			  /* addl */
+			  BFD_ASSERT ((val & 0xc7) == 0x05);
 			  bfd_put_8 (output_bfd, 0x81,
 				     contents + rel->r_offset - 2);
 			  bfd_put_8 (output_bfd,
@@ -3079,8 +2849,11 @@
 		     subl $foo, %reg2
 		     movl $foo, %reg2 (6 byte form)
 		     addl $foo, %reg2.  */
+		  BFD_ASSERT (rel->r_offset >= 2);
 		  type = bfd_get_8 (input_bfd, contents + rel->r_offset - 2);
 		  val = bfd_get_8 (input_bfd, contents + rel->r_offset - 1);
+		  BFD_ASSERT (rel->r_offset + 4 <= input_section->size);
+		  BFD_ASSERT ((val & 0xc0) == 0x80 && (val & 7) != 4);
 		  if (type == 0x8b)
 		    {
 		      /* movl */
@@ -3281,21 +3054,38 @@
 	      bfd_vma roff;
 
 	      /* GD->IE transition.  */
+	      BFD_ASSERT (rel->r_offset >= 2);
 	      type = bfd_get_8 (input_bfd, contents + rel->r_offset - 2);
+	      BFD_ASSERT (type == 0x8d || type == 0x04);
+	      BFD_ASSERT (rel->r_offset + 9 <= input_section->size);
+	      BFD_ASSERT (bfd_get_8 (input_bfd, contents + rel->r_offset + 4)
+			  == 0xe8);
+	      BFD_ASSERT (rel + 1 < relend);
+	      BFD_ASSERT (ELF32_R_TYPE (rel[1].r_info) == R_386_PLT32);
+	      roff = rel->r_offset - 3;
 	      val = bfd_get_8 (input_bfd, contents + rel->r_offset - 1);
 	      if (type == 0x04)
 		{
 		  /* leal foo(,%reg,1), %eax; call ___tls_get_addr
 		     Change it into:
 		     movl %gs:0, %eax; subl $foo@gottpoff(%reg), %eax.  */
+		  BFD_ASSERT (rel->r_offset >= 3);
+		  BFD_ASSERT (bfd_get_8 (input_bfd,
+					 contents + rel->r_offset - 3)
+			      == 0x8d);
+		  BFD_ASSERT ((val & 0xc7) == 0x05 && val != (4 << 3));
 		  val >>= 3;
-		  roff = rel->r_offset - 3;
 		}
 	      else
 		{
 		  /* leal foo(%reg), %eax; call ___tls_get_addr; nop
 		     Change it into:
 		     movl %gs:0, %eax; subl $foo@gottpoff(%reg), %eax.  */
+		  BFD_ASSERT (rel->r_offset + 10 <= input_section->size);
+		  BFD_ASSERT ((val & 0xf8) == 0x80 && (val & 7) != 4);
+		  BFD_ASSERT (bfd_get_8 (input_bfd,
+					 contents + rel->r_offset + 9)
+			      == 0x90);
 		  roff = rel->r_offset - 2;
 		}
 	      memcpy (contents + roff,
@@ -3325,18 +3115,25 @@
 		 leal x@tlsdesc(%ebx), %eax
 
 		 Change it to:
-		 movl x@gotntpoff(%ebx), %eax # before xchg %ax,%ax
+		 movl x@gotntpoff(%ebx), %eax # before nop; nop
 		 or:
 		 movl x@gottpoff(%ebx), %eax # before negl %eax
 
 		 Registers other than %eax may be set up here.  */
 
+	      unsigned int val, type;
 	      bfd_vma roff;
 
 	      /* First, make sure it's a leal adding ebx to a 32-bit
 		 offset into any register, although it's probably
 		 almost always going to be eax.  */
 	      roff = rel->r_offset;
+	      BFD_ASSERT (roff >= 2);
+	      type = bfd_get_8 (input_bfd, contents + roff - 2);
+	      BFD_ASSERT (type == 0x8d);
+	      val = bfd_get_8 (input_bfd, contents + roff - 1);
+	      BFD_ASSERT ((val & 0xc7) == 0x83);
+	      BFD_ASSERT (roff + 4 <= input_section->size);
 
 	      /* Now modify the instruction as appropriate.  */
 	      /* To turn a leal into a movl in the form we use it, it
@@ -3364,15 +3161,22 @@
 		 call *(%eax)
 
 		 Change it to:
-		 xchg %ax,%ax
+		 nop; nop
 		 or
 		 negl %eax
 		 depending on how we transformed the TLS_GOTDESC above.
 	      */
 
+	      unsigned int val, type;
 	      bfd_vma roff;
 
+	      /* First, make sure it's a call *(%eax).  */
 	      roff = rel->r_offset;
+	      BFD_ASSERT (roff + 2 <= input_section->size);
+	      type = bfd_get_8 (input_bfd, contents + roff);
+	      BFD_ASSERT (type == 0xff);
+	      val = bfd_get_8 (input_bfd, contents + roff + 1);
+	      BFD_ASSERT (val == 0x10);
 
 	      /* Now modify the instruction as appropriate.  */
 	      if (tls_type != GOT_TLS_IE_NEG)
@@ -3395,20 +3199,35 @@
 	  break;
 
 	case R_386_TLS_LDM:
-	  if (! elf_i386_tls_transition (info, input_bfd,
-					 input_section, contents,
-					 symtab_hdr, sym_hashes,
-					 &r_type, GOT_UNKNOWN, rel,
-					 relend, h))
-	    return FALSE;
-
-	  if (r_type != R_386_TLS_LDM)
+	  if (! info->shared)
 	    {
+	      unsigned int val;
+	      unsigned long tls_r_symndx;
+	      struct elf_link_hash_entry *tls_h;
+
 	      /* LD->LE transition:
+		 Ensure it is:
 		 leal foo(%reg), %eax; call ___tls_get_addr.
 		 We change it into:
 		 movl %gs:0, %eax; nop; leal 0(%esi,1), %esi.  */
-	      BFD_ASSERT (r_type == R_386_TLS_LE_32);
+	      BFD_ASSERT (rel->r_offset >= 2);
+	      BFD_ASSERT (bfd_get_8 (input_bfd, contents + rel->r_offset - 2)
+			  == 0x8d);
+	      val = bfd_get_8 (input_bfd, contents + rel->r_offset - 1);
+	      BFD_ASSERT ((val & 0xf8) == 0x80 && (val & 7) != 4);
+	      BFD_ASSERT (rel->r_offset + 9 <= input_section->size);
+	      BFD_ASSERT (bfd_get_8 (input_bfd, contents + rel->r_offset + 4)
+			  == 0xe8);
+	      BFD_ASSERT (rel + 1 < relend);
+	      tls_r_symndx = ELF32_R_SYM (rel[1].r_info);
+	      BFD_ASSERT (tls_r_symndx >= symtab_hdr->sh_info);
+	      tls_h = sym_hashes[tls_r_symndx - symtab_hdr->sh_info];
+	      BFD_ASSERT (tls_h != NULL
+			  && tls_h->root.root.string != NULL
+			  && strcmp (tls_h->root.root.string,
+				     "___tls_get_addr") == 0);
+	      BFD_ASSERT (ELF32_R_TYPE (rel[1].r_info) == R_386_PC32
+			  || ELF32_R_TYPE (rel[1].r_info) == R_386_PLT32);
 	      memcpy (contents + rel->r_offset - 2,
 		      "\x65\xa1\0\0\0\0\x90\x8d\x74\x26", 11);
 	      /* Skip R_386_PC32/R_386_PLT32.  */
@@ -3738,27 +3557,21 @@
     {
       Elf_Internal_Rela rel;
       bfd_byte *loc;
-      asection *s;
-
-      if (h->root.u.def.section == htab->sdynsharablebss)
-	s = htab->srelsharablebss;
-      else
-	s = htab->srelbss;
 
       /* This symbol needs a copy reloc.  Set it up.  */
 
       if (h->dynindx == -1
 	  || (h->root.type != bfd_link_hash_defined
 	      && h->root.type != bfd_link_hash_defweak)
-	  || s == NULL)
+	  || htab->srelbss == NULL)
 	abort ();
 
       rel.r_offset = (h->root.u.def.value
 		      + h->root.u.def.section->output_section->vma
 		      + h->root.u.def.section->output_offset);
       rel.r_info = ELF32_R_INFO (h->dynindx, R_386_COPY);
-      loc = s->contents;
-      loc += s->reloc_count++ * sizeof (Elf32_External_Rel);
+      loc = htab->srelbss->contents;
+      loc += htab->srelbss->reloc_count++ * sizeof (Elf32_External_Rel);
       bfd_elf32_swap_reloc_out (output_bfd, &rel, loc);
     }
 
@@ -4046,21 +3859,6 @@
 #define elf_backend_plt_sym_val		      elf_i386_plt_sym_val
 #define elf_backend_hash_symbol		      elf_i386_hash_symbol
 
-#define elf_backend_add_symbol_hook \
-  _bfd_elf_add_sharable_symbol
-#define elf_backend_section_from_bfd_section \
-  _bfd_elf_sharable_section_from_bfd_section
-#define elf_backend_symbol_processing \
-  _bfd_elf_sharable_symbol_processing
-#define elf_backend_common_section_index \
-  _bfd_elf_sharable_common_section_index
-#define elf_backend_common_section \
-  _bfd_elf_sharable_common_section
-#define elf_backend_common_definition \
-  _bfd_elf_sharable_common_definition
-#define elf_backend_merge_symbol \
-  _bfd_elf_sharable_merge_symbol
-
 #include "elf32-target.h"
 
 /* FreeBSD support.  */
diff -Nur binutils-2.18.50.0.1/bfd/elf32-i860.c binutils-stable/bfd/elf32-i860.c
--- binutils-2.18.50.0.1/bfd/elf32-i860.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-i860.c	2007-09-25 15:41:58.000000000 +0200
@@ -1120,12 +1120,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-ip2k.c binutils-stable/bfd/elf32-ip2k.c
--- binutils-2.18.50.0.1/bfd/elf32-ip2k.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-ip2k.c	2007-09-25 15:41:59.000000000 +0200
@@ -1449,13 +1449,13 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 	  bfd_boolean unresolved_reloc;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  name = h->root.root.string;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf32-iq2000.c binutils-stable/bfd/elf32-iq2000.c
--- binutils-2.18.50.0.1/bfd/elf32-iq2000.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-iq2000.c	2007-09-25 15:41:59.000000000 +0200
@@ -586,12 +586,12 @@
       else
 	{
 	  bfd_boolean unresolved_reloc;
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  name = h->root.root.string;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf32-m68hc1x.c binutils-stable/bfd/elf32-m68hc1x.c
--- binutils-2.18.50.0.1/bfd/elf32-m68hc1x.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-m68hc1x.c	2007-09-25 15:41:58.000000000 +0200
@@ -945,12 +945,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation, unresolved_reloc,
-				   warned, ignored);
+				   warned);
 
 	  is_far = (h && (h->other & STO_M68HC12_FAR));
 	  stub_name = h->root.root.string;
diff -Nur binutils-2.18.50.0.1/bfd/elf32-m68k.c binutils-stable/bfd/elf32-m68k.c
--- binutils-2.18.50.0.1/bfd/elf32-m68k.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-m68k.c	2007-09-25 15:41:59.000000000 +0200
@@ -506,6 +506,9 @@
 	case EF_M68K_CF_ISA_C:
 	  features |= mcfisa_a|mcfisa_c|mcfhwdiv|mcfusp;
 	  break;
+	case EF_M68K_CF_ISA_C_NODIV:
+	  features |= mcfisa_a|mcfisa_c|mcfusp;
+	  break;
 	}
       switch (eflags & EF_M68K_CF_MAC_MASK)
 	{
@@ -658,6 +661,10 @@
 	    case EF_M68K_CF_ISA_C:
 	      isa = "C";
 	      break;
+	    case EF_M68K_CF_ISA_C_NODIV:
+	      isa = "C";
+	      additional = " [nodiv]";
+	      break;
 	    }
 	  fprintf (file, " [isa %s]%s", isa, additional);
 	  if (eflags & EF_M68K_CF_FLOAT)
@@ -1646,12 +1653,12 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-mcore.c binutils-stable/bfd/elf32-mcore.c
--- binutils-2.18.50.0.1/bfd/elf32-mcore.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-mcore.c	2007-09-25 15:41:59.000000000 +0200
@@ -458,12 +458,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-msp430.c binutils-stable/bfd/elf32-msp430.c
--- binutils-2.18.50.0.1/bfd/elf32-msp430.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-msp430.c	2007-09-25 15:41:58.000000000 +0200
@@ -450,12 +450,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-mt.c binutils-stable/bfd/elf32-mt.c
--- binutils-2.18.50.0.1/bfd/elf32-mt.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-mt.c	2007-09-25 15:41:59.000000000 +0200
@@ -344,12 +344,12 @@
       else
 	{
 	  bfd_boolean unresolved_reloc;
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  name = h->root.root.string;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf32-openrisc.c binutils-stable/bfd/elf32-openrisc.c
--- binutils-2.18.50.0.1/bfd/elf32-openrisc.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-openrisc.c	2007-09-25 15:41:58.000000000 +0200
@@ -365,12 +365,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-ppc.c binutils-stable/bfd/elf32-ppc.c
--- binutils-2.18.50.0.1/bfd/elf32-ppc.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-ppc.c	2007-09-25 15:41:58.000000000 +0200
@@ -3601,8 +3601,8 @@
 static bfd_boolean
 ppc_elf_merge_obj_attributes (bfd *ibfd, bfd *obfd)
 {
-  obj_attribute *in_attr;
-  obj_attribute *out_attr;
+  obj_attribute *in_attr, *in_attrs;
+  obj_attribute *out_attr, *out_attrs;
 
   if (!elf_known_obj_attributes_proc (obfd)[0].i)
     {
@@ -3616,33 +3616,75 @@
       return TRUE;
     }
 
+  in_attrs = elf_known_obj_attributes (ibfd)[OBJ_ATTR_GNU];
+  out_attrs = elf_known_obj_attributes (obfd)[OBJ_ATTR_GNU];
+
   /* Check for conflicting Tag_GNU_Power_ABI_FP attributes and merge
      non-conflicting ones.  */
-  in_attr = elf_known_obj_attributes (ibfd)[OBJ_ATTR_GNU];
-  out_attr = elf_known_obj_attributes (obfd)[OBJ_ATTR_GNU];
-  if (in_attr[Tag_GNU_Power_ABI_FP].i != out_attr[Tag_GNU_Power_ABI_FP].i)
-    {
-      out_attr[Tag_GNU_Power_ABI_FP].type = 1;
-      if (out_attr[Tag_GNU_Power_ABI_FP].i == 0)
-	out_attr[Tag_GNU_Power_ABI_FP].i = in_attr[Tag_GNU_Power_ABI_FP].i;
-      else if (in_attr[Tag_GNU_Power_ABI_FP].i == 0)
+  in_attr = &in_attrs[Tag_GNU_Power_ABI_FP];
+  out_attr = &out_attrs[Tag_GNU_Power_ABI_FP];
+  if (in_attr->i != out_attr->i)
+    {
+      out_attr->type = 1;
+      if (out_attr->i == 0)
+	out_attr->i = in_attr->i;
+      else if (in_attr->i == 0)
 	;
-      else if (out_attr[Tag_GNU_Power_ABI_FP].i == 1
-	       && in_attr[Tag_GNU_Power_ABI_FP].i == 2)
+      else if (out_attr->i == 1 && in_attr->i == 2)
 	_bfd_error_handler
 	  (_("Warning: %B uses hard float, %B uses soft float"), obfd, ibfd);
-      else if (out_attr[Tag_GNU_Power_ABI_FP].i == 2
-	       && in_attr[Tag_GNU_Power_ABI_FP].i == 1)
+      else if (out_attr->i == 2 && in_attr->i == 1)
 	_bfd_error_handler
 	  (_("Warning: %B uses hard float, %B uses soft float"), ibfd, obfd);
-      else if (in_attr[Tag_GNU_Power_ABI_FP].i > 2)
+      else if (in_attr->i > 2)
 	_bfd_error_handler
 	  (_("Warning: %B uses unknown floating point ABI %d"), ibfd,
-	   in_attr[Tag_GNU_Power_ABI_FP].i);
+	   in_attr->i);
       else
 	_bfd_error_handler
 	  (_("Warning: %B uses unknown floating point ABI %d"), obfd,
-	   out_attr[Tag_GNU_Power_ABI_FP].i);
+	   out_attr->i);
+    }
+
+  /* Check for conflicting Tag_GNU_Power_ABI_Vector attributes and
+     merge non-conflicting ones.  */
+  in_attr = &in_attrs[Tag_GNU_Power_ABI_Vector];
+  out_attr = &out_attrs[Tag_GNU_Power_ABI_Vector];
+  if (in_attr->i != out_attr->i)
+    {
+      const char *in_abi = NULL, *out_abi = NULL;
+
+      switch (in_attr->i)
+	{
+	case 1: in_abi = "generic"; break;
+	case 2: in_abi = "AltiVec"; break;
+	case 3: in_abi = "SPE"; break;
+	}
+
+      switch (out_attr->i)
+	{
+	case 1: out_abi = "generic"; break;
+	case 2: out_abi = "AltiVec"; break;
+	case 3: out_abi = "SPE"; break;
+	}
+
+      out_attr->type = 1;
+      if (out_attr->i == 0)
+	out_attr->i = in_attr->i;
+      else if (in_attr->i == 0)
+	;
+      else if (in_abi == NULL)
+	_bfd_error_handler
+	  (_("Warning: %B uses unknown vector ABI %d"), ibfd,
+	   in_attr->i);
+      else if (out_abi == NULL)
+	_bfd_error_handler
+	  (_("Warning: %B uses unknown vector ABI %d"), obfd,
+	   in_attr->i);
+      else
+	_bfd_error_handler
+	  (_("Warning: %B uses vector ABI \"%s\", %B uses \"%s\""),
+	   ibfd, obfd, in_abi, out_abi);
     }
 
   /* Merge Tag_compatibility attributes and any common GNU ones.  */
@@ -5718,12 +5760,10 @@
 	}
       else
 	{
-	  bfd_boolean ignored;
-
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  sym_name = h->root.root.string;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf32-s390.c binutils-stable/bfd/elf32-s390.c
--- binutils-2.18.50.0.1/bfd/elf32-s390.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-s390.c	2007-09-25 15:41:59.000000000 +0200
@@ -2311,12 +2311,11 @@
       else
 	{
 	  bfd_boolean warned ATTRIBUTE_UNUSED;
-	  bfd_boolean ignored ATTRIBUTE_UNUSED;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-spu.c binutils-stable/bfd/elf32-spu.c
--- binutils-2.18.50.0.1/bfd/elf32-spu.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-spu.c	2007-09-25 15:41:58.000000000 +0200
@@ -54,7 +54,7 @@
   HOWTO (R_SPU_ADDR18,     0, 2, 18, FALSE,  7, complain_overflow_bitfield,
 	 bfd_elf_generic_reloc, "SPU_ADDR18",
 	 FALSE, 0, 0x01ffff80, FALSE),
-  HOWTO (R_SPU_ADDR32,     0, 2, 32, FALSE,  0, complain_overflow_dont,
+  HOWTO (R_SPU_ADDR32,   0, 2, 32, FALSE,  0, complain_overflow_dont,
 	 bfd_elf_generic_reloc, "SPU_ADDR32",
 	 FALSE, 0, 0xffffffff, FALSE),
   HOWTO (R_SPU_REL16,      2, 2, 16,  TRUE,  7, complain_overflow_bitfield,
@@ -75,16 +75,16 @@
   HOWTO (R_SPU_ADDR16I,    0, 2, 16, FALSE,  7, complain_overflow_signed,
 	 bfd_elf_generic_reloc, "SPU_ADDR16I",
 	 FALSE, 0, 0x007fff80, FALSE),
-  HOWTO (R_SPU_REL32,      0, 2, 32, TRUE,  0, complain_overflow_dont,
+  HOWTO (R_SPU_REL32,   0, 2, 32, TRUE,  0, complain_overflow_dont,
 	 bfd_elf_generic_reloc, "SPU_REL32",
 	 FALSE, 0, 0xffffffff, TRUE),
   HOWTO (R_SPU_ADDR16X,    0, 2, 16, FALSE,  7, complain_overflow_bitfield,
 	 bfd_elf_generic_reloc, "SPU_ADDR16X",
 	 FALSE, 0, 0x007fff80, FALSE),
-  HOWTO (R_SPU_PPU32,      0, 2, 32, FALSE,  0, complain_overflow_dont,
+  HOWTO (R_SPU_PPU32,   0, 2, 32, FALSE,  0, complain_overflow_dont,
 	 bfd_elf_generic_reloc, "SPU_PPU32",
 	 FALSE, 0, 0xffffffff, FALSE),
-  HOWTO (R_SPU_PPU64,      0, 4, 64, FALSE,  0, complain_overflow_dont,
+  HOWTO (R_SPU_PPU64,   0, 4, 64, FALSE,  0, complain_overflow_dont,
 	 bfd_elf_generic_reloc, "SPU_PPU64",
 	 FALSE, 0, -1, FALSE),
 };
@@ -2724,12 +2724,10 @@
 	}
       else
 	{
-	  bfd_boolean ignored;
-
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	  sym_name = h->root.root.string;
 	}
 
diff -Nur binutils-2.18.50.0.1/bfd/elf32-v850.c binutils-stable/bfd/elf32-v850.c
--- binutils-2.18.50.0.1/bfd/elf32-v850.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-v850.c	2007-09-25 15:41:59.000000000 +0200
@@ -1624,7 +1624,7 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  /* Note - this check is delayed until now as it is possible and
 	     valid to have a file without any symbols but with relocs that
@@ -1641,7 +1641,7 @@
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-vax.c binutils-stable/bfd/elf32-vax.c
--- binutils-2.18.50.0.1/bfd/elf32-vax.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-vax.c	2007-09-25 15:41:59.000000000 +0200
@@ -1415,12 +1415,12 @@
       else
 	{
 	  bfd_boolean unresolved_reloc;
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  if ((h->root.type == bfd_link_hash_defined
 	      || h->root.type == bfd_link_hash_defweak)
diff -Nur binutils-2.18.50.0.1/bfd/elf32-xc16x.c binutils-stable/bfd/elf32-xc16x.c
--- binutils-2.18.50.0.1/bfd/elf32-xc16x.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-xc16x.c	2007-09-25 15:41:59.000000000 +0200
@@ -374,12 +374,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-xstormy16.c binutils-stable/bfd/elf32-xstormy16.c
--- binutils-2.18.50.0.1/bfd/elf32-xstormy16.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-xstormy16.c	2007-09-25 15:41:59.000000000 +0200
@@ -821,12 +821,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf32-xtensa.c binutils-stable/bfd/elf32-xtensa.c
--- binutils-2.18.50.0.1/bfd/elf32-xtensa.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf32-xtensa.c	2007-09-25 15:41:59.000000000 +0200
@@ -2055,12 +2055,10 @@
 	}
       else
 	{
-	  bfd_boolean ignored;
-
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  if (relocation == 0
 	      && !unresolved_reloc
@@ -6928,8 +6926,6 @@
 		      bad_alignment = FALSE;
 		      break;
 		    }
-		  if (new_action->do_action)
-		    removed_bytes += new_action->removed_bytes;
 		}
 	      if (!bad_alignment)
 		{
diff -Nur binutils-2.18.50.0.1/bfd/elf64-alpha.c binutils-stable/bfd/elf64-alpha.c
--- binutils-2.18.50.0.1/bfd/elf64-alpha.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf64-alpha.c	2007-09-25 15:41:59.000000000 +0200
@@ -4176,7 +4176,7 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 	  bfd_boolean unresolved_reloc;
 	  struct elf_link_hash_entry *hh;
 	  struct elf_link_hash_entry **sym_hashes = elf_sym_hashes (input_bfd);
@@ -4184,7 +4184,7 @@
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   hh, sec, value,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  if (warned)
 	    continue;
diff -Nur binutils-2.18.50.0.1/bfd/elf64-mips.c binutils-stable/bfd/elf64-mips.c
--- binutils-2.18.50.0.1/bfd/elf64-mips.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/elf64-mips.c	2007-09-25 15:41:59.000000000 +0200
@@ -3147,8 +3147,6 @@
 #define elf_backend_may_use_rela_p	1
 #define elf_backend_default_use_rela_p	1
 
-#define elf_backend_sign_extend_vma	TRUE
-
 #define elf_backend_write_section	_bfd_mips_elf_write_section
 
 /* We don't set bfd_elf64_bfd_is_local_label_name because the 32-bit
diff -Nur binutils-2.18.50.0.1/bfd/elf64-mmix.c binutils-stable/bfd/elf64-mmix.c
--- binutils-2.18.50.0.1/bfd/elf64-mmix.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf64-mmix.c	2007-09-25 15:41:59.000000000 +0200
@@ -1402,13 +1402,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, ignored;
+	  bfd_boolean unresolved_reloc;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, undefined_signalled,
-				   ignored);
+				   unresolved_reloc, undefined_signalled);
 	  name = h->root.root.string;
 	}
 
diff -Nur binutils-2.18.50.0.1/bfd/elf64-ppc.c binutils-stable/bfd/elf64-ppc.c
--- binutils-2.18.50.0.1/bfd/elf64-ppc.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf64-ppc.c	2007-09-25 15:41:58.000000000 +0200
@@ -5651,8 +5651,6 @@
     {
       fh->elf.root.type = fh->oh->elf.root.type;
       fh->elf.forced_local = 1;
-      fh->elf.def_regular = fh->oh->elf.def_regular;
-      fh->elf.def_dynamic = fh->oh->elf.def_dynamic;
     }
 
   /* If this is a function code symbol, transfer dynamic linking
@@ -9977,12 +9975,10 @@
 	}
       else
 	{
-	  bfd_boolean ignored;
-
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h_elf, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	  sym_name = h_elf->root.root.string;
 	  sym_type = h_elf->type;
 	}
diff -Nur binutils-2.18.50.0.1/bfd/elf64-s390.c binutils-stable/bfd/elf64-s390.c
--- binutils-2.18.50.0.1/bfd/elf64-s390.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf64-s390.c	2007-09-25 15:41:59.000000000 +0200
@@ -2285,12 +2285,11 @@
       else
 	{
 	  bfd_boolean warned ATTRIBUTE_UNUSED;
-	  bfd_boolean ignored ATTRIBUTE_UNUSED;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf64-x86-64.c binutils-stable/bfd/elf64-x86-64.c
--- binutils-2.18.50.0.1/bfd/elf64-x86-64.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf64-x86-64.c	2007-09-25 15:41:59.000000000 +0200
@@ -25,7 +25,6 @@
 #include "bfdlink.h"
 #include "libbfd.h"
 #include "elf-bfd.h"
-#include "bfd_stdint.h"
 
 #include "elf/x86-64.h"
 
@@ -471,8 +470,6 @@
   asection *srelplt;
   asection *sdynbss;
   asection *srelbss;
-  asection *sdynsharablebss;
-  asection *srelsharablebss;
 
   /* The offset into splt of the PLT entry for the TLS descriptor
      resolver.  Special values are 0, if not necessary (or not found
@@ -560,8 +557,6 @@
   ret->srelplt = NULL;
   ret->sdynbss = NULL;
   ret->srelbss = NULL;
-  ret->sdynsharablebss = NULL;
-  ret->srelsharablebss = NULL;
   ret->sym_sec.abfd = NULL;
   ret->tlsdesc_plt = 0;
   ret->tlsdesc_got = 0;
@@ -620,19 +615,10 @@
   htab->srelplt = bfd_get_section_by_name (dynobj, ".rela.plt");
   htab->sdynbss = bfd_get_section_by_name (dynobj, ".dynbss");
   if (!info->shared)
-    {
-      htab->srelbss = bfd_get_section_by_name (dynobj, ".rela.bss");
-      htab->sdynsharablebss
-	= bfd_get_section_by_name (dynobj, ".dynsharablebss");
-      htab->srelsharablebss
-	= bfd_get_section_by_name (dynobj, ".rela.sharable_bss");
-    }
+    htab->srelbss = bfd_get_section_by_name (dynobj, ".rela.bss");
 
   if (!htab->splt || !htab->srelplt || !htab->sdynbss
-      || (!info->shared
-	  && (!htab->srelbss
-	      || !htab->sdynsharablebss
-	      || !htab->srelsharablebss)))
+      || (!info->shared && !htab->srelbss))
     abort ();
 
   return TRUE;
@@ -726,262 +712,26 @@
   return TRUE;
 }
 
-typedef union
-  {
-    unsigned char c[2];
-    uint16_t i;
-  }
-x86_64_opcode16;
-
-typedef union
-  {
-    unsigned char c[4];
-    uint32_t i;
-  }
-x86_64_opcode32;
-
-/* Return TRUE if the TLS access code sequence support transition
-   from R_TYPE.  */
-
-static bfd_boolean
-elf64_x86_64_check_tls_transition (bfd *abfd, asection *sec,
-				   bfd_byte *contents,
-				   Elf_Internal_Shdr *symtab_hdr,
-				   struct elf_link_hash_entry **sym_hashes,
-				   unsigned int r_type,
-				   const Elf_Internal_Rela *rel,
-				   const Elf_Internal_Rela *relend)
-{
-  unsigned int val;
-  unsigned long r_symndx;
-  struct elf_link_hash_entry *h;
-  bfd_vma offset;
-
-  /* Get the section contents.  */
-  if (contents == NULL)
-    {
-      if (elf_section_data (sec)->this_hdr.contents != NULL)
-	contents = elf_section_data (sec)->this_hdr.contents;
-      else
-	{
-	  /* FIXME: How to better handle error condition?  */
-	  if (!bfd_malloc_and_get_section (abfd, sec, &contents))
-	    return FALSE;
-
-	  /* Cache the section contents for elf_link_input_bfd.  */
-	  elf_section_data (sec)->this_hdr.contents = contents;
-	}
-    }
-
-  offset = rel->r_offset;
-  switch (r_type)
-    {
-    case R_X86_64_TLSGD:
-    case R_X86_64_TLSLD:
-      if ((rel + 1) >= relend)
-	return FALSE;
-
-      if (r_type == R_X86_64_TLSGD)
-	{
-	  /* Check transition from GD access model.  Only
-		.byte 0x66; leaq foo@tlsgd(%rip), %rdi
-		.word 0x6666; rex64; call __tls_get_addr
-	     can transit to different access model.  */
-
-	  static x86_64_opcode32 leaq = { { 0x66, 0x48, 0x8d, 0x3d } },
-				 call = { { 0x66, 0x66, 0x48, 0xe8 } };
-	  if (offset < 4
-	      || (offset + 12) > sec->size
-	      || bfd_get_32 (abfd, contents + offset - 4) != leaq.i
-	      || bfd_get_32 (abfd, contents + offset + 4) != call.i)
-	    return FALSE;
-	}
-      else
-	{
-	  /* Check transition from LD access model.  Only
-		leaq foo@tlsld(%rip), %rdi;
-		call __tls_get_addr
-	     can transit to different access model.  */
-
-	  static x86_64_opcode32 ld = { { 0x48, 0x8d, 0x3d, 0xe8 } };
-	  x86_64_opcode32 op;
-
-	  if (offset < 3 || (offset + 9) > sec->size)
-	    return FALSE;
-
-	  op.i = bfd_get_32 (abfd, contents + offset - 3);
-	  op.c[3] = bfd_get_8 (abfd, contents + offset + 4);
-	  if (op.i != ld.i)
-	    return FALSE;
-	}
-
-      r_symndx = ELF64_R_SYM (rel[1].r_info);
-      if (r_symndx < symtab_hdr->sh_info)
-	return FALSE;
-
-      h = sym_hashes[r_symndx - symtab_hdr->sh_info];
-      return (h != NULL
-	      && h->root.root.string != NULL
-	      && (ELF64_R_TYPE (rel[1].r_info) == R_X86_64_PC32
-		  || ELF64_R_TYPE (rel[1].r_info) == R_X86_64_PLT32)
-	      && (strcmp (h->root.root.string, "__tls_get_addr") == 0));
-
-    case R_X86_64_GOTTPOFF:
-      /* Check transition from IE access model:
-		movq foo@gottpoff(%rip), %reg
-		addq foo@gottpoff(%rip), %reg
-       */
-
-      if (offset < 3 || (offset + 4) > sec->size)
-	return FALSE;
-
-      val = bfd_get_8 (abfd, contents + offset - 3);
-      if (val != 0x48 && val != 0x4c)
-	return FALSE;
-
-      val = bfd_get_8 (abfd, contents + offset - 2);
-      if (val != 0x8b && val != 0x03)
-	return FALSE;
-
-      val = bfd_get_8 (abfd, contents + offset - 1);
-      return (val & 0xc7) == 5;
-
-    case R_X86_64_GOTPC32_TLSDESC:
-      /* Check transition from GDesc access model:
-		leaq x@tlsdesc(%rip), %rax
-
-	 Make sure it's a leaq adding rip to a 32-bit offset
-	 into any register, although it's probably almost always
-	 going to be rax.  */
-
-      if (offset < 3 || (offset + 4) > sec->size)
-	return FALSE;
-
-      val = bfd_get_8 (abfd, contents + offset - 3);
-      if ((val & 0xfb) != 0x48)
-	return FALSE;
-
-      if (bfd_get_8 (abfd, contents + offset - 2) != 0x8d)
-	return FALSE;
-
-      val = bfd_get_8 (abfd, contents + offset - 1);
-      return (val & 0xc7) == 0x05;
-
-    case R_X86_64_TLSDESC_CALL:
-      /* Check transition from GDesc access model:
-		call *x@tlsdesc(%rax)
-       */
-      if (offset + 2 <= sec->size)
-	{
-	  /* Make sure that it's a call *x@tlsdesc(%rax).  */
-	  static x86_64_opcode16 call = { { 0xff, 0x10 } };
-	  return bfd_get_16 (abfd, contents + offset) == call.i;
-	}
-
-      return FALSE;
-
-    default:
-      abort ();
-    }
-}
-
-/* Return TRUE if the TLS access transition is OK or no transition
-   will be performed.  Update R_TYPE if there is a transition.  */
-
-static bfd_boolean
-elf64_x86_64_tls_transition (struct bfd_link_info *info, bfd *abfd,
-			     asection *sec, bfd_byte *contents,
-			     Elf_Internal_Shdr *symtab_hdr,
-			     struct elf_link_hash_entry **sym_hashes,
-			     unsigned int *r_type, int tls_type,
-			     const Elf_Internal_Rela *rel,
-			     const Elf_Internal_Rela *relend,
-			     struct elf_link_hash_entry *h)
+static int
+elf64_x86_64_tls_transition (struct bfd_link_info *info, int r_type, int is_local)
 {
-  unsigned int from_type = *r_type;
-  unsigned int to_type = from_type;
-  bfd_boolean check = TRUE;
+  if (info->shared)
+    return r_type;
 
-  switch (from_type)
+  switch (r_type)
     {
     case R_X86_64_TLSGD:
     case R_X86_64_GOTPC32_TLSDESC:
     case R_X86_64_TLSDESC_CALL:
     case R_X86_64_GOTTPOFF:
-      if (!info->shared)
-	{
-	  if (h == NULL)
-	    to_type = R_X86_64_TPOFF32;
-	  else
-	    to_type = R_X86_64_GOTTPOFF;
-	}
-
-      /* When we are called from elf64_x86_64_relocate_section,
-	 CONTENTS isn't NULL and there may be additional transitions
-	 based on TLS_TYPE.  */
-      if (contents != NULL)
-	{
-	  unsigned int new_to_type = to_type;
-
-	  if (!info->shared
-	      && h != NULL
-	      && h->dynindx == -1
-	      && tls_type == GOT_TLS_IE)
-	    new_to_type = R_X86_64_TPOFF32;
-
-	  if (to_type == R_X86_64_TLSGD
-	      || to_type == R_X86_64_GOTPC32_TLSDESC
-	      || to_type == R_X86_64_TLSDESC_CALL)
-	    {
-	      if (tls_type == GOT_TLS_IE)
-		new_to_type = R_X86_64_GOTTPOFF;
-	    }
-
-	  /* We checked the transition before when we were called from
-	     elf64_x86_64_check_relocs.  We only want to check the new
-	     transition which hasn't been checked before.  */
-	  check = new_to_type != to_type && from_type == to_type;
-	  to_type = new_to_type;
-	}
-
-      break;
-
+      if (is_local)
+	return R_X86_64_TPOFF32;
+      return R_X86_64_GOTTPOFF;
     case R_X86_64_TLSLD:
-      if (!info->shared)
-	to_type = R_X86_64_TPOFF32;
-      break;
-
-    default:
-      return TRUE;
-    }
-
-  /* Return TRUE if there is no transition.  */
-  if (from_type == to_type)
-    return TRUE;
-
-  /* Check if the transition can be performed.  */
-  if (check
-      && ! elf64_x86_64_check_tls_transition (abfd, sec, contents,
-					      symtab_hdr, sym_hashes,
-					      from_type, rel, relend))
-    {
-      const reloc_howto_type *from, *to;
-
-      from = elf64_x86_64_rtype_to_howto (abfd, from_type);
-      to = elf64_x86_64_rtype_to_howto (abfd, to_type);
-
-      (*_bfd_error_handler)
-	(_("%B: TLS transition from %s to %s against `%s' at 0x%lx "
-	   "in section `%A' failed"),
-	 abfd, sec, from->name, to->name,
-	 h ? h->root.root.string : "a local symbol",
-	 (unsigned long) rel->r_offset);
-      bfd_set_error (bfd_error_bad_value);
-      return FALSE;
+      return R_X86_64_TPOFF32;
     }
 
-  *r_type = to_type;
-  return TRUE;
+   return r_type;
 }
 
 /* Look through the relocs for a section during the first phase, and
@@ -989,8 +739,7 @@
    linkage table, and dynamic reloc sections.  */
 
 static bfd_boolean
-elf64_x86_64_check_relocs (bfd *abfd, struct bfd_link_info *info,
-			   asection *sec,
+elf64_x86_64_check_relocs (bfd *abfd, struct bfd_link_info *info, asection *sec,
 			   const Elf_Internal_Rela *relocs)
 {
   struct elf64_x86_64_link_hash_table *htab;
@@ -1036,12 +785,7 @@
 	    h = (struct elf_link_hash_entry *) h->root.u.i.link;
 	}
 
-      if (! elf64_x86_64_tls_transition (info, abfd, sec, NULL,
-					 symtab_hdr, sym_hashes,
-					 &r_type, GOT_UNKNOWN,
-					 rel, rel_end, h))
-	return FALSE;
-
+      r_type = elf64_x86_64_tls_transition (info, r_type, h == NULL);
       switch (r_type)
 	{
 	case R_X86_64_TLSLD:
@@ -1428,8 +1172,7 @@
 
 static bfd_boolean
 elf64_x86_64_gc_sweep_hook (bfd *abfd, struct bfd_link_info *info,
-			    asection *sec,
-			    const Elf_Internal_Rela *relocs)
+			    asection *sec, const Elf_Internal_Rela *relocs)
 {
   Elf_Internal_Shdr *symtab_hdr;
   struct elf_link_hash_entry **sym_hashes;
@@ -1472,12 +1215,7 @@
 	}
 
       r_type = ELF64_R_TYPE (rel->r_info);
-      if (! elf64_x86_64_tls_transition (info, abfd, sec, NULL,
-					 symtab_hdr, sym_hashes,
-					 &r_type, GOT_UNKNOWN,
-					 rel, relend, h))
-	return FALSE;
-
+      r_type = elf64_x86_64_tls_transition (info, r_type, h != NULL);
       switch (r_type)
 	{
 	case R_X86_64_TLSLD:
@@ -1658,23 +1396,17 @@
 
   htab = elf64_x86_64_hash_table (info);
 
-  s = htab->sdynbss;
-
   /* We must generate a R_X86_64_COPY reloc to tell the dynamic linker
      to copy the initial value out of the dynamic object and into the
      runtime process image.  */
   if ((h->root.u.def.section->flags & SEC_ALLOC) != 0)
     {
-      if (elf_section_flags (h->root.u.def.section) & SHF_GNU_SHARABLE)
-	{
-	  htab->srelsharablebss->size += sizeof (Elf64_External_Rela);
-	  s = htab->sdynsharablebss;
-	}
-      else
-	htab->srelbss->size += sizeof (Elf64_External_Rela);
+      htab->srelbss->size += sizeof (Elf64_External_Rela);
       h->needs_copy = 1;
     }
 
+  s = htab->sdynbss;
+
   return _bfd_elf_adjust_dynamic_copy (h, s);
 }
 
@@ -2122,8 +1854,7 @@
       if (s == htab->splt
 	  || s == htab->sgot
 	  || s == htab->sgotplt
-	  || s == htab->sdynbss
-	  || s == htab->sdynsharablebss)
+	  || s == htab->sdynbss)
 	{
 	  /* Strip this section if we don't need it; see the
 	     comment below.  */
@@ -2373,12 +2104,12 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
@@ -2770,38 +2501,67 @@
 	case R_X86_64_GOTPC32_TLSDESC:
 	case R_X86_64_TLSDESC_CALL:
 	case R_X86_64_GOTTPOFF:
+	  r_type = elf64_x86_64_tls_transition (info, r_type, h == NULL);
 	  tls_type = GOT_UNKNOWN;
 	  if (h == NULL && local_got_offsets)
 	    tls_type = elf64_x86_64_local_got_tls_type (input_bfd) [r_symndx];
 	  else if (h != NULL)
-	    tls_type = elf64_x86_64_hash_entry (h)->tls_type;
-
-	  if (! elf64_x86_64_tls_transition (info, input_bfd,
-					     input_section, contents,
-					     symtab_hdr, sym_hashes,
-					     &r_type, tls_type, rel,
-					     relend, h))
-	    return FALSE;
+	    {
+	      tls_type = elf64_x86_64_hash_entry (h)->tls_type;
+	      if (!info->shared && h->dynindx == -1 && tls_type == GOT_TLS_IE)
+		r_type = R_X86_64_TPOFF32;
+	    }
+	  if (r_type == R_X86_64_TLSGD
+	      || r_type == R_X86_64_GOTPC32_TLSDESC
+	      || r_type == R_X86_64_TLSDESC_CALL)
+	    {
+	      if (tls_type == GOT_TLS_IE)
+		r_type = R_X86_64_GOTTPOFF;
+	    }
 
 	  if (r_type == R_X86_64_TPOFF32)
 	    {
-	      bfd_vma roff = rel->r_offset;
-
 	      BFD_ASSERT (! unresolved_reloc);
-
 	      if (ELF64_R_TYPE (rel->r_info) == R_X86_64_TLSGD)
 		{
+		  unsigned int i;
+		  static unsigned char tlsgd[8]
+		    = { 0x66, 0x48, 0x8d, 0x3d, 0x66, 0x66, 0x48, 0xe8 };
+		  unsigned long tls_r_symndx;
+		  struct elf_link_hash_entry *tls_h;
+
 		  /* GD->LE transition.
 		     .byte 0x66; leaq foo@tlsgd(%rip), %rdi
 		     .word 0x6666; rex64; call __tls_get_addr
 		     Change it into:
 		     movq %fs:0, %rax
 		     leaq foo@tpoff(%rax), %rax */
-		  memcpy (contents + roff - 4,
+		  BFD_ASSERT (rel->r_offset >= 4);
+		  for (i = 0; i < 4; i++)
+		    BFD_ASSERT (bfd_get_8 (input_bfd,
+					   contents + rel->r_offset - 4 + i)
+				== tlsgd[i]);
+		  BFD_ASSERT (rel->r_offset + 12 <= input_section->size);
+		  for (i = 0; i < 4; i++)
+		    BFD_ASSERT (bfd_get_8 (input_bfd,
+					   contents + rel->r_offset + 4 + i)
+				== tlsgd[i+4]);
+		  BFD_ASSERT (rel + 1 < relend);
+		  tls_r_symndx = ELF64_R_SYM (rel[1].r_info);
+		  BFD_ASSERT (tls_r_symndx >= symtab_hdr->sh_info);
+		  tls_h = sym_hashes[tls_r_symndx - symtab_hdr->sh_info];
+		  BFD_ASSERT (tls_h != NULL
+			      && tls_h->root.root.string != NULL
+			      && strcmp (tls_h->root.root.string,
+					 "__tls_get_addr") == 0);
+		  BFD_ASSERT ((! info->shared
+			       && ELF64_R_TYPE (rel[1].r_info) == R_X86_64_PC32)
+			      || ELF64_R_TYPE (rel[1].r_info) == R_X86_64_PLT32);
+		  memcpy (contents + rel->r_offset - 4,
 			  "\x64\x48\x8b\x04\x25\0\0\0\0\x48\x8d\x80\0\0\0",
 			  16);
 		  bfd_put_32 (output_bfd, tpoff (info, relocation),
-			      contents + roff + 8);
+			      contents + rel->r_offset + 8);
 		  /* Skip R_X86_64_PC32/R_X86_64_PLT32.  */
 		  rel++;
 		  continue;
@@ -2814,13 +2574,26 @@
 
 		     Change it to:
 		     movl $x@tpoff, %rax
-		   */
+
+		     Registers other than %rax may be set up here.  */
 
 		  unsigned int val, type, type2;
+		  bfd_vma roff;
 
+		  /* First, make sure it's a leaq adding rip to a
+		     32-bit offset into any register, although it's
+		     probably almost always going to be rax.  */
+		  roff = rel->r_offset;
+		  BFD_ASSERT (roff >= 3);
 		  type = bfd_get_8 (input_bfd, contents + roff - 3);
+		  BFD_ASSERT ((type & 0xfb) == 0x48);
 		  type2 = bfd_get_8 (input_bfd, contents + roff - 2);
+		  BFD_ASSERT (type2 == 0x8d);
 		  val = bfd_get_8 (input_bfd, contents + roff - 1);
+		  BFD_ASSERT ((val & 0xc7) == 0x05);
+		  BFD_ASSERT (roff + 4 <= input_section->size);
+
+		  /* Now modify the instruction as appropriate.  */
 		  bfd_put_8 (output_bfd, 0x48 | ((type >> 2) & 1),
 			     contents + roff - 3);
 		  bfd_put_8 (output_bfd, 0xc7, contents + roff - 2);
@@ -2836,13 +2609,29 @@
 		     It's originally:
 		     call *(%rax)
 		     Turn it into:
-		     xchg %ax,%ax.  */
+		     nop; nop.  */
+
+		  unsigned int val, type;
+		  bfd_vma roff;
+
+		  /* First, make sure it's a call *(%rax).  */
+		  roff = rel->r_offset;
+		  BFD_ASSERT (roff + 2 <= input_section->size);
+		  type = bfd_get_8 (input_bfd, contents + roff);
+		  BFD_ASSERT (type == 0xff);
+		  val = bfd_get_8 (input_bfd, contents + roff + 1);
+		  BFD_ASSERT (val == 0x10);
+
+		  /* Now modify the instruction as appropriate.  Use
+		     xchg %ax,%ax instead of 2 nops.  */
 		  bfd_put_8 (output_bfd, 0x66, contents + roff);
 		  bfd_put_8 (output_bfd, 0x90, contents + roff + 1);
 		  continue;
 		}
-	      else if (ELF64_R_TYPE (rel->r_info) == R_X86_64_GOTTPOFF)
+	      else
 		{
+		  unsigned int val, type, reg;
+
 		  /* IE->LE transition:
 		     Originally it can be one of:
 		     movq foo@gottpoff(%rip), %reg
@@ -2851,23 +2640,25 @@
 		     movq $foo, %reg
 		     leaq foo(%reg), %reg
 		     addq $foo, %reg.  */
-
-		  unsigned int val, type, reg;
-
-		  val = bfd_get_8 (input_bfd, contents + roff - 3);
-		  type = bfd_get_8 (input_bfd, contents + roff - 2);
-		  reg = bfd_get_8 (input_bfd, contents + roff - 1);
+		  BFD_ASSERT (rel->r_offset >= 3);
+		  val = bfd_get_8 (input_bfd, contents + rel->r_offset - 3);
+		  BFD_ASSERT (val == 0x48 || val == 0x4c);
+		  type = bfd_get_8 (input_bfd, contents + rel->r_offset - 2);
+		  BFD_ASSERT (type == 0x8b || type == 0x03);
+		  reg = bfd_get_8 (input_bfd, contents + rel->r_offset - 1);
+		  BFD_ASSERT ((reg & 0xc7) == 5);
 		  reg >>= 3;
+		  BFD_ASSERT (rel->r_offset + 4 <= input_section->size);
 		  if (type == 0x8b)
 		    {
 		      /* movq */
 		      if (val == 0x4c)
 			bfd_put_8 (output_bfd, 0x49,
-				   contents + roff - 3);
+				   contents + rel->r_offset - 3);
 		      bfd_put_8 (output_bfd, 0xc7,
-				 contents + roff - 2);
+				 contents + rel->r_offset - 2);
 		      bfd_put_8 (output_bfd, 0xc0 | reg,
-				 contents + roff - 1);
+				 contents + rel->r_offset - 1);
 		    }
 		  else if (reg == 4)
 		    {
@@ -2875,29 +2666,27 @@
 			 special  */
 		      if (val == 0x4c)
 			bfd_put_8 (output_bfd, 0x49,
-				   contents + roff - 3);
+				   contents + rel->r_offset - 3);
 		      bfd_put_8 (output_bfd, 0x81,
-				 contents + roff - 2);
+				 contents + rel->r_offset - 2);
 		      bfd_put_8 (output_bfd, 0xc0 | reg,
-				 contents + roff - 1);
+				 contents + rel->r_offset - 1);
 		    }
 		  else
 		    {
 		      /* addq -> leaq */
 		      if (val == 0x4c)
 			bfd_put_8 (output_bfd, 0x4d,
-				   contents + roff - 3);
+				   contents + rel->r_offset - 3);
 		      bfd_put_8 (output_bfd, 0x8d,
-				 contents + roff - 2);
+				 contents + rel->r_offset - 2);
 		      bfd_put_8 (output_bfd, 0x80 | reg | (reg << 3),
-				 contents + roff - 1);
+				 contents + rel->r_offset - 1);
 		    }
 		  bfd_put_32 (output_bfd, tpoff (info, relocation),
-			      contents + roff);
+			      contents + rel->r_offset);
 		  continue;
 		}
-	      else
-		BFD_ASSERT (FALSE);
 	    }
 
 	  if (htab->sgot == NULL)
@@ -3024,104 +2813,151 @@
 		  + htab->sgot->output_offset + off;
 	      unresolved_reloc = FALSE;
 	    }
-	  else
+	  else if (ELF64_R_TYPE (rel->r_info) == R_X86_64_TLSGD)
 	    {
-	      bfd_vma roff = rel->r_offset;
-
-	      if (ELF64_R_TYPE (rel->r_info) == R_X86_64_TLSGD)
-		{
-		  /* GD->IE transition.
-		     .byte 0x66; leaq foo@tlsgd(%rip), %rdi
-		     .word 0x6666; rex64; call __tls_get_addr@plt
-		     Change it into:
-		     movq %fs:0, %rax
-		     addq foo@gottpoff(%rip), %rax */
-		  memcpy (contents + roff - 4,
-			  "\x64\x48\x8b\x04\x25\0\0\0\0\x48\x03\x05\0\0\0",
-			  16);
-
-		  relocation = (htab->sgot->output_section->vma
-				+ htab->sgot->output_offset + off
-				- roff
-				- input_section->output_section->vma
-				- input_section->output_offset
-				- 12);
-		  bfd_put_32 (output_bfd, relocation,
-			      contents + roff + 8);
-		  /* Skip R_X86_64_PLT32.  */
-		  rel++;
-		  continue;
-		}
-	      else if (ELF64_R_TYPE (rel->r_info) == R_X86_64_GOTPC32_TLSDESC)
-		{
-		  /* GDesc -> IE transition.
-		     It's originally something like:
-		     leaq x@tlsdesc(%rip), %rax
-
-		     Change it to:
-		     movq x@gottpoff(%rip), %rax # before xchg %ax,%ax
-		   */
-
-		  unsigned int val, type, type2;
-
-		  type = bfd_get_8 (input_bfd, contents + roff - 3);
-		  type2 = bfd_get_8 (input_bfd, contents + roff - 2);
-		  val = bfd_get_8 (input_bfd, contents + roff - 1);
-
-		  /* Now modify the instruction as appropriate. To
-		     turn a leaq into a movq in the form we use it, it
-		     suffices to change the second byte from 0x8d to
-		     0x8b.  */
-		  bfd_put_8 (output_bfd, 0x8b, contents + roff - 2);
-
-		  bfd_put_32 (output_bfd,
-			      htab->sgot->output_section->vma
-			      + htab->sgot->output_offset + off
-			      - rel->r_offset
-			      - input_section->output_section->vma
-			      - input_section->output_offset
-			      - 4,
-			      contents + roff);
-		  continue;
-		}
-	      else if (ELF64_R_TYPE (rel->r_info) == R_X86_64_TLSDESC_CALL)
-		{
-		  /* GDesc -> IE transition.
-		     It's originally:
-		     call *(%rax)
-
-		     Change it to:
-		     xchg %ax,%ax.  */
+	      unsigned int i;
+	      static unsigned char tlsgd[8]
+		= { 0x66, 0x48, 0x8d, 0x3d, 0x66, 0x66, 0x48, 0xe8 };
+
+	      /* GD->IE transition.
+		 .byte 0x66; leaq foo@tlsgd(%rip), %rdi
+		 .word 0x6666; rex64; call __tls_get_addr@plt
+		 Change it into:
+		 movq %fs:0, %rax
+		 addq foo@gottpoff(%rip), %rax */
+	      BFD_ASSERT (rel->r_offset >= 4);
+	      for (i = 0; i < 4; i++)
+		BFD_ASSERT (bfd_get_8 (input_bfd,
+				       contents + rel->r_offset - 4 + i)
+			    == tlsgd[i]);
+	      BFD_ASSERT (rel->r_offset + 12 <= input_section->size);
+	      for (i = 0; i < 4; i++)
+		BFD_ASSERT (bfd_get_8 (input_bfd,
+				       contents + rel->r_offset + 4 + i)
+			    == tlsgd[i+4]);
+	      BFD_ASSERT (rel + 1 < relend);
+	      BFD_ASSERT (ELF64_R_TYPE (rel[1].r_info) == R_X86_64_PLT32);
+	      memcpy (contents + rel->r_offset - 4,
+		      "\x64\x48\x8b\x04\x25\0\0\0\0\x48\x03\x05\0\0\0",
+		      16);
+
+	      relocation = (htab->sgot->output_section->vma
+			    + htab->sgot->output_offset + off
+			    - rel->r_offset
+			    - input_section->output_section->vma
+			    - input_section->output_offset
+			    - 12);
+	      bfd_put_32 (output_bfd, relocation,
+			  contents + rel->r_offset + 8);
+	      /* Skip R_X86_64_PLT32.  */
+	      rel++;
+	      continue;
+	    }
+	  else if (ELF64_R_TYPE (rel->r_info) == R_X86_64_GOTPC32_TLSDESC)
+	    {
+	      /* GDesc -> IE transition.
+		 It's originally something like:
+		 leaq x@tlsdesc(%rip), %rax
+
+		 Change it to:
+		 movq x@gottpoff(%rip), %rax # before nop; nop
+
+		 Registers other than %rax may be set up here.  */
+
+	      unsigned int val, type, type2;
+	      bfd_vma roff;
+
+	      /* First, make sure it's a leaq adding rip to a 32-bit
+		 offset into any register, although it's probably
+		 almost always going to be rax.  */
+	      roff = rel->r_offset;
+	      BFD_ASSERT (roff >= 3);
+	      type = bfd_get_8 (input_bfd, contents + roff - 3);
+	      BFD_ASSERT ((type & 0xfb) == 0x48);
+	      type2 = bfd_get_8 (input_bfd, contents + roff - 2);
+	      BFD_ASSERT (type2 == 0x8d);
+	      val = bfd_get_8 (input_bfd, contents + roff - 1);
+	      BFD_ASSERT ((val & 0xc7) == 0x05);
+	      BFD_ASSERT (roff + 4 <= input_section->size);
+
+	      /* Now modify the instruction as appropriate.  */
+	      /* To turn a leaq into a movq in the form we use it, it
+		 suffices to change the second byte from 0x8d to
+		 0x8b.  */
+	      bfd_put_8 (output_bfd, 0x8b, contents + roff - 2);
 
-		  unsigned int val, type;
+	      bfd_put_32 (output_bfd,
+			  htab->sgot->output_section->vma
+			  + htab->sgot->output_offset + off
+			  - rel->r_offset
+			  - input_section->output_section->vma
+			  - input_section->output_offset
+			  - 4,
+			  contents + roff);
+	      continue;
+	    }
+	  else if (ELF64_R_TYPE (rel->r_info) == R_X86_64_TLSDESC_CALL)
+	    {
+	      /* GDesc -> IE transition.
+		 It's originally:
+		 call *(%rax)
+
+		 Change it to:
+		 nop; nop.  */
+
+	      unsigned int val, type;
+	      bfd_vma roff;
+
+	      /* First, make sure it's a call *(%eax).  */
+	      roff = rel->r_offset;
+	      BFD_ASSERT (roff + 2 <= input_section->size);
+	      type = bfd_get_8 (input_bfd, contents + roff);
+	      BFD_ASSERT (type == 0xff);
+	      val = bfd_get_8 (input_bfd, contents + roff + 1);
+	      BFD_ASSERT (val == 0x10);
+
+	      /* Now modify the instruction as appropriate.  Use
+		 xchg %ax,%ax instead of 2 nops.  */
+	      bfd_put_8 (output_bfd, 0x66, contents + roff);
+	      bfd_put_8 (output_bfd, 0x90, contents + roff + 1);
 
-		  type = bfd_get_8 (input_bfd, contents + roff);
-		  val = bfd_get_8 (input_bfd, contents + roff + 1);
-		  bfd_put_8 (output_bfd, 0x66, contents + roff);
-		  bfd_put_8 (output_bfd, 0x90, contents + roff + 1);
-		  continue;
-		}
-	      else
-		BFD_ASSERT (FALSE);
+	      continue;
 	    }
+	  else
+	    BFD_ASSERT (FALSE);
 	  break;
 
 	case R_X86_64_TLSLD:
-	  if (! elf64_x86_64_tls_transition (info, input_bfd,
-					     input_section, contents,
-					     symtab_hdr, sym_hashes,
-					     &r_type, GOT_UNKNOWN,
-					     rel, relend, h))
-	    return FALSE;
-
-	  if (r_type != R_X86_64_TLSLD)
+	  if (! info->shared)
 	    {
+	      unsigned long tls_r_symndx;
+	      struct elf_link_hash_entry *tls_h;
+
 	      /* LD->LE transition:
+		 Ensure it is:
 		 leaq foo@tlsld(%rip), %rdi; call __tls_get_addr.
 		 We change it into:
 		 .word 0x6666; .byte 0x66; movl %fs:0, %rax.  */
-
-	      BFD_ASSERT (r_type == R_X86_64_TPOFF32);
+	      BFD_ASSERT (rel->r_offset >= 3);
+	      BFD_ASSERT (bfd_get_8 (input_bfd, contents + rel->r_offset - 3)
+			  == 0x48);
+	      BFD_ASSERT (bfd_get_8 (input_bfd, contents + rel->r_offset - 2)
+			  == 0x8d);
+	      BFD_ASSERT (bfd_get_8 (input_bfd, contents + rel->r_offset - 1)
+			  == 0x3d);
+	      BFD_ASSERT (rel->r_offset + 9 <= input_section->size);
+	      BFD_ASSERT (bfd_get_8 (input_bfd, contents + rel->r_offset + 4)
+			  == 0xe8);
+	      BFD_ASSERT (rel + 1 < relend);
+	      tls_r_symndx = ELF64_R_SYM (rel[1].r_info);
+	      BFD_ASSERT (tls_r_symndx >= symtab_hdr->sh_info);
+	      tls_h = sym_hashes[tls_r_symndx - symtab_hdr->sh_info];
+	      BFD_ASSERT (tls_h != NULL
+			  && tls_h->root.root.string != NULL
+			  && strcmp (tls_h->root.root.string,
+				     "__tls_get_addr") == 0);
+	      BFD_ASSERT (ELF64_R_TYPE (rel[1].r_info) == R_X86_64_PC32
+			  || ELF64_R_TYPE (rel[1].r_info) == R_X86_64_PLT32);
 	      memcpy (contents + rel->r_offset - 3,
 		      "\x66\x66\x66\x64\x48\x8b\x04\x25\0\0\0", 12);
 	      /* Skip R_X86_64_PC32/R_X86_64_PLT32.  */
@@ -3379,19 +3215,13 @@
     {
       Elf_Internal_Rela rela;
       bfd_byte *loc;
-      asection *s;
-
-      if (h->root.u.def.section == htab->sdynsharablebss)
-	s = htab->srelsharablebss;
-      else
-	s = htab->srelbss;
 
       /* This symbol needs a copy reloc.  Set it up.  */
 
       if (h->dynindx == -1
 	  || (h->root.type != bfd_link_hash_defined
 	      && h->root.type != bfd_link_hash_defweak)
-	  || s == NULL)
+	  || htab->srelbss == NULL)
 	abort ();
 
       rela.r_offset = (h->root.u.def.value
@@ -3399,8 +3229,8 @@
 		       + h->root.u.def.section->output_offset);
       rela.r_info = ELF64_R_INFO (h->dynindx, R_X86_64_COPY);
       rela.r_addend = 0;
-      loc = s->contents;
-      loc += s->reloc_count++ * sizeof (Elf64_External_Rela);
+      loc = htab->srelbss->contents;
+      loc += htab->srelbss->reloc_count++ * sizeof (Elf64_External_Rela);
       bfd_elf64_swap_reloca_out (output_bfd, &rela, loc);
     }
 
@@ -3664,12 +3494,9 @@
 	}
       *secp = lcomm;
       *valp = sym->st_size;
-      return TRUE;
       break;
     }
-
-  return _bfd_elf_add_sharable_symbol (abfd, info, sym, namep, flagsp,
-				       secp, valp);
+  return TRUE;
 }
 
 
@@ -3685,7 +3512,7 @@
       *index = SHN_X86_64_LCOMMON;
       return TRUE;
     }
-  return _bfd_elf_sharable_section_from_bfd_section (abfd, sec, index);
+  return FALSE;
 }
 
 /* Process a symbol.  */
@@ -3703,26 +3530,22 @@
       asym->value = elfsym->internal_elf_sym.st_size;
       /* Common symbol doesn't set BSF_GLOBAL.  */
       asym->flags &= ~BSF_GLOBAL;
-      return;
       break;
     }
-  
-  _bfd_elf_sharable_symbol_processing (abfd, asym);
 }
 
 static bfd_boolean
 elf64_x86_64_common_definition (Elf_Internal_Sym *sym)
 {
   return (sym->st_shndx == SHN_COMMON
-	  || sym->st_shndx == SHN_X86_64_LCOMMON
-	  || _bfd_elf_sharable_common_definition (sym));
+	  || sym->st_shndx == SHN_X86_64_LCOMMON);
 }
 
 static unsigned int
 elf64_x86_64_common_section_index (asection *sec)
 {
   if ((elf_section_flags (sec) & SHF_X86_64_LARGE) == 0)
-    return _bfd_elf_sharable_common_section_index (sec);
+    return SHN_COMMON;
   else
     return SHN_X86_64_LCOMMON;
 }
@@ -3731,7 +3554,7 @@
 elf64_x86_64_common_section (asection *sec)
 {
   if ((elf_section_flags (sec) & SHF_X86_64_LARGE) == 0)
-    return _bfd_elf_sharable_common_section (sec);
+    return bfd_com_section_ptr;
   else
     return &_bfd_elf_large_com_section;
 }
@@ -3768,8 +3591,7 @@
       && h->root.type == bfd_link_hash_common
       && !*newdyn
       && bfd_is_com_section (*sec)
-      && *oldsec != *sec
-      && _bfd_elf_sharable_common_section_index (*oldsec) == SHN_COMMON)
+      && *oldsec != *sec)
     {
       if (sym->st_shndx == SHN_COMMON
 	  && (elf_section_flags (*oldsec) & SHF_X86_64_LARGE) != 0)
@@ -3777,26 +3599,13 @@
 	  h->root.u.c.p->section
 	    = bfd_make_section_old_way (oldbfd, "COMMON");
 	  h->root.u.c.p->section->flags = SEC_ALLOC;
-	  return TRUE;
 	}
       else if (sym->st_shndx == SHN_X86_64_LCOMMON
 	       && (elf_section_flags (*oldsec) & SHF_X86_64_LARGE) == 0)
-	{
-	  *psec = *sec = bfd_com_section_ptr; 
-	  return TRUE;
-	}
+	*psec = *sec = bfd_com_section_ptr; 
     }
 
-  return _bfd_elf_sharable_merge_symbol (info, sym_hash, h, sym,
-					 psec, pvalue, pold_alignment,
-					 skip, override,
-					 type_change_ok, size_change_ok,
-					 newdyn, newdef,
-					 newdyncommon, newweak,
-					 abfd, sec,
-					 olddyn, olddef,
-					 olddyncommon, oldweak,
-					 oldbfd, oldsec);
+  return TRUE;
 }
 
 static int
@@ -3804,7 +3613,7 @@
 					 struct bfd_link_info *info ATTRIBUTE_UNUSED)
 {
   asection *s;
-  int count = 0;
+  int count = 0; 
 
   /* Check to see if we need a large readonly segment.  */
   s = bfd_get_section_by_name (abfd, ".lrodata");
@@ -3834,7 +3643,7 @@
   return _bfd_elf_hash_symbol (h);
 }
 
-static const struct bfd_elf_special_section
+static const struct bfd_elf_special_section 
   elf64_x86_64_special_sections[]=
 {
   { STRING_COMMA_LEN (".gnu.linkonce.lb"), -2, SHT_NOBITS,   SHF_ALLOC + SHF_WRITE + SHF_X86_64_LARGE},
diff -Nur binutils-2.18.50.0.1/bfd/elf-bfd.h binutils-stable/bfd/elf-bfd.h
--- binutils-2.18.50.0.1/bfd/elf-bfd.h	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf-bfd.h	2007-09-25 15:41:59.000000000 +0200
@@ -1428,6 +1428,9 @@
   /* Segment flags for the PT_GNU_STACK segment.  */
   unsigned int stack_flags;
 
+  /* Should the PT_GNU_RELRO segment be emitted?  */
+  bfd_boolean relro;
+
   /* Symbol version definitions in external objects.  */
   Elf_Internal_Verdef *verdef;
 
@@ -1469,10 +1472,6 @@
   /* Called at the end of _bfd_elf_write_object_contents if not NULL.  */
   bfd_boolean (*after_write_object_contents) (bfd *);
   void *after_write_object_contents_info;
-
-  /* NT_GNU_BUILD_ID note type.  */
-  bfd_size_type build_id_size;
-  bfd_byte *build_id;
 };
 
 #define elf_tdata(bfd)		((bfd) -> tdata.elf_obj_data)
@@ -1620,6 +1619,8 @@
   (asection *, struct bfd_link_info *);
 extern void _bfd_elf_link_just_syms
   (asection *, struct bfd_link_info *);
+extern void _bfd_elf_copy_link_hash_symbol_type
+  (bfd *, struct bfd_link_hash_entry *, struct bfd_link_hash_entry *);
 extern bfd_boolean _bfd_elf_copy_private_header_data
   (bfd *, bfd *);
 extern bfd_boolean _bfd_elf_copy_private_symbol_data
@@ -1933,28 +1934,6 @@
   (bfd *, struct bfd_link_info *);
 extern bfd_boolean _bfd_elf_add_dynamic_entry
   (struct bfd_link_info *, bfd_vma, bfd_vma);
-extern asection _bfd_elf_sharable_com_section;
-extern bfd_boolean _bfd_elf_add_sharable_symbol
-  (bfd *, struct bfd_link_info *, Elf_Internal_Sym *, const char **,
-   flagword *, asection **, bfd_vma *);
-extern bfd_boolean _bfd_elf_sharable_section_from_bfd_section
-  (bfd *, asection *, int *);
-extern void _bfd_elf_sharable_symbol_processing
-  (bfd *, asymbol *);
-extern bfd_boolean _bfd_elf_sharable_common_definition
-  (Elf_Internal_Sym *);
-extern unsigned int _bfd_elf_sharable_common_section_index
-  (asection *);
-extern asection *_bfd_elf_sharable_common_section
-  (asection *);
-extern bfd_boolean _bfd_elf_sharable_merge_symbol
-  (struct bfd_link_info *, struct elf_link_hash_entry **,
-   struct elf_link_hash_entry *, Elf_Internal_Sym *, asection **,
-   bfd_vma *, unsigned int *, bfd_boolean *, bfd_boolean *,
-   bfd_boolean *, bfd_boolean *, bfd_boolean *, bfd_boolean *,
-   bfd_boolean *, bfd_boolean *, bfd *, asection **,
-   bfd_boolean *, bfd_boolean *, bfd_boolean *, bfd_boolean *,
-   bfd *, asection **);
 
 extern bfd_boolean bfd_elf_link_record_dynamic_symbol
   (struct bfd_link_info *, struct elf_link_hash_entry *);
@@ -2090,7 +2069,7 @@
 #define RELOC_FOR_GLOBAL_SYMBOL(info, input_bfd, input_section, rel,	\
 				r_symndx, symtab_hdr, sym_hashes,	\
 				h, sec, relocation,			\
-				unresolved_reloc, warned, ignored)	\
+				unresolved_reloc, warned)		\
   do									\
     {									\
       /* It seems this can happen with erroneous or unsupported		\
@@ -2105,7 +2084,6 @@
 	h = (struct elf_link_hash_entry *) h->root.u.i.link;		\
 									\
       warned = FALSE;							\
-      ignored = FALSE;							\
       unresolved_reloc = FALSE;						\
       relocation = 0;							\
       if (h->root.type == bfd_link_hash_defined				\
@@ -2128,7 +2106,7 @@
 	;								\
       else if (info->unresolved_syms_in_objects == RM_IGNORE		\
 	       && ELF_ST_VISIBILITY (h->other) == STV_DEFAULT)		\
-	ignored = TRUE;							\
+	;								\
       else if (!info->relocatable)					\
 	{								\
 	  bfd_boolean err;						\
diff -Nur binutils-2.18.50.0.1/bfd/elf.c binutils-stable/bfd/elf.c
--- binutils-2.18.50.0.1/bfd/elf.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf.c	2007-09-25 15:41:58.000000000 +0200
@@ -48,9 +48,7 @@
 static bfd_boolean assign_file_positions_except_relocs (bfd *, struct bfd_link_info *);
 static bfd_boolean prep_headers (bfd *);
 static bfd_boolean swap_out_syms (bfd *, struct bfd_strtab_hash **, int) ;
-static bfd_boolean elf_read_notes (bfd *, file_ptr, bfd_size_type) ;
-static bfd_boolean elf_parse_notes (bfd *abfd, char *buf, size_t size,
-				    file_ptr offset);
+static bfd_boolean elfcore_read_notes (bfd *, file_ptr, bfd_size_type) ;
 
 /* Swap version information in and out.  The version information is
    currently size independent.  If that ever changes, this code will
@@ -901,28 +899,6 @@
   if (! bfd_set_section_flags (abfd, newsect, flags))
     return FALSE;
 
-  /* We do not parse the PT_NOTE segments as we are interested even in the
-     separate debug info files which may have the segments offsets corrupted.
-     PT_NOTEs from the core files are currently not parsed using BFD.  */
-  if (hdr->sh_type == SHT_NOTE)
-    {
-      char *contents;
-
-      contents = bfd_malloc (hdr->sh_size);
-      if (!contents)
-	return FALSE;
-
-      if (!bfd_get_section_contents (abfd, hdr->bfd_section, contents, 0,
-				     hdr->sh_size)
-	  || !elf_parse_notes (abfd, contents, hdr->sh_size, -1))
-	{
-	  free (contents);
-	  return FALSE;
-	}
-      
-      free (contents);
-    }
-
   if ((flags & SEC_ALLOC) != 0)
     {
       Elf_Internal_Phdr *phdr;
@@ -2016,8 +1992,6 @@
   { STRING_COMMA_LEN (".gnu.liblist"),     0, SHT_GNU_LIBLIST, SHF_ALLOC },
   { STRING_COMMA_LEN (".gnu.conflict"),    0, SHT_RELA,        SHF_ALLOC },
   { STRING_COMMA_LEN (".gnu.hash"),        0, SHT_GNU_HASH,    SHF_ALLOC },
-  { STRING_COMMA_LEN (".gnu.linkonce.shrb"), -2, SHT_NOBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
-  { STRING_COMMA_LEN (".gnu.linkonce.shrd"), -2, SHT_PROGBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
   { NULL,                        0,        0, 0,               0 }
 };
 
@@ -2072,8 +2046,6 @@
   /* See struct bfd_elf_special_section declaration for the semantics of
      this special case where .prefix_length != strlen (.prefix).  */
   { ".stabstr",			5,  3, SHT_STRTAB, 0 },
-  { STRING_COMMA_LEN (".sharable_bss"), -2, SHT_NOBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
-  { STRING_COMMA_LEN (".sharable_data"), -2, SHT_PROGBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
   { NULL,                       0,  0, 0,          0 }
 };
 
@@ -2088,7 +2060,7 @@
 static const struct bfd_elf_special_section *special_sections[] =
 {
   special_sections_b,		/* 'b' */
-  special_sections_c,		/* 'c' */
+  special_sections_c,		/* 'b' */
   special_sections_d,		/* 'd' */
   NULL,				/* 'e' */
   special_sections_f,		/* 'f' */
@@ -2369,7 +2341,7 @@
     case PT_NOTE:
       if (! _bfd_elf_make_section_from_phdr (abfd, hdr, index, "note"))
 	return FALSE;
-      if (! elf_read_notes (abfd, hdr->p_offset, hdr->p_filesz))
+      if (! elfcore_read_notes (abfd, hdr->p_offset, hdr->p_filesz))
 	return FALSE;
       return TRUE;
 
@@ -2479,28 +2451,16 @@
 
   /* If the section type is unspecified, we set it based on
      asect->flags.  */
-  if ((asect->flags & SEC_GROUP) != 0)
-    sh_type = SHT_GROUP;
-  else if ((asect->flags & SEC_ALLOC) != 0
-	   && (((asect->flags & (SEC_LOAD | SEC_HAS_CONTENTS)) == 0)
-	       || (asect->flags & SEC_NEVER_LOAD) != 0))
-    sh_type = SHT_NOBITS;
-  else
-    sh_type = SHT_PROGBITS;
-
   if (this_hdr->sh_type == SHT_NULL)
-    this_hdr->sh_type = sh_type;
-  else if (this_hdr->sh_type == SHT_NOBITS
-	   && sh_type == SHT_PROGBITS
-	   && (asect->flags & SEC_ALLOC) != 0)
-    {
-      /* Warn if we are changing a NOBITS section to PROGBITS, but
-	 allow the link to proceed.  This can happen when users link
-	 non-bss input sections to bss output sections, or emit data
-	 to a bss output section via a linker script.  */
-      (*_bfd_error_handler)
-	(_("section `%A' type changed to PROGBITS"), asect);
-      this_hdr->sh_type = sh_type;
+    {
+      if ((asect->flags & SEC_GROUP) != 0)
+	this_hdr->sh_type = SHT_GROUP;
+      else if ((asect->flags & SEC_ALLOC) != 0
+	       && (((asect->flags & (SEC_LOAD | SEC_HAS_CONTENTS)) == 0)
+		   || (asect->flags & SEC_NEVER_LOAD) != 0))
+	this_hdr->sh_type = SHT_NOBITS;
+      else
+	this_hdr->sh_type = SHT_PROGBITS;
     }
 
   switch (this_hdr->sh_type)
@@ -3361,7 +3321,7 @@
       /* We need a PT_DYNAMIC segment.  */
       ++segs;
 
-      if (info->relro)
+      if (elf_tdata (abfd)->relro)
 	{
 	  /* We need a PT_GNU_RELRO segment only when there is a
 	     PT_DYNAMIC segment.  */
@@ -3414,32 +3374,6 @@
 	}
     }
 
-  /* Check to see if we need a PT_GNU_SHR segment for sharable data
-     sections.  */
-  for (s = abfd->sections; s != NULL; s = s->next)
-    {
-      if ((elf_section_flags (s) & SHF_GNU_SHARABLE) != 0
-	  && elf_section_type (s) == SHT_PROGBITS)
-	{
-	  /* We need a PT_GNU_SHR segment.  */
-	  ++segs;
-	  break;
-	}
-    }
-
-  /* Check to see if we need a PT_GNU_SHR segment for sharable bss
-     sections.  */
-  for (s = abfd->sections; s != NULL; s = s->next)
-    {
-      if ((elf_section_flags (s) & SHF_GNU_SHARABLE) != 0
-	  && elf_section_type (s) == SHT_NOBITS)
-	{
-	  /* We need a PT_GNU_SHR segment.  */
-	  ++segs;
-	  break;
-	}
-    }
-
   /* Let the backend count up any program headers it might need.  */
   bed = get_elf_backend_data (abfd);
   if (bed->elf_backend_additional_program_headers)
@@ -3583,8 +3517,6 @@
       bfd_boolean phdr_in_segment = TRUE;
       bfd_boolean writable;
       int tls_count = 0;
-      int sharable_data_count = 0, sharable_bss_count = 0;
-      asection *first_sharable_data = NULL, *first_sharable_bss = NULL;
       asection *first_tls = NULL;
       asection *dynsec, *eh_frame_hdr;
       bfd_size_type amt;
@@ -3856,22 +3788,6 @@
 		first_tls = s;
 	      tls_count++;
 	    }
-	  if (elf_section_flags (s) & SHF_GNU_SHARABLE)
-	    {
-	      if (elf_section_type (s) == SHT_PROGBITS)
-		{
-		  if (! sharable_data_count)
-		    first_sharable_data = s;
-		  sharable_data_count++;
-		}
-	      else
-		{
-		  BFD_ASSERT (elf_section_type (s) == SHT_NOBITS);
-		  if (! sharable_bss_count)
-		    first_sharable_bss = s;
-		  sharable_bss_count++;
-		}
-	    }
 	}
 
       /* If there are any SHF_TLS output sections, add PT_TLS segment.  */
@@ -3901,60 +3817,6 @@
 	  pm = &m->next;
 	}
 
-      /* If there are any output SHF_GNU_SHARABLE data sections, add a
-	 PT_GNU_SHR segment.  */
-      if (sharable_data_count > 0)
-	{
-	  int i;
-
-	  amt = sizeof (struct elf_segment_map);
-	  amt += (sharable_data_count - 1) * sizeof (asection *);
-	  m = bfd_zalloc (abfd, amt);
-	  if (m == NULL)
-	    goto error_return;
-	  m->next = NULL;
-	  m->p_type = PT_GNU_SHR;
-	  m->count = sharable_data_count;
-	  /* Mandated PF_R.  */
-	  m->p_flags = PF_R;
-	  m->p_flags_valid = 1;
-	  for (i = 0; i < sharable_data_count; ++i)
-	    {
-	      m->sections[i] = first_sharable_data;
-	      first_sharable_data = first_sharable_data->next;
-	    }
-
-	  *pm = m;
-	   pm = &m->next;
-	}
-
-      /* If there are any output SHF_GNU_SHARABLE bss sections, add a
-	 PT_GNU_SHR segment.  */
-      if (sharable_bss_count > 0)
-	{
-	  int i;
-
-	  amt = sizeof (struct elf_segment_map);
-	  amt += (sharable_bss_count - 1) * sizeof (asection *);
-	  m = bfd_zalloc (abfd, amt);
-	  if (m == NULL)
-	    goto error_return;
-	  m->next = NULL;
-	  m->p_type = PT_GNU_SHR;
-	  m->count = sharable_bss_count;
-	  /* Mandated PF_R.  */
-	  m->p_flags = PF_R;
-	  m->p_flags_valid = 1;
-	  for (i = 0; i < sharable_bss_count; ++i)
-	    {
-	      m->sections[i] = first_sharable_bss;
-	      first_sharable_bss = first_sharable_bss->next;
-	    }
-
-	  *pm = m;
-	   pm = &m->next;
-	}
-
       /* If there is a .eh_frame_hdr section, throw in a PT_GNU_EH_FRAME
 	 segment.  */
       eh_frame_hdr = elf_tdata (abfd)->eh_frame_hdr;
@@ -3989,7 +3851,7 @@
 	  pm = &m->next;
 	}
 
-      if (dynsec != NULL && info->relro)
+      if (dynsec != NULL && elf_tdata (abfd)->relro)
 	{
 	  /* We make a PT_GNU_RELRO segment only when there is a
 	     PT_DYNAMIC segment.  */
@@ -4246,10 +4108,10 @@
 
 	  p->p_align = maxpagesize;
 	}
-      else if (m->count == 0)
-	p->p_align = 1 << bed->s->log_file_align;
       else if (m->p_align_valid)
 	p->p_align = m->p_align;
+      else if (m->count == 0)
+	p->p_align = 1 << bed->s->log_file_align;
       else
 	p->p_align = 0;
 
@@ -4414,7 +4276,6 @@
 	  align = (bfd_size_type) 1 << bfd_get_section_alignment (abfd, sec);
 
 	  if (p->p_type == PT_LOAD
-	      || p->p_type == PT_GNU_SHR
 	      || p->p_type == PT_TLS)
 	    {
 	      bfd_signed_vma adjust = sec->lma - (p->p_paddr + p->p_memsz);
@@ -4491,10 +4352,12 @@
 		    p->p_memsz += this_hdr->sh_size;
 		}
 
-	      if (align > p->p_align
-		  && !m->p_align_valid
-		  && (p->p_type != PT_LOAD
-		      || (abfd->flags & D_PAGED) == 0))
+	      if (p->p_type == PT_GNU_RELRO)
+		p->p_align = 1;
+	      else if (align > p->p_align
+		       && !m->p_align_valid
+		       && (p->p_type != PT_LOAD
+			   || (abfd->flags & D_PAGED) == 0))
 		p->p_align = align;
 	    }
 
@@ -4644,53 +4507,18 @@
       if (m->count != 0)
 	{
 	  if (p->p_type != PT_LOAD
-	      && (p->p_type != PT_NOTE
-		  || bfd_get_format (abfd) != bfd_core))
+	      && (p->p_type != PT_NOTE || bfd_get_format (abfd) != bfd_core))
 	    {
 	      Elf_Internal_Shdr *hdr;
-	      asection *sect;
-
 	      BFD_ASSERT (!m->includes_filehdr && !m->includes_phdrs);
 
-	      sect = m->sections[m->count - 1];
-	      hdr = &elf_section_data (sect)->this_hdr;
-	      p->p_filesz = sect->filepos - m->sections[0]->filepos;
+	      hdr = &elf_section_data (m->sections[m->count - 1])->this_hdr;
+	      p->p_filesz = (m->sections[m->count - 1]->filepos
+			     - m->sections[0]->filepos);
 	      if (hdr->sh_type != SHT_NOBITS)
 		p->p_filesz += hdr->sh_size;
 
-	      if (p->p_type == PT_GNU_RELRO)
-		{
-		  /* When we get here, we are copying executable
-		     or shared library. But we need to use the same
-		     linker logic.  */
-		  Elf_Internal_Phdr *lp;
-
-		  for (lp = phdrs; lp < phdrs + count; ++lp)
-		    {
-		      if (lp->p_type == PT_LOAD
-			  && lp->p_paddr == p->p_paddr)
-			break;
-		    }
-	  
-		  if (lp < phdrs + count)
-		    {
-		      /* The end of PT_GNU_RELRO segment is the next
-			 SEC_ALLOC section after it if it exists.  */
-		      if (sect->next != NULL
-			  && (sect->next->flags & SEC_ALLOC) != 0)
-			p->p_filesz = sect->next->lma - lp->p_vaddr;
-		      else
-			p->p_filesz += p->p_vaddr - lp->p_vaddr;
-		      p->p_vaddr = lp->p_vaddr;
-		      p->p_offset = lp->p_offset;
-		      p->p_memsz = p->p_filesz;
-		      p->p_align = 1;
-		    }
-		  else
-		    abort ();
-		}
-	      else
-		p->p_offset = m->sections[0]->filepos;
+	      p->p_offset = m->sections[0]->filepos;
 	    }
 	}
       else
@@ -5125,17 +4953,8 @@
 
 /* Rewrite program header information.  */
 
-enum elf_section_status
-{
-  unknown,
-  added,
-  removed,
-  modified
-};
-
 static bfd_boolean
-rewrite_elf_program_header (bfd *ibfd, bfd *obfd,
-			    enum elf_section_status status)
+rewrite_elf_program_header (bfd *ibfd, bfd *obfd)
 {
   Elf_Internal_Ehdr *iehdr;
   struct elf_segment_map *map;
@@ -5288,14 +5107,7 @@
 	    }
 
       if (segment->p_type != PT_LOAD)
-	{
-	  /* If a section is added or mofied, remove PT_GNU_RELRO
-	     segment.  */
-	  if (status != removed &&
-	      segment->p_type == PT_GNU_RELRO)
-	    segment->p_type = PT_NULL;
-	  continue;
-	}
+	continue;
 
       /* Determine if this segment overlaps any previous segments.  */
       for (j = 0, segment2 = elf_tdata (ibfd)->phdr; j < i; j++, segment2 ++)
@@ -5778,10 +5590,6 @@
       asection *first_section = NULL;
       asection *lowest_section = NULL;
 
-      /* FIXME: Do we need to copy PT_NULL segment?  */
-      if (segment->p_type == PT_NULL)
-	continue;
-
       /* Compute how many sections are in this segment.  */
       for (section = ibfd->sections, section_count = 0;
 	   section != NULL;
@@ -5875,12 +5683,6 @@
 static bfd_boolean
 copy_private_bfd_data (bfd *ibfd, bfd *obfd)
 {
-  enum elf_section_status status;
-  Elf_Internal_Phdr *segment;
-  asection *section, *osec;
-  unsigned int i, num_segments;
-  Elf_Internal_Shdr *this_hdr;
-
   if (bfd_get_flavour (ibfd) != bfd_target_elf_flavour
       || bfd_get_flavour (obfd) != bfd_target_elf_flavour)
     return TRUE;
@@ -5888,13 +5690,16 @@
   if (elf_tdata (ibfd)->phdr == NULL)
     return TRUE;
 
-  status = unknown;
   if (ibfd->xvec == obfd->xvec)
     {
-      /* Check to see if any sections in the input BFD covered by ELF
-	 program header have changed.
+      /* Check to see if any sections in the input BFD
+	 covered by ELF program header have changed.  */
+      Elf_Internal_Phdr *segment;
+      asection *section, *osec;
+      unsigned int i, num_segments;
+      Elf_Internal_Shdr *this_hdr;
 
-	 Initialize the segment mark field.  */
+      /* Initialize the segment mark field.  */
       for (section = obfd->sections; section != NULL;
 	   section = section->next)
 	section->segment_mark = FALSE;
@@ -5946,10 +5751,7 @@
 	   section = section->next)
 	{
 	  if (section->segment_mark == FALSE)
-	    { 
-	      status = added;
-	      goto rewrite;
-	    }
+	    goto rewrite;
 	  else
 	    section->segment_mark = FALSE;
 	}
@@ -5958,42 +5760,7 @@
     }
 
 rewrite:
-  if (status == unknown)
-    {
-      /* We need to find out how we are changed.  */
-      num_segments = elf_elfheader (ibfd)->e_phnum;
-      for (i = 0, segment = elf_tdata (ibfd)->phdr;
-	   i < num_segments;
-	   i++, segment++)
-	{
-	  for (section = ibfd->sections;
-	       section != NULL; section = section->next)
-	    {
-	      osec = section->output_section;
-
-	      /* Check if this section is covered by the segment.  */
-	      this_hdr = &(elf_section_data(section)->this_hdr);
-	      if (ELF_IS_SECTION_IN_SEGMENT_FILE (this_hdr, segment))
-		{
-		  if (osec == NULL)
-		    status = removed;
-		  else if (section->flags != osec->flags
-			   || section->lma != osec->lma
-			   || section->vma != osec->vma
-			   || section->size != osec->size
-			   || section->rawsize != osec->rawsize
-			   || section->alignment_power != osec->alignment_power)
-		    {
-		      /* Stop if a section is modified.  */
-		      status = modified;
-		      break;
-		    }
-		}
-	    }
-	}
-    }
-  BFD_ASSERT (status != unknown);
-  return rewrite_elf_program_header (ibfd, obfd, status);
+  return rewrite_elf_program_header (ibfd, obfd);
 }
 
 /* Initialize private output section information from input section.  */
@@ -7790,6 +7557,7 @@
 }
 #endif /* defined (HAVE_LWPSTATUS_T) */
 
+#if defined (HAVE_WIN32_PSTATUS_T)
 static bfd_boolean
 elfcore_grok_win32pstatus (bfd *abfd, Elf_Internal_Note *note)
 {
@@ -7797,32 +7565,24 @@
   char *name;
   size_t len;
   asection *sect;
-  int type;
-  int is_active_thread;
-  bfd_vma base_addr;
+  win32_pstatus_t pstatus;
 
-  if (note->descsz < 728)
+  if (note->descsz < sizeof (pstatus))
     return TRUE;
 
-  if (! CONST_STRNEQ (note->namedata, "win32"))
-    return TRUE;
+  memcpy (&pstatus, note->descdata, sizeof (pstatus));
 
-  type = bfd_get_32 (abfd, note->descdata);
-
-  switch (type)
+  switch (pstatus.data_type)
     {
-    case 1 /* NOTE_INFO_PROCESS */:
+    case NOTE_INFO_PROCESS:
       /* FIXME: need to add ->core_command.  */
-      /* process_info.pid */
-      elf_tdata (abfd)->core_pid = bfd_get_32 (abfd, note->descdata + 8);
-      /* process_info.signal */
-      elf_tdata (abfd)->core_signal = bfd_get_32 (abfd, note->descdata + 12);
+      elf_tdata (abfd)->core_signal = pstatus.data.process_info.signal;
+      elf_tdata (abfd)->core_pid = pstatus.data.process_info.pid;
       break;
 
-    case 2 /* NOTE_INFO_THREAD */:
+    case NOTE_INFO_THREAD:
       /* Make a ".reg/999" section.  */
-      /* thread_info.tid */
-      sprintf (buf, ".reg/%ld", (long) bfd_get_32 (abfd, note->descdata + 8));
+      sprintf (buf, ".reg/%ld", (long) pstatus.data.thread_info.tid);
 
       len = strlen (buf) + 1;
       name = bfd_alloc (abfd, len);
@@ -7835,25 +7595,21 @@
       if (sect == NULL)
 	return FALSE;
 
-      /* sizeof (thread_info.thread_context) */
-      sect->size = 716;
-      /* offsetof (thread_info.thread_context) */
-      sect->filepos = note->descpos + 12;
+      sect->size = sizeof (pstatus.data.thread_info.thread_context);
+      sect->filepos = (note->descpos
+		       + offsetof (struct win32_pstatus,
+				   data.thread_info.thread_context));
       sect->alignment_power = 2;
 
-      /* thread_info.is_active_thread */
-      is_active_thread = bfd_get_32 (abfd, note->descdata + 8);
-
-      if (is_active_thread)
+      if (pstatus.data.thread_info.is_active_thread)
 	if (! elfcore_maybe_make_sect (abfd, ".reg", sect))
 	  return FALSE;
       break;
 
-    case 3 /* NOTE_INFO_MODULE */:
+    case NOTE_INFO_MODULE:
       /* Make a ".module/xxxxxxxx" section.  */
-      /* module_info.base_address */
-      base_addr = bfd_get_32 (abfd, note->descdata + 4);
-      sprintf (buf, ".module/%08lx", (long) base_addr);
+      sprintf (buf, ".module/%08lx",
+	       (long) pstatus.data.module_info.base_address);
 
       len = strlen (buf) + 1;
       name = bfd_alloc (abfd, len);
@@ -7878,6 +7634,7 @@
 
   return TRUE;
 }
+#endif /* HAVE_WIN32_PSTATUS_T */
 
 static bfd_boolean
 elfcore_grok_note (bfd *abfd, Elf_Internal_Note *note)
@@ -7912,8 +7669,10 @@
     case NT_FPREGSET:		/* FIXME: rename to NT_PRFPREG */
       return elfcore_grok_prfpreg (abfd, note);
 
+#if defined (HAVE_WIN32_PSTATUS_T)
     case NT_WIN32PSTATUS:
       return elfcore_grok_win32pstatus (abfd, note);
+#endif
 
     case NT_PRXFPREG:		/* Linux SSE extension */
       if (note->namesz == 6
@@ -7950,32 +7709,6 @@
 }
 
 static bfd_boolean
-elfobj_grok_gnu_build_id (bfd *abfd, Elf_Internal_Note *note)
-{
-  elf_tdata (abfd)->build_id_size = note->descsz;
-  elf_tdata (abfd)->build_id = bfd_alloc (abfd, note->descsz);
-  if (elf_tdata (abfd)->build_id == NULL)
-    return FALSE;
-
-  memcpy (elf_tdata (abfd)->build_id, note->descdata, note->descsz);
-
-  return TRUE;
-}
-
-static bfd_boolean
-elfobj_grok_gnu_note (bfd *abfd, Elf_Internal_Note *note)
-{
-  switch (note->type)
-    {
-    default:
-      return TRUE;
-
-    case NT_GNU_BUILD_ID:
-      return elfobj_grok_gnu_build_id (abfd, note);
-    }
-}
-
-static bfd_boolean
 elfcore_netbsd_get_lwpid (Elf_Internal_Note *note, int *lwpidp)
 {
   char *cp;
@@ -8185,32 +7918,6 @@
     }
 }
 
-static bfd_boolean
-elfcore_grok_spu_note (bfd *abfd, Elf_Internal_Note *note)
-{
-  char *name;
-  asection *sect;
-  size_t len;
-
-  /* Use note name as section name.  */
-  len = note->namesz;
-  name = bfd_alloc (abfd, len);
-  if (name == NULL)
-    return FALSE;
-  memcpy (name, note->namedata, len);
-  name[len - 1] = '\0';
-
-  sect = bfd_make_section_anyway_with_flags (abfd, name, SEC_HAS_CONTENTS);
-  if (sect == NULL)
-    return FALSE;
-
-  sect->size            = note->descsz;
-  sect->filepos         = note->descpos;
-  sect->alignment_power = 1;
-
-  return TRUE;
-}
-
 /* Function: elfcore_write_note
 
    Inputs:
@@ -8475,10 +8182,28 @@
 }
 
 static bfd_boolean
-elf_parse_notes (bfd *abfd, char *buf, size_t size, file_ptr offset)
+elfcore_read_notes (bfd *abfd, file_ptr offset, bfd_size_type size)
 {
+  char *buf;
   char *p;
 
+  if (size <= 0)
+    return TRUE;
+
+  if (bfd_seek (abfd, offset, SEEK_SET) != 0)
+    return FALSE;
+
+  buf = bfd_malloc (size);
+  if (buf == NULL)
+    return FALSE;
+
+  if (bfd_bread (buf, size, abfd) != size)
+    {
+    error:
+      free (buf);
+      return FALSE;
+    }
+
   p = buf;
   while (p < buf + size)
     {
@@ -8495,71 +8220,25 @@
       in.descdata = in.namedata + BFD_ALIGN (in.namesz, 4);
       in.descpos = offset + (in.descdata - buf);
 
-      switch (bfd_get_format (abfd))
-        {
-	default:
-	  return TRUE;
-
-	case bfd_core:
-	  if (CONST_STRNEQ (in.namedata, "NetBSD-CORE"))
-	    {
-	      if (! elfcore_grok_netbsd_note (abfd, &in))
-		return FALSE;
-	    }
-	  else if (CONST_STRNEQ (in.namedata, "QNX"))
-	    {
-	      if (! elfcore_grok_nto_note (abfd, &in))
-		return FALSE;
-	    }
-	  else if (CONST_STRNEQ (in.namedata, "SPU/"))
-	    {
-	      if (! elfcore_grok_spu_note (abfd, &in))
-		return FALSE;
-	    }
-	  else
-	    {
-	      if (! elfcore_grok_note (abfd, &in))
-		return FALSE;
-	    }
-	  break;
-
-	case bfd_object:
-	  if (in.namesz == sizeof "GNU" && strcmp (in.namedata, "GNU") == 0)
-	    {
-	      if (! elfobj_grok_gnu_note (abfd, &in))
-		return FALSE;
-	    }
-	  break;
+      if (CONST_STRNEQ (in.namedata, "NetBSD-CORE"))
+	{
+	  if (! elfcore_grok_netbsd_note (abfd, &in))
+	    goto error;
+	}
+      else if (CONST_STRNEQ (in.namedata, "QNX"))
+	{
+	  if (! elfcore_grok_nto_note (abfd, &in))
+	    goto error;
+	}
+      else
+	{
+	  if (! elfcore_grok_note (abfd, &in))
+	    goto error;
 	}
 
       p = in.descdata + BFD_ALIGN (in.descsz, 4);
     }
 
-  return TRUE;
-}
-
-static bfd_boolean
-elf_read_notes (bfd *abfd, file_ptr offset, bfd_size_type size)
-{
-  char *buf;
-
-  if (size <= 0)
-    return TRUE;
-
-  if (bfd_seek (abfd, offset, SEEK_SET) != 0)
-    return FALSE;
-
-  buf = bfd_malloc (size);
-  if (buf == NULL)
-    return FALSE;
-
-  if (bfd_bread (buf, size, abfd) != size
-      || !elf_parse_notes (abfd, buf, size, offset))
-    {
-      free (buf);
-      return FALSE;
-    }
-
   free (buf);
   return TRUE;
 }
diff -Nur binutils-2.18.50.0.1/bfd/elflink.c binutils-stable/bfd/elflink.c
--- binutils-2.18.50.0.1/bfd/elflink.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elflink.c	2007-09-25 15:41:59.000000000 +0200
@@ -353,27 +353,6 @@
 	  if (s == NULL
 	      || ! bfd_set_section_alignment (abfd, s, bed->s->log_file_align))
 	    return FALSE;
-
-	  if (info->sharable_sections)
-	    {
-	      s = bfd_make_section (abfd, ".dynsharablebss");
-	      if (s == NULL
-		  || ! bfd_set_section_flags (abfd, s,
-					      (SEC_ALLOC
-					       | SEC_LINKER_CREATED)))
-		return FALSE;
-
-	      s = bfd_make_section (abfd,
-				    (bed->default_use_rela_p
-				     ? ".rela.sharable_bss"
-				     : ".rel.sharable_bss"));
-	      if (s == NULL
-		  || ! bfd_set_section_flags (abfd, s,
-					      flags | SEC_READONLY)
-		  || ! bfd_set_section_alignment (abfd, s,
-						  bed->s->log_file_align))
-		return FALSE;
-	    }
 	}
     }
 
@@ -844,33 +823,6 @@
   return dynsymcount;
 }
 
-/* Mark if a symbol has a definition in a dynamic object or is
-   weak in all dynamic objects.  */
-
-static void
-_bfd_elf_mark_dynamic_def_weak (struct elf_link_hash_entry *h,
-				asection *sec, int bind)
-{
-  if (!h->dynamic_def)
-    {
-      if (!bfd_is_und_section (sec))
-	h->dynamic_def = 1;
-      else
-	{
-	  /* Check if this symbol is weak in all dynamic objects. If it
-	     is the first time we see it in a dynamic object, we mark
-	     if it is weak. Otherwise, we clear it.  */
-	  if (!h->ref_dynamic)
-	    {
-	      if (bind == STB_WEAK)
-		h->dynamic_weak = 1;
-	    }
-	  else if (bind != STB_WEAK)
-	    h->dynamic_weak = 0;
-	}
-    }
-}
-
 /* This function is called when we want to define a new symbol.  It
    handles the various cases which arise when we find a definition in
    a dynamic object, or when there is already a definition in a
@@ -899,7 +851,6 @@
 {
   asection *sec, *oldsec;
   struct elf_link_hash_entry *h;
-  struct elf_link_hash_entry *hi;
   struct elf_link_hash_entry *flip;
   int bind;
   bfd *oldbfd;
@@ -936,9 +887,8 @@
   if (info->hash->creator != abfd->xvec)
     return TRUE;
 
-  /* For merging, we only care about real symbols.  But we need to make
-     sure that indirect symbol dynamic flags are updated.  */
-  hi = h;
+  /* For merging, we only care about real symbols.  */
+
   while (h->root.type == bfd_link_hash_indirect
 	 || h->root.type == bfd_link_hash_warning)
     h = (struct elf_link_hash_entry *) h->root.u.i.link;
@@ -1097,11 +1047,23 @@
   /* We need to remember if a symbol has a definition in a dynamic
      object or is weak in all dynamic objects. Internal and hidden
      visibility will make it unavailable to dynamic objects.  */
-  if (newdyn)
+  if (newdyn && !h->dynamic_def)
     {
-      _bfd_elf_mark_dynamic_def_weak (h, sec, bind);
-      if (h != hi)
-	_bfd_elf_mark_dynamic_def_weak (hi, sec, bind);
+      if (!bfd_is_und_section (sec))
+	h->dynamic_def = 1;
+      else
+	{
+	  /* Check if this symbol is weak in all dynamic objects. If it
+	     is the first time we see it in a dynamic object, we mark
+	     if it is weak. Otherwise, we clear it.  */
+	  if (!h->ref_dynamic)
+	    {
+	      if (bind == STB_WEAK)
+		h->dynamic_weak = 1;
+	    }
+	  else if (bind != STB_WEAK)
+	    h->dynamic_weak = 0;
+	}
     }
 
   /* If the old symbol has non-default visibility, we ignore the new
@@ -1113,7 +1075,6 @@
       *skip = TRUE;
       /* Make sure this symbol is dynamic.  */
       h->ref_dynamic = 1;
-      hi->ref_dynamic = 1;
       /* A protected symbol has external availability. Make sure it is
 	 recorded as dynamic.
 
@@ -1648,7 +1609,6 @@
 	  if (! dynamic)
 	    {
 	      if (info->shared
-		  || hi->def_dynamic
 		  || hi->ref_dynamic)
 		*dynsym = TRUE;
 	    }
@@ -3777,7 +3737,6 @@
       flagword flags;
       const char *name;
       struct elf_link_hash_entry *h;
-      struct elf_link_hash_entry *hi;
       bfd_boolean definition;
       bfd_boolean size_change_ok;
       bfd_boolean type_change_ok;
@@ -4067,9 +4026,6 @@
 	goto error_free_vers;
 
       h = *sym_hash;
-      /* We need to make sure that indirect symbol dynamic flags are
-	 updated.  */
-      hi = h;
       while (h->root.type == bfd_link_hash_indirect
 	     || h->root.type == bfd_link_hash_warning)
 	h = (struct elf_link_hash_entry *) h->root.u.i.link;
@@ -4276,36 +4232,22 @@
 		}
 	      else
 		h->def_regular = 1;
-
-	      /* If the indirect symbol has been forced local, don't
-		 make the real symbol dynamic.  */
-	      if ((h == hi || !hi->forced_local)
-		  && (! info->executable
-		      || h->def_dynamic
-		      || h->ref_dynamic))
+	      if (! info->executable
+		  || h->def_dynamic
+		  || h->ref_dynamic)
 		dynsym = TRUE;
 	    }
 	  else
 	    {
 	      if (! definition)
-		{
-		  h->ref_dynamic = 1;
-		  hi->ref_dynamic = 1;
-		}
+		h->ref_dynamic = 1;
 	      else
-		{
-		  h->def_dynamic = 1;
-		  hi->def_dynamic = 1;
-		}
-
-	      /* If the indirect symbol has been forced local, don't
-		 make the real symbol dynamic.  */
-	      if ((h == hi || !hi->forced_local)
-		  && (h->def_regular
-		      || h->ref_regular
-		      || (h->u.weakdef != NULL
-			  && ! new_weakdef
-			  && h->u.weakdef->dynindx != -1)))
+		h->def_dynamic = 1;
+	      if (h->def_regular
+		  || h->ref_regular
+		  || (h->u.weakdef != NULL
+		      && ! new_weakdef
+		      && h->u.weakdef->dynindx != -1))
 		dynsym = TRUE;
 	    }
 
@@ -4579,7 +4521,6 @@
 	  asection *slook;
 	  bfd_vma vlook;
 	  long ilook;
-	  int tlook;
 	  size_t i, j, idx;
 
 	  hlook = weaks;
@@ -4592,7 +4533,6 @@
 		      || hlook->root.type == bfd_link_hash_indirect);
 	  slook = hlook->root.u.def.section;
 	  vlook = hlook->root.u.def.value;
-	  tlook = hlook->type;
 
 	  ilook = -1;
 	  i = 0;
@@ -4630,10 +4570,9 @@
 	    {
 	      h = sorted_sym_hash [i];
 
-	      /* Stop if value, section or type doesn't match.  */
+	      /* Stop if value or section doesn't match.  */
 	      if (h->root.u.def.value != vlook
-		  || h->root.u.def.section != slook
-		  || h->type != tlook)
+		  || h->root.u.def.section != slook)
 		break;
 	      else if (h != hlook)
 		{
@@ -5388,6 +5327,7 @@
     return TRUE;
 
   bed = get_elf_backend_data (output_bfd);
+  elf_tdata (output_bfd)->relro = info->relro;
   if (info->execstack)
     elf_tdata (output_bfd)->stack_flags = PF_R | PF_W | PF_X;
   else if (info->noexecstack)
@@ -8456,10 +8396,6 @@
   if (!is_elf_hash_table (info->hash))
     return FALSE;
 
-  /* Check indirect symbol.  */
-  while (h->root.type == bfd_link_hash_indirect)
-    h = (struct elf_link_hash_entry *) h->root.u.i.link;
-
   switch (h->root.type)
     {
     default:
@@ -8668,17 +8604,11 @@
       && !h->dynamic_weak
       && ! elf_link_check_versioned_symbol (finfo->info, bed, h))
     {
-      struct elf_link_hash_entry *hi = h;
-
-      /* Check indirect symbol.  */
-      while (hi->root.type == bfd_link_hash_indirect)
-	hi = (struct elf_link_hash_entry *) hi->root.u.i.link;
-
       (*_bfd_error_handler)
 	(_("%B: %s symbol `%s' in %B is referenced by DSO"),
 	 finfo->output_bfd,
-	 hi->root.u.def.section == bfd_abs_section_ptr
-	 ? finfo->output_bfd : hi->root.u.def.section->owner,
+	 h->root.u.def.section == bfd_abs_section_ptr
+	 ? finfo->output_bfd : h->root.u.def.section->owner,
 	 ELF_ST_VISIBILITY (h->other) == STV_INTERNAL
 	 ? "internal"
 	 : ELF_ST_VISIBILITY (h->other) == STV_HIDDEN
@@ -8874,23 +8804,6 @@
     {
       bfd_byte *esym;
 
-      /* Since there is no version information in the dynamic string,
-	 if there is no version info in symbol version section, we will
-	 have a run-time problem.  */
-      if (h->verinfo.verdef == NULL)
-	{
-	  char *p = strrchr (h->root.root.string, ELF_VER_CHR);
-
-	  if (p && p [1] != '\0')
-	    {
-	      (*_bfd_error_handler)
-		(_("%B: No symbol version section for versioned symbol `%s'"),
-		 finfo->output_bfd, h->root.root.string);
-	      eoinfo->failed = TRUE;
-	      return FALSE;
-	    }
-	}
-
       sym.st_name = h->dynstr_index;
       esym = finfo->dynsym_sec->contents + h->dynindx * bed->s->sizeof_sym;
       if (! check_dynsym (finfo->output_bfd, &sym))
@@ -10052,7 +9965,7 @@
   for (n = 0; n < seen_linkorder; n++)
     {
       s = sections[n]->u.indirect.section;
-      offset &= ~(bfd_vma) 0 << s->alignment_power;
+      offset &= ~(bfd_vma)((1 << s->alignment_power) - 1);
       s->output_offset = offset;
       sections[n]->offset = offset;
       offset += sections[n]->size;
@@ -11123,7 +11036,7 @@
     {
       bfd_byte *contents = bfd_malloc (attr_size);
       if (contents == NULL)
-	return FALSE;	/* Bail out and fail.  */
+	goto error_return;
       bfd_elf_set_obj_attr_contents (abfd, contents, attr_size);
       bfd_set_section_contents (abfd, attr_section, contents, 0, attr_size);
       free (contents);
@@ -12344,218 +12257,14 @@
   return bfd_com_section_ptr;
 }
 
-asection _bfd_elf_sharable_com_section
-  = BFD_FAKE_SECTION (_bfd_elf_sharable_com_section, SEC_IS_COMMON,
-		      NULL, "SHARABLE_COMMON", 0);
- 
-static asection *
-get_sharable_common_section (bfd *abfd)
-{
-  asection *scomm = bfd_get_section_by_name (abfd, "SHARABLE_COMMON");
-
-  if (scomm == NULL)
-    {
-      scomm = bfd_make_section_with_flags (abfd,
-					   "SHARABLE_COMMON",
-					   (SEC_ALLOC
-					    | SEC_IS_COMMON
-					    | SEC_LINKER_CREATED));
-      if (scomm == NULL)
-	return scomm;
-      elf_section_flags (scomm) |= SHF_GNU_SHARABLE;
-    }
-
-  return scomm;
-}
-
-bfd_boolean
-_bfd_elf_add_sharable_symbol (bfd *abfd ATTRIBUTE_UNUSED,
-			      struct bfd_link_info *info ATTRIBUTE_UNUSED,
-			      Elf_Internal_Sym *sym,
-			      const char **namep ATTRIBUTE_UNUSED,
-			      flagword *flagsp ATTRIBUTE_UNUSED,
-			      asection **secp,
-			      bfd_vma *valp)
-{
-  asection *scomm;
-
-  switch (sym->st_shndx)
-    {
-    case SHN_GNU_SHARABLE_COMMON:
-      scomm = get_sharable_common_section (abfd);
-      if (scomm == NULL)
-	return FALSE;
-      *secp = scomm;
-      *valp = sym->st_size;
-      break;
-    }
-  return TRUE;
-}
-
-bfd_boolean
-_bfd_elf_sharable_section_from_bfd_section
-  (bfd *abfd ATTRIBUTE_UNUSED, asection *sec, int *index)
-{
-  if (sec == &_bfd_elf_sharable_com_section)
-    {
-      *index = SHN_GNU_SHARABLE_COMMON;
-      return TRUE;
-    }
-  return FALSE;
-}
-
+/* Copy the ELF symbol type associated with a linker hash entry.  */
 void
-_bfd_elf_sharable_symbol_processing (bfd *abfd ATTRIBUTE_UNUSED,
-				     asymbol *asym)
-{
-  elf_symbol_type *elfsym = (elf_symbol_type *) asym;
-
-  switch (elfsym->internal_elf_sym.st_shndx)
-    {
-    case SHN_GNU_SHARABLE_COMMON:
-      asym->section = &_bfd_elf_sharable_com_section;
-      asym->value = elfsym->internal_elf_sym.st_size;
-      asym->flags &= ~BSF_GLOBAL;
-      break;
-    }
-}
-
-bfd_boolean
-_bfd_elf_sharable_common_definition (Elf_Internal_Sym *sym)
-{
-  return (sym->st_shndx == SHN_COMMON
-	  || sym->st_shndx == SHN_GNU_SHARABLE_COMMON);
-}
-
-unsigned int
-_bfd_elf_sharable_common_section_index (asection *sec)
-{
-  if ((elf_section_flags (sec) & SHF_GNU_SHARABLE) == 0)
-    return SHN_COMMON;
-  else
-    return SHN_GNU_SHARABLE_COMMON;
-}
-
-asection *
-_bfd_elf_sharable_common_section (asection *sec)
+_bfd_elf_copy_link_hash_symbol_type (bfd *abfd ATTRIBUTE_UNUSED,
+    struct bfd_link_hash_entry * hdest,
+    struct bfd_link_hash_entry * hsrc)
 {
-  if ((elf_section_flags (sec) & SHF_GNU_SHARABLE) == 0)
-    return bfd_com_section_ptr;
-  else
-    return &_bfd_elf_sharable_com_section;
-}
-
-bfd_boolean
-_bfd_elf_sharable_merge_symbol
-  (struct bfd_link_info *info ATTRIBUTE_UNUSED,
-   struct elf_link_hash_entry **sym_hash ATTRIBUTE_UNUSED,
-   struct elf_link_hash_entry *h,
-   Elf_Internal_Sym *sym ATTRIBUTE_UNUSED,
-   asection **psec,
-   bfd_vma *pvalue ATTRIBUTE_UNUSED,
-   unsigned int *pold_alignment ATTRIBUTE_UNUSED,
-   bfd_boolean *skip ATTRIBUTE_UNUSED,
-   bfd_boolean *override ATTRIBUTE_UNUSED,
-   bfd_boolean *type_change_ok ATTRIBUTE_UNUSED,
-   bfd_boolean *size_change_ok ATTRIBUTE_UNUSED,
-   bfd_boolean *newdef ATTRIBUTE_UNUSED,
-   bfd_boolean *newdyn,
-   bfd_boolean *newdyncommon ATTRIBUTE_UNUSED,
-   bfd_boolean *newweak ATTRIBUTE_UNUSED,
-   bfd *abfd,
-   asection **sec,
-   bfd_boolean *olddef ATTRIBUTE_UNUSED,
-   bfd_boolean *olddyn,
-   bfd_boolean *olddyncommon ATTRIBUTE_UNUSED,
-   bfd_boolean *oldweak ATTRIBUTE_UNUSED,
-   bfd *oldbfd,
-   asection **oldsec)
-{
-  /* Check sharable symbol.  If one is undefined, it is OK.  */
-  if (*oldsec && !bfd_is_und_section (*sec))
-    {
-      bfd_boolean sharable, oldsharable;
-     
-      sharable = (elf_section_data (*sec)
-		  && (elf_section_flags (*sec) & SHF_GNU_SHARABLE));
-      oldsharable = (elf_section_data (*oldsec)
-		     && (elf_section_flags (*oldsec)
-			 & SHF_GNU_SHARABLE));
-
-      if (sharable != oldsharable)
-	{
-	  bfd *nsbfd, *sbfd;
-	  asection *nssec, *ssec;
-	  bfd_boolean nsdyn, sdyn, nsdef, sdef;
-
-	  if (oldsharable)
-	    {
-	      sbfd = oldbfd;
-	      nsbfd = abfd;
-	      ssec = *oldsec;
-	      nssec = *sec;
-	      sdyn = *olddyn;
-	      nsdyn = *newdyn;
-	      sdef = *olddef;
-	      nsdef = *newdef;
-	    }
-	  else
-	    {
-	      sbfd = abfd;
-	      nsbfd = oldbfd;
-	      ssec = *sec;
-	      nssec = *oldsec;
-	      sdyn = *newdyn;
-	      nsdyn = *olddyn;
-	      sdef = *newdef;
-	      nsdef = *olddef;
-	    }
-
-	  if (sdef && !sdyn)
-	    {
-	      /* If the sharable definition comes from a relocatable
-		 file, it will override the non-sharable one in DSO. */
-	      return TRUE;
-	    }
-	  else if (!nsdef
-		   && !nsdyn
-		   && (h->root.type == bfd_link_hash_common
-		       || bfd_is_com_section (nssec)))
-	    {
-	      asection *scomm;
-
-	      /* When the non-sharable common symbol in a relocatable
-		 file, we can turn it into sharable.  If the sharable
-		 symbol isn't common, the non-sharable common symbol
-		 will be overidden.  We only need to handle the
-		 sharable common symbol and the non-sharable common
-		 symbol.  We just turn the non-sharable common symbol
-		 into the sharable one. */
-	      if (sym->st_shndx == SHN_GNU_SHARABLE_COMMON)
-		{
-		  scomm = get_sharable_common_section (oldbfd);
-		  if (scomm == NULL)
-		    return FALSE;
-		  h->root.u.c.p->section = scomm;
-		}
-	      else
-		{
-		  scomm = get_sharable_common_section (abfd);
-		  if (scomm == NULL)
-		    return FALSE;
-		  *psec = *sec = scomm;
-		}
+  struct elf_link_hash_entry *ehdest = (struct elf_link_hash_entry *)hdest;
+  struct elf_link_hash_entry *ehsrc = (struct elf_link_hash_entry *)hsrc;
 
-	      return TRUE;
-	    }
-
-	  (*_bfd_error_handler)
-	    (_("%s: sharable symbol in %B section %A mismatches non-shrable symbol in %B section %A"),
-	     sbfd, ssec, nsbfd, nssec, h->root.root.string);
-	  bfd_set_error (bfd_error_bad_value);
-	  return FALSE;
-	}
-    }
-
-  return TRUE;
+  ehdest->type = ehsrc->type;
 }
diff -Nur binutils-2.18.50.0.1/bfd/elf-m10200.c binutils-stable/bfd/elf-m10200.c
--- binutils-2.18.50.0.1/bfd/elf-m10200.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf-m10200.c	2007-09-25 15:41:59.000000000 +0200
@@ -392,12 +392,12 @@
 	}
       else
 	{
-	  bfd_boolean unresolved_reloc, warned, ignored;
+	  bfd_boolean unresolved_reloc, warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	}
 
       if (sec != NULL && elf_discarded_section (sec))
diff -Nur binutils-2.18.50.0.1/bfd/elf-m10300.c binutils-stable/bfd/elf-m10300.c
--- binutils-2.18.50.0.1/bfd/elf-m10300.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elf-m10300.c	2007-09-25 15:41:58.000000000 +0200
@@ -1417,13 +1417,13 @@
       else
 	{
 	  bfd_boolean unresolved_reloc;
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 	  struct elf_link_hash_entry *hh;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   hh, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  h = (struct elf32_mn10300_link_hash_entry *) hh;
 
diff -Nur binutils-2.18.50.0.1/bfd/elfxx-ia64.c binutils-stable/bfd/elfxx-ia64.c
--- binutils-2.18.50.0.1/bfd/elfxx-ia64.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elfxx-ia64.c	2007-09-25 15:41:59.000000000 +0200
@@ -190,45 +190,172 @@
 #define elfNN_ia64_hash_table(p) \
   ((struct elfNN_ia64_link_hash_table *) ((p)->hash))
 
-static struct elfNN_ia64_dyn_sym_info * get_dyn_sym_info
-  (struct elfNN_ia64_link_hash_table *ia64_info,
-   struct elf_link_hash_entry *h,
-   bfd *abfd, const Elf_Internal_Rela *rel, bfd_boolean create);
-static bfd_boolean elfNN_ia64_dynamic_symbol_p
-  (struct elf_link_hash_entry *h, struct bfd_link_info *info, int);
-static bfd_reloc_status_type elfNN_ia64_install_value
-  (bfd_byte *hit_addr, bfd_vma val, unsigned int r_type);
-static bfd_boolean elfNN_ia64_choose_gp
-  (bfd *abfd, struct bfd_link_info *info);
+static bfd_reloc_status_type elfNN_ia64_reloc
+  PARAMS ((bfd *abfd, arelent *reloc, asymbol *sym, PTR data,
+	   asection *input_section, bfd *output_bfd, char **error_message));
+static reloc_howto_type * lookup_howto
+  PARAMS ((unsigned int rtype));
+static reloc_howto_type *elfNN_ia64_reloc_type_lookup
+  PARAMS ((bfd *abfd, bfd_reloc_code_real_type bfd_code));
+static void elfNN_ia64_info_to_howto
+  PARAMS ((bfd *abfd, arelent *bfd_reloc, Elf_Internal_Rela *elf_reloc));
+static bfd_boolean elfNN_ia64_relax_section
+  PARAMS((bfd *abfd, asection *sec, struct bfd_link_info *link_info,
+	  bfd_boolean *again));
 static void elfNN_ia64_relax_ldxmov
-  (bfd_byte *contents, bfd_vma off);
+  PARAMS((bfd_byte *contents, bfd_vma off));
+static bfd_boolean is_unwind_section_name
+  PARAMS ((bfd *abfd, const char *));
+static bfd_boolean elfNN_ia64_section_flags
+  PARAMS ((flagword *, const Elf_Internal_Shdr *));
+static bfd_boolean elfNN_ia64_fake_sections
+  PARAMS ((bfd *abfd, Elf_Internal_Shdr *hdr, asection *sec));
+static void elfNN_ia64_final_write_processing
+  PARAMS ((bfd *abfd, bfd_boolean linker));
+static bfd_boolean elfNN_ia64_add_symbol_hook
+  PARAMS ((bfd *abfd, struct bfd_link_info *info, Elf_Internal_Sym *sym,
+	   const char **namep, flagword *flagsp, asection **secp,
+	   bfd_vma *valp));
+static bfd_boolean elfNN_ia64_is_local_label_name
+  PARAMS ((bfd *abfd, const char *name));
+static bfd_boolean elfNN_ia64_dynamic_symbol_p
+  PARAMS ((struct elf_link_hash_entry *h, struct bfd_link_info *info, int));
+static struct bfd_hash_entry *elfNN_ia64_new_elf_hash_entry
+  PARAMS ((struct bfd_hash_entry *entry, struct bfd_hash_table *table,
+	   const char *string));
+static void elfNN_ia64_hash_copy_indirect
+  PARAMS ((struct bfd_link_info *, struct elf_link_hash_entry *,
+	   struct elf_link_hash_entry *));
+static void elfNN_ia64_hash_hide_symbol
+  PARAMS ((struct bfd_link_info *, struct elf_link_hash_entry *, bfd_boolean));
+static hashval_t elfNN_ia64_local_htab_hash PARAMS ((const void *));
+static int elfNN_ia64_local_htab_eq PARAMS ((const void *ptr1,
+					     const void *ptr2));
+static struct bfd_link_hash_table *elfNN_ia64_hash_table_create
+  PARAMS ((bfd *abfd));
+static void elfNN_ia64_hash_table_free
+  PARAMS ((struct bfd_link_hash_table *hash));
+static bfd_boolean elfNN_ia64_global_dyn_sym_thunk
+  PARAMS ((struct bfd_hash_entry *, PTR));
+static int elfNN_ia64_local_dyn_sym_thunk
+  PARAMS ((void **, PTR));
 static void elfNN_ia64_dyn_sym_traverse
-  (struct elfNN_ia64_link_hash_table *ia64_info,
-   bfd_boolean (*func) (struct elfNN_ia64_dyn_sym_info *, PTR),
-   PTR info);
+  PARAMS ((struct elfNN_ia64_link_hash_table *ia64_info,
+	   bfd_boolean (*func) (struct elfNN_ia64_dyn_sym_info *, PTR),
+	   PTR info));
+static bfd_boolean elfNN_ia64_create_dynamic_sections
+  PARAMS ((bfd *abfd, struct bfd_link_info *info));
+static struct elfNN_ia64_local_hash_entry * get_local_sym_hash
+  PARAMS ((struct elfNN_ia64_link_hash_table *ia64_info,
+	   bfd *abfd, const Elf_Internal_Rela *rel, bfd_boolean create));
+static struct elfNN_ia64_dyn_sym_info * get_dyn_sym_info
+  PARAMS ((struct elfNN_ia64_link_hash_table *ia64_info,
+	   struct elf_link_hash_entry *h,
+	   bfd *abfd, const Elf_Internal_Rela *rel, bfd_boolean create));
+static asection *get_got
+  PARAMS ((bfd *abfd, struct bfd_link_info *info,
+	   struct elfNN_ia64_link_hash_table *ia64_info));
+static asection *get_fptr
+  PARAMS ((bfd *abfd, struct bfd_link_info *info,
+	   struct elfNN_ia64_link_hash_table *ia64_info));
+static asection *get_pltoff
+  PARAMS ((bfd *abfd, struct bfd_link_info *info,
+	   struct elfNN_ia64_link_hash_table *ia64_info));
+static asection *get_reloc_section
+  PARAMS ((bfd *abfd, struct elfNN_ia64_link_hash_table *ia64_info,
+	   asection *sec, bfd_boolean create));
+static bfd_boolean elfNN_ia64_check_relocs
+  PARAMS ((bfd *abfd, struct bfd_link_info *info, asection *sec,
+	   const Elf_Internal_Rela *relocs));
+static bfd_boolean elfNN_ia64_adjust_dynamic_symbol
+  PARAMS ((struct bfd_link_info *info, struct elf_link_hash_entry *h));
+static long global_sym_index
+  PARAMS ((struct elf_link_hash_entry *h));
+static bfd_boolean allocate_fptr
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
 static bfd_boolean allocate_global_data_got
-  (struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data);
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
 static bfd_boolean allocate_global_fptr_got
-  (struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data);
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
 static bfd_boolean allocate_local_got
-  (struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data);
-static bfd_boolean elfNN_ia64_hpux_vec
-  (const bfd_target *vec);
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
+static bfd_boolean allocate_pltoff_entries
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
+static bfd_boolean allocate_plt_entries
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
+static bfd_boolean allocate_plt2_entries
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
 static bfd_boolean allocate_dynrel_entries
-  (struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data);
-static asection *get_pltoff
-  (bfd *abfd, struct bfd_link_info *info,
-   struct elfNN_ia64_link_hash_table *ia64_info);
+  PARAMS ((struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data));
+static bfd_boolean elfNN_ia64_size_dynamic_sections
+  PARAMS ((bfd *output_bfd, struct bfd_link_info *info));
+static bfd_reloc_status_type elfNN_ia64_install_value
+  PARAMS ((bfd_byte *hit_addr, bfd_vma val, unsigned int r_type));
+static void elfNN_ia64_install_dyn_reloc
+  PARAMS ((bfd *abfd, struct bfd_link_info *info, asection *sec,
+	   asection *srel, bfd_vma offset, unsigned int type,
+	   long dynindx, bfd_vma addend));
+static bfd_vma set_got_entry
+  PARAMS ((bfd *abfd, struct bfd_link_info *info,
+	   struct elfNN_ia64_dyn_sym_info *dyn_i, long dynindx,
+	   bfd_vma addend, bfd_vma value, unsigned int dyn_r_type));
+static bfd_vma set_fptr_entry
+  PARAMS ((bfd *abfd, struct bfd_link_info *info,
+	   struct elfNN_ia64_dyn_sym_info *dyn_i,
+	   bfd_vma value));
+static bfd_vma set_pltoff_entry
+  PARAMS ((bfd *abfd, struct bfd_link_info *info,
+	   struct elfNN_ia64_dyn_sym_info *dyn_i,
+	   bfd_vma value, bfd_boolean));
+static bfd_vma elfNN_ia64_tprel_base
+  PARAMS ((struct bfd_link_info *info));
+static bfd_vma elfNN_ia64_dtprel_base
+  PARAMS ((struct bfd_link_info *info));
+static int elfNN_ia64_unwind_entry_compare
+  PARAMS ((const PTR, const PTR));
+static bfd_boolean elfNN_ia64_choose_gp
+  PARAMS ((bfd *abfd, struct bfd_link_info *info));
+static bfd_boolean elfNN_ia64_final_link
+  PARAMS ((bfd *abfd, struct bfd_link_info *info));
+static bfd_boolean elfNN_ia64_relocate_section
+  PARAMS ((bfd *output_bfd, struct bfd_link_info *info, bfd *input_bfd,
+	   asection *input_section, bfd_byte *contents,
+	   Elf_Internal_Rela *relocs, Elf_Internal_Sym *local_syms,
+	   asection **local_sections));
+static bfd_boolean elfNN_ia64_finish_dynamic_symbol
+  PARAMS ((bfd *output_bfd, struct bfd_link_info *info,
+	   struct elf_link_hash_entry *h, Elf_Internal_Sym *sym));
+static bfd_boolean elfNN_ia64_finish_dynamic_sections
+  PARAMS ((bfd *abfd, struct bfd_link_info *info));
+static bfd_boolean elfNN_ia64_set_private_flags
+  PARAMS ((bfd *abfd, flagword flags));
+static bfd_boolean elfNN_ia64_merge_private_bfd_data
+  PARAMS ((bfd *ibfd, bfd *obfd));
+static bfd_boolean elfNN_ia64_print_private_bfd_data
+  PARAMS ((bfd *abfd, PTR ptr));
+static enum elf_reloc_type_class elfNN_ia64_reloc_type_class
+  PARAMS ((const Elf_Internal_Rela *));
+static bfd_boolean elfNN_ia64_hpux_vec
+  PARAMS ((const bfd_target *vec));
+static void elfNN_hpux_post_process_headers
+  PARAMS ((bfd *abfd, struct bfd_link_info *info));
+bfd_boolean elfNN_hpux_backend_section_from_bfd_section
+  PARAMS ((bfd *abfd, asection *sec, int *retval));
 
 /* ia64-specific relocation.  */
 
 /* Perform a relocation.  Not much to do here as all the hard work is
    done in elfNN_ia64_final_link_relocate.  */
 static bfd_reloc_status_type
-elfNN_ia64_reloc (bfd *abfd ATTRIBUTE_UNUSED, arelent *reloc,
-		  asymbol *sym ATTRIBUTE_UNUSED,
-		  PTR data ATTRIBUTE_UNUSED, asection *input_section,
-		  bfd *output_bfd, char **error_message)
+elfNN_ia64_reloc (abfd, reloc, sym, data, input_section,
+		  output_bfd, error_message)
+     bfd *abfd ATTRIBUTE_UNUSED;
+     arelent *reloc;
+     asymbol *sym ATTRIBUTE_UNUSED;
+     PTR data ATTRIBUTE_UNUSED;
+     asection *input_section;
+     bfd *output_bfd;
+     char **error_message;
 {
   if (output_bfd)
     {
@@ -354,7 +481,8 @@
 /* Given a BFD reloc type, return the matching HOWTO structure.  */
 
 static reloc_howto_type *
-lookup_howto (unsigned int rtype)
+lookup_howto (rtype)
+     unsigned int rtype;
 {
   static int inited = 0;
   int i;
@@ -377,8 +505,9 @@
 }
 
 static reloc_howto_type*
-elfNN_ia64_reloc_type_lookup (bfd *abfd ATTRIBUTE_UNUSED,
-			      bfd_reloc_code_real_type bfd_code)
+elfNN_ia64_reloc_type_lookup (abfd, bfd_code)
+     bfd *abfd ATTRIBUTE_UNUSED;
+     bfd_reloc_code_real_type bfd_code;
 {
   unsigned int rtype;
 
@@ -504,9 +633,10 @@
 /* Given a ELF reloc, return the matching HOWTO structure.  */
 
 static void
-elfNN_ia64_info_to_howto (bfd *abfd ATTRIBUTE_UNUSED,
-			  arelent *bfd_reloc,
-			  Elf_Internal_Rela *elf_reloc)
+elfNN_ia64_info_to_howto (abfd, bfd_reloc, elf_reloc)
+     bfd *abfd ATTRIBUTE_UNUSED;
+     arelent *bfd_reloc;
+     Elf_Internal_Rela *elf_reloc;
 {
   bfd_reloc->howto
     = lookup_howto ((unsigned int) ELFNN_R_TYPE (elf_reloc->r_info));
@@ -674,7 +804,7 @@
       /* It should never happen.  */
       abort ();
     }
-
+  
   /* We can turn br.cond/br.call into brl.cond/brl.call.  */
   if (!(IS_BR_COND (br_code) || IS_BR_CALL (br_code)))
     return FALSE;
@@ -756,9 +886,11 @@
 /* These functions do relaxation for IA-64 ELF.  */
 
 static bfd_boolean
-elfNN_ia64_relax_section (bfd *abfd, asection *sec,
-			  struct bfd_link_info *link_info,
-			  bfd_boolean *again)
+elfNN_ia64_relax_section (abfd, sec, link_info, again)
+     bfd *abfd;
+     asection *sec;
+     struct bfd_link_info *link_info;
+     bfd_boolean *again;
 {
   struct one_fixup
     {
@@ -1275,7 +1407,9 @@
 #undef skip_relax_pass_1
 
 static void
-elfNN_ia64_relax_ldxmov (bfd_byte *contents, bfd_vma off)
+elfNN_ia64_relax_ldxmov (contents, off)
+     bfd_byte *contents;
+     bfd_vma off;
 {
   int shift, r1, r3;
   bfd_vma dword, insn;
@@ -1363,8 +1497,9 @@
    flag.  */
 
 static bfd_boolean
-elfNN_ia64_section_flags (flagword *flags,
-			  const Elf_Internal_Shdr *hdr)
+elfNN_ia64_section_flags (flags, hdr)
+     flagword *flags;
+     const Elf_Internal_Shdr *hdr;
 {
   if (hdr->sh_flags & SHF_IA_64_SHORT)
     *flags |= SEC_SMALL_DATA;
@@ -1376,8 +1511,10 @@
    section name, which is a hack, but ought to work.  */
 
 static bfd_boolean
-elfNN_ia64_fake_sections (bfd *abfd, Elf_Internal_Shdr *hdr,
-			  asection *sec)
+elfNN_ia64_fake_sections (abfd, hdr, sec)
+     bfd *abfd ATTRIBUTE_UNUSED;
+     Elf_Internal_Shdr *hdr;
+     asection *sec;
 {
   register const char *name;
 
@@ -1428,8 +1565,9 @@
    object file.  */
 
 static void
-elfNN_ia64_final_write_processing (bfd *abfd,
-				   bfd_boolean linker ATTRIBUTE_UNUSED)
+elfNN_ia64_final_write_processing (abfd, linker)
+     bfd *abfd;
+     bfd_boolean linker ATTRIBUTE_UNUSED;
 {
   Elf_Internal_Shdr *hdr;
   asection *s;
@@ -1467,13 +1605,14 @@
    file.  We use it to put .comm items in .sbss, and not .bss.  */
 
 static bfd_boolean
-elfNN_ia64_add_symbol_hook (bfd *abfd,
-			    struct bfd_link_info *info,
-			    Elf_Internal_Sym *sym,
-			    const char **namep ATTRIBUTE_UNUSED,
-			    flagword *flagsp ATTRIBUTE_UNUSED,
-			    asection **secp,
-			    bfd_vma *valp)
+elfNN_ia64_add_symbol_hook (abfd, info, sym, namep, flagsp, secp, valp)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     Elf_Internal_Sym *sym;
+     const char **namep ATTRIBUTE_UNUSED;
+     flagword *flagsp ATTRIBUTE_UNUSED;
+     asection **secp;
+     bfd_vma *valp;
 {
   if (sym->st_shndx == SHN_COMMON
       && !info->relocatable
@@ -1498,8 +1637,7 @@
       *valp = sym->st_size;
     }
 
-  return _bfd_elf_add_sharable_symbol (abfd, info, sym, namep, flagsp,
-				       secp, valp);
+  return TRUE;
 }
 
 /* Return the number of additional phdrs we will need.  */
@@ -1657,8 +1795,9 @@
    '.' are local.  */
 
 static bfd_boolean
-elfNN_ia64_is_local_label_name (bfd *abfd ATTRIBUTE_UNUSED,
-				const char *name)
+elfNN_ia64_is_local_label_name (abfd, name)
+     bfd *abfd ATTRIBUTE_UNUSED;
+     const char *name;
 {
   return name[0] == '.';
 }
@@ -1666,8 +1805,10 @@
 /* Should we do dynamic things to this symbol?  */
 
 static bfd_boolean
-elfNN_ia64_dynamic_symbol_p (struct elf_link_hash_entry *h,
-			     struct bfd_link_info *info, int r_type)
+elfNN_ia64_dynamic_symbol_p (h, info, r_type)
+     struct elf_link_hash_entry *h;
+     struct bfd_link_info *info;
+     int r_type;
 {
   bfd_boolean ignore_protected
     = ((r_type & 0xf8) == 0x40		/* FPTR relocs */
@@ -1677,9 +1818,10 @@
 }
 
 static struct bfd_hash_entry*
-elfNN_ia64_new_elf_hash_entry (struct bfd_hash_entry *entry,
-			       struct bfd_hash_table *table,
-			       const char *string)
+elfNN_ia64_new_elf_hash_entry (entry, table, string)
+     struct bfd_hash_entry *entry;
+     struct bfd_hash_table *table;
+     const char *string;
 {
   struct elfNN_ia64_link_hash_entry *ret;
   ret = (struct elfNN_ia64_link_hash_entry *) entry;
@@ -1705,9 +1847,9 @@
 }
 
 static void
-elfNN_ia64_hash_copy_indirect (struct bfd_link_info *info,
-			       struct elf_link_hash_entry *xdir,
-			       struct elf_link_hash_entry *xind)
+elfNN_ia64_hash_copy_indirect (info, xdir, xind)
+     struct bfd_link_info *info;
+     struct elf_link_hash_entry *xdir, *xind;
 {
   struct elfNN_ia64_link_hash_entry *dir, *ind;
 
@@ -1768,9 +1910,10 @@
 }
 
 static void
-elfNN_ia64_hash_hide_symbol (struct bfd_link_info *info,
-			     struct elf_link_hash_entry *xh,
-			     bfd_boolean force_local)
+elfNN_ia64_hash_hide_symbol (info, xh, force_local)
+     struct bfd_link_info *info;
+     struct elf_link_hash_entry *xh;
+     bfd_boolean force_local;
 {
   struct elfNN_ia64_link_hash_entry *h;
   struct elfNN_ia64_dyn_sym_info *dyn_i;
@@ -1792,7 +1935,8 @@
 /* Compute a hash of a local hash entry.  */
 
 static hashval_t
-elfNN_ia64_local_htab_hash (const void *ptr)
+elfNN_ia64_local_htab_hash (ptr)
+     const void *ptr;
 {
   struct elfNN_ia64_local_hash_entry *entry
     = (struct elfNN_ia64_local_hash_entry *) ptr;
@@ -1804,7 +1948,8 @@
 /* Compare local hash entries.  */
 
 static int
-elfNN_ia64_local_htab_eq (const void *ptr1, const void *ptr2)
+elfNN_ia64_local_htab_eq (ptr1, ptr2)
+     const void *ptr1, *ptr2;
 {
   struct elfNN_ia64_local_hash_entry *entry1
     = (struct elfNN_ia64_local_hash_entry *) ptr1;
@@ -1819,7 +1964,8 @@
    linker (without using static variables).  */
 
 static struct bfd_link_hash_table*
-elfNN_ia64_hash_table_create (bfd *abfd)
+elfNN_ia64_hash_table_create (abfd)
+     bfd *abfd;
 {
   struct elfNN_ia64_link_hash_table *ret;
 
@@ -1895,7 +2041,8 @@
 /* Destroy IA-64 linker hash table.  */
 
 static void
-elfNN_ia64_hash_table_free (struct bfd_link_hash_table *hash)
+elfNN_ia64_hash_table_free (hash)
+     struct bfd_link_hash_table *hash;
 {
   struct elfNN_ia64_link_hash_table *ia64_info
     = (struct elfNN_ia64_link_hash_table *) hash;
@@ -1916,13 +2063,14 @@
 
 struct elfNN_ia64_dyn_sym_traverse_data
 {
-  bfd_boolean (*func) (struct elfNN_ia64_dyn_sym_info *, PTR);
+  bfd_boolean (*func) PARAMS ((struct elfNN_ia64_dyn_sym_info *, PTR));
   PTR data;
 };
 
 static bfd_boolean
-elfNN_ia64_global_dyn_sym_thunk (struct bfd_hash_entry *xentry,
-				 PTR xdata)
+elfNN_ia64_global_dyn_sym_thunk (xentry, xdata)
+     struct bfd_hash_entry *xentry;
+     PTR xdata;
 {
   struct elfNN_ia64_link_hash_entry *entry
     = (struct elfNN_ia64_link_hash_entry *) xentry;
@@ -1943,7 +2091,9 @@
 }
 
 static bfd_boolean
-elfNN_ia64_local_dyn_sym_thunk (void **slot, PTR xdata)
+elfNN_ia64_local_dyn_sym_thunk (slot, xdata)
+     void **slot;
+     PTR xdata;
 {
   struct elfNN_ia64_local_hash_entry *entry
     = (struct elfNN_ia64_local_hash_entry *) *slot;
@@ -1961,9 +2111,10 @@
 }
 
 static void
-elfNN_ia64_dyn_sym_traverse (struct elfNN_ia64_link_hash_table *ia64_info,
-			     bfd_boolean (*func) (struct elfNN_ia64_dyn_sym_info *, PTR),
-			     PTR data)
+elfNN_ia64_dyn_sym_traverse (ia64_info, func, data)
+     struct elfNN_ia64_link_hash_table *ia64_info;
+     bfd_boolean (*func) PARAMS ((struct elfNN_ia64_dyn_sym_info *, PTR));
+     PTR data;
 {
   struct elfNN_ia64_dyn_sym_traverse_data xdata;
 
@@ -1977,8 +2128,9 @@
 }
 
 static bfd_boolean
-elfNN_ia64_create_dynamic_sections (bfd *abfd,
-				    struct bfd_link_info *info)
+elfNN_ia64_create_dynamic_sections (abfd, info)
+     bfd *abfd;
+     struct bfd_link_info *info;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   asection *s;
@@ -2028,9 +2180,11 @@
 
 /* Find and/or create a hash entry for local symbol.  */
 static struct elfNN_ia64_local_hash_entry *
-get_local_sym_hash (struct elfNN_ia64_link_hash_table *ia64_info,
-		    bfd *abfd, const Elf_Internal_Rela *rel,
-		    bfd_boolean create)
+get_local_sym_hash (ia64_info, abfd, rel, create)
+     struct elfNN_ia64_link_hash_table *ia64_info;
+     bfd *abfd;
+     const Elf_Internal_Rela *rel;
+     bfd_boolean create;
 {
   struct elfNN_ia64_local_hash_entry e, *ret;
   asection *sec = abfd->sections;
@@ -2258,9 +2412,12 @@
    requires a copy which is O(N), but this only happens once.  */
 
 static struct elfNN_ia64_dyn_sym_info *
-get_dyn_sym_info (struct elfNN_ia64_link_hash_table *ia64_info,
-		  struct elf_link_hash_entry *h, bfd *abfd,
-		  const Elf_Internal_Rela *rel, bfd_boolean create)
+get_dyn_sym_info (ia64_info, h, abfd, rel, create)
+     struct elfNN_ia64_link_hash_table *ia64_info;
+     struct elf_link_hash_entry *h;
+     bfd *abfd;
+     const Elf_Internal_Rela *rel;
+     bfd_boolean create;
 {
   struct elfNN_ia64_dyn_sym_info **info_p, *info, *dyn_i, key;
   unsigned int *count_p, *sorted_count_p, *size_p;
@@ -2358,7 +2515,7 @@
       memset (dyn_i, 0, sizeof (*dyn_i));
       dyn_i->got_offset = (bfd_vma) -1;
       dyn_i->addend = addend;
-
+      
       /* We increment count only since the new ones are unsorted and
 	 may have duplicate.  */
       (*count_p)++;
@@ -2397,8 +2554,10 @@
 }
 
 static asection *
-get_got (bfd *abfd, struct bfd_link_info *info,
-	 struct elfNN_ia64_link_hash_table *ia64_info)
+get_got (abfd, info, ia64_info)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     struct elfNN_ia64_link_hash_table *ia64_info;
 {
   asection *got;
   bfd *dynobj;
@@ -2435,8 +2594,10 @@
    of a procedure, thus ensuring a unique address for each procedure.  */
 
 static asection *
-get_fptr (bfd *abfd, struct bfd_link_info *info,
-	  struct elfNN_ia64_link_hash_table *ia64_info)
+get_fptr (abfd, info, ia64_info)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     struct elfNN_ia64_link_hash_table *ia64_info;
 {
   asection *fptr;
   bfd *dynobj;
@@ -2489,8 +2650,10 @@
 }
 
 static asection *
-get_pltoff (bfd *abfd, struct bfd_link_info *info ATTRIBUTE_UNUSED,
-	    struct elfNN_ia64_link_hash_table *ia64_info)
+get_pltoff (abfd, info, ia64_info)
+     bfd *abfd;
+     struct bfd_link_info *info ATTRIBUTE_UNUSED;
+     struct elfNN_ia64_link_hash_table *ia64_info;
 {
   asection *pltoff;
   bfd *dynobj;
@@ -2524,9 +2687,11 @@
 }
 
 static asection *
-get_reloc_section (bfd *abfd,
-		   struct elfNN_ia64_link_hash_table *ia64_info,
-		   asection *sec, bfd_boolean create)
+get_reloc_section (abfd, ia64_info, sec, create)
+     bfd *abfd;
+     struct elfNN_ia64_link_hash_table *ia64_info;
+     asection *sec;
+     bfd_boolean create;
 {
   const char *srel_name;
   asection *srel;
@@ -2597,9 +2762,11 @@
 }
 
 static bfd_boolean
-elfNN_ia64_check_relocs (bfd *abfd, struct bfd_link_info *info,
-			 asection *sec,
-			 const Elf_Internal_Rela *relocs)
+elfNN_ia64_check_relocs (abfd, info, sec, relocs)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     asection *sec;
+     const Elf_Internal_Rela *relocs;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   const Elf_Internal_Rela *relend;
@@ -2801,7 +2968,7 @@
     }
 
   /* Now, we only do lookup without insertion, which is very fast
-     with the modified get_dyn_sym_info.  */
+     with the modified get_dyn_sym_info.  */ 
   for (rel = relocs; rel < relend; ++rel)
     {
       struct elfNN_ia64_dyn_sym_info *dyn_i;
@@ -3055,8 +3222,9 @@
    external GOT entries first.  */
 
 static bfd_boolean
-allocate_global_data_got (struct elfNN_ia64_dyn_sym_info *dyn_i,
-			  PTR data)
+allocate_global_data_got (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
 
@@ -3103,8 +3271,9 @@
 /* Next, allocate all the GOT entries used by LTOFF_FPTR relocs.  */
 
 static bfd_boolean
-allocate_global_fptr_got (struct elfNN_ia64_dyn_sym_info *dyn_i,
-			  PTR data)
+allocate_global_fptr_got (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
 
@@ -3121,8 +3290,9 @@
 /* Lastly, allocate all the GOT entries for local data.  */
 
 static bfd_boolean
-allocate_local_got (struct elfNN_ia64_dyn_sym_info *dyn_i,
-		    PTR data)
+allocate_local_got (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
 
@@ -3138,7 +3308,8 @@
 /* Search for the index of a global symbol in it's defining object file.  */
 
 static long
-global_sym_index (struct elf_link_hash_entry *h)
+global_sym_index (h)
+     struct elf_link_hash_entry *h;
 {
   struct elf_link_hash_entry **p;
   bfd *obj;
@@ -3157,7 +3328,9 @@
    in a main executable that is not exported.  */
 
 static bfd_boolean
-allocate_fptr (struct elfNN_ia64_dyn_sym_info *dyn_i, PTR data)
+allocate_fptr (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
 
@@ -3203,8 +3376,9 @@
 /* Allocate all the minimal PLT entries.  */
 
 static bfd_boolean
-allocate_plt_entries (struct elfNN_ia64_dyn_sym_info *dyn_i,
-		      PTR data)
+allocate_plt_entries (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
 
@@ -3240,8 +3414,9 @@
 /* Allocate all the full PLT entries.  */
 
 static bfd_boolean
-allocate_plt2_entries (struct elfNN_ia64_dyn_sym_info *dyn_i,
-		       PTR data)
+allocate_plt2_entries (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
 
@@ -3267,8 +3442,9 @@
    ??? Relaxation might be able to determine that they are.  */
 
 static bfd_boolean
-allocate_pltoff_entries (struct elfNN_ia64_dyn_sym_info *dyn_i,
-			 PTR data)
+allocate_pltoff_entries (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
 
@@ -3284,8 +3460,9 @@
    to be dynamic.  */
 
 static bfd_boolean
-allocate_dynrel_entries (struct elfNN_ia64_dyn_sym_info *dyn_i,
-			 PTR data)
+allocate_dynrel_entries (dyn_i, data)
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     PTR data;
 {
   struct elfNN_ia64_allocate_data *x = (struct elfNN_ia64_allocate_data *)data;
   struct elfNN_ia64_link_hash_table *ia64_info;
@@ -3400,8 +3577,9 @@
 }
 
 static bfd_boolean
-elfNN_ia64_adjust_dynamic_symbol (struct bfd_link_info *info ATTRIBUTE_UNUSED,
-				  struct elf_link_hash_entry *h)
+elfNN_ia64_adjust_dynamic_symbol (info, h)
+     struct bfd_link_info *info ATTRIBUTE_UNUSED;
+     struct elf_link_hash_entry *h;
 {
   /* ??? Undefined symbols with PLT entries should be re-defined
      to be the PLT entry.  */
@@ -3429,8 +3607,9 @@
 }
 
 static bfd_boolean
-elfNN_ia64_size_dynamic_sections (bfd *output_bfd ATTRIBUTE_UNUSED,
-				  struct bfd_link_info *info)
+elfNN_ia64_size_dynamic_sections (output_bfd, info)
+     bfd *output_bfd ATTRIBUTE_UNUSED;
+     struct bfd_link_info *info;
 {
   struct elfNN_ia64_allocate_data data;
   struct elfNN_ia64_link_hash_table *ia64_info;
@@ -3678,8 +3857,10 @@
 }
 
 static bfd_reloc_status_type
-elfNN_ia64_install_value (bfd_byte *hit_addr, bfd_vma v,
-			  unsigned int r_type)
+elfNN_ia64_install_value (hit_addr, v, r_type)
+     bfd_byte *hit_addr;
+     bfd_vma v;
+     unsigned int r_type;
 {
   const struct ia64_operand *op;
   int bigendian = 0, shift = 0;
@@ -3901,10 +4082,16 @@
 }
 
 static void
-elfNN_ia64_install_dyn_reloc (bfd *abfd, struct bfd_link_info *info,
-			      asection *sec, asection *srel,
-			      bfd_vma offset, unsigned int type,
-			      long dynindx, bfd_vma addend)
+elfNN_ia64_install_dyn_reloc (abfd, info, sec, srel, offset, type,
+			      dynindx, addend)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     asection *sec;
+     asection *srel;
+     bfd_vma offset;
+     unsigned int type;
+     long dynindx;
+     bfd_vma addend;
 {
   Elf_Internal_Rela outrel;
   bfd_byte *loc;
@@ -3934,10 +4121,14 @@
    and return the gp-relative address of the linkage table entry.  */
 
 static bfd_vma
-set_got_entry (bfd *abfd, struct bfd_link_info *info,
-	       struct elfNN_ia64_dyn_sym_info *dyn_i,
-	       long dynindx, bfd_vma addend, bfd_vma value,
-	       unsigned int dyn_r_type)
+set_got_entry (abfd, info, dyn_i, dynindx, addend, value, dyn_r_type)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     long dynindx;
+     bfd_vma addend;
+     bfd_vma value;
+     unsigned int dyn_r_type;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   asection *got_sec;
@@ -4074,9 +4265,11 @@
    address and its global pointer.  Return the descriptor's address.  */
 
 static bfd_vma
-set_fptr_entry (bfd *abfd, struct bfd_link_info *info,
-		struct elfNN_ia64_dyn_sym_info *dyn_i,
-		bfd_vma value)
+set_fptr_entry (abfd, info, dyn_i, value)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     bfd_vma value;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   asection *fptr_sec;
@@ -4124,9 +4317,12 @@
    and its global pointer.  Return the descriptor's address.  */
 
 static bfd_vma
-set_pltoff_entry (bfd *abfd, struct bfd_link_info *info,
-		  struct elfNN_ia64_dyn_sym_info *dyn_i,
-		  bfd_vma value, bfd_boolean is_plt)
+set_pltoff_entry (abfd, info, dyn_i, value, is_plt)
+     bfd *abfd;
+     struct bfd_link_info *info;
+     struct elfNN_ia64_dyn_sym_info *dyn_i;
+     bfd_vma value;
+     bfd_boolean is_plt;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   asection *pltoff_sec;
@@ -4186,7 +4382,8 @@
    is assigned offset round(2 * size of pointer, PT_TLS p_align).  */
 
 static bfd_vma
-elfNN_ia64_tprel_base (struct bfd_link_info *info)
+elfNN_ia64_tprel_base (info)
+     struct bfd_link_info *info;
 {
   asection *tls_sec = elf_hash_table (info)->tls_sec;
 
@@ -4200,7 +4397,8 @@
    This is PT_TLS segment p_vaddr.  */
 
 static bfd_vma
-elfNN_ia64_dtprel_base (struct bfd_link_info *info)
+elfNN_ia64_dtprel_base (info)
+     struct bfd_link_info *info;
 {
   BFD_ASSERT (elf_hash_table (info)->tls_sec != NULL);
   return elf_hash_table (info)->tls_sec->vma;
@@ -4213,7 +4411,9 @@
 static bfd *elfNN_ia64_unwind_entry_compare_bfd;
 
 static int
-elfNN_ia64_unwind_entry_compare (const PTR a, const PTR b)
+elfNN_ia64_unwind_entry_compare (a, b)
+     const PTR a;
+     const PTR b;
 {
   bfd_vma av, bv;
 
@@ -4225,7 +4425,9 @@
 
 /* Make sure we've got ourselves a nice fat __gp value.  */
 static bfd_boolean
-elfNN_ia64_choose_gp (bfd *abfd, struct bfd_link_info *info)
+elfNN_ia64_choose_gp (abfd, info)
+     bfd *abfd;
+     struct bfd_link_info *info;
 {
   bfd_vma min_vma = (bfd_vma) -1, max_vma = 0;
   bfd_vma min_short_vma = min_vma, max_short_vma = 0;
@@ -4341,7 +4543,9 @@
 }
 
 static bfd_boolean
-elfNN_ia64_final_link (bfd *abfd, struct bfd_link_info *info)
+elfNN_ia64_final_link (abfd, info)
+     bfd *abfd;
+     struct bfd_link_info *info;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   asection *unwind_output_sec;
@@ -4410,14 +4614,16 @@
 }
 
 static bfd_boolean
-elfNN_ia64_relocate_section (bfd *output_bfd,
-			     struct bfd_link_info *info,
-			     bfd *input_bfd,
-			     asection *input_section,
-			     bfd_byte *contents,
-			     Elf_Internal_Rela *relocs,
-			     Elf_Internal_Sym *local_syms,
-			     asection **local_sections)
+elfNN_ia64_relocate_section (output_bfd, info, input_bfd, input_section,
+			     contents, relocs, local_syms, local_sections)
+     bfd *output_bfd;
+     struct bfd_link_info *info;
+     bfd *input_bfd;
+     asection *input_section;
+     bfd_byte *contents;
+     Elf_Internal_Rela *relocs;
+     Elf_Internal_Sym *local_syms;
+     asection **local_sections;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   Elf_Internal_Shdr *symtab_hdr;
@@ -4535,17 +4741,17 @@
       else
 	{
 	  bfd_boolean unresolved_reloc;
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 	  struct elf_link_hash_entry **sym_hashes = elf_sym_hashes (input_bfd);
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sym_sec, value,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 
 	  if (h->root.type == bfd_link_hash_undefweak)
 	    undef_weak_ref = TRUE;
-	  else if (warned || (ignored && info->executable))
+	  else if (warned)
 	    continue;
 	}
 
@@ -5131,10 +5337,11 @@
 }
 
 static bfd_boolean
-elfNN_ia64_finish_dynamic_symbol (bfd *output_bfd,
-				  struct bfd_link_info *info,
-				  struct elf_link_hash_entry *h,
-				  Elf_Internal_Sym *sym)
+elfNN_ia64_finish_dynamic_symbol (output_bfd, info, h, sym)
+     bfd *output_bfd;
+     struct bfd_link_info *info;
+     struct elf_link_hash_entry *h;
+     Elf_Internal_Sym *sym;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   struct elfNN_ia64_dyn_sym_info *dyn_i;
@@ -5219,8 +5426,9 @@
 }
 
 static bfd_boolean
-elfNN_ia64_finish_dynamic_sections (bfd *abfd,
-				    struct bfd_link_info *info)
+elfNN_ia64_finish_dynamic_sections (abfd, info)
+     bfd *abfd;
+     struct bfd_link_info *info;
 {
   struct elfNN_ia64_link_hash_table *ia64_info;
   bfd *dynobj;
@@ -5306,7 +5514,9 @@
 
 /* Function to keep IA-64 specific file flags.  */
 static bfd_boolean
-elfNN_ia64_set_private_flags (bfd *abfd, flagword flags)
+elfNN_ia64_set_private_flags (abfd, flags)
+     bfd *abfd;
+     flagword flags;
 {
   BFD_ASSERT (!elf_flags_init (abfd)
 	      || elf_elfheader (abfd)->e_flags == flags);
@@ -5319,7 +5529,8 @@
 /* Merge backend specific data from an object file to the output
    object file when linking.  */
 static bfd_boolean
-elfNN_ia64_merge_private_bfd_data (bfd *ibfd, bfd *obfd)
+elfNN_ia64_merge_private_bfd_data (ibfd, obfd)
+     bfd *ibfd, *obfd;
 {
   flagword out_flags;
   flagword in_flags;
@@ -5407,7 +5618,9 @@
 }
 
 static bfd_boolean
-elfNN_ia64_print_private_bfd_data (bfd *abfd, PTR ptr)
+elfNN_ia64_print_private_bfd_data (abfd, ptr)
+     bfd *abfd;
+     PTR ptr;
 {
   FILE *file = (FILE *) ptr;
   flagword flags = elf_elfheader (abfd)->e_flags;
@@ -5429,7 +5642,8 @@
 }
 
 static enum elf_reloc_type_class
-elfNN_ia64_reloc_type_class (const Elf_Internal_Rela *rela)
+elfNN_ia64_reloc_type_class (rela)
+     const Elf_Internal_Rela *rela;
 {
   switch ((int) ELFNN_R_TYPE (rela->r_info))
     {
@@ -5556,8 +5770,9 @@
 }
 
 static void
-elfNN_hpux_post_process_headers (bfd *abfd,
-				 struct bfd_link_info *info ATTRIBUTE_UNUSED)
+elfNN_hpux_post_process_headers (abfd, info)
+	bfd *abfd;
+	struct bfd_link_info *info ATTRIBUTE_UNUSED;
 {
   Elf_Internal_Ehdr *i_ehdrp = elf_elfheader (abfd);
 
@@ -5565,9 +5780,11 @@
   i_ehdrp->e_ident[EI_ABIVERSION] = 1;
 }
 
-static bfd_boolean
-elfNN_hpux_backend_section_from_bfd_section (bfd *abfd ATTRIBUTE_UNUSED,
-					     asection *sec, int *retval)
+bfd_boolean
+elfNN_hpux_backend_section_from_bfd_section (abfd, sec, retval)
+	bfd *abfd ATTRIBUTE_UNUSED;
+	asection *sec;
+	int *retval;
 {
   if (bfd_is_com_section (sec))
     {
@@ -5684,19 +5901,6 @@
 #define elf_backend_special_sections	elfNN_ia64_special_sections
 #define elf_backend_default_execstack	0
 
-#define elf_backend_section_from_bfd_section \
-  _bfd_elf_sharable_section_from_bfd_section
-#define elf_backend_symbol_processing \
-  _bfd_elf_sharable_symbol_processing
-#define elf_backend_common_section_index \
-  _bfd_elf_sharable_common_section_index
-#define elf_backend_common_section \
-  _bfd_elf_sharable_common_section
-#define elf_backend_common_definition \
-  _bfd_elf_sharable_common_definition
-#define elf_backend_merge_symbol \
-  _bfd_elf_sharable_merge_symbol
-
 /* FIXME: PR 290: The Intel C compiler generates SHT_IA_64_UNWIND with
    SHF_LINK_ORDER. But it doesn't set the sh_link or sh_info fields.
    We don't want to flood users with so many error messages. We turn
diff -Nur binutils-2.18.50.0.1/bfd/elfxx-mips.c binutils-stable/bfd/elfxx-mips.c
--- binutils-2.18.50.0.1/bfd/elfxx-mips.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/elfxx-mips.c	2007-09-25 15:41:59.000000000 +0200
@@ -112,6 +112,30 @@
   long gotidx;
 };
 
+/* This structure describes a range of addends: [MIN_ADDEND, MAX_ADDEND].
+   The structures form a non-overlapping list that is sorted by increasing
+   MIN_ADDEND.  */
+struct mips_got_page_range
+{
+  struct mips_got_page_range *next;
+  bfd_signed_vma min_addend;
+  bfd_signed_vma max_addend;
+};
+
+/* This structure describes the range of addends that are applied to page
+   relocations against a given symbol.  */
+struct mips_got_page_entry
+{
+  /* The input bfd in which the symbol is defined.  */
+  bfd *abfd;
+  /* The index of the symbol, as stored in the relocation r_info.  */
+  long symndx;
+  /* The ranges for this page entry.  */
+  struct mips_got_page_range *ranges;
+  /* The maximum number of page entries needed for RANGES.  */
+  bfd_vma num_pages;
+};
+
 /* This structure is used to hold .got information when linking.  */
 
 struct mips_got_info
@@ -126,12 +150,16 @@
   /* The first unused TLS .got entry.  Used only during
      mips_elf_initialize_tls_index.  */
   unsigned int tls_assigned_gotno;
-  /* The number of local .got entries.  */
+  /* The number of local .got entries, eventually including page entries.  */
   unsigned int local_gotno;
+  /* The maximum number of page entries needed.  */
+  unsigned int page_gotno;
   /* The number of local .got entries we have used.  */
   unsigned int assigned_gotno;
   /* A hash table holding members of the got.  */
   struct htab *got_entries;
+  /* A hash table of mips_got_page_entry structures.  */
+  struct htab *got_page_entries;
   /* A hash table mapping input bfds to other mips_got_info.  NULL
      unless multi-got was necessary.  */
   struct htab *bfd2got;
@@ -173,10 +201,8 @@
   /* The maximum number of got entries that can be addressed with a
      16-bit offset.  */
   unsigned int max_count;
-  /* The number of local and global entries in the primary got.  */
-  unsigned int primary_count;
-  /* The number of local and global entries in the current got.  */
-  unsigned int current_count;
+  /* The maximum number of page entries needed by each got.  */
+  unsigned int max_pages;
   /* The total number of global entries which will live in the
      primary got and be automatically relocated.  This includes
      those not referenced by the primary GOT but included in
@@ -2039,6 +2065,25 @@
 	? e1->abfd == e2->abfd && e1->d.address == e2->d.address
 	: e1->d.h == e2->d.h);
 }
+
+static hashval_t
+mips_got_page_entry_hash (const void *entry_)
+{
+  const struct mips_got_page_entry *entry;
+
+  entry = (const struct mips_got_page_entry *) entry_;
+  return entry->abfd->id + entry->symndx;
+}
+
+static int
+mips_got_page_entry_eq (const void *entry1_, const void *entry2_)
+{
+  const struct mips_got_page_entry *entry1, *entry2;
+
+  entry1 = (const struct mips_got_page_entry *) entry1_;
+  entry2 = (const struct mips_got_page_entry *) entry2_;
+  return entry1->abfd == entry2->abfd && entry1->symndx == entry2->symndx;
+}
 
 /* Return the dynamic relocation section.  If it doesn't exist, try to
    create a new it if CREATE_P, otherwise return NULL.  Also return NULL
@@ -2952,6 +2997,104 @@
 
   return TRUE;
 }
+
+/* Return the maximum number of GOT page entries required for RANGE.  */
+
+static bfd_vma
+mips_elf_pages_for_range (const struct mips_got_page_range *range)
+{
+  return (range->max_addend - range->min_addend + 0x1ffff) >> 16;
+}
+
+/* Record that ABFD has a page relocation against symbol SYMNDX and that
+   ADDEND is the addend for that relocation.  G is the GOT information.  */
+
+static bfd_boolean
+mips_elf_record_got_page_entry (bfd *abfd, long symndx, bfd_signed_vma addend,
+				struct mips_got_info *g)
+{
+  struct mips_got_page_entry lookup, *entry;
+  struct mips_got_page_range **range_ptr, *range;
+  bfd_vma old_pages, new_pages;
+  void **loc;
+
+  /* Find the mips_got_page_entry hash table entry for this symbol.  */
+  lookup.abfd = abfd;
+  lookup.symndx = symndx;
+  loc = htab_find_slot (g->got_page_entries, &lookup, INSERT);
+  if (loc == NULL)
+    return FALSE;
+
+  /* Create a mips_got_page_entry if this is the first time we've
+     seen the symbol.  */
+  entry = (struct mips_got_page_entry *) *loc;
+  if (!entry)
+    {
+      entry = bfd_alloc (abfd, sizeof (*entry));
+      if (!entry)
+	return FALSE;
+
+      entry->abfd = abfd;
+      entry->symndx = symndx;
+      entry->ranges = NULL;
+      entry->num_pages = 0;
+      *loc = entry;
+    }
+
+  /* Skip over ranges whose maximum extent cannot share a page entry
+     with ADDEND.  */
+  range_ptr = &entry->ranges;
+  while (*range_ptr && addend > (*range_ptr)->max_addend + 0xffff)
+    range_ptr = &(*range_ptr)->next;
+
+  /* If we scanned to the end of the list, or found a range whose
+     minimum extent cannot share a page entry with ADDEND, create
+     a new singleton range.  */
+  range = *range_ptr;
+  if (!range || addend < range->min_addend - 0xffff)
+    {
+      range = bfd_alloc (abfd, sizeof (*range));
+      if (!range)
+	return FALSE;
+
+      range->next = *range_ptr;
+      range->min_addend = addend;
+      range->max_addend = addend;
+
+      *range_ptr = range;
+      entry->num_pages++;
+      g->page_gotno++;
+      return TRUE;
+    }
+
+  /* Remember how many pages the old range contributed.  */
+  old_pages = mips_elf_pages_for_range (range);
+
+  /* Update the ranges.  */
+  if (addend < range->min_addend)
+    range->min_addend = addend;
+  else if (addend > range->max_addend)
+    {
+      if (range->next && addend >= range->next->min_addend - 0xffff)
+	{
+	  old_pages += mips_elf_pages_for_range (range->next);
+	  range->max_addend = range->next->max_addend;
+	  range->next = range->next->next;
+	}
+      else
+	range->max_addend = addend;
+    }
+
+  /* Record any change in the total estimate.  */
+  new_pages = mips_elf_pages_for_range (range);
+  if (old_pages != new_pages)
+    {
+      entry->num_pages += new_pages - old_pages;
+      g->page_gotno += new_pages - old_pages;
+    }
+
+  return TRUE;
+}
 
 /* Compute the hash value of the bfd in a bfd2got hash entry.  */
 
@@ -2993,53 +3136,42 @@
   return p ? p->g : NULL;
 }
 
-/* Create one separate got for each bfd that has entries in the global
-   got, such that we can tell how many local and global entries each
-   bfd requires.  */
+/* Use BFD2GOT to find ABFD's got entry, creating one if none exists.
+   Return NULL if an error occured.  */
 
-static int
-mips_elf_make_got_per_bfd (void **entryp, void *p)
+static struct mips_got_info *
+mips_elf_get_got_for_bfd (struct htab *bfd2got, bfd *output_bfd,
+			  bfd *input_bfd)
 {
-  struct mips_got_entry *entry = (struct mips_got_entry *)*entryp;
-  struct mips_elf_got_per_bfd_arg *arg = (struct mips_elf_got_per_bfd_arg *)p;
-  htab_t bfd2got = arg->bfd2got;
-  struct mips_got_info *g;
   struct mips_elf_bfd2got_hash bfdgot_entry, *bfdgot;
+  struct mips_got_info *g;
   void **bfdgotp;
 
-  /* Find the got_info for this GOT entry's input bfd.  Create one if
-     none exists.  */
-  bfdgot_entry.bfd = entry->abfd;
+  bfdgot_entry.bfd = input_bfd;
   bfdgotp = htab_find_slot (bfd2got, &bfdgot_entry, INSERT);
-  bfdgot = (struct mips_elf_bfd2got_hash *)*bfdgotp;
+  bfdgot = (struct mips_elf_bfd2got_hash *) *bfdgotp;
 
-  if (bfdgot != NULL)
-    g = bfdgot->g;
-  else
+  if (bfdgot == NULL)
     {
-      bfdgot = (struct mips_elf_bfd2got_hash *)bfd_alloc
-	(arg->obfd, sizeof (struct mips_elf_bfd2got_hash));
-
+      bfdgot = ((struct mips_elf_bfd2got_hash *)
+		bfd_alloc (output_bfd, sizeof (struct mips_elf_bfd2got_hash)));
       if (bfdgot == NULL)
-	{
-	  arg->obfd = 0;
-	  return 0;
-	}
+	return NULL;
 
       *bfdgotp = bfdgot;
 
-      bfdgot->bfd = entry->abfd;
-      bfdgot->g = g = (struct mips_got_info *)
-	bfd_alloc (arg->obfd, sizeof (struct mips_got_info));
+      g = ((struct mips_got_info *)
+	   bfd_alloc (output_bfd, sizeof (struct mips_got_info)));
       if (g == NULL)
-	{
-	  arg->obfd = 0;
-	  return 0;
-	}
+	return NULL;
+
+      bfdgot->bfd = input_bfd;
+      bfdgot->g = g;
 
       g->global_gotsym = NULL;
       g->global_gotno = 0;
       g->local_gotno = 0;
+      g->page_gotno = 0;
       g->assigned_gotno = -1;
       g->tls_gotno = 0;
       g->tls_assigned_gotno = 0;
@@ -3047,15 +3179,39 @@
       g->got_entries = htab_try_create (1, mips_elf_multi_got_entry_hash,
 					mips_elf_multi_got_entry_eq, NULL);
       if (g->got_entries == NULL)
-	{
-	  arg->obfd = 0;
-	  return 0;
-	}
+	return NULL;
+
+      g->got_page_entries = htab_try_create (1, mips_got_page_entry_hash,
+					     mips_got_page_entry_eq, NULL);
+      if (g->got_page_entries == NULL)
+	return NULL;
 
       g->bfd2got = NULL;
       g->next = NULL;
     }
 
+  return bfdgot->g;
+}
+
+/* A htab_traverse callback for the entries in the master got.
+   Create one separate got for each bfd that has entries in the global
+   got, such that we can tell how many local and global entries each
+   bfd requires.  */
+
+static int
+mips_elf_make_got_per_bfd (void **entryp, void *p)
+{
+  struct mips_got_entry *entry = (struct mips_got_entry *)*entryp;
+  struct mips_elf_got_per_bfd_arg *arg = (struct mips_elf_got_per_bfd_arg *)p;
+  struct mips_got_info *g;
+
+  g = mips_elf_get_got_for_bfd (arg->bfd2got, arg->obfd, entry->abfd);
+  if (g == NULL)
+    {
+      arg->obfd = NULL;
+      return 0;
+    }
+
   /* Insert the GOT entry in the bfd's got entry hash table.  */
   entryp = htab_find_slot (g->got_entries, entry, INSERT);
   if (*entryp != NULL)
@@ -3078,6 +3234,85 @@
   return 1;
 }
 
+/* A htab_traverse callback for the page entries in the master got.
+   Associate each page entry with the bfd's got.  */
+
+static int
+mips_elf_make_got_pages_per_bfd (void **entryp, void *p)
+{
+  struct mips_got_page_entry *entry = (struct mips_got_page_entry *) *entryp;
+  struct mips_elf_got_per_bfd_arg *arg = (struct mips_elf_got_per_bfd_arg *) p;
+  struct mips_got_info *g;
+
+  g = mips_elf_get_got_for_bfd (arg->bfd2got, arg->obfd, entry->abfd);
+  if (g == NULL)
+    {
+      arg->obfd = NULL;
+      return 0;
+    }
+
+  /* Insert the GOT entry in the bfd's got entry hash table.  */
+  entryp = htab_find_slot (g->got_page_entries, entry, INSERT);
+  if (*entryp != NULL)
+    return 1;
+
+  *entryp = entry;
+  g->page_gotno += entry->num_pages;
+  return 1;
+}
+
+/* Consider merging the got described by BFD2GOT with TO, using the
+   information given by ARG.  Return -1 if this would lead to overflow,
+   1 if they were merged successfully, and 0 if a merge failed due to
+   lack of memory.  (These values are chosen so that nonnegative return
+   values can be returned by a htab_traverse callback.)  */
+
+static int
+mips_elf_merge_got_with (struct mips_elf_bfd2got_hash *bfd2got,
+			 struct mips_got_info *to,
+			 struct mips_elf_got_per_bfd_arg *arg)
+{
+  struct mips_got_info *from = bfd2got->g;
+  unsigned int estimate;
+
+  /* Work out how many page entries we would need for the combined GOT.  */
+  estimate = arg->max_pages;
+  if (estimate >= from->page_gotno + to->page_gotno)
+    estimate = from->page_gotno + to->page_gotno;
+
+  /* And conservatively estimate how many local, global and TLS entries
+     would be needed.  */
+  estimate += (from->local_gotno
+	       + from->global_gotno
+	       + from->tls_gotno
+	       + to->local_gotno
+	       + to->global_gotno
+	       + to->tls_gotno);
+
+  /* Bail out if the combined GOT might be too big.  */
+  if (estimate > arg->max_count)
+    return -1;
+
+  /* Commit to the merge.  Record that TO is now the bfd for this got.  */
+  bfd2got->g = to;
+
+  /* Transfer the bfd's got information from FROM to TO.  */
+  htab_traverse (from->got_entries, mips_elf_make_got_per_bfd, arg);
+  if (arg->obfd == NULL)
+    return 0;
+
+  htab_traverse (from->got_page_entries, mips_elf_make_got_pages_per_bfd, arg);
+  if (arg->obfd == NULL)
+    return 0;
+
+  /* We don't have to worry about releasing memory of the actual
+     got entries, since they're all in the master got_entries hash
+     table anyway.  */
+  htab_delete (from->got_entries);
+  htab_delete (from->got_page_entries);
+  return 1;
+}
+
 /* Attempt to merge gots of different input bfds.  Try to use as much
    as possible of the primary got, since it doesn't require explicit
    dynamic relocations, but don't use bfds that would reference global
@@ -3091,98 +3326,53 @@
   struct mips_elf_bfd2got_hash *bfd2got
     = (struct mips_elf_bfd2got_hash *)*bfd2got_;
   struct mips_elf_got_per_bfd_arg *arg = (struct mips_elf_got_per_bfd_arg *)p;
-  unsigned int lcount = bfd2got->g->local_gotno;
-  unsigned int gcount = bfd2got->g->global_gotno;
-  unsigned int tcount = bfd2got->g->tls_gotno;
-  unsigned int maxcnt = arg->max_count;
-  bfd_boolean too_many_for_tls = FALSE;
+  struct mips_got_info *g;
+  unsigned int estimate;
+  int result;
+
+  g = bfd2got->g;
+
+  /* Work out the number of page, local and TLS entries.  */
+  estimate = arg->max_pages;
+  if (estimate > g->page_gotno)
+    estimate = g->page_gotno;
+  estimate += g->local_gotno + g->tls_gotno;
 
   /* We place TLS GOT entries after both locals and globals.  The globals
      for the primary GOT may overflow the normal GOT size limit, so be
      sure not to merge a GOT which requires TLS with the primary GOT in that
      case.  This doesn't affect non-primary GOTs.  */
-  if (tcount > 0)
-    {
-      unsigned int primary_total = lcount + tcount + arg->global_count;
-      if (primary_total > maxcnt)
-	too_many_for_tls = TRUE;
-    }
-
-  /* If we don't have a primary GOT and this is not too big, use it as
-     a starting point for the primary GOT.  */
-  if (! arg->primary && lcount + gcount + tcount <= maxcnt
-      && ! too_many_for_tls)
-    {
-      arg->primary = bfd2got->g;
-      arg->primary_count = lcount + gcount;
-    }
-  /* If it looks like we can merge this bfd's entries with those of
-     the primary, merge them.  The heuristics is conservative, but we
-     don't have to squeeze it too hard.  */
-  else if (arg->primary && ! too_many_for_tls
-	   && (arg->primary_count + lcount + gcount + tcount) <= maxcnt)
-    {
-      struct mips_got_info *g = bfd2got->g;
-      int old_lcount = arg->primary->local_gotno;
-      int old_gcount = arg->primary->global_gotno;
-      int old_tcount = arg->primary->tls_gotno;
-
-      bfd2got->g = arg->primary;
-
-      htab_traverse (g->got_entries,
-		     mips_elf_make_got_per_bfd,
-		     arg);
-      if (arg->obfd == NULL)
-	return 0;
+  estimate += (g->tls_gotno > 0 ? arg->global_count : g->global_gotno);
 
-      htab_delete (g->got_entries);
-      /* We don't have to worry about releasing memory of the actual
-	 got entries, since they're all in the master got_entries hash
-	 table anyway.  */
-
-      BFD_ASSERT (old_lcount + lcount >= arg->primary->local_gotno);
-      BFD_ASSERT (old_gcount + gcount >= arg->primary->global_gotno);
-      BFD_ASSERT (old_tcount + tcount >= arg->primary->tls_gotno);
+  if (estimate <= arg->max_count)
+    {
+      /* If we don't have a primary GOT, use it as
+	 a starting point for the primary GOT.  */
+      if (!arg->primary)
+	{
+	  arg->primary = bfd2got->g;
+	  return 1;
+	}
 
-      arg->primary_count = arg->primary->local_gotno
-	+ arg->primary->global_gotno + arg->primary->tls_gotno;
+      /* Try merging with the primary GOT.  */
+      result = mips_elf_merge_got_with (bfd2got, arg->primary, arg);
+      if (result >= 0)
+	return result;
     }
+
   /* If we can merge with the last-created got, do it.  */
-  else if (arg->current
-	   && arg->current_count + lcount + gcount + tcount <= maxcnt)
+  if (arg->current)
     {
-      struct mips_got_info *g = bfd2got->g;
-      int old_lcount = arg->current->local_gotno;
-      int old_gcount = arg->current->global_gotno;
-      int old_tcount = arg->current->tls_gotno;
-
-      bfd2got->g = arg->current;
-
-      htab_traverse (g->got_entries,
-		     mips_elf_make_got_per_bfd,
-		     arg);
-      if (arg->obfd == NULL)
-	return 0;
-
-      htab_delete (g->got_entries);
-
-      BFD_ASSERT (old_lcount + lcount >= arg->current->local_gotno);
-      BFD_ASSERT (old_gcount + gcount >= arg->current->global_gotno);
-      BFD_ASSERT (old_tcount + tcount >= arg->current->tls_gotno);
-
-      arg->current_count = arg->current->local_gotno
-	+ arg->current->global_gotno + arg->current->tls_gotno;
+      result = mips_elf_merge_got_with (bfd2got, arg->current, arg);
+      if (result >= 0)
+	return result;
     }
+
   /* Well, we couldn't merge, so create a new GOT.  Don't check if it
      fits; if it turns out that it doesn't, we'll get relocation
      overflows anyway.  */
-  else
-    {
-      bfd2got->g->next = arg->current;
-      arg->current = bfd2got->g;
-
-      arg->current_count = lcount + gcount + 2 * tcount;
-    }
+  g->next = arg->current;
+  arg->current = g;
 
   return 1;
 }
@@ -3416,14 +3606,18 @@
   if (got_per_bfd_arg.obfd == NULL)
     return FALSE;
 
+  /* Also count how many page entries each input bfd requires.  */
+  htab_traverse (g->got_page_entries, mips_elf_make_got_pages_per_bfd,
+		 &got_per_bfd_arg);
+  if (got_per_bfd_arg.obfd == NULL)
+    return FALSE;
+
   got_per_bfd_arg.current = NULL;
   got_per_bfd_arg.primary = NULL;
-  /* Taking out PAGES entries is a worst-case estimate.  We could
-     compute the maximum number of pages that each separate input bfd
-     uses, but it's probably not worth it.  */
   got_per_bfd_arg.max_count = ((MIPS_ELF_GOT_MAX_SIZE (info)
 				/ MIPS_ELF_GOT_SIZE (abfd))
-			       - MIPS_RESERVED_GOTNO (info) - pages);
+			       - MIPS_RESERVED_GOTNO (info));
+  got_per_bfd_arg.max_pages = pages;
   /* The number of globals that will be included in the primary GOT.
      See the calls to mips_elf_set_global_got_offset below for more
      information.  */
@@ -3447,6 +3641,7 @@
       g->next->global_gotsym = NULL;
       g->next->global_gotno = 0;
       g->next->local_gotno = 0;
+      g->next->page_gotno = 0;
       g->next->tls_gotno = 0;
       g->next->assigned_gotno = 0;
       g->next->tls_assigned_gotno = 0;
@@ -3456,6 +3651,11 @@
 					      NULL);
       if (g->next->got_entries == NULL)
 	return FALSE;
+      g->next->got_page_entries = htab_try_create (1, mips_got_page_entry_hash,
+						   mips_got_page_entry_eq,
+						   NULL);
+      if (g->next->got_page_entries == NULL)
+	return FALSE;
       g->next->bfd2got = NULL;
     }
   else
@@ -3560,7 +3760,8 @@
 
       assign += MIPS_RESERVED_GOTNO (info);
       g->assigned_gotno = assign;
-      g->local_gotno += assign + pages;
+      g->local_gotno += assign;
+      g->local_gotno += (pages < g->page_gotno ? pages : g->page_gotno);
       assign = g->local_gotno + g->global_gotno + g->tls_gotno;
 
       /* Take g out of the direct list, and push it onto the reversed
@@ -3812,6 +4013,7 @@
   g->global_gotno = 0;
   g->tls_gotno = 0;
   g->local_gotno = MIPS_RESERVED_GOTNO (info);
+  g->page_gotno = 0;
   g->assigned_gotno = MIPS_RESERVED_GOTNO (info);
   g->bfd2got = NULL;
   g->next = NULL;
@@ -3820,6 +4022,10 @@
 				    mips_elf_got_entry_eq, NULL);
   if (g->got_entries == NULL)
     return FALSE;
+  g->got_page_entries = htab_try_create (1, mips_got_page_entry_hash,
+					 mips_got_page_entry_eq, NULL);
+  if (g->got_page_entries == NULL)
+    return FALSE;
   mips_elf_section_data (s)->u.got_info = g;
   mips_elf_section_data (s)->elf.this_hdr.sh_flags
     |= SHF_ALLOC | SHF_WRITE | SHF_MIPS_GPREL;
@@ -5010,9 +5216,18 @@
     case E_MIPS_MACH_9000:
       return bfd_mach_mips9000;
 
+    case E_MIPS_MACH_OCTEON:
+      return bfd_mach_mips_octeon;
+
     case E_MIPS_MACH_SB1:
       return bfd_mach_mips_sb1;
 
+    case E_MIPS_MACH_LS2E:
+      return bfd_mach_mips_loongson_2e;
+
+    case E_MIPS_MACH_LS2F:
+      return bfd_mach_mips_loongson_2f;
+
     default:
       switch (flags & EF_MIPS_ARCH)
 	{
@@ -6111,6 +6326,127 @@
   return TRUE;
 }
 
+/* Return true if relocation REL against section SEC is a REL rather than
+   RELA relocation.  RELOCS is the first relocation in the section and
+   ABFD is the bfd that contains SEC.  */
+
+static bfd_boolean
+mips_elf_rel_relocation_p (bfd *abfd, asection *sec,
+			   const Elf_Internal_Rela *relocs,
+			   const Elf_Internal_Rela *rel)
+{
+  Elf_Internal_Shdr *rel_hdr;
+  const struct elf_backend_data *bed;
+
+  /* To determine which flavor or relocation this is, we depend on the
+     fact that the INPUT_SECTION's REL_HDR is read before its REL_HDR2.  */
+  rel_hdr = &elf_section_data (sec)->rel_hdr;
+  bed = get_elf_backend_data (abfd);
+  if ((size_t) (rel - relocs)
+      >= (NUM_SHDR_ENTRIES (rel_hdr) * bed->s->int_rels_per_ext_rel))
+    rel_hdr = elf_section_data (sec)->rel_hdr2;
+  return rel_hdr->sh_entsize == MIPS_ELF_REL_SIZE (abfd);
+}
+
+/* Read the addend for REL relocation REL, which belongs to bfd ABFD.
+   HOWTO is the relocation's howto and CONTENTS points to the contents
+   of the section that REL is against.  */
+
+static bfd_vma
+mips_elf_read_rel_addend (bfd *abfd, const Elf_Internal_Rela *rel,
+			  reloc_howto_type *howto, bfd_byte *contents)
+{
+  bfd_byte *location;
+  unsigned int r_type;
+  bfd_vma addend;
+
+  r_type = ELF_R_TYPE (abfd, rel->r_info);
+  location = contents + rel->r_offset;
+
+  /* Get the addend, which is stored in the input file.  */
+  _bfd_mips16_elf_reloc_unshuffle (abfd, r_type, FALSE, location);
+  addend = mips_elf_obtain_contents (howto, rel, abfd, contents);
+  _bfd_mips16_elf_reloc_shuffle (abfd, r_type, FALSE, location);
+
+  return addend & howto->src_mask;
+}
+
+/* REL is a relocation in ABFD that needs a partnering LO16 relocation
+   and *ADDEND is the addend for REL itself.  Look for the LO16 relocation
+   and update *ADDEND with the final addend.  Return true on success
+   or false if the LO16 could not be found.  RELEND is the exclusive
+   upper bound on the relocations for REL's section.  */
+
+static bfd_boolean
+mips_elf_add_lo16_rel_addend (bfd *abfd,
+			      const Elf_Internal_Rela *rel,
+			      const Elf_Internal_Rela *relend,
+			      bfd_byte *contents, bfd_vma *addend)
+{
+  unsigned int r_type, lo16_type;
+  const Elf_Internal_Rela *lo16_relocation;
+  reloc_howto_type *lo16_howto;
+  bfd_vma l;
+
+  r_type = ELF_R_TYPE (abfd, rel->r_info);
+  if (r_type == R_MIPS16_HI16)
+    lo16_type = R_MIPS16_LO16;
+  else
+    lo16_type = R_MIPS_LO16;
+
+  /* The combined value is the sum of the HI16 addend, left-shifted by
+     sixteen bits, and the LO16 addend, sign extended.  (Usually, the
+     code does a `lui' of the HI16 value, and then an `addiu' of the
+     LO16 value.)
+
+     Scan ahead to find a matching LO16 relocation.
+
+     According to the MIPS ELF ABI, the R_MIPS_LO16 relocation must
+     be immediately following.  However, for the IRIX6 ABI, the next
+     relocation may be a composed relocation consisting of several
+     relocations for the same address.  In that case, the R_MIPS_LO16
+     relocation may occur as one of these.  We permit a similar
+     extension in general, as that is useful for GCC.
+
+     In some cases GCC dead code elimination removes the LO16 but keeps
+     the corresponding HI16.  This is strictly speaking a violation of
+     the ABI but not immediately harmful.  */
+  lo16_relocation = mips_elf_next_relocation (abfd, lo16_type, rel, relend);
+  if (lo16_relocation == NULL)
+    return FALSE;
+
+  /* Obtain the addend kept there.  */
+  lo16_howto = MIPS_ELF_RTYPE_TO_HOWTO (abfd, lo16_type, FALSE);
+  l = mips_elf_read_rel_addend (abfd, lo16_relocation, lo16_howto, contents);
+
+  l <<= lo16_howto->rightshift;
+  l = _bfd_mips_elf_sign_extend (l, 16);
+
+  *addend <<= 16;
+  *addend += l;
+  return TRUE;
+}
+
+/* Try to read the contents of section SEC in bfd ABFD.  Return true and
+   store the contents in *CONTENTS on success.  Assume that *CONTENTS
+   already holds the contents if it is nonull on entry.  */
+
+static bfd_boolean
+mips_elf_get_section_contents (bfd *abfd, asection *sec, bfd_byte **contents)
+{
+  if (*contents)
+    return TRUE;
+
+  /* Get cached copy if it exists.  */
+  if (elf_section_data (sec)->this_hdr.contents != NULL)
+    {
+      *contents = elf_section_data (sec)->this_hdr.contents;
+      return TRUE;
+    }
+
+  return bfd_malloc_and_get_section (abfd, sec, contents);
+}
+
 /* Look through the relocs for a section during the first phase, and
    allocate space in the global offset table.  */
 
@@ -6130,6 +6466,9 @@
   asection *sreloc;
   const struct elf_backend_data *bed;
   struct mips_elf_link_hash_table *htab;
+  bfd_byte *contents;
+  bfd_vma addend;
+  reloc_howto_type *howto;
 
   if (info->relocatable)
     return TRUE;
@@ -6394,6 +6733,7 @@
   sreloc = NULL;
   bed = get_elf_backend_data (abfd);
   rel_end = relocs + sec->reloc_count * bed->s->int_rels_per_ext_rel;
+  contents = NULL;
   for (rel = relocs; rel < rel_end; ++rel)
     {
       unsigned long r_symndx;
@@ -6549,9 +6889,7 @@
 	case R_MIPS_GOT_PAGE:
 	  /* If this is a global, overridable symbol, GOT_PAGE will
 	     decay to GOT_DISP, so we'll need a GOT entry for it.  */
-	  if (h == NULL)
-	    break;
-	  else
+	  if (h)
 	    {
 	      struct mips_elf_link_hash_entry *hmips =
 		(struct mips_elf_link_hash_entry *) h;
@@ -6564,13 +6902,37 @@
 	      if (hmips->root.def_regular
 		  && ! (info->shared && ! info->symbolic
 			&& ! hmips->root.forced_local))
-		break;
+		h = NULL;
 	    }
 	  /* Fall through.  */
 
 	case R_MIPS_GOT16:
 	case R_MIPS_GOT_HI16:
 	case R_MIPS_GOT_LO16:
+	  if (!h)
+	    {
+	      /* This relocation needs a page entry in the GOT.  */
+	      if (mips_elf_rel_relocation_p (abfd, sec, relocs, rel))
+		{
+		  if (!mips_elf_get_section_contents (abfd, sec, &contents))
+		    return FALSE;
+		  howto = MIPS_ELF_RTYPE_TO_HOWTO (abfd, r_type, FALSE);
+		  addend = mips_elf_read_rel_addend (abfd, rel,
+						     howto, contents);
+		  if (r_type == R_MIPS_GOT16)
+		    mips_elf_add_lo16_rel_addend (abfd, rel, rel_end,
+						  contents, &addend);
+		  else
+		    addend <<= howto->rightshift;
+		}
+	      else
+		addend = rel->r_addend;
+	      if (!mips_elf_record_got_page_entry (abfd, r_symndx, addend, g))
+		return FALSE;
+	      break;
+	    }
+	  /* Fall through.  */
+
 	case R_MIPS_GOT_DISP:
 	  if (h && ! mips_elf_record_global_got_symbol (h, abfd, info, g, 0))
 	    return FALSE;
@@ -6873,17 +7235,8 @@
 	continue;
 
       /* Get the section contents if we haven't done so already.  */
-      if (contents == NULL)
-	{
-	  /* Get cached copy if it exists.  */
-	  if (elf_section_data (sec)->this_hdr.contents != NULL)
-	    contents = elf_section_data (sec)->this_hdr.contents;
-	  else
-	    {
-	      if (!bfd_malloc_and_get_section (abfd, sec, &contents))
-		goto relax_return;
-	    }
-	}
+      if (!mips_elf_get_section_contents (abfd, sec, &contents))
+	goto relax_return;
 
       instruction = bfd_get_32 (abfd, contents + irel->r_offset);
 
@@ -7198,7 +7551,7 @@
   struct mips_got_info *g;
   int i;
   bfd_size_type loadable_size = 0;
-  bfd_size_type local_gotno;
+  bfd_size_type page_gotno;
   bfd_size_type dynsymcount;
   bfd *sub;
   struct mips_elf_count_tls_arg count_tls_arg;
@@ -7279,13 +7632,18 @@
     /* There's no need to allocate page entries for VxWorks; R_MIPS_GOT16
        relocations against local symbols evaluate to "G", and the EABI does
        not include R_MIPS_GOT_PAGE.  */
-    local_gotno = 0;
+    page_gotno = 0;
   else
     /* Assume there are two loadable segments consisting of contiguous
        sections.  Is 5 enough?  */
-    local_gotno = (loadable_size >> 16) + 5;
+    page_gotno = (loadable_size >> 16) + 5;
+
+  /* Choose the smaller of the two estimates; both are intended to be
+     conservative.  */
+  if (page_gotno > g->page_gotno)
+    page_gotno = g->page_gotno;
 
-  g->local_gotno += local_gotno;
+  g->local_gotno += page_gotno;
   s->size += g->local_gotno * MIPS_ELF_GOT_SIZE (output_bfd);
 
   g->global_gotno = i;
@@ -7309,7 +7667,7 @@
      dynamic loader.  */
   if (!htab->is_vxworks && s->size > MIPS_ELF_GOT_MAX_SIZE (info))
     {
-      if (! mips_elf_multi_got (output_bfd, info, g, s, local_gotno))
+      if (! mips_elf_multi_got (output_bfd, info, g, s, page_gotno))
 	return FALSE;
     }
   else
@@ -7803,77 +8161,24 @@
 
       if (!use_saved_addend_p)
 	{
-	  Elf_Internal_Shdr *rel_hdr;
-
 	  /* If these relocations were originally of the REL variety,
 	     we must pull the addend out of the field that will be
 	     relocated.  Otherwise, we simply use the contents of the
-	     RELA relocation.  To determine which flavor or relocation
-	     this is, we depend on the fact that the INPUT_SECTION's
-	     REL_HDR is read before its REL_HDR2.  */
-	  rel_hdr = &elf_section_data (input_section)->rel_hdr;
-	  if ((size_t) (rel - relocs)
-	      >= (NUM_SHDR_ENTRIES (rel_hdr) * bed->s->int_rels_per_ext_rel))
-	    rel_hdr = elf_section_data (input_section)->rel_hdr2;
-	  if (rel_hdr->sh_entsize == MIPS_ELF_REL_SIZE (input_bfd))
+	     RELA relocation.  */
+	  if (mips_elf_rel_relocation_p (input_bfd, input_section,
+					 relocs, rel))
 	    {
-	      bfd_byte *location = contents + rel->r_offset;
-
-	      /* Note that this is a REL relocation.  */
 	      rela_relocation_p = FALSE;
-
-	      /* Get the addend, which is stored in the input file.  */
-	      _bfd_mips16_elf_reloc_unshuffle (input_bfd, r_type, FALSE,
-					       location);
-	      addend = mips_elf_obtain_contents (howto, rel, input_bfd,
-						 contents);
-	      _bfd_mips16_elf_reloc_shuffle(input_bfd, r_type, FALSE,
-					    location);
-
-	      addend &= howto->src_mask;
-
-	      /* For some kinds of relocations, the ADDEND is a
-		 combination of the addend stored in two different
-		 relocations.   */
-	      if (r_type == R_MIPS_HI16 || r_type == R_MIPS16_HI16
+	      addend = mips_elf_read_rel_addend (input_bfd, rel,
+						 howto, contents);
+	      if (r_type == R_MIPS_HI16
+		  || r_type == R_MIPS16_HI16
 		  || (r_type == R_MIPS_GOT16
 		      && mips_elf_local_relocation_p (input_bfd, rel,
 						      local_sections, FALSE)))
 		{
-		  const Elf_Internal_Rela *lo16_relocation;
-		  reloc_howto_type *lo16_howto;
-		  int lo16_type;
-
-		  if (r_type == R_MIPS16_HI16)
-		    lo16_type = R_MIPS16_LO16;
-		  else
-		    lo16_type = R_MIPS_LO16;
-
-		  /* The combined value is the sum of the HI16 addend,
-		     left-shifted by sixteen bits, and the LO16
-		     addend, sign extended.  (Usually, the code does
-		     a `lui' of the HI16 value, and then an `addiu' of
-		     the LO16 value.)
-
-		     Scan ahead to find a matching LO16 relocation.
-
-		     According to the MIPS ELF ABI, the R_MIPS_LO16
-		     relocation must be immediately following.
-		     However, for the IRIX6 ABI, the next relocation
-		     may be a composed relocation consisting of
-		     several relocations for the same address.  In
-		     that case, the R_MIPS_LO16 relocation may occur
-		     as one of these.  We permit a similar extension
-		     in general, as that is useful for GCC.
-
-		     In some cases GCC dead code elimination removes
-		     the LO16 but keeps the corresponding HI16.  This
-		     is strictly speaking a violation of the ABI but
-		     not immediately harmful.  */
-		  lo16_relocation = mips_elf_next_relocation (input_bfd,
-							      lo16_type,
-							      rel, relend);
-		  if (lo16_relocation == NULL)
+		  if (!mips_elf_add_lo16_rel_addend (input_bfd, rel, relend,
+						     contents, &addend))
 		    {
 		      const char *name;
 
@@ -7888,32 +8193,6 @@
 			 input_bfd, input_section, name, howto->name,
 			 rel->r_offset);
 		    }
-		  else
-		    {
-		      bfd_byte *lo16_location;
-		      bfd_vma l;
-
-		      lo16_location = contents + lo16_relocation->r_offset;
-
-		      /* Obtain the addend kept there.  */
-		      lo16_howto = MIPS_ELF_RTYPE_TO_HOWTO (input_bfd,
-							    lo16_type, FALSE);
-		      _bfd_mips16_elf_reloc_unshuffle (input_bfd, lo16_type,
-						       FALSE, lo16_location);
-		      l = mips_elf_obtain_contents (lo16_howto,
-						    lo16_relocation,
-						    input_bfd, contents);
-		      _bfd_mips16_elf_reloc_shuffle (input_bfd, lo16_type,
-						     FALSE, lo16_location);
-		      l &= lo16_howto->src_mask;
-		      l <<= lo16_howto->rightshift;
-		      l = _bfd_mips_elf_sign_extend (l, 16);
-
-		      addend <<= 16;
-
-		      /* Compute the combined addend.  */
-		      addend += l;
-		    }
 		}
 	      else
 		addend <<= howto->rightshift;
@@ -8908,7 +9187,8 @@
 	memset (b - dyn_skipped, 0, dyn_skipped);
     }
 
-  if (sgot != NULL && sgot->size > 0)
+  if (sgot != NULL && sgot->size > 0
+      && !bfd_is_abs_section (sgot->output_section))
     {
       if (htab->is_vxworks)
 	{
@@ -9173,6 +9453,18 @@
       val = E_MIPS_ARCH_5;
       break;
 
+    case bfd_mach_mips_octeon:
+      val = E_MIPS_ARCH_64R2 | E_MIPS_MACH_OCTEON;
+      break;
+
+    case bfd_mach_mips_loongson_2e:
+      val = E_MIPS_ARCH_3 | E_MIPS_MACH_LS2E;
+      break;
+
+    case bfd_mach_mips_loongson_2f:
+      val = E_MIPS_ARCH_3 | E_MIPS_MACH_LS2F;
+      break;
+
     case bfd_mach_mips_sb1:
       val = E_MIPS_ARCH_64 | E_MIPS_MACH_SB1;
       break;
@@ -10906,6 +11198,7 @@
 
 static const struct mips_mach_extension mips_mach_extensions[] = {
   /* MIPS64 extensions.  */
+  { bfd_mach_mips_octeon, bfd_mach_mipsisa64r2 },
   { bfd_mach_mipsisa64r2, bfd_mach_mipsisa64 },
   { bfd_mach_mips_sb1, bfd_mach_mipsisa64 },
 
@@ -10935,6 +11228,8 @@
   { bfd_mach_mips4111, bfd_mach_mips4100 },
 
   /* MIPS III extensions.  */
+  { bfd_mach_mips_loongson_2e, bfd_mach_mips4000 },
+  { bfd_mach_mips_loongson_2f, bfd_mach_mips4000 },
   { bfd_mach_mips8000, bfd_mach_mips4000 },
   { bfd_mach_mips4650, bfd_mach_mips4000 },
   { bfd_mach_mips4600, bfd_mach_mips4000 },
diff -Nur binutils-2.18.50.0.1/bfd/elfxx-sparc.c binutils-stable/bfd/elfxx-sparc.c
--- binutils-2.18.50.0.1/bfd/elfxx-sparc.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/bfd/elfxx-sparc.c	2007-09-25 15:41:59.000000000 +0200
@@ -2533,12 +2533,12 @@
 	}
       else
 	{
-	  bfd_boolean warned, ignored;
+	  bfd_boolean warned;
 
 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
 				   r_symndx, symtab_hdr, sym_hashes,
 				   h, sec, relocation,
-				   unresolved_reloc, warned, ignored);
+				   unresolved_reloc, warned);
 	  if (warned)
 	    {
 	      /* To avoid generating warning messages about truncated
diff -Nur binutils-2.18.50.0.1/bfd/elfxx-target.h binutils-stable/bfd/elfxx-target.h
--- binutils-2.18.50.0.1/bfd/elfxx-target.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/elfxx-target.h	2007-09-25 15:41:59.000000000 +0200
@@ -253,6 +253,11 @@
 #define bfd_elfNN_bfd_link_just_syms	_bfd_elf_link_just_syms
 #endif
 
+#ifndef bfd_elfNN_bfd_copy_link_hash_symbol_type
+#define bfd_elfNN_bfd_copy_link_hash_symbol_type \
+  _bfd_elf_copy_link_hash_symbol_type
+#endif
+
 #ifndef bfd_elfNN_bfd_link_split_section
 #define bfd_elfNN_bfd_link_split_section _bfd_generic_link_split_section
 #endif
@@ -298,23 +303,16 @@
 #endif
 
 #ifndef ELF_MAXPAGESIZE
-# error ELF_MAXPAGESIZE is not defined
+  #error ELF_MAXPAGESIZE is not defined
 #define ELF_MAXPAGESIZE 1
 #endif
 
-#ifndef ELF_COMMONPAGESIZE
-#define ELF_COMMONPAGESIZE ELF_MAXPAGESIZE
-#endif
-
 #ifndef ELF_MINPAGESIZE
-#define ELF_MINPAGESIZE ELF_COMMONPAGESIZE
+#define ELF_MINPAGESIZE ELF_MAXPAGESIZE
 #endif
 
-#if ELF_COMMONPAGESIZE > ELF_MAXPAGESIZE
-# error ELF_COMMONPAGESIZE > ELF_MAXPAGESIZE
-#endif
-#if ELF_MINPAGESIZE > ELF_COMMONPAGESIZE
-# error ELF_MINPAGESIZE > ELF_COMMONPAGESIZE
+#ifndef ELF_COMMONPAGESIZE
+#define ELF_COMMONPAGESIZE ELF_MAXPAGESIZE
 #endif
 
 #ifndef ELF_DYNAMIC_SEC_FLAGS
diff -Nur binutils-2.18.50.0.1/bfd/i386msdos.c binutils-stable/bfd/i386msdos.c
--- binutils-2.18.50.0.1/bfd/i386msdos.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/i386msdos.c	2007-09-25 15:41:59.000000000 +0200
@@ -152,6 +152,8 @@
 #define msdos_bfd_link_hash_table_free _bfd_generic_link_hash_table_free
 #define msdos_bfd_link_add_symbols _bfd_generic_link_add_symbols
 #define msdos_bfd_link_just_syms _bfd_generic_link_just_syms
+#define msdos_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define msdos_bfd_final_link _bfd_generic_final_link
 #define msdos_bfd_link_split_section _bfd_generic_link_split_section
 #define msdos_set_arch_mach _bfd_generic_set_arch_mach
diff -Nur binutils-2.18.50.0.1/bfd/i386os9k.c binutils-stable/bfd/i386os9k.c
--- binutils-2.18.50.0.1/bfd/i386os9k.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/i386os9k.c	2007-09-25 15:41:58.000000000 +0200
@@ -176,6 +176,8 @@
 #define os9k_bfd_link_hash_table_free _bfd_generic_link_hash_table_free
 #define os9k_bfd_link_add_symbols _bfd_generic_link_add_symbols
 #define os9k_bfd_link_just_syms _bfd_generic_link_just_syms
+#define os9k_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define os9k_bfd_final_link _bfd_generic_final_link
 #define os9k_bfd_link_split_section  _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/ieee.c binutils-stable/bfd/ieee.c
--- binutils-2.18.50.0.1/bfd/ieee.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/ieee.c	2007-09-25 15:41:59.000000000 +0200
@@ -3487,6 +3487,12 @@
 	  case bfd_mach_mcf_isa_b_float: id = "isa-b:float"; break;
 	  case bfd_mach_mcf_isa_b_float_mac: id = "isa-b:float:mac"; break;
 	  case bfd_mach_mcf_isa_b_float_emac: id = "isa-b:float:emac"; break;
+	  case bfd_mach_mcf_isa_c: id = "isa-c"; break;
+	  case bfd_mach_mcf_isa_c_mac: id = "isa-c:mac"; break;
+	  case bfd_mach_mcf_isa_c_emac: id = "isa-c:emac"; break;
+	  case bfd_mach_mcf_isa_c_nodiv: id = "isa-c:nodiv"; break;
+	  case bfd_mach_mcf_isa_c_nodiv_mac: id = "isa-c:nodiv:mac"; break;
+	  case bfd_mach_mcf_isa_c_nodiv_emac: id = "isa-c:nodiv:emac"; break;
 	  }
 
 	if (! ieee_write_id (abfd, id))
@@ -3768,6 +3774,8 @@
 #define ieee_bfd_link_hash_table_free _bfd_generic_link_hash_table_free
 #define ieee_bfd_link_add_symbols _bfd_generic_link_add_symbols
 #define ieee_bfd_link_just_syms _bfd_generic_link_just_syms
+#define ieee_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define ieee_bfd_final_link _bfd_generic_final_link
 #define ieee_bfd_link_split_section  _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/ihex.c binutils-stable/bfd/ihex.c
--- binutils-2.18.50.0.1/bfd/ihex.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/ihex.c	2007-09-25 15:41:59.000000000 +0200
@@ -937,6 +937,8 @@
 #define ihex_bfd_link_hash_table_free             _bfd_generic_link_hash_table_free
 #define ihex_bfd_link_add_symbols                 _bfd_generic_link_add_symbols
 #define ihex_bfd_link_just_syms                   _bfd_generic_link_just_syms
+#define ihex_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define ihex_bfd_final_link                       _bfd_generic_final_link
 #define ihex_bfd_link_split_section               _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/libbfd.h binutils-stable/bfd/libbfd.h
--- binutils-2.18.50.0.1/bfd/libbfd.h	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/libbfd.h	2007-09-25 15:41:59.000000000 +0200
@@ -523,6 +523,10 @@
 extern void _bfd_generic_link_just_syms
   (asection *, struct bfd_link_info *);
 
+/* Generic routine that does nothing.  */
+extern void _bfd_generic_copy_link_hash_symbol_type
+  (bfd *, struct bfd_link_hash_entry *, struct bfd_link_hash_entry *);
+
 /* Generic link routine.  */
 extern bfd_boolean _bfd_generic_final_link
   (bfd *, struct bfd_link_info *);
diff -Nur binutils-2.18.50.0.1/bfd/libbfd-in.h binutils-stable/bfd/libbfd-in.h
--- binutils-2.18.50.0.1/bfd/libbfd-in.h	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/libbfd-in.h	2007-09-25 15:41:59.000000000 +0200
@@ -518,6 +518,10 @@
 extern void _bfd_generic_link_just_syms
   (asection *, struct bfd_link_info *);
 
+/* Generic routine that does nothing.  */
+extern void _bfd_generic_copy_link_hash_symbol_type
+  (bfd *, struct bfd_link_hash_entry *, struct bfd_link_hash_entry *);
+
 /* Generic link routine.  */
 extern bfd_boolean _bfd_generic_final_link
   (bfd *, struct bfd_link_info *);
diff -Nur binutils-2.18.50.0.1/bfd/libecoff.h binutils-stable/bfd/libecoff.h
--- binutils-2.18.50.0.1/bfd/libecoff.h	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/libecoff.h	2007-09-25 15:41:59.000000000 +0200
@@ -311,6 +311,8 @@
 extern bfd_boolean _bfd_ecoff_bfd_link_add_symbols
   (bfd *, struct bfd_link_info *);
 #define _bfd_ecoff_bfd_link_just_syms _bfd_generic_link_just_syms
+#define _bfd_ecoff_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 extern bfd_boolean _bfd_ecoff_bfd_final_link
   (bfd *, struct bfd_link_info *);
 
diff -Nur binutils-2.18.50.0.1/bfd/linker.c binutils-stable/bfd/linker.c
--- binutils-2.18.50.0.1/bfd/linker.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/linker.c	2007-09-25 15:41:59.000000000 +0200
@@ -796,6 +796,17 @@
   sec->output_offset = sec->vma;
 }
 
+/* Copy the type of a symbol assiciated with a linker hast table entry.
+   Override this so that symbols created in linker scripts get their
+   type from the RHS of the assignment.
+   The default implementation does nothing.  */
+void
+_bfd_generic_copy_link_hash_symbol_type (bfd *abfd ATTRIBUTE_UNUSED,
+    struct bfd_link_hash_entry * hdest ATTRIBUTE_UNUSED,
+    struct bfd_link_hash_entry * hsrc ATTRIBUTE_UNUSED)
+{
+}
+
 /* Add symbols from an object file to the global hash table.  */
 
 static bfd_boolean
diff -Nur binutils-2.18.50.0.1/bfd/mach-o.c binutils-stable/bfd/mach-o.c
--- binutils-2.18.50.0.1/bfd/mach-o.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/mach-o.c	2007-09-25 15:41:59.000000000 +0200
@@ -59,6 +59,8 @@
 #define bfd_mach_o_bfd_link_hash_table_free           _bfd_generic_link_hash_table_free
 #define bfd_mach_o_bfd_link_add_symbols               _bfd_generic_link_add_symbols
 #define bfd_mach_o_bfd_link_just_syms                 _bfd_generic_link_just_syms
+#define bfd_mach_o_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define bfd_mach_o_bfd_final_link                     _bfd_generic_final_link
 #define bfd_mach_o_bfd_link_split_section             _bfd_generic_link_split_section
 #define bfd_mach_o_set_arch_mach                      bfd_default_set_arch_mach
@@ -644,7 +646,7 @@
   sprintf (sname, "%s.%s.%s", prefix, section->segname, section->sectname);
 
   flags = SEC_ALLOC;
-  if ((section->flags & SECTION_TYPE) != BFD_MACH_O_S_ZEROFILL)
+  if (!(section->flags & BFD_MACH_O_S_ZEROFILL))
     flags = SEC_HAS_CONTENTS | SEC_LOAD | SEC_ALLOC | SEC_CODE;
   bfdsec = bfd_make_section_anyway_with_flags (abfd, sname, flags);
   if (bfdsec == NULL)
diff -Nur binutils-2.18.50.0.1/bfd/Makefile.am binutils-stable/bfd/Makefile.am
--- binutils-2.18.50.0.1/bfd/Makefile.am	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/bfd/Makefile.am	2007-09-25 15:41:58.000000000 +0200
@@ -19,6 +19,7 @@
 datarootdir = @datarootdir@
 docdir = @docdir@
 htmldir = @htmldir@
+pdfdir = @pdfdir@
 
 bfdlib_LTLIBRARIES = libbfd.la
 
@@ -696,6 +697,35 @@
 
 all diststuff: info
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf:	install-pdf-recursive
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html:	install-html-recursive
@@ -1299,7 +1329,7 @@
 elf.lo: elf.c $(INCDIR)/filenames.h $(INCDIR)/bfdlink.h \
   $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
   $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h $(INCDIR)/libiberty.h \
-  $(INCDIR)/safe-ctype.h
+  $(INCDIR)/safe-ctype.h $(INCDIR)/md5.h
 elf32-am33lin.lo: elf32-am33lin.c $(INCDIR)/filenames.h \
   elf-bfd.h $(INCDIR)/elf/common.h $(INCDIR)/elf/internal.h \
   $(INCDIR)/elf/external.h $(INCDIR)/bfdlink.h $(INCDIR)/elf/mn10300.h \
@@ -1380,8 +1410,7 @@
 elf32-i386.lo: elf32-i386.c $(INCDIR)/filenames.h $(INCDIR)/bfdlink.h \
   $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
   $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h elf-vxworks.h \
-  bfd_stdint.h $(INCDIR)/elf/i386.h $(INCDIR)/elf/reloc-macros.h \
-  elf32-target.h
+  $(INCDIR)/elf/i386.h $(INCDIR)/elf/reloc-macros.h elf32-target.h
 elf32-i860.lo: elf32-i860.c $(INCDIR)/filenames.h $(INCDIR)/hashtab.h \
   elf-bfd.h $(INCDIR)/elf/common.h $(INCDIR)/elf/internal.h \
   $(INCDIR)/elf/external.h $(INCDIR)/bfdlink.h $(INCDIR)/elf/i860.h \
@@ -1838,9 +1867,8 @@
   coffcode.h peicode.h libpei.h
 elf64-x86-64.lo: elf64-x86-64.c $(INCDIR)/filenames.h \
   $(INCDIR)/bfdlink.h $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
-  $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h bfd_stdint.h \
-  $(INCDIR)/elf/x86-64.h $(INCDIR)/elf/reloc-macros.h \
-  elf64-target.h
+  $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h $(INCDIR)/elf/x86-64.h \
+  $(INCDIR)/elf/reloc-macros.h elf64-target.h
 elf64-alpha.lo: elf64-alpha.c $(INCDIR)/filenames.h \
   $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
   $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h $(INCDIR)/bfdlink.h \
diff -Nur binutils-2.18.50.0.1/bfd/Makefile.in binutils-stable/bfd/Makefile.in
--- binutils-2.18.50.0.1/bfd/Makefile.in	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/bfd/Makefile.in	2007-09-25 15:41:59.000000000 +0200
@@ -117,9 +117,7 @@
 AUTOHEADER = @AUTOHEADER@
 AUTOMAKE = @AUTOMAKE@
 AWK = @AWK@
-BFD_HOSTPTR_T = @BFD_HOSTPTR_T@
 BFD_HOST_64BIT_LONG = @BFD_HOST_64BIT_LONG@
-BFD_HOST_64BIT_LONG_LONG = @BFD_HOST_64BIT_LONG_LONG@
 BFD_HOST_64_BIT = @BFD_HOST_64_BIT@
 BFD_HOST_64_BIT_DEFINED = @BFD_HOST_64_BIT_DEFINED@
 BFD_HOST_LONG_LONG = @BFD_HOST_LONG_LONG@
@@ -1318,6 +1316,35 @@
 
 all diststuff: info
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf:	install-pdf-recursive
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html:	install-html-recursive
@@ -1881,7 +1908,7 @@
 elf.lo: elf.c $(INCDIR)/filenames.h $(INCDIR)/bfdlink.h \
   $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
   $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h $(INCDIR)/libiberty.h \
-  $(INCDIR)/safe-ctype.h
+  $(INCDIR)/safe-ctype.h $(INCDIR)/md5.h
 elf32-am33lin.lo: elf32-am33lin.c $(INCDIR)/filenames.h \
   elf-bfd.h $(INCDIR)/elf/common.h $(INCDIR)/elf/internal.h \
   $(INCDIR)/elf/external.h $(INCDIR)/bfdlink.h $(INCDIR)/elf/mn10300.h \
@@ -1962,8 +1989,7 @@
 elf32-i386.lo: elf32-i386.c $(INCDIR)/filenames.h $(INCDIR)/bfdlink.h \
   $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
   $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h elf-vxworks.h \
-  bfd_stdint.h $(INCDIR)/elf/i386.h $(INCDIR)/elf/reloc-macros.h \
-  elf32-target.h
+  $(INCDIR)/elf/i386.h $(INCDIR)/elf/reloc-macros.h elf32-target.h
 elf32-i860.lo: elf32-i860.c $(INCDIR)/filenames.h $(INCDIR)/hashtab.h \
   elf-bfd.h $(INCDIR)/elf/common.h $(INCDIR)/elf/internal.h \
   $(INCDIR)/elf/external.h $(INCDIR)/bfdlink.h $(INCDIR)/elf/i860.h \
@@ -2420,9 +2446,8 @@
   coffcode.h peicode.h libpei.h
 elf64-x86-64.lo: elf64-x86-64.c $(INCDIR)/filenames.h \
   $(INCDIR)/bfdlink.h $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
-  $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h bfd_stdint.h \
-  $(INCDIR)/elf/x86-64.h $(INCDIR)/elf/reloc-macros.h \
-  elf64-target.h
+  $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h $(INCDIR)/elf/x86-64.h \
+  $(INCDIR)/elf/reloc-macros.h elf64-target.h
 elf64-alpha.lo: elf64-alpha.c $(INCDIR)/filenames.h \
   $(INCDIR)/hashtab.h elf-bfd.h $(INCDIR)/elf/common.h \
   $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h $(INCDIR)/bfdlink.h \
diff -Nur binutils-2.18.50.0.1/bfd/mmo.c binutils-stable/bfd/mmo.c
--- binutils-2.18.50.0.1/bfd/mmo.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/mmo.c	2007-09-25 15:41:59.000000000 +0200
@@ -3199,6 +3199,8 @@
 #define mmo_bfd_link_hash_table_free _bfd_generic_link_hash_table_free
 #define mmo_bfd_link_add_symbols _bfd_generic_link_add_symbols
 #define mmo_bfd_link_just_syms _bfd_generic_link_just_syms
+#define mmo_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define mmo_bfd_final_link _bfd_generic_final_link
 #define mmo_bfd_link_split_section _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/nlm-target.h binutils-stable/bfd/nlm-target.h
--- binutils-2.18.50.0.1/bfd/nlm-target.h	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/nlm-target.h	2007-09-25 15:41:58.000000000 +0200
@@ -53,6 +53,8 @@
 #define nlm_bfd_link_hash_table_free            _bfd_generic_link_hash_table_free
 #define nlm_bfd_link_add_symbols                _bfd_generic_link_add_symbols
 #define nlm_bfd_link_just_syms                  _bfd_generic_link_just_syms
+#define nlm_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define nlm_bfd_final_link                      _bfd_generic_final_link
 #define nlm_bfd_link_split_section              _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/oasys.c binutils-stable/bfd/oasys.c
--- binutils-2.18.50.0.1/bfd/oasys.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/oasys.c	2007-09-25 15:41:58.000000000 +0200
@@ -1202,6 +1202,8 @@
 #define oasys_bfd_link_hash_table_free             _bfd_generic_link_hash_table_free
 #define oasys_bfd_link_add_symbols                 _bfd_generic_link_add_symbols
 #define oasys_bfd_link_just_syms                   _bfd_generic_link_just_syms
+#define oasys_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define oasys_bfd_final_link                       _bfd_generic_final_link
 #define oasys_bfd_link_split_section               _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/pef.c binutils-stable/bfd/pef.c
--- binutils-2.18.50.0.1/bfd/pef.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/pef.c	2007-09-25 15:41:59.000000000 +0200
@@ -56,6 +56,8 @@
 #define bfd_pef_bfd_link_hash_table_free            _bfd_generic_link_hash_table_free
 #define bfd_pef_bfd_link_add_symbols                _bfd_generic_link_add_symbols
 #define bfd_pef_bfd_link_just_syms                  _bfd_generic_link_just_syms
+#define bfd_pef_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define bfd_pef_bfd_final_link                      _bfd_generic_final_link
 #define bfd_pef_bfd_link_split_section              _bfd_generic_link_split_section
 #define bfd_pef_get_section_contents_in_window      _bfd_generic_get_section_contents_in_window
diff -Nur binutils-2.18.50.0.1/bfd/po/Make-in binutils-stable/bfd/po/Make-in
--- binutils-2.18.50.0.1/bfd/po/Make-in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/po/Make-in	2007-09-25 15:41:56.000000000 +0200
@@ -127,6 +127,7 @@
 install-exec:
 install-info:
 install-html:
+install-pdf:
 install-data: install-data-@USE_NLS@
 install-data-no: all
 install-data-yes: all
diff -Nur binutils-2.18.50.0.1/bfd/ppcboot.c binutils-stable/bfd/ppcboot.c
--- binutils-2.18.50.0.1/bfd/ppcboot.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/ppcboot.c	2007-09-25 15:41:59.000000000 +0200
@@ -475,6 +475,8 @@
 #define ppcboot_bfd_link_hash_table_free _bfd_generic_link_hash_table_free
 #define ppcboot_bfd_link_add_symbols _bfd_generic_link_add_symbols
 #define ppcboot_bfd_link_just_syms _bfd_generic_link_just_syms
+#define ppcboot_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define ppcboot_bfd_final_link _bfd_generic_final_link
 #define ppcboot_bfd_link_split_section _bfd_generic_link_split_section
 #define ppcboot_get_section_contents_in_window \
diff -Nur binutils-2.18.50.0.1/bfd/som.c binutils-stable/bfd/som.c
--- binutils-2.18.50.0.1/bfd/som.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/som.c	2007-09-25 15:41:58.000000000 +0200
@@ -6275,6 +6275,8 @@
 #define som_bfd_link_hash_table_free            _bfd_generic_link_hash_table_free
 #define som_bfd_link_add_symbols                _bfd_generic_link_add_symbols
 #define som_bfd_link_just_syms                  _bfd_generic_link_just_syms
+#define som_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define som_bfd_final_link                      _bfd_generic_final_link
 #define som_bfd_gc_sections		        bfd_generic_gc_sections
 #define som_bfd_merge_sections		        bfd_generic_merge_sections
diff -Nur binutils-2.18.50.0.1/bfd/srec.c binutils-stable/bfd/srec.c
--- binutils-2.18.50.0.1/bfd/srec.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/srec.c	2007-09-25 15:41:59.000000000 +0200
@@ -1223,6 +1223,8 @@
 #define srec_bfd_link_hash_table_free             _bfd_generic_link_hash_table_free
 #define srec_bfd_link_add_symbols                 _bfd_generic_link_add_symbols
 #define srec_bfd_link_just_syms                   _bfd_generic_link_just_syms
+#define srec_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define srec_bfd_final_link                       _bfd_generic_final_link
 #define srec_bfd_link_split_section               _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/targets.c binutils-stable/bfd/targets.c
--- binutils-2.18.50.0.1/bfd/targets.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/targets.c	2007-09-25 15:41:59.000000000 +0200
@@ -435,6 +435,7 @@
 .  NAME##_bfd_link_hash_table_free, \
 .  NAME##_bfd_link_add_symbols, \
 .  NAME##_bfd_link_just_syms, \
+.  NAME##_bfd_copy_link_hash_symbol_type, \
 .  NAME##_bfd_final_link, \
 .  NAME##_bfd_link_split_section, \
 .  NAME##_bfd_gc_sections, \
@@ -465,6 +466,12 @@
 .  {* Indicate that we are only retrieving symbol values from this section.  *}
 .  void        (*_bfd_link_just_syms) (asection *, struct bfd_link_info *);
 .
+.  {* Copy the symbol type of a linker hash table entry.  *}
+.#define bfd_copy_link_hash_symbol_type(b, t, f) \
+.  BFD_SEND (b, _bfd_copy_link_hash_symbol_type, (b, t, f))
+.  void (*_bfd_copy_link_hash_symbol_type)
+.    (bfd *, struct bfd_link_hash_entry *, struct bfd_link_hash_entry *);
+.
 .  {* Do a link based on the link_order structures attached to each
 .     section of the BFD.  *}
 .  bfd_boolean (*_bfd_final_link) (bfd *, struct bfd_link_info *);
diff -Nur binutils-2.18.50.0.1/bfd/tekhex.c binutils-stable/bfd/tekhex.c
--- binutils-2.18.50.0.1/bfd/tekhex.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/tekhex.c	2007-09-25 15:41:59.000000000 +0200
@@ -947,6 +947,8 @@
 #define tekhex_bfd_link_hash_table_free             _bfd_generic_link_hash_table_free
 #define tekhex_bfd_link_add_symbols                 _bfd_generic_link_add_symbols
 #define tekhex_bfd_link_just_syms                   _bfd_generic_link_just_syms
+#define tekhex_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define tekhex_bfd_final_link                       _bfd_generic_final_link
 #define tekhex_bfd_link_split_section               _bfd_generic_link_split_section
 #define tekhex_get_section_contents_in_window       _bfd_generic_get_section_contents_in_window
diff -Nur binutils-2.18.50.0.1/bfd/versados.c binutils-stable/bfd/versados.c
--- binutils-2.18.50.0.1/bfd/versados.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/versados.c	2007-09-25 15:41:58.000000000 +0200
@@ -812,6 +812,8 @@
 #define versados_bfd_link_hash_table_free             _bfd_generic_link_hash_table_free
 #define versados_bfd_link_add_symbols                 _bfd_generic_link_add_symbols
 #define versados_bfd_link_just_syms                   _bfd_generic_link_just_syms
+#define versados_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define versados_bfd_final_link                       _bfd_generic_final_link
 #define versados_bfd_link_split_section               _bfd_generic_link_split_section
 
diff -Nur binutils-2.18.50.0.1/bfd/version.h binutils-stable/bfd/version.h
--- binutils-2.18.50.0.1/bfd/version.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/bfd/version.h	2007-09-25 15:41:59.000000000 +0200
@@ -1,4 +1,4 @@
-#define BFD_VERSION_DATE 20070908
+#define BFD_VERSION_DATE 20070820
 #define BFD_VERSION @bfd_version@
 #define BFD_VERSION_STRING  @bfd_version_package@ @bfd_version_string@
 #define REPORT_BUGS_TO @report_bugs_to@
diff -Nur binutils-2.18.50.0.1/bfd/vms.c binutils-stable/bfd/vms.c
--- binutils-2.18.50.0.1/bfd/vms.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/vms.c	2007-09-25 15:41:58.000000000 +0200
@@ -30,6 +30,8 @@
 #define vms_bfd_is_target_special_symbol ((bfd_boolean (*) (bfd *, asymbol *)) bfd_false)
 #define vms_make_empty_symbol             _bfd_generic_make_empty_symbol
 #define vms_bfd_link_just_syms            _bfd_generic_link_just_syms
+#define vms_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define vms_bfd_is_group_section          bfd_generic_is_group_section
 #define vms_bfd_discard_group             bfd_generic_discard_group
 #define vms_section_already_linked        _bfd_generic_section_already_linked
diff -Nur binutils-2.18.50.0.1/bfd/xsym.c binutils-stable/bfd/xsym.c
--- binutils-2.18.50.0.1/bfd/xsym.c	2007-08-01 15:11:48.000000000 +0200
+++ binutils-stable/bfd/xsym.c	2007-09-25 15:41:59.000000000 +0200
@@ -49,6 +49,8 @@
 #define bfd_sym_bfd_link_hash_table_free            _bfd_generic_link_hash_table_free
 #define bfd_sym_bfd_link_add_symbols                _bfd_generic_link_add_symbols
 #define bfd_sym_bfd_link_just_syms                  _bfd_generic_link_just_syms
+#define bfd_sym_bfd_copy_link_hash_symbol_type \
+  _bfd_generic_copy_link_hash_symbol_type
 #define bfd_sym_bfd_final_link                      _bfd_generic_final_link
 #define bfd_sym_bfd_link_split_section              _bfd_generic_link_split_section
 #define bfd_sym_get_section_contents_in_window      _bfd_generic_get_section_contents_in_window
diff -Nur binutils-2.18.50.0.1/binutils/bucomm.c binutils-stable/binutils/bucomm.c
--- binutils-2.18.50.0.1/binutils/bucomm.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/bucomm.c	2007-09-25 15:41:53.000000000 +0200
@@ -60,52 +60,6 @@
     fprintf (stderr, "%s: %s\n", program_name, errmsg);
 }
 
-/* Issue a non fatal error message.  FILENAME, or if NULL then BFD,
-   are used to indicate the problematic file.  SECTION, if non NULL,
-   is used to provide a section name.  If FORMAT is non-null, then it
-   is used to print additional information via vfprintf.  Finally the
-   bfd error message is printed.  In summary, error messages are of
-   one of the following forms:
-
-   PROGRAM:file: bfd-error-message
-   PROGRAM:file[section]: bfd-error-message
-   PROGRAM:file: printf-message: bfd-error-message
-   PROGRAM:file[section]: printf-message: bfd-error-message
-*/
-
-void
-bfd_nonfatal_message (const char *filename,
-		      const bfd *bfd, const asection *section,
-		      const char *format, ...)
-{
-  const char *errmsg = bfd_errmsg (bfd_get_error ());
-  const char *section_name = NULL;
-  va_list args;
-
-  va_start (args, format);
-  fprintf (stderr, "%s", program_name);
-  
-  if (bfd)
-    {
-      if (!filename)
-	filename = bfd_get_filename (bfd);
-      if (section)
-	section_name = bfd_get_section_name (bfd, section);
-    }
-  if (section_name)
-    fprintf (stderr, ":%s[%s]", filename, section_name);
-  else
-    fprintf (stderr, ":%s", filename);
-
-  if (format)
-    {
-      fprintf (stderr, ": ");
-      vfprintf (stderr, format, args);
-    }
-  fprintf (stderr, ": %s\n", errmsg);
-  va_end (args);
-}
-
 void
 bfd_fatal (const char *string)
 {
diff -Nur binutils-2.18.50.0.1/binutils/bucomm.h binutils-stable/binutils/bucomm.h
--- binutils-2.18.50.0.1/binutils/bucomm.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/bucomm.h	2007-09-25 15:41:53.000000000 +0200
@@ -27,9 +27,6 @@
 
 void bfd_nonfatal (const char *);
 
-void bfd_nonfatal_message (const char *, const bfd *, const asection *,
-			   const char *, ...);
-
 void bfd_fatal (const char *) ATTRIBUTE_NORETURN;
 
 void report (const char *, va_list) ATTRIBUTE_PRINTF(1,0);
diff -Nur binutils-2.18.50.0.1/binutils/ChangeLog binutils-stable/binutils/ChangeLog
--- binutils-2.18.50.0.1/binutils/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/ChangeLog	2007-09-25 15:41:53.000000000 +0200
@@ -1,70 +1,3 @@
-2007-08-31  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.am (INCLUDES): Remove -D_GNU_SOURCE.
-	* Makefile.in: Regenerated.
-
-	* sysdep.h: Include "config.h" first.
-
-2007-08-31  Nick Clifton  <nickc@redhat.com>
-
-	* po/sk.po: New Slovakian translation.
-	* configure.in (LINGUAS): Add sk.
-	* configure: Regenerate.
-
-2007-08-30  Nick Clifton  <nickc@redhat.com>
-
-	* readelf.c (dump_type): New type used to classify the kinds of
-	dump requested by the user.
-	(dump_sects, cmdline_dump_sects): Use the new type.
-	(options): Add --string-dump option.
-	(request_dump): Rename to request_dump_bynumber.  Use dump_type.
-	(request_dump_byname): Use dump_type.
-	(parse_args): Parse --string-dump option.
-	(process_section_headers): Fix calls to request_dump.
-	(initialise_dumps_byname): Likewise.
-	(dump_section): Rename to dump_section_as_bytes.
-	(dump_section_as_strings): New function.  Display the contents of
-	a section as printable strings.
-	(process_section_contents): String dump the section if requested.
-	(process_object): Use dump_type.
-	(main): Likewise.
-	* Makefile.am: Add dependency for readelf.c on safe-ctype.h.
-	* Makefile.in: Regenerate.
-	* NEWS: Mention the new feature.
-	* doc/binutils.texi: Document the new feature.
-
-2007-08-30  Nathan Sidwell  <nathan@codesourcery.com>
-
-	* bucomm.c (bfd_nonfatal_message): New.
-	* bucomm.h (bfd_nonfatal_message): Declare.
-	* objcopy.c (RETURN_NONFATAL): Take BFD not NAME, use
-	bfd_nonfatal_message.
-	(copy_unknown_object): Adjust bfd_nonfatal and RETURN_NONFATAL
-	calls, or replace with bfd_nonfatal_message calls as appropriate.
-	(copy_object, copy_archive, copy_file, setup_section,
-	copy_section, write_debugging_info): Likewise.
-
-2007-08-28  Nick Clifton  <nickc@redhat.com>
-
-	* NEWS: Mention Coverity's contribution.
-
-2007-08-25  Ulrich Weigand  <uweigand@de.ibm.com>
-
-	* readelf.c (process_note): Recognize SPU core file notes.
-
-2007-08-24  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* configure.in: Install embedspu on powerpc*-*-eabi* also.
-	* configure: Regenerated.
-
-2007-08-24  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* po/uk.po: Updated Ukrainian translation.
-
-2007-08-22  Ben Elliston  <bje@au.ibm.com>
-
-	* doc/binutils.texi (objdump): Document -Mppcps.
-
 2007-08-17  Alan Modra  <amodra@bigpond.net.au>
 
 	* po/Make-in: Add --msgid-bugs-address to xgettext invocation.
diff -Nur binutils-2.18.50.0.1/binutils/configure binutils-stable/binutils/configure
--- binutils-2.18.50.0.1/binutils/configure	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/configure	2007-09-25 15:41:53.000000000 +0200
@@ -458,7 +458,7 @@
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP WARN_CFLAGS NO_WERROR YACC LEX LEXLIB LEX_OUTPUT_ROOT USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE HDEFINES CC_FOR_BUILD EXEEXT_FOR_BUILD DEMANGLER_NAME ALLOCA LIBICONV LTLIBICONV NLMCONV_DEFS BUILD_NLMCONV BUILD_SRCONV BUILD_DLLTOOL DLLTOOL_DEFS BUILD_WINDRES BUILD_WINDMC BUILD_DLLWRAP BUILD_MISC BUILD_INSTALL_MISC OBJDUMP_DEFS EMULATION EMULATION_VECTOR datarootdir docdir htmldir LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP WARN_CFLAGS NO_WERROR YACC LEX LEXLIB LEX_OUTPUT_ROOT USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE HDEFINES CC_FOR_BUILD EXEEXT_FOR_BUILD DEMANGLER_NAME ALLOCA LIBICONV LTLIBICONV NLMCONV_DEFS BUILD_NLMCONV BUILD_SRCONV BUILD_DLLTOOL DLLTOOL_DEFS BUILD_WINDRES BUILD_WINDMC BUILD_DLLWRAP BUILD_MISC BUILD_INSTALL_MISC OBJDUMP_DEFS EMULATION EMULATION_VECTOR datarootdir docdir htmldir pdfdir  LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -10677,7 +10677,7 @@
   LEX=${am_missing_run}flex
 fi
 
-ALL_LINGUAS="fr tr ja es sv da zh_CN ru ro rw zh_TW fi vi uk sk"
+ALL_LINGUAS="fr tr ja es sv da zh_CN ru ro rw zh_TW fi vi uk"
 # If we haven't got the data from the intl directory,
 # assume NLS is disabled.
 USE_NLS=no
@@ -14531,7 +14531,7 @@
 	  BUILD_WINDRES='$(WINDRES_PROG)$(EXEEXT)'
 	  BUILD_WINDMC='$(WINDMC_PROG)$(EXEEXT)'
 	  ;;
-	powerpc*-*-linux* | powerpc*-*-elf* | powerpc*-*-eabi*)
+	powerpc*-*-linux* | powerpc*-*-elf*)
 	  BUILD_INSTALL_MISC="${BUILD_INSTALL_MISC} embedspu"
 	  ;;
 	sh*-*-pe)
@@ -14644,6 +14644,7 @@
 
 
 
+
                               ac_config_files="$ac_config_files Makefile doc/Makefile po/Makefile.in:po/Make-in"
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -15663,6 +15664,7 @@
 s,@datarootdir@,$datarootdir,;t t
 s,@docdir@,$docdir,;t t
 s,@htmldir@,$htmldir,;t t
+s,@pdfdir@,$pdfdir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff -Nur binutils-2.18.50.0.1/binutils/configure.in binutils-stable/binutils/configure.in
--- binutils-2.18.50.0.1/binutils/configure.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/configure.in	2007-09-25 15:41:53.000000000 +0200
@@ -45,7 +45,7 @@
 AC_PROG_YACC
 AM_PROG_LEX
 
-ALL_LINGUAS="fr tr ja es sv da zh_CN ru ro rw zh_TW fi vi uk sk"
+ALL_LINGUAS="fr tr ja es sv da zh_CN ru ro rw zh_TW fi vi uk"
 ZW_GNU_GETTEXT_SISTER_DIR
 AM_PO_SUBDIRS
 
@@ -333,7 +333,7 @@
 	  BUILD_WINDRES='$(WINDRES_PROG)$(EXEEXT)'
 	  BUILD_WINDMC='$(WINDMC_PROG)$(EXEEXT)'
 	  ;;
-	powerpc*-*-linux* | powerpc*-*-elf* | powerpc*-*-eabi*)
+	powerpc*-*-linux* | powerpc*-*-elf*)
 	  BUILD_INSTALL_MISC="${BUILD_INSTALL_MISC} embedspu"
 	  ;;
 	sh*-*-pe)
@@ -438,5 +438,6 @@
 AC_SUBST(datarootdir)
 AC_SUBST(docdir)
 AC_SUBST(htmldir)
+AC_SUBST(pdfdir)
 
 AC_OUTPUT(Makefile doc/Makefile po/Makefile.in:po/Make-in)
diff -Nur binutils-2.18.50.0.1/binutils/doc/binutils.texi binutils-stable/binutils/doc/binutils.texi
--- binutils-2.18.50.0.1/binutils/doc/binutils.texi	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/doc/binutils.texi	2007-09-25 15:41:50.000000000 +0200
@@ -1819,10 +1819,9 @@
 
 For PPC, @option{booke}, @option{booke32} and @option{booke64} select
 disassembly of BookE instructions.  @option{32} and @option{64} select
-PowerPC and PowerPC64 disassembly, respectively.  @option{e300}
-selects disassembly for the e300 family.  @option{440} selects
-disassembly for the PowerPC 440.  @option{ppcps} selects disassembly
-for the paired single instructions of the PPC750CL.
+PowerPC and PowerPC64 disassembly, respectively.  @option{e300} selects
+disassembly for the e300 family.  @option{440} selects disassembly for
+the PowerPC 440.
 
 For MIPS, this option controls the printing of instruction mnemonic
 names and register names in disassembled instructions.  Multiple
@@ -3601,7 +3600,6 @@
         [@option{-A}|@option{--arch-specific}]
         [@option{-D}|@option{--use-dynamic}]
         [@option{-x} <number or name>|@option{--hex-dump=}<number or name>]
-        [@option{-p} <number or name>|@option{--string-dump=}<number or name>]
         [@option{-w[liaprmfFsoR]}|
          @option{--debug-dump}[=line,=info,=abbrev,=pubnames,=aranges,=macro,=frames,=frames-interp,=str,=loc,=Ranges]]
         [@option{-I}|@option{-histogram}]
@@ -3727,12 +3725,6 @@
 A number identifies a particular section by index in the section table;
 any other string identifies all sections with that name in the object file.
 
-@item -p <number or name>
-@itemx --string-dump=<number or name>
-Displays the contents of the indicated section as printable strings.
-A number identifies a particular section by index in the section table;
-any other string identifies all sections with that name in the object file.
-
 @item -w[liaprmfFsoR]
 @itemx --debug-dump[=line,=info,=abbrev,=pubnames,=aranges,=macro,=frames,=frames-interp,=str,=loc,=Ranges]
 Displays the contents of the debug sections in the file, if any are
diff -Nur binutils-2.18.50.0.1/binutils/doc/Makefile.am binutils-stable/binutils/doc/Makefile.am
--- binutils-2.18.50.0.1/binutils/doc/Makefile.am	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/doc/Makefile.am	2007-09-25 15:41:50.000000000 +0200
@@ -161,6 +161,20 @@
 # cygnus option.
 install-data-local: install-info
 
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
+
+install-pdf: install-pdf-am
+ 
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 
 install-html: install-html-am
diff -Nur binutils-2.18.50.0.1/binutils/doc/Makefile.in binutils-stable/binutils/doc/Makefile.in
--- binutils-2.18.50.0.1/binutils/doc/Makefile.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/doc/Makefile.in	2007-09-25 15:41:50.000000000 +0200
@@ -213,6 +213,7 @@
 mandir = @mandir@
 mkdir_p = @mkdir_p@
 oldincludedir = @oldincludedir@
+pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 sbindir = @sbindir@
@@ -262,6 +263,7 @@
 		    -I "$(top_srcdir)/../bfd/doc" -I ../../bfd/doc
 
 MOSTLYCLEANFILES = $(DEMANGLER_NAME).1
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 MAINTAINERCLEANFILES = binutils.info
 
@@ -282,9 +284,9 @@
 	      exit 1;; \
 	  esac; \
 	done; \
-	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign  doc/Makefile'; \
+	echo ' cd $(top_srcdir) && $(AUTOMAKE) --cygnus  doc/Makefile'; \
 	cd $(top_srcdir) && \
-	  $(AUTOMAKE) --foreign  doc/Makefile
+	  $(AUTOMAKE) --cygnus  doc/Makefile
 .PRECIOUS: Makefile
 Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
 	@case '$?' in \
@@ -709,6 +711,18 @@
 # cygnus option.
 install-data-local: install-info
 
+install-pdf: install-pdf-am
+
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
 install-html: install-html-am
 
 install-html-am: $(HTMLS)
diff -Nur binutils-2.18.50.0.1/binutils/Makefile.am binutils-stable/binutils/Makefile.am
--- binutils-2.18.50.0.1/binutils/Makefile.am	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/Makefile.am	2007-09-25 15:41:53.000000000 +0200
@@ -71,7 +71,8 @@
 
 MKDEP = gcc -MM
 
-INCLUDES = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \
+INCLUDES = -D_GNU_SOURCE \
+	 -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \
 	 @HDEFINES@ \
 	 @INCINTL@ \
 	 -DLOCALEDIR="\"$(datadir)/locale\"" \
@@ -116,6 +117,35 @@
 
 LIBIBERTY = ../libiberty/libiberty.a
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf:	install-pdf-recursive
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html:	install-html-recursive
@@ -592,7 +622,7 @@
   $(INCDIR)/elf/spu.h $(INCDIR)/elf/v850.h $(INCDIR)/elf/vax.h \
   $(INCDIR)/elf/x86-64.h $(INCDIR)/elf/xstormy16.h $(INCDIR)/elf/xtensa.h \
   $(INCDIR)/aout/ar.h $(INCDIR)/libiberty.h $(INCDIR)/ansidecl.h \
-  unwind-ia64.h $(INCDIR)/safe-ctype.h
+  unwind-ia64.h
 rename.o: rename.c sysdep.h $(INCDIR)/ansidecl.h ../bfd/bfdver.h \
   config.h $(INCDIR)/fopen-same.h ../bfd/bfd.h $(INCDIR)/ansidecl.h \
   $(INCDIR)/symcat.h bucomm.h
diff -Nur binutils-2.18.50.0.1/binutils/Makefile.in binutils-stable/binutils/Makefile.in
--- binutils-2.18.50.0.1/binutils/Makefile.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/Makefile.in	2007-09-25 15:41:53.000000000 +0200
@@ -304,9 +304,11 @@
 WARN_CFLAGS = @WARN_CFLAGS@
 XGETTEXT = @XGETTEXT@
 YACC = `if [ -f ../bison/bison ]; then echo ../bison/bison -y -L$(srcdir)/../bison/; else echo @YACC@; fi`
-YFLAGS = -d
+ac_ct_AR = @ac_ct_AR@
 ac_ct_CC = @ac_ct_CC@
 ac_ct_DUMPBIN = @ac_ct_DUMPBIN@
+ac_ct_RANLIB = @ac_ct_RANLIB@
+ac_ct_STRIP = @ac_ct_STRIP@
 am__fastdepCC_FALSE = @am__fastdepCC_FALSE@
 am__fastdepCC_TRUE = @am__fastdepCC_TRUE@
 am__include = @am__include@
@@ -323,7 +325,6 @@
 datadir = @datadir@
 datarootdir = @datarootdir@
 docdir = @docdir@
-dvidir = @dvidir@
 exec_prefix = @exec_prefix@
 host = @host@
 host_alias = @host_alias@
@@ -336,7 +337,6 @@
 install_sh = @install_sh@
 libdir = @libdir@
 libexecdir = @libexecdir@
-localedir = @localedir@
 localstatedir = @localstatedir@
 lt_ECHO = @lt_ECHO@
 mandir = @mandir@
@@ -345,7 +345,6 @@
 pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
-psdir = @psdir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
@@ -358,6 +357,7 @@
 ACLOCAL_AMFLAGS = -I .. -I ../config -I ../bfd
 SUBDIRS = doc po
 tooldir = $(exec_prefix)/$(target_alias)
+YFLAGS = -d
 AM_CFLAGS = $(WARN_CFLAGS)
 
 # these two are almost the same program
@@ -393,7 +393,8 @@
 BFDDIR = $(BASEDIR)/bfd
 INCDIR = $(BASEDIR)/include
 MKDEP = gcc -MM
-INCLUDES = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \
+INCLUDES = -D_GNU_SOURCE \
+	 -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \
 	 @HDEFINES@ \
 	 @INCINTL@ \
 	 -DLOCALEDIR="\"$(datadir)/locale\"" \
@@ -532,15 +533,15 @@
 	@for dep in $?; do \
 	  case '$(am__configure_deps)' in \
 	    *$$dep*) \
-	      echo ' cd $(srcdir) && $(AUTOMAKE) --foreign '; \
-	      cd $(srcdir) && $(AUTOMAKE) --foreign  \
+	      echo ' cd $(srcdir) && $(AUTOMAKE) --cygnus '; \
+	      cd $(srcdir) && $(AUTOMAKE) --cygnus  \
 		&& exit 0; \
 	      exit 1;; \
 	  esac; \
 	done; \
-	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign  Makefile'; \
+	echo ' cd $(top_srcdir) && $(AUTOMAKE) --cygnus  Makefile'; \
 	cd $(top_srcdir) && \
-	  $(AUTOMAKE) --foreign  Makefile
+	  $(AUTOMAKE) --cygnus  Makefile
 .PRECIOUS: Makefile
 Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
 	@case '$?' in \
@@ -976,6 +977,35 @@
 	uninstall uninstall-am uninstall-binPROGRAMS uninstall-info-am
 
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf:	install-pdf-recursive
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html:	install-html-recursive
@@ -1343,7 +1373,7 @@
   $(INCDIR)/elf/spu.h $(INCDIR)/elf/v850.h $(INCDIR)/elf/vax.h \
   $(INCDIR)/elf/x86-64.h $(INCDIR)/elf/xstormy16.h $(INCDIR)/elf/xtensa.h \
   $(INCDIR)/aout/ar.h $(INCDIR)/libiberty.h $(INCDIR)/ansidecl.h \
-  unwind-ia64.h $(INCDIR)/safe-ctype.h
+  unwind-ia64.h
 rename.o: rename.c sysdep.h $(INCDIR)/ansidecl.h ../bfd/bfdver.h \
   config.h $(INCDIR)/fopen-same.h ../bfd/bfd.h $(INCDIR)/ansidecl.h \
   $(INCDIR)/symcat.h bucomm.h
diff -Nur binutils-2.18.50.0.1/binutils/NEWS binutils-stable/binutils/NEWS
--- binutils-2.18.50.0.1/binutils/NEWS	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/NEWS	2007-09-25 15:41:53.000000000 +0200
@@ -1,10 +1,5 @@
 -*- text -*-
-* Added -p switch to readelf to allow string dumps of sections.
-
 Changes in 2.18:
-* Resolved 37 coding problems in bfd including static array overruns, null
-  pointer dereferences and use of a malloc buffer after it has been freed, as
-  revealed by static analysis donated by Coverity, Inc. (http://scan.coverity.com).
 
 * The binutils sources are now released under version 3 of the GNU General
   Public License.
diff -Nur binutils-2.18.50.0.1/binutils/objcopy.c binutils-stable/binutils/objcopy.c
--- binutils-2.18.50.0.1/binutils/objcopy.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/objcopy.c	2007-09-25 15:41:53.000000000 +0200
@@ -64,10 +64,7 @@
 /* List of sections to be renamed.  */
 static section_rename *section_rename_list;
 
-#define RETURN_NONFATAL(bfd) \
-  do { \
-    status = 1; bfd_nonfatal_message (NULL, bfd, NULL, NULL); return; \
-  } while (0)
+#define RETURN_NONFATAL(s) {bfd_nonfatal (s); status = 1; return;}
 
 static asymbol **isympp = NULL;	/* Input symbols.  */
 static asymbol **osympp = NULL;	/* Output symbols that survive stripping.  */
@@ -1257,7 +1254,7 @@
 
   if (bfd_stat_arch_elt (ibfd, &buf) != 0)
     {
-      bfd_nonfatal_message (bfd_get_archive_filename (ibfd), NULL, NULL, NULL);
+      bfd_nonfatal (bfd_get_archive_filename (ibfd));
       return FALSE;
     }
 
@@ -1290,8 +1287,7 @@
       if (bfd_bread (cbuf, (bfd_size_type) tocopy, ibfd)
 	  != (bfd_size_type) tocopy)
 	{
-	  bfd_nonfatal_message (bfd_get_archive_filename (ibfd),
-				NULL, NULL, NULL);
+	  bfd_nonfatal (bfd_get_archive_filename (ibfd));
 	  free (cbuf);
 	  return FALSE;
 	}
@@ -1299,7 +1295,7 @@
       if (bfd_bwrite (cbuf, (bfd_size_type) tocopy, obfd)
 	  != (bfd_size_type) tocopy)
 	{
-	  bfd_nonfatal_message (NULL, obfd, NULL, NULL);
+	  bfd_nonfatal (bfd_get_filename (obfd));
 	  free (cbuf);
 	  return FALSE;
 	}
@@ -1336,7 +1332,7 @@
 
   if (!bfd_set_format (obfd, bfd_get_format (ibfd)))
     {
-      bfd_nonfatal_message (NULL, obfd, NULL, NULL);
+      bfd_nonfatal (bfd_get_filename (obfd));
       return FALSE;
     }
 
@@ -1370,8 +1366,7 @@
       if (!bfd_set_start_address (obfd, start)
 	  || !bfd_set_file_flags (obfd, flags))
 	{
-	  bfd_nonfatal_message (bfd_get_archive_filename (ibfd),
-				NULL, NULL, NULL);
+	  bfd_nonfatal (bfd_get_archive_filename (ibfd));
 	  return FALSE;
 	}
     }
@@ -1395,7 +1390,7 @@
 
   if (!bfd_set_format (obfd, bfd_get_format (ibfd)))
     {
-      bfd_nonfatal_message (bfd_get_archive_filename (ibfd), NULL, NULL, NULL);
+      bfd_nonfatal (bfd_get_archive_filename (ibfd));
       return FALSE;
     }
 
@@ -1411,7 +1406,7 @@
   symsize = bfd_get_symtab_upper_bound (ibfd);
   if (symsize < 0)
     {
-      bfd_nonfatal_message (bfd_get_archive_filename (ibfd), NULL, NULL, NULL);
+      bfd_nonfatal (bfd_get_archive_filename (ibfd));
       return FALSE;
     }
 
@@ -1419,7 +1414,7 @@
   symcount = bfd_canonicalize_symtab (ibfd, isympp);
   if (symcount < 0)
     {
-      bfd_nonfatal_message (NULL, ibfd, NULL, NULL);
+      bfd_nonfatal (bfd_get_filename (ibfd));
       return FALSE;
     }
 
@@ -1450,8 +1445,7 @@
 	     error codes, so check for the most likely user error first.  */
 	  if (bfd_get_section_by_name (obfd, padd->name))
 	    {
-	      bfd_nonfatal_message (NULL, obfd, NULL,
-				 _("can't add section '%s'"), padd->name);
+	      non_fatal (_("can't add section '%s' - it already exists!"), padd->name);
 	      return FALSE;
 	    }
 	  else
@@ -1459,16 +1453,15 @@
 	      padd->section = bfd_make_section_with_flags (obfd, padd->name, flags);
 	      if (padd->section == NULL)
 		{
-		  bfd_nonfatal_message (NULL, obfd, NULL,
-					_("can't create section `%s'"),
-					padd->name);
+		  non_fatal (_("can't create section `%s': %s"),
+			     padd->name, bfd_errmsg (bfd_get_error ()));
 		  return FALSE;
 		}
 	    }
 
 	  if (! bfd_set_section_size (obfd, padd->section, padd->size))
 	    {
-	      bfd_nonfatal_message (NULL, obfd, padd->section, NULL);
+	      bfd_nonfatal (bfd_get_filename (obfd));
 	      return FALSE;
 	    }
 
@@ -1478,7 +1471,7 @@
 		if (! bfd_set_section_vma (obfd, padd->section,
 					   pset->vma_val))
 		  {
-		    bfd_nonfatal_message (NULL, obfd, padd->section, NULL);
+		    bfd_nonfatal (bfd_get_filename (obfd));
 		    return FALSE;
 		  }
 
@@ -1490,7 +1483,7 @@
 		      (obfd, padd->section,
 		       bfd_section_alignment (obfd, padd->section)))
 		    {
-		      bfd_nonfatal_message (NULL, obfd, padd->section, NULL);
+		      bfd_nonfatal (bfd_get_filename (obfd));
 		      return FALSE;
 		    }
 		}
@@ -1505,9 +1498,7 @@
 
       if (gnu_debuglink_section == NULL)
 	{
-	  bfd_nonfatal_message (NULL, obfd, NULL,
-				_("cannot create debug link section `%s'"),
-				gnu_debuglink_filename);
+	  bfd_nonfatal (gnu_debuglink_filename);
 	  return FALSE;
 	}
 
@@ -1598,8 +1589,9 @@
 		  if (! bfd_set_section_size (obfd, osections[i],
 					      size + (gap_stop - gap_start)))
 		    {
-		      bfd_nonfatal_message (NULL, obfd, osections[i],
-					    _("Can't fill gap after section"));
+		      non_fatal (_("Can't fill gap after %s: %s"),
+				 bfd_get_section_name (obfd, osections[i]),
+				 bfd_errmsg (bfd_get_error ()));
 		      status = 1;
 		      break;
 		    }
@@ -1622,8 +1614,9 @@
 	      if (! bfd_set_section_size (obfd, osections[c - 1],
 					  pad_to - lma))
 		{
-		  bfd_nonfatal_message (NULL, obfd, osections[c - 1],
-					_("can't add padding"));
+		  non_fatal (_("Can't add padding to %s: %s"),
+			     bfd_get_section_name (obfd, osections[c - 1]),
+			     bfd_errmsg (bfd_get_error ()));
 		  status = 1;
 		}
 	      else
@@ -1702,7 +1695,7 @@
 	  if (! bfd_set_section_contents (obfd, padd->section, padd->contents,
 					  0, padd->size))
 	    {
-	      bfd_nonfatal_message (NULL, obfd, padd->section, NULL);
+	      bfd_nonfatal (bfd_get_filename (obfd));
 	      return FALSE;
 	    }
 	}
@@ -1713,9 +1706,7 @@
       if (! bfd_fill_in_gnu_debuglink_section
 	  (obfd, gnu_debuglink_section, gnu_debuglink_filename))
 	{
-	  bfd_nonfatal_message (NULL, obfd, NULL,
-				_("cannot fill debug link section `%s'"),
-				gnu_debuglink_filename);
+	  bfd_nonfatal (gnu_debuglink_filename);
 	  return FALSE;
 	}
     }
@@ -1754,7 +1745,7 @@
 		  if (! bfd_set_section_contents (obfd, osections[i], buf,
 						  off, now))
 		    {
-		      bfd_nonfatal_message (NULL, obfd, osections[i], NULL);
+		      bfd_nonfatal (bfd_get_filename (obfd));
 		      return FALSE;
 		    }
 
@@ -1776,8 +1767,9 @@
      important for the ECOFF code at least.  */
   if (! bfd_copy_private_bfd_data (ibfd, obfd))
     {
-      bfd_nonfatal_message (NULL, obfd, NULL,
-			    _("error copying private BFD data"));
+      non_fatal (_("%s: error copying private BFD data: %s"),
+		 bfd_get_filename (obfd),
+		 bfd_errmsg (bfd_get_error ()));
       return FALSE;
     }
 
@@ -1836,7 +1828,7 @@
   this_element = bfd_openr_next_archived_file (ibfd, NULL);
 
   if (!bfd_set_format (obfd, bfd_get_format (ibfd)))
-    RETURN_NONFATAL (obfd);
+    RETURN_NONFATAL (bfd_get_filename (obfd));
 
   while (!status && this_element != NULL)
     {
@@ -1893,11 +1885,7 @@
 	    output_bfd = bfd_openw (output_name, bfd_get_target (this_element));
 
 	  if (output_bfd == NULL)
-	    {
-	      bfd_nonfatal_message (output_name, NULL, NULL, NULL);
-	      status = 1;
-	      return;
-	    }
+	    RETURN_NONFATAL (output_name);
 
 	  delete = ! copy_object (this_element, output_bfd);
 
@@ -1906,7 +1894,7 @@
 	    {
 	      if (!bfd_close (output_bfd))
 		{
-		  bfd_nonfatal_message (NULL, output_bfd, NULL, NULL);
+		  bfd_nonfatal (bfd_get_filename (output_bfd));
 		  /* Error in new object file. Don't change archive.  */
 		  status = 1;
 		}
@@ -1916,16 +1904,15 @@
 	}
       else
 	{
-	  bfd_nonfatal_message (bfd_get_archive_filename (this_element),
-				NULL, NULL,
-				_("Unable to recognise the format of file"));
+	  non_fatal (_("Unable to recognise the format of the input file `%s'"),
+		     bfd_get_archive_filename (this_element));
 
 	  output_bfd = bfd_openw (output_name, output_target);
 copy_unknown_element:
 	  delete = !copy_unknown_object (this_element, output_bfd);
 	  if (!bfd_close_all_done (output_bfd))
 	    {
-	      bfd_nonfatal_message (NULL, output_bfd, NULL, NULL);
+	      bfd_nonfatal (bfd_get_filename (output_bfd));
 	      /* Error in new object file. Don't change archive.  */
 	      status = 1;
 	    }
@@ -1959,10 +1946,10 @@
   *ptr = NULL;
 
   if (!bfd_close (obfd))
-    RETURN_NONFATAL (obfd);
+    RETURN_NONFATAL (bfd_get_filename (obfd));
 
   if (!bfd_close (ibfd))
-    RETURN_NONFATAL (obfd);
+    RETURN_NONFATAL (bfd_get_filename (ibfd));
 
   /* Delete all the files that we opened.  */
   for (l = list; l != NULL; l = l->next)
@@ -1998,11 +1985,7 @@
      non-object file, failures are nonfatal.  */
   ibfd = bfd_openr (input_filename, input_target);
   if (ibfd == NULL)
-    {
-      bfd_nonfatal_message (input_filename, NULL, NULL, NULL);
-      status = 1;
-      return;
-    }
+    RETURN_NONFATAL (input_filename);
 
   if (bfd_check_format (ibfd, bfd_archive))
     {
@@ -2021,11 +2004,7 @@
 
       obfd = bfd_openw (output_filename, output_target);
       if (obfd == NULL)
-	{
-	  bfd_nonfatal_message (output_filename, NULL, NULL, NULL);
-	  status = 1;
-	  return;
-	}
+	RETURN_NONFATAL (output_filename);
 
       copy_archive (ibfd, obfd, output_target, force_output_target);
     }
@@ -2041,20 +2020,17 @@
 
       obfd = bfd_openw (output_filename, output_target);
       if (obfd == NULL)
- 	{
- 	  bfd_nonfatal_message (output_filename, NULL, NULL, NULL);
- 	  status = 1;
- 	  return;
- 	}
+	RETURN_NONFATAL (output_filename);
 
       if (! copy_object (ibfd, obfd))
 	status = 1;
 
       if (!bfd_close (obfd))
-	RETURN_NONFATAL (obfd);
+	RETURN_NONFATAL (output_filename);
 
       if (!bfd_close (ibfd))
-	RETURN_NONFATAL (ibfd);
+	RETURN_NONFATAL (input_filename);
+
     }
   else
     {
@@ -2074,7 +2050,7 @@
       if (obj_error != core_error)
 	bfd_set_error (obj_error);
 
-      bfd_nonfatal_message (input_filename, NULL, NULL, NULL);
+      bfd_nonfatal (input_filename);
 
       if (obj_error == bfd_error_file_ambiguously_recognized)
 	{
@@ -2153,18 +2129,24 @@
 static void
 setup_bfd_headers (bfd *ibfd, bfd *obfd)
 {
+  const char *err;
+
   /* Allow the BFD backend to copy any private data it understands
      from the input section to the output section.  */
   if (! bfd_copy_private_header_data (ibfd, obfd))
     {
-      status = 1;
-      bfd_nonfatal_message (NULL, ibfd, NULL,
-			    _("error in private h	eader data"));
-      return;
+      err = _("private header data");
+      goto loser;
     }
 
   /* All went well.  */
   return;
+
+loser:
+  non_fatal (_("%s: error in %s: %s"),
+	     bfd_get_filename (ibfd),
+	     err, bfd_errmsg (bfd_get_error ()));
+  status = 1;
 }
 
 /* Create a section in OBFD with the same
@@ -2237,7 +2219,7 @@
 
   if (osection == NULL)
     {
-      err = _("failed to create output section");
+      err = _("making");
       goto loser;
     }
 
@@ -2251,7 +2233,7 @@
     size = 0;
   if (! bfd_set_section_size (obfd, osection, size))
     {
-      err = _("failed to set size");
+      err = _("size");
       goto loser;
     }
 
@@ -2265,7 +2247,7 @@
 
   if (! bfd_set_section_vma (obfd, osection, extract_symbol ? 0 : vma))
     {
-      err = _("failed to set vma");
+      err = _("vma");
       goto loser;
     }
 
@@ -2290,7 +2272,7 @@
 				  osection,
 				  bfd_section_alignment (ibfd, isection)))
     {
-      err = _("failed to set alignment");
+      err = _("alignment");
       goto loser;
     }
 
@@ -2312,7 +2294,7 @@
      from the input section to the output section.  */
   if (!bfd_copy_private_section_data (ibfd, isection, obfd, osection))
     {
-      err = _("failed to copy private data");
+      err = _("private data");
       goto loser;
     }
   else if ((isection->flags & SEC_GROUP) != 0)
@@ -2327,8 +2309,11 @@
   return;
 
 loser:
+  non_fatal (_("%s: section `%s': error in %s: %s"),
+	     bfd_get_filename (ibfd),
+	     bfd_section_name (ibfd, isection),
+	     err, bfd_errmsg (bfd_get_error ()));
   status = 1;
-  bfd_nonfatal_message (NULL, obfd, osection, err);
 }
 
 /* Copy the data of input section ISECTION of IBFD
@@ -2380,11 +2365,7 @@
 	  if (relsize == -1 && bfd_get_error () == bfd_error_invalid_operation)
 	    relsize = 0;
 	  else
-	    {
-	      status = 1;
-	      bfd_nonfatal_message (NULL, ibfd, isection, NULL);
-	      return;
-	    }
+	    RETURN_NONFATAL (bfd_get_filename (ibfd));
 	}
     }
 
@@ -2395,12 +2376,7 @@
       relpp = xmalloc (relsize);
       relcount = bfd_canonicalize_reloc (ibfd, isection, relpp, isympp);
       if (relcount < 0)
-	{
-	  status = 1;
-	  bfd_nonfatal_message (NULL, ibfd, isection,
-				_("relocation count is negative"));
-	  return;
-	}
+	RETURN_NONFATAL (bfd_get_filename (ibfd));
 
       if (strip_symbols == STRIP_ALL)
 	{
@@ -2434,11 +2410,7 @@
       void *memhunk = xmalloc (size);
 
       if (!bfd_get_section_contents (ibfd, isection, memhunk, 0, size))
-	{
-	  status = 1;
-	  bfd_nonfatal_message (NULL, ibfd, isection, NULL);
-	  return;
-	}
+	RETURN_NONFATAL (bfd_get_filename (ibfd));
 
       if (reverse_bytes)
 	{
@@ -2481,11 +2453,8 @@
 	}
 
       if (!bfd_set_section_contents (obfd, osection, memhunk, 0, size))
-	{
-	  status = 1;
-	  bfd_nonfatal_message (NULL, obfd, osection, NULL);
-	  return;
-	}
+	RETURN_NONFATAL (bfd_get_filename (obfd));
+
       free (memhunk);
     }
   else if (p != NULL && p->set_flags && (p->flags & SEC_HAS_CONTENTS) != 0)
@@ -2500,11 +2469,7 @@
 
       memset (memhunk, 0, size);
       if (! bfd_set_section_contents (obfd, osection, memhunk, 0, size))
-	{
-	  status = 1;
-	  bfd_nonfatal_message (NULL, obfd, osection, NULL);
-	  return;
-	}
+	RETURN_NONFATAL (bfd_get_filename (obfd));
       free (memhunk);
     }
 }
@@ -2645,8 +2610,9 @@
 	  || ! bfd_set_section_alignment (obfd, stabsec, 2)
 	  || ! bfd_set_section_alignment (obfd, stabstrsec, 0))
 	{
-	  bfd_nonfatal_message (NULL, obfd, NULL,
-				_("can't create debugging section"));
+	  non_fatal (_("%s: can't create debugging section: %s"),
+		     bfd_get_filename (obfd),
+		     bfd_errmsg (bfd_get_error ()));
 	  return FALSE;
 	}
 
@@ -2658,17 +2624,17 @@
 	  || ! bfd_set_section_contents (obfd, stabstrsec, strings, 0,
 					 stringsize))
 	{
-	  bfd_nonfatal_message (NULL, obfd, NULL,
-				_("can't set debugging section contents"));
+	  non_fatal (_("%s: can't set debugging section contents: %s"),
+		     bfd_get_filename (obfd),
+		     bfd_errmsg (bfd_get_error ()));
 	  return FALSE;
 	}
 
       return TRUE;
     }
 
-  bfd_nonfatal_message (NULL, obfd, NULL,
-			_("don't know how to write debugging information for %s"),
-	     bfd_get_target (obfd));
+  non_fatal (_("%s: don't know how to write debugging information for %s"),
+	     bfd_get_filename (obfd), bfd_get_target (obfd));
   return FALSE;
 }
 
@@ -2808,8 +2774,8 @@
 
       if (tmpname == NULL)
 	{
-	  bfd_nonfatal_message (argv[i], NULL, NULL,
-				_("could not create temporary file to hold stripped copy"));
+	  non_fatal (_("could not create temporary file to hold stripped copy of '%s'"),
+		     argv[i]);
 	  status = 1;
 	  continue;
 	}
diff -Nur binutils-2.18.50.0.1/binutils/objdump.c binutils-stable/binutils/objdump.c
--- binutils-2.18.50.0.1/binutils/objdump.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/binutils/objdump.c	2007-09-25 15:41:53.000000000 +0200
@@ -1650,15 +1650,8 @@
 
 	      if (q->addend)
 		{
-		  bfd_signed_vma addend = q->addend;
-		  if (addend < 0)
-		    {
-		      printf ("-0x");
-		      addend = -addend;
-		    }
-		  else
-		    printf ("+0x");
-		  objdump_print_value (addend, info, TRUE);
+		  printf ("+0x");
+		  objdump_print_value (q->addend, info, TRUE);
 		}
 
 	      printf ("\n");
@@ -2717,15 +2710,8 @@
 
       if (q->addend)
 	{
-	  bfd_signed_vma addend = q->addend;
-	  if (addend < 0)
-	    {
-	      printf ("-0x");
-	      addend = -addend;
-	    }
-	  else
-	    printf ("+0x");
-	  bfd_printf_vma (abfd, addend);
+	  printf ("+0x");
+	  bfd_printf_vma (abfd, q->addend);
 	}
 
       printf ("\n");
diff -Nur binutils-2.18.50.0.1/binutils/po/Make-in binutils-stable/binutils/po/Make-in
--- binutils-2.18.50.0.1/binutils/po/Make-in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/po/Make-in	2007-09-25 15:41:53.000000000 +0200
@@ -113,6 +113,7 @@
 install-exec:
 install-info:
 install-html:
+install-pdf:
 install-data: install-data-@USE_NLS@
 install-data-no: all
 install-data-yes: all
diff -Nur binutils-2.18.50.0.1/binutils/po/sk.po binutils-stable/binutils/po/sk.po
--- binutils-2.18.50.0.1/binutils/po/sk.po	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/po/sk.po	1970-01-01 01:00:00.000000000 +0100
@@ -1,5614 +0,0 @@
-# Slovak translation for binutils
-# Copyright (C) 2004 Free Software Foundation, Inc.
-# This file is distributed under the same license as the binutils package.
-# Ivan Masr <helix84@centrum.sk>, 2007.
-#
-# based on launchpad translation from 30.8.2007 by Jozef Ker, analytik
-#
-msgid ""
-msgstr ""
-"Project-Id-Version: binutils 2.17.90\n"
-"Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-02 15:55+0930\n"
-"PO-Revision-Date: 2007-08-30 22:28+0100\n"
-"Last-Translator: Ivan Masr <helix84@centrum.sk>\n"
-"Language-Team: Slovak <sk-i18n@lists.linux.sk>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-30 01:38:26+0000\n"
-
-#: addr2line.c:74
-#, c-format
-msgid "Usage: %s [option(s)] [addr(s)]\n"
-msgstr "Pouitie: %s [vob(a/y)] [adres(a/y)]\n"
-
-#: addr2line.c:75
-#, c-format
-msgid " Convert addresses into line number/file name pairs.\n"
-msgstr " Previes adresy na pry siel riadkov/nzvov sborov.\n"
-
-#: addr2line.c:76
-#, c-format
-msgid " If no addresses are specified on the command line, they will be read from stdin\n"
-msgstr " Ak nie s iadne adresy uren z prkazovho riadku, bud sa ta z stdin\n"
-
-#: addr2line.c:77
-#, c-format
-msgid ""
-" The options are:\n"
-"  @<file>                Read options from <file>\n"
-"  -b --target=<bfdname>  Set the binary file format\n"
-"  -e --exe=<executable>  Set the input file name (default is a.out)\n"
-"  -i --inlines           Unwind inlined functions\n"
-"  -j --section=<name>    Read section-relative offsets instead of addresses\n"
-"  -s --basenames         Strip directory names\n"
-"  -f --functions         Show function names\n"
-"  -C --demangle[=style]  Demangle function names\n"
-"  -h --help              Display this information\n"
-"  -v --version           Display the program's version\n"
-"\n"
-msgstr ""
-
-#: addr2line.c:92 ar.c:264 coffdump.c:467 dlltool.c:3172 dllwrap.c:510
-#: nlmconv.c:1115 objcopy.c:515 objcopy.c:550 readelf.c:2797 size.c:103
-#: srconv.c:1734 strings.c:722 sysdump.c:647 windmc.c:232 windres.c:698
-#, c-format
-msgid "Report bugs to %s\n"
-msgstr "Hlsi chyby na %s\n"
-
-#: addr2line.c:279
-#, c-format
-msgid "%s: cannot get addresses from archive"
-msgstr "%s: nepodarilo sa zska adresu z archvu"
-
-#: addr2line.c:296
-#, c-format
-msgid "%s: cannot find section %s"
-msgstr "%s: nepodarilo sa njs sekciu %s"
-
-#: addr2line.c:362 nm.c:1534 objdump.c:3099
-#, c-format
-msgid "unknown demangling style `%s'"
-msgstr "neznmy tl opravy %s"
-
-#: ar.c:204
-#, c-format
-msgid "no entry %s in archive\n"
-msgstr "adny zznam %s v archve\n"
-
-#: ar.c:220
-#, c-format
-msgid "Usage: %s [emulation options] [-]{dmpqrstx}[abcfilNoPsSuvV] [member-name] [count] archive-file file...\n"
-msgstr "Poutie: %s [voby emulcie] [-]{dmpqrstx}[abcfilNoPsSuvV] [nzov-lena] [poet] nzov archvu...\n"
-
-#: ar.c:223
-#, c-format
-msgid "       %s -M [<mri-script]\n"
-msgstr "       %s -M [<mri-script]\n"
-
-#: ar.c:224
-#, c-format
-msgid " commands:\n"
-msgstr " prkazy:\n"
-
-#: ar.c:225
-#, c-format
-msgid "  d            - delete file(s) from the archive\n"
-msgstr "  d - odstrni sbor(y) z archvu\n"
-
-#: ar.c:226
-#, c-format
-msgid "  m[ab]        - move file(s) in the archive\n"
-msgstr "  m[ab] - posun sbor(y) v archve\n"
-
-#: ar.c:227
-#, c-format
-msgid "  p            - print file(s) found in the archive\n"
-msgstr "  p - vypsa sbor(y) njden v archve\n"
-
-#: ar.c:228
-#, c-format
-msgid "  q[f]         - quick append file(s) to the archive\n"
-msgstr "  q[f] - rchlo pripoji sbor(y) k archvu\n"
-
-#: ar.c:229
-#, c-format
-msgid "  r[ab][f][u]  - replace existing or insert new file(s) into the archive\n"
-msgstr "  r[ab][f][u] - nahradi existujci alebo vloi nov sbor(y) do archvu\n"
-
-#: ar.c:230
-#, c-format
-msgid "  t            - display contents of archive\n"
-msgstr "  t - zobrazi obsah archvu\n"
-
-#: ar.c:231
-#, c-format
-msgid "  x[o]         - extract file(s) from the archive\n"
-msgstr "  x[o] - rozbali sbor(y) z archvu\n"
-
-#: ar.c:232
-#, c-format
-msgid " command specific modifiers:\n"
-msgstr " prkazovo pecifick modifiktory:\n"
-
-#: ar.c:233
-#, c-format
-msgid "  [a]          - put file(s) after [member-name]\n"
-msgstr "  [a] - vloi sbor(y) za [nzov-lena]\n"
-
-#: ar.c:234
-#, c-format
-msgid "  [b]          - put file(s) before [member-name] (same as [i])\n"
-msgstr "  [b] - vloi sbor(y) pred [nzov-lena] (rovnak ako [i])\n"
-
-#: ar.c:235
-#, c-format
-msgid "  [N]          - use instance [count] of name\n"
-msgstr "  [N] - poui intanciu [poet] nzvu\n"
-
-#: ar.c:236
-#, c-format
-msgid "  [f]          - truncate inserted file names\n"
-msgstr "  [f] - skrti vloen nzvy sborov\n"
-
-#: ar.c:237
-#, c-format
-msgid "  [P]          - use full path names when matching\n"
-msgstr "  [P] - poui cel cestu pri zhode\n"
-
-#: ar.c:238
-#, c-format
-msgid "  [o]          - preserve original dates\n"
-msgstr "  [o] - zachova pvodn dtumy\n"
-
-#: ar.c:239
-#, c-format
-msgid "  [u]          - only replace files that are newer than current archive contents\n"
-msgstr "  [u] - nahradi iba tie sbory, ktor s novie ne aktulny obsah sboru\n"
-
-#: ar.c:240
-#, c-format
-msgid " generic modifiers:\n"
-msgstr " druhov modifiktory:\n"
-
-#: ar.c:241
-#, c-format
-msgid "  [c]          - do not warn if the library had to be created\n"
-msgstr "  [c] - neupozorova ak sa kninica musela vytvori\n"
-
-#: ar.c:242
-#, c-format
-msgid "  [s]          - create an archive index (cf. ranlib)\n"
-msgstr "  [s] - vytvori index archvu (porovnaj s ranlib)\n"
-
-#: ar.c:243
-#, c-format
-msgid "  [S]          - do not build a symbol table\n"
-msgstr "  [S] - nevytvra symbolick tabuku\n"
-
-#: ar.c:244
-#, c-format
-msgid "  [v]          - be verbose\n"
-msgstr "  [v] - pln vpis\n"
-
-#: ar.c:245
-#, c-format
-msgid "  [V]          - display the version number\n"
-msgstr "  [V] - zobrazi slo verzie\n"
-
-#: ar.c:246
-#, c-format
-msgid "  @<file>      - read options from <file>\n"
-msgstr "  @<sbor> - a voby z <sboru>\n"
-
-#: ar.c:253
-#, c-format
-msgid "Usage: %s [options] archive\n"
-msgstr "Pouitie: %s [voby] archv\n"
-
-#: ar.c:254
-#, c-format
-msgid " Generate an index to speed access to archives\n"
-msgstr " Vygenerova index pre rchly prstup k archvom\n"
-
-#: ar.c:255
-#, c-format
-msgid ""
-" The options are:\n"
-"  @<file>                      Read options from <file>\n"
-"  -h --help                    Print this help message\n"
-"  -V --version                 Print version information\n"
-msgstr ""
-" Voby s:\n"
-"  @<file> - ta voby z <file>\n"
-"  -h --help Vytlai tto sprvu\n"
-"  -V --version Vytlai informcie o verzii\n"
-
-#: ar.c:487
-msgid "two different operation options specified"
-msgstr "boli pecifikovan dve odlin operan voby"
-
-#: ar.c:562
-#, c-format
-msgid "illegal option -- %c"
-msgstr "neplatn voba -- %c"
-
-#: ar.c:605
-msgid "no operation specified"
-msgstr "nebola uren iadna opercia"
-
-#: ar.c:608
-msgid "`u' is only meaningful with the `r' option."
-msgstr "u m zmysel iba s vobou r"
-
-#: ar.c:616
-msgid "`N' is only meaningful with the `x' and `d' options."
-msgstr "N m zmysel iba s vobami x a d."
-
-#: ar.c:619
-msgid "Value for `N' must be positive."
-msgstr "Hodnota pre N mus by kladn."
-
-#: ar.c:669
-#, c-format
-msgid "internal error -- this option not implemented"
-msgstr "vntorn chyba -- tto voba nie je implementovan"
-
-#: ar.c:738
-#, c-format
-msgid "creating %s"
-msgstr "vytvra sa %s"
-
-#: ar.c:787 ar.c:842 ar.c:1164 objcopy.c:1869
-#, c-format
-msgid "internal stat error on %s"
-msgstr "vntorn stat chyba na %s"
-
-#: ar.c:791
-#, c-format
-msgid ""
-"\n"
-"<%s>\n"
-"\n"
-msgstr ""
-"\n"
-"<%s>\n"
-"\n"
-
-#: ar.c:807 ar.c:875
-#, c-format
-msgid "%s is not a valid archive"
-msgstr "%s nie je platn archv"
-
-#: ar.c:1069
-#, c-format
-msgid "No member named `%s'\n"
-msgstr "iadny len s nzvom %s\n"
-
-#: ar.c:1119
-#, c-format
-msgid "no entry %s in archive %s!"
-msgstr "iadny zznam %s v archve %s!"
-
-#: ar.c:1257
-#, c-format
-msgid "%s: no archive map to update"
-msgstr "%s: iadna mapa archvu pre aktualizciu"
-
-#: arsup.c:88
-#, c-format
-msgid "No entry %s in archive.\n"
-msgstr "iadny zznam %s v archve.\n"
-
-#: arsup.c:113
-#, c-format
-msgid "Can't open file %s\n"
-msgstr "Nemono otvori sbor %s\n"
-
-#: arsup.c:163
-#, c-format
-msgid "%s: Can't open output archive %s\n"
-msgstr "%s: Nemono otvori vstupn archv %s\n"
-
-#: arsup.c:180
-#, c-format
-msgid "%s: Can't open input archive %s\n"
-msgstr "%s: Nemono otvori vstupn archv %s\n"
-
-#: arsup.c:189
-#, c-format
-msgid "%s: file %s is not an archive\n"
-msgstr "%s: sbor %s nie je archv\n"
-
-#: arsup.c:228
-#, c-format
-msgid "%s: no output archive specified yet\n"
-msgstr "%s: nebol ete uren iadny vstupn archv\n"
-
-#: arsup.c:248 arsup.c:286 arsup.c:328 arsup.c:348 arsup.c:414
-#, c-format
-msgid "%s: no open output archive\n"
-msgstr "%s iadny vstupn archv na otvorenie\n"
-
-#: arsup.c:259 arsup.c:369 arsup.c:395
-#, c-format
-msgid "%s: can't open file %s\n"
-msgstr "%s: nemono otvori sbor %s\n"
-
-#: arsup.c:313 arsup.c:391 arsup.c:472
-#, c-format
-msgid "%s: can't find module file %s\n"
-msgstr "%s: nemono njs sbor modulu %s\n"
-
-#: arsup.c:423
-#, c-format
-msgid "Current open archive is %s\n"
-msgstr "Sasne otvoren archv je %s\n"
-
-#: arsup.c:447
-#, c-format
-msgid "%s: no open archive\n"
-msgstr "%s: iadny otvoren archv\n"
-
-#: bin2c.c:84
-#, c-format
-msgid "Usage: %s < input_file > output_file\n"
-msgstr "Pouitie: %s <VSTUP_SBOR> VSTUP_SBOR\n"
-
-#: bin2c.c:85
-#, c-format
-msgid "Prints bytes from stdin in hex format.\n"
-msgstr "Vype bajtu zo tand. vstupu v hexadecimlnom formte.\n"
-
-#: binemul.c:37
-#, c-format
-msgid "  No emulation specific options\n"
-msgstr "  Neboli uren iadne emulan voby\n"
-
-#. Macros for common output.
-#: binemul.h:41
-#, c-format
-msgid " emulation options: \n"
-msgstr " emulan voby: \n"
-
-#: bucomm.c:111
-#, c-format
-msgid "can't set BFD default target to `%s': %s"
-msgstr "nemono nastavi tandardn BFD cie na %s: %s"
-
-#: bucomm.c:122
-#, c-format
-msgid "%s: Matching formats:"
-msgstr "%s: Zhodujce sa formty:"
-
-#: bucomm.c:137
-#, c-format
-msgid "Supported targets:"
-msgstr "Podporovan ciele:"
-
-#: bucomm.c:139
-#, c-format
-msgid "%s: supported targets:"
-msgstr "%s: podporovan ciele:"
-
-#: bucomm.c:155
-#, c-format
-msgid "Supported architectures:"
-msgstr "Podporovan architektry:"
-
-#: bucomm.c:157
-#, c-format
-msgid "%s: supported architectures:"
-msgstr "%s: podporovan architektry:"
-
-#: bucomm.c:350
-#, c-format
-msgid "BFD header file version %s\n"
-msgstr "Verzia BFD hlaviky sboru %s\n"
-
-#: bucomm.c:499
-#, c-format
-msgid "%s: bad number: %s"
-msgstr "%s: nesprvane slo: %s"
-
-#: bucomm.c:516 strings.c:435
-#, c-format
-msgid "'%s': No such file"
-msgstr "%s: sbor neexistuje"
-
-#: bucomm.c:518 strings.c:437
-#, c-format
-msgid "Warning: could not locate '%s'.  reason: %s"
-msgstr "Upozornenie: nemono njs %s. dvod: %s"
-
-#: bucomm.c:522
-#, c-format
-msgid "Warning: '%s' is not an ordinary file"
-msgstr "Upozornenie: %s nie je ben sbor"
-
-#: coffdump.c:104
-#, c-format
-msgid "#lines %d "
-msgstr "#riadky %d "
-
-#: coffdump.c:458 sysdump.c:640
-#, c-format
-msgid "Usage: %s [option(s)] in-file\n"
-msgstr "Pouitie: %s [voby] vstupn-sbor\n"
-
-#: coffdump.c:459
-#, c-format
-msgid " Print a human readable interpretation of a SYSROFF object file\n"
-msgstr " Zobrazi itaten interpretciu objektovho sboru SYSFOFF\n"
-
-#: coffdump.c:460
-#, c-format
-msgid ""
-" The options are:\n"
-"  @<file>                Read options from <file>\n"
-"  -h --help              Display this information\n"
-"  -v --version           Display the program's version\n"
-"\n"
-msgstr ""
-" Voby s:\n"
-"  @<file> ta voby z <file>\n"
-"  -h --help Zobrazi tto informciu\n"
-"  -v --version Zobrazi verziu programu\n"
-"\n"
-
-#: coffdump.c:529 srconv.c:1824 sysdump.c:704
-msgid "no input file specified"
-msgstr "nebol uren iadny vstupn sbor"
-
-#: cxxfilt.c:119 nm.c:252 objdump.c:234
-#, c-format
-msgid "Report bugs to %s.\n"
-msgstr "Hlsi chyby na %s.\n"
-
-#: debug.c:646
-msgid "debug_add_to_current_namespace: no current file"
-msgstr "debug_add_to_current_namespace: iadny sasn sbor"
-
-#: debug.c:725
-msgid "debug_start_source: no debug_set_filename call"
-msgstr "debug_start_source: iadne volanie debug_set_filename"
-
-#: debug.c:781
-msgid "debug_record_function: no debug_set_filename call"
-msgstr "debug_record_function: iadne volanie debug_set_filename"
-
-#: debug.c:833
-msgid "debug_record_parameter: no current function"
-msgstr "debug_record_parameter: iadna sasn funkcia"
-
-#: debug.c:865
-msgid "debug_end_function: no current function"
-msgstr "debug_end_function: iadna sasn funkcia"
-
-#: debug.c:871
-msgid "debug_end_function: some blocks were not closed"
-msgstr "debug_end_function: niektor bloky neboli uzavret"
-
-#: debug.c:899
-msgid "debug_start_block: no current block"
-msgstr "debug_start_block: iadny sasn blok"
-
-#: debug.c:935
-msgid "debug_end_block: no current block"
-msgstr "debug_end_block: iadny sasn blok"
-
-#: debug.c:942
-msgid "debug_end_block: attempt to close top level block"
-msgstr "debug_end_block: pokus o zatvorenie bloku najvyej rovne"
-
-#: debug.c:965
-msgid "debug_record_line: no current unit"
-msgstr "debug_record_line: iadna sasn jednotka"
-
-#. FIXME
-#: debug.c:1018
-msgid "debug_start_common_block: not implemented"
-msgstr "debug_start_common_block: nie je implementovan"
-
-#. FIXME
-#: debug.c:1029
-msgid "debug_end_common_block: not implemented"
-msgstr "debug_end_common_block: nie je implementovan"
-
-#. FIXME.
-#: debug.c:1113
-msgid "debug_record_label: not implemented"
-msgstr "debug_record_label: nie je implementovan"
-
-#: debug.c:1135
-msgid "debug_record_variable: no current file"
-msgstr "debug_record_variable: iadny sasn sbor"
-
-#: debug.c:1663
-msgid "debug_make_undefined_type: unsupported kind"
-msgstr "debug_make_undefined_type: nepodporovan druh"
-
-#: debug.c:1840
-msgid "debug_name_type: no current file"
-msgstr "debug_name_type: iadny sasn sbor"
-
-#: debug.c:1885
-msgid "debug_tag_type: no current file"
-msgstr "debug_tag_type: iadny sasn sbor"
-
-#: debug.c:1893
-msgid "debug_tag_type: extra tag attempted"
-msgstr "debug_tag_type: pokus o extra tag"
-
-#: debug.c:1930
-#, c-format
-msgid "Warning: changing type size from %d to %d\n"
-msgstr "Upozornenie: men sa vekos typu z %d na %d\n"
-
-#: debug.c:1952
-msgid "debug_find_named_type: no current compilation unit"
-msgstr "debug_find_named_type: iadna sasn kompilan jednotka"
-
-#: debug.c:2055
-#, c-format
-msgid "debug_get_real_type: circular debug information for %s\n"
-msgstr "debug_get_real_type: cyklick ladiaca informcia pre %s\n"
-
-#: debug.c:2482
-msgid "debug_write_type: illegal type encountered"
-msgstr "debug_write_type: objaven neplatn typ"
-
-#: dlltool.c:797 dlltool.c:823 dlltool.c:854
-#, c-format
-msgid "Internal error: Unknown machine type: %d"
-msgstr "Vntorn chyba: Neznmy typ architektry: %d"
-
-#: dlltool.c:890
-#, c-format
-msgid "Can't open def file: %s"
-msgstr "Nemono otvori def sbor: %s"
-
-#: dlltool.c:895
-#, c-format
-msgid "Processing def file: %s"
-msgstr "Spracovva sa def sbor: %s"
-
-#: dlltool.c:899
-msgid "Processed def file"
-msgstr "def sbor spracovan"
-
-#: dlltool.c:923
-#, c-format
-msgid "Syntax error in def file %s:%d"
-msgstr "Syntaktick chyba v def sbore %s:%d"
-
-#: dlltool.c:958
-#, c-format
-msgid "%s: Path components stripped from image name, '%s'."
-msgstr "%s: Komponenty cesty boli odrezan z nzvu obrzka, %s."
-
-#: dlltool.c:967
-#, c-format
-msgid "NAME: %s base: %x"
-msgstr "NZOV: %s bza: %x"
-
-#: dlltool.c:970 dlltool.c:986
-msgid "Can't have LIBRARY and NAME"
-msgstr "Nemono ma KNINICU a NZOV"
-
-#: dlltool.c:983
-#, c-format
-msgid "LIBRARY: %s base: %x"
-msgstr "KNINICA: %s bza: %x"
-
-#: dlltool.c:1219 resrc.c:293
-#, c-format
-msgid "wait: %s"
-msgstr "aka: %s"
-
-#: dlltool.c:1224 dllwrap.c:410 resrc.c:298
-#, c-format
-msgid "subprocess got fatal signal %d"
-msgstr "podproces obdral fatlny sign %d"
-
-#: dlltool.c:1230 dllwrap.c:417 resrc.c:305
-#, c-format
-msgid "%s exited with status %d"
-msgstr "%s ukonen so stavom %d"
-
-#: dlltool.c:1261
-#, c-format
-msgid "Sucking in info from %s section in %s"
-msgstr "Naahuj sa informcie z %s sekcie v %s"
-
-#: dlltool.c:1386
-#, c-format
-msgid "Excluding symbol: %s"
-msgstr "Vynechva sa symbol: %s"
-
-#: dlltool.c:1475 dlltool.c:1486 nm.c:984 nm.c:995
-#, c-format
-msgid "%s: no symbols"
-msgstr "%s: iadne symboly"
-
-#. FIXME: we ought to read in and block out the base relocations.
-#: dlltool.c:1512
-#, c-format
-msgid "Done reading %s"
-msgstr "tanie %s ukonen"
-
-#: dlltool.c:1522
-#, c-format
-msgid "Unable to open object file: %s"
-msgstr "Nemono otvori objektov sbor: %s"
-
-#: dlltool.c:1525
-#, c-format
-msgid "Scanning object file %s"
-msgstr "Prebieha skenovanie objektovho sboru %s"
-
-#: dlltool.c:1540
-#, c-format
-msgid "Cannot produce mcore-elf dll from archive file: %s"
-msgstr "Nemono vytvori mcore-elf dll zo sboru archvu: %s"
-
-#: dlltool.c:1626
-msgid "Adding exports to output file"
-msgstr "Pridvanie exportov do vstupnho sboru"
-
-#: dlltool.c:1674
-msgid "Added exports to output file"
-msgstr "Exporty boli pridan do vstupnho sboru"
-
-#: dlltool.c:1813
-#, c-format
-msgid "Generating export file: %s"
-msgstr "Generuje sa sbor exportu: %s"
-
-#: dlltool.c:1818
-#, c-format
-msgid "Unable to open temporary assembler file: %s"
-msgstr "Nemono otvori doasn sbor assembleru: %s"
-
-#: dlltool.c:1821
-#, c-format
-msgid "Opened temporary file: %s"
-msgstr "Doasn sbor otvoren: %s"
-
-#: dlltool.c:2043
-msgid "Generated exports file"
-msgstr "Export sbor vygenerovan"
-
-#: dlltool.c:2251
-#, c-format
-msgid "bfd_open failed open stub file: %s"
-msgstr "bfd_open zlyhal pri otvran testovacieho sboru: %s"
-
-#: dlltool.c:2254
-#, c-format
-msgid "Creating stub file: %s"
-msgstr "Vytvram testovac sbor: %s"
-
-#: dlltool.c:2672
-#, c-format
-msgid "failed to open temporary head file: %s"
-msgstr "nepodarilo sa otvori doasn sbor hlaviky: %s"
-
-#: dlltool.c:2734
-#, c-format
-msgid "failed to open temporary tail file: %s"
-msgstr "nepodarilo sa otvori doasn sbor zptia: %s"
-
-#: dlltool.c:2809
-#, c-format
-msgid "Can't open .lib file: %s"
-msgstr "Nemono otvori .lib sbor: %s"
-
-#: dlltool.c:2812
-#, c-format
-msgid "Creating library file: %s"
-msgstr "Vytvra sa sbor kninice: %s"
-
-#: dlltool.c:2895 dlltool.c:2901
-#, c-format
-msgid "cannot delete %s: %s"
-msgstr "nemono odstrni %s:%s"
-
-#: dlltool.c:2906
-msgid "Created lib file"
-msgstr "lib sbor vytvoren"
-
-#: dlltool.c:2985
-#, c-format
-msgid "Warning, ignoring duplicate EXPORT %s %d,%d"
-msgstr "Upozornenie, ignoruje sa dupliktny EXPORT  %s %d,%d"
-
-#: dlltool.c:2991
-#, c-format
-msgid "Error, duplicate EXPORT with oridinals: %s"
-msgstr "Chyba, dupliktny EXPORT s ordinlami: %s"
-
-#: dlltool.c:3096
-msgid "Processing definitions"
-msgstr "Spracovvaj sa defincie"
-
-#: dlltool.c:3128
-msgid "Processed definitions"
-msgstr "Defincie spracovan"
-
-#. xgetext:c-format
-#: dlltool.c:3135 dllwrap.c:471
-#, c-format
-msgid "Usage %s <option(s)> <object-file(s)>\n"
-msgstr "Pouitie %s <vob(a/y)> <objektov-sbor(y)>\n"
-
-#. xgetext:c-format
-#: dlltool.c:3137
-#, c-format
-msgid "   -m --machine <machine>    Create as DLL for <machine>.  [default: %s]\n"
-msgstr "   -m --machine <architektra> Vytvori ako DLL pre <architektra>. [tandardne: %s]\n"
-
-#: dlltool.c:3138
-#, c-format
-msgid "        possible <machine>: arm[_interwork], i386, mcore[-elf]{-le|-be}, ppc, thumb\n"
-msgstr "        mon <architektra>: arm[_interwork], i386, mcore[-elf]{-le|-be}, ppc, thumb\n"
-
-#: dlltool.c:3139
-#, c-format
-msgid "   -e --output-exp <outname> Generate an export file.\n"
-msgstr "   -e --output-exp <vstupn_nzov> Vygenerova export sbor.\n"
-
-#: dlltool.c:3140
-#, c-format
-msgid "   -l --output-lib <outname> Generate an interface library.\n"
-msgstr "   -l --output-lib <vstupn_sbor> Vygenerova kninicu rozhrania.\n"
-
-#: dlltool.c:3141
-#, c-format
-msgid "   -a --add-indirect         Add dll indirects to export file.\n"
-msgstr "   -a --add-indirect Prida dll indirekty do export sboru.\n"
-
-#: dlltool.c:3142
-#, c-format
-msgid "   -D --dllname <name>       Name of input dll to put into interface lib.\n"
-msgstr "   -D --dllname <nzov> Nzov vstupnho dll pre vloenie do kninice rozhrania.\n"
-
-#: dlltool.c:3143
-#, c-format
-msgid "   -d --input-def <deffile>  Name of .def file to be read in.\n"
-msgstr "   -d --input-def <deffile> Nzov .def sboru, v ktorom sa m ita.\n"
-
-#: dlltool.c:3144
-#, c-format
-msgid "   -z --output-def <deffile> Name of .def file to be created.\n"
-msgstr "   -z --output-def <deffile> Nzov .def sboru, ktor sa m vytvori.\n"
-
-#: dlltool.c:3145
-#, c-format
-msgid "      --export-all-symbols   Export all symbols to .def\n"
-msgstr "      --export-all-symbols Exportova vetky symboly do .def\n"
-
-#: dlltool.c:3146
-#, c-format
-msgid "      --no-export-all-symbols  Only export listed symbols\n"
-msgstr "      --no-export-all-symbols Exportova iba uveden symboly\n"
-
-#: dlltool.c:3147
-#, c-format
-msgid "      --exclude-symbols <list> Don't export <list>\n"
-msgstr "      --exclude-symbols <zoznam> Neexportova <zoznam>\n"
-
-#: dlltool.c:3148
-#, c-format
-msgid "      --no-default-excludes  Clear default exclude symbols\n"
-msgstr "      --no-default-excludes Vyisti tandardn exclude symboly\n"
-
-#: dlltool.c:3149
-#, c-format
-msgid "   -b --base-file <basefile> Read linker generated base file.\n"
-msgstr "   -b --base-file <bzov_sbor> ta linkerom vygenerovan bzov sbor.\n"
-
-#: dlltool.c:3150
-#, c-format
-msgid "   -x --no-idata4            Don't generate idata$4 section.\n"
-msgstr "   -x --no-idata4 Negenerova idata$4 sekciu.\n"
-
-#: dlltool.c:3151
-#, c-format
-msgid "   -c --no-idata5            Don't generate idata$5 section.\n"
-msgstr "   -c --no-idata5 Negenerova idata$5 sekciu.\n"
-
-#: dlltool.c:3152
-#, c-format
-msgid "   -U --add-underscore       Add underscores to all symbols in interface library.\n"
-msgstr "   -U --add-underscore       Prid znak podiarknutia ku vetkm symbolom kninice rozhrania.\n"
-
-#: dlltool.c:3153
-#, c-format
-msgid "      --add-stdcall-underscore Add underscores to stdcall symbols in interface library.\n"
-msgstr "      --add-stdcall-underscore Prid znak podiarknutia ku vetkm symbolom stdcall kninice rozhrania.\n"
-
-#: dlltool.c:3154
-#, c-format
-msgid "   -k --kill-at              Kill @<n> from exported names.\n"
-msgstr "   -k --kill-at Ukoni @<n> z exportovanch nzvov.\n"
-
-#: dlltool.c:3155
-#, c-format
-msgid "   -A --add-stdcall-alias    Add aliases without @<n>.\n"
-msgstr "   -A --add-stdcall-alias Prida aliasy bez @<n>.\n"
-
-#: dlltool.c:3156
-#, c-format
-msgid "   -p --ext-prefix-alias <prefix> Add aliases with <prefix>.\n"
-msgstr "   -p --ext-prefix-alias <prefix> Prida aliasy s <prefix>om.\n"
-
-#: dlltool.c:3157
-#, c-format
-msgid "   -S --as <name>            Use <name> for assembler.\n"
-msgstr "   -S --as <nzov> Poui <nzov> pre assembler.\n"
-
-#: dlltool.c:3158
-#, c-format
-msgid "   -f --as-flags <flags>     Pass <flags> to the assembler.\n"
-msgstr "   -f --as-flags <prznaky> Posla <prznaky> do assembleru.\n"
-
-#: dlltool.c:3159
-#, c-format
-msgid "   -C --compat-implib        Create backward compatible import library.\n"
-msgstr "   -C --compat-implib Vytvori sptne kompatibiln importovaciu kninicu.\n"
-
-#: dlltool.c:3160
-#, c-format
-msgid "   -n --no-delete            Keep temp files (repeat for extra preservation).\n"
-msgstr "   -n --no-delete Ponecha doasn sbory (opakova pre extra zachovanie)\n"
-
-#: dlltool.c:3161
-#, c-format
-msgid "   -t --temp-prefix <prefix> Use <prefix> to construct temp file names.\n"
-msgstr "   -t --temp-prefix <prefix> Poui <prefix> pre vytvorenie nzvov doasnch sborov.\n"
-
-#: dlltool.c:3162
-#, c-format
-msgid "   -v --verbose              Be verbose.\n"
-msgstr "   -v --verbose Pln vpis.\n"
-
-#: dlltool.c:3163
-#, c-format
-msgid "   -V --version              Display the program version.\n"
-msgstr "   -V --version Zobrazi verziu programu.\n"
-
-#: dlltool.c:3164
-#, c-format
-msgid "   -h --help                 Display this information.\n"
-msgstr "   -h --help Zobrazi tto informciu.\n"
-
-#: dlltool.c:3165
-#, c-format
-msgid "   @<file>                   Read options from <file>.\n"
-msgstr "   @<file> ta voby z <file>.\n"
-
-#: dlltool.c:3167
-#, c-format
-msgid "   -M --mcore-elf <outname>  Process mcore-elf object files into <outname>.\n"
-msgstr "   -M --mcore-olf <vstupn_nzov> Spracova objektov sbory mcore-elf do <vstupnho_nzvu>.\n"
-
-#: dlltool.c:3168
-#, c-format
-msgid "   -L --linker <name>        Use <name> as the linker.\n"
-msgstr "   -L --linker <nzov> Poui <nzov> ako linker.\n"
-
-#: dlltool.c:3169
-#, c-format
-msgid "   -F --linker-flags <flags> Pass <flags> to the linker.\n"
-msgstr "   -F --linker-flags <prznaky> Posla <prznaky> do linkera.\n"
-
-#: dlltool.c:3292
-#, c-format
-msgid "Path components stripped from dllname, '%s'."
-msgstr "Komponenty cesty odrezan z dllname, %s."
-
-#: dlltool.c:3337
-#, c-format
-msgid "Unable to open base-file: %s"
-msgstr "Nemono otvori bzov-sbor: %s"
-
-#: dlltool.c:3369
-#, c-format
-msgid "Machine '%s' not supported"
-msgstr "Nepodporovan architektra %s"
-
-#: dlltool.c:3473 dllwrap.c:201
-#, c-format
-msgid "Tried file: %s"
-msgstr "Pokus o sbor: %s"
-
-#: dlltool.c:3480 dllwrap.c:208
-#, c-format
-msgid "Using file: %s"
-msgstr "Pouva sa sbor: %s"
-
-#: dllwrap.c:291
-#, c-format
-msgid "Keeping temporary base file %s"
-msgstr "Ponechva sa doasnho bzovho sboru: %s"
-
-#: dllwrap.c:293
-#, c-format
-msgid "Deleting temporary base file %s"
-msgstr "Odstrauje sa doasn bzov sbor %s"
-
-#: dllwrap.c:307
-#, c-format
-msgid "Keeping temporary exp file %s"
-msgstr "Ponechva sa doasn exp sbor %s"
-
-#: dllwrap.c:309
-#, c-format
-msgid "Deleting temporary exp file %s"
-msgstr "Odstrauje sa doasn exp sbor %s"
-
-#: dllwrap.c:322
-#, c-format
-msgid "Keeping temporary def file %s"
-msgstr "Ponechva sa doasn def sbor %s"
-
-#: dllwrap.c:324
-#, c-format
-msgid "Deleting temporary def file %s"
-msgstr "Odstrauje sa doasn def sbor %s"
-
-#: dllwrap.c:472
-#, c-format
-msgid "  Generic options:\n"
-msgstr "  Druhov voby:\n"
-
-#: dllwrap.c:473
-#, c-format
-msgid "   @<file>                Read options from <file>\n"
-msgstr "   @<file> ta voby z <file>\n"
-
-#: dllwrap.c:474
-#, c-format
-msgid "   --quiet, -q            Work quietly\n"
-msgstr "   --quiet, -q Pracova potichu\n"
-
-#: dllwrap.c:475
-#, c-format
-msgid "   --verbose, -v          Verbose\n"
-msgstr "   --verbose, -v Pln vpis\n"
-
-#: dllwrap.c:476
-#, c-format
-msgid "   --version              Print dllwrap version\n"
-msgstr "   --version Vypsa dllwrap verziu\n"
-
-#: dllwrap.c:477
-#, c-format
-msgid "   --implib <outname>     Synonym for --output-lib\n"
-msgstr "   --implib <vstupn_nzov> Synonymum pre --output-lib\n"
-
-#: dllwrap.c:478
-#, c-format
-msgid "  Options for %s:\n"
-msgstr "  Voby pre %s:\n"
-
-#: dllwrap.c:479
-#, c-format
-msgid "   --driver-name <driver> Defaults to \"gcc\"\n"
-msgstr "   --driver-name <ovlda> tandardn je gcc\n"
-
-#: dllwrap.c:480
-#, c-format
-msgid "   --driver-flags <flags> Override default ld flags\n"
-msgstr "   --driver-flags <prznaky> Preai tandardn ld prznaky\n"
-
-#: dllwrap.c:481
-#, c-format
-msgid "   --dlltool-name <dlltool> Defaults to \"dlltool\"\n"
-msgstr "   --dlltool-name <dlltool> tandarne dlltool\n"
-
-#: dllwrap.c:482
-#, c-format
-msgid "   --entry <entry>        Specify alternate DLL entry point\n"
-msgstr "   --entry <poloka> Uri alternatvne miesto DLL poloky\n"
-
-#: dllwrap.c:483
-#, c-format
-msgid "   --image-base <base>    Specify image base address\n"
-msgstr "   --image-base <bza> Uri bzov adresu obrzku\n"
-
-#: dllwrap.c:484
-#, c-format
-msgid "   --target <machine>     i386-cygwin32 or i386-mingw32\n"
-msgstr "   --target <architektra> i386-cygwin32 alebo i386-mingw32\n"
-
-#: dllwrap.c:485
-#, c-format
-msgid "   --dry-run              Show what needs to be run\n"
-msgstr "   --dry-run Zobrazi, o treba spusti\n"
-
-#: dllwrap.c:486
-#, c-format
-msgid "   --mno-cygwin           Create Mingw DLL\n"
-msgstr "   --mno-cygwin Vytvori Mingw DLL\n"
-
-#: dllwrap.c:487
-#, c-format
-msgid "  Options passed to DLLTOOL:\n"
-msgstr "  Voby posielan do DLLTOOL:\n"
-
-#: dllwrap.c:488
-#, c-format
-msgid "   --machine <machine>\n"
-msgstr "   --machine <architektra>\n"
-
-#: dllwrap.c:489
-#, c-format
-msgid "   --output-exp <outname> Generate export file.\n"
-msgstr "   --output-exp <vstupn_nzov> Vygenerova export sbor.\n"
-
-#: dllwrap.c:490
-#, c-format
-msgid "   --output-lib <outname> Generate input library.\n"
-msgstr "   --output-lib <vstupn_nzov> Vygenerova vstupn kninicu.\n"
-
-#: dllwrap.c:491
-#, c-format
-msgid "   --add-indirect         Add dll indirects to export file.\n"
-msgstr "   --add-indirect Prida dll indirekty do export sboru.\n"
-
-#: dllwrap.c:492
-#, c-format
-msgid "   --dllname <name>       Name of input dll to put into output lib.\n"
-msgstr "   --dllname <nzov> Nzov vstupnej dll pre vloenie do vstupnej kninice.\n"
-
-#: dllwrap.c:493
-#, c-format
-msgid "   --def <deffile>        Name input .def file\n"
-msgstr "   --def <deffile>Nzov vstupnho .def sboru\n"
-
-#: dllwrap.c:494
-#, c-format
-msgid "   --output-def <deffile> Name output .def file\n"
-msgstr "   --output-def <deffile> Nzov vstupnho .def sboru\n"
-
-#: dllwrap.c:495
-#, c-format
-msgid "   --export-all-symbols     Export all symbols to .def\n"
-msgstr "   --export-all-symbols Exportova vetky symboly do .def\n"
-
-#: dllwrap.c:496
-#, c-format
-msgid "   --no-export-all-symbols  Only export .drectve symbols\n"
-msgstr "   --no-export-all-symbols Exportova iba .drectve symboly\n"
-
-#: dllwrap.c:497
-#, c-format
-msgid "   --exclude-symbols <list> Exclude <list> from .def\n"
-msgstr "   --exclude-symbols <zoznam> Vynecha <zoznam> z .def\n"
-
-#: dllwrap.c:498
-#, c-format
-msgid "   --no-default-excludes    Zap default exclude symbols\n"
-msgstr "   --no-default-excludes Vymaza tandardn exclude symboly\n"
-
-#: dllwrap.c:499
-#, c-format
-msgid "   --base-file <basefile> Read linker generated base file\n"
-msgstr "   --base-file <bzov_sbor> ta linkerom vygenerovan bzov sbor\n"
-
-#: dllwrap.c:500
-#, c-format
-msgid "   --no-idata4           Don't generate idata$4 section\n"
-msgstr "   --no-idata4 Negenerova idata$4 sekciu\n"
-
-#: dllwrap.c:501
-#, c-format
-msgid "   --no-idata5           Don't generate idata$5 section\n"
-msgstr "   --no-idata5 Negenerova idata$5 sekciu\n"
-
-#: dllwrap.c:502
-#, c-format
-msgid "   -U                     Add underscores to .lib\n"
-msgstr "   -U Prida podtrnky do .lib\n"
-
-#: dllwrap.c:503
-#, c-format
-msgid "   -k                     Kill @<n> from exported names\n"
-msgstr "   -k Ukoni @<n> z exportovanch nzvov\n"
-
-#: dllwrap.c:504
-#, c-format
-msgid "   --add-stdcall-alias    Add aliases without @<n>\n"
-msgstr "   --add-atdcall-alias Prida aliasy bez @<n>\n"
-
-#: dllwrap.c:505
-#, c-format
-msgid "   --as <name>            Use <name> for assembler\n"
-msgstr "   --as <nzov> Poui <nzov> pre assembler\n"
-
-#: dllwrap.c:506
-#, c-format
-msgid "   --nodelete             Keep temp files.\n"
-msgstr "   --nodelete Ponecha doasn sbory.\n"
-
-#: dllwrap.c:507
-#, c-format
-msgid "  Rest are passed unmodified to the language driver\n"
-msgstr "  Zbytok je poslan nezmenen ovladau jazyka\n"
-
-#: dllwrap.c:781
-msgid "Must provide at least one of -o or --dllname options"
-msgstr "Je nutn uvies najmenej jednu z volieb -o alebo --dllname"
-
-#: dllwrap.c:810
-msgid ""
-"no export definition file provided.\n"
-"Creating one, but that may not be what you want"
-msgstr ""
-"nebol poskytnut definin export sbor.\n"
-"Jeden sa vytvra, ale nemus to by to, o chcete"
-
-#: dllwrap.c:969
-#, c-format
-msgid "DLLTOOL name    : %s\n"
-msgstr "DLLTOOL nzov : %s\n"
-
-#: dllwrap.c:970
-#, c-format
-msgid "DLLTOOL options : %s\n"
-msgstr "DLLTOOL voby : %s\n"
-
-#: dllwrap.c:971
-#, c-format
-msgid "DRIVER name     : %s\n"
-msgstr "DRIVER nzov: %s\n"
-
-#: dllwrap.c:972
-#, c-format
-msgid "DRIVER options  : %s\n"
-msgstr "DRIVER voby : %s\n"
-
-#: dwarf.c:93 dwarf.c:137 readelf.c:377 readelf.c:570
-#, c-format
-msgid "Unhandled data length: %d\n"
-msgstr "Nespracovaten dka dt %d\n"
-
-#: dwarf.c:237
-msgid "badly formed extended line op encountered!\n"
-msgstr "narazilo sa na zle formovan rozren opertor riadku\n"
-
-#: dwarf.c:244
-#, c-format
-msgid "  Extended opcode %d: "
-msgstr "  Rozren opkd %d: "
-
-#: dwarf.c:249
-#, c-format
-msgid ""
-"End of Sequence\n"
-"\n"
-msgstr ""
-"Koniec sekvencie\n"
-"\n"
-
-#: dwarf.c:255
-#, c-format
-msgid "set Address to 0x%lx\n"
-msgstr "nastavi Adresu na 0x%lx\n"
-
-#: dwarf.c:260
-#, c-format
-msgid "  define new File Table entry\n"
-msgstr "  definova nov poloku Tabuky sboru\n"
-
-#: dwarf.c:261 dwarf.c:1928
-#, c-format
-msgid "  Entry\tDir\tTime\tSize\tName\n"
-msgstr "  Poloka\tAdresr\tas\tVekos\tNzov\n"
-
-#: dwarf.c:263
-#, c-format
-msgid "   %d\t"
-msgstr "   %d\t"
-
-#: dwarf.c:266 dwarf.c:268 dwarf.c:270 dwarf.c:1940 dwarf.c:1942 dwarf.c:1944
-#, c-format
-msgid "%lu\t"
-msgstr "%lu\t"
-
-#: dwarf.c:271
-#, c-format
-msgid ""
-"%s\n"
-"\n"
-msgstr ""
-"%s\n"
-"\n"
-
-#: dwarf.c:275
-#, c-format
-msgid "UNKNOWN: length %d\n"
-msgstr "UNKNOWN: dka %d\n"
-
-#: dwarf.c:288
-msgid "<no .debug_str section>"
-msgstr "<iadna .debug_str sekcia>"
-
-#: dwarf.c:294
-#, c-format
-msgid "DW_FORM_strp offset too big: %lx\n"
-msgstr "DW_FORM_strp offset privek: %lx\n"
-
-#: dwarf.c:295
-msgid "<offset is too big>"
-msgstr "<offset je privek>"
-
-#: dwarf.c:528
-#, c-format
-msgid "Unknown TAG value: %lx"
-msgstr "Neznma TAG hodnota: %lx"
-
-#: dwarf.c:564
-#, c-format
-msgid "Unknown FORM value: %lx"
-msgstr "Neznma FORM hodnota: %lx"
-
-#: dwarf.c:573
-#, c-format
-msgid " %lu byte block: "
-msgstr " %lu bajtov blok: "
-
-#: dwarf.c:910
-#, c-format
-msgid "(User defined location op)"
-msgstr "(Uvateom definovan opertor umiestnenia)"
-
-#: dwarf.c:912
-#, c-format
-msgid "(Unknown location op)"
-msgstr "(Neznmy opertor umiestnenia)"
-
-#: dwarf.c:958
-msgid "Internal error: DWARF version is not 2 or 3.\n"
-msgstr "Vntorn chyba: DWARF verzia nie je 2 ani 3.\n"
-
-#: dwarf.c:1056
-msgid "DW_FORM_data8 is unsupported when sizeof (unsigned long) != 8\n"
-msgstr "DW_FORM_data8 nie je podporovan ke sizeof (unsigned long) != 8\n"
-
-#: dwarf.c:1105
-#, c-format
-msgid " (indirect string, offset: 0x%lx): %s"
-msgstr " (nepriamy reazec, offset: 0x%lx): %s"
-
-#: dwarf.c:1114
-#, c-format
-msgid "Unrecognized form: %lu\n"
-msgstr "Nerozoznan forma: %lu\n"
-
-#: dwarf.c:1199
-#, c-format
-msgid "(not inlined)"
-msgstr "(ako inline)"
-
-#: dwarf.c:1202
-#, c-format
-msgid "(inlined)"
-msgstr "(nie ako inline)"
-
-#: dwarf.c:1205
-#, c-format
-msgid "(declared as inline but ignored)"
-msgstr "(deklarovan ako inline, ale ignorovan)"
-
-#: dwarf.c:1208
-#, c-format
-msgid "(declared as inline and inlined)"
-msgstr "(deklarovan ako inline a je inline)"
-
-#: dwarf.c:1211
-#, c-format
-msgid "  (Unknown inline attribute value: %lx)"
-msgstr "  (Neznma hodnota inline atribtu: %lx)"
-
-#: dwarf.c:1368 dwarf.c:2462
-#, c-format
-msgid " [without DW_AT_frame_base]"
-msgstr " [bez DW_AT_frame_base]"
-
-#: dwarf.c:1371
-#, c-format
-msgid "(location list)"
-msgstr "(zoznam umiestnen)"
-
-#: dwarf.c:1489
-#, c-format
-msgid "Unknown AT value: %lx"
-msgstr "Neznma AT hodnota: %lx"
-
-#: dwarf.c:1558
-#, c-format
-msgid "No comp units in %s section ?"
-msgstr "iadne vpotov jednotky v sekcii %s ?"
-
-#: dwarf.c:1567
-#, c-format
-msgid "Not enough memory for a debug info array of %u entries"
-msgstr "Nedostatok pamte pre ladiace info pole %u poloiek"
-
-#: dwarf.c:1575 dwarf.c:2550
-#, c-format
-msgid ""
-"The section %s contains:\n"
-"\n"
-msgstr ""
-"Sekcia %s obsahuje:\n"
-"\n"
-
-#: dwarf.c:1583
-#, c-format
-msgid "Unable to locate %s section!\n"
-msgstr "Nemono njs sekciu %s!\n"
-
-#: dwarf.c:1646
-#, c-format
-msgid "  Compilation Unit @ offset 0x%lx:\n"
-msgstr "  Kompilan Jednotka @ offset 0x%lx:\n"
-
-#: dwarf.c:1647
-#, c-format
-msgid "   Length:        %ld\n"
-msgstr "   Dka: %ld\n"
-
-#: dwarf.c:1648
-#, c-format
-msgid "   Version:       %d\n"
-msgstr "   Verzia: %d\n"
-
-#: dwarf.c:1649
-#, c-format
-msgid "   Abbrev Offset: %ld\n"
-msgstr "   Offset skratky: %ld\n"
-
-#: dwarf.c:1650
-#, c-format
-msgid "   Pointer Size:  %d\n"
-msgstr "   Vekos ukazovatea: %d\n"
-
-#: dwarf.c:1656
-#, c-format
-msgid "Debug info is corrupted, length is invalid (section is %lu bytes)\n"
-msgstr ""
-
-#: dwarf.c:1665
-msgid "Only version 2 and 3 DWARF debug information is currently supported.\n"
-msgstr "Momentlne s podporovan iba vezie 2 a 3 ladiacej informcie DWARF.\n"
-
-#: dwarf.c:1674
-#, c-format
-msgid "Debug info is corrupted, abbrev offset is invalid (section is %lu bytes)\n"
-msgstr ""
-
-#: dwarf.c:1702
-#, c-format
-msgid " <%d><%lx>: Abbrev Number: %lu"
-msgstr " <%d><%lx>: skrt. slo: %lu"
-
-#: dwarf.c:1722
-#, c-format
-msgid "Unable to locate entry %lu in the abbreviation table\n"
-msgstr "Nemono njs poloku %lu v tabuke skratiek\n"
-
-#: dwarf.c:1728
-#, c-format
-msgid " (%s)\n"
-msgstr " (%s)\n"
-
-#: dwarf.c:1813
-#, c-format
-msgid ""
-"\n"
-"Dump of debug contents of section %s:\n"
-"\n"
-msgstr ""
-"\n"
-"Vpis obsahu ladenia sekcie %s:\n"
-"\n"
-
-#: dwarf.c:1851
-msgid "The line info appears to be corrupt - the section is too small\n"
-msgstr "Informcia o riadku je pravdepodobne pokoden - sekcia je prli krtka\n"
-
-#: dwarf.c:1860
-msgid "Only DWARF version 2 and 3 line info is currently supported.\n"
-msgstr "Momentlne je podporovan iba riadkov informcia DWARF verzie 2 a 3.\n"
-
-#: dwarf.c:1881
-#, c-format
-msgid "  Length:                      %ld\n"
-msgstr "  Dka: %ld\n"
-
-#: dwarf.c:1882
-#, c-format
-msgid "  DWARF Version:               %d\n"
-msgstr "  DWARF Verzia: %d\n"
-
-#: dwarf.c:1883
-#, c-format
-msgid "  Prologue Length:             %d\n"
-msgstr "  Dka prolgu: %d\n"
-
-#: dwarf.c:1884
-#, c-format
-msgid "  Minimum Instruction Length:  %d\n"
-msgstr "  Minimlna dka intrukcie: %d\n"
-
-#: dwarf.c:1885
-#, c-format
-msgid "  Initial value of 'is_stmt':  %d\n"
-msgstr "  Poiaton hodnota 'is_stmt': %d\n"
-
-#: dwarf.c:1886
-#, c-format
-msgid "  Line Base:                   %d\n"
-msgstr "  Bza riadku: %d\n"
-
-#: dwarf.c:1887
-#, c-format
-msgid "  Line Range:                  %d\n"
-msgstr "  Rozsah riadku: %d\n"
-
-#: dwarf.c:1888
-#, c-format
-msgid "  Opcode Base:                 %d\n"
-msgstr "  Opcode bza: %d\n"
-
-#: dwarf.c:1897
-#, c-format
-msgid ""
-"\n"
-" Opcodes:\n"
-msgstr ""
-"\n"
-" Opcody:\n"
-
-#: dwarf.c:1900
-#, c-format
-msgid "  Opcode %d has %d args\n"
-msgstr "  Opcode %d m %d argumentov\n"
-
-#: dwarf.c:1906
-#, c-format
-msgid ""
-"\n"
-" The Directory Table is empty.\n"
-msgstr ""
-"\n"
-" Tabuka adresra je przdna.\n"
-
-#: dwarf.c:1909
-#, c-format
-msgid ""
-"\n"
-" The Directory Table:\n"
-msgstr ""
-"\n"
-" Tabuka adresra:\n"
-
-#: dwarf.c:1913
-#, c-format
-msgid "  %s\n"
-msgstr "  %s\n"
-
-#: dwarf.c:1924
-#, c-format
-msgid ""
-"\n"
-" The File Name Table is empty.\n"
-msgstr ""
-"\n"
-" Tabuka nzvov sborov je przdna.\n"
-
-#: dwarf.c:1927
-#, c-format
-msgid ""
-"\n"
-" The File Name Table:\n"
-msgstr ""
-"\n"
-" Tabuka nzvov sborov:\n"
-
-#: dwarf.c:1935
-#, c-format
-msgid "  %d\t"
-msgstr "  %d\t"
-
-#: dwarf.c:1946
-#, c-format
-msgid "%s\n"
-msgstr "%s\n"
-
-#. Now display the statements.
-#: dwarf.c:1954
-#, c-format
-msgid ""
-"\n"
-" Line Number Statements:\n"
-msgstr ""
-"\n"
-" Prkazy slovania riadkov:\n"
-
-#: dwarf.c:1970
-#, c-format
-msgid "  Special opcode %d: advance Address by %lu to 0x%lx"
-msgstr "  pecilny opcode %d: posun Adresu o %lu do 0x%lx"
-
-#: dwarf.c:1974
-#, c-format
-msgid " and Line by %d to %d\n"
-msgstr " a Riadok o %d do %d\n"
-
-#: dwarf.c:1984
-#, c-format
-msgid "  Copy\n"
-msgstr "  Koprova\n"
-
-#: dwarf.c:1992
-#, c-format
-msgid "  Advance PC by %lu to 0x%lx\n"
-msgstr "  Posun PC o %lu do 0x%lx\n"
-
-#: dwarf.c:2000
-#, c-format
-msgid "  Advance Line by %d to %d\n"
-msgstr "  Posun Riadok o %d do %d\n"
-
-#: dwarf.c:2007
-#, c-format
-msgid "  Set File Name to entry %d in the File Name Table\n"
-msgstr "  Nastavi Nzov sboru na poloku %d v Tabuke nzvov sborov\n"
-
-#: dwarf.c:2015
-#, c-format
-msgid "  Set column to %lu\n"
-msgstr "  Nastavi stpec na %lu\n"
-
-#: dwarf.c:2022
-#, c-format
-msgid "  Set is_stmt to %d\n"
-msgstr "  Nastavi is_stmt na %d\n"
-
-#: dwarf.c:2027
-#, c-format
-msgid "  Set basic block\n"
-msgstr "  Nastavi zkladn blok\n"
-
-#: dwarf.c:2035
-#, c-format
-msgid "  Advance PC by constant %lu to 0x%lx\n"
-msgstr "  Posun PC o kontantu %lu na 0x%lx\n"
-
-#: dwarf.c:2043
-#, c-format
-msgid "  Advance PC by fixed size amount %lu to 0x%lx\n"
-msgstr "  Posun PC o mnostvo fixnej dky %lu na 0x%lx\n"
-
-#: dwarf.c:2048
-#, c-format
-msgid "  Set prologue_end to true\n"
-msgstr "  Nastavi prologue_end na true\n"
-
-#: dwarf.c:2052
-#, c-format
-msgid "  Set epilogue_begin to true\n"
-msgstr "  Set_epilogue_begin na true\n"
-
-#: dwarf.c:2058
-#, c-format
-msgid "  Set ISA to %lu\n"
-msgstr "  Nastavi ISA na %lu\n"
-
-#: dwarf.c:2062
-#, c-format
-msgid "  Unknown opcode %d with operands: "
-msgstr "  Neznmy kd opercie %d s operandami: "
-
-#: dwarf.c:2088 dwarf.c:2174 dwarf.c:2248 dwarf.c:2360 dwarf.c:2492
-#: dwarf.c:2731
-#, c-format
-msgid ""
-"Contents of the %s section:\n"
-"\n"
-msgstr ""
-"Obsah %s sekcie:\n"
-"\n"
-
-#: dwarf.c:2128
-msgid "Only DWARF 2 and 3 pubnames are currently supported\n"
-msgstr "Mometnlne s podporovan iba verejn men DWARF 2 a 3\n"
-
-#: dwarf.c:2135
-#, c-format
-msgid "  Length:                              %ld\n"
-msgstr "  Dka: %ld\n"
-
-#: dwarf.c:2137
-#, c-format
-msgid "  Version:                             %d\n"
-msgstr "  Verzia: %d\n"
-
-#: dwarf.c:2139
-#, c-format
-msgid "  Offset into .debug_info section:     %ld\n"
-msgstr "  Offset do sekcie .debug_info: %ld\n"
-
-#: dwarf.c:2141
-#, c-format
-msgid "  Size of area in .debug_info section: %ld\n"
-msgstr "  Vekos oblasti v sekcii .debug_info: %ld\n"
-
-#: dwarf.c:2144
-#, c-format
-msgid ""
-"\n"
-"    Offset\tName\n"
-msgstr ""
-"\n"
-"    Offset\tNzov\n"
-
-#: dwarf.c:2195
-#, c-format
-msgid " DW_MACINFO_start_file - lineno: %d filenum: %d\n"
-msgstr " DW_MACINFO_start_file - fileno: %d filenum: %d\n"
-
-#: dwarf.c:2201
-#, c-format
-msgid " DW_MACINFO_end_file\n"
-msgstr " DW_MACINFO_end_file\n"
-
-#: dwarf.c:2209
-#, c-format
-msgid " DW_MACINFO_define - lineno : %d macro : %s\n"
-msgstr " DW_MACINFO_define : %d makro : %s\n"
-
-#: dwarf.c:2218
-#, c-format
-msgid " DW_MACINFO_undef - lineno : %d macro : %s\n"
-msgstr " DW_MACINFO_undef - lineno : %d makro : %s\n"
-
-#: dwarf.c:2230
-#, c-format
-msgid " DW_MACINFO_vendor_ext - constant : %d string : %s\n"
-msgstr " DW_MACINFO_vendor_ext - kontanta : %d reazec : %s\n"
-
-#: dwarf.c:2259
-#, c-format
-msgid "  Number TAG\n"
-msgstr "  slo TAGu\n"
-
-#: dwarf.c:2265
-#, c-format
-msgid "   %ld      %s    [%s]\n"
-msgstr "   %ld %s [%s]\n"
-
-#: dwarf.c:2268
-msgid "has children"
-msgstr "m potomkov"
-
-#: dwarf.c:2268
-msgid "no children"
-msgstr "iadny potomkovia"
-
-#: dwarf.c:2271
-#, c-format
-msgid "    %-18s %s\n"
-msgstr "    %-18s %s\n"
-
-#: dwarf.c:2304 dwarf.c:2488 dwarf.c:2675
-#, c-format
-msgid ""
-"\n"
-"The %s section is empty.\n"
-msgstr ""
-"\n"
-"%s sekcia je przdna.\n"
-
-#. FIXME: Should we handle this case?
-#: dwarf.c:2349
-msgid "Location lists in .debug_info section aren't in ascending order!\n"
-msgstr "Zoznamy umiesten v sekcii .debug_info nie s v vzostupnom porad!\n"
-
-#: dwarf.c:2352
-msgid "No location lists in .debug_info section!\n"
-msgstr "iadne zoznamy umiesten v sekcii .debug_info!\n"
-
-#: dwarf.c:2357
-#, c-format
-msgid "Location lists in %s section start at 0x%lx\n"
-msgstr "Zoznamy umiestnenia v %s sekcii zanaj na 0x%lx\n"
-
-#: dwarf.c:2361
-#, c-format
-msgid "    Offset   Begin    End      Expression\n"
-msgstr "    Offset Begin End Vraz\n"
-
-#: dwarf.c:2392
-#, c-format
-msgid "There is a hole [0x%lx - 0x%lx] in .debug_loc section.\n"
-msgstr "Medzera [0x%lx - 0x%lx] v sekcii .debug_loc.\n"
-
-#: dwarf.c:2395
-#, c-format
-msgid "There is an overlap [0x%lx - 0x%lx] in .debug_loc section.\n"
-msgstr "Prekrytie [0x%lx - 0x%lx] v sekcii .debug_loc.\n"
-
-#: dwarf.c:2402
-#, c-format
-msgid "Offset 0x%lx is bigger than .debug_loc section size.\n"
-msgstr "Offset 0x%lx je v ne vekos sekcii .debug_loc.\n"
-
-#: dwarf.c:2411 dwarf.c:2438 dwarf.c:2448
-#, c-format
-msgid "Location list starting at offset 0x%lx is not terminated.\n"
-msgstr "Zoznam umiestnen zanajci na offsete 0x%lx nie je ukonen.\n"
-
-#: dwarf.c:2423 dwarf.c:2776
-#, c-format
-msgid "    %8.8lx <End of list>\n"
-msgstr "    %8.8lx <Koniec zoznamu>\n"
-
-#: dwarf.c:2431
-#, c-format
-msgid "    %8.8lx %8.8lx %8.8lx (base address)\n"
-msgstr "    %8.8lx %8.8lx %8.8lx (bzov adresa)\n"
-
-#: dwarf.c:2465 dwarf.c:2793
-msgid " (start == end)"
-msgstr " start == end)"
-
-#: dwarf.c:2467 dwarf.c:2795
-msgid " (start > end)"
-msgstr " (start > end)"
-
-#: dwarf.c:2596
-msgid "Only DWARF 2 and 3 aranges are currently supported.\n"
-msgstr "Aktulne s podporovan iba usporiadania DWARF 2 a 3.\n"
-
-#: dwarf.c:2600
-#, c-format
-msgid "  Length:                   %ld\n"
-msgstr "  Dka: %ld\n"
-
-#: dwarf.c:2601
-#, c-format
-msgid "  Version:                  %d\n"
-msgstr "  Verzia: %d\n"
-
-#: dwarf.c:2602
-#, c-format
-msgid "  Offset into .debug_info:  %lx\n"
-msgstr "  Offset do .debug_info: %lx\n"
-
-#: dwarf.c:2603
-#, c-format
-msgid "  Pointer Size:             %d\n"
-msgstr "  Vekos ukazovatea: %d\n"
-
-#: dwarf.c:2604
-#, c-format
-msgid "  Segment Size:             %d\n"
-msgstr "  Vekos segmentu: %d\n"
-
-#: dwarf.c:2613
-msgid "Pointer size + Segment size is not a power of two.\n"
-msgstr ""
-
-#: dwarf.c:2618
-#, c-format
-msgid ""
-"\n"
-"    Address            Length\n"
-msgstr ""
-
-#: dwarf.c:2620
-#, c-format
-msgid ""
-"\n"
-"    Address    Length\n"
-msgstr ""
-
-#. FIXME: Should we handle this case?
-#: dwarf.c:2720
-msgid "Range lists in .debug_info section aren't in ascending order!\n"
-msgstr "Zoznamy rozsahu v sekcii .debug_info nie s v vzostupnom porad!\n"
-
-#: dwarf.c:2723
-msgid "No range lists in .debug_info section!\n"
-msgstr "iadne zoznamy rozsahu v sekcii .debug_info!\n"
-
-#: dwarf.c:2728
-#, c-format
-msgid "Range lists in %s section start at 0x%lx\n"
-msgstr "Zoznamy rozsahu v sekcii %s zanaj na 0x%lx\n"
-
-#: dwarf.c:2732
-#, c-format
-msgid "    Offset   Begin    End\n"
-msgstr "    Offset Zaiatok Koniec\n"
-
-#: dwarf.c:2757
-#, c-format
-msgid "There is a hole [0x%lx - 0x%lx] in %s section.\n"
-msgstr "Medzera [0x%lx - 0x%lx] v sekcii %s.\n"
-
-#: dwarf.c:2761
-#, c-format
-msgid "There is an overlap [0x%lx - 0x%lx] in %s section.\n"
-msgstr "Prekrytie [0x%lx - 0x%lx] v sekcii %s.\n"
-
-#: dwarf.c:2963
-#, c-format
-msgid "The section %s contains:\n"
-msgstr "Sekcii %s obsahuje:\n"
-
-#: dwarf.c:3650
-#, c-format
-msgid "  DW_CFA_??? (User defined call frame op: %#x)\n"
-msgstr ""
-
-#: dwarf.c:3652
-#, c-format
-msgid "unsupported or unknown Dwarf Call Frame Instruction number: %#x\n"
-msgstr ""
-
-#: dwarf.c:3676
-#, c-format
-msgid "Displaying the debug contents of section %s is not yet supported.\n"
-msgstr "Zobrazenie obsahu ladenia sekcie %s nie je zatia podporovan.\n"
-
-#: dwarf.c:3718
-#, c-format
-msgid "%s: Error: "
-msgstr "%s: Chyba: "
-
-#: dwarf.c:3729
-#, c-format
-msgid "%s: Warning: "
-msgstr "%s: Upozornenie: "
-
-#: emul_aix.c:51
-#, c-format
-msgid "  [-g]         - 32 bit small archive\n"
-msgstr "  [-g] - 32 bitov mal archv\n"
-
-#: emul_aix.c:52
-#, c-format
-msgid "  [-X32]       - ignores 64 bit objects\n"
-msgstr "  [-X32] - ignoruje 64 bitov objekty\n"
-
-#: emul_aix.c:53
-#, c-format
-msgid "  [-X64]       - ignores 32 bit objects\n"
-msgstr "  [-X64] - ignoruje 32 bitov objekty\n"
-
-#: emul_aix.c:54
-#, c-format
-msgid "  [-X32_64]    - accepts 32 and 64 bit objects\n"
-msgstr "  [-X32_64] - akceptuje 32 a 64 bitov objekty\n"
-
-#: ieee.c:309
-msgid "unexpected end of debugging information"
-msgstr "neoakvan koniec ladiacej informcie"
-
-#: ieee.c:396
-msgid "invalid number"
-msgstr "neplatn slo"
-
-#: ieee.c:449
-msgid "invalid string length"
-msgstr "neplatn dka reazca"
-
-#: ieee.c:504 ieee.c:545
-msgid "expression stack overflow"
-msgstr "preteenie zsobnka vrazu"
-
-#: ieee.c:524
-msgid "unsupported IEEE expression operator"
-msgstr "nepodporovan IEEE opertor vrazu"
-
-#: ieee.c:539
-msgid "unknown section"
-msgstr "neznma sekcia"
-
-#: ieee.c:560
-msgid "expression stack underflow"
-msgstr "podteenie zsobnka vrazu"
-
-#: ieee.c:574
-msgid "expression stack mismatch"
-msgstr "nezhoda zsobnka vrazu"
-
-#: ieee.c:611
-msgid "unknown builtin type"
-msgstr "neznmy vstavan typ"
-
-#: ieee.c:756
-msgid "BCD float type not supported"
-msgstr "BCD float typ nie je podporovan"
-
-#: ieee.c:893
-msgid "unexpected number"
-msgstr "neoakvan slo"
-
-#: ieee.c:900
-msgid "unexpected record type"
-msgstr "neoakvan typ zznamu"
-
-#: ieee.c:933
-msgid "blocks left on stack at end"
-msgstr "na konci zsobnka s ponechan bloky"
-
-#: ieee.c:1196
-msgid "unknown BB type"
-msgstr "neznmy BB typ"
-
-#: ieee.c:1205
-msgid "stack overflow"
-msgstr "preteenia zsobnka"
-
-#: ieee.c:1228
-msgid "stack underflow"
-msgstr "podteenie zsobnka"
-
-#: ieee.c:1340 ieee.c:1410 ieee.c:2107
-msgid "illegal variable index"
-msgstr "neplatn index premennej"
-
-#: ieee.c:1388
-msgid "illegal type index"
-msgstr "neplatn typov index"
-
-#: ieee.c:1398 ieee.c:1435
-msgid "unknown TY code"
-msgstr "neznmy TY kd"
-
-#: ieee.c:1417
-msgid "undefined variable in TY"
-msgstr "nezadefinovan premenn v TY"
-
-#. Pascal file name.  FIXME.
-#: ieee.c:1828
-msgid "Pascal file name not supported"
-msgstr "Pascalovsk nzov sboru nie je podporovan"
-
-#: ieee.c:1876
-msgid "unsupported qualifier"
-msgstr "nepodporan kvalifiktor"
-
-#: ieee.c:2145
-msgid "undefined variable in ATN"
-msgstr "nezadefinovan premenn v ATN"
-
-#: ieee.c:2188
-msgid "unknown ATN type"
-msgstr "neznmy ATN typ"
-
-#. Reserved for FORTRAN common.
-#: ieee.c:2310
-msgid "unsupported ATN11"
-msgstr "nepodporovan ATN11"
-
-#. We have no way to record this information.  FIXME.
-#: ieee.c:2337
-msgid "unsupported ATN12"
-msgstr "nepodporovan ATN11"
-
-#: ieee.c:2397
-msgid "unexpected string in C++ misc"
-msgstr "neoakvan reazec v C++ misc"
-
-#: ieee.c:2410
-msgid "bad misc record"
-msgstr "nesprvny misc zznam"
-
-#: ieee.c:2451
-msgid "unrecognized C++ misc record"
-msgstr "nerozpoznan C++ misc zznam"
-
-#: ieee.c:2566
-msgid "undefined C++ object"
-msgstr "nezadefinovan C++ objekt"
-
-#: ieee.c:2600
-msgid "unrecognized C++ object spec"
-msgstr "nerozpoznan pecifikcia C++ objektu"
-
-#: ieee.c:2636
-msgid "unsupported C++ object type"
-msgstr "nepodporovan objektov typ C++"
-
-#: ieee.c:2646
-msgid "C++ base class not defined"
-msgstr "bzov trieda C++ nebola definovan"
-
-#: ieee.c:2658 ieee.c:2763
-msgid "C++ object has no fields"
-msgstr "C++ objekt nem iadne polia"
-
-#: ieee.c:2677
-msgid "C++ base class not found in container"
-msgstr "bzov trieda C++ nebola njden v kontajneri"
-
-#: ieee.c:2784
-msgid "C++ data member not found in container"
-msgstr "dtov len C++ nebol njden v kontajneri"
-
-#: ieee.c:2825 ieee.c:2975
-msgid "unknown C++ visibility"
-msgstr "neznma C++ viditenos"
-
-#: ieee.c:2859
-msgid "bad C++ field bit pos or size"
-msgstr "zl bitov pozcia alebo vekos C++ poa"
-
-#: ieee.c:2951
-msgid "bad type for C++ method function"
-msgstr "zl typ pre metdu funkcie C++"
-
-#: ieee.c:2961
-msgid "no type information for C++ method function"
-msgstr "iadna informcia o type pre metdu funkcie C++"
-
-#: ieee.c:3000
-msgid "C++ static virtual method"
-msgstr "statick virtulna metda C++"
-
-#: ieee.c:3095
-msgid "unrecognized C++ object overhead spec"
-msgstr "nerozpoznan horn pecifikcia C++ objektu"
-
-#: ieee.c:3134
-msgid "undefined C++ vtable"
-msgstr "nezadefinovan C++ vtable"
-
-#: ieee.c:3203
-msgid "C++ default values not in a function"
-msgstr "tandardn C++ hodnoty nie s vo funkcii"
-
-#: ieee.c:3243
-msgid "unrecognized C++ default type"
-msgstr "nerozpoznan tandardn typ C++"
-
-#: ieee.c:3274
-msgid "reference parameter is not a pointer"
-msgstr "referenn parameter nie je ukazovate"
-
-#: ieee.c:3357
-msgid "unrecognized C++ reference type"
-msgstr "nerozpoznan referenn typ C++"
-
-#: ieee.c:3439
-msgid "C++ reference not found"
-msgstr "C++ referencia nebola njden"
-
-#: ieee.c:3447
-msgid "C++ reference is not pointer"
-msgstr "C++ referencia nie je ukazovate"
-
-#: ieee.c:3473 ieee.c:3481
-msgid "missing required ASN"
-msgstr "chba poadovan ASN"
-
-#: ieee.c:3508 ieee.c:3516
-msgid "missing required ATN65"
-msgstr "chba poadovan ATN65"
-
-#: ieee.c:3530
-msgid "bad ATN65 record"
-msgstr "zl ATN65 zznam"
-
-#: ieee.c:4158
-#, c-format
-msgid "IEEE numeric overflow: 0x"
-msgstr "IEEE seln preteenie: 0x"
-
-#: ieee.c:4202
-#, c-format
-msgid "IEEE string length overflow: %u\n"
-msgstr "IEEE preteenie dky reazca: %u\n"
-
-#: ieee.c:5203
-#, c-format
-msgid "IEEE unsupported integer type size %u\n"
-msgstr "IEEE nepodporan vekos typu integer %u\n"
-
-#: ieee.c:5237
-#, c-format
-msgid "IEEE unsupported float type size %u\n"
-msgstr "IEEE nepodporovan vekos typu float %u\n"
-
-#: ieee.c:5271
-#, c-format
-msgid "IEEE unsupported complex type size %u\n"
-msgstr "IEEE nepodporovan vekos komplexnho typu %u\n"
-
-#: mclex.c:241
-msgid "Duplicate symbol entered into keyword list."
-msgstr ""
-
-#: nlmconv.c:271 srconv.c:1815
-msgid "input and output files must be different"
-msgstr "vstupn a vstupn sbory sa musia li"
-
-#: nlmconv.c:318
-msgid "input file named both on command line and with INPUT"
-msgstr "vstupn sbor bol pomenovan na prkazovom riadku a aj na VSTUPE"
-
-#: nlmconv.c:327
-msgid "no input file"
-msgstr "iadny vstupn sbor"
-
-#: nlmconv.c:357
-msgid "no name for output file"
-msgstr "iadny nzov pre vstupn sbor"
-
-#: nlmconv.c:371
-msgid "warning: input and output formats are not compatible"
-msgstr "upozornenie: vstupn a vstupn formty nie s kompatibiln"
-
-#: nlmconv.c:400
-msgid "make .bss section"
-msgstr "urobi .bss sekciu"
-
-#: nlmconv.c:409
-msgid "make .nlmsections section"
-msgstr "urobi .nlmsections sekciu"
-
-#: nlmconv.c:411
-msgid "set .nlmsections flags"
-msgstr "nastavi .nlmsections prznaky"
-
-#: nlmconv.c:439
-msgid "set .bss vma"
-msgstr "nastavi .bss vma"
-
-#: nlmconv.c:446
-msgid "set .data size"
-msgstr "nastavi .data vekos"
-
-#: nlmconv.c:626
-#, c-format
-msgid "warning: symbol %s imported but not in import list"
-msgstr "upozornenie: symbol %s importovan, ale nie je v importovacom zozname"
-
-#: nlmconv.c:646
-msgid "set start address"
-msgstr "nastavi poiaton adresu"
-
-#: nlmconv.c:695
-#, c-format
-msgid "warning: START procedure %s not defined"
-msgstr "upozornenie: nedefinovan START procedra %s"
-
-#: nlmconv.c:697
-#, c-format
-msgid "warning: EXIT procedure %s not defined"
-msgstr "upozornenie: nedefinovan EXIT procedra %s"
-
-#: nlmconv.c:699
-#, c-format
-msgid "warning: CHECK procedure %s not defined"
-msgstr "upozornenie: nedefinovan CHECK procedra %s"
-
-#: nlmconv.c:720 nlmconv.c:909
-msgid "custom section"
-msgstr "prispsoben sekcia"
-
-#: nlmconv.c:741 nlmconv.c:938
-msgid "help section"
-msgstr "sekcia pomoci"
-
-#: nlmconv.c:763 nlmconv.c:956
-msgid "message section"
-msgstr "sekcia sprv"
-
-#: nlmconv.c:779 nlmconv.c:989
-msgid "module section"
-msgstr "sekcia modulov"
-
-#: nlmconv.c:799 nlmconv.c:1005
-msgid "rpc section"
-msgstr "rpc sekcia"
-
-#. There is no place to record this information.
-#: nlmconv.c:835
-#, c-format
-msgid "%s: warning: shared libraries can not have uninitialized data"
-msgstr "%s: upozornenie: zdielan kninice nemu ma neinicializovan dta"
-
-#: nlmconv.c:856 nlmconv.c:1024
-msgid "shared section"
-msgstr "zdielan sekcia"
-
-#: nlmconv.c:864
-msgid "warning: No version number given"
-msgstr "upozornenie: Neuveden slo verzie"
-
-#: nlmconv.c:904 nlmconv.c:933 nlmconv.c:951 nlmconv.c:1000 nlmconv.c:1019
-#, c-format
-msgid "%s: read: %s"
-msgstr "%s: ta: %s"
-
-#: nlmconv.c:926
-msgid "warning: FULLMAP is not supported; try ld -M"
-msgstr "upozornenie: FULLMAP nie je podporan; skste ld -M"
-
-#: nlmconv.c:1102
-#, c-format
-msgid "Usage: %s [option(s)] [in-file [out-file]]\n"
-msgstr "Pouitie: %s [vob(a/y)] [vstupn sbor [vstupn sbor]]\n"
-
-#: nlmconv.c:1103
-#, c-format
-msgid " Convert an object file into a NetWare Loadable Module\n"
-msgstr " Previes sbor objektu na zavediten NetWare Modul\n"
-
-#: nlmconv.c:1104
-#, c-format
-msgid ""
-" The options are:\n"
-"  -I --input-target=<bfdname>   Set the input binary file format\n"
-"  -O --output-target=<bfdname>  Set the output binary file format\n"
-"  -T --header-file=<file>       Read <file> for NLM header information\n"
-"  -l --linker=<linker>          Use <linker> for any linking\n"
-"  -d --debug                    Display on stderr the linker command line\n"
-"  @<file>                       Read options from <file>.\n"
-"  -h --help                     Display this information\n"
-"  -v --version                  Display the program's version\n"
-msgstr ""
-" Voby s:\n"
-"  -I --input-target=<bfdname> Nastavi formt vstupnho binrneho sboru\n"
-"  -O --output-target=<bfdname> Nastavi formt vstupnho binrneho sboru\n"
-"  -T --header-file=<sbor> Preta <sbor> pre NLM informciu hlaviky\n"
-"  -l --linker=<linker> Poui <linker> pre vetko linkovanie\n"
-"  -d --debug Zobrazi prkazov riadok linkera na stderr \n"
-"  @<sbor> ta voby zo <sboru>.\n"
-"  -h --help Zobrazi tto informciu\n"
-"  -v --version Zobrazi verziu programu\n"
-
-#: nlmconv.c:1145
-#, c-format
-msgid "support not compiled in for %s"
-msgstr "podpora nie je skompilovan pre %s"
-
-#: nlmconv.c:1182
-msgid "make section"
-msgstr "vytvori sekciu"
-
-#: nlmconv.c:1196
-msgid "set section size"
-msgstr "nastavi vekos sekcie"
-
-#: nlmconv.c:1202
-msgid "set section alignment"
-msgstr "nastavi zarovnanie sekcie"
-
-#: nlmconv.c:1206
-msgid "set section flags"
-msgstr "nastavi prznaky sekcie"
-
-#: nlmconv.c:1217
-msgid "set .nlmsections size"
-msgstr "nastavi vekos .nlmsections"
-
-#: nlmconv.c:1298 nlmconv.c:1306 nlmconv.c:1315 nlmconv.c:1320
-msgid "set .nlmsection contents"
-msgstr "nastavi obsah .nlmsections"
-
-#: nlmconv.c:1799
-msgid "stub section sizes"
-msgstr "vekost sekcie stub"
-
-#: nlmconv.c:1846
-msgid "writing stub"
-msgstr "zapisuje sa stub"
-
-#: nlmconv.c:1930
-#, c-format
-msgid "unresolved PC relative reloc against %s"
-msgstr "nezisten relatvna PC relokcia oproti %s"
-
-#: nlmconv.c:1994
-#, c-format
-msgid "overflow when adjusting relocation against %s"
-msgstr "preteenie pri prispsobovan relokcie oproti %s"
-
-#: nlmconv.c:2121
-#, c-format
-msgid "%s: execution of %s failed: "
-msgstr "%s: vykonanie %s zlyhalo: "
-
-#: nlmconv.c:2136
-#, c-format
-msgid "Execution of %s failed"
-msgstr "Vykonanie %s zlyhalo"
-
-#: nm.c:213 size.c:83 strings.c:705
-#, c-format
-msgid "Usage: %s [option(s)] [file(s)]\n"
-msgstr "Pouitie: %s [VOBY] [SBORY]\n"
-
-#: nm.c:214
-#, c-format
-msgid " List symbols in [file(s)] (a.out by default).\n"
-msgstr " Vypsa symboly v [SBOROCH] (tandardne a.out).\n"
-
-#: nm.c:215
-#, c-format
-msgid ""
-" The options are:\n"
-"  -a, --debug-syms       Display debugger-only symbols\n"
-"  -A, --print-file-name  Print name of the input file before every symbol\n"
-"  -B                     Same as --format=bsd\n"
-"  -C, --demangle[=STYLE] Decode low-level symbol names into user-level names\n"
-"                          The STYLE, if specified, can be `auto' (the default),\n"
-"                          `gnu', `lucid', `arm', `hp', `edg', `gnu-v3', `java'\n"
-"                          or `gnat'\n"
-"      --no-demangle      Do not demangle low-level symbol names\n"
-"  -D, --dynamic          Display dynamic symbols instead of normal symbols\n"
-"      --defined-only     Display only defined symbols\n"
-"  -e                     (ignored)\n"
-"  -f, --format=FORMAT    Use the output format FORMAT.  FORMAT can be `bsd',\n"
-"                           `sysv' or `posix'.  The default is `bsd'\n"
-"  -g, --extern-only      Display only external symbols\n"
-"  -l, --line-numbers     Use debugging information to find a filename and\n"
-"                           line number for each symbol\n"
-"  -n, --numeric-sort     Sort symbols numerically by address\n"
-"  -o                     Same as -A\n"
-"  -p, --no-sort          Do not sort the symbols\n"
-"  -P, --portability      Same as --format=posix\n"
-"  -r, --reverse-sort     Reverse the sense of the sort\n"
-"  -S, --print-size       Print size of defined symbols\n"
-"  -s, --print-armap      Include index for symbols from archive members\n"
-"      --size-sort        Sort symbols by size\n"
-"      --special-syms     Include special symbols in the output\n"
-"      --synthetic        Display synthetic symbols as well\n"
-"  -t, --radix=RADIX      Use RADIX for printing symbol values\n"
-"      --target=BFDNAME   Specify the target object format as BFDNAME\n"
-"  -u, --undefined-only   Display only undefined symbols\n"
-"  -X 32_64               (ignored)\n"
-"  @FILE                  Read options from FILE\n"
-"  -h, --help             Display this information\n"
-"  -V, --version          Display this program's version number\n"
-"\n"
-msgstr ""
-" Voby s:\n"
-"  -a, --debug-syms Zobrazi iba symboly ladiaceho nstroja\n"
-"  -A, --print-file-name Vypsa nzov vstupnho sboru pred kad symbol\n"
-"  -B Rovnak ako --format=bsd\n"
-"  -C, --demangle[=TL] Dekdova nzkorovov nzvy symbolov na nzvy pouvateskej rovne\n"
-"                         tl, ak je uren, me by auto (tandardn),\n"
-"                          gnu, lucid, arm, hp, edg, gnu-v3, java\n"
-"                         alebo gnat\n"
-"      --no-demangle Neupravova nzko-rovov nzvy symbolov\n"
-"  -D, --dynamic Zobrazi dynamick symboly namiesto normlnych symbolov\n"
-"      --defined-only Zobrazi iba definovan symboly\n"
-"  -e (ignorovan)\n"
-"  -f, --format=FORMT Poui vstupn formt FORMT. FORMT me by bsd,\n"
-"                           sysv alebo posix. tandardn je bsd\n"
-"  -g, --extern-only Zobrazi iba extern symboly\n"
-"  -l, --line-numbers Poui ladiacu informciu na njdenie sboru a\n"
-"                           slo riadku pre kad symbol\n"
-"  -n, --numeric-sort Utriedi symboly selne poda adresy\n"
-"  -o Ravnak ako -A\n"
-"  -p, --no-sort Netriedi symboly\n"
-"  -P, --portability Rovnak ako --format=posix\n"
-"\n"
-"  -r, --reverse-sort Prevrti zmysel triedenia\n"
-"  -S, --print-size Vypsa vekos definovanch symbolov\n"
-"  -s, --print-armap Zahrn index pre symboly z lenov archvu\n"
-"      --size-sort Triedi symboly poda vekosti\n"
-"      --special-syms Zahrn pecilne symboly do vstupu\n"
-"      --synthetic Zobrazi tie syntetick symboly\n"
-"  -t, --radix=RADIX Poui RADIX pre vpis hodnt symbolov\n"
-"     --target=BFDNAME Uri formt cieovho objektu ako BFDNAME\n"
-"  -u, --undefined-only Zobrazi iba nedefinovan symboly\n"
-"  -X 32_64 (ignorovan)\n"
-"  @SBOR ta voby zo SBORu\n"
-"  -h, --help Zobrazi tto informciu\n"
-"  -V, --version Zobrazi verziu programu\n"
-"\n"
-
-#: nm.c:276
-#, c-format
-msgid "%s: invalid radix"
-msgstr "%s: neplatn radix"
-
-#: nm.c:300
-#, c-format
-msgid "%s: invalid output format"
-msgstr "%s: neplatn vstupn formt"
-
-#: nm.c:321 readelf.c:6853 readelf.c:6891
-#, c-format
-msgid "<processor specific>: %d"
-msgstr "<pecifick pre procesor>: %d"
-
-#: nm.c:323 readelf.c:6856 readelf.c:6903
-#, c-format
-msgid "<OS specific>: %d"
-msgstr "<pecifick pre OS>: %d"
-
-#: nm.c:325 readelf.c:6858 readelf.c:6906
-#, c-format
-msgid "<unknown>: %d"
-msgstr "<neznmy>: %d"
-
-#: nm.c:365
-#, c-format
-msgid ""
-"\n"
-"Archive index:\n"
-msgstr ""
-"\n"
-"Index archvu:\n"
-
-#: nm.c:1225
-#, c-format
-msgid ""
-"\n"
-"\n"
-"Undefined symbols from %s:\n"
-"\n"
-msgstr ""
-"\n"
-"\n"
-"Nedefinovan symboly z %s:\n"
-"\n"
-
-#: nm.c:1227
-#, c-format
-msgid ""
-"\n"
-"\n"
-"Symbols from %s:\n"
-"\n"
-msgstr ""
-"\n"
-"\n"
-"Symboly z %s:\n"
-"\n"
-
-#: nm.c:1229 nm.c:1280
-#, c-format
-msgid ""
-"Name                  Value   Class        Type         Size     Line  Section\n"
-"\n"
-msgstr ""
-"Nzov Hodnota Trieda Typ Vekos Riadok Sekcia\n"
-"\n"
-
-#: nm.c:1232 nm.c:1283
-#, c-format
-msgid ""
-"Name                  Value           Class        Type         Size             Line  Section\n"
-"\n"
-msgstr ""
-"Nzov Hodnota Trieda Typ Vekos Riadok Sekcia\n"
-"\n"
-
-#: nm.c:1276
-#, c-format
-msgid ""
-"\n"
-"\n"
-"Undefined symbols from %s[%s]:\n"
-"\n"
-msgstr ""
-"\n"
-"\n"
-"Nedefinovan symbol z %s[%s]:\n"
-"\n"
-
-#: nm.c:1278
-#, c-format
-msgid ""
-"\n"
-"\n"
-"Symbols from %s[%s]:\n"
-"\n"
-msgstr ""
-"\n"
-"\n"
-"Symboly z %s[%s]:\n"
-"\n"
-
-#: nm.c:1370
-#, c-format
-msgid "Print width has not been initialized (%d)"
-msgstr ""
-
-#: nm.c:1595
-msgid "Only -X 32_64 is supported"
-msgstr "Je podporovan iba -X 32_64"
-
-#: nm.c:1615
-msgid "Using the --size-sort and --undefined-only options together"
-msgstr "Pouitie volieb --size-sort a --undefined-only spolu"
-
-#: nm.c:1616
-msgid "will produce no output, since undefined symbols have no size."
-msgstr "nevytvoria iadny vstup, pretoe nedefinovan symboly nemaj iadnu vekos."
-
-#: nm.c:1644
-#, c-format
-msgid "data size %ld"
-msgstr "dtov vekos %ld"
-
-#: objcopy.c:426 srconv.c:1723
-#, c-format
-msgid "Usage: %s [option(s)] in-file [out-file]\n"
-msgstr "Pouitie: %s [vob(a/y)] vstupn-sbor [vstupn-sbor]\n"
-
-#: objcopy.c:427
-#, c-format
-msgid " Copies a binary file, possibly transforming it in the process\n"
-msgstr " Kopruje binrny sbor s monosou transformovania poas procesu\n"
-
-#: objcopy.c:428 objcopy.c:524
-#, c-format
-msgid " The options are:\n"
-msgstr " Voby s:\n"
-
-#: objcopy.c:429
-#, c-format
-msgid ""
-"  -I --input-target <bfdname>      Assume input file is in format <bfdname>\n"
-"  -O --output-target <bfdname>     Create an output file in format <bfdname>\n"
-"  -B --binary-architecture <arch>  Set arch of output file, when input is binary\n"
-"  -F --target <bfdname>            Set both input and output format to <bfdname>\n"
-"     --debugging                   Convert debugging information, if possible\n"
-"  -p --preserve-dates              Copy modified/access timestamps to the output\n"
-"  -j --only-section <name>         Only copy section <name> into the output\n"
-"     --add-gnu-debuglink=<file>    Add section .gnu_debuglink linking to <file>\n"
-"  -R --remove-section <name>       Remove section <name> from the output\n"
-"  -S --strip-all                   Remove all symbol and relocation information\n"
-"  -g --strip-debug                 Remove all debugging symbols & sections\n"
-"     --strip-unneeded              Remove all symbols not needed by relocations\n"
-"  -N --strip-symbol <name>         Do not copy symbol <name>\n"
-"     --strip-unneeded-symbol <name>\n"
-"                                   Do not copy symbol <name> unless needed by\n"
-"                                     relocations\n"
-"     --only-keep-debug             Strip everything but the debug information\n"
-"     --extract-symbol              Remove section contents but keep symbols\n"
-"  -K --keep-symbol <name>          Do not strip symbol <name>\n"
-"     --keep-file-symbols           Do not strip file symbol(s)\n"
-"     --localize-hidden             Turn all ELF hidden symbols into locals\n"
-"  -L --localize-symbol <name>      Force symbol <name> to be marked as a local\n"
-"     --globalize-symbol <name>     Force symbol <name> to be marked as a global\n"
-"  -G --keep-global-symbol <name>   Localize all symbols except <name>\n"
-"  -W --weaken-symbol <name>        Force symbol <name> to be marked as a weak\n"
-"     --weaken                      Force all global symbols to be marked as weak\n"
-"  -w --wildcard                    Permit wildcard in symbol comparison\n"
-"  -x --discard-all                 Remove all non-global symbols\n"
-"  -X --discard-locals              Remove any compiler-generated symbols\n"
-"  -i --interleave <number>         Only copy one out of every <number> bytes\n"
-"  -b --byte <num>                  Select byte <num> in every interleaved block\n"
-"     --gap-fill <val>              Fill gaps between sections with <val>\n"
-"     --pad-to <addr>               Pad the last section up to address <addr>\n"
-"     --set-start <addr>            Set the start address to <addr>\n"
-"    {--change-start|--adjust-start} <incr>\n"
-"                                   Add <incr> to the start address\n"
-"    {--change-addresses|--adjust-vma} <incr>\n"
-"                                   Add <incr> to LMA, VMA and start addresses\n"
-"    {--change-section-address|--adjust-section-vma} <name>{=|+|-}<val>\n"
-"                                   Change LMA and VMA of section <name> by <val>\n"
-"     --change-section-lma <name>{=|+|-}<val>\n"
-"                                   Change the LMA of section <name> by <val>\n"
-"     --change-section-vma <name>{=|+|-}<val>\n"
-"                                   Change the VMA of section <name> by <val>\n"
-"    {--[no-]change-warnings|--[no-]adjust-warnings}\n"
-"                                   Warn if a named section does not exist\n"
-"     --set-section-flags <name>=<flags>\n"
-"                                   Set section <name>'s properties to <flags>\n"
-"     --add-section <name>=<file>   Add section <name> found in <file> to output\n"
-"     --rename-section <old>=<new>[,<flags>] Rename section <old> to <new>\n"
-"     --change-leading-char         Force output format's leading character style\n"
-"     --remove-leading-char         Remove leading character from global symbols\n"
-"     --reverse-bytes=<num>         Reverse <num> bytes at a time, in output sections with content\n"
-"     --redefine-sym <old>=<new>    Redefine symbol name <old> to <new>\n"
-"     --redefine-syms <file>        --redefine-sym for all symbol pairs \n"
-"                                     listed in <file>\n"
-"     --srec-len <number>           Restrict the length of generated Srecords\n"
-"     --srec-forceS3                Restrict the type of generated Srecords to S3\n"
-"     --strip-symbols <file>        -N for all symbols listed in <file>\n"
-"     --strip-unneeded-symbols <file>\n"
-"                                   --strip-unneeded-symbol for all symbols listed\n"
-"                                     in <file>\n"
-"     --keep-symbols <file>         -K for all symbols listed in <file>\n"
-"     --localize-symbols <file>     -L for all symbols listed in <file>\n"
-"     --globalize-symbols <file>    --globalize-symbol for all in <file>\n"
-"     --keep-global-symbols <file>  -G for all symbols listed in <file>\n"
-"     --weaken-symbols <file>       -W for all symbols listed in <file>\n"
-"     --alt-machine-code <index>    Use the target's <index>'th alternative machine\n"
-"     --writable-text               Mark the output text as writable\n"
-"     --readonly-text               Make the output text write protected\n"
-"     --pure                        Mark the output file as demand paged\n"
-"     --impure                      Mark the output file as impure\n"
-"     --prefix-symbols <prefix>     Add <prefix> to start of every symbol name\n"
-"     --prefix-sections <prefix>    Add <prefix> to start of every section name\n"
-"     --prefix-alloc-sections <prefix>\n"
-"                                   Add <prefix> to start of every allocatable\n"
-"                                     section name\n"
-"  -v --verbose                     List all object files modified\n"
-"  @<file>                          Read options from <file>\n"
-"  -V --version                     Display this program's version number\n"
-"  -h --help                        Display this output\n"
-"     --info                        List object formats & architectures supported\n"
-msgstr ""
-
-#: objcopy.c:522
-#, c-format
-msgid "Usage: %s <option(s)> in-file(s)\n"
-msgstr "Pouitie: %s <vob(a/y)> vstupn-sbor(y)\n"
-
-#: objcopy.c:523
-#, c-format
-msgid " Removes symbols and sections from files\n"
-msgstr " Odstrni symboly a sekcie zo sborov\n"
-
-#: objcopy.c:525
-#, c-format
-msgid ""
-"  -I --input-target=<bfdname>      Assume input file is in format <bfdname>\n"
-"  -O --output-target=<bfdname>     Create an output file in format <bfdname>\n"
-"  -F --target=<bfdname>            Set both input and output format to <bfdname>\n"
-"  -p --preserve-dates              Copy modified/access timestamps to the output\n"
-"  -R --remove-section=<name>       Remove section <name> from the output\n"
-"  -s --strip-all                   Remove all symbol and relocation information\n"
-"  -g -S -d --strip-debug           Remove all debugging symbols & sections\n"
-"     --strip-unneeded              Remove all symbols not needed by relocations\n"
-"     --only-keep-debug             Strip everything but the debug information\n"
-"  -N --strip-symbol=<name>         Do not copy symbol <name>\n"
-"  -K --keep-symbol=<name>          Do not strip symbol <name>\n"
-"     --keep-file-symbols           Do not strip file symbol(s)\n"
-"  -w --wildcard                    Permit wildcard in symbol comparison\n"
-"  -x --discard-all                 Remove all non-global symbols\n"
-"  -X --discard-locals              Remove any compiler-generated symbols\n"
-"  -v --verbose                     List all object files modified\n"
-"  -V --version                     Display this program's version number\n"
-"  -h --help                        Display this output\n"
-"     --info                        List object formats & architectures supported\n"
-"  -o <file>                        Place stripped output into <file>\n"
-msgstr ""
-
-#: objcopy.c:598
-#, c-format
-msgid "unrecognized section flag `%s'"
-msgstr "nerozpoznan prznak sekcie %s"
-
-#: objcopy.c:599
-#, c-format
-msgid "supported flags: %s"
-msgstr "podporovan prznaky: %s"
-
-#: objcopy.c:679
-#, c-format
-msgid "cannot open '%s': %s"
-msgstr "nemono otvori %s: %s"
-
-#: objcopy.c:682 objcopy.c:2987
-#, c-format
-msgid "%s: fread failed"
-msgstr "%s: fread zlyhal"
-
-#: objcopy.c:755
-#, c-format
-msgid "%s:%d: Ignoring rubbish found on this line"
-msgstr "%s:%d: Ignoruj sa zbytonosti njden v tomto riadku"
-
-#: objcopy.c:1033
-#, c-format
-msgid "not stripping symbol `%s' because it is named in a relocation"
-msgstr ""
-
-#: objcopy.c:1116
-#, c-format
-msgid "%s: Multiple redefinition of symbol \"%s\""
-msgstr "%s: Viacnsobn redefincia symbolu %s"
-
-#: objcopy.c:1120
-#, c-format
-msgid "%s: Symbol \"%s\" is target of more than one redefinition"
-msgstr "%s: Symbol %s je cieom viac ako jednej redefincie"
-
-#: objcopy.c:1148
-#, c-format
-msgid "couldn't open symbol redefinition file %s (error: %s)"
-msgstr "nepodarilo sa otvori sbor redefincie symbolov %s (chyba: %s)"
-
-#: objcopy.c:1226
-#, c-format
-msgid "%s:%d: garbage found at end of line"
-msgstr "%s:%d: njden nezmysly na konci riadku"
-
-#: objcopy.c:1229
-#, c-format
-msgid "%s:%d: missing new symbol name"
-msgstr "%s:%d: chba nzov novho symbolu"
-
-#: objcopy.c:1239
-#, c-format
-msgid "%s:%d: premature end of file"
-msgstr "%s:%d: predasn ukonenie riadku"
-
-#: objcopy.c:1265
-#, c-format
-msgid "stat returns negative size for `%s'"
-msgstr "stat vracia zporn vekos pre %s"
-
-#: objcopy.c:1277
-#, c-format
-msgid "copy from `%s' [unknown] to `%s' [unknown]\n"
-msgstr "koprova z %s [neznmy] do %s [neznmy]\n"
-
-#: objcopy.c:1332
-msgid "Unable to change endianness of input file(s)"
-msgstr "Nemono zmeni endianitu vstupnho sboru(-ov)"
-
-#: objcopy.c:1341
-#, c-format
-msgid "copy from `%s' [%s] to `%s' [%s]\n"
-msgstr "koprova z %s [%s] do %s [%s]\n"
-
-#: objcopy.c:1383 objcopy.c:1908
-#, c-format
-msgid "Unable to recognise the format of the input file `%s'"
-msgstr "Nemono rozpozna formt vstupnho sboru %s"
-
-#: objcopy.c:1386
-#, c-format
-msgid "Warning: Output file cannot represent architecture `%s'"
-msgstr "Upozornenie: Vstupn sbor neme reprezentova architektru %s"
-
-#: objcopy.c:1449
-#, c-format
-msgid "can't add section '%s' - it already exists!"
-msgstr ""
-
-#: objcopy.c:1457
-#, c-format
-msgid "can't create section `%s': %s"
-msgstr "nemono vytvori sekciu %s: %s"
-
-#: objcopy.c:1593
-#, c-format
-msgid "Can't fill gap after %s: %s"
-msgstr "Nemono vyplni medzeru po %s: %s"
-
-#: objcopy.c:1618
-#, c-format
-msgid "Can't add padding to %s: %s"
-msgstr "Nemono prida doplnenie k %s: %s"
-
-#: objcopy.c:1771
-#, c-format
-msgid "%s: error copying private BFD data: %s"
-msgstr "%s: chyba pri koprovan prvatnch BFD dt: %s"
-
-#: objcopy.c:1784
-#, c-format
-msgid "this target does not support %lu alternative machine codes"
-msgstr ""
-
-#: objcopy.c:1788
-msgid "treating that number as an absolute e_machine value instead"
-msgstr ""
-
-#: objcopy.c:1792
-msgid "ignoring the alternative value"
-msgstr ""
-
-#: objcopy.c:1822 objcopy.c:1852
-#, c-format
-msgid "cannot create tempdir for archive copying (error: %s)"
-msgstr ""
-
-#: objcopy.c:2088
-#, c-format
-msgid "Multiple renames of section %s"
-msgstr "Viacnsobn premenovanie sekcie %s"
-
-#: objcopy.c:2139
-msgid "private header data"
-msgstr "privtne dta hlaviky"
-
-#: objcopy.c:2147
-#, c-format
-msgid "%s: error in %s: %s"
-msgstr "%s: chyba v %s: %s"
-
-#: objcopy.c:2208
-msgid "making"
-msgstr "vytvra sa"
-
-#: objcopy.c:2228
-msgid "size"
-msgstr "vekos"
-
-#: objcopy.c:2242
-msgid "vma"
-msgstr "vma"
-
-#: objcopy.c:2267
-msgid "alignment"
-msgstr "zarovnanie"
-
-#: objcopy.c:2289
-msgid "private data"
-msgstr "privtne dta"
-
-#: objcopy.c:2304
-#, c-format
-msgid "%s: section `%s': error in %s: %s"
-msgstr "%s: sekcia %s: chyba v %s: %s"
-
-#. User must pad the section up in order to do this.
-#: objcopy.c:2429
-#, c-format
-msgid "cannot reverse bytes: length of section %s must be evenly divisible by %d"
-msgstr ""
-
-#: objcopy.c:2605
-#, c-format
-msgid "%s: can't create debugging section: %s"
-msgstr "%s: nemono vytvori ladiacu sekciu: %s"
-
-#: objcopy.c:2619
-#, c-format
-msgid "%s: can't set debugging section contents: %s"
-msgstr "%s: nemono nastavi obsah ladiacej sekcie: %s"
-
-#: objcopy.c:2628
-#, c-format
-msgid "%s: don't know how to write debugging information for %s"
-msgstr "%s: nevie sa ako sa m zapsa ladiaca informcia pre %s"
-
-#: objcopy.c:2769
-#, c-format
-msgid "could not create temporary file to hold stripped copy of '%s'"
-msgstr ""
-
-#: objcopy.c:2819
-msgid "byte number must be non-negative"
-msgstr "slo bajtu mus by nezporn"
-
-#: objcopy.c:2829
-msgid "interleave must be positive"
-msgstr "vloenie mus by kladn"
-
-#: objcopy.c:2849 objcopy.c:2857
-#, c-format
-msgid "%s both copied and removed"
-msgstr "%s obe skoprovan a odstrnen"
-
-#: objcopy.c:2958 objcopy.c:3032 objcopy.c:3132 objcopy.c:3163 objcopy.c:3187
-#: objcopy.c:3191 objcopy.c:3211
-#, c-format
-msgid "bad format for %s"
-msgstr "zl formt pre %s"
-
-#: objcopy.c:2982
-#, c-format
-msgid "cannot open: %s: %s"
-msgstr "nemono otvori: %s: %s"
-
-#: objcopy.c:3101
-#, c-format
-msgid "Warning: truncating gap-fill from 0x%s to 0x%x"
-msgstr "Upozornenie: skracuje sa vpl medzery z 0x%s na 0x%x"
-
-#: objcopy.c:3269
-msgid "unable to parse alternative machine code"
-msgstr ""
-
-#: objcopy.c:3314
-msgid "number of bytes to reverse must be positive and even"
-msgstr ""
-
-#: objcopy.c:3317
-#, c-format
-msgid "Warning: ignoring previous --reverse-bytes value of %d"
-msgstr ""
-
-#: objcopy.c:3345
-msgid "byte number must be less than interleave"
-msgstr "slo bajtu mus by menie ne vloenie"
-
-#: objcopy.c:3375
-#, c-format
-msgid "architecture %s unknown"
-msgstr "architektra %s neznma"
-
-#: objcopy.c:3379
-msgid "Warning: input target 'binary' required for binary architecture parameter."
-msgstr "Upozornenie: vstupn cie 'binary' je poadovan pre parameter binrnej architektry."
-
-#: objcopy.c:3380
-#, c-format
-msgid " Argument %s ignored"
-msgstr " Argument %s ignorovan"
-
-#: objcopy.c:3386
-#, c-format
-msgid "warning: could not locate '%s'.  System error message: %s"
-msgstr "upozornenie: nepadarilo sa njs %s. Sytmov chybov hlsenie: %s"
-
-#: objcopy.c:3397
-#, c-format
-msgid "warning: could not create temporary file whilst copying '%s', (error: %s)"
-msgstr ""
-
-#: objcopy.c:3424 objcopy.c:3438
-#, c-format
-msgid "%s %s%c0x%s never used"
-msgstr "%s %s%c0x%s nikdy nepouit"
-
-#: objdump.c:176
-#, c-format
-msgid "Usage: %s <option(s)> <file(s)>\n"
-msgstr "Pouitie: %s <vob(a/y)> <sbor(y)>\n"
-
-#: objdump.c:177
-#, c-format
-msgid " Display information from object <file(s)>.\n"
-msgstr " Zobrazi informcie z objektovho <sboru(-ov)>.\n"
-
-#: objdump.c:178
-#, c-format
-msgid " At least one of the following switches must be given:\n"
-msgstr " Najmenej jeden z nsledujcich prepnaov mus by uveden:\n"
-
-#: objdump.c:179
-#, c-format
-msgid ""
-"  -a, --archive-headers    Display archive header information\n"
-"  -f, --file-headers       Display the contents of the overall file header\n"
-"  -p, --private-headers    Display object format specific file header contents\n"
-"  -h, --[section-]headers  Display the contents of the section headers\n"
-"  -x, --all-headers        Display the contents of all headers\n"
-"  -d, --disassemble        Display assembler contents of executable sections\n"
-"  -D, --disassemble-all    Display assembler contents of all sections\n"
-"  -S, --source             Intermix source code with disassembly\n"
-"  -s, --full-contents      Display the full contents of all sections requested\n"
-"  -g, --debugging          Display debug information in object file\n"
-"  -e, --debugging-tags     Display debug information using ctags style\n"
-"  -G, --stabs              Display (in raw form) any STABS info in the file\n"
-"  -W, --dwarf              Display DWARF info in the file\n"
-"  -t, --syms               Display the contents of the symbol table(s)\n"
-"  -T, --dynamic-syms       Display the contents of the dynamic symbol table\n"
-"  -r, --reloc              Display the relocation entries in the file\n"
-"  -R, --dynamic-reloc      Display the dynamic relocation entries in the file\n"
-"  @<file>                  Read options from <file>\n"
-"  -v, --version            Display this program's version number\n"
-"  -i, --info               List object formats and architectures supported\n"
-"  -H, --help               Display this information\n"
-msgstr ""
-
-#: objdump.c:204
-#, c-format
-msgid ""
-"\n"
-" The following switches are optional:\n"
-msgstr ""
-"\n"
-" Nsledujce prepnae s voliten:\n"
-
-#: objdump.c:205
-#, c-format
-msgid ""
-"  -b, --target=BFDNAME           Specify the target object format as BFDNAME\n"
-"  -m, --architecture=MACHINE     Specify the target architecture as MACHINE\n"
-"  -j, --section=NAME             Only display information for section NAME\n"
-"  -M, --disassembler-options=OPT Pass text OPT on to the disassembler\n"
-"  -EB --endian=big               Assume big endian format when disassembling\n"
-"  -EL --endian=little            Assume little endian format when disassembling\n"
-"      --file-start-context       Include context from start of file (with -S)\n"
-"  -I, --include=DIR              Add DIR to search list for source files\n"
-"  -l, --line-numbers             Include line numbers and filenames in output\n"
-"  -C, --demangle[=STYLE]         Decode mangled/processed symbol names\n"
-"                                  The STYLE, if specified, can be `auto', `gnu',\n"
-"                                  `lucid', `arm', `hp', `edg', `gnu-v3', `java'\n"
-"                                  or `gnat'\n"
-"  -w, --wide                     Format output for more than 80 columns\n"
-"  -z, --disassemble-zeroes       Do not skip blocks of zeroes when disassembling\n"
-"      --start-address=ADDR       Only process data whose address is >= ADDR\n"
-"      --stop-address=ADDR        Only process data whose address is <= ADDR\n"
-"      --prefix-addresses         Print complete address alongside disassembly\n"
-"      --[no-]show-raw-insn       Display hex alongside symbolic disassembly\n"
-"      --adjust-vma=OFFSET        Add OFFSET to all displayed section addresses\n"
-"      --special-syms             Include special symbols in symbol dumps\n"
-"\n"
-msgstr ""
-
-#: objdump.c:387
-#, c-format
-msgid "Sections:\n"
-msgstr "Sekcie:\n"
-
-#: objdump.c:390 objdump.c:394
-#, c-format
-msgid "Idx Name          Size      VMA       LMA       File off  Algn"
-msgstr "Idx Nzov Vekos VMA LMA Sbor vyp. Rozl."
-
-#: objdump.c:396
-#, c-format
-msgid "Idx Name          Size      VMA               LMA               File off  Algn"
-msgstr "ldx Nzov Vekos VMA LMA Sbor vyp. Algn"
-
-#: objdump.c:400
-#, c-format
-msgid "  Flags"
-msgstr "  Prznaky"
-
-#: objdump.c:402
-#, c-format
-msgid "  Pg"
-msgstr "  Pg"
-
-#: objdump.c:445
-#, c-format
-msgid "%s: not a dynamic object"
-msgstr "%s: nie je dynamick objekt"
-
-#: objdump.c:1778
-#, c-format
-msgid "Disassembly of section %s:\n"
-msgstr "Rozloenie sekcie %s:\n"
-
-#: objdump.c:1940
-#, c-format
-msgid "Can't use supplied machine %s"
-msgstr "Ned sa poui zadan architekra %s"
-
-#: objdump.c:1959
-#, c-format
-msgid "Can't disassemble for architecture %s\n"
-msgstr "Ned sa rozloi pre architekru %s\n"
-
-#: objdump.c:2064
-#, c-format
-msgid ""
-"\n"
-"Can't get contents for section '%s'.\n"
-msgstr ""
-"\n"
-"Ned sa zska obsah pre sekciu %s.\n"
-
-#: objdump.c:2201
-#, c-format
-msgid ""
-"No %s section present\n"
-"\n"
-msgstr ""
-"Nenachdza sa iadna sekcia %s\n"
-"\n"
-
-#: objdump.c:2210
-#, c-format
-msgid "Reading %s section of %s failed: %s"
-msgstr "tanie %s sekcie z %s zlyhalo: %s"
-
-#: objdump.c:2254
-#, c-format
-msgid ""
-"Contents of %s section:\n"
-"\n"
-msgstr ""
-"Obsah %s sekcie:\n"
-"\n"
-
-#: objdump.c:2381
-#, c-format
-msgid "architecture: %s, "
-msgstr "architektra: %s, "
-
-#: objdump.c:2384
-#, c-format
-msgid "flags 0x%08x:\n"
-msgstr "prznaky 0x%08x:\n"
-
-#: objdump.c:2398
-#, c-format
-msgid ""
-"\n"
-"start address 0x"
-msgstr ""
-"\n"
-"tartovacia adresa 0x"
-
-#: objdump.c:2438
-#, c-format
-msgid "Contents of section %s:\n"
-msgstr "Obsah sekcie %s:\n"
-
-#: objdump.c:2563
-#, c-format
-msgid "no symbols\n"
-msgstr "iadne symboly\n"
-
-#: objdump.c:2570
-#, c-format
-msgid "no information for symbol number %ld\n"
-msgstr "iadne informcie pre slo symbolu %ld\n"
-
-#: objdump.c:2573
-#, c-format
-msgid "could not determine the type of symbol number %ld\n"
-msgstr "ned sa uri typ sla symbolu %ld\n"
-
-#: objdump.c:2850
-#, c-format
-msgid ""
-"\n"
-"%s:     file format %s\n"
-msgstr ""
-"\n"
-"%s: formt sboru %s\n"
-
-#: objdump.c:2908
-#, c-format
-msgid "%s: printing debugging information failed"
-msgstr "%s: tla ladiacich informcii zlahala"
-
-#: objdump.c:3002
-#, c-format
-msgid "In archive %s:\n"
-msgstr "V archve %s:\n"
-
-#: objdump.c:3124
-msgid "unrecognized -E option"
-msgstr "nerozpoznan -E voba"
-
-#: objdump.c:3135
-#, c-format
-msgid "unrecognized --endian type `%s'"
-msgstr "nerozpoznan --endian typ %s"
-
-#: rclex.c:196
-msgid "invalid value specified for pragma code_page.\n"
-msgstr ""
-
-#: rdcoff.c:198
-#, c-format
-msgid "parse_coff_type: Bad type code 0x%x"
-msgstr "parse_coff_type: Zl typov kd 0x%x"
-
-#: rdcoff.c:406 rdcoff.c:511 rdcoff.c:699
-#, c-format
-msgid "bfd_coff_get_syment failed: %s"
-msgstr "bfd_coff_get_syment zlyhal: %s"
-
-#: rdcoff.c:422 rdcoff.c:719
-#, c-format
-msgid "bfd_coff_get_auxent failed: %s"
-msgstr "bfd_coff_get_auxent zlyhal: %s"
-
-#: rdcoff.c:786
-#, c-format
-msgid "%ld: .bf without preceding function"
-msgstr "%ld: .bf bez predchdzajcej funkcie"
-
-#: rdcoff.c:836
-#, c-format
-msgid "%ld: unexpected .ef\n"
-msgstr "%ld: neoakvan .ef\n"
-
-#: rddbg.c:86
-#, c-format
-msgid "%s: no recognized debugging information"
-msgstr "%s: iadna rozpoznan ladiaca informcia"
-
-#: rddbg.c:400
-#, c-format
-msgid "Last stabs entries before error:\n"
-msgstr "Posledn testovacie zznamy pred chybou:\n"
-
-#: readelf.c:319
-#, c-format
-msgid "Unable to seek to 0x%lx for %s\n"
-msgstr "Ned sa vyhada 0x%lx pre %s\n"
-
-#: readelf.c:334
-#, c-format
-msgid "Out of memory allocating 0x%lx bytes for %s\n"
-msgstr "Nedostatok pamti pri alokcii 0x%lx bajtov pre %s\n"
-
-#: readelf.c:344
-#, c-format
-msgid "Unable to read in 0x%lx bytes of %s\n"
-msgstr "Ned sa preta v 0x%lx bajtoch z %s\n"
-
-#: readelf.c:683
-msgid "Don't know about relocations on this machine architecture\n"
-msgstr "Nepoznm realokcie pre architektru tohto potaa\n"
-
-#: readelf.c:703 readelf.c:731 readelf.c:775 readelf.c:803
-msgid "relocs"
-msgstr "relocs"
-
-#: readelf.c:714 readelf.c:742 readelf.c:786 readelf.c:814
-msgid "out of memory parsing relocs\n"
-msgstr "nedostatok pamte pri spracvan relokanch zznamov\n"
-
-#: readelf.c:868
-#, c-format
-msgid " Offset     Info    Type                Sym. Value  Symbol's Name + Addend\n"
-msgstr " Offset Info Typ Sym. Hodnota Nzov symbolu + Stanec\n"
-
-#: readelf.c:870
-#, c-format
-msgid " Offset     Info    Type            Sym.Value  Sym. Name + Addend\n"
-msgstr " Offset Info Typ Sym.hodnota Sym.nazov + Scitanec\n"
-
-#: readelf.c:875
-#, c-format
-msgid " Offset     Info    Type                Sym. Value  Symbol's Name\n"
-msgstr " Offset Info Typ Sym.hodnota Nazov symbolu\n"
-
-#: readelf.c:877
-#, c-format
-msgid " Offset     Info    Type            Sym.Value  Sym. Name\n"
-msgstr " Offset Info Typ Hodnota sym. Nzov sym.\n"
-
-#: readelf.c:885
-#, c-format
-msgid "    Offset             Info             Type               Symbol's Value  Symbol's Name + Addend\n"
-msgstr "    Offset Info Typ Hodnota symbolu Nzov symbolu + Stanec\n"
-
-#: readelf.c:887
-#, c-format
-msgid "  Offset          Info           Type           Sym. Value    Sym. Name + Addend\n"
-msgstr "  Offset Info Typ Hodnota sym. Nzov sym. + Stanec\n"
-
-#: readelf.c:892
-#, c-format
-msgid "    Offset             Info             Type               Symbol's Value  Symbol's Name\n"
-msgstr "    Offset Info Typ Hodnota symbolu Nzov symbolu\n"
-
-#: readelf.c:894
-#, c-format
-msgid "  Offset          Info           Type           Sym. Value    Sym. Name\n"
-msgstr "  Offset Info Typ Hodnnota sym. Nzov sym.\n"
-
-#: readelf.c:1198 readelf.c:1200 readelf.c:1318 readelf.c:1320 readelf.c:1329
-#: readelf.c:1331
-#, c-format
-msgid "unrecognized: %-7lx"
-msgstr "norozpoznan: %-7lx"
-
-#: readelf.c:1226
-#, c-format
-msgid "<unknown addend: %lx>"
-msgstr "<neznmy stanec: %lx>"
-
-#: readelf.c:1288
-#, c-format
-msgid "<string table index: %3ld>"
-msgstr "<index tabuky reazcov: %3ld>"
-
-#: readelf.c:1290
-#, c-format
-msgid "<corrupt string table index: %3ld>"
-msgstr "<pokoden index tabuky reazcov: %3ld>"
-
-#: readelf.c:1625
-#, c-format
-msgid "Processor Specific: %lx"
-msgstr "pecifick pre procesor: %lx"
-
-#: readelf.c:1646
-#, c-format
-msgid "Operating System specific: %lx"
-msgstr "pecifick pre operan systm: %lx"
-
-#: readelf.c:1650 readelf.c:2521
-#, c-format
-msgid "<unknown>: %lx"
-msgstr "<neznmy>: %lx"
-
-#: readelf.c:1663
-msgid "NONE (None)"
-msgstr "NONE (iadny)"
-
-#: readelf.c:1664
-msgid "REL (Relocatable file)"
-msgstr "REL (Relokan sbor)"
-
-#: readelf.c:1665
-msgid "EXEC (Executable file)"
-msgstr "EXEC (Spustiten sbor)"
-
-#: readelf.c:1666
-msgid "DYN (Shared object file)"
-msgstr "DYN (Sbor zdielanho objektu)"
-
-#: readelf.c:1667
-msgid "CORE (Core file)"
-msgstr "CORE (Sbor jadra)"
-
-#: readelf.c:1671
-#, c-format
-msgid "Processor Specific: (%x)"
-msgstr "pecifick pre procesor: (%x)"
-
-#: readelf.c:1673
-#, c-format
-msgid "OS Specific: (%x)"
-msgstr "pecifick pre OS: (%x)"
-
-#: readelf.c:1675 readelf.c:2714
-#, c-format
-msgid "<unknown>: %x"
-msgstr "<neznmy>: %x"
-
-#: readelf.c:1687
-msgid "None"
-msgstr "iadny"
-
-#: readelf.c:1791
-#, c-format
-msgid "<unknown>: 0x%x"
-msgstr "<neznme>: 0x%x"
-
-#: readelf.c:2048
-msgid "unknown"
-msgstr "neznme"
-
-#: readelf.c:2049
-msgid "unknown mac"
-msgstr "neznma mac"
-
-#: readelf.c:2358
-msgid "Standalone App"
-msgstr "Samostatn aplikcia"
-
-#: readelf.c:2361 readelf.c:3145 readelf.c:3161
-#, c-format
-msgid "<unknown: %x>"
-msgstr "<neznmy>: %x"
-
-#: readelf.c:2759
-#, c-format
-msgid "Usage: readelf <option(s)> elf-file(s)\n"
-msgstr "Pouitie: readelf <voby> elf-sbor(y)\n"
-
-#: readelf.c:2760
-#, c-format
-msgid " Display information about the contents of ELF format files\n"
-msgstr " Zobrazi informcie o obsahu sborov formtu ELF\n"
-
-#: readelf.c:2761
-#, c-format
-msgid ""
-" Options are:\n"
-"  -a --all               Equivalent to: -h -l -S -s -r -d -V -A -I\n"
-"  -h --file-header       Display the ELF file header\n"
-"  -l --program-headers   Display the program headers\n"
-"     --segments          An alias for --program-headers\n"
-"  -S --section-headers   Display the sections' header\n"
-"     --sections          An alias for --section-headers\n"
-"  -g --section-groups    Display the section groups\n"
-"  -t --section-details   Display the section details\n"
-"  -e --headers           Equivalent to: -h -l -S\n"
-"  -s --syms              Display the symbol table\n"
-"      --symbols          An alias for --syms\n"
-"  -n --notes             Display the core notes (if present)\n"
-"  -r --relocs            Display the relocations (if present)\n"
-"  -u --unwind            Display the unwind info (if present)\n"
-"  -d --dynamic           Display the dynamic section (if present)\n"
-"  -V --version-info      Display the version sections (if present)\n"
-"  -A --arch-specific     Display architecture specific information (if any).\n"
-"  -D --use-dynamic       Use the dynamic section info when displaying symbols\n"
-"  -x --hex-dump=<number> Dump the contents of section <number>\n"
-"  -w[liaprmfFsoR] or\n"
-"  --debug-dump[=line,=info,=abbrev,=pubnames,=aranges,=macro,=frames,=str,=loc,=Ranges]\n"
-"                         Display the contents of DWARF2 debug sections\n"
-msgstr ""
-
-#: readelf.c:2785
-#, c-format
-msgid ""
-"  -i --instruction-dump=<number>\n"
-"                         Disassemble the contents of section <number>\n"
-msgstr ""
-"  -i --instruction-dump=<slo>\n"
-"                         Rozloi obsah sekcie <slo>\n"
-
-#: readelf.c:2789
-#, c-format
-msgid ""
-"  -I --histogram         Display histogram of bucket list lengths\n"
-"  -W --wide              Allow output width to exceed 80 characters\n"
-"  @<file>                Read options from <file>\n"
-"  -H --help              Display this information\n"
-"  -v --version           Display the version number of readelf\n"
-msgstr ""
-"  -I --histogram Zobrazi histogram dok zoznamu oblasti\n"
-"  -W --wide Umoni prekroenie 80 znakov\n"
-"  @<sbor> ta voby zo <sbor>u\n"
-"  -H --help Zobrazi tto informciu\n"
-"  -v --version Zobrazi readelf verziu\n"
-
-#: readelf.c:2817 readelf.c:2845 readelf.c:2849 readelf.c:9898
-msgid "Out of memory allocating dump request table.\n"
-msgstr "Nedostatok pamte pri alokcii tabuky poiadaviek o vpis.\n"
-
-#: readelf.c:3011 readelf.c:3079
-#, c-format
-msgid "Unrecognized debug option '%s'\n"
-msgstr "Nerozpoznan ladiaca voba %s\n"
-
-#: readelf.c:3115
-#, c-format
-msgid "Invalid option '-%c'\n"
-msgstr "Neplatn voba -%c\n"
-
-#: readelf.c:3129
-msgid "Nothing to do.\n"
-msgstr "Nie je o robi.\n"
-
-#: readelf.c:3141 readelf.c:3157 readelf.c:6399
-msgid "none"
-msgstr "iadny"
-
-#: readelf.c:3158
-msgid "2's complement, little endian"
-msgstr "komplement 2, mal endin"
-
-#: readelf.c:3159
-msgid "2's complement, big endian"
-msgstr "domplement 2, vek endin"
-
-#: readelf.c:3177
-msgid "Not an ELF file - it has the wrong magic bytes at the start\n"
-msgstr "Nie je ELF sbor - na zaiatku m nesprvne kzeln bajty\n"
-
-#: readelf.c:3185
-#, c-format
-msgid "ELF Header:\n"
-msgstr "ELF Hlavika:\n"
-
-#: readelf.c:3186
-#, c-format
-msgid "  Magic:   "
-msgstr "  Kzlo:   "
-
-#: readelf.c:3190
-#, c-format
-msgid "  Class:                             %s\n"
-msgstr "  Trieda: %s\n"
-
-#: readelf.c:3192
-#, c-format
-msgid "  Data:                              %s\n"
-msgstr "  Dta: %s\n"
-
-#: readelf.c:3194
-#, c-format
-msgid "  Version:                           %d %s\n"
-msgstr "  Verzia: %d %s\n"
-
-#: readelf.c:3201
-#, c-format
-msgid "  OS/ABI:                            %s\n"
-msgstr "  OS / ABI: %s\n"
-
-#: readelf.c:3203
-#, c-format
-msgid "  ABI Version:                       %d\n"
-msgstr "  ABI verzia: %d\n"
-
-#: readelf.c:3205
-#, c-format
-msgid "  Type:                              %s\n"
-msgstr "  Typ: %s\n"
-
-#: readelf.c:3207
-#, c-format
-msgid "  Machine:                           %s\n"
-msgstr "  Pota: %s\n"
-
-#: readelf.c:3209
-#, c-format
-msgid "  Version:                           0x%lx\n"
-msgstr "  Verzia: 0x%lx\n"
-
-#: readelf.c:3212
-#, c-format
-msgid "  Entry point address:               "
-msgstr "  Adresa vstupnho bodu:               "
-
-#: readelf.c:3214
-#, c-format
-msgid ""
-"\n"
-"  Start of program headers:          "
-msgstr ""
-"\n"
-"  Zaiatok hlaviiek programu:          "
-
-#: readelf.c:3216
-#, c-format
-msgid ""
-" (bytes into file)\n"
-"  Start of section headers:          "
-msgstr ""
-" (bajtov do sboru)\n"
-"  Zaiatok sekcie hlaviiek:          "
-
-#: readelf.c:3218
-#, c-format
-msgid " (bytes into file)\n"
-msgstr " (bajtov do sboru)\n"
-
-#: readelf.c:3220
-#, c-format
-msgid "  Flags:                             0x%lx%s\n"
-msgstr "  Prznaky: 0x%lx%s\n"
-
-#: readelf.c:3223
-#, c-format
-msgid "  Size of this header:               %ld (bytes)\n"
-msgstr "  Vekos tejto hlaviky: %ld (bajtov)\n"
-
-#: readelf.c:3225
-#, c-format
-msgid "  Size of program headers:           %ld (bytes)\n"
-msgstr "  Vekos hlaviiek programu: %ld (bajtov)\n"
-
-#: readelf.c:3227
-#, c-format
-msgid "  Number of program headers:         %ld\n"
-msgstr "  Poet hlaviiek programu: %ld\n"
-
-#: readelf.c:3229
-#, c-format
-msgid "  Size of section headers:           %ld (bytes)\n"
-msgstr "  Vekos sekcie hlaviiek: %ld (bajtov)\n"
-
-#: readelf.c:3231
-#, c-format
-msgid "  Number of section headers:         %ld"
-msgstr "  Poet hlaviiek sekci: %ld"
-
-#: readelf.c:3236
-#, c-format
-msgid "  Section header string table index: %ld"
-msgstr "  Index tabuky reazcov hlaviky sekcie: %ld"
-
-#: readelf.c:3277 readelf.c:3310
-msgid "program headers"
-msgstr "hlaviky programu"
-
-#: readelf.c:3348 readelf.c:3643 readelf.c:3684 readelf.c:3743 readelf.c:3806
-#: readelf.c:4429 readelf.c:4453 readelf.c:5731 readelf.c:5775 readelf.c:5973
-#: readelf.c:7007 readelf.c:7021 readelf.c:7378 readelf.c:7394 readelf.c:7533
-#: readelf.c:7558 readelf.c:8746 readelf.c:8938 readelf.c:9279 readelf.c:9690
-#: readelf.c:9757
-msgid "Out of memory\n"
-msgstr "Nedostatok pamte\n"
-
-#: readelf.c:3375
-#, c-format
-msgid ""
-"\n"
-"There are no program headers in this file.\n"
-msgstr ""
-"\n"
-"V tomto sbore nie s iadne hlaviky programu.\n"
-
-#: readelf.c:3381
-#, c-format
-msgid ""
-"\n"
-"Elf file type is %s\n"
-msgstr ""
-"\n"
-"Typ sboru Elf je %s\n"
-
-#: readelf.c:3382
-#, c-format
-msgid "Entry point "
-msgstr "Bod vstupu "
-
-#: readelf.c:3384
-#, c-format
-msgid ""
-"\n"
-"There are %d program headers, starting at offset "
-msgstr ""
-"\n"
-"Poet njdench hlaviiek programu je %d, zanam na offsete "
-
-#: readelf.c:3396 readelf.c:3398
-#, c-format
-msgid ""
-"\n"
-"Program Headers:\n"
-msgstr ""
-"\n"
-"Hlaviky programu:\n"
-
-#: readelf.c:3402
-#, c-format
-msgid "  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align\n"
-msgstr "  Typ Offset VirtAdr FyzAdr VeSb VePam Przn Zarovnanie\n"
-
-#: readelf.c:3405
-#, c-format
-msgid "  Type           Offset   VirtAddr           PhysAddr           FileSiz  MemSiz   Flg Align\n"
-msgstr "  Typ Offset VirtAdr FyzAdr VeSb VePam Przn Zarovnanie\n"
-
-#: readelf.c:3409
-#, c-format
-msgid "  Type           Offset             VirtAddr           PhysAddr\n"
-msgstr "  Typ Offset VirtAdr FyzAdr\n"
-
-#: readelf.c:3411
-#, c-format
-msgid "                 FileSiz            MemSiz              Flags  Align\n"
-msgstr "                 VeSb VePam Przn Zarovnanie\n"
-
-#: readelf.c:3504
-msgid "more than one dynamic segment\n"
-msgstr "viac ako jeden dynamick segment\n"
-
-#: readelf.c:3515
-msgid "no .dynamic section in the dynamic segment\n"
-msgstr "v dynamickom segmente nebola sekcia .dynamic\n"
-
-#: readelf.c:3527
-msgid "the .dynamic section is not contained within the dynamic segment\n"
-msgstr "v dynamick segment neobsahoval sekciu .dynamic\n"
-
-#: readelf.c:3529
-msgid "the .dynamic section is not the first section in the dynamic segment.\n"
-msgstr "v dynamick segment neobsahoval sekciu .dynamic ako prv\n"
-
-#: readelf.c:3543
-msgid "Unable to find program interpreter name\n"
-msgstr "Ned sa njs nzov prekladaa programu\n"
-
-#: readelf.c:3550
-msgid "Internal error: failed to create format string to display program interpreter\n"
-msgstr "Vntorn chyba: nepodarilo sa vytvori formtovac reazec pre zobrazenie interpreta programu\n"
-
-#: readelf.c:3554
-msgid "Unable to read program interpreter name\n"
-msgstr "Nepodarilo sa preta nzov interpreta programu\n"
-
-#: readelf.c:3557
-#, c-format
-msgid ""
-"\n"
-"      [Requesting program interpreter: %s]"
-msgstr ""
-"\n"
-"      [Poaduje sa preklada programu: %s]"
-
-#: readelf.c:3569
-#, c-format
-msgid ""
-"\n"
-" Section to Segment mapping:\n"
-msgstr ""
-"\n"
-" Sekcia na mapovanie segmentu:\n"
-
-#: readelf.c:3570
-#, c-format
-msgid "  Segment Sections...\n"
-msgstr "  Sekcie segmentu...\n"
-
-#: readelf.c:3605
-msgid "Cannot interpret virtual addresses without program headers.\n"
-msgstr "Virtulne adresy sa nedaj preloi bez hlaviiek programu.\n"
-
-#: readelf.c:3621
-#, c-format
-msgid "Virtual address 0x%lx not located in any PT_LOAD segment.\n"
-msgstr "Virtulna adresa 0x%lx sa nenachdza v iadnom PT_LOAD segmente.\n"
-
-#: readelf.c:3635 readelf.c:3676
-msgid "section headers"
-msgstr "hlaviky sekcie"
-
-#: readelf.c:3720 readelf.c:3783
-msgid "symbols"
-msgstr "symboly"
-
-#: readelf.c:3730 readelf.c:3793
-msgid "symtab shndx"
-msgstr "symtab shndx"
-
-#: readelf.c:4020 readelf.c:4413
-#, c-format
-msgid ""
-"\n"
-"There are no sections in this file.\n"
-msgstr ""
-"\n"
-"V tomto sbore nie s iadne sekcie.\n"
-
-#: readelf.c:4026
-#, c-format
-msgid "There are %d section headers, starting at offset 0x%lx:\n"
-msgstr "Poet hlaviiek sekci je %d, zanajc na offsete 0x%lx:\n"
-
-#: readelf.c:4046 readelf.c:4530 readelf.c:4765 readelf.c:5073 readelf.c:5488
-#: readelf.c:7187
-msgid "string table"
-msgstr "tabuka reazcov"
-
-#: readelf.c:4102
-#, c-format
-msgid "Section %d has invalid sh_entsize %lx (expected %lx)\n"
-msgstr "Sekcia %d m neplatn sh_entsize %lx (oakvan %lx)\n"
-
-#: readelf.c:4122
-msgid "File contains multiple dynamic symbol tables\n"
-msgstr "Sbor obsahuje viacnsobn dynamick tabuky symbolov\n"
-
-#: readelf.c:4135
-msgid "File contains multiple dynamic string tables\n"
-msgstr "Sbor obsahuje viacnsobn dynamick reazcov tabuky\n"
-
-#: readelf.c:4140
-msgid "dynamic strings"
-msgstr "dynamick reazce"
-
-#: readelf.c:4147
-msgid "File contains multiple symtab shndx tables\n"
-msgstr "Sbor obsahuje viacnsobn symtam shndx tabuky\n"
-
-#: readelf.c:4194
-#, c-format
-msgid ""
-"\n"
-"Section Headers:\n"
-msgstr ""
-"\n"
-"Hlaviky sekcie:\n"
-
-#: readelf.c:4196
-#, c-format
-msgid ""
-"\n"
-"Section Header:\n"
-msgstr ""
-"\n"
-"Hlavika sekcie:\n"
-
-#: readelf.c:4202 readelf.c:4213 readelf.c:4224
-#, c-format
-msgid "  [Nr] Name\n"
-msgstr "  [Nr] Nzov\n"
-
-#: readelf.c:4203
-#, c-format
-msgid "       Type            Addr     Off    Size   ES   Lk Inf Al\n"
-msgstr "       Typ Adr Off Vek ES Lk Inf Al\n"
-
-#: readelf.c:4207
-#, c-format
-msgid "  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al\n"
-msgstr "  [Nr] Nzov Typ Adr Off Vek ES Przn Lk Inf Al\n"
-
-#: readelf.c:4214
-#, c-format
-msgid "       Type            Address          Off    Size   ES   Lk Inf Al\n"
-msgstr "       Typ Adresa Off Vekos ES Lk Inf Al\n"
-
-#: readelf.c:4218
-#, c-format
-msgid "  [Nr] Name              Type            Address          Off    Size   ES Flg Lk Inf Al\n"
-msgstr "  [Nr] Nzov Typ Adresa Off Vek ES Przn Lk Inf Al\n"
-
-#: readelf.c:4225
-#, c-format
-msgid "       Type              Address          Offset            Link\n"
-msgstr "       Typ Adresa Offset Odkaz\n"
-
-#: readelf.c:4226
-#, c-format
-msgid "       Size              EntSize          Info              Align\n"
-msgstr "       Vekos EntVekos Info Rozloenie\n"
-
-#: readelf.c:4230
-#, c-format
-msgid "  [Nr] Name              Type             Address           Offset\n"
-msgstr "  [Nr] Nzov Typ Adresa Offset\n"
-
-#: readelf.c:4231
-#, c-format
-msgid "       Size              EntSize          Flags  Link  Info  Align\n"
-msgstr "       Vekos EntVek Prznaky Odkaz Info Rozloenie\n"
-
-#: readelf.c:4236
-#, c-format
-msgid "       Flags\n"
-msgstr "       Prznaky\n"
-
-#: readelf.c:4371
-#, c-format
-msgid ""
-"Key to Flags:\n"
-"  W (write), A (alloc), X (execute), M (merge), S (strings)\n"
-"  I (info), L (link order), G (group), x (unknown)\n"
-"  O (extra OS processing required) o (OS specific), p (processor specific)\n"
-msgstr ""
-"K k prznakom:\n"
-"  W (zpsa), A (alokova), X (vykona), M (spoji), S (reazce)\n"
-"  I (info), L (poriadie odkazov), G (skupina), x (neznmy)\n"
-"  O (vyadovan extra OS spracovanie), o (pecifick pre OS), p (pecifick pre procesor)\n"
-
-#: readelf.c:4389
-#, c-format
-msgid "[<unknown>: 0x%x]"
-msgstr "[<neznmy>: 0x%x]"
-
-#: readelf.c:4420
-msgid "Section headers are not available!\n"
-msgstr "Hlaviky sekcie nie s dostupn!\n"
-
-#: readelf.c:4444
-#, c-format
-msgid ""
-"\n"
-"There are no section groups in this file.\n"
-msgstr ""
-"\n"
-"V tomto sbore nie s iadne skupiny sekcie.\n"
-
-#: readelf.c:4480
-#, c-format
-msgid "Bad sh_link in group section `%s'\n"
-msgstr "Zl sh_link v skupinovej sekcii %s\n"
-
-#: readelf.c:4499
-#, c-format
-msgid "Bad sh_info in group section `%s'\n"
-msgstr "Zl sh_link v skupinovej sekcii %s\n"
-
-#: readelf.c:4538 readelf.c:7690
-msgid "section data"
-msgstr "dta sekcie"
-
-#: readelf.c:4550
-#, c-format
-msgid "   [Index]    Name\n"
-msgstr "   [Index] Nzov\n"
-
-#: readelf.c:4564
-#, c-format
-msgid "section [%5u] in group section [%5u] > maximum section [%5u]\n"
-msgstr "sekcia [%5u] v skupinovej sekcii [%5u] > maximum sekcia [%5u]\n"
-
-#: readelf.c:4570
-#, c-format
-msgid "invalid section [%5u] in group section [%5u]\n"
-msgstr "neplatn sekcia [%5u] v skupinovej sekcii [%5u]\n"
-
-#: readelf.c:4580
-#, c-format
-msgid "section [%5u] in group section [%5u] already in group section [%5u]\n"
-msgstr "sekcia [%5u] v skupinovej sekcii [%5u] u je v skupinovej sekcii [%5u]\n"
-
-#: readelf.c:4593
-#, c-format
-msgid "section 0 in group section [%5u]\n"
-msgstr "sekcia 0 v skupinovej sekcii [%5u]\n"
-
-#: readelf.c:4689
-#, c-format
-msgid ""
-"\n"
-"'%s' relocation section at offset 0x%lx contains %ld bytes:\n"
-msgstr ""
-"\n"
-"%s relokan sekcia na ofsete 0x%lx obsahuje %ld bajtov:\n"
-
-#: readelf.c:4701
-#, c-format
-msgid ""
-"\n"
-"There are no dynamic relocations in this file.\n"
-msgstr ""
-"\n"
-"V sbore sa nenachdzaj iadne dynamick relokcie.\n"
-
-#: readelf.c:4725
-#, c-format
-msgid ""
-"\n"
-"Relocation section "
-msgstr ""
-"\n"
-"Relokan sekcia "
-
-#: readelf.c:4730 readelf.c:5149 readelf.c:5163 readelf.c:5503
-#, c-format
-msgid "'%s'"
-msgstr "%s"
-
-#: readelf.c:4732 readelf.c:5165 readelf.c:5505
-#, c-format
-msgid " at offset 0x%lx contains %lu entries:\n"
-msgstr " na offsete 0x%lx obsahuje %lu poloiek:\n"
-
-#: readelf.c:4784
-#, c-format
-msgid ""
-"\n"
-"There are no relocations in this file.\n"
-msgstr ""
-"\n"
-"V tomto sbore nie s iadne relokcie.\n"
-
-#: readelf.c:4963 readelf.c:5345
-msgid "unwind table"
-msgstr "rozvin tabuku"
-
-#: readelf.c:5022 readelf.c:5435
-#, c-format
-msgid "Skipping unexpected relocation type %s\n"
-msgstr "Preskakujem neoakvan typ relokcie %s\n"
-
-#: readelf.c:5081 readelf.c:5496 readelf.c:5547
-#, c-format
-msgid ""
-"\n"
-"There are no unwind sections in this file.\n"
-msgstr ""
-"\n"
-"V tomto sbore nie s iadne rozvinut sekcie.\n"
-
-#: readelf.c:5144
-#, c-format
-msgid ""
-"\n"
-"Could not find unwind info section for "
-msgstr ""
-"\n"
-"Nepodarilo sa njs informcie o rozvinut sekcie pre "
-
-#: readelf.c:5156
-msgid "unwind info"
-msgstr "informcie o rozvinut"
-
-#: readelf.c:5158 readelf.c:5502
-#, c-format
-msgid ""
-"\n"
-"Unwind section "
-msgstr ""
-"\n"
-"Rozvin sekciu "
-
-#: readelf.c:5712 readelf.c:5756
-msgid "dynamic section"
-msgstr "dynamick sekcia"
-
-#: readelf.c:5833
-#, c-format
-msgid ""
-"\n"
-"There is no dynamic section in this file.\n"
-msgstr ""
-"\n"
-"V tomto sbore nie s iadne dynamick sekcie.\n"
-
-#: readelf.c:5871
-msgid "Unable to seek to end of file!\n"
-msgstr "Nepodarilo sa presun na koniec sboru!\n"
-
-#: readelf.c:5884
-msgid "Unable to determine the number of symbols to load\n"
-msgstr "Ned sa uri poet symbolov na natanie\n"
-
-#: readelf.c:5919
-msgid "Unable to seek to end of file\n"
-msgstr "Ned sa njs koniec sboru\n"
-
-#: readelf.c:5926
-msgid "Unable to determine the length of the dynamic string table\n"
-msgstr "Ned sa uri dka dynamickej tabuky reazcov\n"
-
-#: readelf.c:5931
-msgid "dynamic string table"
-msgstr "dynamick tabuka reazcov"
-
-#: readelf.c:5966
-msgid "symbol information"
-msgstr "infomcia o symbole"
-
-#: readelf.c:5991
-#, c-format
-msgid ""
-"\n"
-"Dynamic section at offset 0x%lx contains %u entries:\n"
-msgstr ""
-"\n"
-"Dynamick sekcia na offsete 0x%lx obsahuje %u poloiek:\n"
-
-#: readelf.c:5994
-#, c-format
-msgid "  Tag        Type                         Name/Value\n"
-msgstr "  Tag Typ Nzov/Hodnota\n"
-
-#: readelf.c:6030
-#, c-format
-msgid "Auxiliary library"
-msgstr "Pomocn kninica"
-
-#: readelf.c:6034
-#, c-format
-msgid "Filter library"
-msgstr "Kninica filtra"
-
-#: readelf.c:6038
-#, c-format
-msgid "Configuration file"
-msgstr "Konfiguran sbor"
-
-#: readelf.c:6042
-#, c-format
-msgid "Dependency audit library"
-msgstr "Auditorsk kninica zvislost"
-
-#: readelf.c:6046
-#, c-format
-msgid "Audit library"
-msgstr "Auditorsk kninica"
-
-#: readelf.c:6064 readelf.c:6092 readelf.c:6120
-#, c-format
-msgid "Flags:"
-msgstr "Prznaky:"
-
-#: readelf.c:6067 readelf.c:6095 readelf.c:6122
-#, c-format
-msgid " None\n"
-msgstr " iadne\n"
-
-#: readelf.c:6243
-#, c-format
-msgid "Shared library: [%s]"
-msgstr "Zdiean kninica: [%s]"
-
-#: readelf.c:6246
-#, c-format
-msgid " program interpreter"
-msgstr " preklada programu"
-
-#: readelf.c:6250
-#, c-format
-msgid "Library soname: [%s]"
-msgstr "Kninica soname: [%s]"
-
-#: readelf.c:6254
-#, c-format
-msgid "Library rpath: [%s]"
-msgstr "Kninica rpath: [%s]"
-
-#: readelf.c:6258
-#, c-format
-msgid "Library runpath: [%s]"
-msgstr "Kninica runpath: [%s]"
-
-#: readelf.c:6321
-#, c-format
-msgid "Not needed object: [%s]\n"
-msgstr "Nepotrebn objekt: [%s]\n"
-
-#: readelf.c:6444
-#, c-format
-msgid ""
-"\n"
-"Version definition section '%s' contains %ld entries:\n"
-msgstr ""
-"\n"
-"Sekcia defincie verzie %s obsahuje %ld poloiek:\n"
-
-#: readelf.c:6447
-#, c-format
-msgid "  Addr: 0x"
-msgstr "  Adr: 0x"
-
-#: readelf.c:6449 readelf.c:6656
-#, c-format
-msgid "  Offset: %#08lx  Link: %lx (%s)\n"
-msgstr "  Offset: %#08lx Odkaz: %lx (%s)\n"
-
-#: readelf.c:6458
-msgid "version definition section"
-msgstr "sekcia defincie verzie"
-
-#: readelf.c:6484
-#, c-format
-msgid "  %#06x: Rev: %d  Flags: %s"
-msgstr "  %#06x: Rev: %d Prznaky: %s"
-
-#: readelf.c:6487
-#, c-format
-msgid "  Index: %d  Cnt: %d  "
-msgstr "  Index: %d Cnt: %d  "
-
-#: readelf.c:6498
-#, c-format
-msgid "Name: %s\n"
-msgstr "Nzov: %s\n"
-
-#: readelf.c:6500
-#, c-format
-msgid "Name index: %ld\n"
-msgstr "Index nzvov: %ld\n"
-
-#: readelf.c:6515
-#, c-format
-msgid "  %#06x: Parent %d: %s\n"
-msgstr "  %#06x: Rodi %d: %s\n"
-
-#: readelf.c:6518
-#, c-format
-msgid "  %#06x: Parent %d, name index: %ld\n"
-msgstr "  %#06x: Rodi %d, index nzvov: %ld\n"
-
-#: readelf.c:6537
-#, c-format
-msgid ""
-"\n"
-"Version needs section '%s' contains %ld entries:\n"
-msgstr ""
-"\n"
-"Sekcia potreby verzie %s obsahuje %ld poloiek:\n"
-
-#: readelf.c:6540
-#, c-format
-msgid " Addr: 0x"
-msgstr " Adr: 0x"
-
-#: readelf.c:6542
-#, c-format
-msgid "  Offset: %#08lx  Link to section: %ld (%s)\n"
-msgstr "  Posun: %#08lx Odkaz na sekciu: %ld (%s)\n"
-
-#: readelf.c:6551
-msgid "version need section"
-msgstr "sekcia potreby verzie"
-
-#: readelf.c:6573
-#, c-format
-msgid "  %#06x: Version: %d"
-msgstr "  %#06x: Verzia: %d"
-
-#: readelf.c:6576
-#, c-format
-msgid "  File: %s"
-msgstr "  Sbor: %s"
-
-#: readelf.c:6578
-#, c-format
-msgid "  File: %lx"
-msgstr "  Sbor: %lx"
-
-#: readelf.c:6580
-#, c-format
-msgid "  Cnt: %d\n"
-msgstr "  Poet: %d\n"
-
-#: readelf.c:6598
-#, c-format
-msgid "  %#06x:   Name: %s"
-msgstr "  %#06x: Nzov: %s"
-
-#: readelf.c:6601
-#, c-format
-msgid "  %#06x:   Name index: %lx"
-msgstr "  %#06x: Index nzvu: %lx"
-
-#: readelf.c:6604
-#, c-format
-msgid "  Flags: %s  Version: %d\n"
-msgstr "  Prznaky: %s Verzia: %d\n"
-
-#: readelf.c:6647
-msgid "version string table"
-msgstr "tabuka reazcov verzie"
-
-#: readelf.c:6651
-#, c-format
-msgid ""
-"\n"
-"Version symbols section '%s' contains %d entries:\n"
-msgstr ""
-"\n"
-"Sekcia symbolov verzie %s obsahuje %d poloiek:\n"
-
-#: readelf.c:6654
-#, c-format
-msgid " Addr: "
-msgstr " Adr: "
-
-#: readelf.c:6664
-msgid "version symbol data"
-msgstr "dta symbolu verzie"
-
-#: readelf.c:6691
-msgid "   0 (*local*)    "
-msgstr "   0 (*loklny*)    "
-
-#: readelf.c:6695
-msgid "   1 (*global*)   "
-msgstr "   1 (*globlny*)   "
-
-#: readelf.c:6733 readelf.c:7255
-msgid "version need"
-msgstr "nutnos verzie"
-
-#: readelf.c:6743
-msgid "version need aux (2)"
-msgstr "nutnos verzie aux (2)"
-
-#: readelf.c:6785 readelf.c:7320
-msgid "version def"
-msgstr "def verzie"
-
-#: readelf.c:6805 readelf.c:7335
-msgid "version def aux"
-msgstr "verzia def aux"
-
-#: readelf.c:6836
-#, c-format
-msgid ""
-"\n"
-"No version information found in this file.\n"
-msgstr ""
-"\n"
-"V tomto sbore neboli njden informcie o verzii.\n"
-
-#: readelf.c:6955
-#, c-format
-msgid "<other>: %x"
-msgstr "<in>: %x"
-
-#: readelf.c:7013
-msgid "Unable to read in dynamic data\n"
-msgstr "Ned sa ta v dynamickch dtach\n"
-
-#: readelf.c:7069 readelf.c:7443 readelf.c:7467 readelf.c:7497 readelf.c:7521
-msgid "Unable to seek to start of dynamic information\n"
-msgstr "Nepodarilo sa presun na zaiatok dynamickch informci\n"
-
-#: readelf.c:7075 readelf.c:7449
-msgid "Failed to read in number of buckets\n"
-msgstr "Zlyhalo tanie v slach oblast\n"
-
-#: readelf.c:7081
-msgid "Failed to read in number of chains\n"
-msgstr "Zlyhalo tanie v slach zreazen\n"
-
-#: readelf.c:7101
-#, c-format
-msgid ""
-"\n"
-"Symbol table for image:\n"
-msgstr ""
-"\n"
-"Tabuka symbolov pre obraz:\n"
-
-#: readelf.c:7103
-#, c-format
-msgid "  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"
-msgstr "  sl Buc: Hodnota Vekos Typ Vzba Vid Ndx Nzov\n"
-
-#: readelf.c:7105
-#, c-format
-msgid "  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"
-msgstr "  sl Buc: Hodnota Vekos Typ Vzba Vid Ndx Nzov\n"
-
-#: readelf.c:7163
-#, c-format
-msgid ""
-"\n"
-"Symbol table '%s' contains %lu entries:\n"
-msgstr ""
-"\n"
-"Symbolick tabuka %s obsahuje %lu poloiek:\n"
-
-#: readelf.c:7167
-#, c-format
-msgid "   Num:    Value  Size Type    Bind   Vis      Ndx Name\n"
-msgstr "   sl: Hodnota Vekos Typ Vzba Vid Ndx Nzov\n"
-
-#: readelf.c:7169
-#, c-format
-msgid "   Num:    Value          Size Type    Bind   Vis      Ndx Name\n"
-msgstr "   sl: Hodnota Vekos Typ Vzba Vid Ndx Nzov\n"
-
-#: readelf.c:7225
-msgid "version data"
-msgstr "verzia"
-
-#: readelf.c:7268
-msgid "version need aux (3)"
-msgstr "potreba verzie aux (3)"
-
-#: readelf.c:7295
-msgid "bad dynamic symbol\n"
-msgstr ""
-
-#: readelf.c:7359
-#, c-format
-msgid ""
-"\n"
-"Dynamic symbol information is not available for displaying symbols.\n"
-msgstr ""
-"\n"
-"Informcia o dynamickom symbole nie je dostupn pre zobrazenie symbolov.\n"
-
-#: readelf.c:7371
-#, c-format
-msgid ""
-"\n"
-"Histogram for bucket list length (total of %lu buckets):\n"
-msgstr ""
-"\n"
-"Histogram pre dku zoznamu blokov (celkovo z %lu blokov):\n"
-
-#: readelf.c:7373 readelf.c:7539
-#, c-format
-msgid " Length  Number     %% of total  Coverage\n"
-msgstr " Vekos %% z celkovho pokrytia\n"
-
-#: readelf.c:7505
-msgid "Failed to determine last chain length\n"
-msgstr ""
-
-#: readelf.c:7537
-#, c-format
-msgid ""
-"\n"
-"Histogram for `.gnu.hash' bucket list length (total of %lu buckets):\n"
-msgstr ""
-
-#: readelf.c:7603
-#, c-format
-msgid ""
-"\n"
-"Dynamic info segment at offset 0x%lx contains %d entries:\n"
-msgstr ""
-"\n"
-"Dynamick info segment na posune 0x%lx obsahuje %d poloiek:\n"
-
-#: readelf.c:7606
-#, c-format
-msgid " Num: Name                           BoundTo     Flags\n"
-msgstr " sl: Nzov Zviazan Prznaky\n"
-
-#: readelf.c:7658
-#, c-format
-msgid ""
-"\n"
-"Assembly dump of section %s\n"
-msgstr ""
-"\n"
-"Zostavi vpis pamte zo sekcie %s\n"
-
-#: readelf.c:7680
-#, c-format
-msgid ""
-"\n"
-"Section '%s' has no data to dump.\n"
-msgstr ""
-"\n"
-"Sekcia %s nem iadne dta na vypsanie.\n"
-
-#: readelf.c:7685
-#, c-format
-msgid ""
-"\n"
-"Hex dump of section '%s':\n"
-msgstr ""
-"\n"
-"Hexadecimlny vpis pamte sekcie %s:\n"
-
-#: readelf.c:7710
-#, c-format
-msgid " NOTE: This section has relocations against it, but these have NOT been applied to this dump.\n"
-msgstr ""
-
-#: readelf.c:7845
-#, c-format
-msgid "skipping relocation of unknown size against offset 0x%lx in section %s\n"
-msgstr ""
-
-#: readelf.c:7854
-#, c-format
-msgid "skipping invalid relocation offset 0x%lx in section %s\n"
-msgstr "preskakuje sa neplatn posun relokcie 0x%lx v sekcii %s\n"
-
-#: readelf.c:7875
-#, c-format
-msgid "skipping unexpected symbol type %s in relocation in section .rela%s\n"
-msgstr "preskakuje sa neoakvan typ symbolu %s v relokcii v sekcii .rela%s\n"
-
-#: readelf.c:7902
-#, c-format
-msgid "skipping unexpected symbol type %s in relocation in section .rela.%s\n"
-msgstr "preskakuje sa neoakvan typ symbolu %s v relokcii v sekcii .rela.%s\n"
-
-#: readelf.c:7935
-#, c-format
-msgid "%s section data"
-msgstr "%s dta sekcie"
-
-#: readelf.c:7972
-#, c-format
-msgid ""
-"\n"
-"Section '%s' has no debugging data.\n"
-msgstr ""
-"\n"
-"Sekcia %s nem iadne ladiace dta.\n"
-
-#: readelf.c:7998
-#, c-format
-msgid "Unrecognized debug section: %s\n"
-msgstr "Nerozpoznan ladiaca sekcia: %s\n"
-
-#: readelf.c:8026
-#, c-format
-msgid "Section '%s' was not dumped because it does not exist!\n"
-msgstr "Sekcia %s nebola vypsan, pretoe neexistuje!\n"
-
-#: readelf.c:8061
-#, c-format
-msgid "Section %d was not dumped because it does not exist!\n"
-msgstr "Pre sekcie %d nebol uroben vpis z pamte, pretoe neexistuje!\n"
-
-#: readelf.c:8478
-msgid "attributes"
-msgstr "atribty"
-
-#: readelf.c:8497
-#, c-format
-msgid "ERROR: Bad section length (%d > %d)\n"
-msgstr "CHYBA: Zl dka sekcie (%d > %d)\n"
-
-#: readelf.c:8522
-#, c-format
-msgid "ERROR: Bad subsection length (%d > %d)\n"
-msgstr "CHYBA: Zl dka podsekcie (%d > %d)\n"
-
-#: readelf.c:8578
-#, c-format
-msgid "Unknown format '%c'\n"
-msgstr "Neznmy formt '%c'\n"
-
-#: readelf.c:8651 readelf.c:9019
-msgid "liblist"
-msgstr "liblist"
-
-#: readelf.c:8740
-msgid "options"
-msgstr "voby"
-
-#: readelf.c:8770
-#, c-format
-msgid ""
-"\n"
-"Section '%s' contains %d entries:\n"
-msgstr ""
-"\n"
-"Sekcia %s obsahuje %d poloiek:\n"
-
-#: readelf.c:8931
-msgid "conflict list found without a dynamic symbol table\n"
-msgstr ""
-
-#: readelf.c:8947 readelf.c:8961
-msgid "conflict"
-msgstr "konflikt"
-
-#: readelf.c:8971
-#, c-format
-msgid ""
-"\n"
-"Section '.conflict' contains %lu entries:\n"
-msgstr ""
-"\n"
-"Sekcia '.conflict' obsahuje %lu poloiek:\n"
-
-#: readelf.c:8973
-msgid "  Num:    Index       Value  Name"
-msgstr "  sl: Index Hodnota Nzov"
-
-#: readelf.c:9026
-msgid "liblist string table"
-msgstr "tabuka reazcov liblist"
-
-#: readelf.c:9036
-#, c-format
-msgid ""
-"\n"
-"Library list section '%s' contains %lu entries:\n"
-msgstr ""
-"\n"
-"Sekcia zoznamu kninc %s obsahuje %lu poloiek:\n"
-
-#: readelf.c:9089
-msgid "NT_AUXV (auxiliary vector)"
-msgstr "NT_AUXV (pomocn vektor)"
-
-#: readelf.c:9091
-msgid "NT_PRSTATUS (prstatus structure)"
-msgstr "NT_PRSTATUS (truktra prstatus)"
-
-#: readelf.c:9093
-msgid "NT_FPREGSET (floating point registers)"
-msgstr "NT_FPREGSET (registre pohyblivej iarky)"
-
-#: readelf.c:9095
-msgid "NT_PRPSINFO (prpsinfo structure)"
-msgstr "NT_PRPSINFO (trutkra prpsinfo)"
-
-#: readelf.c:9097
-msgid "NT_TASKSTRUCT (task structure)"
-msgstr "NT_TASKSTRUCT (trukra loh)"
-
-#: readelf.c:9099
-msgid "NT_PRXFPREG (user_xfpregs structure)"
-msgstr "NT_PRXFPREG (truktra user_xfpregs)"
-
-#: readelf.c:9101
-msgid "NT_PSTATUS (pstatus structure)"
-msgstr "NT_PSTATUS (truktra pstatus)"
-
-#: readelf.c:9103
-msgid "NT_FPREGS (floating point registers)"
-msgstr "NT_FPREGS (registre pohyblivej iarky)"
-
-#: readelf.c:9105
-msgid "NT_PSINFO (psinfo structure)"
-msgstr "NT_PSINFO (truktra psinfo)"
-
-#: readelf.c:9107
-msgid "NT_LWPSTATUS (lwpstatus_t structure)"
-msgstr "NT_LWPSTATUS (truktra lwpstatus_t)"
-
-#: readelf.c:9109
-msgid "NT_LWPSINFO (lwpsinfo_t structure)"
-msgstr "NT_LWPSINFO (truktra lwpsinfo_t)"
-
-#: readelf.c:9111
-msgid "NT_WIN32PSTATUS (win32_pstatus structure)"
-msgstr "NT_WIN32PSTATUS (truktra win32_pstatus)"
-
-#: readelf.c:9119
-msgid "NT_VERSION (version)"
-msgstr "NT_VERSION (verzia)"
-
-#: readelf.c:9121
-msgid "NT_ARCH (architecture)"
-msgstr "NT_ARCH (architektra)"
-
-#: readelf.c:9126 readelf.c:9148
-#, c-format
-msgid "Unknown note type: (0x%08x)"
-msgstr "Neznmy typ poznmky: (0x%x08x)"
-
-#. NetBSD core "procinfo" structure.
-#: readelf.c:9138
-msgid "NetBSD procinfo structure"
-msgstr "NetBSD truktra procinfo"
-
-#: readelf.c:9165 readelf.c:9179
-msgid "PT_GETREGS (reg structure)"
-msgstr "PT_GETREGS (truktra reg)"
-
-#: readelf.c:9167 readelf.c:9181
-msgid "PT_GETFPREGS (fpreg structure)"
-msgstr "PT_GETFPREGS (truktra fpreg)"
-
-#: readelf.c:9187
-#, c-format
-msgid "PT_FIRSTMACH+%d"
-msgstr "PT_FIRSTMACH+%d"
-
-#: readelf.c:9233
-msgid "notes"
-msgstr "poznmky"
-
-#: readelf.c:9239
-#, c-format
-msgid ""
-"\n"
-"Notes at offset 0x%08lx with length 0x%08lx:\n"
-msgstr ""
-"\n"
-"Poznmky na posune 0x%08lx s dkou 0x%08lx:\n"
-
-#: readelf.c:9241
-#, c-format
-msgid "  Owner\t\tData size\tDescription\n"
-msgstr "  Vlastnk\t\tVekos dt\tPopis\n"
-
-#: readelf.c:9260
-#, c-format
-msgid "corrupt note found at offset %lx into core notes\n"
-msgstr "bola njden pokoden poznmka na posune %lx k poznmkam jadra\n"
-
-#: readelf.c:9262
-#, c-format
-msgid " type: %lx, namesize: %08lx, descsize: %08lx\n"
-msgstr " typ: %lx, vekos nzvu: %08lx, vekos popisu: %08lx\n"
-
-#: readelf.c:9360
-#, c-format
-msgid "No note segments present in the core file.\n"
-msgstr "V jadrovom sbore nie s iadne segmenty poznmok.\n"
-
-#: readelf.c:9444
-msgid ""
-"This instance of readelf has been built without support for a\n"
-"64 bit data type and so it cannot read 64 bit ELF files.\n"
-msgstr ""
-"Tto intancia readelf bola zostaven bez podpory pre\n"
-"64 bitov dtov typ, a tak nedoke ta 64 bitov ELF sbory.\n"
-
-#: readelf.c:9493 readelf.c:9837
-#, c-format
-msgid "%s: Failed to read file header\n"
-msgstr "%s: Nepodarilo sa nata hlaviku sboru\n"
-
-#: readelf.c:9506
-#, c-format
-msgid ""
-"\n"
-"File: %s\n"
-msgstr ""
-"\n"
-"Sbor: %s\n"
-
-#: readelf.c:9654 readelf.c:9675 readelf.c:9712 readelf.c:9792
-#, c-format
-msgid "%s: failed to read archive header\n"
-msgstr "%s: nepodarilo sa nata hlaviku archvu\n"
-
-#: readelf.c:9665
-#, c-format
-msgid "%s: failed to skip archive symbol table\n"
-msgstr "%s: nepodarilo sa preskoi tabuku symbolov v archve\n"
-
-#: readelf.c:9697
-#, c-format
-msgid "%s: failed to read string table\n"
-msgstr "%s: nepodarilo sa preta tabuku reazcov\n"
-
-#: readelf.c:9733
-#, c-format
-msgid "%s: invalid archive string table offset %lu\n"
-msgstr "%s: neplatn posun tabuky reazcov v archve %lu\n"
-
-#: readelf.c:9749
-#, c-format
-msgid "%s: bad archive file name\n"
-msgstr "%s: zl nzov sboru archvu\n"
-
-#: readelf.c:9781
-#, c-format
-msgid "%s: failed to seek to next archive header\n"
-msgstr "%s: nepodarilo sa njs hlaviku alieho archvu\n"
-
-#: readelf.c:9815
-#, c-format
-msgid "'%s': No such file\n"
-msgstr "%s: Tak sbor neexistuje\n"
-
-#: readelf.c:9817
-#, c-format
-msgid "Could not locate '%s'.  System error message: %s\n"
-msgstr "Nepodarilo sa njs %s. Sprva systmovej chyby: %s\n"
-
-#: readelf.c:9824
-#, c-format
-msgid "'%s' is not an ordinary file\n"
-msgstr "%s nie je ben sbor\n"
-
-#: readelf.c:9831
-#, c-format
-msgid "Input file '%s' is not readable.\n"
-msgstr "Vstupn sbor %s sa ned ta.\n"
-
-#: rename.c:130
-#, c-format
-msgid "%s: cannot set time: %s"
-msgstr "%s: ned sa nastavi as: %s"
-
-#. We have to clean up here.
-#: rename.c:165 rename.c:203
-#, c-format
-msgid "unable to rename '%s' reason: %s"
-msgstr "ned sa premenova %s dvod: %s"
-
-#: rename.c:211
-#, c-format
-msgid "unable to copy file '%s' reason: %s"
-msgstr "ned sa skoprova sbor %s dvod: %s"
-
-#: resbin.c:119
-#, c-format
-msgid "%s: not enough binary data"
-msgstr "%s: nedostatok binrnych dt"
-
-#: resbin.c:135
-msgid "null terminated unicode string"
-msgstr "unicode reazec zakonen null-om"
-
-#: resbin.c:162 resbin.c:168
-msgid "resource ID"
-msgstr "ID zdroja"
-
-#: resbin.c:207
-msgid "cursor"
-msgstr "kurzor"
-
-#: resbin.c:238 resbin.c:245
-msgid "menu header"
-msgstr "hlavika menu"
-
-#: resbin.c:254
-msgid "menuex header"
-msgstr "hlavika menuex"
-
-#: resbin.c:258
-msgid "menuex offset"
-msgstr "posun menuex"
-
-#: resbin.c:263
-#, c-format
-msgid "unsupported menu version %d"
-msgstr "nepodporovan verzia menu %d"
-
-#: resbin.c:288 resbin.c:303 resbin.c:365
-msgid "menuitem header"
-msgstr "hlavika menuitem"
-
-#: resbin.c:395
-msgid "menuitem"
-msgstr "menuitem"
-
-#: resbin.c:432 resbin.c:460
-msgid "dialog header"
-msgstr "hlavika dialogu"
-
-#: resbin.c:450
-#, c-format
-msgid "unexpected DIALOGEX version %d"
-msgstr "neoakvan verzia DIALOGEX %d"
-
-#: resbin.c:495
-msgid "dialog font point size"
-msgstr "bodov vekos psma dialogu"
-
-#: resbin.c:503
-msgid "dialogex font information"
-msgstr "informcia o psme pre dialogex"
-
-#: resbin.c:529 resbin.c:547
-msgid "dialog control"
-msgstr "riadenie dialogu"
-
-#: resbin.c:539
-msgid "dialogex control"
-msgstr "riadenie dialogex"
-
-#: resbin.c:568
-msgid "dialog control end"
-msgstr "koniec riadenia dialogu"
-
-#: resbin.c:580
-msgid "dialog control data"
-msgstr "dta riadenia dialogu"
-
-#: resbin.c:620
-msgid "stringtable string length"
-msgstr "dka reazca stringtable"
-
-#: resbin.c:630
-msgid "stringtable string"
-msgstr "reazec stringtable"
-
-#: resbin.c:660
-msgid "fontdir header"
-msgstr "hlavika fontdir"
-
-#: resbin.c:674
-msgid "fontdir"
-msgstr "fontdir"
-
-#: resbin.c:691
-msgid "fontdir device name"
-msgstr "nzov zariadenia fontdir"
-
-#: resbin.c:697
-msgid "fontdir face name"
-msgstr "nzov prednej strany fontdir"
-
-#: resbin.c:737
-msgid "accelerator"
-msgstr "akcelertor"
-
-#: resbin.c:796
-msgid "group cursor header"
-msgstr "hlavika kurzora skupiny"
-
-#: resbin.c:800 resrc.c:1306
-#, c-format
-msgid "unexpected group cursor type %d"
-msgstr "neoakvan typ kurzora skupiny %d"
-
-#: resbin.c:815
-msgid "group cursor"
-msgstr "kurzor skupiny"
-
-#: resbin.c:851
-msgid "group icon header"
-msgstr "hlavika ikony skupiny"
-
-#: resbin.c:855 resrc.c:1253
-#, c-format
-msgid "unexpected group icon type %d"
-msgstr "neoakvan typ ikony skupiny %d"
-
-#: resbin.c:870
-msgid "group icon"
-msgstr "ikona skupiny"
-
-#: resbin.c:934 resbin.c:1150
-msgid "unexpected version string"
-msgstr "neoakvan reazec verzie"
-
-#: resbin.c:965
-#, c-format
-msgid "version length %d does not match resource length %lu"
-msgstr "dka verzie %d nie je zhodn s dkou zdroja %lu"
-
-#: resbin.c:969
-#, c-format
-msgid "unexpected version type %d"
-msgstr "neoakvan typ verzie %d"
-
-#: resbin.c:981
-#, c-format
-msgid "unexpected fixed version information length %ld"
-msgstr "neoakvan pevn dka hodnoty verzie %ld"
-
-#: resbin.c:984
-msgid "fixed version info"
-msgstr "pevn informcie o verzii"
-
-#: resbin.c:988
-#, c-format
-msgid "unexpected fixed version signature %lu"
-msgstr "neoakvan signatra pevnej verzie %lu"
-
-#: resbin.c:992
-#, c-format
-msgid "unexpected fixed version info version %lu"
-msgstr "neoakvan verzia informcie o pevnej verzii %lu"
-
-#: resbin.c:1021
-msgid "version var info"
-msgstr "variabiln informcie o verzii"
-
-#: resbin.c:1038
-#, c-format
-msgid "unexpected stringfileinfo value length %ld"
-msgstr "neoakvan dka hodnoty stringfileinfo %ld"
-
-#: resbin.c:1048
-#, c-format
-msgid "unexpected version stringtable value length %ld"
-msgstr "neoakvan dka hodnoty tabuky reazcov %ld"
-
-#: resbin.c:1082
-#, c-format
-msgid "unexpected version string length %ld != %ld + %ld"
-msgstr "neoakvan dka hodnoty reazca %ld != %ld + %ld"
-
-#: resbin.c:1093
-#, c-format
-msgid "unexpected version string length %ld < %ld"
-msgstr "neoakvan dka hodnoty reazca %ld < %ld"
-
-#: resbin.c:1110
-#, c-format
-msgid "unexpected varfileinfo value length %ld"
-msgstr "neoakvan dka hodnoty varfileinfo %ld"
-
-#: resbin.c:1129
-msgid "version varfileinfo"
-msgstr "verzia varfileinfo"
-
-#: resbin.c:1144
-#, c-format
-msgid "unexpected version value length %ld"
-msgstr "neoakvan dka hodnoty verzie %ld"
-
-#: rescoff.c:124
-msgid "filename required for COFF input"
-msgstr "poaduje sa nzov sboru pre COFF vstup"
-
-#: rescoff.c:141
-#, c-format
-msgid "%s: no resource section"
-msgstr "%s: iadna sekcia zdroja"
-
-#: rescoff.c:173
-#, c-format
-msgid "%s: %s: address out of bounds"
-msgstr "%s: %s: adresa mimo rozsah"
-
-#: rescoff.c:190
-msgid "directory"
-msgstr "prieinok"
-
-#: rescoff.c:218
-msgid "named directory entry"
-msgstr "nazvan poloka prieinku"
-
-#: rescoff.c:227
-msgid "directory entry name"
-msgstr "nzov poloky prieinku"
-
-#: rescoff.c:247
-msgid "named subdirectory"
-msgstr "nazvan podprieinok"
-
-#: rescoff.c:255
-msgid "named resource"
-msgstr "nazvan zdroj"
-
-#: rescoff.c:270
-msgid "ID directory entry"
-msgstr "ID poloka prieinku"
-
-#: rescoff.c:287
-msgid "ID subdirectory"
-msgstr "ID podprieinku"
-
-#: rescoff.c:295
-msgid "ID resource"
-msgstr "ID zdroja"
-
-#: rescoff.c:320
-msgid "resource type unknown"
-msgstr "neznmy typ zdroja"
-
-#: rescoff.c:323
-msgid "data entry"
-msgstr "dtov poloka"
-
-#: rescoff.c:331
-msgid "resource data"
-msgstr "dta zdroja"
-
-#: rescoff.c:336
-msgid "resource data size"
-msgstr "vekos zdrojovch dt"
-
-#: rescoff.c:431
-msgid "filename required for COFF output"
-msgstr "vyaduje sa nzov sboru pre COFF vstup"
-
-#: rescoff.c:718
-msgid "can't get BFD_RELOC_RVA relocation type"
-msgstr "ned sa zska typ relokcie pre BFD_RELOC_RVA"
-
-#: resrc.c:262 resrc.c:333
-#, c-format
-msgid "can't open temporary file `%s': %s"
-msgstr "ned sa otvori doasn sbor %s: %s"
-
-#: resrc.c:268
-#, c-format
-msgid "can't redirect stdout: `%s': %s"
-msgstr "ned sa presmerova stdout: %s: %s"
-
-#: resrc.c:284
-#, c-format
-msgid "%s %s: %s"
-msgstr "%s %s: %s"
-
-#: resrc.c:329
-#, c-format
-msgid "can't execute `%s': %s"
-msgstr "ned sa vykona %s: %s"
-
-#: resrc.c:338
-#, c-format
-msgid "Using temporary file `%s' to read preprocessor output\n"
-msgstr "Pouva sa doasn sbor %s na tanie vstupu preprocesora\n"
-
-#: resrc.c:345
-#, c-format
-msgid "can't popen `%s': %s"
-msgstr "ned sa otvori pomocou popen %s: %s"
-
-#: resrc.c:347
-#, c-format
-msgid "Using popen to read preprocessor output\n"
-msgstr "Pouva sa popen na tanie vstupu preprocesora\n"
-
-#: resrc.c:413
-#, c-format
-msgid "Tried `%s'\n"
-msgstr "Vyskan %s\n"
-
-#: resrc.c:424
-#, c-format
-msgid "Using `%s'\n"
-msgstr "Pouva sa %s\n"
-
-#: resrc.c:583
-#, c-format
-msgid "%s:%d: %s\n"
-msgstr "%s:%d: %s\n"
-
-#: resrc.c:591
-#, c-format
-msgid "%s: unexpected EOF"
-msgstr "%s: neoakvan znak konca sboru"
-
-#: resrc.c:640
-#, c-format
-msgid "%s: read of %lu returned %lu"
-msgstr "%s: preitan z %lu vrtench %lu"
-
-#: resrc.c:678 resrc.c:1453
-#, c-format
-msgid "stat failed on bitmap file `%s': %s"
-msgstr "zlyhal stat na sbor bitmapy %s: %s"
-
-#: resrc.c:729
-#, c-format
-msgid "cursor file `%s' does not contain cursor data"
-msgstr "sboru kurzora %s neobsahuje dta o kurzore"
-
-#: resrc.c:761 resrc.c:1161
-#, c-format
-msgid "%s: fseek to %lu failed: %s"
-msgstr "%s: fseek na %lu zlyhal: %s"
-
-#: resrc.c:887
-msgid "help ID requires DIALOGEX"
-msgstr "ID pomoci vyaduje DIALOGEX"
-
-#: resrc.c:889
-msgid "control data requires DIALOGEX"
-msgstr "dta riadenia vyaduj DIALOGEX"
-
-#: resrc.c:917
-#, c-format
-msgid "stat failed on font file `%s': %s"
-msgstr "nepodaril sa stat na sbor psma %s: %s"
-
-#: resrc.c:1130
-#, c-format
-msgid "icon file `%s' does not contain icon data"
-msgstr "sbor ikony %s neobsahuje dta o ikone"
-
-#: resrc.c:1675 resrc.c:1710
-#, c-format
-msgid "stat failed on file `%s': %s"
-msgstr "zlyhal stat sboru %s: %s"
-
-#: resrc.c:1891
-#, c-format
-msgid "can't open `%s' for output: %s"
-msgstr "ned sa otvori %s na tanie: %s"
-
-#: size.c:84
-#, c-format
-msgid " Displays the sizes of sections inside binary files\n"
-msgstr " Zobrazuje vekosti sekci vo vntri binrnych sborov\n"
-
-#: size.c:85
-#, c-format
-msgid " If no input file(s) are specified, a.out is assumed\n"
-msgstr " Ak sa neuria iadne vstupn sbory, predpoklad sa a.out\n"
-
-#: size.c:86
-#, c-format
-msgid ""
-" The options are:\n"
-"  -A|-B     --format={sysv|berkeley}  Select output style (default is %s)\n"
-"  -o|-d|-x  --radix={8|10|16}         Display numbers in octal, decimal or hex\n"
-"  -t        --totals                  Display the total sizes (Berkeley only)\n"
-"            --target=<bfdname>        Set the binary file format\n"
-"            @<file>                   Read options from <file>\n"
-"  -h        --help                    Display this information\n"
-"  -v        --version                 Display the program's version\n"
-"\n"
-msgstr ""
-" Voby s:\n"
-"  -A|-B --format={sysv|berkeley} Vybra tl vstupu (tandardne %s)\n"
-"  -o|-d|-x --radix={8|10|16} Zobrazi sla osmikovo, desiatkovo alebo hexadecimlne\n"
-"  -t --totals Zobrazi celkov vekosti (iba Berkeley)\n"
-"           --target=<bfdname> Nastavi formt binrneho sboru\n"
-"           @<sbor> ta voby zo <sboru>\n"
-"  -h --help Zobrazi tto informciu\n"
-"  -v --version Zobrazi verziu programu\n"
-"\n"
-
-#: size.c:159
-#, c-format
-msgid "invalid argument to --format: %s"
-msgstr "neplatn argument pre --format: %s"
-
-#: size.c:186
-#, c-format
-msgid "Invalid radix: %s\n"
-msgstr "Neplatn zklad sla: %s\n"
-
-#: srconv.c:1724
-#, c-format
-msgid "Convert a COFF object file into a SYSROFF object file\n"
-msgstr "Previes sbor objektu COFF na sbor objektu SYSROFF\n"
-
-#: srconv.c:1725
-#, c-format
-msgid ""
-" The options are:\n"
-"  -q --quick       (Obsolete - ignored)\n"
-"  -n --noprescan   Do not perform a scan to convert commons into defs\n"
-"  -d --debug       Display information about what is being done\n"
-"  @<file>          Read options from <file>\n"
-"  -h --help        Display this information\n"
-"  -v --version     Print the program's version number\n"
-msgstr ""
-" Voby s:\n"
-"  -q --quick (Zastaral - ignorovan)\n"
-"  -n --noprescan Nevykona skenovanie pre prevod common-ov na def-y\n"
-"  -d --debug Zobrazi informciu o tom, o sa rob\n"
-"  @<sbor> ta voby zo <sboru>\n"
-"  -h --help Zobrazi tto informciu\n"
-"  -v --version Zobrazi verziu programu\n"
-
-#: srconv.c:1871
-#, c-format
-msgid "unable to open output file %s"
-msgstr "ned sa otvori vstupn sbor %s"
-
-#: stabs.c:328 stabs.c:1706
-msgid "numeric overflow"
-msgstr "seln preteenie"
-
-#: stabs.c:338
-#, c-format
-msgid "Bad stab: %s\n"
-msgstr "Zl stab: %s\n"
-
-#: stabs.c:346
-#, c-format
-msgid "Warning: %s: %s\n"
-msgstr "Upozornenie: %s: %s\n"
-
-#: stabs.c:456
-#, c-format
-msgid "N_LBRAC not within function\n"
-msgstr "N_LBRAC nie je vo funkcii\n"
-
-#: stabs.c:495
-#, c-format
-msgid "Too many N_RBRACs\n"
-msgstr "Privea N_RBRACov\n"
-
-#: stabs.c:736
-msgid "unknown C++ encoded name"
-msgstr "neznme meno kdovan v C++"
-
-#. Complain and keep going, so compilers can invent new
-#. cross-reference types.
-#: stabs.c:1251
-msgid "unrecognized cross reference type"
-msgstr "nerozpoznan typ krovho odkazu"
-
-#. Does this actually ever happen?  Is that why we are worrying
-#. about dealing with it rather than just calling error_type?
-#: stabs.c:1798
-msgid "missing index type"
-msgstr "chba typ indexu"
-
-#: stabs.c:2112
-msgid "unknown virtual character for baseclass"
-msgstr "neznmy virtulny znak pre baseclass"
-
-#: stabs.c:2130
-msgid "unknown visibility character for baseclass"
-msgstr "naznmy viditen znak pre baseclass"
-
-#: stabs.c:2316
-msgid "unnamed $vb type"
-msgstr "nepomenovan $vb typ"
-
-#: stabs.c:2322
-msgid "unrecognized C++ abbreviation"
-msgstr "nerozpoznan C++ skratka"
-
-#: stabs.c:2398
-msgid "unknown visibility character for field"
-msgstr "neznmy znak viditenosti pre pole"
-
-#: stabs.c:2650
-msgid "const/volatile indicator missing"
-msgstr "chba indiktor const/volatile"
-
-#: stabs.c:2886
-#, c-format
-msgid "No mangling for \"%s\"\n"
-msgstr "iadne pokodenie pre %s\n"
-
-#: stabs.c:3186
-msgid "Undefined N_EXCL"
-msgstr "Nezadefinovan N_EXCL"
-
-#: stabs.c:3266
-#, c-format
-msgid "Type file number %d out of range\n"
-msgstr "Typov slo sboru %d mimo rozsah\n"
-
-#: stabs.c:3271
-#, c-format
-msgid "Type index number %d out of range\n"
-msgstr "Typov slo indexu %d mimo rozsah\n"
-
-#: stabs.c:3350
-#, c-format
-msgid "Unrecognized XCOFF type %d\n"
-msgstr "Nerozpoznan typ XCOFF %d\n"
-
-#: stabs.c:3642
-#, c-format
-msgid "bad mangled name `%s'\n"
-msgstr ""
-
-#: stabs.c:3737
-#, c-format
-msgid "no argument types in mangled string\n"
-msgstr ""
-
-#: stabs.c:5091
-#, c-format
-msgid "Demangled name is not a function\n"
-msgstr ""
-
-#: stabs.c:5133
-#, c-format
-msgid "Unexpected type in v3 arglist demangling\n"
-msgstr ""
-
-#: stabs.c:5200
-#, c-format
-msgid "Unrecognized demangle component %d\n"
-msgstr ""
-
-#: stabs.c:5252
-#, c-format
-msgid "Failed to print demangled template\n"
-msgstr ""
-
-#: stabs.c:5332
-#, c-format
-msgid "Couldn't get demangled builtin type\n"
-msgstr ""
-
-#: stabs.c:5381
-#, c-format
-msgid "Unexpected demangled varargs\n"
-msgstr ""
-
-#: stabs.c:5388
-#, c-format
-msgid "Unrecognized demangled builtin type\n"
-msgstr ""
-
-#: strings.c:215
-#, c-format
-msgid "invalid number %s"
-msgstr "neplatn slo %s"
-
-#: strings.c:697
-#, c-format
-msgid "invalid integer argument %s"
-msgstr "neplatn celoseln argument %s"
-
-#: strings.c:706
-#, c-format
-msgid " Display printable strings in [file(s)] (stdin by default)\n"
-msgstr " Zobrazi vytlaiten reazce v [sbore(-och)] (tandardne stdin)\n"
-
-#: strings.c:707
-#, c-format
-msgid ""
-" The options are:\n"
-"  -a - --all                Scan the entire file, not just the data section\n"
-"  -f --print-file-name      Print the name of the file before each string\n"
-"  -n --bytes=[number]       Locate & print any NUL-terminated sequence of at\n"
-"  -<number>                 least [number] characters (default 4).\n"
-"  -t --radix={o,d,x}        Print the location of the string in base 8, 10 or 16\n"
-"  -o                        An alias for --radix=o\n"
-"  -T --target=<BFDNAME>     Specify the binary file format\n"
-"  -e --encoding={s,S,b,l,B,L} Select character size and endianness:\n"
-"                            s = 7-bit, S = 8-bit, {b,l} = 16-bit, {B,L} = 32-bit\n"
-"  @<file>                   Read options from <file>\n"
-"  -h --help                 Display this information\n"
-"  -v --version              Print the program's version number\n"
-msgstr ""
-
-#: sysdump.c:641
-#, c-format
-msgid "Print a human readable interpretation of a SYSROFF object file\n"
-msgstr "Zobrazi pre ud zrozumiten interpretciu objektovho sboru SYSROFF\n"
-
-#: sysdump.c:642
-#, c-format
-msgid ""
-" The options are:\n"
-"  -h --help        Display this information\n"
-"  -v --version     Print the program's version number\n"
-msgstr ""
-" Voby s:\n"
-"  -h --help Zobrazi tto informciu\n"
-"  -v --version Zobrazi verziu programu\n"
-
-#: sysdump.c:709
-#, c-format
-msgid "cannot open input file %s"
-msgstr "ned sa otvori vstupn sbor %s"
-
-#: version.c:34
-#, c-format
-msgid "Copyright 2007 Free Software Foundation, Inc.\n"
-msgstr "Copyright 2007 Free Software Foundation, Inc.\n"
-
-#: version.c:35
-#, c-format
-msgid ""
-"This program is free software; you may redistribute it under the terms of\n"
-"the GNU General Public License.  This program has absolutely no warranty.\n"
-msgstr ""
-"Tento program je von softvr. Mete ho redistribuova pod podmienkami\n"
-"GNU General Public License. Tento program nem absoltne iadnu zruku.\n"
-
-#: windmc.c:194
-#, c-format
-msgid "can't create %s file ,%s' for output.\n"
-msgstr "nebolo mon vytvori sbor %s, %s pre vstup.\n"
-
-#: windmc.c:202
-#, c-format
-msgid "Usage: %s [option(s)] [input-file]\n"
-msgstr "Pouitie: %s [VOBY] [VSTUP_SBOR]\n"
-
-#: windmc.c:204
-#, c-format
-msgid ""
-" The options are:\n"
-"  -a --ascii_in                Read input file as ASCII file\n"
-"  -A --ascii_out               Write binary messages as ASCII\n"
-"  -b --binprefix               .bin filename is prefixed by .mc filename_ for uniqueness.\n"
-"  -c --customflag              Set custom flags for messages\n"
-"  -C --codepage_in=<val>       Set codepage when reading mc text file\n"
-"  -d --decimal_values          Print values to text files decimal\n"
-"  -e --extension=<extension>   Set header extension used on export header file\n"
-"  -F --target <target>         Specify output target for endianess.\n"
-"  -h --headerdir=<directory>   Set the export directory for headers\n"
-"  -u --unicode_in              Read input file as UTF16 file\n"
-"  -U --unicode_out             Write binary messages as UFT16\n"
-"  -m --maxlength=<val>         Set the maximal allowed message length\n"
-"  -n --nullterminate           Automatic add a zero termination to strings\n"
-"  -o --hresult_use             Use HRESULT definition instead of status code definition\n"
-"  -O --codepage_out=<val>      Set codepage used for writing text file\n"
-"  -r --rcdir=<directory>       Set the export directory for rc files\n"
-"  -x --xdbg=<directory>        Where to create the .dbg C include file\n"
-"                               that maps message ID's to their symbolic name.\n"
-msgstr ""
-
-#: windmc.c:224
-#, c-format
-msgid ""
-"  -H --help                    Print this help message\n"
-"  -v --verbose                 Verbose - tells you what it's doing\n"
-"  -V --version                 Print version information\n"
-msgstr ""
-"  -H --help                    Vype tto sprvu pomocnka\n"
-"  -v --verbose                 Vren - oznamuje, o prve rob\n"
-"  -V --version                 Vype informcie o verzii\n"
-
-#: windmc.c:287 windres.c:415
-#, c-format
-msgid "%s: warning: "
-msgstr "%s: upozornenie: "
-
-#: windmc.c:288
-#, c-format
-msgid "A codepage was specified switch ,%s' and UTF16.\n"
-msgstr "Kdov strnka bola uveden, zamete %s a UTF-16.\n"
-
-#: windmc.c:289
-#, c-format
-msgid "\tcodepage settings are ignored.\n"
-msgstr "\tnastavenia kdovej strnky sa ignoruj.\n"
-
-#: windmc.c:333
-msgid "try to add a ill language."
-msgstr "pokus o pridanie zlho jazyka."
-
-#: windmc.c:1142
-#, c-format
-msgid "unable to open file ,%s' for input.\n"
-msgstr "nebolo mon otvori sbor %s na vstup.\n"
-
-#: windmc.c:1161
-msgid "input file does not seems to be UFT16.\n"
-msgstr "Vstupn sbor nevyzer by UTF-16.\n"
-
-#: windres.c:220
-#, c-format
-msgid "can't open %s `%s': %s"
-msgstr "ned sa otvori %s %s: %s"
-
-#: windres.c:394
-#, c-format
-msgid ": expected to be a directory\n"
-msgstr ": oakvalo sa, e je to adresr\n"
-
-#: windres.c:406
-#, c-format
-msgid ": expected to be a leaf\n"
-msgstr ": oakvalo sa, e je to list\n"
-
-#: windres.c:417
-#, c-format
-msgid ": duplicate value\n"
-msgstr ": duplicitn hodnota\n"
-
-#: windres.c:567
-#, c-format
-msgid "unknown format type `%s'"
-msgstr "neznmy typ sboru %s"
-
-#: windres.c:568
-#, c-format
-msgid "%s: supported formats:"
-msgstr "%s: podporovan formty:"
-
-#. Otherwise, we give up.
-#: windres.c:651
-#, c-format
-msgid "can not determine type of file `%s'; use the -J option"
-msgstr "nebolo mon uri typ sboru %s; pouite vobu -J"
-
-#: windres.c:663
-#, c-format
-msgid "Usage: %s [option(s)] [input-file] [output-file]\n"
-msgstr "Pouitie: %s [VOBY] [VSTUP_SBOR] [VSTUP_SBOR]\n"
-
-#: windres.c:665
-#, c-format
-msgid ""
-" The options are:\n"
-"  -i --input=<file>            Name input file\n"
-"  -o --output=<file>           Name output file\n"
-"  -J --input-format=<format>   Specify input format\n"
-"  -O --output-format=<format>  Specify output format\n"
-"  -F --target=<target>         Specify COFF target\n"
-"     --preprocessor=<program>  Program to use to preprocess rc file\n"
-"  -I --include-dir=<dir>       Include directory when preprocessing rc file\n"
-"  -D --define <sym>[=<val>]    Define SYM when preprocessing rc file\n"
-"  -U --undefine <sym>          Undefine SYM when preprocessing rc file\n"
-"  -v --verbose                 Verbose - tells you what it's doing\n"
-"  -c --codepage=<codepage>     Specify default codepage\n"
-"  -l --language=<val>          Set language when reading rc file\n"
-"     --use-temp-file           Use a temporary file instead of popen to read\n"
-"                               the preprocessor output\n"
-"     --no-use-temp-file        Use popen (default)\n"
-msgstr ""
-" Voby s:\n"
-"  -i --input=<sbor>           Vstupn sbor\n"
-"  -o --output=<sbor>          Vstupn sbor\n"
-"  -J --input-format=<formt>   Uvdza vstupn formt\n"
-"  -O --output-format=<formt>  Uvdza vstupn formt\n"
-"  -F --target=<cie>           Uvdza COFF cie\n"
-"     --preprocessor=<program>  Program na predspracovanie rc sboru\n"
-"  -I --include-dir=<adr>       Include adresr pre predspracovanie rc sboru\n"
-"  -D --define <sym>[=<val>]    Definova SYM pre predspracovanie rc sboru\n"
-"  -U --undefine <sym>          Zrui definciu SYM pre predspracovanie rc sboru\n"
-"  -v --verbose                 Vren - oznamuje, o prve rob\n"
-"  -c --codepage=<kdstr>       Uvdza predvolen kdov strnku\n"
-"  -l --language=<hodn>         Nastavi jazyk pre tanie rc sboru\n"
-"     --use-temp-file           Pre tanie poui doasn sbor namiesto popen\n"
-"                               vstupu preprocesora\n"
-"     --no-use-temp-file        Poui popen (tandardne)\n"
-
-#: windres.c:682
-#, c-format
-msgid "     --yydebug                 Turn on parser debugging\n"
-msgstr "     --yydebug                 Zapn ladenie syntaktickho analyztora\n"
-
-#: windres.c:685
-#, c-format
-msgid ""
-"  -r                           Ignored for compatibility with rc\n"
-"  @<file>                      Read options from <file>\n"
-"  -h --help                    Print this help message\n"
-"  -V --version                 Print version information\n"
-msgstr ""
-"  -r Ignorovan kvli kompatibilite s rc\n"
-"  @<sbor> ta voby zo <sboru>\n"
-"  -h --help Zobrazi tto sprvu npovedy\n"
-"  -V --version Zobrazi informciu o verzii\n"
-
-#: windres.c:690
-#, c-format
-msgid ""
-"FORMAT is one of rc, res, or coff, and is deduced from the file name\n"
-"extension if not specified.  A single file name is an input file.\n"
-"No input-file is stdin, default rc.  No output-file is stdout, default rc.\n"
-msgstr ""
-"FORMAT je jeden z rc, res alebo coff a dedukuje sa z prpony nzvu sboru,\n"
-"ak nie je uren. Samotn nzov sboru je vstupn sbor.\n"
-"iadn vstupn sbor je stdin, tandardne je rc. iadny vstpun sbor je stdout, tandardne je rc.\n"
-
-#: windres.c:828
-msgid "invalid codepage specified.\n"
-msgstr "zadan neplatn kdov strnka.\n"
-
-#: windres.c:843
-msgid "invalid option -f\n"
-msgstr "neplatn voby -f\n"
-
-#: windres.c:848
-msgid "No filename following the -fo option.\n"
-msgstr "iadny nzov sboru nensleduje za vobou -fo.\n"
-
-#: windres.c:907
-#, c-format
-msgid "Option -I is deprecated for setting the input format, please use -J instead.\n"
-msgstr "Voba -l je zastaral pre nastavenie vstupnho formtu, prosm, radej pouite -J.\n"
-
-#: windres.c:1027
-msgid "no resources"
-msgstr "iadne zdroje"
-
-#: wrstabs.c:353 wrstabs.c:1916
-#, c-format
-msgid "string_hash_lookup failed: %s"
-msgstr "string_hash_lookup zlyhal: %s"
-
-#: wrstabs.c:636
-#, c-format
-msgid "stab_int_type: bad size %u"
-msgstr "stab_int_type: zl vekos %u"
-
-#: wrstabs.c:1394
-#, c-format
-msgid "%s: warning: unknown size for field `%s' in struct"
-msgstr "%s: upozornenie: neznma vekos pre pole %s v truktre"
diff -Nur binutils-2.18.50.0.1/binutils/po/uk.po binutils-stable/binutils/po/uk.po
--- binutils-2.18.50.0.1/binutils/po/uk.po	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/po/uk.po	2007-09-25 15:41:53.000000000 +0200
@@ -1,45 +1,44 @@
-# Translation of binutils to Ukrainian
+# Translation of binutils-2.16.93.po to Ukrainian
 # Copyright (C) 2007 Free Software Foundation, Inc.
 # This file is distributed under the same license as the binutils package.
 #
-# Maxim V. Dziumanenko <dziumanenko@gmail.com>, 2007.
+# Maxim Dziumanenko <dziumanenko@gmail.com>, 2007.
 msgid ""
 msgstr ""
-"Project-Id-Version: binutils 2.17.90\n"
+"Project-Id-Version: binutils-2.16.93\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-02 15:55+0930\n"
-"PO-Revision-Date: 2007-07-13 14:32+0300\n"
-"Last-Translator: Maxim V. Dziumanenko <dziumanenko@gmail.com>\n"
+"POT-Creation-Date: 2005-10-25 09:14+0930\n"
+"PO-Revision-Date: 2006-05-22 14:32+0300\n"
+"Last-Translator: Maxim Dziumanenko <dziumanenko@gmail.com>\n"
 "Language-Team: Ukrainian <translation-team-uk@lists.sourceforge.net>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=(n != 1);\n"
 
-#: addr2line.c:74
+#: addr2line.c:76
 #, c-format
 msgid "Usage: %s [option(s)] [addr(s)]\n"
 msgstr ": %s [] []\n"
 
-#: addr2line.c:75
+#: addr2line.c:77
 #, c-format
 msgid " Convert addresses into line number/file name pairs.\n"
 msgstr "     _/_.\n"
 
-#: addr2line.c:76
+#: addr2line.c:78
 #, c-format
 msgid " If no addresses are specified on the command line, they will be read from stdin\n"
 msgstr "       ,    stdin\n"
 
-#: addr2line.c:77
+#: addr2line.c:79
 #, c-format
 msgid ""
 " The options are:\n"
 "  @<file>                Read options from <file>\n"
 "  -b --target=<bfdname>  Set the binary file format\n"
 "  -e --exe=<executable>  Set the input file name (default is a.out)\n"
-"  -i --inlines           Unwind inlined functions\n"
-"  -j --section=<name>    Read section-relative offsets instead of addresses\n"
+"  -i --inlines\t\t Unwind inlined functions\n"
 "  -s --basenames         Strip directory names\n"
 "  -f --functions         Show function names\n"
 "  -C --demangle[=style]  Demangle function names\n"
@@ -51,8 +50,6 @@
 "  @<>                   <>\n"
 "  -b --target=<bfd->    \n"
 "  -e --exe=<>     (  a.out)\n"
-"  -i --inlines            inline-\n"
-"  -j --section=<name>          \n"
 "  -s --basenames           \n"
 "  -f --functions           \n"
 "  -C --demangle[=]    \n"
@@ -60,169 +57,164 @@
 "  -v --version             \n"
 "\n"
 
-#: addr2line.c:92 ar.c:264 coffdump.c:467 dlltool.c:3172 dllwrap.c:510
-#: nlmconv.c:1115 objcopy.c:515 objcopy.c:550 readelf.c:2797 size.c:103
-#: srconv.c:1734 strings.c:722 sysdump.c:647 windmc.c:232 windres.c:698
+#: addr2line.c:93 ar.c:263 coffdump.c:466 nlmconv.c:1113 objcopy.c:486
+#: objcopy.c:520 readelf.c:2622 size.c:102 srconv.c:1732 strings.c:725
+#: sysdump.c:648 windres.c:673
 #, c-format
 msgid "Report bugs to %s\n"
 msgstr "     %s\n"
 
-#: addr2line.c:279
+#: addr2line.c:253
 #, c-format
-msgid "%s: cannot get addresses from archive"
+msgid "%s: can not get addresses from archive"
 msgstr "%s:     "
 
-#: addr2line.c:296
-#, c-format
-msgid "%s: cannot find section %s"
-msgstr "%s:   : %s"
-
-#: addr2line.c:362 nm.c:1534 objdump.c:3099
+#: addr2line.c:325 nm.c:1523 objdump.c:3033
 #, c-format
 msgid "unknown demangling style `%s'"
 msgstr "   `%s'"
 
-#: ar.c:204
+#: ar.c:203
 #, c-format
 msgid "no entry %s in archive\n"
 msgstr "    %s\n"
 
-#: ar.c:220
+#: ar.c:219
 #, c-format
 msgid "Usage: %s [emulation options] [-]{dmpqrstx}[abcfilNoPsSuvV] [member-name] [count] archive-file file...\n"
 msgstr ": %s [ ] [-]{dmpqrstx}[abcfilNoPsSuvV] [_] [] - ...\n"
 
-#: ar.c:223
+#: ar.c:222
 #, c-format
 msgid "       %s -M [<mri-script]\n"
 msgstr "       %s -M [< mri]\n"
 
-#: ar.c:224
+#: ar.c:223
 #, c-format
 msgid " commands:\n"
 msgstr " :\n"
 
-#: ar.c:225
+#: ar.c:224
 #, c-format
 msgid "  d            - delete file(s) from the archive\n"
 msgstr "  d            -    \n"
 
-#: ar.c:226
+#: ar.c:225
 #, c-format
 msgid "  m[ab]        - move file(s) in the archive\n"
 msgstr "  m[ab]        -    \n"
 
-#: ar.c:227
+#: ar.c:226
 #, c-format
 msgid "  p            - print file(s) found in the archive\n"
 msgstr "  p            -  ,   \n"
 
-#: ar.c:228
+#: ar.c:227
 #, c-format
 msgid "  q[f]         - quick append file(s) to the archive\n"
 msgstr "  q[f]         -     \n"
 
-#: ar.c:229
+#: ar.c:228
 #, c-format
 msgid "  r[ab][f][u]  - replace existing or insert new file(s) into the archive\n"
 msgstr "  r[ab][f][u]  -        \n"
 
-#: ar.c:230
+#: ar.c:229
 #, c-format
 msgid "  t            - display contents of archive\n"
 msgstr "  t            -   \n"
 
-#: ar.c:231
+#: ar.c:230
 #, c-format
 msgid "  x[o]         - extract file(s) from the archive\n"
 msgstr "  x[o]         -    \n"
 
-#: ar.c:232
+#: ar.c:231
 #, c-format
 msgid " command specific modifiers:\n"
 msgstr "    :\n"
 
-#: ar.c:233
+#: ar.c:232
 #, c-format
 msgid "  [a]          - put file(s) after [member-name]\n"
 msgstr "  [a]          -    [_]\n"
 
-#: ar.c:234
+#: ar.c:233
 #, c-format
 msgid "  [b]          - put file(s) before [member-name] (same as [i])\n"
 msgstr "  [b]          -    [_] (  ,   [i])\n"
 
-#: ar.c:235
+#: ar.c:234
 #, c-format
 msgid "  [N]          - use instance [count] of name\n"
 msgstr "  [N]          -  [],   \n"
 
-#: ar.c:236
+#: ar.c:235
 #, c-format
 msgid "  [f]          - truncate inserted file names\n"
 msgstr "  [f]          -    \n"
 
-#: ar.c:237
+#: ar.c:236
 #, c-format
 msgid "  [P]          - use full path names when matching\n"
 msgstr "  [P]          -      \n"
 
-#: ar.c:238
+#: ar.c:237
 #, c-format
 msgid "  [o]          - preserve original dates\n"
 msgstr "  [o]          -   \n"
 
-#: ar.c:239
+#: ar.c:238
 #, c-format
 msgid "  [u]          - only replace files that are newer than current archive contents\n"
 msgstr "  [u]          -    ,    \n"
 
-#: ar.c:240
+#: ar.c:239
 #, c-format
 msgid " generic modifiers:\n"
 msgstr "  :\n"
 
-#: ar.c:241
+#: ar.c:240
 #, c-format
 msgid "  [c]          - do not warn if the library had to be created\n"
 msgstr "  [c]          -  ,     \n"
 
-#: ar.c:242
+#: ar.c:241
 #, c-format
 msgid "  [s]          - create an archive index (cf. ranlib)\n"
 msgstr "  [s]          -    (cf. ranlib)\n"
 
-#: ar.c:243
+#: ar.c:242
 #, c-format
 msgid "  [S]          - do not build a symbol table\n"
 msgstr "  [S]          -    \n"
 
-#: ar.c:244
+#: ar.c:243
 #, c-format
 msgid "  [v]          - be verbose\n"
 msgstr "  [v]          -  \n"
 
-#: ar.c:245
+#: ar.c:244
 #, c-format
 msgid "  [V]          - display the version number\n"
 msgstr "  [V]          -   \n"
 
-#: ar.c:246
+#: ar.c:245
 #, c-format
 msgid "  @<file>      - read options from <file>\n"
 msgstr "  @<>      -    <>\n"
 
-#: ar.c:253
+#: ar.c:252
 #, c-format
 msgid "Usage: %s [options] archive\n"
 msgstr ": %s [] \n"
 
-#: ar.c:254
+#: ar.c:253
 #, c-format
 msgid " Generate an index to speed access to archives\n"
 msgstr "        \n"
 
-#: ar.c:255
+#: ar.c:254
 #, c-format
 msgid ""
 " The options are:\n"
@@ -235,47 +227,47 @@
 "  -h --help                     \n"
 "  -V --version                    \n"
 
-#: ar.c:487
+#: ar.c:485
 msgid "two different operation options specified"
 msgstr "     "
 
-#: ar.c:562
+#: ar.c:560
 #, c-format
 msgid "illegal option -- %c"
 msgstr "  -- %c"
 
-#: ar.c:605
+#: ar.c:606
 msgid "no operation specified"
 msgstr "  "
 
-#: ar.c:608
+#: ar.c:609
 msgid "`u' is only meaningful with the `r' option."
 msgstr "`u'      `r'."
 
-#: ar.c:616
+#: ar.c:617
 msgid "`N' is only meaningful with the `x' and `d' options."
 msgstr "`u'      `x'  `d'."
 
-#: ar.c:619
+#: ar.c:620
 msgid "Value for `N' must be positive."
 msgstr "  `N'   ."
 
-#: ar.c:669
+#: ar.c:670
 #, c-format
 msgid "internal error -- this option not implemented"
 msgstr "  --    "
 
-#: ar.c:738
+#: ar.c:739
 #, c-format
 msgid "creating %s"
 msgstr " %s"
 
-#: ar.c:787 ar.c:842 ar.c:1164 objcopy.c:1869
+#: ar.c:788 ar.c:838 ar.c:1156 objcopy.c:1683
 #, c-format
 msgid "internal stat error on %s"
 msgstr "  stat  %s"
 
-#: ar.c:791
+#: ar.c:792
 #, c-format
 msgid ""
 "\n"
@@ -286,173 +278,168 @@
 "<%s>\n"
 "\n"
 
-#: ar.c:807 ar.c:875
+#: ar.c:808 ar.c:875
 #, c-format
 msgid "%s is not a valid archive"
 msgstr "%s    "
 
-#: ar.c:1069
+#: ar.c:843
+#, c-format
+msgid "stat returns negative size for %s"
+msgstr "stat  '   %s"
+
+#: ar.c:1061
 #, c-format
 msgid "No member named `%s'\n"
 msgstr "    `%s'\n"
 
-#: ar.c:1119
+#: ar.c:1111
 #, c-format
 msgid "no entry %s in archive %s!"
 msgstr " %s    %s!"
 
-#: ar.c:1257
+#: ar.c:1248
 #, c-format
 msgid "%s: no archive map to update"
 msgstr "%s:     "
 
-#: arsup.c:88
+#: arsup.c:87
 #, c-format
 msgid "No entry %s in archive.\n"
 msgstr " %s   .\n"
 
-#: arsup.c:113
+#: arsup.c:112
 #, c-format
 msgid "Can't open file %s\n"
 msgstr "   %s\n"
 
-#: arsup.c:163
+#: arsup.c:162
 #, c-format
 msgid "%s: Can't open output archive %s\n"
 msgstr "%s:      %s\n"
 
-#: arsup.c:180
+#: arsup.c:179
 #, c-format
 msgid "%s: Can't open input archive %s\n"
 msgstr "%s:     %s\n"
 
-#: arsup.c:189
+#: arsup.c:188
 #, c-format
 msgid "%s: file %s is not an archive\n"
 msgstr "%s:  %s   \n"
 
-#: arsup.c:228
+#: arsup.c:227
 #, c-format
 msgid "%s: no output archive specified yet\n"
 msgstr "%s:      \n"
 
-#: arsup.c:248 arsup.c:286 arsup.c:328 arsup.c:348 arsup.c:414
+#: arsup.c:247 arsup.c:285 arsup.c:327 arsup.c:347 arsup.c:413
 #, c-format
 msgid "%s: no open output archive\n"
 msgstr "%s:     \n"
 
-#: arsup.c:259 arsup.c:369 arsup.c:395
+#: arsup.c:258 arsup.c:368 arsup.c:394
 #, c-format
 msgid "%s: can't open file %s\n"
 msgstr "%s:    %s\n"
 
-#: arsup.c:313 arsup.c:391 arsup.c:472
+#: arsup.c:312 arsup.c:390 arsup.c:471
 #, c-format
 msgid "%s: can't find module file %s\n"
 msgstr "%s:     %s\n"
 
-#: arsup.c:423
+#: arsup.c:422
 #, c-format
 msgid "Current open archive is %s\n"
 msgstr "   - %s\n"
 
-#: arsup.c:447
+#: arsup.c:446
 #, c-format
 msgid "%s: no open archive\n"
 msgstr "%s:   \n"
 
-#: bin2c.c:84
-#, c-format
-msgid "Usage: %s < input_file > output_file\n"
-msgstr ": %s < _ > _\n"
-
-#: bin2c.c:85
-#, c-format
-msgid "Prints bytes from stdin in hex format.\n"
-msgstr "   stdin   .\n"
-
 #: binemul.c:37
 #, c-format
 msgid "  No emulation specific options\n"
 msgstr "       \n"
 
 #. Macros for common output.
-#: binemul.h:41
+#: binemul.h:40
 #, c-format
 msgid " emulation options: \n"
 msgstr "  : \n"
 
-#: bucomm.c:111
+#: bucomm.c:110
 #, c-format
 msgid "can't set BFD default target to `%s': %s"
 msgstr "    BFD  `%s': %s"
 
-#: bucomm.c:122
+#: bucomm.c:121
 #, c-format
 msgid "%s: Matching formats:"
 msgstr "%s:  :"
 
-#: bucomm.c:137
+#: bucomm.c:136
 #, c-format
 msgid "Supported targets:"
 msgstr " :"
 
-#: bucomm.c:139
+#: bucomm.c:138
 #, c-format
 msgid "%s: supported targets:"
 msgstr "%s:  :"
 
-#: bucomm.c:155
+#: bucomm.c:154
 #, c-format
 msgid "Supported architectures:"
 msgstr " :"
 
-#: bucomm.c:157
+#: bucomm.c:156
 #, c-format
 msgid "%s: supported architectures:"
 msgstr "%s:  :"
 
-#: bucomm.c:350
+#: bucomm.c:349
 #, c-format
 msgid "BFD header file version %s\n"
 msgstr "  BFD  %s\n"
 
-#: bucomm.c:499
+#: bucomm.c:450
 #, c-format
 msgid "%s: bad number: %s"
 msgstr "%s:  : %s"
 
-#: bucomm.c:516 strings.c:435
+#: bucomm.c:467 strings.c:438
 #, c-format
 msgid "'%s': No such file"
 msgstr "'%s':   "
 
-#: bucomm.c:518 strings.c:437
+#: bucomm.c:469 strings.c:440
 #, c-format
 msgid "Warning: could not locate '%s'.  reason: %s"
 msgstr ":   '%s'. : %s"
 
-#: bucomm.c:522
+#: bucomm.c:473
 #, c-format
 msgid "Warning: '%s' is not an ordinary file"
 msgstr ": '%s'    "
 
-#: coffdump.c:104
+#: coffdump.c:103
 #, c-format
 msgid "#lines %d "
 msgstr "# %d "
 
-#: coffdump.c:458 sysdump.c:640
+#: coffdump.c:457 sysdump.c:641
 #, c-format
 msgid "Usage: %s [option(s)] in-file\n"
 msgstr ": %s [] -\n"
 
-#: coffdump.c:459
+#: coffdump.c:458
 #, c-format
 msgid " Print a human readable interpretation of a SYSROFF object file\n"
 msgstr "   '  SYSROFF    \n"
 
-#: coffdump.c:460
+#: coffdump.c:459
 #, c-format
 msgid ""
 " The options are:\n"
@@ -467,693 +454,683 @@
 "  -v --version             \n"
 "\n"
 
-#: coffdump.c:529 srconv.c:1824 sysdump.c:704
+#: coffdump.c:528 srconv.c:1822 sysdump.c:705
 msgid "no input file specified"
 msgstr "   "
 
-#: cxxfilt.c:119 nm.c:252 objdump.c:234
-#, c-format
-msgid "Report bugs to %s.\n"
-msgstr "     %s\n"
-
-#: debug.c:646
+#: debug.c:648
 msgid "debug_add_to_current_namespace: no current file"
 msgstr "debug_add_to_current_namespace:   "
 
-#: debug.c:725
+#: debug.c:727
 msgid "debug_start_source: no debug_set_filename call"
 msgstr "debug_start_source:   debug_set_filename"
 
-#: debug.c:781
+#: debug.c:783
 msgid "debug_record_function: no debug_set_filename call"
 msgstr "debug_record_function:   debug_set_filename"
 
-#: debug.c:833
+#: debug.c:835
 msgid "debug_record_parameter: no current function"
 msgstr "debug_record_parameter:   "
 
-#: debug.c:865
+#: debug.c:867
 msgid "debug_end_function: no current function"
 msgstr "debug_end_function:   "
 
-#: debug.c:871
+#: debug.c:873
 msgid "debug_end_function: some blocks were not closed"
 msgstr "debug_end_function:     "
 
-#: debug.c:899
+#: debug.c:901
 msgid "debug_start_block: no current block"
 msgstr "debug_start_block:   "
 
-#: debug.c:935
+#: debug.c:937
 msgid "debug_end_block: no current block"
 msgstr "debug_end_block:   "
 
-#: debug.c:942
+#: debug.c:944
 msgid "debug_end_block: attempt to close top level block"
 msgstr "debug_end_block:     "
 
-#: debug.c:965
+#: debug.c:967
 msgid "debug_record_line: no current unit"
 msgstr "debug_record_line:   "
 
 #. FIXME
-#: debug.c:1018
+#: debug.c:1020
 msgid "debug_start_common_block: not implemented"
 msgstr "debug_start_common_block:  "
 
 #. FIXME
-#: debug.c:1029
+#: debug.c:1031
 msgid "debug_end_common_block: not implemented"
 msgstr "debug_end_common_block:  "
 
 #. FIXME.
-#: debug.c:1113
+#: debug.c:1115
 msgid "debug_record_label: not implemented"
 msgstr "debug_record_label:  "
 
-#: debug.c:1135
+#: debug.c:1137
 msgid "debug_record_variable: no current file"
 msgstr "debug_record_variable:   "
 
-#: debug.c:1663
+#: debug.c:1665
 msgid "debug_make_undefined_type: unsupported kind"
 msgstr "debug_make_undefined_type:  "
 
-#: debug.c:1840
+#: debug.c:1842
 msgid "debug_name_type: no current file"
 msgstr "debug_name_type:   "
 
-#: debug.c:1885
+#: debug.c:1887
 msgid "debug_tag_type: no current file"
 msgstr "debug_tag_type:   "
 
-#: debug.c:1893
+#: debug.c:1895
 msgid "debug_tag_type: extra tag attempted"
 msgstr "debug_tag_type:   "
 
-#: debug.c:1930
+#: debug.c:1932
 #, c-format
 msgid "Warning: changing type size from %d to %d\n"
 msgstr ":     %d  %d\n"
 
-#: debug.c:1952
+#: debug.c:1954
 msgid "debug_find_named_type: no current compilation unit"
 msgstr "debug_find_named_type:    "
 
-#: debug.c:2055
+#: debug.c:2057
 #, c-format
 msgid "debug_get_real_type: circular debug information for %s\n"
 msgstr "debug_get_real_type:     %s\n"
 
-#: debug.c:2482
+#: debug.c:2484
 msgid "debug_write_type: illegal type encountered"
 msgstr "debug_write_type:   "
 
-#: dlltool.c:797 dlltool.c:823 dlltool.c:854
+#: dlltool.c:765 dlltool.c:789 dlltool.c:818
 #, c-format
 msgid "Internal error: Unknown machine type: %d"
 msgstr " :   : %d"
 
-#: dlltool.c:890
+#: dlltool.c:854
 #, c-format
 msgid "Can't open def file: %s"
 msgstr "   def: %s"
 
-#: dlltool.c:895
+#: dlltool.c:859
 #, c-format
 msgid "Processing def file: %s"
 msgstr "  def: %s"
 
-#: dlltool.c:899
+#: dlltool.c:863
 msgid "Processed def file"
 msgstr "  def"
 
-#: dlltool.c:923
+#: dlltool.c:887
 #, c-format
 msgid "Syntax error in def file %s:%d"
 msgstr "    def %s:%d"
 
-#: dlltool.c:958
+#: dlltool.c:922
 #, c-format
 msgid "%s: Path components stripped from image name, '%s'."
 msgstr "%s:  ,     , '%s'."
 
-#: dlltool.c:967
+#: dlltool.c:931
 #, c-format
 msgid "NAME: %s base: %x"
 msgstr "NAME: %s base: %x"
 
-#: dlltool.c:970 dlltool.c:986
+#: dlltool.c:934 dlltool.c:950
 msgid "Can't have LIBRARY and NAME"
 msgstr "LIBRARY  NAME    "
 
-#: dlltool.c:983
+#: dlltool.c:947
 #, c-format
 msgid "LIBRARY: %s base: %x"
 msgstr "LIBRARY: %s : %x"
 
-#: dlltool.c:1219 resrc.c:293
+#: dlltool.c:1183 resrc.c:269
 #, c-format
 msgid "wait: %s"
 msgstr ": %s"
 
-#: dlltool.c:1224 dllwrap.c:410 resrc.c:298
+#: dlltool.c:1188 dllwrap.c:413 resrc.c:274
 #, c-format
 msgid "subprocess got fatal signal %d"
 msgstr "    %d"
 
-#: dlltool.c:1230 dllwrap.c:417 resrc.c:305
+#: dlltool.c:1194 dllwrap.c:420 resrc.c:281
 #, c-format
 msgid "%s exited with status %d"
 msgstr "%s    %d"
 
-#: dlltool.c:1261
+#: dlltool.c:1225
 #, c-format
 msgid "Sucking in info from %s section in %s"
 msgstr "    %s  %s"
 
-#: dlltool.c:1386
+#: dlltool.c:1350
 #, c-format
 msgid "Excluding symbol: %s"
 msgstr " : %s"
 
-#: dlltool.c:1475 dlltool.c:1486 nm.c:984 nm.c:995
+#: dlltool.c:1439 dlltool.c:1450 nm.c:1000 nm.c:1011
 #, c-format
 msgid "%s: no symbols"
 msgstr "%s:  "
 
 #. FIXME: we ought to read in and block out the base relocations.
-#: dlltool.c:1512
+#: dlltool.c:1476
 #, c-format
 msgid "Done reading %s"
 msgstr "  %s"
 
-#: dlltool.c:1522
+#: dlltool.c:1486
 #, c-format
 msgid "Unable to open object file: %s"
 msgstr "  ' : %s"
 
-#: dlltool.c:1525
+#: dlltool.c:1489
 #, c-format
 msgid "Scanning object file %s"
 msgstr " '  %s"
 
-#: dlltool.c:1540
+#: dlltool.c:1504
 #, c-format
 msgid "Cannot produce mcore-elf dll from archive file: %s"
 msgstr "  mcore-elf dll   : %s"
 
-#: dlltool.c:1626
+#: dlltool.c:1590
 msgid "Adding exports to output file"
 msgstr "      "
 
-#: dlltool.c:1674
+#: dlltool.c:1638
 msgid "Added exports to output file"
 msgstr "      "
 
-#: dlltool.c:1813
+#: dlltool.c:1759
 #, c-format
 msgid "Generating export file: %s"
 msgstr "  : %s"
 
-#: dlltool.c:1818
+#: dlltool.c:1764
 #, c-format
 msgid "Unable to open temporary assembler file: %s"
 msgstr "    : %s"
 
-#: dlltool.c:1821
+#: dlltool.c:1767
 #, c-format
 msgid "Opened temporary file: %s"
 msgstr "  : %s"
 
-#: dlltool.c:2043
+#: dlltool.c:1989
 msgid "Generated exports file"
 msgstr "  "
 
-#: dlltool.c:2251
+#: dlltool.c:2195
 #, c-format
 msgid "bfd_open failed open stub file: %s"
 msgstr "bfd_open     stub: %s"
 
-#: dlltool.c:2254
+#: dlltool.c:2198
 #, c-format
 msgid "Creating stub file: %s"
 msgstr "  stub: %s"
 
-#: dlltool.c:2672
+#: dlltool.c:2580
 #, c-format
 msgid "failed to open temporary head file: %s"
 msgstr "     : %s"
 
-#: dlltool.c:2734
+#: dlltool.c:2639
 #, c-format
 msgid "failed to open temporary tail file: %s"
 msgstr "     : %s"
 
-#: dlltool.c:2809
+#: dlltool.c:2706
 #, c-format
 msgid "Can't open .lib file: %s"
 msgstr "   .lib: %s"
 
-#: dlltool.c:2812
+#: dlltool.c:2709
 #, c-format
 msgid "Creating library file: %s"
 msgstr "  : %s"
 
-#: dlltool.c:2895 dlltool.c:2901
+#: dlltool.c:2792 dlltool.c:2798
 #, c-format
 msgid "cannot delete %s: %s"
 msgstr "  %s: %s"
 
-#: dlltool.c:2906
+#: dlltool.c:2803
 msgid "Created lib file"
 msgstr " lib-"
 
-#: dlltool.c:2985
+#: dlltool.c:2882
 #, c-format
 msgid "Warning, ignoring duplicate EXPORT %s %d,%d"
 msgstr ",   EXPORT %s %d,%d"
 
-#: dlltool.c:2991
+#: dlltool.c:2888
 #, c-format
 msgid "Error, duplicate EXPORT with oridinals: %s"
 msgstr ", EXPORT    : %s"
 
-#: dlltool.c:3096
+#: dlltool.c:2993
 msgid "Processing definitions"
 msgstr " "
 
-#: dlltool.c:3128
+#: dlltool.c:3025
 msgid "Processed definitions"
 msgstr " "
 
 #. xgetext:c-format
-#: dlltool.c:3135 dllwrap.c:471
+#: dlltool.c:3032 dllwrap.c:474
 #, c-format
 msgid "Usage %s <option(s)> <object-file(s)>\n"
 msgstr " %s <> <'_>\n"
 
 #. xgetext:c-format
-#: dlltool.c:3137
+#: dlltool.c:3034
 #, c-format
 msgid "   -m --machine <machine>    Create as DLL for <machine>.  [default: %s]\n"
 msgstr "   -m --machine <>       DLL  <>.  [: %s]\n"
 
-#: dlltool.c:3138
+#: dlltool.c:3035
 #, c-format
 msgid "        possible <machine>: arm[_interwork], i386, mcore[-elf]{-le|-be}, ppc, thumb\n"
 msgstr "         <>: arm[_interwork], i386, mcore[-elf]{-le|-be}, ppc, thumb\n"
 
-#: dlltool.c:3139
+#: dlltool.c:3036
 #, c-format
 msgid "   -e --output-exp <outname> Generate an export file.\n"
 msgstr "   -e --output-exp <_>   .\n"
 
-#: dlltool.c:3140
+#: dlltool.c:3037
 #, c-format
 msgid "   -l --output-lib <outname> Generate an interface library.\n"
 msgstr "   -l --output-lib <_>   .\n"
 
-#: dlltool.c:3141
+#: dlltool.c:3038
 #, c-format
 msgid "   -a --add-indirect         Add dll indirects to export file.\n"
 msgstr "   -a --add-indirect           dll   .\n"
 
-#: dlltool.c:3142
+#: dlltool.c:3039
 #, c-format
 msgid "   -D --dllname <name>       Name of input dll to put into interface lib.\n"
 msgstr "   -D --dllname <>         dll     .\n"
 
-#: dlltool.c:3143
+#: dlltool.c:3040
 #, c-format
 msgid "   -d --input-def <deffile>  Name of .def file to be read in.\n"
 msgstr "   -d --input-def <def->   .def  .\n"
 
-#: dlltool.c:3144
+#: dlltool.c:3041
 #, c-format
 msgid "   -z --output-def <deffile> Name of .def file to be created.\n"
 msgstr "   -z --output-def <def->   .def,  .\n"
 
-#: dlltool.c:3145
+#: dlltool.c:3042
 #, c-format
 msgid "      --export-all-symbols   Export all symbols to .def\n"
 msgstr "      --export-all-symbols       .def\n"
 
-#: dlltool.c:3146
+#: dlltool.c:3043
 #, c-format
 msgid "      --no-export-all-symbols  Only export listed symbols\n"
 msgstr "      --no-export-all-symbols     \n"
 
-#: dlltool.c:3147
+#: dlltool.c:3044
 #, c-format
 msgid "      --exclude-symbols <list> Don't export <list>\n"
 msgstr "      --exclude-symbols <>   <>\n"
 
-#: dlltool.c:3148
+#: dlltool.c:3045
 #, c-format
 msgid "      --no-default-excludes  Clear default exclude symbols\n"
 msgstr "      --no-default-excludes     \n"
 
-#: dlltool.c:3149
+#: dlltool.c:3046
 #, c-format
 msgid "   -b --base-file <basefile> Read linker generated base file.\n"
 msgstr "   -b --base-file <base->    base-.\n"
 
-#: dlltool.c:3150
+#: dlltool.c:3047
 #, c-format
 msgid "   -x --no-idata4            Don't generate idata$4 section.\n"
 msgstr "   -x --no-idata4               idata$4.\n"
 
-#: dlltool.c:3151
+#: dlltool.c:3048
 #, c-format
 msgid "   -c --no-idata5            Don't generate idata$5 section.\n"
 msgstr "   -c --no-idata5               idata$5.\n"
 
-#: dlltool.c:3152
+#: dlltool.c:3049
 #, c-format
-msgid "   -U --add-underscore       Add underscores to all symbols in interface library.\n"
-msgstr "   -U --add-underscore               .\n"
+msgid "   -U --add-underscore       Add underscores to symbols in interface library.\n"
+msgstr "   -U --add-underscore              .\n"
 
-#: dlltool.c:3153
-#, c-format
-msgid "      --add-stdcall-underscore Add underscores to stdcall symbols in interface library.\n"
-msgstr "      --add-stdcall-underscore    stdcall-   .\n"
-
-#: dlltool.c:3154
+#: dlltool.c:3050
 #, c-format
 msgid "   -k --kill-at              Kill @<n> from exported names.\n"
 msgstr "   -k --kill-at               @<n>   .\n"
 
-#: dlltool.c:3155
+#: dlltool.c:3051
 #, c-format
 msgid "   -A --add-stdcall-alias    Add aliases without @<n>.\n"
 msgstr "   -A --add-stdcall-alias       @<n>.\n"
 
-#: dlltool.c:3156
+#: dlltool.c:3052
 #, c-format
 msgid "   -p --ext-prefix-alias <prefix> Add aliases with <prefix>.\n"
 msgstr "   -p --ext-prefix-alias <>    <>.\n"
 
-#: dlltool.c:3157
+#: dlltool.c:3053
 #, c-format
 msgid "   -S --as <name>            Use <name> for assembler.\n"
 msgstr "   -S --as <>            <>  .\n"
 
-#: dlltool.c:3158
+#: dlltool.c:3054
 #, c-format
 msgid "   -f --as-flags <flags>     Pass <flags> to the assembler.\n"
 msgstr "   -f --as-flags <>      <>  .\n"
 
-#: dlltool.c:3159
+#: dlltool.c:3055
 #, c-format
 msgid "   -C --compat-implib        Create backward compatible import library.\n"
 msgstr "   -C --compat-implib             .\n"
 
-#: dlltool.c:3160
+#: dlltool.c:3056
 #, c-format
 msgid "   -n --no-delete            Keep temp files (repeat for extra preservation).\n"
 msgstr "   -n --no-delete               (   ).\n"
 
-#: dlltool.c:3161
+#: dlltool.c:3057
 #, c-format
 msgid "   -t --temp-prefix <prefix> Use <prefix> to construct temp file names.\n"
 msgstr "   -t --temp-prefix <>  <>     .\n"
 
-#: dlltool.c:3162
+#: dlltool.c:3058
 #, c-format
 msgid "   -v --verbose              Be verbose.\n"
 msgstr "   -v --verbose                 .\n"
 
-#: dlltool.c:3163
+#: dlltool.c:3059
 #, c-format
 msgid "   -V --version              Display the program version.\n"
 msgstr "   -V --version                .\n"
 
-#: dlltool.c:3164
+#: dlltool.c:3060
 #, c-format
 msgid "   -h --help                 Display this information.\n"
 msgstr "   -h --help                   .\n"
 
-#: dlltool.c:3165
+#: dlltool.c:3061
 #, c-format
 msgid "   @<file>                   Read options from <file>.\n"
 msgstr "   @<>                      <>.\n"
 
-#: dlltool.c:3167
+#: dlltool.c:3063
 #, c-format
 msgid "   -M --mcore-elf <outname>  Process mcore-elf object files into <outname>.\n"
 msgstr "   -M --mcore-elf <_>  '  mcore-elf  <_>.\n"
 
-#: dlltool.c:3168
+#: dlltool.c:3064
 #, c-format
 msgid "   -L --linker <name>        Use <name> as the linker.\n"
 msgstr "   -L --linker <>        <>   .\n"
 
-#: dlltool.c:3169
+#: dlltool.c:3065
 #, c-format
 msgid "   -F --linker-flags <flags> Pass <flags> to the linker.\n"
 msgstr "   -F --linker-flags <>  <> .\n"
 
-#: dlltool.c:3292
+#: dlltool.c:3181
 #, c-format
 msgid "Path components stripped from dllname, '%s'."
 msgstr " ,     dll, '%s'."
 
-#: dlltool.c:3337
+#: dlltool.c:3226
 #, c-format
 msgid "Unable to open base-file: %s"
 msgstr "  base-: %s"
 
-#: dlltool.c:3369
+#: dlltool.c:3258
 #, c-format
 msgid "Machine '%s' not supported"
 msgstr " '%s'  "
 
-#: dlltool.c:3473 dllwrap.c:201
+#: dlltool.c:3362 dllwrap.c:204
 #, c-format
 msgid "Tried file: %s"
 msgstr " : %s"
 
-#: dlltool.c:3480 dllwrap.c:208
+#: dlltool.c:3369 dllwrap.c:211
 #, c-format
 msgid "Using file: %s"
 msgstr " : %s"
 
-#: dllwrap.c:291
+#: dllwrap.c:294
 #, c-format
 msgid "Keeping temporary base file %s"
 msgstr "  base- %s"
 
-#: dllwrap.c:293
+#: dllwrap.c:296
 #, c-format
 msgid "Deleting temporary base file %s"
 msgstr "  base- %s"
 
-#: dllwrap.c:307
+#: dllwrap.c:310
 #, c-format
 msgid "Keeping temporary exp file %s"
 msgstr "  exp- %s"
 
-#: dllwrap.c:309
+#: dllwrap.c:312
 #, c-format
 msgid "Deleting temporary exp file %s"
 msgstr "  exp- %s"
 
-#: dllwrap.c:322
+#: dllwrap.c:325
 #, c-format
 msgid "Keeping temporary def file %s"
 msgstr "  def- %s"
 
-#: dllwrap.c:324
+#: dllwrap.c:327
 #, c-format
 msgid "Deleting temporary def file %s"
 msgstr "  def- %s"
 
-#: dllwrap.c:472
+#: dllwrap.c:475
 #, c-format
 msgid "  Generic options:\n"
 msgstr "   :\n"
 
-#: dllwrap.c:473
+#: dllwrap.c:476
 #, c-format
 msgid "   @<file>                Read options from <file>\n"
 msgstr "   @<>                   <>\n"
 
-#: dllwrap.c:474
+#: dllwrap.c:477
 #, c-format
 msgid "   --quiet, -q            Work quietly\n"
 msgstr "   --quiet, -q             \n"
 
-#: dllwrap.c:475
+#: dllwrap.c:478
 #, c-format
 msgid "   --verbose, -v          Verbose\n"
 msgstr "   --verbose, -v           \n"
 
-#: dllwrap.c:476
+#: dllwrap.c:479
 #, c-format
 msgid "   --version              Print dllwrap version\n"
 msgstr "   --version                dllwrap\n"
 
-#: dllwrap.c:477
+#: dllwrap.c:480
 #, c-format
 msgid "   --implib <outname>     Synonym for --output-lib\n"
 msgstr "   --implib <_>       --output-lib\n"
 
-#: dllwrap.c:478
+#: dllwrap.c:481
 #, c-format
 msgid "  Options for %s:\n"
 msgstr "    %s:\n"
 
-#: dllwrap.c:479
+#: dllwrap.c:482
 #, c-format
 msgid "   --driver-name <driver> Defaults to \"gcc\"\n"
 msgstr "   --driver-name <>    \"gcc\"\n"
 
-#: dllwrap.c:480
+#: dllwrap.c:483
 #, c-format
 msgid "   --driver-flags <flags> Override default ld flags\n"
 msgstr "   --driver-flags <>    ld\n"
 
-#: dllwrap.c:481
+#: dllwrap.c:484
 #, c-format
 msgid "   --dlltool-name <dlltool> Defaults to \"dlltool\"\n"
 msgstr "   --dlltool-name <dlltool>    \"dlltool\"\n"
 
-#: dllwrap.c:482
+#: dllwrap.c:485
 #, c-format
 msgid "   --entry <entry>        Specify alternate DLL entry point\n"
 msgstr "   --entry <>            DLL\n"
 
-#: dllwrap.c:483
+#: dllwrap.c:486
 #, c-format
 msgid "   --image-base <base>    Specify image base address\n"
 msgstr "   --image-base <base>       \n"
 
-#: dllwrap.c:484
+#: dllwrap.c:487
 #, c-format
 msgid "   --target <machine>     i386-cygwin32 or i386-mingw32\n"
 msgstr "   --target <>      i386-cygwin32  i386-mingw32\n"
 
-#: dllwrap.c:485
+#: dllwrap.c:488
 #, c-format
 msgid "   --dry-run              Show what needs to be run\n"
 msgstr "   --dry-run              ,    \n"
 
-#: dllwrap.c:486
+#: dllwrap.c:489
 #, c-format
 msgid "   --mno-cygwin           Create Mingw DLL\n"
 msgstr "   --mno-cygwin            Mingw DLL\n"
 
-#: dllwrap.c:487
+#: dllwrap.c:490
 #, c-format
 msgid "  Options passed to DLLTOOL:\n"
 msgstr "  ,    DLLTOOL:\n"
 
-#: dllwrap.c:488
+#: dllwrap.c:491
 #, c-format
 msgid "   --machine <machine>\n"
 msgstr "   --machine <>\n"
 
-#: dllwrap.c:489
+#: dllwrap.c:492
 #, c-format
 msgid "   --output-exp <outname> Generate export file.\n"
 msgstr "   --output-exp <_>   .\n"
 
-#: dllwrap.c:490
+#: dllwrap.c:493
 #, c-format
 msgid "   --output-lib <outname> Generate input library.\n"
 msgstr "   --output-lib <_>   .\n"
 
-#: dllwrap.c:491
+#: dllwrap.c:494
 #, c-format
 msgid "   --add-indirect         Add dll indirects to export file.\n"
 msgstr "   --add-indirect           dll   .\n"
 
-#: dllwrap.c:492
+#: dllwrap.c:495
 #, c-format
 msgid "   --dllname <name>       Name of input dll to put into output lib.\n"
 msgstr "   --dllname <>          dll      .\n"
 
-#: dllwrap.c:493
+#: dllwrap.c:496
 #, c-format
 msgid "   --def <deffile>        Name input .def file\n"
 msgstr "   --def <def->          .def\n"
 
-#: dllwrap.c:494
+#: dllwrap.c:497
 #, c-format
 msgid "   --output-def <deffile> Name output .def file\n"
 msgstr "   --output-def <def->    .def\n"
 
-#: dllwrap.c:495
+#: dllwrap.c:498
 #, c-format
 msgid "   --export-all-symbols     Export all symbols to .def\n"
 msgstr "   --export-all-symbols         .def\n"
 
-#: dllwrap.c:496
+#: dllwrap.c:499
 #, c-format
 msgid "   --no-export-all-symbols  Only export .drectve symbols\n"
 msgstr "   --no-export-all-symbols     .drectve\n"
 
-#: dllwrap.c:497
+#: dllwrap.c:500
 #, c-format
 msgid "   --exclude-symbols <list> Exclude <list> from .def\n"
 msgstr "   --exclude-symbols <>  <>  .def\n"
 
-#: dllwrap.c:498
+#: dllwrap.c:501
 #, c-format
 msgid "   --no-default-excludes    Zap default exclude symbols\n"
 msgstr "   --no-default-excludes       \n"
 
-#: dllwrap.c:499
+#: dllwrap.c:502
 #, c-format
 msgid "   --base-file <basefile> Read linker generated base file\n"
 msgstr "   --base-file <base->    base-.\n"
 
-#: dllwrap.c:500
+#: dllwrap.c:503
 #, c-format
 msgid "   --no-idata4           Don't generate idata$4 section\n"
 msgstr "   --no-idata4              idata$4.\n"
 
-#: dllwrap.c:501
+#: dllwrap.c:504
 #, c-format
 msgid "   --no-idata5           Don't generate idata$5 section\n"
 msgstr "   --no-idata5              idata$5.\n"
 
-#: dllwrap.c:502
+#: dllwrap.c:505
 #, c-format
 msgid "   -U                     Add underscores to .lib\n"
 msgstr "   -U                         .lib\n"
 
-#: dllwrap.c:503
+#: dllwrap.c:506
 #, c-format
 msgid "   -k                     Kill @<n> from exported names\n"
 msgstr "   -k                      @<n>   .\n"
 
-#: dllwrap.c:504
+#: dllwrap.c:507
 #, c-format
 msgid "   --add-stdcall-alias    Add aliases without @<n>\n"
 msgstr "   --add-stdcall-alias       @<n>\n"
 
-#: dllwrap.c:505
+#: dllwrap.c:508
 #, c-format
 msgid "   --as <name>            Use <name> for assembler\n"
 msgstr "   --as <>              <>  \n"
 
-#: dllwrap.c:506
+#: dllwrap.c:509
 #, c-format
 msgid "   --nodelete             Keep temp files.\n"
 msgstr "   --nodelete               .\n"
 
-#: dllwrap.c:507
+#: dllwrap.c:510
 #, c-format
 msgid "  Rest are passed unmodified to the language driver\n"
 msgstr "       \n"
 
-#: dllwrap.c:781
+#: dllwrap.c:782
 msgid "Must provide at least one of -o or --dllname options"
 msgstr "      -o  --dllname"
 
-#: dllwrap.c:810
+#: dllwrap.c:811
 msgid ""
 "no export definition file provided.\n"
 "Creating one, but that may not be what you want"
@@ -1161,27 +1138,27 @@
 "    .\n"
 " ,      ,   "
 
-#: dllwrap.c:969
+#: dllwrap.c:970
 #, c-format
 msgid "DLLTOOL name    : %s\n"
 msgstr "DLLTOOL      : %s\n"
 
-#: dllwrap.c:970
+#: dllwrap.c:971
 #, c-format
 msgid "DLLTOOL options : %s\n"
 msgstr "DLLTOOL    : %s\n"
 
-#: dllwrap.c:971
+#: dllwrap.c:972
 #, c-format
 msgid "DRIVER name     : %s\n"
 msgstr "DRIVER       : %s\n"
 
-#: dllwrap.c:972
+#: dllwrap.c:973
 #, c-format
 msgid "DRIVER options  : %s\n"
 msgstr "DRIVER     : %s\n"
 
-#: dwarf.c:93 dwarf.c:137 readelf.c:377 readelf.c:570
+#: dwarf.c:93 dwarf.c:137 readelf.c:322 readelf.c:515
 #, c-format
 msgid "Unhandled data length: %d\n"
 msgstr " ,   : %d\n"
@@ -1214,7 +1191,7 @@
 msgid "  define new File Table entry\n"
 msgstr "      \n"
 
-#: dwarf.c:261 dwarf.c:1928
+#: dwarf.c:261 dwarf.c:1944
 #, c-format
 msgid "  Entry\tDir\tTime\tSize\tName\n"
 msgstr "  \t\t\t\t\n"
@@ -1224,7 +1201,7 @@
 msgid "   %d\t"
 msgstr "   %d\t"
 
-#: dwarf.c:266 dwarf.c:268 dwarf.c:270 dwarf.c:1940 dwarf.c:1942 dwarf.c:1944
+#: dwarf.c:266 dwarf.c:268 dwarf.c:270 dwarf.c:1956 dwarf.c:1958 dwarf.c:1960
 #, c-format
 msgid "%lu\t"
 msgstr "%lu\t"
@@ -1271,85 +1248,85 @@
 msgid " %lu byte block: "
 msgstr " %lu- : "
 
-#: dwarf.c:910
+#: dwarf.c:907
 #, c-format
 msgid "(User defined location op)"
 msgstr "(   )"
 
-#: dwarf.c:912
+#: dwarf.c:909
 #, c-format
 msgid "(Unknown location op)"
 msgstr "(  )"
 
-#: dwarf.c:958
+#: dwarf.c:955
 msgid "Internal error: DWARF version is not 2 or 3.\n"
 msgstr " :   DWARF   2  3.\n"
 
-#: dwarf.c:1056
+#: dwarf.c:1053
 msgid "DW_FORM_data8 is unsupported when sizeof (unsigned long) != 8\n"
 msgstr "DW_FORM_data8  ,  sizeof (    ) != 8\n"
 
-#: dwarf.c:1105
+#: dwarf.c:1102
 #, c-format
 msgid " (indirect string, offset: 0x%lx): %s"
 msgstr " ( , : 0x%lx): %s"
 
-#: dwarf.c:1114
+#: dwarf.c:1111
 #, c-format
 msgid "Unrecognized form: %lu\n"
 msgstr " : %lu\n"
 
-#: dwarf.c:1199
+#: dwarf.c:1196
 #, c-format
 msgid "(not inlined)"
 msgstr "(  )"
 
-#: dwarf.c:1202
+#: dwarf.c:1199
 #, c-format
 msgid "(inlined)"
 msgstr "( )"
 
-#: dwarf.c:1205
+#: dwarf.c:1202
 #, c-format
 msgid "(declared as inline but ignored)"
 msgstr "(  inline,  )"
 
-#: dwarf.c:1208
+#: dwarf.c:1205
 #, c-format
 msgid "(declared as inline and inlined)"
 msgstr "(  inline,   )"
 
-#: dwarf.c:1211
+#: dwarf.c:1208
 #, c-format
 msgid "  (Unknown inline attribute value: %lx)"
 msgstr "  (   inline: %lx)"
 
-#: dwarf.c:1368 dwarf.c:2462
+#: dwarf.c:1354 dwarf.c:2484
 #, c-format
 msgid " [without DW_AT_frame_base]"
 msgstr " [ DW_AT_frame_base]"
 
-#: dwarf.c:1371
+#: dwarf.c:1357
 #, c-format
 msgid "(location list)"
 msgstr "( )"
 
-#: dwarf.c:1489
+#: dwarf.c:1475
 #, c-format
 msgid "Unknown AT value: %lx"
 msgstr "  AT: %lx "
 
-#: dwarf.c:1558
+#: dwarf.c:1544
 #, c-format
 msgid "No comp units in %s section ?"
 msgstr "  %s   comp?"
 
-#: dwarf.c:1567
+#: dwarf.c:1553
 #, c-format
 msgid "Not enough memory for a debug info array of %u entries"
-msgstr " '       %u "
+msgstr " '       %u "
 
-#: dwarf.c:1575 dwarf.c:2550
+#: dwarf.c:1561 dwarf.c:2573
 #, c-format
 msgid ""
 "The section %s contains:\n"
@@ -1358,66 +1335,70 @@
 " %s :\n"
 "\n"
 
-#: dwarf.c:1583
+#: dwarf.c:1569
 #, c-format
 msgid "Unable to locate %s section!\n"
 msgstr "    %s!\n"
 
-#: dwarf.c:1646
+#: dwarf.c:1635
 #, c-format
 msgid "  Compilation Unit @ offset 0x%lx:\n"
 msgstr "    @  0x%lx:\n"
 
-#: dwarf.c:1647
+#: dwarf.c:1636
 #, c-format
 msgid "   Length:        %ld\n"
 msgstr "   :       %ld\n"
 
-#: dwarf.c:1648
+#: dwarf.c:1637
 #, c-format
 msgid "   Version:       %d\n"
 msgstr "   :        %d\n"
 
-#: dwarf.c:1649
+#: dwarf.c:1638
 #, c-format
 msgid "   Abbrev Offset: %ld\n"
 msgstr "    :  %ld\n"
 
-#: dwarf.c:1650
+#: dwarf.c:1639
 #, c-format
 msgid "   Pointer Size:  %d\n"
 msgstr "    : %d\n"
 
-#: dwarf.c:1656
-#, c-format
-msgid "Debug info is corrupted, length is invalid (section is %lu bytes)\n"
-msgstr "  ,   ( %lu )\n"
-
-#: dwarf.c:1665
+#: dwarf.c:1644
 msgid "Only version 2 and 3 DWARF debug information is currently supported.\n"
 msgstr "      DWARF  2  3.\n"
 
-#: dwarf.c:1674
+#: dwarf.c:1685
 #, c-format
-msgid "Debug info is corrupted, abbrev offset is invalid (section is %lu bytes)\n"
-msgstr "  ,   abbrev ( %lu )\n"
+msgid "Unable to locate entry %lu in the abbreviation table\n"
+msgstr "    %lu   \n"
 
-#: dwarf.c:1702
+#: dwarf.c:1691
 #, c-format
-msgid " <%d><%lx>: Abbrev Number: %lu"
-msgstr " <%d><%lx>:  : %lu"
+msgid " <%d><%lx>: Abbrev Number: %lu (%s)\n"
+msgstr " <%d><%lx>:  : %lu (%s)\n"
 
-#: dwarf.c:1722
+#: dwarf.c:1785
 #, c-format
-msgid "Unable to locate entry %lu in the abbreviation table\n"
-msgstr "    %lu   \n"
+msgid "%s section needs a populated .debug_info section\n"
+msgstr "  %s    .debug_info\n"
+
+#: dwarf.c:1792
+#, c-format
+msgid "%s section has more comp units than .debug_info section\n"
+msgstr " %s    comp,   .debug_info\n"
 
-#: dwarf.c:1728
+#: dwarf.c:1794
 #, c-format
-msgid " (%s)\n"
-msgstr " (%s)\n"
+msgid ""
+"assuming that the pointer size is %d, from the last comp unit in .debug_info\n"
+"\n"
+msgstr ""
+",    - %d,    comp  .debug_info\n"
+"\n"
 
-#: dwarf.c:1813
+#: dwarf.c:1819
 #, c-format
 msgid ""
 "\n"
@@ -1428,55 +1409,60 @@
 "     %s:\n"
 "\n"
 
-#: dwarf.c:1851
+#: dwarf.c:1858
 msgid "The line info appears to be corrupt - the section is too small\n"
 msgstr ",   info  -   \n"
 
-#: dwarf.c:1860
+#: dwarf.c:1867
 msgid "Only DWARF version 2 and 3 line info is currently supported.\n"
 msgstr "   info   DWARF  2  3.\n"
 
-#: dwarf.c:1881
+#: dwarf.c:1894
 #, c-format
 msgid "  Length:                      %ld\n"
 msgstr "  :                       %ld\n"
 
-#: dwarf.c:1882
+#: dwarf.c:1895
 #, c-format
 msgid "  DWARF Version:               %d\n"
 msgstr "  DWARF :                %d\n"
 
-#: dwarf.c:1883
+#: dwarf.c:1896
 #, c-format
 msgid "  Prologue Length:             %d\n"
 msgstr "   :               %d\n"
 
-#: dwarf.c:1884
+#: dwarf.c:1897
 #, c-format
 msgid "  Minimum Instruction Length:  %d\n"
 msgstr "  .  :   %d\n"
 
-#: dwarf.c:1885
+#: dwarf.c:1898
 #, c-format
 msgid "  Initial value of 'is_stmt':  %d\n"
 msgstr "  .  'is_stmt':     %d\n"
 
-#: dwarf.c:1886
+#: dwarf.c:1899
 #, c-format
 msgid "  Line Base:                   %d\n"
 msgstr "   :                %d\n"
 
-#: dwarf.c:1887
+#: dwarf.c:1900
 #, c-format
 msgid "  Line Range:                  %d\n"
 msgstr "    :             %d\n"
 
-#: dwarf.c:1888
+#: dwarf.c:1901
 #, c-format
 msgid "  Opcode Base:                 %d\n"
 msgstr "    :        %d\n"
 
-#: dwarf.c:1897
+#: dwarf.c:1902
+#, c-format
+msgid "  (Pointer size:               %u)%s\n"
+msgstr "  ( :          %u)%s\n"
+
+#: dwarf.c:1913
 #, c-format
 msgid ""
 "\n"
@@ -1485,12 +1471,12 @@
 "\n"
 "  :\n"
 
-#: dwarf.c:1900
+#: dwarf.c:1916
 #, c-format
 msgid "  Opcode %d has %d args\n"
 msgstr "    %d  %d \n"
 
-#: dwarf.c:1906
+#: dwarf.c:1922
 #, c-format
 msgid ""
 "\n"
@@ -1499,7 +1485,7 @@
 "\n"
 "   .\n"
 
-#: dwarf.c:1909
+#: dwarf.c:1925
 #, c-format
 msgid ""
 "\n"
@@ -1508,12 +1494,12 @@
 "\n"
 "  :\n"
 
-#: dwarf.c:1913
+#: dwarf.c:1929
 #, c-format
 msgid "  %s\n"
 msgstr "  %s\n"
 
-#: dwarf.c:1924
+#: dwarf.c:1940
 #, c-format
 msgid ""
 "\n"
@@ -1522,7 +1508,7 @@
 "\n"
 "    .\n"
 
-#: dwarf.c:1927
+#: dwarf.c:1943
 #, c-format
 msgid ""
 "\n"
@@ -1531,18 +1517,18 @@
 "\n"
 "   :\n"
 
-#: dwarf.c:1935
+#: dwarf.c:1951
 #, c-format
 msgid "  %d\t"
 msgstr "  %d\t"
 
-#: dwarf.c:1946
+#: dwarf.c:1962
 #, c-format
 msgid "%s\n"
 msgstr "%s\n"
 
 #. Now display the statements.
-#: dwarf.c:1954
+#: dwarf.c:1970
 #, c-format
 msgid ""
 "\n"
@@ -1551,83 +1537,87 @@
 "\n"
 "   :\n"
 
-#: dwarf.c:1970
+#: dwarf.c:1986
 #, c-format
 msgid "  Special opcode %d: advance Address by %lu to 0x%lx"
 msgstr "     %d:    %lu  0x%lx"
 
-#: dwarf.c:1974
+#: dwarf.c:1990
 #, c-format
 msgid " and Line by %d to %d\n"
 msgstr "    %d  %d\n"
 
-#: dwarf.c:1984
+#: dwarf.c:1998
+msgid "Extend line ops need a valid pointer size, guessing at 4\n"
+msgstr "       ;  4\n"
+
+#: dwarf.c:2007
 #, c-format
 msgid "  Copy\n"
 msgstr "  \n"
 
-#: dwarf.c:1992
+#: dwarf.c:2015
 #, c-format
 msgid "  Advance PC by %lu to 0x%lx\n"
 msgstr "      %lu  0x%lx\n"
 
-#: dwarf.c:2000
+#: dwarf.c:2023
 #, c-format
 msgid "  Advance Line by %d to %d\n"
 msgstr "     %d  %d\n"
 
-#: dwarf.c:2007
+#: dwarf.c:2030
 #, c-format
 msgid "  Set File Name to entry %d in the File Name Table\n"
 msgstr "       %d    \n"
 
-#: dwarf.c:2015
+#: dwarf.c:2038
 #, c-format
 msgid "  Set column to %lu\n"
 msgstr "     %lu\n"
 
-#: dwarf.c:2022
+#: dwarf.c:2045
 #, c-format
 msgid "  Set is_stmt to %d\n"
 msgstr "   is_stmt  %d\n"
 
-#: dwarf.c:2027
+#: dwarf.c:2050
 #, c-format
 msgid "  Set basic block\n"
 msgstr "    \n"
 
-#: dwarf.c:2035
+#: dwarf.c:2058
 #, c-format
 msgid "  Advance PC by constant %lu to 0x%lx\n"
 msgstr "       %lu  0x%lx\n"
 
-#: dwarf.c:2043
+#: dwarf.c:2066
 #, c-format
 msgid "  Advance PC by fixed size amount %lu to 0x%lx\n"
 msgstr "         %lu  0x%lx\n"
 
-#: dwarf.c:2048
+#: dwarf.c:2071
 #, c-format
 msgid "  Set prologue_end to true\n"
 msgstr "   prologue_end  `'\n"
 
-#: dwarf.c:2052
+#: dwarf.c:2075
 #, c-format
 msgid "  Set epilogue_begin to true\n"
 msgstr "   epilogue_begin  `'\n"
 
-#: dwarf.c:2058
+#: dwarf.c:2081
 #, c-format
 msgid "  Set ISA to %lu\n"
 msgstr "   ISA  %lu\n"
 
-#: dwarf.c:2062
+#: dwarf.c:2085
 #, c-format
 msgid "  Unknown opcode %d with operands: "
 msgstr "     %d  : "
 
-#: dwarf.c:2088 dwarf.c:2174 dwarf.c:2248 dwarf.c:2360 dwarf.c:2492
-#: dwarf.c:2731
+#: dwarf.c:2111 dwarf.c:2197 dwarf.c:2271 dwarf.c:2382 dwarf.c:2514
+#: dwarf.c:2739
 #, c-format
 msgid ""
 "Contents of the %s section:\n"
@@ -1636,31 +1626,31 @@
 "  %s:\n"
 "\n"
 
-#: dwarf.c:2128
+#: dwarf.c:2151
 msgid "Only DWARF 2 and 3 pubnames are currently supported\n"
 msgstr "  pubname   DWARF  2  3\n"
 
-#: dwarf.c:2135
+#: dwarf.c:2158
 #, c-format
 msgid "  Length:                              %ld\n"
 msgstr "  :                               %ld\n"
 
-#: dwarf.c:2137
+#: dwarf.c:2160
 #, c-format
 msgid "  Version:                             %d\n"
 msgstr "  :                              %d\n"
 
-#: dwarf.c:2139
+#: dwarf.c:2162
 #, c-format
 msgid "  Offset into .debug_info section:     %ld\n"
 msgstr "     .debug_info:           %ld\n"
 
-#: dwarf.c:2141
+#: dwarf.c:2164
 #, c-format
 msgid "  Size of area in .debug_info section: %ld\n"
 msgstr "  .    .debug_info: %ld\n"
 
-#: dwarf.c:2144
+#: dwarf.c:2167
 #, c-format
 msgid ""
 "\n"
@@ -1669,55 +1659,55 @@
 "\n"
 "    \t\n"
 
-#: dwarf.c:2195
+#: dwarf.c:2218
 #, c-format
 msgid " DW_MACINFO_start_file - lineno: %d filenum: %d\n"
 msgstr " DW_MACINFO_start_file - _: %d _: %d\n"
 
-#: dwarf.c:2201
+#: dwarf.c:2224
 #, c-format
 msgid " DW_MACINFO_end_file\n"
 msgstr " DW_MACINFO_end_file\n"
 
-#: dwarf.c:2209
+#: dwarf.c:2232
 #, c-format
 msgid " DW_MACINFO_define - lineno : %d macro : %s\n"
-msgstr " DW_MACINFO_define - _ : %d  : %s\n"
+msgstr " DW_MACINFO_define - _ : %d  : %s\n"
 
-#: dwarf.c:2218
+#: dwarf.c:2241
 #, c-format
 msgid " DW_MACINFO_undef - lineno : %d macro : %s\n"
-msgstr " DW_MACINFO_undef - _ : %d  : %s\n"
+msgstr " DW_MACINFO_undef - _ : %d  : %s\n"
 
-#: dwarf.c:2230
+#: dwarf.c:2253
 #, c-format
 msgid " DW_MACINFO_vendor_ext - constant : %d string : %s\n"
 msgstr " DW_MACINFO_vendor_ext -  : %d  : %s\n"
 
-#: dwarf.c:2259
+#: dwarf.c:2282
 #, c-format
 msgid "  Number TAG\n"
 msgstr "   TAG\n"
 
-#: dwarf.c:2265
+#: dwarf.c:2288
 #, c-format
 msgid "   %ld      %s    [%s]\n"
 msgstr "   %ld      %s    [%s]\n"
 
-#: dwarf.c:2268
+#: dwarf.c:2291
 msgid "has children"
 msgstr " "
 
-#: dwarf.c:2268
+#: dwarf.c:2291
 msgid "no children"
 msgstr " "
 
-#: dwarf.c:2271
+#: dwarf.c:2294
 #, c-format
 msgid "    %-18s %s\n"
 msgstr "    %-18s %s\n"
 
-#: dwarf.c:2304 dwarf.c:2488 dwarf.c:2675
+#: dwarf.c:2327 dwarf.c:2510 dwarf.c:2684
 #, c-format
 msgid ""
 "\n"
@@ -1727,168 +1717,150 @@
 " %s .\n"
 
 #. FIXME: Should we handle this case?
-#: dwarf.c:2349
+#: dwarf.c:2372
 msgid "Location lists in .debug_info section aren't in ascending order!\n"
 msgstr "    .debug_info    !\n"
 
-#: dwarf.c:2352
+#: dwarf.c:2375
 msgid "No location lists in .debug_info section!\n"
 msgstr "  .debug_info   !\n"
 
-#: dwarf.c:2357
+#: dwarf.c:2379
 #, c-format
 msgid "Location lists in %s section start at 0x%lx\n"
 msgstr "    %s   0x%lx\n"
 
-#: dwarf.c:2361
+#: dwarf.c:2383
 #, c-format
 msgid "    Offset   Begin    End      Expression\n"
 msgstr "              \n"
 
-#: dwarf.c:2392
+#: dwarf.c:2414
 #, c-format
 msgid "There is a hole [0x%lx - 0x%lx] in .debug_loc section.\n"
 msgstr "  .debug_loc   [0x%lx - 0x%lx].\n"
 
-#: dwarf.c:2395
+#: dwarf.c:2417
 #, c-format
 msgid "There is an overlap [0x%lx - 0x%lx] in .debug_loc section.\n"
 msgstr "  .debug_loc   [0x%lx - 0x%lx].\n"
 
-#: dwarf.c:2402
+#: dwarf.c:2424
 #, c-format
 msgid "Offset 0x%lx is bigger than .debug_loc section size.\n"
 msgstr " 0x%lx ,    .debug_loc.\n"
 
-#: dwarf.c:2411 dwarf.c:2438 dwarf.c:2448
+#: dwarf.c:2433 dwarf.c:2460 dwarf.c:2470
 #, c-format
 msgid "Location list starting at offset 0x%lx is not terminated.\n"
 msgstr " ,    0x%lx,  .\n"
 
-#: dwarf.c:2423 dwarf.c:2776
+#: dwarf.c:2445 dwarf.c:2784
 #, c-format
 msgid "    %8.8lx <End of list>\n"
 msgstr "    %8.8lx < >\n"
 
-#: dwarf.c:2431
+#: dwarf.c:2453
 #, c-format
 msgid "    %8.8lx %8.8lx %8.8lx (base address)\n"
 msgstr "    %8.8lx %8.8lx %8.8lx ( )\n"
 
-#: dwarf.c:2465 dwarf.c:2793
+#: dwarf.c:2487 dwarf.c:2801
 msgid " (start == end)"
 msgstr " ( == )"
 
-#: dwarf.c:2467 dwarf.c:2795
+#: dwarf.c:2489 dwarf.c:2803
 msgid " (start > end)"
 msgstr " ( > )"
 
-#: dwarf.c:2596
+#: dwarf.c:2618
 msgid "Only DWARF 2 and 3 aranges are currently supported.\n"
 msgstr "     DWARF  2  3.\n"
 
-#: dwarf.c:2600
+#: dwarf.c:2622
 #, c-format
 msgid "  Length:                   %ld\n"
 msgstr "  :                    %ld\n"
 
-#: dwarf.c:2601
+#: dwarf.c:2623
 #, c-format
 msgid "  Version:                  %d\n"
 msgstr "  :                   %d\n"
 
-#: dwarf.c:2602
+#: dwarf.c:2624
 #, c-format
 msgid "  Offset into .debug_info:  %lx\n"
 msgstr "    .debug_info:   %lx\n"
 
-#: dwarf.c:2603
+#: dwarf.c:2625
 #, c-format
 msgid "  Pointer Size:             %d\n"
 msgstr "   :        %d\n"
 
-#: dwarf.c:2604
+#: dwarf.c:2626
 #, c-format
 msgid "  Segment Size:             %d\n"
 msgstr "   :          %d\n"
 
-#: dwarf.c:2613
-msgid "Pointer size + Segment size is not a power of two.\n"
-msgstr "  +      .\n"
-
-#: dwarf.c:2618
+#: dwarf.c:2628
 #, c-format
 msgid ""
 "\n"
-"    Address            Length\n"
+"    Address  Length\n"
 msgstr ""
 "\n"
-"                \n"
-
-#: dwarf.c:2620
-#, c-format
-msgid ""
-"\n"
-"    Address    Length\n"
-msgstr ""
-"\n"
-"        \n"
+"       \n"
 
 #. FIXME: Should we handle this case?
-#: dwarf.c:2720
+#: dwarf.c:2729
 msgid "Range lists in .debug_info section aren't in ascending order!\n"
 msgstr "    .debug_info    !\n"
 
-#: dwarf.c:2723
+#: dwarf.c:2732
 msgid "No range lists in .debug_info section!\n"
 msgstr "  .debug_info   !\n"
 
-#: dwarf.c:2728
+#: dwarf.c:2736
 #, c-format
 msgid "Range lists in %s section start at 0x%lx\n"
 msgstr "    %s   0x%lx\n"
 
-#: dwarf.c:2732
+#: dwarf.c:2740
 #, c-format
 msgid "    Offset   Begin    End\n"
 msgstr "           \n"
 
-#: dwarf.c:2757
+#: dwarf.c:2765
 #, c-format
 msgid "There is a hole [0x%lx - 0x%lx] in %s section.\n"
 msgstr " [0x%lx - 0x%lx]   %s.\n"
 
-#: dwarf.c:2761
+#: dwarf.c:2769
 #, c-format
 msgid "There is an overlap [0x%lx - 0x%lx] in %s section.\n"
 msgstr " [0x%lx - 0x%lx]   %s.\n"
 
-#: dwarf.c:2963
+#: dwarf.c:2964
 #, c-format
 msgid "The section %s contains:\n"
 msgstr " %s :\n"
 
-#: dwarf.c:3650
-#, c-format
-msgid "  DW_CFA_??? (User defined call frame op: %#x)\n"
-msgstr "  DW_CFA_??? (    : %#x)\n"
-
-#: dwarf.c:3652
+#: dwarf.c:3608
 #, c-format
-msgid "unsupported or unknown Dwarf Call Frame Instruction number: %#x\n"
-msgstr "       Dwarf: %#x\n"
+msgid "unsupported or unknown DW_CFA_%d\n"
+msgstr "   DW_CFA_%d\n"
 
-#: dwarf.c:3676
+#: dwarf.c:3632
 #, c-format
 msgid "Displaying the debug contents of section %s is not yet supported.\n"
 msgstr "    %s   .\n"
 
-#: dwarf.c:3718
+#: dwarf.c:3674
 #, c-format
 msgid "%s: Error: "
 msgstr "%s: : "
 
-#: dwarf.c:3729
+#: dwarf.c:3685
 #, c-format
 msgid "%s: Warning: "
 msgstr "%s: : "
@@ -1913,223 +1885,223 @@
 msgid "  [-X32_64]    - accepts 32 and 64 bit objects\n"
 msgstr "  [-X32_64]    -  32-  64- '\n"
 
-#: ieee.c:309
+#: ieee.c:311
 msgid "unexpected end of debugging information"
 msgstr "   "
 
-#: ieee.c:396
+#: ieee.c:398
 msgid "invalid number"
 msgstr " "
 
-#: ieee.c:449
+#: ieee.c:451
 msgid "invalid string length"
 msgstr "  "
 
-#: ieee.c:504 ieee.c:545
+#: ieee.c:506 ieee.c:547
 msgid "expression stack overflow"
 msgstr "  "
 
-#: ieee.c:524
+#: ieee.c:526
 msgid "unsupported IEEE expression operator"
 msgstr "   IEEE"
 
-#: ieee.c:539
+#: ieee.c:541
 msgid "unknown section"
 msgstr " "
 
-#: ieee.c:560
+#: ieee.c:562
 msgid "expression stack underflow"
 msgstr "  "
 
-#: ieee.c:574
+#: ieee.c:576
 msgid "expression stack mismatch"
 msgstr "  "
 
-#: ieee.c:611
+#: ieee.c:613
 msgid "unknown builtin type"
 msgstr "  "
 
-#: ieee.c:756
+#: ieee.c:758
 msgid "BCD float type not supported"
 msgstr "-       "
 
-#: ieee.c:893
+#: ieee.c:895
 msgid "unexpected number"
 msgstr " "
 
-#: ieee.c:900
+#: ieee.c:902
 msgid "unexpected record type"
 msgstr "  "
 
-#: ieee.c:933
+#: ieee.c:935
 msgid "blocks left on stack at end"
 msgstr "   "
 
-#: ieee.c:1196
+#: ieee.c:1198
 msgid "unknown BB type"
 msgstr "  BB"
 
-#: ieee.c:1205
+#: ieee.c:1207
 msgid "stack overflow"
 msgstr " "
 
-#: ieee.c:1228
+#: ieee.c:1230
 msgid "stack underflow"
 msgstr " "
 
-#: ieee.c:1340 ieee.c:1410 ieee.c:2107
+#: ieee.c:1342 ieee.c:1412 ieee.c:2109
 msgid "illegal variable index"
 msgstr "  "
 
-#: ieee.c:1388
+#: ieee.c:1390
 msgid "illegal type index"
 msgstr "  "
 
-#: ieee.c:1398 ieee.c:1435
+#: ieee.c:1400 ieee.c:1437
 msgid "unknown TY code"
 msgstr "  TY"
 
-#: ieee.c:1417
+#: ieee.c:1419
 msgid "undefined variable in TY"
 msgstr "   TY"
 
 #. Pascal file name.  FIXME.
-#: ieee.c:1828
+#: ieee.c:1830
 msgid "Pascal file name not supported"
 msgstr "    Pascal  "
 
-#: ieee.c:1876
+#: ieee.c:1878
 msgid "unsupported qualifier"
 msgstr " "
 
-#: ieee.c:2145
+#: ieee.c:2147
 msgid "undefined variable in ATN"
 msgstr "   ATN"
 
-#: ieee.c:2188
+#: ieee.c:2190
 msgid "unknown ATN type"
 msgstr "  ATN"
 
 #. Reserved for FORTRAN common.
-#: ieee.c:2310
+#: ieee.c:2312
 msgid "unsupported ATN11"
 msgstr " ATN11"
 
 #. We have no way to record this information.  FIXME.
-#: ieee.c:2337
+#: ieee.c:2339
 msgid "unsupported ATN12"
 msgstr " ATN12"
 
-#: ieee.c:2397
+#: ieee.c:2399
 msgid "unexpected string in C++ misc"
 msgstr "   C++ misc"
 
-#: ieee.c:2410
+#: ieee.c:2412
 msgid "bad misc record"
 msgstr "  misc"
 
-#: ieee.c:2451
+#: ieee.c:2453
 msgid "unrecognized C++ misc record"
 msgstr "  C++ misc"
 
-#: ieee.c:2566
+#: ieee.c:2568
 msgid "undefined C++ object"
 msgstr " ' C++"
 
-#: ieee.c:2600
+#: ieee.c:2602
 msgid "unrecognized C++ object spec"
 msgstr "  ' C++"
 
-#: ieee.c:2636
+#: ieee.c:2638
 msgid "unsupported C++ object type"
 msgstr "  ' C++"
 
-#: ieee.c:2646
+#: ieee.c:2648
 msgid "C++ base class not defined"
 msgstr "  C++  "
 
-#: ieee.c:2658 ieee.c:2763
+#: ieee.c:2660 ieee.c:2765
 msgid "C++ object has no fields"
 msgstr "' C++   "
 
-#: ieee.c:2677
+#: ieee.c:2679
 msgid "C++ base class not found in container"
 msgstr "  C++    "
 
-#: ieee.c:2784
+#: ieee.c:2786
 msgid "C++ data member not found in container"
 msgstr "  C++    "
 
-#: ieee.c:2825 ieee.c:2975
+#: ieee.c:2827 ieee.c:2977
 msgid "unknown C++ visibility"
 msgstr "  C++"
 
-#: ieee.c:2859
+#: ieee.c:2861
 msgid "bad C++ field bit pos or size"
 msgstr "      C++"
 
-#: ieee.c:2951
+#: ieee.c:2953
 msgid "bad type for C++ method function"
 msgstr "    C++"
 
-#: ieee.c:2961
+#: ieee.c:2963
 msgid "no type information for C++ method function"
 msgstr "       C++"
 
-#: ieee.c:3000
+#: ieee.c:3002
 msgid "C++ static virtual method"
 msgstr "   C++"
 
-#: ieee.c:3095
+#: ieee.c:3097
 msgid "unrecognized C++ object overhead spec"
 msgstr "   ' C++"
 
-#: ieee.c:3134
+#: ieee.c:3136
 msgid "undefined C++ vtable"
 msgstr "   C++"
 
-#: ieee.c:3203
+#: ieee.c:3205
 msgid "C++ default values not in a function"
 msgstr "  C++   "
 
-#: ieee.c:3243
+#: ieee.c:3245
 msgid "unrecognized C++ default type"
 msgstr "   C++"
 
-#: ieee.c:3274
+#: ieee.c:3276
 msgid "reference parameter is not a pointer"
 msgstr "-   "
 
-#: ieee.c:3357
+#: ieee.c:3359
 msgid "unrecognized C++ reference type"
 msgstr "   C++"
 
-#: ieee.c:3439
+#: ieee.c:3441
 msgid "C++ reference not found"
 msgstr " C++  "
 
-#: ieee.c:3447
+#: ieee.c:3449
 msgid "C++ reference is not pointer"
 msgstr " C++   "
 
-#: ieee.c:3473 ieee.c:3481
+#: ieee.c:3475 ieee.c:3483
 msgid "missing required ASN"
 msgstr "  ASN"
 
-#: ieee.c:3508 ieee.c:3516
+#: ieee.c:3510 ieee.c:3518
 msgid "missing required ATN65"
 msgstr "  ATN65"
 
-#: ieee.c:3530
+#: ieee.c:3532
 msgid "bad ATN65 record"
 msgstr "  ATN65"
 
-#: ieee.c:4158
+#: ieee.c:4160
 #, c-format
 msgid "IEEE numeric overflow: 0x"
 msgstr "  IEEE: 0x"
 
-#: ieee.c:4202
+#: ieee.c:4204
 #, c-format
 msgid "IEEE string length overflow: %u\n"
 msgstr "   IEEE: %u\n"
@@ -2149,128 +2121,124 @@
 msgid "IEEE unsupported complex type size %u\n"
 msgstr "    IEEE%u\n"
 
-#: mclex.c:241
-msgid "Duplicate symbol entered into keyword list."
-msgstr "      ."
-
-#: nlmconv.c:271 srconv.c:1815
+#: nlmconv.c:269 srconv.c:1813
 msgid "input and output files must be different"
 msgstr "       "
 
-#: nlmconv.c:318
+#: nlmconv.c:316
 msgid "input file named both on command line and with INPUT"
 msgstr "          INPUT"
 
-#: nlmconv.c:327
+#: nlmconv.c:325
 msgid "no input file"
 msgstr "  "
 
-#: nlmconv.c:357
+#: nlmconv.c:355
 msgid "no name for output file"
 msgstr "    "
 
-#: nlmconv.c:371
+#: nlmconv.c:369
 msgid "warning: input and output formats are not compatible"
 msgstr ":      "
 
-#: nlmconv.c:400
+#: nlmconv.c:398
 msgid "make .bss section"
 msgstr "  .bss"
 
-#: nlmconv.c:409
+#: nlmconv.c:407
 msgid "make .nlmsections section"
 msgstr "  .nlmsections"
 
-#: nlmconv.c:411
+#: nlmconv.c:409
 msgid "set .nlmsections flags"
 msgstr "  .nlmsections"
 
-#: nlmconv.c:439
+#: nlmconv.c:437
 msgid "set .bss vma"
 msgstr " .bss vma"
 
-#: nlmconv.c:446
+#: nlmconv.c:444
 msgid "set .data size"
 msgstr "  .data"
 
-#: nlmconv.c:626
+#: nlmconv.c:624
 #, c-format
 msgid "warning: symbol %s imported but not in import list"
 msgstr ":  %s ,      "
 
-#: nlmconv.c:646
+#: nlmconv.c:644
 msgid "set start address"
 msgstr "  "
 
-#: nlmconv.c:695
+#: nlmconv.c:693
 #, c-format
 msgid "warning: START procedure %s not defined"
 msgstr ": START- %s  "
 
-#: nlmconv.c:697
+#: nlmconv.c:695
 #, c-format
 msgid "warning: EXIT procedure %s not defined"
 msgstr ": EXIT- %s  "
 
-#: nlmconv.c:699
+#: nlmconv.c:697
 #, c-format
 msgid "warning: CHECK procedure %s not defined"
 msgstr ": CHECK- %s  "
 
-#: nlmconv.c:720 nlmconv.c:909
+#: nlmconv.c:718 nlmconv.c:907
 msgid "custom section"
 msgstr " custom"
 
-#: nlmconv.c:741 nlmconv.c:938
+#: nlmconv.c:739 nlmconv.c:936
 msgid "help section"
 msgstr " help"
 
-#: nlmconv.c:763 nlmconv.c:956
+#: nlmconv.c:761 nlmconv.c:954
 msgid "message section"
 msgstr " message"
 
-#: nlmconv.c:779 nlmconv.c:989
+#: nlmconv.c:777 nlmconv.c:987
 msgid "module section"
 msgstr " module"
 
-#: nlmconv.c:799 nlmconv.c:1005
+#: nlmconv.c:797 nlmconv.c:1003
 msgid "rpc section"
 msgstr " rpc"
 
 #. There is no place to record this information.
-#: nlmconv.c:835
+#: nlmconv.c:833
 #, c-format
 msgid "%s: warning: shared libraries can not have uninitialized data"
 msgstr "%s: :        "
 
-#: nlmconv.c:856 nlmconv.c:1024
+#: nlmconv.c:854 nlmconv.c:1022
 msgid "shared section"
 msgstr " shared"
 
-#: nlmconv.c:864
+#: nlmconv.c:862
 msgid "warning: No version number given"
 msgstr ":    "
 
-#: nlmconv.c:904 nlmconv.c:933 nlmconv.c:951 nlmconv.c:1000 nlmconv.c:1019
+#: nlmconv.c:902 nlmconv.c:931 nlmconv.c:949 nlmconv.c:998 nlmconv.c:1017
 #, c-format
 msgid "%s: read: %s"
 msgstr "%s: : %s"
 
-#: nlmconv.c:926
+#: nlmconv.c:924
 msgid "warning: FULLMAP is not supported; try ld -M"
 msgstr ": FULLMAP  ;  ld -M"
 
-#: nlmconv.c:1102
+#: nlmconv.c:1100
 #, c-format
 msgid "Usage: %s [option(s)] [in-file [out-file]]\n"
 msgstr ": %s [] [in- [out-]]\n"
 
-#: nlmconv.c:1103
+#: nlmconv.c:1101
 #, c-format
 msgid " Convert an object file into a NetWare Loadable Module\n"
 msgstr "  '      NetWare\n"
 
-#: nlmconv.c:1104
+#: nlmconv.c:1102
 #, c-format
 msgid ""
 " The options are:\n"
@@ -2293,74 +2261,74 @@
 "  -h --help                       \n"
 "  -v --version                    \n"
 
-#: nlmconv.c:1145
+#: nlmconv.c:1143
 #, c-format
 msgid "support not compiled in for %s"
 msgstr "   %s"
 
-#: nlmconv.c:1182
+#: nlmconv.c:1180
 msgid "make section"
 msgstr " make"
 
-#: nlmconv.c:1196
+#: nlmconv.c:1194
 msgid "set section size"
 msgstr "  "
 
-#: nlmconv.c:1202
+#: nlmconv.c:1200
 msgid "set section alignment"
 msgstr "  "
 
-#: nlmconv.c:1206
+#: nlmconv.c:1204
 msgid "set section flags"
 msgstr "  "
 
-#: nlmconv.c:1217
+#: nlmconv.c:1215
 msgid "set .nlmsections size"
 msgstr "  .nlmsections"
 
-#: nlmconv.c:1298 nlmconv.c:1306 nlmconv.c:1315 nlmconv.c:1320
+#: nlmconv.c:1296 nlmconv.c:1304 nlmconv.c:1313 nlmconv.c:1318
 msgid "set .nlmsection contents"
 msgstr "  .nlmsections"
 
-#: nlmconv.c:1799
+#: nlmconv.c:1797
 msgid "stub section sizes"
 msgstr "  "
 
-#: nlmconv.c:1846
+#: nlmconv.c:1844
 msgid "writing stub"
 msgstr " "
 
-#: nlmconv.c:1930
+#: nlmconv.c:1928
 #, c-format
 msgid "unresolved PC relative reloc against %s"
 msgstr "       %s"
 
-#: nlmconv.c:1994
+#: nlmconv.c:1992
 #, c-format
 msgid "overflow when adjusting relocation against %s"
 msgstr "     %s"
 
-#: nlmconv.c:2121
+#: nlmconv.c:2119
 #, c-format
 msgid "%s: execution of %s failed: "
 msgstr "%s:  %s  : "
 
-#: nlmconv.c:2136
+#: nlmconv.c:2134
 #, c-format
 msgid "Execution of %s failed"
 msgstr " %s  "
 
-#: nm.c:213 size.c:83 strings.c:705
+#: nm.c:224 size.c:82 strings.c:708
 #, c-format
 msgid "Usage: %s [option(s)] [file(s)]\n"
 msgstr ": %s [] [()]\n"
 
-#: nm.c:214
+#: nm.c:225
 #, c-format
 msgid " List symbols in [file(s)] (a.out by default).\n"
 msgstr "     [()] (  a.out).\n"
 
-#: nm.c:215
+#: nm.c:226
 #, c-format
 msgid ""
 " The options are:\n"
@@ -2437,32 +2405,37 @@
 "  -V, --version             \n"
 "\n"
 
-#: nm.c:276
+#: nm.c:263 objdump.c:236
+#, c-format
+msgid "Report bugs to %s.\n"
+msgstr "     %s\n"
+
+#: nm.c:295
 #, c-format
 msgid "%s: invalid radix"
 msgstr "%s:  radix"
 
-#: nm.c:300
+#: nm.c:319
 #, c-format
 msgid "%s: invalid output format"
 msgstr "%s:   "
 
-#: nm.c:321 readelf.c:6853 readelf.c:6891
+#: nm.c:340 readelf.c:6623 readelf.c:6659
 #, c-format
 msgid "<processor specific>: %d"
 msgstr "<  >: %d"
 
-#: nm.c:323 readelf.c:6856 readelf.c:6903
+#: nm.c:342 readelf.c:6626 readelf.c:6671
 #, c-format
 msgid "<OS specific>: %d"
 msgstr "<  >: %d"
 
-#: nm.c:325 readelf.c:6858 readelf.c:6906
+#: nm.c:344 readelf.c:6628 readelf.c:6674
 #, c-format
 msgid "<unknown>: %d"
 msgstr "<>: %d"
 
-#: nm.c:365
+#: nm.c:381
 #, c-format
 msgid ""
 "\n"
@@ -2471,7 +2444,7 @@
 "\n"
 " :\n"
 
-#: nm.c:1225
+#: nm.c:1227
 #, c-format
 msgid ""
 "\n"
@@ -2484,7 +2457,7 @@
 "   %s:\n"
 "\n"
 
-#: nm.c:1227
+#: nm.c:1229
 #, c-format
 msgid ""
 "\n"
@@ -2497,7 +2470,7 @@
 "  %s:\n"
 "\n"
 
-#: nm.c:1229 nm.c:1280
+#: nm.c:1231 nm.c:1282
 #, c-format
 msgid ""
 "Name                  Value   Class        Type         Size     Line  Section\n"
@@ -2506,7 +2479,7 @@
 "                                        \n"
 "\n"
 
-#: nm.c:1232 nm.c:1283
+#: nm.c:1234 nm.c:1285
 #, c-format
 msgid ""
 "Name                  Value           Class        Type         Size             Line  Section\n"
@@ -2515,7 +2488,7 @@
 "                                                        \n"
 "\n"
 
-#: nm.c:1276
+#: nm.c:1278
 #, c-format
 msgid ""
 "\n"
@@ -2528,7 +2501,7 @@
 "   %s[%s]:\n"
 "\n"
 
-#: nm.c:1278
+#: nm.c:1280
 #, c-format
 msgid ""
 "\n"
@@ -2541,44 +2514,39 @@
 "  %s[%s]:\n"
 "\n"
 
-#: nm.c:1370
-#, c-format
-msgid "Print width has not been initialized (%d)"
-msgstr "     (%d)"
-
-#: nm.c:1595
+#: nm.c:1584
 msgid "Only -X 32_64 is supported"
 msgstr "  -X 32_64"
 
-#: nm.c:1615
+#: nm.c:1604
 msgid "Using the --size-sort and --undefined-only options together"
 msgstr "   --size-sort  --undefined-only"
 
-#: nm.c:1616
+#: nm.c:1605
 msgid "will produce no output, since undefined symbols have no size."
 msgstr "    ,      ."
 
-#: nm.c:1644
+#: nm.c:1633
 #, c-format
 msgid "data size %ld"
 msgstr "  %ld"
 
-#: objcopy.c:426 srconv.c:1723
+#: objcopy.c:401 srconv.c:1721
 #, c-format
 msgid "Usage: %s [option(s)] in-file [out-file]\n"
 msgstr ": %s [] in- [out-]\n"
 
-#: objcopy.c:427
+#: objcopy.c:402
 #, c-format
 msgid " Copies a binary file, possibly transforming it in the process\n"
 msgstr "   , ,    \n"
 
-#: objcopy.c:428 objcopy.c:524
+#: objcopy.c:403 objcopy.c:495
 #, c-format
 msgid " The options are:\n"
 msgstr " :\n"
 
-#: objcopy.c:429
+#: objcopy.c:404
 #, c-format
 msgid ""
 "  -I --input-target <bfdname>      Assume input file is in format <bfdname>\n"
@@ -2598,10 +2566,7 @@
 "                                   Do not copy symbol <name> unless needed by\n"
 "                                     relocations\n"
 "     --only-keep-debug             Strip everything but the debug information\n"
-"     --extract-symbol              Remove section contents but keep symbols\n"
 "  -K --keep-symbol <name>          Do not strip symbol <name>\n"
-"     --keep-file-symbols           Do not strip file symbol(s)\n"
-"     --localize-hidden             Turn all ELF hidden symbols into locals\n"
 "  -L --localize-symbol <name>      Force symbol <name> to be marked as a local\n"
 "     --globalize-symbol <name>     Force symbol <name> to be marked as a global\n"
 "  -G --keep-global-symbol <name>   Localize all symbols except <name>\n"
@@ -2633,7 +2598,6 @@
 "     --rename-section <old>=<new>[,<flags>] Rename section <old> to <new>\n"
 "     --change-leading-char         Force output format's leading character style\n"
 "     --remove-leading-char         Remove leading character from global symbols\n"
-"     --reverse-bytes=<num>         Reverse <num> bytes at a time, in output sections with content\n"
 "     --redefine-sym <old>=<new>    Redefine symbol name <old> to <new>\n"
 "     --redefine-syms <file>        --redefine-sym for all symbol pairs \n"
 "                                     listed in <file>\n"
@@ -2648,7 +2612,7 @@
 "     --globalize-symbols <file>    --globalize-symbol for all in <file>\n"
 "     --keep-global-symbols <file>  -G for all symbols listed in <file>\n"
 "     --weaken-symbols <file>       -W for all symbols listed in <file>\n"
-"     --alt-machine-code <index>    Use the target's <index>'th alternative machine\n"
+"     --alt-machine-code <index>    Use alternate machine code for output\n"
 "     --writable-text               Mark the output text as writable\n"
 "     --readonly-text               Make the output text write protected\n"
 "     --pure                        Mark the output file as demand paged\n"
@@ -2681,12 +2645,8 @@
 "                                      <>,    \n"
 "                                    \n"
 "     --only-keep-debug                \n"
-"     --extract-symbol                ,   \n"
 "  -K --keep-symbol <>            <>\n"
-"     --keep-file-symbols              \n"
-"     --localize-hidden                 ELF  locals\n"
 "  -L --localize-symbol <>        <>  \n"
-"     --globalize-symbol <>       <>  \n"
 "  -G --keep-global-symbol <>      <>\n"
 "  -W --weaken-symbol <>          <>  \n"
 "     --weaken                           \n"
@@ -2716,7 +2676,6 @@
 "     --rename-section <>=<>[,<>]   <>  <>\n"
 "     --change-leading-char                \n"
 "     --remove-leading-char              \n"
-"     --reverse-bytes=<>         <>   ,     \n"
 "     --redefine-sym <>=<>      <>  <>\n"
 "     --redefine-syms <>        --redefine-sym    ,\n"
 "                                       <>\n"
@@ -2728,7 +2687,6 @@
 "                                      <>\n"
 "     --keep-symbols <>         -K   ,   <>\n"
 "     --localize-symbols <>     -L   ,   <>\n"
-"     --globalize-symbols <>    --globalize-symbol     <>\n"
 "     --keep-global-symbols <>  -G   ,   <>\n"
 "     --weaken-symbols <>       -W   ,   <>\n"
 "     --alt-machine-code <>        \n"
@@ -2747,17 +2705,17 @@
 "  -h --help                          \n"
 "     --info                           '  \n"
 
-#: objcopy.c:522
+#: objcopy.c:493
 #, c-format
 msgid "Usage: %s <option(s)> in-file(s)\n"
 msgstr ": %s <> in-()\n"
 
-#: objcopy.c:523
+#: objcopy.c:494
 #, c-format
 msgid " Removes symbols and sections from files\n"
 msgstr "      \n"
 
-#: objcopy.c:525
+#: objcopy.c:496
 #, c-format
 msgid ""
 "  -I --input-target=<bfdname>      Assume input file is in format <bfdname>\n"
@@ -2771,7 +2729,6 @@
 "     --only-keep-debug             Strip everything but the debug information\n"
 "  -N --strip-symbol=<name>         Do not copy symbol <name>\n"
 "  -K --keep-symbol=<name>          Do not strip symbol <name>\n"
-"     --keep-file-symbols           Do not strip file symbol(s)\n"
 "  -w --wildcard                    Permit wildcard in symbol comparison\n"
 "  -x --discard-all                 Remove all non-global symbols\n"
 "  -X --discard-locals              Remove any compiler-generated symbols\n"
@@ -2792,304 +2749,268 @@
 "     --only-keep-debug              ,    \n"
 "  -N --strip-symbol=<>           <>\n"
 "  -K --keep-symbol=<>            <>\n"
-"     --keep-file-symbols               \n"
 "  -w --wildcard                        \n"
 "  -x --discard-all                     \n"
 "  -X --discard-locals                ,  \n"
 "  -v --verbose                        ' \n"
 "  -V --version                         \n"
 "  -h --help                          \n"
-"     --info                           '  \n"
+"     --info                           '  \n"
 "  -o <>                             <>\n"
 
-#: objcopy.c:598
+#: objcopy.c:568
 #, c-format
 msgid "unrecognized section flag `%s'"
 msgstr "   `%s'"
 
-#: objcopy.c:599
+#: objcopy.c:569
 #, c-format
 msgid "supported flags: %s"
 msgstr " : %s"
 
-#: objcopy.c:679
+#: objcopy.c:646
 #, c-format
 msgid "cannot open '%s': %s"
 msgstr "  '%s': %s"
 
-#: objcopy.c:682 objcopy.c:2987
+#: objcopy.c:649 objcopy.c:2722
 #, c-format
 msgid "%s: fread failed"
 msgstr "%s:   fread"
 
-#: objcopy.c:755
+#: objcopy.c:722
 #, c-format
 msgid "%s:%d: Ignoring rubbish found on this line"
 msgstr "%s:%d:  ,     "
 
-#: objcopy.c:1033
-#, c-format
-msgid "not stripping symbol `%s' because it is named in a relocation"
-msgstr " `%s'  ,      "
-
-#: objcopy.c:1116
+#: objcopy.c:996
 #, c-format
 msgid "%s: Multiple redefinition of symbol \"%s\""
 msgstr "%s:    \"%s\""
 
-#: objcopy.c:1120
+#: objcopy.c:1000
 #, c-format
 msgid "%s: Symbol \"%s\" is target of more than one redefinition"
 msgstr "%s:  \"%s\"   ,   "
 
-#: objcopy.c:1148
+#: objcopy.c:1028
 #, c-format
 msgid "couldn't open symbol redefinition file %s (error: %s)"
 msgstr "     %s (: %s)"
 
-#: objcopy.c:1226
+#: objcopy.c:1106
 #, c-format
 msgid "%s:%d: garbage found at end of line"
 msgstr "%s:%d:    "
 
-#: objcopy.c:1229
+#: objcopy.c:1109
 #, c-format
 msgid "%s:%d: missing new symbol name"
 msgstr "%s:%d:    "
 
-#: objcopy.c:1239
+#: objcopy.c:1119
 #, c-format
 msgid "%s:%d: premature end of file"
 msgstr "%s:%d:   "
 
-#: objcopy.c:1265
+#: objcopy.c:1145
 #, c-format
 msgid "stat returns negative size for `%s'"
 msgstr "stat  '   `%s'"
 
-#: objcopy.c:1277
+#: objcopy.c:1157
 #, c-format
 msgid "copy from `%s' [unknown] to `%s' [unknown]\n"
 msgstr "  `%s' []  `%s' []\n"
 
-#: objcopy.c:1332
+#: objcopy.c:1212
 msgid "Unable to change endianness of input file(s)"
 msgstr "  endianness  "
 
-#: objcopy.c:1341
+#: objcopy.c:1221
 #, c-format
 msgid "copy from `%s' [%s] to `%s' [%s]\n"
 msgstr "  `%s' [%s]  `%s' [%s]\n"
 
-#: objcopy.c:1383 objcopy.c:1908
+#: objcopy.c:1258 objcopy.c:1715
 #, c-format
 msgid "Unable to recognise the format of the input file `%s'"
 msgstr "     `%s'"
 
-#: objcopy.c:1386
+#: objcopy.c:1261
 #, c-format
 msgid "Warning: Output file cannot represent architecture `%s'"
 msgstr ":       `%s'"
 
-#: objcopy.c:1449
-#, c-format
-msgid "can't add section '%s' - it already exists!"
-msgstr "    '%s' -   !"
-
-#: objcopy.c:1457
+#: objcopy.c:1305
 #, c-format
 msgid "can't create section `%s': %s"
 msgstr "   `%s': %s"
 
-#: objcopy.c:1593
+#: objcopy.c:1356
+msgid "there are no sections to be copied!"
+msgstr "   !"
+
+#: objcopy.c:1402
 #, c-format
 msgid "Can't fill gap after %s: %s"
 msgstr "    %s: %s"
 
-#: objcopy.c:1618
+#: objcopy.c:1427
 #, c-format
 msgid "Can't add padding to %s: %s"
 msgstr "    %s: %s"
 
-#: objcopy.c:1771
+#: objcopy.c:1594
 #, c-format
 msgid "%s: error copying private BFD data: %s"
 msgstr "%s:     BFD: %s"
 
-#: objcopy.c:1784
-#, c-format
-msgid "this target does not support %lu alternative machine codes"
-msgstr "    %lu   "
+#: objcopy.c:1605
+msgid "unknown alternate machine code, ignored"
+msgstr "   , "
 
-#: objcopy.c:1788
-msgid "treating that number as an absolute e_machine value instead"
-msgstr "      e_machine"
-
-#: objcopy.c:1792
-msgid "ignoring the alternative value"
-msgstr "  "
+#: objcopy.c:1635 objcopy.c:1665
+#, c-format
+msgid "cannot mkdir %s for archive copying (error: %s)"
+msgstr "  mkdir %s    (: %s)"
 
-#: objcopy.c:1822 objcopy.c:1852
+#: objcopy.c:1787
 #, c-format
-msgid "cannot create tempdir for archive copying (error: %s)"
-msgstr "       (: %s)"
+msgid "error: the input file '%s' is empty"
+msgstr ":   '%s' "
 
-#: objcopy.c:2088
+#: objcopy.c:1889
 #, c-format
 msgid "Multiple renames of section %s"
 msgstr "   %s"
 
-#: objcopy.c:2139
+#: objcopy.c:1940
 msgid "private header data"
 msgstr "  "
 
-#: objcopy.c:2147
+#: objcopy.c:1948
 #, c-format
 msgid "%s: error in %s: %s"
 msgstr "%s:   %s: %s"
 
-#: objcopy.c:2208
+#: objcopy.c:2007
 msgid "making"
 msgstr ""
 
-#: objcopy.c:2228
+#: objcopy.c:2022
 msgid "size"
 msgstr ""
 
-#: objcopy.c:2242
+#: objcopy.c:2036
 msgid "vma"
 msgstr "vma"
 
-#: objcopy.c:2267
+#: objcopy.c:2061
 msgid "alignment"
 msgstr ""
 
-#: objcopy.c:2289
+#: objcopy.c:2083
 msgid "private data"
 msgstr " "
 
-#: objcopy.c:2304
+#: objcopy.c:2091
 #, c-format
 msgid "%s: section `%s': error in %s: %s"
 msgstr "%s:  `%s':   %s: %s"
 
-#. User must pad the section up in order to do this.
-#: objcopy.c:2429
-#, c-format
-msgid "cannot reverse bytes: length of section %s must be evenly divisible by %d"
-msgstr "      :   %s      %d"
-
-#: objcopy.c:2605
+#: objcopy.c:2363
 #, c-format
 msgid "%s: can't create debugging section: %s"
 msgstr "%s:    : %s"
 
-#: objcopy.c:2619
+#: objcopy.c:2377
 #, c-format
 msgid "%s: can't set debugging section contents: %s"
 msgstr "%s:     : %s"
 
-#: objcopy.c:2628
+#: objcopy.c:2386
 #, c-format
 msgid "%s: don't know how to write debugging information for %s"
 msgstr "%s: ,      %s"
 
-#: objcopy.c:2769
-#, c-format
-msgid "could not create temporary file to hold stripped copy of '%s'"
-msgstr "         '%s'"
-
-#: objcopy.c:2819
+#: objcopy.c:2561
 msgid "byte number must be non-negative"
 msgstr "     '"
 
-#: objcopy.c:2829
+#: objcopy.c:2571
 msgid "interleave must be positive"
 msgstr "   "
 
-#: objcopy.c:2849 objcopy.c:2857
+#: objcopy.c:2591 objcopy.c:2599
 #, c-format
 msgid "%s both copied and removed"
 msgstr " %s   "
 
-#: objcopy.c:2958 objcopy.c:3032 objcopy.c:3132 objcopy.c:3163 objcopy.c:3187
-#: objcopy.c:3191 objcopy.c:3211
+#: objcopy.c:2696 objcopy.c:2767 objcopy.c:2867 objcopy.c:2898 objcopy.c:2922
+#: objcopy.c:2926 objcopy.c:2946
 #, c-format
 msgid "bad format for %s"
 msgstr "   %s"
 
-#: objcopy.c:2982
+#: objcopy.c:2717
 #, c-format
 msgid "cannot open: %s: %s"
 msgstr " : %s: %s"
 
-#: objcopy.c:3101
+#: objcopy.c:2836
 #, c-format
 msgid "Warning: truncating gap-fill from 0x%s to 0x%x"
 msgstr ":     0x%s  0x%x"
 
-#: objcopy.c:3269
-msgid "unable to parse alternative machine code"
-msgstr "     "
-
-#: objcopy.c:3314
-msgid "number of bytes to reverse must be positive and even"
-msgstr " ,           "
+#: objcopy.c:3000
+msgid "alternate machine code index must be positive"
+msgstr "      "
 
-#: objcopy.c:3317
-#, c-format
-msgid "Warning: ignoring previous --reverse-bytes value of %d"
-msgstr ":   --reverse-bytes,   %d  "
-
-#: objcopy.c:3345
+#: objcopy.c:3058
 msgid "byte number must be less than interleave"
 msgstr "     "
 
-#: objcopy.c:3375
+#: objcopy.c:3088
 #, c-format
 msgid "architecture %s unknown"
 msgstr " %s "
 
-#: objcopy.c:3379
+#: objcopy.c:3092
 msgid "Warning: input target 'binary' required for binary architecture parameter."
 msgstr ": ''        ."
 
-#: objcopy.c:3380
+#: objcopy.c:3093
 #, c-format
 msgid " Argument %s ignored"
 msgstr "  %s "
 
-#: objcopy.c:3386
+#: objcopy.c:3099
 #, c-format
 msgid "warning: could not locate '%s'.  System error message: %s"
 msgstr ":   '%s'.    : %s"
 
-#: objcopy.c:3397
-#, c-format
-msgid "warning: could not create temporary file whilst copying '%s', (error: %s)"
-msgstr ":        '%s', (: %s)"
-
-#: objcopy.c:3424 objcopy.c:3438
+#: objcopy.c:3141 objcopy.c:3155
 #, c-format
 msgid "%s %s%c0x%s never used"
 msgstr "%s %s%c0x%s   "
 
-#: objdump.c:176
+#: objdump.c:178
 #, c-format
 msgid "Usage: %s <option(s)> <file(s)>\n"
 msgstr ": %s <> <()>\n"
 
-#: objdump.c:177
+#: objdump.c:179
 #, c-format
 msgid " Display information from object <file(s)>.\n"
 msgstr "    ' <()>.\n"
 
-#: objdump.c:178
+#: objdump.c:180
 #, c-format
 msgid " At least one of the following switches must be given:\n"
 msgstr "        :\n"
 
-#: objdump.c:179
+#: objdump.c:181
 #, c-format
 msgid ""
 "  -a, --archive-headers    Display archive header information\n"
@@ -3135,7 +3056,7 @@
 "  -i, --info                   '  \n"
 "  -H, --help                 \n"
 
-#: objdump.c:204
+#: objdump.c:206
 #, c-format
 msgid ""
 "\n"
@@ -3144,7 +3065,7 @@
 "\n"
 "    ':\n"
 
-#: objdump.c:205
+#: objdump.c:207
 #, c-format
 msgid ""
 "  -b, --target=BFDNAME           Specify the target object format as BFDNAME\n"
@@ -3193,52 +3114,52 @@
 "      --special-syms                  \n"
 "\n"
 
-#: objdump.c:387
+#: objdump.c:389
 #, c-format
 msgid "Sections:\n"
 msgstr ":\n"
 
-#: objdump.c:390 objdump.c:394
+#: objdump.c:392 objdump.c:396
 #, c-format
 msgid "Idx Name          Size      VMA       LMA       File off  Algn"
 msgstr "              VMA       LMA             "
 
-#: objdump.c:396
+#: objdump.c:398
 #, c-format
 msgid "Idx Name          Size      VMA               LMA               File off  Algn"
 msgstr "              VMA               LMA                     "
 
-#: objdump.c:400
+#: objdump.c:402
 #, c-format
 msgid "  Flags"
 msgstr "  "
 
-#: objdump.c:402
+#: objdump.c:404
 #, c-format
 msgid "  Pg"
 msgstr "  "
 
-#: objdump.c:445
+#: objdump.c:447
 #, c-format
 msgid "%s: not a dynamic object"
 msgstr "%s:   '"
 
-#: objdump.c:1778
+#: objdump.c:1735
 #, c-format
 msgid "Disassembly of section %s:\n"
 msgstr "  %s:\n"
 
-#: objdump.c:1940
+#: objdump.c:1897
 #, c-format
 msgid "Can't use supplied machine %s"
 msgstr "    %s"
 
-#: objdump.c:1959
+#: objdump.c:1916
 #, c-format
 msgid "Can't disassemble for architecture %s\n"
 msgstr "    %s\n"
 
-#: objdump.c:2064
+#: objdump.c:2006
 #, c-format
 msgid ""
 "\n"
@@ -3247,7 +3168,7 @@
 "\n"
 "    '%s'.\n"
 
-#: objdump.c:2201
+#: objdump.c:2143
 #, c-format
 msgid ""
 "No %s section present\n"
@@ -3256,12 +3177,12 @@
 " %s \n"
 "\n"
 
-#: objdump.c:2210
+#: objdump.c:2152
 #, c-format
 msgid "Reading %s section of %s failed: %s"
 msgstr " %s  %s  : %s"
 
-#: objdump.c:2254
+#: objdump.c:2196
 #, c-format
 msgid ""
 "Contents of %s section:\n"
@@ -3270,17 +3191,17 @@
 "  %s:\n"
 "\n"
 
-#: objdump.c:2381
+#: objdump.c:2323
 #, c-format
 msgid "architecture: %s, "
 msgstr ": %s, "
 
-#: objdump.c:2384
+#: objdump.c:2326
 #, c-format
 msgid "flags 0x%08x:\n"
 msgstr " 0x%08x:\n"
 
-#: objdump.c:2398
+#: objdump.c:2340
 #, c-format
 msgid ""
 "\n"
@@ -3289,27 +3210,27 @@
 "\n"
 "  0x"
 
-#: objdump.c:2438
+#: objdump.c:2380
 #, c-format
 msgid "Contents of section %s:\n"
 msgstr "  %s:\n"
 
-#: objdump.c:2563
+#: objdump.c:2505
 #, c-format
 msgid "no symbols\n"
 msgstr " \n"
 
-#: objdump.c:2570
+#: objdump.c:2512
 #, c-format
 msgid "no information for symbol number %ld\n"
 msgstr "     %ld\n"
 
-#: objdump.c:2573
+#: objdump.c:2515
 #, c-format
 msgid "could not determine the type of symbol number %ld\n"
 msgstr "     %ld\n"
 
-#: objdump.c:2850
+#: objdump.c:2788
 #, c-format
 msgid ""
 "\n"
@@ -3318,239 +3239,222 @@
 "\n"
 "%s:       %s\n"
 
-#: objdump.c:2908
+#: objdump.c:2845
 #, c-format
 msgid "%s: printing debugging information failed"
 msgstr "%s:     "
 
-#: objdump.c:3002
+#: objdump.c:2936
 #, c-format
 msgid "In archive %s:\n"
 msgstr "  %s:\n"
 
-#: objdump.c:3124
+#: objdump.c:3058
 msgid "unrecognized -E option"
 msgstr "  -E"
 
-#: objdump.c:3135
+#: objdump.c:3069
 #, c-format
 msgid "unrecognized --endian type `%s'"
 msgstr " --endian  `%s'"
 
-#: rclex.c:196
-msgid "invalid value specified for pragma code_page.\n"
-msgstr "     code_page.\n"
-
-#: rdcoff.c:198
+#: rdcoff.c:196
 #, c-format
 msgid "parse_coff_type: Bad type code 0x%x"
 msgstr "parse_coff_type:    0x%x"
 
-#: rdcoff.c:406 rdcoff.c:511 rdcoff.c:699
+#: rdcoff.c:404 rdcoff.c:509 rdcoff.c:697
 #, c-format
 msgid "bfd_coff_get_syment failed: %s"
 msgstr "bfd_coff_get_syment  : %s"
 
-#: rdcoff.c:422 rdcoff.c:719
+#: rdcoff.c:420 rdcoff.c:717
 #, c-format
 msgid "bfd_coff_get_auxent failed: %s"
 msgstr "bfd_coff_get_auxent  : %s"
 
-#: rdcoff.c:786
+#: rdcoff.c:784
 #, c-format
 msgid "%ld: .bf without preceding function"
 msgstr "%ld: .bf   "
 
-#: rdcoff.c:836
+#: rdcoff.c:834
 #, c-format
 msgid "%ld: unexpected .ef\n"
 msgstr "%ld:  .ef\n"
 
-#: rddbg.c:86
+#: rddbg.c:85
 #, c-format
 msgid "%s: no recognized debugging information"
 msgstr "%s:    "
 
-#: rddbg.c:400
+#: rddbg.c:394
 #, c-format
 msgid "Last stabs entries before error:\n"
 msgstr "  stabs  :\n"
 
-#: readelf.c:319
+#: readelf.c:264
 #, c-format
 msgid "Unable to seek to 0x%lx for %s\n"
 msgstr "  0x%lx  %s\n"
 
-#: readelf.c:334
+#: readelf.c:279
 #, c-format
 msgid "Out of memory allocating 0x%lx bytes for %s\n"
 msgstr " '   0x%lx   %s\n"
 
-#: readelf.c:344
+#: readelf.c:289
 #, c-format
 msgid "Unable to read in 0x%lx bytes of %s\n"
 msgstr "  0x%lx   %s\n"
 
-#: readelf.c:683
+#: readelf.c:623
 msgid "Don't know about relocations on this machine architecture\n"
 msgstr "      \n"
 
-#: readelf.c:703 readelf.c:731 readelf.c:775 readelf.c:803
+#: readelf.c:643 readelf.c:671 readelf.c:715 readelf.c:743
 msgid "relocs"
 msgstr ""
 
-#: readelf.c:714 readelf.c:742 readelf.c:786 readelf.c:814
-msgid "out of memory parsing relocs\n"
-msgstr " '   relocs\n"
+#: readelf.c:654 readelf.c:682 readelf.c:726 readelf.c:754
+msgid "out of memory parsing relocs"
+msgstr " '   "
 
-#: readelf.c:868
+#: readelf.c:808
 #, c-format
 msgid " Offset     Info    Type                Sym. Value  Symbol's Name + Addend\n"
 msgstr "                             ..    + Addend\n"
 
-#: readelf.c:870
+#: readelf.c:810
 #, c-format
 msgid " Offset     Info    Type            Sym.Value  Sym. Name + Addend\n"
 msgstr "                         .   . + Addend\n"
 
-#: readelf.c:875
+#: readelf.c:815
 #, c-format
 msgid " Offset     Info    Type                Sym. Value  Symbol's Name\n"
 msgstr "                             .    \n"
 
-#: readelf.c:877
+#: readelf.c:817
 #, c-format
 msgid " Offset     Info    Type            Sym.Value  Sym. Name\n"
 msgstr "                         .   .\n"
 
-#: readelf.c:885
+#: readelf.c:825
 #, c-format
 msgid "    Offset             Info             Type               Symbol's Value  Symbol's Name + Addend\n"
 msgstr "                                                 .    + Addend\n"
 
-#: readelf.c:887
+#: readelf.c:827
 #, c-format
 msgid "  Offset          Info           Type           Sym. Value    Sym. Name + Addend\n"
 msgstr "                                     ..     . + Addend\n"
 
-#: readelf.c:892
+#: readelf.c:832
 #, c-format
 msgid "    Offset             Info             Type               Symbol's Value  Symbol's Name\n"
 msgstr "                                                 .   \n"
 
-#: readelf.c:894
+#: readelf.c:834
 #, c-format
 msgid "  Offset          Info           Type           Sym. Value    Sym. Name\n"
 msgstr "                                     ..     .\n"
 
-#: readelf.c:1198 readelf.c:1200 readelf.c:1318 readelf.c:1320 readelf.c:1329
-#: readelf.c:1331
+#: readelf.c:1127 readelf.c:1129 readelf.c:1238 readelf.c:1240 readelf.c:1249
+#: readelf.c:1251
 #, c-format
 msgid "unrecognized: %-7lx"
 msgstr ": %-7lx"
 
-#: readelf.c:1226
+#: readelf.c:1154
 #, c-format
 msgid "<unknown addend: %lx>"
 msgstr "< addend: %lx>"
 
-#: readelf.c:1288
+#: readelf.c:1210
 #, c-format
 msgid "<string table index: %3ld>"
 msgstr "<  : %3ld>"
 
-#: readelf.c:1290
+#: readelf.c:1212
 #, c-format
 msgid "<corrupt string table index: %3ld>"
 msgstr "<   : %3ld>"
 
-#: readelf.c:1625
+#: readelf.c:1522
 #, c-format
 msgid "Processor Specific: %lx"
 msgstr "  : %lx"
 
-#: readelf.c:1646
+#: readelf.c:1543
 #, c-format
 msgid "Operating System specific: %lx"
 msgstr "   : %lx"
 
-#: readelf.c:1650 readelf.c:2521
+#: readelf.c:1547 readelf.c:2349
 #, c-format
 msgid "<unknown>: %lx"
 msgstr "<>: %lx"
 
-#: readelf.c:1663
+#: readelf.c:1560
 msgid "NONE (None)"
 msgstr " ()"
 
-#: readelf.c:1664
+#: readelf.c:1561
 msgid "REL (Relocatable file)"
 msgstr "REL ( )"
 
-#: readelf.c:1665
+#: readelf.c:1562
 msgid "EXEC (Executable file)"
 msgstr "EXEC ( )"
 
-#: readelf.c:1666
+#: readelf.c:1563
 msgid "DYN (Shared object file)"
 msgstr "DYN ( ' )"
 
-#: readelf.c:1667
+#: readelf.c:1564
 msgid "CORE (Core file)"
 msgstr "CORE ( )"
 
-#: readelf.c:1671
+#: readelf.c:1568
 #, c-format
 msgid "Processor Specific: (%x)"
 msgstr "  : (%x)"
 
-#: readelf.c:1673
+#: readelf.c:1570
 #, c-format
 msgid "OS Specific: (%x)"
 msgstr "  : (%x)"
 
-#: readelf.c:1675 readelf.c:2714
+#: readelf.c:1572 readelf.c:1681 readelf.c:2541
 #, c-format
 msgid "<unknown>: %x"
 msgstr "<>: %x"
 
-#: readelf.c:1687
+#: readelf.c:1584
 msgid "None"
 msgstr ""
 
-#: readelf.c:1791
-#, c-format
-msgid "<unknown>: 0x%x"
-msgstr "<>: 0x%x"
-
-#: readelf.c:2048
-msgid "unknown"
-msgstr ""
-
-#: readelf.c:2049
-msgid "unknown mac"
-msgstr " mac"
-
-#: readelf.c:2358
+#: readelf.c:2186
 msgid "Standalone App"
 msgstr " "
 
-#: readelf.c:2361 readelf.c:3145 readelf.c:3161
+#: readelf.c:2189 readelf.c:2948 readelf.c:2964
 #, c-format
 msgid "<unknown: %x>"
 msgstr "<: %x>"
 
-#: readelf.c:2759
+#: readelf.c:2586
 #, c-format
 msgid "Usage: readelf <option(s)> elf-file(s)\n"
 msgstr ": readelf <> elf-()\n"
 
-#: readelf.c:2760
+#: readelf.c:2587
 #, c-format
 msgid " Display information about the contents of ELF format files\n"
 msgstr "        ELF\n"
 
-#: readelf.c:2761
+#: readelf.c:2588
 #, c-format
 msgid ""
 " Options are:\n"
@@ -3601,7 +3505,7 @@
 "  --debug-dump[=line,=info,=abbrev,=pubnames,=ranges,=macro,=frames,=str,=loc,=Ranges]\n"
 "                             DWARF2\n"
 
-#: readelf.c:2785
+#: readelf.c:2612
 #, c-format
 msgid ""
 "  -i --instruction-dump=<number>\n"
@@ -3610,7 +3514,7 @@
 "  -i --instruction-dump=<>\n"
 "                            <>\n"
 
-#: readelf.c:2789
+#: readelf.c:2616
 #, c-format
 msgid ""
 "  -I --histogram         Display histogram of bucket list lengths\n"
@@ -3625,96 +3529,96 @@
 "  -H --help                \n"
 "  -v --version              readelf\n"
 
-#: readelf.c:2817 readelf.c:2845 readelf.c:2849 readelf.c:9898
-msgid "Out of memory allocating dump request table.\n"
-msgstr " '     .\n"
+#: readelf.c:2642 readelf.c:9180
+msgid "Out of memory allocating dump request table."
+msgstr " '     ."
 
-#: readelf.c:3011 readelf.c:3079
+#: readelf.c:2816 readelf.c:2884
 #, c-format
 msgid "Unrecognized debug option '%s'\n"
 msgstr "   '%s'\n"
 
-#: readelf.c:3115
+#: readelf.c:2918
 #, c-format
 msgid "Invalid option '-%c'\n"
 msgstr "  '-%c'\n"
 
-#: readelf.c:3129
+#: readelf.c:2932
 msgid "Nothing to do.\n"
 msgstr "  .\n"
 
-#: readelf.c:3141 readelf.c:3157 readelf.c:6399
+#: readelf.c:2944 readelf.c:2960 readelf.c:6169
 msgid "none"
 msgstr ""
 
-#: readelf.c:3158
+#: readelf.c:2961
 msgid "2's complement, little endian"
 msgstr "  2, little endian"
 
-#: readelf.c:3159
+#: readelf.c:2962
 msgid "2's complement, big endian"
 msgstr "  2, big endian"
 
-#: readelf.c:3177
+#: readelf.c:2980
 msgid "Not an ELF file - it has the wrong magic bytes at the start\n"
 msgstr " ELF- -    magic-  \n"
 
-#: readelf.c:3185
+#: readelf.c:2988
 #, c-format
 msgid "ELF Header:\n"
 msgstr " ELF:\n"
 
-#: readelf.c:3186
+#: readelf.c:2989
 #, c-format
 msgid "  Magic:   "
 msgstr "  Magic:   "
 
-#: readelf.c:3190
+#: readelf.c:2993
 #, c-format
 msgid "  Class:                             %s\n"
 msgstr "  :                             %s\n"
 
-#: readelf.c:3192
+#: readelf.c:2995
 #, c-format
 msgid "  Data:                              %s\n"
 msgstr "  :                            %s\n"
 
-#: readelf.c:3194
+#: readelf.c:2997
 #, c-format
 msgid "  Version:                           %d %s\n"
 msgstr "  :                            %d %s\n"
 
-#: readelf.c:3201
+#: readelf.c:3004
 #, c-format
 msgid "  OS/ABI:                            %s\n"
 msgstr "  OS/ABI:                            %s\n"
 
-#: readelf.c:3203
+#: readelf.c:3006
 #, c-format
 msgid "  ABI Version:                       %d\n"
 msgstr "   ABI:                        %d\n"
 
-#: readelf.c:3205
+#: readelf.c:3008
 #, c-format
 msgid "  Type:                              %s\n"
 msgstr "  :                               %s\n"
 
-#: readelf.c:3207
+#: readelf.c:3010
 #, c-format
 msgid "  Machine:                           %s\n"
 msgstr "  :                            %s\n"
 
-#: readelf.c:3209
+#: readelf.c:3012
 #, c-format
 msgid "  Version:                           0x%lx\n"
 msgstr "  :                            0x%lx\n"
 
-#: readelf.c:3212
+#: readelf.c:3015
 #, c-format
 msgid "  Entry point address:               "
 msgstr "    :                 "
 
-#: readelf.c:3214
+#: readelf.c:3017
 #, c-format
 msgid ""
 "\n"
@@ -3723,7 +3627,7 @@
 "\n"
 "    :       "
 
-#: readelf.c:3216
+#: readelf.c:3019
 #, c-format
 msgid ""
 " (bytes into file)\n"
@@ -3732,59 +3636,57 @@
 " (  )\n"
 "    :       "
 
-#: readelf.c:3218
+#: readelf.c:3021
 #, c-format
 msgid " (bytes into file)\n"
 msgstr " (  )\n"
 
-#: readelf.c:3220
+#: readelf.c:3023
 #, c-format
 msgid "  Flags:                             0x%lx%s\n"
 msgstr "  :                             0x%lx%s\n"
 
-#: readelf.c:3223
+#: readelf.c:3026
 #, c-format
 msgid "  Size of this header:               %ld (bytes)\n"
 msgstr "    :            %ld ()\n"
 
-#: readelf.c:3225
+#: readelf.c:3028
 #, c-format
 msgid "  Size of program headers:           %ld (bytes)\n"
 msgstr "    :       %ld ()\n"
 
-#: readelf.c:3227
+#: readelf.c:3030
 #, c-format
 msgid "  Number of program headers:         %ld\n"
 msgstr "    :        %ld\n"
 
-#: readelf.c:3229
+#: readelf.c:3032
 #, c-format
 msgid "  Size of section headers:           %ld (bytes)\n"
 msgstr "    :         %ld ()\n"
 
-#: readelf.c:3231
+#: readelf.c:3034
 #, c-format
 msgid "  Number of section headers:         %ld"
 msgstr "    :          %ld"
 
-#: readelf.c:3236
+#: readelf.c:3039
 #, c-format
 msgid "  Section header string table index: %ld"
 msgstr "      : %ld"
 
-#: readelf.c:3277 readelf.c:3310
+#: readelf.c:3070 readelf.c:3103
 msgid "program headers"
 msgstr " "
 
-#: readelf.c:3348 readelf.c:3643 readelf.c:3684 readelf.c:3743 readelf.c:3806
-#: readelf.c:4429 readelf.c:4453 readelf.c:5731 readelf.c:5775 readelf.c:5973
-#: readelf.c:7007 readelf.c:7021 readelf.c:7378 readelf.c:7394 readelf.c:7533
-#: readelf.c:7558 readelf.c:8746 readelf.c:8938 readelf.c:9279 readelf.c:9690
-#: readelf.c:9757
+#: readelf.c:3141 readelf.c:3440 readelf.c:3481 readelf.c:3540 readelf.c:3603
+#: readelf.c:4208 readelf.c:4232 readelf.c:5510 readelf.c:5554 readelf.c:5752
+#: readelf.c:6734 readelf.c:6748 readelf.c:8564 readelf.c:8972 readelf.c:9039
 msgid "Out of memory\n"
 msgstr " '\n"
 
-#: readelf.c:3375
+#: readelf.c:3168
 #, c-format
 msgid ""
 "\n"
@@ -3793,7 +3695,7 @@
 "\n"
 "     .\n"
 
-#: readelf.c:3381
+#: readelf.c:3174
 #, c-format
 msgid ""
 "\n"
@@ -3802,12 +3704,12 @@
 "\n"
 " elf- - %s\n"
 
-#: readelf.c:3382
+#: readelf.c:3175
 #, c-format
 msgid "Entry point "
 msgstr "  "
 
-#: readelf.c:3384
+#: readelf.c:3177
 #, c-format
 msgid ""
 "\n"
@@ -3816,7 +3718,7 @@
 "\n"
 " %d  ,    "
 
-#: readelf.c:3396 readelf.c:3398
+#: readelf.c:3189 readelf.c:3191
 #, c-format
 msgid ""
 "\n"
@@ -3825,55 +3727,47 @@
 "\n"
 " :\n"
 
-#: readelf.c:3402
+#: readelf.c:3195
 #, c-format
 msgid "  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align\n"
 msgstr "                  .   .    . .   \n"
 
-#: readelf.c:3405
+#: readelf.c:3198
 #, c-format
 msgid "  Type           Offset   VirtAddr           PhysAddr           FileSiz  MemSiz   Flg Align\n"
 msgstr "                            .  .    \n"
 
-#: readelf.c:3409
+#: readelf.c:3202
 #, c-format
 msgid "  Type           Offset             VirtAddr           PhysAddr\n"
 msgstr "                                 \n"
 
-#: readelf.c:3411
+#: readelf.c:3204
 #, c-format
 msgid "                 FileSiz            MemSiz              Flags  Align\n"
 msgstr "                          '      \n"
 
-#: readelf.c:3504
+#: readelf.c:3297
 msgid "more than one dynamic segment\n"
 msgstr "    \n"
 
-#: readelf.c:3515
-msgid "no .dynamic section in the dynamic segment\n"
-msgstr "     .dynamic\n"
-
-#: readelf.c:3527
-msgid "the .dynamic section is not contained within the dynamic segment\n"
-msgstr "      .dynamic\n"
-
-#: readelf.c:3529
-msgid "the .dynamic section is not the first section in the dynamic segment.\n"
-msgstr " .dynamic      .\n"
+#: readelf.c:3308
+msgid "no .dynamic section in the dynamic segment"
+msgstr "     .dynamic"
+
+#: readelf.c:3317
+msgid "the .dynamic section is not contained within the dynamic segment"
+msgstr "      .dynamic"
+
+#: readelf.c:3319
+msgid "the .dynamic section is not the first section in the dynamic segment."
+msgstr " .dynamic      "
 
-#: readelf.c:3543
+#: readelf.c:3333
 msgid "Unable to find program interpreter name\n"
 msgstr "    \n"
 
-#: readelf.c:3550
-msgid "Internal error: failed to create format string to display program interpreter\n"
-msgstr " :         \n"
-
-#: readelf.c:3554
-msgid "Unable to read program interpreter name\n"
-msgstr "    \n"
-
-#: readelf.c:3557
+#: readelf.c:3340
 #, c-format
 msgid ""
 "\n"
@@ -3882,7 +3776,7 @@
 "\n"
 "      [  : %s]"
 
-#: readelf.c:3569
+#: readelf.c:3352
 #, c-format
 msgid ""
 "\n"
@@ -3891,33 +3785,33 @@
 "\n"
 "  -:\n"
 
-#: readelf.c:3570
+#: readelf.c:3353
 #, c-format
 msgid "  Segment Sections...\n"
 msgstr "   ...\n"
 
-#: readelf.c:3605
+#: readelf.c:3402
 msgid "Cannot interpret virtual addresses without program headers.\n"
 msgstr "      .\n"
 
-#: readelf.c:3621
+#: readelf.c:3418
 #, c-format
 msgid "Virtual address 0x%lx not located in any PT_LOAD segment.\n"
 msgstr "  0x%lx      PT_LOAD.\n"
 
-#: readelf.c:3635 readelf.c:3676
+#: readelf.c:3432 readelf.c:3473
 msgid "section headers"
 msgstr " "
 
-#: readelf.c:3720 readelf.c:3783
+#: readelf.c:3517 readelf.c:3580
 msgid "symbols"
 msgstr ""
 
-#: readelf.c:3730 readelf.c:3793
+#: readelf.c:3527 readelf.c:3590
 msgid "symtab shndx"
 msgstr "symtab shndx"
 
-#: readelf.c:4020 readelf.c:4413
+#: readelf.c:3817 readelf.c:4192
 #, c-format
 msgid ""
 "\n"
@@ -3926,38 +3820,38 @@
 "\n"
 "    .\n"
 
-#: readelf.c:4026
+#: readelf.c:3823
 #, c-format
 msgid "There are %d section headers, starting at offset 0x%lx:\n"
 msgstr " %d  ,    0x%lx:\n"
 
-#: readelf.c:4046 readelf.c:4530 readelf.c:4765 readelf.c:5073 readelf.c:5488
-#: readelf.c:7187
+#: readelf.c:3842 readelf.c:4309 readelf.c:4544 readelf.c:4852 readelf.c:5267
+#: readelf.c:6906
 msgid "string table"
 msgstr " "
 
-#: readelf.c:4102
+#: readelf.c:3881
 #, c-format
 msgid "Section %d has invalid sh_entsize %lx (expected %lx)\n"
 msgstr " %d   sh_entsize %lx ( %lx)\n"
 
-#: readelf.c:4122
+#: readelf.c:3901
 msgid "File contains multiple dynamic symbol tables\n"
 msgstr "     \n"
 
-#: readelf.c:4135
+#: readelf.c:3914
 msgid "File contains multiple dynamic string tables\n"
 msgstr "     \n"
 
-#: readelf.c:4140
+#: readelf.c:3919
 msgid "dynamic strings"
 msgstr " "
 
-#: readelf.c:4147
+#: readelf.c:3926
 msgid "File contains multiple symtab shndx tables\n"
 msgstr "    symtab shndx\n"
 
-#: readelf.c:4194
+#: readelf.c:3973
 #, c-format
 msgid ""
 "\n"
@@ -3966,7 +3860,7 @@
 "\n"
 " :\n"
 
-#: readelf.c:4196
+#: readelf.c:3975
 #, c-format
 msgid ""
 "\n"
@@ -3975,57 +3869,57 @@
 "\n"
 " :\n"
 
-#: readelf.c:4202 readelf.c:4213 readelf.c:4224
+#: readelf.c:3981 readelf.c:3992 readelf.c:4003
 #, c-format
 msgid "  [Nr] Name\n"
 msgstr "  [Nr] \n"
 
-#: readelf.c:4203
+#: readelf.c:3982
 #, c-format
 msgid "       Type            Addr     Off    Size   ES   Lk Inf Al\n"
 msgstr "                             ES     Al\n"
 
-#: readelf.c:4207
+#: readelf.c:3986
 #, c-format
 msgid "  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al\n"
 msgstr "  []                                    ES    Al\n"
 
-#: readelf.c:4214
+#: readelf.c:3993
 #, c-format
 msgid "       Type            Address          Off    Size   ES   Lk Inf Al\n"
 msgstr "                                      ES     Al\n"
 
-#: readelf.c:4218
+#: readelf.c:3997
 #, c-format
 msgid "  [Nr] Name              Type            Address          Off    Size   ES Flg Lk Inf Al\n"
 msgstr "  []                                            ES    Al\n"
 
-#: readelf.c:4225
+#: readelf.c:4004
 #, c-format
 msgid "       Type              Address          Offset            Link\n"
 msgstr "                                               \n"
 
-#: readelf.c:4226
+#: readelf.c:4005
 #, c-format
 msgid "       Size              EntSize          Info              Align\n"
 msgstr "                   .Ent                       \n"
 
-#: readelf.c:4230
+#: readelf.c:4009
 #, c-format
 msgid "  [Nr] Name              Type             Address           Offset\n"
 msgstr "  []                                        \n"
 
-#: readelf.c:4231
+#: readelf.c:4010
 #, c-format
 msgid "       Size              EntSize          Flags  Link  Info  Align\n"
 msgstr "                   .Ent             \n"
 
-#: readelf.c:4236
+#: readelf.c:4015
 #, c-format
 msgid "       Flags\n"
 msgstr "       \n"
 
-#: readelf.c:4371
+#: readelf.c:4150
 #, c-format
 msgid ""
 "Key to Flags:\n"
@@ -4038,16 +3932,16 @@
 "  I (), L ( ), G (), x (.)\n"
 "  O (   ) o (  ), p (  )\n"
 
-#: readelf.c:4389
+#: readelf.c:4168
 #, c-format
 msgid "[<unknown>: 0x%x]"
 msgstr "[<>: 0x%x]"
 
-#: readelf.c:4420
+#: readelf.c:4199
 msgid "Section headers are not available!\n"
 msgstr "  !\n"
 
-#: readelf.c:4444
+#: readelf.c:4223
 #, c-format
 msgid ""
 "\n"
@@ -4056,46 +3950,46 @@
 "\n"
 "     .\n"
 
-#: readelf.c:4480
+#: readelf.c:4259
 #, c-format
 msgid "Bad sh_link in group section `%s'\n"
 msgstr " sh_link    `%s'\n"
 
-#: readelf.c:4499
+#: readelf.c:4278
 #, c-format
 msgid "Bad sh_info in group section `%s'\n"
 msgstr " sh_info    `%s'\n"
 
-#: readelf.c:4538 readelf.c:7690
+#: readelf.c:4317 readelf.c:7243
 msgid "section data"
 msgstr " "
 
-#: readelf.c:4550
+#: readelf.c:4329
 #, c-format
 msgid "   [Index]    Name\n"
 msgstr "   []   \n"
 
-#: readelf.c:4564
+#: readelf.c:4343
 #, c-format
 msgid "section [%5u] in group section [%5u] > maximum section [%5u]\n"
 msgstr " [%5u]      [%5u] >   [%5u]\n"
 
-#: readelf.c:4570
+#: readelf.c:4349
 #, c-format
 msgid "invalid section [%5u] in group section [%5u]\n"
 msgstr "  [%5u]    [%5u]\n"
 
-#: readelf.c:4580
+#: readelf.c:4359
 #, c-format
 msgid "section [%5u] in group section [%5u] already in group section [%5u]\n"
 msgstr " [%5u]    [%5u]      [%5u]\n"
 
-#: readelf.c:4593
+#: readelf.c:4372
 #, c-format
 msgid "section 0 in group section [%5u]\n"
 msgstr " 0    [%5u]\n"
 
-#: readelf.c:4689
+#: readelf.c:4468
 #, c-format
 msgid ""
 "\n"
@@ -4104,7 +3998,7 @@
 "\n"
 "'%s'     0x%lx  %ld :\n"
 
-#: readelf.c:4701
+#: readelf.c:4480
 #, c-format
 msgid ""
 "\n"
@@ -4113,7 +4007,7 @@
 "\n"
 "      .\n"
 
-#: readelf.c:4725
+#: readelf.c:4504
 #, c-format
 msgid ""
 "\n"
@@ -4122,17 +4016,17 @@
 "\n"
 "  "
 
-#: readelf.c:4730 readelf.c:5149 readelf.c:5163 readelf.c:5503
+#: readelf.c:4509 readelf.c:4928 readelf.c:4942 readelf.c:5282
 #, c-format
 msgid "'%s'"
 msgstr "'%s'"
 
-#: readelf.c:4732 readelf.c:5165 readelf.c:5505
+#: readelf.c:4511 readelf.c:4944 readelf.c:5284
 #, c-format
 msgid " at offset 0x%lx contains %lu entries:\n"
 msgstr "   0x%lx  %lu :\n"
 
-#: readelf.c:4784
+#: readelf.c:4563
 #, c-format
 msgid ""
 "\n"
@@ -4141,16 +4035,16 @@
 "\n"
 "    .\n"
 
-#: readelf.c:4963 readelf.c:5345
+#: readelf.c:4742 readelf.c:5124
 msgid "unwind table"
 msgstr " "
 
-#: readelf.c:5022 readelf.c:5435
+#: readelf.c:4801 readelf.c:5214
 #, c-format
 msgid "Skipping unexpected relocation type %s\n"
 msgstr "    %s\n"
 
-#: readelf.c:5081 readelf.c:5496 readelf.c:5547
+#: readelf.c:4860 readelf.c:5275 readelf.c:5326
 #, c-format
 msgid ""
 "\n"
@@ -4159,7 +4053,7 @@
 "\n"
 "     .\n"
 
-#: readelf.c:5144
+#: readelf.c:4923
 #, c-format
 msgid ""
 "\n"
@@ -4168,11 +4062,11 @@
 "\n"
 "       "
 
-#: readelf.c:5156
+#: readelf.c:4935
 msgid "unwind info"
 msgstr " "
 
-#: readelf.c:5158 readelf.c:5502
+#: readelf.c:4937 readelf.c:5281
 #, c-format
 msgid ""
 "\n"
@@ -4181,11 +4075,11 @@
 "\n"
 "  "
 
-#: readelf.c:5712 readelf.c:5756
+#: readelf.c:5491 readelf.c:5535
 msgid "dynamic section"
 msgstr " "
 
-#: readelf.c:5833
+#: readelf.c:5612
 #, c-format
 msgid ""
 "\n"
@@ -4194,31 +4088,31 @@
 "\n"
 "     .\n"
 
-#: readelf.c:5871
-msgid "Unable to seek to end of file!\n"
-msgstr "     !\n"
+#: readelf.c:5650
+msgid "Unable to seek to end of file!"
+msgstr "     !"
 
-#: readelf.c:5884
+#: readelf.c:5663
 msgid "Unable to determine the number of symbols to load\n"
 msgstr "    \n"
 
-#: readelf.c:5919
+#: readelf.c:5698
 msgid "Unable to seek to end of file\n"
 msgstr "     \n"
 
-#: readelf.c:5926
+#: readelf.c:5705
 msgid "Unable to determine the length of the dynamic string table\n"
 msgstr "     \n"
 
-#: readelf.c:5931
+#: readelf.c:5710
 msgid "dynamic string table"
 msgstr "  "
 
-#: readelf.c:5966
+#: readelf.c:5745
 msgid "symbol information"
 msgstr "  "
 
-#: readelf.c:5991
+#: readelf.c:5770
 #, c-format
 msgid ""
 "\n"
@@ -4227,77 +4121,77 @@
 "\n"
 "    0x%lx  %u :\n"
 
-#: readelf.c:5994
+#: readelf.c:5773
 #, c-format
 msgid "  Tag        Type                         Name/Value\n"
 msgstr "                                    /\n"
 
-#: readelf.c:6030
+#: readelf.c:5809
 #, c-format
 msgid "Auxiliary library"
 msgstr " "
 
-#: readelf.c:6034
+#: readelf.c:5813
 #, c-format
 msgid "Filter library"
 msgstr " "
 
-#: readelf.c:6038
+#: readelf.c:5817
 #, c-format
 msgid "Configuration file"
 msgstr " "
 
-#: readelf.c:6042
+#: readelf.c:5821
 #, c-format
 msgid "Dependency audit library"
 msgstr "  "
 
-#: readelf.c:6046
+#: readelf.c:5825
 #, c-format
 msgid "Audit library"
 msgstr " "
 
-#: readelf.c:6064 readelf.c:6092 readelf.c:6120
+#: readelf.c:5843 readelf.c:5871 readelf.c:5899
 #, c-format
 msgid "Flags:"
 msgstr ":"
 
-#: readelf.c:6067 readelf.c:6095 readelf.c:6122
+#: readelf.c:5846 readelf.c:5874 readelf.c:5901
 #, c-format
 msgid " None\n"
 msgstr " \n"
 
-#: readelf.c:6243
+#: readelf.c:6022
 #, c-format
 msgid "Shared library: [%s]"
 msgstr " : [%s]"
 
-#: readelf.c:6246
+#: readelf.c:6025
 #, c-format
 msgid " program interpreter"
 msgstr "  "
 
-#: readelf.c:6250
+#: readelf.c:6029
 #, c-format
 msgid "Library soname: [%s]"
 msgstr " soname: [%s]"
 
-#: readelf.c:6254
+#: readelf.c:6033
 #, c-format
 msgid "Library rpath: [%s]"
 msgstr " rpath: [%s]"
 
-#: readelf.c:6258
+#: readelf.c:6037
 #, c-format
 msgid "Library runpath: [%s]"
 msgstr " runpath: [%s]"
 
-#: readelf.c:6321
+#: readelf.c:6100
 #, c-format
 msgid "Not needed object: [%s]\n"
 msgstr " ': [%s]\n"
 
-#: readelf.c:6444
+#: readelf.c:6214
 #, c-format
 msgid ""
 "\n"
@@ -4306,51 +4200,51 @@
 "\n"
 "   '%s'  %ld :\n"
 
-#: readelf.c:6447
+#: readelf.c:6217
 #, c-format
 msgid "  Addr: 0x"
 msgstr "  : 0x"
 
-#: readelf.c:6449 readelf.c:6656
+#: readelf.c:6219 readelf.c:6426
 #, c-format
 msgid "  Offset: %#08lx  Link: %lx (%s)\n"
 msgstr "  : %#08lx  : %lx (%s)\n"
 
-#: readelf.c:6458
+#: readelf.c:6228
 msgid "version definition section"
 msgstr "  "
 
-#: readelf.c:6484
+#: readelf.c:6254
 #, c-format
 msgid "  %#06x: Rev: %d  Flags: %s"
 msgstr "  %#06x: : %d  : %s"
 
-#: readelf.c:6487
+#: readelf.c:6257
 #, c-format
 msgid "  Index: %d  Cnt: %d  "
 msgstr "  : %d  : %d  "
 
-#: readelf.c:6498
+#: readelf.c:6268
 #, c-format
 msgid "Name: %s\n"
 msgstr ": %s\n"
 
-#: readelf.c:6500
+#: readelf.c:6270
 #, c-format
 msgid "Name index: %ld\n"
 msgstr " : %ld\n"
 
-#: readelf.c:6515
+#: readelf.c:6285
 #, c-format
 msgid "  %#06x: Parent %d: %s\n"
 msgstr "  %#06x:  %d: %s\n"
 
-#: readelf.c:6518
+#: readelf.c:6288
 #, c-format
 msgid "  %#06x: Parent %d, name index: %ld\n"
 msgstr "  %#06x:  %d,  : %ld\n"
 
-#: readelf.c:6537
+#: readelf.c:6307
 #, c-format
 msgid ""
 "\n"
@@ -4359,60 +4253,60 @@
 "\n"
 "   '%s'  %ld :\n"
 
-#: readelf.c:6540
+#: readelf.c:6310
 #, c-format
 msgid " Addr: 0x"
 msgstr " : 0x"
 
-#: readelf.c:6542
+#: readelf.c:6312
 #, c-format
 msgid "  Offset: %#08lx  Link to section: %ld (%s)\n"
 msgstr "  : %#08lx    : %ld (%s)\n"
 
-#: readelf.c:6551
+#: readelf.c:6321
 msgid "version need section"
 msgstr "  "
 
-#: readelf.c:6573
+#: readelf.c:6343
 #, c-format
 msgid "  %#06x: Version: %d"
 msgstr "  %#06x: : %d"
 
-#: readelf.c:6576
+#: readelf.c:6346
 #, c-format
 msgid "  File: %s"
 msgstr "  : %s"
 
-#: readelf.c:6578
+#: readelf.c:6348
 #, c-format
 msgid "  File: %lx"
 msgstr "  : %lx"
 
-#: readelf.c:6580
+#: readelf.c:6350
 #, c-format
 msgid "  Cnt: %d\n"
 msgstr "  : %d\n"
 
-#: readelf.c:6598
+#: readelf.c:6368
 #, c-format
 msgid "  %#06x:   Name: %s"
 msgstr "  %#06x:   : %s"
 
-#: readelf.c:6601
+#: readelf.c:6371
 #, c-format
 msgid "  %#06x:   Name index: %lx"
 msgstr "  %#06x:    : %lx"
 
-#: readelf.c:6604
+#: readelf.c:6374
 #, c-format
 msgid "  Flags: %s  Version: %d\n"
 msgstr "  : %s  : %d\n"
 
-#: readelf.c:6647
+#: readelf.c:6417
 msgid "version string table"
 msgstr "  "
 
-#: readelf.c:6651
+#: readelf.c:6421
 #, c-format
 msgid ""
 "\n"
@@ -4421,40 +4315,40 @@
 "\n"
 "   '%s'  %d :\n"
 
-#: readelf.c:6654
+#: readelf.c:6424
 #, c-format
 msgid " Addr: "
 msgstr " : "
 
-#: readelf.c:6664
+#: readelf.c:6434
 msgid "version symbol data"
 msgstr "  "
 
-#: readelf.c:6691
+#: readelf.c:6461
 msgid "   0 (*local*)    "
 msgstr "   0 (**)    "
 
-#: readelf.c:6695
+#: readelf.c:6465
 msgid "   1 (*global*)   "
 msgstr "   1 (**)   "
 
-#: readelf.c:6733 readelf.c:7255
+#: readelf.c:6503 readelf.c:6969
 msgid "version need"
 msgstr " "
 
-#: readelf.c:6743
+#: readelf.c:6513
 msgid "version need aux (2)"
 msgstr "  aux (2)"
 
-#: readelf.c:6785 readelf.c:7320
+#: readelf.c:6555 readelf.c:7034
 msgid "version def"
 msgstr " "
 
-#: readelf.c:6805 readelf.c:7335
+#: readelf.c:6575 readelf.c:7049
 msgid "version def aux"
 msgstr "  aux"
 
-#: readelf.c:6836
+#: readelf.c:6606
 #, c-format
 msgid ""
 "\n"
@@ -4463,28 +4357,23 @@
 "\n"
 "       .\n"
 
-#: readelf.c:6955
-#, c-format
-msgid "<other>: %x"
-msgstr "<>: %x"
-
-#: readelf.c:7013
+#: readelf.c:6740
 msgid "Unable to read in dynamic data\n"
 msgstr "   \n"
 
-#: readelf.c:7069 readelf.c:7443 readelf.c:7467 readelf.c:7497 readelf.c:7521
-msgid "Unable to seek to start of dynamic information\n"
-msgstr "     \n"
+#: readelf.c:6793
+msgid "Unable to seek to start of dynamic information"
+msgstr "      "
 
-#: readelf.c:7075 readelf.c:7449
+#: readelf.c:6799
 msgid "Failed to read in number of buckets\n"
 msgstr "     '\n"
 
-#: readelf.c:7081
+#: readelf.c:6805
 msgid "Failed to read in number of chains\n"
 msgstr "    \n"
 
-#: readelf.c:7101
+#: readelf.c:6825
 #, c-format
 msgid ""
 "\n"
@@ -4493,17 +4382,17 @@
 "\n"
 "   :\n"
 
-#: readelf.c:7103
+#: readelf.c:6827
 #, c-format
 msgid "  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"
 msgstr "  :            ' Vis      \n"
 
-#: readelf.c:7105
+#: readelf.c:6829
 #, c-format
 msgid "  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"
 msgstr "  :                ' Vis      \n"
 
-#: readelf.c:7163
+#: readelf.c:6882
 #, c-format
 msgid ""
 "\n"
@@ -4512,29 +4401,29 @@
 "\n"
 "  '%s'  %lu :\n"
 
-#: readelf.c:7167
+#: readelf.c:6886
 #, c-format
 msgid "   Num:    Value  Size Type    Bind   Vis      Ndx Name\n"
 msgstr "   :             '  Vis       \n"
 
-#: readelf.c:7169
+#: readelf.c:6888
 #, c-format
 msgid "   Num:    Value          Size Type    Bind   Vis      Ndx Name\n"
 msgstr "   :                     '  Vis       \n"
 
-#: readelf.c:7225
+#: readelf.c:6939
 msgid "version data"
 msgstr " "
 
-#: readelf.c:7268
+#: readelf.c:6982
 msgid "version need aux (3)"
 msgstr "  aux (3)"
 
-#: readelf.c:7295
-msgid "bad dynamic symbol\n"
-msgstr "  \n"
+#: readelf.c:7009
+msgid "bad dynamic symbol"
+msgstr "  "
 
-#: readelf.c:7359
+#: readelf.c:7073
 #, c-format
 msgid ""
 "\n"
@@ -4543,7 +4432,7 @@
 "\n"
 "       .\n"
 
-#: readelf.c:7371
+#: readelf.c:7085
 #, c-format
 msgid ""
 "\n"
@@ -4552,25 +4441,16 @@
 "\n"
 "    ' ( %lu ):\n"
 
-#: readelf.c:7373 readelf.c:7539
+#: readelf.c:7087
 #, c-format
 msgid " Length  Number     %% of total  Coverage\n"
 msgstr "          %%   \n"
 
-#: readelf.c:7505
-msgid "Failed to determine last chain length\n"
-msgstr "    \n"
+#: readelf.c:7092 readelf.c:7108 readelf.c:8031 readelf.c:8223
+msgid "Out of memory"
+msgstr " '"
 
-#: readelf.c:7537
-#, c-format
-msgid ""
-"\n"
-"Histogram for `.gnu.hash' bucket list length (total of %lu buckets):\n"
-msgstr ""
-"\n"
-"    `.gnu.hash' ( %lu ):\n"
-
-#: readelf.c:7603
+#: readelf.c:7157
 #, c-format
 msgid ""
 "\n"
@@ -4579,12 +4459,12 @@
 "\n"
 "     0x%lx  %d :\n"
 
-#: readelf.c:7606
+#: readelf.c:7160
 #, c-format
 msgid " Num: Name                           BoundTo     Flags\n"
 msgstr " :                                   \n"
 
-#: readelf.c:7658
+#: readelf.c:7212
 #, c-format
 msgid ""
 "\n"
@@ -4593,7 +4473,7 @@
 "\n"
 "   %s\n"
 
-#: readelf.c:7680
+#: readelf.c:7233
 #, c-format
 msgid ""
 "\n"
@@ -4602,7 +4482,7 @@
 "\n"
 " '%s'     .\n"
 
-#: readelf.c:7685
+#: readelf.c:7238
 #, c-format
 msgid ""
 "\n"
@@ -4611,37 +4491,27 @@
 "\n"
 "Hex-  '%s':\n"
 
-#: readelf.c:7710
-#, c-format
-msgid " NOTE: This section has relocations against it, but these have NOT been applied to this dump.\n"
-msgstr " :        ,        .\n"
-
-#: readelf.c:7845
-#, c-format
-msgid "skipping relocation of unknown size against offset 0x%lx in section %s\n"
-msgstr "      0x%lx   %s\n"
-
-#: readelf.c:7854
+#: readelf.c:7359
 #, c-format
 msgid "skipping invalid relocation offset 0x%lx in section %s\n"
 msgstr "    0x%lx   %s\n"
 
-#: readelf.c:7875
+#: readelf.c:7376
 #, c-format
 msgid "skipping unexpected symbol type %s in relocation in section .rela%s\n"
 msgstr "    %s     .rela%s\n"
 
-#: readelf.c:7902
+#: readelf.c:7402
 #, c-format
 msgid "skipping unexpected symbol type %s in relocation in section .rela.%s\n"
 msgstr "    %s     .rela.%s\n"
 
-#: readelf.c:7935
+#: readelf.c:7435
 #, c-format
 msgid "%s section data"
 msgstr "  %s"
 
-#: readelf.c:7972
+#: readelf.c:7472
 #, c-format
 msgid ""
 "\n"
@@ -4650,49 +4520,44 @@
 "\n"
 " '%s'    .\n"
 
-#: readelf.c:7998
+#: readelf.c:7498
 #, c-format
 msgid "Unrecognized debug section: %s\n"
 msgstr "  : %s\n"
 
-#: readelf.c:8026
-#, c-format
-msgid "Section '%s' was not dumped because it does not exist!\n"
-msgstr "  '%s'    ,    !\n"
-
-#: readelf.c:8061
+#: readelf.c:7533
 #, c-format
 msgid "Section %d was not dumped because it does not exist!\n"
 msgstr "  %d    ,    !\n"
 
-#: readelf.c:8478
+#: readelf.c:7791
 msgid "attributes"
 msgstr ""
 
-#: readelf.c:8497
+#: readelf.c:7809
 #, c-format
 msgid "ERROR: Bad section length (%d > %d)\n"
 msgstr ":    (%d > %d)\n"
 
-#: readelf.c:8522
+#: readelf.c:7830
 #, c-format
 msgid "ERROR: Bad subsection length (%d > %d)\n"
 msgstr ":    (%d > %d)\n"
 
-#: readelf.c:8578
+#: readelf.c:7880
 #, c-format
 msgid "Unknown format '%c'\n"
 msgstr "  '%c'\n"
 
-#: readelf.c:8651 readelf.c:9019
+#: readelf.c:7936 readelf.c:8304
 msgid "liblist"
 msgstr "liblist"
 
-#: readelf.c:8740
+#: readelf.c:8025
 msgid "options"
 msgstr ""
 
-#: readelf.c:8770
+#: readelf.c:8055
 #, c-format
 msgid ""
 "\n"
@@ -4701,15 +4566,15 @@
 "\n"
 " '%s'  %d :\n"
 
-#: readelf.c:8931
-msgid "conflict list found without a dynamic symbol table\n"
-msgstr "      \n"
+#: readelf.c:8216
+msgid "conflict list found without a dynamic symbol table"
+msgstr "      "
 
-#: readelf.c:8947 readelf.c:8961
+#: readelf.c:8232 readelf.c:8246
 msgid "conflict"
 msgstr ""
 
-#: readelf.c:8971
+#: readelf.c:8256
 #, c-format
 msgid ""
 "\n"
@@ -4718,15 +4583,15 @@
 "\n"
 " '.conflict'  %lu :\n"
 
-#: readelf.c:8973
+#: readelf.c:8258
 msgid "  Num:    Index       Value  Name"
 msgstr "  :          "
 
-#: readelf.c:9026
+#: readelf.c:8311
 msgid "liblist string table"
 msgstr "  liblist"
 
-#: readelf.c:9036
+#: readelf.c:8321
 #, c-format
 msgid ""
 "\n"
@@ -4735,90 +4600,90 @@
 "\n"
 "   '%s'  %lu :\n"
 
-#: readelf.c:9089
+#: readelf.c:8374
 msgid "NT_AUXV (auxiliary vector)"
 msgstr "NT_AUXV ( )"
 
-#: readelf.c:9091
+#: readelf.c:8376
 msgid "NT_PRSTATUS (prstatus structure)"
 msgstr "NT_PRSTATUS ( prstatus)"
 
-#: readelf.c:9093
+#: readelf.c:8378
 msgid "NT_FPREGSET (floating point registers)"
 msgstr "NT_FPREGSET (   )"
 
-#: readelf.c:9095
+#: readelf.c:8380
 msgid "NT_PRPSINFO (prpsinfo structure)"
 msgstr "NT_PRPSINFO ( prpsinfo)"
 
-#: readelf.c:9097
+#: readelf.c:8382
 msgid "NT_TASKSTRUCT (task structure)"
 msgstr "NT_TASKSTRUCT ( task)"
 
-#: readelf.c:9099
+#: readelf.c:8384
 msgid "NT_PRXFPREG (user_xfpregs structure)"
 msgstr "NT_PRXFPREG ( user_xfpregs)"
 
-#: readelf.c:9101
+#: readelf.c:8386
 msgid "NT_PSTATUS (pstatus structure)"
 msgstr "NT_PSTATUS ( pstatus)"
 
-#: readelf.c:9103
+#: readelf.c:8388
 msgid "NT_FPREGS (floating point registers)"
 msgstr "NT_FPREGS (   )"
 
-#: readelf.c:9105
+#: readelf.c:8390
 msgid "NT_PSINFO (psinfo structure)"
 msgstr "NT_PSINFO ( psinfo)"
 
-#: readelf.c:9107
+#: readelf.c:8392
 msgid "NT_LWPSTATUS (lwpstatus_t structure)"
 msgstr "NT_LWPSTATUS ( lwpstatus_t)"
 
-#: readelf.c:9109
+#: readelf.c:8394
 msgid "NT_LWPSINFO (lwpsinfo_t structure)"
 msgstr "NT_LWPSINFO ( lwpsinfo_t)"
 
-#: readelf.c:9111
+#: readelf.c:8396
 msgid "NT_WIN32PSTATUS (win32_pstatus structure)"
 msgstr "NT_WIN32PSTATUS ( win32_pstatus)"
 
-#: readelf.c:9119
+#: readelf.c:8404
 msgid "NT_VERSION (version)"
 msgstr "NT_VERSION ()"
 
-#: readelf.c:9121
+#: readelf.c:8406
 msgid "NT_ARCH (architecture)"
 msgstr "NT_ARCH ()"
 
-#: readelf.c:9126 readelf.c:9148
+#: readelf.c:8411 readelf.c:8433
 #, c-format
 msgid "Unknown note type: (0x%08x)"
 msgstr "  : (0x%08x)"
 
 #. NetBSD core "procinfo" structure.
-#: readelf.c:9138
+#: readelf.c:8423
 msgid "NetBSD procinfo structure"
 msgstr " procinfo NetBSD"
 
-#: readelf.c:9165 readelf.c:9179
+#: readelf.c:8450 readelf.c:8464
 msgid "PT_GETREGS (reg structure)"
 msgstr "PT_GETREGS ( reg)"
 
-#: readelf.c:9167 readelf.c:9181
+#: readelf.c:8452 readelf.c:8466
 msgid "PT_GETFPREGS (fpreg structure)"
 msgstr "PT_GETFPREGS ( fpreg)"
 
-#: readelf.c:9187
+#: readelf.c:8472
 #, c-format
 msgid "PT_FIRSTMACH+%d"
 msgstr "PT_FIRSTMACH+%d"
 
-#: readelf.c:9233
+#: readelf.c:8518
 msgid "notes"
 msgstr ""
 
-#: readelf.c:9239
+#: readelf.c:8524
 #, c-format
 msgid ""
 "\n"
@@ -4827,27 +4692,27 @@
 "\n"
 "   0x%08lx  0x%08lx:\n"
 
-#: readelf.c:9241
+#: readelf.c:8526
 #, c-format
 msgid "  Owner\t\tData size\tDescription\n"
 msgstr "  \t\t \t\n"
 
-#: readelf.c:9260
+#: readelf.c:8545
 #, c-format
 msgid "corrupt note found at offset %lx into core notes\n"
 msgstr "     %lx   \n"
 
-#: readelf.c:9262
+#: readelf.c:8547
 #, c-format
 msgid " type: %lx, namesize: %08lx, descsize: %08lx\n"
 msgstr " : %lx, _: %08lx, _: %08lx\n"
 
-#: readelf.c:9360
+#: readelf.c:8645
 #, c-format
 msgid "No note segments present in the core file.\n"
 msgstr "     .\n"
 
-#: readelf.c:9444
+#: readelf.c:8726
 msgid ""
 "This instance of readelf has been built without support for a\n"
 "64 bit data type and so it cannot read 64 bit ELF files.\n"
@@ -4855,12 +4720,12 @@
 "  readelf     64- \n"
 ",       64-  ELF.\n"
 
-#: readelf.c:9493 readelf.c:9837
+#: readelf.c:8775 readelf.c:9119
 #, c-format
 msgid "%s: Failed to read file header\n"
 msgstr "%s:     \n"
 
-#: readelf.c:9506
+#: readelf.c:8788
 #, c-format
 msgid ""
 "\n"
@@ -4869,282 +4734,286 @@
 "\n"
 ": %s\n"
 
-#: readelf.c:9654 readelf.c:9675 readelf.c:9712 readelf.c:9792
+#: readelf.c:8936 readelf.c:8957 readelf.c:8994 readelf.c:9074
 #, c-format
 msgid "%s: failed to read archive header\n"
 msgstr "%s:     \n"
 
-#: readelf.c:9665
+#: readelf.c:8947
 #, c-format
 msgid "%s: failed to skip archive symbol table\n"
 msgstr "%s:      \n"
 
-#: readelf.c:9697
+#: readelf.c:8979
 #, c-format
 msgid "%s: failed to read string table\n"
 msgstr "%s:     \n"
 
-#: readelf.c:9733
+#: readelf.c:9015
 #, c-format
 msgid "%s: invalid archive string table offset %lu\n"
 msgstr "%s:      %lu\n"
 
-#: readelf.c:9749
+#: readelf.c:9031
 #, c-format
 msgid "%s: bad archive file name\n"
 msgstr "%s:    \n"
 
-#: readelf.c:9781
+#: readelf.c:9063
 #, c-format
 msgid "%s: failed to seek to next archive header\n"
 msgstr "%s:      \n"
 
-#: readelf.c:9815
+#: readelf.c:9097
 #, c-format
 msgid "'%s': No such file\n"
 msgstr "'%s':   \n"
 
-#: readelf.c:9817
+#: readelf.c:9099
 #, c-format
 msgid "Could not locate '%s'.  System error message: %s\n"
 msgstr "  '%s'.    : %s\n"
 
-#: readelf.c:9824
+#: readelf.c:9106
 #, c-format
 msgid "'%s' is not an ordinary file\n"
 msgstr "%s    \n"
 
-#: readelf.c:9831
+#: readelf.c:9113
 #, c-format
 msgid "Input file '%s' is not readable.\n"
 msgstr "  '%s'    .\n"
 
-#: rename.c:130
+#: rename.c:129
 #, c-format
 msgid "%s: cannot set time: %s"
 msgstr "%s:   : %s"
 
 #. We have to clean up here.
-#: rename.c:165 rename.c:203
+#: rename.c:164 rename.c:202
 #, c-format
 msgid "unable to rename '%s' reason: %s"
 msgstr "  '%s' : %s"
 
-#: rename.c:211
+#: rename.c:210
 #, c-format
 msgid "unable to copy file '%s' reason: %s"
 msgstr "   '%s' : %s"
 
-#: resbin.c:119
+#: resbin.c:132
 #, c-format
 msgid "%s: not enough binary data"
 msgstr "%s:   "
 
-#: resbin.c:135
+#: resbin.c:148
 msgid "null terminated unicode string"
 msgstr " unicode,  `0'"
 
-#: resbin.c:162 resbin.c:168
+#: resbin.c:175 resbin.c:181
 msgid "resource ID"
 msgstr "ID "
 
-#: resbin.c:207
+#: resbin.c:221
 msgid "cursor"
 msgstr ""
 
-#: resbin.c:238 resbin.c:245
+#: resbin.c:253 resbin.c:260
 msgid "menu header"
 msgstr " menu"
 
-#: resbin.c:254
+#: resbin.c:270
 msgid "menuex header"
 msgstr " menuex"
 
-#: resbin.c:258
+#: resbin.c:274
 msgid "menuex offset"
 msgstr " menuex"
 
-#: resbin.c:263
+#: resbin.c:281
 #, c-format
 msgid "unsupported menu version %d"
 msgstr "  menu %d"
 
-#: resbin.c:288 resbin.c:303 resbin.c:365
+#: resbin.c:306 resbin.c:321 resbin.c:384
 msgid "menuitem header"
 msgstr " menuitem"
 
-#: resbin.c:395
+#: resbin.c:414
 msgid "menuitem"
 msgstr "menuitem"
 
-#: resbin.c:432 resbin.c:460
+#: resbin.c:453 resbin.c:481
 msgid "dialog header"
 msgstr " "
 
-#: resbin.c:450
+#: resbin.c:471
 #, c-format
 msgid "unexpected DIALOGEX version %d"
 msgstr "  DIALOGEX %d"
 
-#: resbin.c:495
+#: resbin.c:516
 msgid "dialog font point size"
 msgstr "    "
 
-#: resbin.c:503
+#: resbin.c:524
 msgid "dialogex font information"
 msgstr "   dialogex"
 
-#: resbin.c:529 resbin.c:547
+#: resbin.c:550 resbin.c:568
 msgid "dialog control"
 msgstr " "
 
-#: resbin.c:539
+#: resbin.c:560
 msgid "dialogex control"
 msgstr " dialogex"
 
-#: resbin.c:568
+#: resbin.c:589
 msgid "dialog control end"
 msgstr "  "
 
-#: resbin.c:580
+#: resbin.c:601
 msgid "dialog control data"
 msgstr "  "
 
-#: resbin.c:620
+#: resbin.c:642
 msgid "stringtable string length"
 msgstr "  stringtable"
 
-#: resbin.c:630
+#: resbin.c:652
 msgid "stringtable string"
 msgstr " stringtable"
 
-#: resbin.c:660
+#: resbin.c:683
 msgid "fontdir header"
 msgstr " fontdir"
 
-#: resbin.c:674
+#: resbin.c:696
 msgid "fontdir"
 msgstr "fontdir"
 
-#: resbin.c:691
+#: resbin.c:712
 msgid "fontdir device name"
 msgstr "  fontdir"
 
-#: resbin.c:697
+#: resbin.c:718
 msgid "fontdir face name"
 msgstr "  fontdir"
 
-#: resbin.c:737
+#: resbin.c:759
 msgid "accelerator"
 msgstr ""
 
-#: resbin.c:796
+#: resbin.c:819
 msgid "group cursor header"
 msgstr "  "
 
-#: resbin.c:800 resrc.c:1306
+#: resbin.c:823
 #, c-format
 msgid "unexpected group cursor type %d"
 msgstr "    %d"
 
-#: resbin.c:815
+#: resbin.c:838
 msgid "group cursor"
 msgstr " "
 
-#: resbin.c:851
+#: resbin.c:875
 msgid "group icon header"
 msgstr "  "
 
-#: resbin.c:855 resrc.c:1253
+#: resbin.c:879
 #, c-format
 msgid "unexpected group icon type %d"
 msgstr "    %d"
 
-#: resbin.c:870
+#: resbin.c:894
 msgid "group icon"
 msgstr " "
 
-#: resbin.c:934 resbin.c:1150
+#: resbin.c:957 resbin.c:1174
 msgid "unexpected version string"
 msgstr "  "
 
-#: resbin.c:965
+#: resbin.c:989
 #, c-format
 msgid "version length %d does not match resource length %lu"
 msgstr "  %d     %lu"
 
-#: resbin.c:969
+#: resbin.c:993
 #, c-format
 msgid "unexpected version type %d"
 msgstr "   %d"
 
-#: resbin.c:981
+#: resbin.c:1005
 #, c-format
-msgid "unexpected fixed version information length %ld"
-msgstr "      %ld"
+msgid "unexpected fixed version information length %d"
+msgstr "      %d"
 
-#: resbin.c:984
+#: resbin.c:1008
 msgid "fixed version info"
 msgstr "   "
 
-#: resbin.c:988
+#: resbin.c:1012
 #, c-format
 msgid "unexpected fixed version signature %lu"
 msgstr "    %lu"
 
-#: resbin.c:992
+#: resbin.c:1016
 #, c-format
 msgid "unexpected fixed version info version %lu"
 msgstr "      %lu"
 
-#: resbin.c:1021
+#: resbin.c:1045
 msgid "version var info"
 msgstr "   "
 
-#: resbin.c:1038
+#: resbin.c:1062
 #, c-format
-msgid "unexpected stringfileinfo value length %ld"
-msgstr "   stringfileinfo %ld"
+msgid "unexpected stringfileinfo value length %d"
+msgstr "   stringfileinfo %d"
 
-#: resbin.c:1048
+#: resbin.c:1072
 #, c-format
-msgid "unexpected version stringtable value length %ld"
-msgstr "    stringtable %ld"
+msgid "unexpected version stringtable value length %d"
+msgstr "    stringtable %d"
 
-#: resbin.c:1082
+#: resbin.c:1106
 #, c-format
-msgid "unexpected version string length %ld != %ld + %ld"
-msgstr "    %ld != %ld + %ld"
+msgid "unexpected version string length %d != %d + %d"
+msgstr "    %d != %d + %d"
 
-#: resbin.c:1093
+#: resbin.c:1117
 #, c-format
-msgid "unexpected version string length %ld < %ld"
-msgstr "    %ld < %ld"
+msgid "unexpected version string length %d < %d"
+msgstr "    %d < %d"
 
-#: resbin.c:1110
+#: resbin.c:1134
 #, c-format
-msgid "unexpected varfileinfo value length %ld"
-msgstr "   varfileinfo %ld"
+msgid "unexpected varfileinfo value length %d"
+msgstr "   varfileinfo %d"
 
-#: resbin.c:1129
+#: resbin.c:1153
 msgid "version varfileinfo"
 msgstr " varfileinfo"
 
-#: resbin.c:1144
+#: resbin.c:1168
 #, c-format
-msgid "unexpected version value length %ld"
-msgstr "    %ld"
+msgid "unexpected version value length %d"
+msgstr "    %d"
 
-#: rescoff.c:124
+#: rescoff.c:126
 msgid "filename required for COFF input"
 msgstr "    COFF"
 
-#: rescoff.c:141
+#: rescoff.c:143
 #, c-format
 msgid "%s: no resource section"
 msgstr "%s:   "
 
-#: rescoff.c:173
+#: rescoff.c:150
+msgid "can't read resource section"
+msgstr "   "
+
+#: rescoff.c:174
 #, c-format
 msgid "%s: %s: address out of bounds"
 msgstr "%s: %s:    "
@@ -5181,144 +5050,144 @@
 msgid "ID resource"
 msgstr "ID "
 
-#: rescoff.c:320
+#: rescoff.c:318
 msgid "resource type unknown"
 msgstr "  "
 
-#: rescoff.c:323
+#: rescoff.c:321
 msgid "data entry"
 msgstr " "
 
-#: rescoff.c:331
+#: rescoff.c:329
 msgid "resource data"
 msgstr " "
 
-#: rescoff.c:336
+#: rescoff.c:334
 msgid "resource data size"
 msgstr "  "
 
-#: rescoff.c:431
+#: rescoff.c:427
 msgid "filename required for COFF output"
 msgstr "     COFF"
 
-#: rescoff.c:718
+#: rescoff.c:719
 msgid "can't get BFD_RELOC_RVA relocation type"
 msgstr "    BFD_RELOC_RVA"
 
-#: resrc.c:262 resrc.c:333
+#: resrc.c:238 resrc.c:309
 #, c-format
 msgid "can't open temporary file `%s': %s"
 msgstr "    `%s': %s"
 
-#: resrc.c:268
+#: resrc.c:244
 #, c-format
 msgid "can't redirect stdout: `%s': %s"
 msgstr "  stdout: `%s': %s"
 
-#: resrc.c:284
+#: resrc.c:260
 #, c-format
 msgid "%s %s: %s"
 msgstr "%s %s: %s"
 
-#: resrc.c:329
+#: resrc.c:305
 #, c-format
 msgid "can't execute `%s': %s"
 msgstr "  `%s': %s"
 
-#: resrc.c:338
+#: resrc.c:314
 #, c-format
 msgid "Using temporary file `%s' to read preprocessor output\n"
 msgstr "   `%s'     \n"
 
-#: resrc.c:345
+#: resrc.c:321
 #, c-format
 msgid "can't popen `%s': %s"
 msgstr " popen `%s': %s"
 
-#: resrc.c:347
+#: resrc.c:323
 #, c-format
 msgid "Using popen to read preprocessor output\n"
 msgstr " popen     \n"
 
-#: resrc.c:413
+#: resrc.c:362
 #, c-format
 msgid "Tried `%s'\n"
 msgstr " `%s'\n"
 
-#: resrc.c:424
+#: resrc.c:373
 #, c-format
 msgid "Using `%s'\n"
 msgstr " `%s'\n"
 
-#: resrc.c:583
+#: resrc.c:529
 #, c-format
 msgid "%s:%d: %s\n"
 msgstr "%s:%d: %s\n"
 
-#: resrc.c:591
+#: resrc.c:537
 #, c-format
 msgid "%s: unexpected EOF"
 msgstr "%s:   "
 
-#: resrc.c:640
+#: resrc.c:586
 #, c-format
 msgid "%s: read of %lu returned %lu"
 msgstr "%s:   %lu   %lu"
 
-#: resrc.c:678 resrc.c:1453
+#: resrc.c:624 resrc.c:1134
 #, c-format
 msgid "stat failed on bitmap file `%s': %s"
 msgstr " stat     `%s': %s"
 
-#: resrc.c:729
+#: resrc.c:675
 #, c-format
 msgid "cursor file `%s' does not contain cursor data"
 msgstr "  `%s'    "
 
-#: resrc.c:761 resrc.c:1161
+#: resrc.c:707 resrc.c:1003
 #, c-format
 msgid "%s: fseek to %lu failed: %s"
 msgstr "%s: fseek  %lu  : %s"
 
-#: resrc.c:887
+#: resrc.c:831
 msgid "help ID requires DIALOGEX"
 msgstr " ID   DIALOGEX"
 
-#: resrc.c:889
+#: resrc.c:833
 msgid "control data requires DIALOGEX"
 msgstr "    DIALOGEX"
 
-#: resrc.c:917
+#: resrc.c:861
 #, c-format
 msgid "stat failed on font file `%s': %s"
 msgstr " stat    `%s': %s"
 
-#: resrc.c:1130
+#: resrc.c:972
 #, c-format
 msgid "icon file `%s' does not contain icon data"
 msgstr "  `%s'    "
 
-#: resrc.c:1675 resrc.c:1710
+#: resrc.c:1273 resrc.c:1308
 #, c-format
 msgid "stat failed on file `%s': %s"
 msgstr " stat   `%s': %s"
 
-#: resrc.c:1891
+#: resrc.c:1494
 #, c-format
 msgid "can't open `%s' for output: %s"
 msgstr "  `%s'   : %s"
 
-#: size.c:84
+#: size.c:83
 #, c-format
 msgid " Displays the sizes of sections inside binary files\n"
 msgstr "      \n"
 
-#: size.c:85
+#: size.c:84
 #, c-format
 msgid " If no input file(s) are specified, a.out is assumed\n"
 msgstr "     ,   a.out\n"
 
-#: size.c:86
+#: size.c:85
 #, c-format
 msgid ""
 " The options are:\n"
@@ -5342,22 +5211,22 @@
 "  -v        --version                   \n"
 "\n"
 
-#: size.c:159
+#: size.c:158
 #, c-format
 msgid "invalid argument to --format: %s"
 msgstr "  --format: %s"
 
-#: size.c:186
+#: size.c:185
 #, c-format
 msgid "Invalid radix: %s\n"
 msgstr " radix: %s\n"
 
-#: srconv.c:1724
+#: srconv.c:1722
 #, c-format
 msgid "Convert a COFF object file into a SYSROFF object file\n"
 msgstr " '  COFF  '  SYSROFF\n"
 
-#: srconv.c:1725
+#: srconv.c:1723
 #, c-format
 msgid ""
 " The options are:\n"
@@ -5376,160 +5245,160 @@
 "  -h --help          \n"
 "  -v --version        \n"
 
-#: srconv.c:1871
+#: srconv.c:1869
 #, c-format
 msgid "unable to open output file %s"
 msgstr "     %s"
 
-#: stabs.c:328 stabs.c:1706
+#: stabs.c:330 stabs.c:1708
 msgid "numeric overflow"
 msgstr " "
 
-#: stabs.c:338
+#: stabs.c:340
 #, c-format
 msgid "Bad stab: %s\n"
 msgstr " stab: %s\n"
 
-#: stabs.c:346
+#: stabs.c:348
 #, c-format
 msgid "Warning: %s: %s\n"
 msgstr ": %s: %s\n"
 
-#: stabs.c:456
+#: stabs.c:458
 #, c-format
 msgid "N_LBRAC not within function\n"
 msgstr "N_LBRAC  \n"
 
-#: stabs.c:495
+#: stabs.c:497
 #, c-format
 msgid "Too many N_RBRACs\n"
 msgstr "  N_RBRACs\n"
 
-#: stabs.c:736
+#: stabs.c:738
 msgid "unknown C++ encoded name"
 msgstr "   C++"
 
 #. Complain and keep going, so compilers can invent new
 #. cross-reference types.
-#: stabs.c:1251
+#: stabs.c:1253
 msgid "unrecognized cross reference type"
 msgstr "   "
 
 #. Does this actually ever happen?  Is that why we are worrying
 #. about dealing with it rather than just calling error_type?
-#: stabs.c:1798
+#: stabs.c:1800
 msgid "missing index type"
 msgstr "  "
 
-#: stabs.c:2112
+#: stabs.c:2114
 msgid "unknown virtual character for baseclass"
 msgstr "    baseclass"
 
-#: stabs.c:2130
+#: stabs.c:2132
 msgid "unknown visibility character for baseclass"
 msgstr "    baseclass"
 
-#: stabs.c:2316
+#: stabs.c:2318
 msgid "unnamed $vb type"
 msgstr "   $vb"
 
-#: stabs.c:2322
+#: stabs.c:2324
 msgid "unrecognized C++ abbreviation"
 msgstr "  C++"
 
-#: stabs.c:2398
+#: stabs.c:2400
 msgid "unknown visibility character for field"
 msgstr "    field"
 
-#: stabs.c:2650
+#: stabs.c:2652
 msgid "const/volatile indicator missing"
 msgstr "  /"
 
-#: stabs.c:2886
+#: stabs.c:2888
 #, c-format
 msgid "No mangling for \"%s\"\n"
 msgstr "   \"%s\"\n"
 
-#: stabs.c:3186
+#: stabs.c:3188
 msgid "Undefined N_EXCL"
 msgstr " N_EXCL"
 
-#: stabs.c:3266
+#: stabs.c:3268
 #, c-format
 msgid "Type file number %d out of range\n"
 msgstr "   %d   \n"
 
-#: stabs.c:3271
+#: stabs.c:3273
 #, c-format
 msgid "Type index number %d out of range\n"
 msgstr "   %d   \n"
 
-#: stabs.c:3350
+#: stabs.c:3352
 #, c-format
 msgid "Unrecognized XCOFF type %d\n"
 msgstr "  XCOFF %d\n"
 
-#: stabs.c:3642
+#: stabs.c:3644
 #, c-format
 msgid "bad mangled name `%s'\n"
 msgstr "   `%s'\n"
 
-#: stabs.c:3737
+#: stabs.c:3739
 #, c-format
 msgid "no argument types in mangled string\n"
 msgstr "     \n"
 
-#: stabs.c:5091
+#: stabs.c:5093
 #, c-format
 msgid "Demangled name is not a function\n"
 msgstr "    \n"
 
-#: stabs.c:5133
+#: stabs.c:5135
 #, c-format
 msgid "Unexpected type in v3 arglist demangling\n"
 msgstr "    v3 arglist\n"
 
-#: stabs.c:5200
+#: stabs.c:5202
 #, c-format
 msgid "Unrecognized demangle component %d\n"
 msgstr "   %d\n"
 
-#: stabs.c:5252
+#: stabs.c:5254
 #, c-format
 msgid "Failed to print demangled template\n"
 msgstr "    \n"
 
-#: stabs.c:5332
+#: stabs.c:5334
 #, c-format
 msgid "Couldn't get demangled builtin type\n"
 msgstr "    \n"
 
-#: stabs.c:5381
+#: stabs.c:5383
 #, c-format
 msgid "Unexpected demangled varargs\n"
 msgstr "  varargs\n"
 
-#: stabs.c:5388
+#: stabs.c:5390
 #, c-format
 msgid "Unrecognized demangled builtin type\n"
 msgstr "   \n"
 
-#: strings.c:215
+#: strings.c:218
 #, c-format
 msgid "invalid number %s"
 msgstr "  %s"
 
-#: strings.c:697
+#: strings.c:700
 #, c-format
 msgid "invalid integer argument %s"
 msgstr "     %s"
 
-#: strings.c:706
+#: strings.c:709
 #, c-format
 msgid " Display printable strings in [file(s)] (stdin by default)\n"
 msgstr "       [()] ( stdin)\n"
 
-#: strings.c:707
+#: strings.c:710
 #, c-format
 msgid ""
 " The options are:\n"
@@ -5560,12 +5429,12 @@
 "  -h --help                   \n"
 "  -v --version                 \n"
 
-#: sysdump.c:641
+#: sysdump.c:642
 #, c-format
 msgid "Print a human readable interpretation of a SYSROFF object file\n"
 msgstr "  '  SYSROFF    \n"
 
-#: sysdump.c:642
+#: sysdump.c:643
 #, c-format
 msgid ""
 " The options are:\n"
@@ -5576,17 +5445,17 @@
 "  -h --help          \n"
 "  -v --version        \n"
 
-#: sysdump.c:709
+#: sysdump.c:710
 #, c-format
 msgid "cannot open input file %s"
 msgstr "    %s"
 
-#: version.c:34
+#: version.c:35
 #, c-format
-msgid "Copyright 2007 Free Software Foundation, Inc.\n"
-msgstr "Copyright 2007 Free Software Foundation, Inc.\n"
+msgid "Copyright 2005 Free Software Foundation, Inc.\n"
+msgstr "Copyright 2005 Free Software Foundation, Inc.\n"
 
-#: version.c:35
+#: version.c:36
 #, c-format
 msgid ""
 "This program is free software; you may redistribute it under the terms of\n"
@@ -5596,140 +5465,53 @@
 "   GNU General Public License.\n"
 "    - .\n"
 
-#: windmc.c:194
-#, c-format
-msgid "can't create %s file ,%s' for output.\n"
-msgstr "   `%s'   : %s\n"
-
-#: windmc.c:202
-#, c-format
-msgid "Usage: %s [option(s)] [input-file]\n"
-msgstr ": %s [] [-]\n"
-
-#: windmc.c:204
-#, c-format
-msgid ""
-" The options are:\n"
-"  -a --ascii_in                Read input file as ASCII file\n"
-"  -A --ascii_out               Write binary messages as ASCII\n"
-"  -b --binprefix               .bin filename is prefixed by .mc filename_ for uniqueness.\n"
-"  -c --customflag              Set custom flags for messages\n"
-"  -C --codepage_in=<val>       Set codepage when reading mc text file\n"
-"  -d --decimal_values          Print values to text files decimal\n"
-"  -e --extension=<extension>   Set header extension used on export header file\n"
-"  -F --target <target>         Specify output target for endianess.\n"
-"  -h --headerdir=<directory>   Set the export directory for headers\n"
-"  -u --unicode_in              Read input file as UTF16 file\n"
-"  -U --unicode_out             Write binary messages as UFT16\n"
-"  -m --maxlength=<val>         Set the maximal allowed message length\n"
-"  -n --nullterminate           Automatic add a zero termination to strings\n"
-"  -o --hresult_use             Use HRESULT definition instead of status code definition\n"
-"  -O --codepage_out=<val>      Set codepage used for writing text file\n"
-"  -r --rcdir=<directory>       Set the export directory for rc files\n"
-"  -x --xdbg=<directory>        Where to create the .dbg C include file\n"
-"                               that maps message ID's to their symbolic name.\n"
-msgstr ""
-" :\n"
-"  -a --ascii_in                    ASCII\n"
-"  -A --ascii_out                    ASCII\n"
-"  -b --binprefix                 .bin-   .mc filename_  .\n"
-"  -c --customflag                  \n"
-"  -C --codepage_in=<>         mc\n"
-"  -d --decimal_values                 \n"
-"  -e --extension=<>    ,      \n"
-"  -F --target <target>             endianess.\n"
-"  -h --headerdir=<>         \n"
-"  -u --unicode_in                 UTF16\n"
-"  -U --unicode_out                UFT16\n"
-"  -m --maxlength=<>       \n"
-"  -n --nullterminate               \n"
-"  -o --hresult_use               HRESULT    \n"
-"  -O --codepage_out=<>   ,      \n"
-"  -r --rcdir=<>              rc\n"
-"  -x --xdbg=<>            include- .dbg C\n"
-"                                      .\n"
-
-#: windmc.c:224
-#, c-format
-msgid ""
-"  -H --help                    Print this help message\n"
-"  -v --verbose                 Verbose - tells you what it's doing\n"
-"  -V --version                 Print version information\n"
-msgstr ""
-"  -H --help                     \n"
-"  -v --verbose                     \n"
-"  -V --version                    \n"
-
-#: windmc.c:287 windres.c:415
-#, c-format
-msgid "%s: warning: "
-msgstr "%s: : "
-
-#: windmc.c:288
-#, c-format
-msgid "A codepage was specified switch ,%s' and UTF16.\n"
-msgstr "    , %s'  UTF16.\n"
-
-#: windmc.c:289
-#, c-format
-msgid "\tcodepage settings are ignored.\n"
-msgstr "\t   .\n"
-
-#: windmc.c:333
-msgid "try to add a ill language."
-msgstr "   ."
-
-#: windmc.c:1142
-#, c-format
-msgid "unable to open file ,%s' for input.\n"
-msgstr "   '%s'  \n"
-
-#: windmc.c:1161
-msgid "input file does not seems to be UFT16.\n"
-msgstr "     UFT16.\n"
-
-#: windres.c:220
+#: windres.c:204
 #, c-format
 msgid "can't open %s `%s': %s"
 msgstr "  %s `%s': %s "
 
-#: windres.c:394
+#: windres.c:370
 #, c-format
 msgid ": expected to be a directory\n"
 msgstr ": ,   \n"
 
-#: windres.c:406
+#: windres.c:382
 #, c-format
 msgid ": expected to be a leaf\n"
 msgstr ": ,   leaf\n"
 
-#: windres.c:417
+#: windres.c:391
+#, c-format
+msgid "%s: warning: "
+msgstr "%s: : "
+
+#: windres.c:393
 #, c-format
 msgid ": duplicate value\n"
 msgstr ":  \n"
 
-#: windres.c:567
+#: windres.c:543
 #, c-format
 msgid "unknown format type `%s'"
 msgstr "   `%s'"
 
-#: windres.c:568
+#: windres.c:544
 #, c-format
 msgid "%s: supported formats:"
 msgstr "%s:  :"
 
 #. Otherwise, we give up.
-#: windres.c:651
+#: windres.c:627
 #, c-format
 msgid "can not determine type of file `%s'; use the -J option"
 msgstr "    `%s';   -J"
 
-#: windres.c:663
+#: windres.c:639
 #, c-format
 msgid "Usage: %s [option(s)] [input-file] [output-file]\n"
-msgstr ": %s [] [_] [_]\n"
+msgstr ": %s [] [_] [_]\n"
 
-#: windres.c:665
+#: windres.c:641
 #, c-format
 msgid ""
 " The options are:\n"
@@ -5743,7 +5525,6 @@
 "  -D --define <sym>[=<val>]    Define SYM when preprocessing rc file\n"
 "  -U --undefine <sym>          Undefine SYM when preprocessing rc file\n"
 "  -v --verbose                 Verbose - tells you what it's doing\n"
-"  -c --codepage=<codepage>     Specify default codepage\n"
 "  -l --language=<val>          Set language when reading rc file\n"
 "     --use-temp-file           Use a temporary file instead of popen to read\n"
 "                               the preprocessor output\n"
@@ -5760,18 +5541,17 @@
 "  -D --define <sym>[=<>]    SYM     rc\n"
 "  -U --undefine <sym>            SYM     rc\n"
 "  -v --verbose                  -     \n"
-"  -c --codepage=<>       \n"
 "  -l --language=<>              rc\n"
 "     --use-temp-file               popen\n"
 "                                   \n"
 "     --no-use-temp-file         popen ()\n"
 
-#: windres.c:682
+#: windres.c:657
 #, c-format
 msgid "     --yydebug                 Turn on parser debugging\n"
 msgstr "     --yydebug                    \n"
 
-#: windres.c:685
+#: windres.c:660
 #, c-format
 msgid ""
 "  -r                           Ignored for compatibility with rc\n"
@@ -5784,7 +5564,7 @@
 "  -h --help                      \n"
 "  -V --version                    \n"
 
-#: windres.c:690
+#: windres.c:665
 #, c-format
 msgid ""
 "FORMAT is one of rc, res, or coff, and is deduced from the file name\n"
@@ -5796,78 +5576,34 @@
 "      stdin,  rc.  \n"
 "    stdout,  rc.\n"
 
-#: windres.c:828
-msgid "invalid codepage specified.\n"
-msgstr "   .\n"
-
-#: windres.c:843
+#: windres.c:803
 msgid "invalid option -f\n"
 msgstr "  -f\n"
 
-#: windres.c:848
+#: windres.c:808
 msgid "No filename following the -fo option.\n"
 msgstr "     -fo.\n"
 
-#: windres.c:907
+#: windres.c:866
 #, c-format
 msgid "Option -I is deprecated for setting the input format, please use -J instead.\n"
 msgstr " -I      ,   -J.\n"
 
-#: windres.c:1027
+#: windres.c:984
 msgid "no resources"
 msgstr " "
 
-#: wrstabs.c:353 wrstabs.c:1916
+#: wrstabs.c:354 wrstabs.c:1915
 #, c-format
 msgid "string_hash_lookup failed: %s"
 msgstr "string_hash_lookup  : %s"
 
-#: wrstabs.c:636
+#: wrstabs.c:635
 #, c-format
 msgid "stab_int_type: bad size %u"
 msgstr "stab_int_type:   %u"
 
-#: wrstabs.c:1394
+#: wrstabs.c:1393
 #, c-format
 msgid "%s: warning: unknown size for field `%s' in struct"
 msgstr "%s: :    `%s'  struct"
-
-#~ msgid "stat returns negative size for %s"
-#~ msgstr "stat  '   %s"
-
-#~ msgid "%s section needs a populated .debug_info section\n"
-#~ msgstr "  %s    .debug_info\n"
-
-#~ msgid "%s section has more comp units than .debug_info section\n"
-#~ msgstr " %s    comp,   .debug_info\n"
-
-#~ msgid ""
-#~ "assuming that the pointer size is %d, from the last comp unit in .debug_info\n"
-#~ "\n"
-#~ msgstr ""
-#~ ",    - %d,    comp  .debug_info\n"
-#~ "\n"
-
-#~ msgid "  (Pointer size:               %u)%s\n"
-#~ msgstr "  ( :          %u)%s\n"
-
-#~ msgid "Extend line ops need a valid pointer size, guessing at 4\n"
-#~ msgstr "       ;  4\n"
-
-#~ msgid "unsupported or unknown DW_CFA_%d\n"
-#~ msgstr "   DW_CFA_%d\n"
-
-#~ msgid "there are no sections to be copied!"
-#~ msgstr "   !"
-
-#~ msgid "error: the input file '%s' is empty"
-#~ msgstr ":   '%s' "
-
-#~ msgid "alternate machine code index must be positive"
-#~ msgstr "      "
-
-#~ msgid "Out of memory"
-#~ msgstr " '"
-
-#~ msgid "can't read resource section"
-#~ msgstr "   "
diff -Nur binutils-2.18.50.0.1/binutils/readelf.c binutils-stable/binutils/readelf.c
--- binutils-2.18.50.0.1/binutils/readelf.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/binutils/readelf.c	2007-09-25 15:41:53.000000000 +0200
@@ -158,7 +158,6 @@
 
 #include "getopt.h"
 #include "libiberty.h"
-#include "safe-ctype.h"
 
 char *program_name = "readelf";
 static long archive_file_offset;
@@ -220,37 +219,33 @@
 static struct group *section_groups;
 static struct group **section_headers_groups;
 
-
-/* Flag bits indicating particular types of dump.  */
-#define HEX_DUMP	(1 << 0)	/* The -x command line switch.  */
-#define DISASS_DUMP	(1 << 1)	/* The -i command line switch.  */
-#define DEBUG_DUMP	(1 << 2)	/* The -w command line switch.  */
-#define STRING_DUMP     (1 << 3)	/* The -p command line switch.  */
-
-typedef unsigned char dump_type;
-
-/* A linked list of the section names for which dumps were requested.  */
+/* A linked list of the section names for which dumps were requested
+   by name.  */
 struct dump_list_entry
 {
   char *name;
-  dump_type type;
+  int type;
   struct dump_list_entry *next;
 };
 static struct dump_list_entry *dump_sects_byname;
 
-/* A dynamic array of flags indicating for which sections a dump
-   has been requested via command line switches.  */
-static dump_type *   cmdline_dump_sects = NULL;
-static unsigned int  num_cmdline_dump_sects = 0;
+/* A dynamic array of flags indicating for which sections a hex dump
+   has been requested (via the -x switch) and/or a disassembly dump
+   (via the -i switch).  */
+char *cmdline_dump_sects = NULL;
+unsigned num_cmdline_dump_sects = 0;
 
 /* A dynamic array of flags indicating for which sections a dump of
    some kind has been requested.  It is reset on a per-object file
    basis and then initialised from the cmdline_dump_sects array,
    the results of interpreting the -w switch, and the
    dump_sects_byname list.  */
-static dump_type *   dump_sects = NULL;
-static unsigned int  num_dump_sects = 0;
+char *dump_sects = NULL;
+unsigned int num_dump_sects = 0;
 
+#define HEX_DUMP	(1 << 0)
+#define DISASS_DUMP	(1 << 1)
+#define DEBUG_DUMP	(1 << 2)
 
 /* How to print a vma value.  */
 typedef enum print_mode
@@ -1271,8 +1266,6 @@
 			sec_name = "ABS";
 		      else if (psym->st_shndx == SHN_COMMON)
 			sec_name = "COMMON";
-		      else if (psym->st_shndx == SHN_GNU_SHARABLE_COMMON)
-			sec_name = "GNU_SHARABLE_COMMON";
 		      else if (elf_header.e_machine == EM_MIPS
 			       && psym->st_shndx == SHN_MIPS_SCOMMON)
 			sec_name = "SCOMMON";
@@ -2178,6 +2171,9 @@
 	    case E_MIPS_MACH_5500: strcat (buf, ", 5500"); break;
 	    case E_MIPS_MACH_SB1:  strcat (buf, ", sb1");  break;
 	    case E_MIPS_MACH_9000: strcat (buf, ", 9000"); break;
+ 	    case E_MIPS_MACH_OCTEON: strcat (buf, ", octeon"); break;
+ 	    case E_MIPS_MACH_LS2E: strcat (buf, ", loongson-2e"); break;
+ 	    case E_MIPS_MACH_LS2F: strcat (buf, ", loongson-2f"); break;
 	    case 0:
 	    /* We simply ignore the field in this case to avoid confusion:
 	       MIPS ELF does not specify EF_MIPS_MACH, it is a GNU
@@ -2471,7 +2467,6 @@
     case PT_SHLIB:	return "SHLIB";
     case PT_PHDR:	return "PHDR";
     case PT_TLS:	return "TLS";
-    case PT_GNU_SHR:	return "GNU_SHR";
 
     case PT_GNU_EH_FRAME:
 			return "GNU_EH_FRAME";
@@ -2753,10 +2748,9 @@
   {"arch-specific",    no_argument, 0, 'A'},
   {"version-info",     no_argument, 0, 'V'},
   {"use-dynamic",      no_argument, 0, 'D'},
-  {"unwind",	       no_argument, 0, 'u'},
   {"hex-dump",	       required_argument, 0, 'x'},
   {"debug-dump",       optional_argument, 0, OPTION_DEBUG_DUMP},
-  {"string-dump",      required_argument, 0, 'p'},
+  {"unwind",	       no_argument, 0, 'u'},
 #ifdef SUPPORT_DISASSEMBLY
   {"instruction-dump", required_argument, 0, 'i'},
 #endif
@@ -2791,17 +2785,14 @@
   -V --version-info      Display the version sections (if present)\n\
   -A --arch-specific     Display architecture specific information (if any).\n\
   -D --use-dynamic       Use the dynamic section info when displaying symbols\n\
-  -x --hex-dump=<number|name>\n\
-                         Dump the contents of section <number|name> as bytes\n\
-  -p --string-dump=<number|name>\n\
-                         Dump the contents of section <number|name> as strings\n\
+  -x --hex-dump=<number> Dump the contents of section <number>\n\
   -w[liaprmfFsoR] or\n\
   --debug-dump[=line,=info,=abbrev,=pubnames,=aranges,=macro,=frames,=str,=loc,=Ranges]\n\
                          Display the contents of DWARF2 debug sections\n"));
 #ifdef SUPPORT_DISASSEMBLY
   fprintf (stream, _("\
-  -i --instruction-dump=<number|name>\n\
-                         Disassemble the contents of section <number|name>\n"));
+  -i --instruction-dump=<number>\n\
+                         Disassemble the contents of section <number>\n"));
 #endif
   fprintf (stream, _("\
   -I --histogram         Display histogram of bucket list lengths\n\
@@ -2822,20 +2813,20 @@
    the first time.  */
 
 static void
-request_dump_bynumber (unsigned int section, dump_type type)
+request_dump (unsigned int section, int type)
 {
   if (section >= num_dump_sects)
     {
-      dump_type *new_dump_sects;
+      char *new_dump_sects;
 
-      new_dump_sects = calloc (section + 1, sizeof (* dump_sects));
+      new_dump_sects = calloc (section + 1, 1);
 
       if (new_dump_sects == NULL)
 	error (_("Out of memory allocating dump request table.\n"));
       else
 	{
 	  /* Copy current flag settings.  */
-	  memcpy (new_dump_sects, dump_sects, num_dump_sects * sizeof (* dump_sects));
+	  memcpy (new_dump_sects, dump_sects, num_dump_sects);
 
 	  free (dump_sects);
 
@@ -2853,7 +2844,7 @@
 /* Request a dump by section name.  */
 
 static void
-request_dump_byname (const char *section, dump_type type)
+request_dump_byname (const char *section, int type)
 {
   struct dump_list_entry *new_request;
 
@@ -2880,7 +2871,7 @@
     usage (stderr);
 
   while ((c = getopt_long
-	  (argc, argv, "ersuahnldSDAINtgw::x:i:vVWHp:", options, NULL)) != EOF)
+	  (argc, argv, "ersuahnldSDAINtgw::x:i:vVWH", options, NULL)) != EOF)
     {
       char *cp;
       int section;
@@ -2958,18 +2949,10 @@
 	  do_dump++;
 	  section = strtoul (optarg, & cp, 0);
 	  if (! *cp && section >= 0)
-	    request_dump_bynumber (section, HEX_DUMP);
+	    request_dump (section, HEX_DUMP);
 	  else
 	    request_dump_byname (optarg, HEX_DUMP);
 	  break;
-	case 'p':
-	  do_dump++;
-	  section = strtoul (optarg, & cp, 0);
-	  if (! *cp && section >= 0)
-	    request_dump_bynumber (section, STRING_DUMP);
-	  else
-	    request_dump_byname (optarg, STRING_DUMP);
-	  break;
 	case 'w':
 	  do_dump++;
 	  if (optarg == 0)
@@ -3117,9 +3100,11 @@
 	  do_dump++;
 	  section = strtoul (optarg, & cp, 0);
 	  if (! *cp && section >= 0)
-	    request_dump_bynumber (section, DISASS_DUMP);
-	  else
-	    request_dump_byname (optarg, DISASS_DUMP);
+	    {
+	      request_dump (section, DISASS_DUMP);
+	      break;
+	    }
+	  goto oops;
 #endif
 	case 'v':
 	  print_version (program_name);
@@ -3131,6 +3116,9 @@
 	  do_wide++;
 	  break;
 	default:
+#ifdef SUPPORT_DISASSEMBLY
+	oops:
+#endif
 	  /* xgettext:c-format */
 	  error (_("Invalid option '-%c'\n"), c);
 	  /* Drop through.  */
@@ -4197,14 +4185,14 @@
 	      || (do_debug_str      && streq (name, "str"))
 	      || (do_debug_loc      && streq (name, "loc"))
 	      )
-	    request_dump_bynumber (i, DEBUG_DUMP);
+	    request_dump (i, DEBUG_DUMP);
 	}
       /* linkonce section to be combined with .debug_info at link time.  */
       else if ((do_debugging || do_debug_info)
 	       && const_strneq (name, ".gnu.linkonce.wi."))
-	request_dump_bynumber (i, DEBUG_DUMP);
+	request_dump (i, DEBUG_DUMP);
       else if (do_debug_frames && streq (name, ".eh_frame"))
-	request_dump_bynumber (i, DEBUG_DUMP);
+	request_dump (i, DEBUG_DUMP);
     }
 
   if (! do_sections)
@@ -6986,8 +6974,6 @@
     case SHN_UNDEF:	return "UND";
     case SHN_ABS:	return "ABS";
     case SHN_COMMON:	return "COM";
-    case SHN_GNU_SHARABLE_COMMON:
-			return "GNU_SHARABLE_COM";
     default:
       if (type == SHN_IA_64_ANSI_COMMON
 	  && elf_header.e_machine == EM_IA_64
@@ -7053,39 +7039,6 @@
   return i_data;
 }
 
-static void
-print_dynamic_symbol (bfd_vma si, unsigned long hn)
-{
-  Elf_Internal_Sym *psym;
-  int n;
-
-  psym = dynamic_symbols + si;
-
-  n = print_vma (si, DEC_5);
-  if (n < 5)
-    fputs ("     " + n, stdout);
-  printf (" %3lu: ", hn);
-  print_vma (psym->st_value, LONG_HEX);
-  putchar (' ');
-  print_vma (psym->st_size, DEC_5);
-
-  printf ("  %6s", get_symbol_type (ELF_ST_TYPE (psym->st_info)));
-  printf (" %6s",  get_symbol_binding (ELF_ST_BIND (psym->st_info)));
-  printf (" %3s",  get_symbol_visibility (ELF_ST_VISIBILITY (psym->st_other)));
-  /* Check to see if any other bits in the st_other field are set.
-     Note - displaying this information disrupts the layout of the
-     table being generated, but for the moment this case is very
-     rare.  */
-  if (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other))
-    printf (" [%s] ", get_symbol_other (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other)));
-  printf (" %3.3s ", get_symbol_index_type (psym->st_shndx));
-  if (VALID_DYNAMIC_NAME (psym->st_name))
-    print_symbol (25, GET_DYNAMIC_NAME (psym->st_name));
-  else
-    printf (" <corrupt: %14ld>", psym->st_name);
-  putchar ('\n');
-}
-
 /* Dump the symbol table.  */
 static int
 process_symbol_table (FILE *file)
@@ -7098,14 +7051,12 @@
   bfd_vma ngnubuckets = 0;
   bfd_vma *gnubuckets = NULL;
   bfd_vma *gnuchains = NULL;
-  bfd_vma gnusymidx = 0;
 
   if (! do_syms && !do_histogram)
     return 1;
 
-  if (dynamic_info[DT_HASH]
-      && (do_histogram
-	  || (do_using_dynamic && dynamic_strings != NULL)))
+  if (dynamic_info[DT_HASH] && ((do_using_dynamic && dynamic_strings != NULL)
+				|| do_histogram))
     {
       unsigned char nb[8];
       unsigned char nc[8];
@@ -7149,157 +7100,54 @@
 	return 0;
     }
 
-  if (dynamic_info_DT_GNU_HASH
-      && (do_histogram
-	  || (do_using_dynamic && dynamic_strings != NULL)))
+  if (do_syms
+      && dynamic_info[DT_HASH] && do_using_dynamic && dynamic_strings != NULL)
     {
-      unsigned char nb[16];
-      bfd_vma i, maxchain = 0xffffffff, bitmaskwords;
-      bfd_vma buckets_vma;
-
-      if (fseek (file,
-		 (archive_file_offset
-		  + offset_from_vma (file, dynamic_info_DT_GNU_HASH,
-				     sizeof nb)),
-		 SEEK_SET))
-	{
-	  error (_("Unable to seek to start of dynamic information\n"));
-	  return 0;
-	}
-
-      if (fread (nb, 16, 1, file) != 1)
-	{
-	  error (_("Failed to read in number of buckets\n"));
-	  return 0;
-	}
+      unsigned long hn;
+      bfd_vma si;
 
-      ngnubuckets = byte_get (nb, 4);
-      gnusymidx = byte_get (nb + 4, 4);
-      bitmaskwords = byte_get (nb + 8, 4);
-      buckets_vma = dynamic_info_DT_GNU_HASH + 16;
+      printf (_("\nSymbol table for image:\n"));
       if (is_32bit_elf)
-	buckets_vma += bitmaskwords * 4;
+	printf (_("  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"));
       else
-	buckets_vma += bitmaskwords * 8;
+	printf (_("  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"));
 
-      if (fseek (file,
-		 (archive_file_offset
-		  + offset_from_vma (file, buckets_vma, 4)),
-		 SEEK_SET))
+      for (hn = 0; hn < nbuckets; hn++)
 	{
-	  error (_("Unable to seek to start of dynamic information\n"));
-	  return 0;
-	}
-
-      gnubuckets = get_dynamic_data (file, ngnubuckets, 4);
-
-      if (gnubuckets == NULL)
-	return 0;
-
-      for (i = 0; i < ngnubuckets; i++)
-	if (gnubuckets[i] != 0)
-	  {
-	    if (gnubuckets[i] < gnusymidx)
-	      return 0;
-
-	    if (maxchain == 0xffffffff || gnubuckets[i] > maxchain)
-	      maxchain = gnubuckets[i];
-	  }
-
-      if (maxchain == 0xffffffff)
-	return 0;
-
-      maxchain -= gnusymidx;
-
-      if (fseek (file,
-		 (archive_file_offset
-		  + offset_from_vma (file, buckets_vma
-					   + 4 * (ngnubuckets + maxchain), 4)),
-		 SEEK_SET))
-	{
-	  error (_("Unable to seek to start of dynamic information\n"));
-	  return 0;
-	}
+	  if (! buckets[hn])
+	    continue;
 
-      do
-	{
-	  if (fread (nb, 4, 1, file) != 1)
+	  for (si = buckets[hn]; si < nchains && si > 0; si = chains[si])
 	    {
-	      error (_("Failed to determine last chain length\n"));
-	      return 0;
-	    }
-
-	  if (maxchain + 1 == 0)
-	    return 0;
-
-	  ++maxchain;
-	}
-      while ((byte_get (nb, 4) & 1) == 0);
-
-      if (fseek (file,
-		 (archive_file_offset
-		  + offset_from_vma (file, buckets_vma + 4 * ngnubuckets, 4)),
-		 SEEK_SET))
-	{
-	  error (_("Unable to seek to start of dynamic information\n"));
-	  return 0;
-	}
-
-      gnuchains = get_dynamic_data (file, maxchain, 4);
-
-      if (gnuchains == NULL)
-	return 0;
-    }
-
-  if ((dynamic_info[DT_HASH] || dynamic_info_DT_GNU_HASH)
-      && do_syms
-      && do_using_dynamic
-      && dynamic_strings != NULL)
-    {
-      unsigned long hn;
-
-      if (dynamic_info[DT_HASH])
-	{
-	  bfd_vma si;
+	      Elf_Internal_Sym *psym;
+	      int n;
 
-	  printf (_("\nSymbol table for image:\n"));
-	  if (is_32bit_elf)
-	    printf (_("  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"));
-	  else
-	    printf (_("  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"));
+	      psym = dynamic_symbols + si;
 
-	  for (hn = 0; hn < nbuckets; hn++)
-	    {
-	      if (! buckets[hn])
-		continue;
+	      n = print_vma (si, DEC_5);
+	      if (n < 5)
+		fputs ("     " + n, stdout);
+	      printf (" %3lu: ", hn);
+	      print_vma (psym->st_value, LONG_HEX);
+	      putchar (' ');
+	      print_vma (psym->st_size, DEC_5);
 
-	      for (si = buckets[hn]; si < nchains && si > 0; si = chains[si])
-		print_dynamic_symbol (si, hn);
+	      printf ("  %6s", get_symbol_type (ELF_ST_TYPE (psym->st_info)));
+	      printf (" %6s",  get_symbol_binding (ELF_ST_BIND (psym->st_info)));
+	      printf (" %3s",  get_symbol_visibility (ELF_ST_VISIBILITY (psym->st_other)));
+	      /* Check to see if any other bits in the st_other field are set.
+	         Note - displaying this information disrupts the layout of the
+	         table being generated, but for the moment this case is very rare.  */
+	      if (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other))
+		printf (" [%s] ", get_symbol_other (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other)));
+	      printf (" %3.3s ", get_symbol_index_type (psym->st_shndx));
+	      if (VALID_DYNAMIC_NAME (psym->st_name))
+		print_symbol (25, GET_DYNAMIC_NAME (psym->st_name));
+	      else
+		printf (" <corrupt: %14ld>", psym->st_name);
+	      putchar ('\n');
 	    }
 	}
-
-      if (dynamic_info_DT_GNU_HASH)
-	{
-	  printf (_("\nSymbol table of `.gnu.hash' for image:\n"));
-	  if (is_32bit_elf)
-	    printf (_("  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"));
-	  else
-	    printf (_("  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"));
-
-	  for (hn = 0; hn < ngnubuckets; ++hn)
-	    if (gnubuckets[hn] != 0)
-	      {
-		bfd_vma si = gnubuckets[hn];
-		bfd_vma off = si - gnusymidx;
-
-		do
-		  {
-		    print_dynamic_symbol (si, hn);
-		    si++;
-		  }
-		while ((gnuchains[off++] & 1) == 0);
-	      }
-	}
     }
   else if (do_syms && !do_using_dynamic)
     {
@@ -7584,12 +7432,108 @@
 
   if (do_histogram && dynamic_info_DT_GNU_HASH)
     {
+      unsigned char nb[16];
+      bfd_vma i, maxchain = 0xffffffff, symidx, bitmaskwords;
       unsigned long *lengths;
       unsigned long *counts;
       unsigned long hn;
       unsigned long maxlength = 0;
       unsigned long nzero_counts = 0;
       unsigned long nsyms = 0;
+      bfd_vma buckets_vma;
+
+      if (fseek (file,
+		 (archive_file_offset
+		  + offset_from_vma (file, dynamic_info_DT_GNU_HASH,
+				     sizeof nb)),
+		 SEEK_SET))
+	{
+	  error (_("Unable to seek to start of dynamic information\n"));
+	  return 0;
+	}
+
+      if (fread (nb, 16, 1, file) != 1)
+	{
+	  error (_("Failed to read in number of buckets\n"));
+	  return 0;
+	}
+
+      ngnubuckets = byte_get (nb, 4);
+      symidx = byte_get (nb + 4, 4);
+      bitmaskwords = byte_get (nb + 8, 4);
+      buckets_vma = dynamic_info_DT_GNU_HASH + 16;
+      if (is_32bit_elf)
+	buckets_vma += bitmaskwords * 4;
+      else
+	buckets_vma += bitmaskwords * 8;
+
+      if (fseek (file,
+		 (archive_file_offset
+		  + offset_from_vma (file, buckets_vma, 4)),
+		 SEEK_SET))
+	{
+	  error (_("Unable to seek to start of dynamic information\n"));
+	  return 0;
+	}
+
+      gnubuckets = get_dynamic_data (file, ngnubuckets, 4);
+
+      if (gnubuckets == NULL)
+	return 0;
+
+      for (i = 0; i < ngnubuckets; i++)
+	if (gnubuckets[i] != 0)
+	  {
+	    if (gnubuckets[i] < symidx)
+	      return 0;
+
+	    if (maxchain == 0xffffffff || gnubuckets[i] > maxchain)
+	      maxchain = gnubuckets[i];
+	  }
+
+      if (maxchain == 0xffffffff)
+	return 0;
+
+      maxchain -= symidx;
+
+      if (fseek (file,
+		 (archive_file_offset
+		  + offset_from_vma (file, buckets_vma
+					   + 4 * (ngnubuckets + maxchain), 4)),
+		 SEEK_SET))
+	{
+	  error (_("Unable to seek to start of dynamic information\n"));
+	  return 0;
+	}
+
+      do
+	{
+	  if (fread (nb, 4, 1, file) != 1)
+	    {
+	      error (_("Failed to determine last chain length\n"));
+	      return 0;
+	    }
+
+	  if (maxchain + 1 == 0)
+	    return 0;
+
+	  ++maxchain;
+	}
+      while ((byte_get (nb, 4) & 1) == 0);
+
+      if (fseek (file,
+		 (archive_file_offset
+		  + offset_from_vma (file, buckets_vma + 4 * ngnubuckets, 4)),
+		 SEEK_SET))
+	{
+	  error (_("Unable to seek to start of dynamic information\n"));
+	  return 0;
+	}
+
+      gnuchains = get_dynamic_data (file, maxchain, 4);
+
+      if (gnuchains == NULL)
+	return 0;
 
       lengths = calloc (ngnubuckets, sizeof (*lengths));
       if (lengths == NULL)
@@ -7607,7 +7551,7 @@
 	  {
 	    bfd_vma off, length = 1;
 
-	    for (off = gnubuckets[hn] - gnusymidx;
+	    for (off = gnubuckets[hn] - symidx;
 		 (gnuchains[off] & 1) == 0; ++off)
 	      ++length;
 	    lengths[hn] = length;
@@ -7729,84 +7673,7 @@
 #endif
 
 static int
-dump_section_as_strings (Elf_Internal_Shdr *section, FILE *file)
-{
-  Elf_Internal_Shdr *relsec;
-  bfd_size_type num_bytes;
-  bfd_vma addr;
-  char *data;
-  char *end;
-  char *start;
-  char *name = SECTION_NAME (section);
-  bfd_boolean some_strings_shown;
-
-  num_bytes = section->sh_size;
-
-  if (num_bytes == 0 || section->sh_type == SHT_NOBITS)
-    {
-      printf (_("\nSection '%s' has no data to dump.\n"), name);
-      return 0;
-    }
-
-  addr = section->sh_addr;
-
-  start = get_data (NULL, file, section->sh_offset, 1, num_bytes,
-		    _("section data"));
-  if (!start)
-    return 0;
-
-  printf (_("\nString dump of section '%s':\n"), name);
-
-  /* If the section being dumped has relocations against it the user might
-     be expecting these relocations to have been applied.  Check for this
-     case and issue a warning message in order to avoid confusion.
-     FIXME: Maybe we ought to have an option that dumps a section with
-     relocs applied ?  */
-  for (relsec = section_headers;
-       relsec < section_headers + elf_header.e_shnum;
-       ++relsec)
-    {
-      if ((relsec->sh_type != SHT_RELA && relsec->sh_type != SHT_REL)
-	  || SECTION_HEADER_INDEX (relsec->sh_info) >= elf_header.e_shnum
-	  || SECTION_HEADER (relsec->sh_info) != section
-	  || relsec->sh_size == 0
-	  || SECTION_HEADER_INDEX (relsec->sh_link) >= elf_header.e_shnum)
-	continue;
-
-      printf (_("  Note: This section has relocations against it, but these have NOT been applied to this dump.\n"));
-      break;
-    }
-
-  data = start;
-  end  = start + num_bytes;
-  some_strings_shown = FALSE;
-
-  while (data < end)
-    {
-      while (!ISPRINT (* data))
-	if (++ data >= end)
-	  break;
-
-      if (data < end)
-	{
-	  printf ("  [%6zx]  %s\n", data - start, data);
-	  data += strlen (data);
-	  some_strings_shown = TRUE;
-	}
-    }
-
-  if (! some_strings_shown)
-    printf (_("  No strings found in this section."));
-
-  free (start);
-
-  putchar ('\n');
-  return 1;
-}
-
-
-static int
-dump_section_as_bytes (Elf_Internal_Shdr *section, FILE *file)
+dump_section (Elf_Internal_Shdr *section, FILE *file)
 {
   Elf_Internal_Shdr *relsec;
   bfd_size_type bytes;
@@ -8159,7 +8026,7 @@
       for (i = 0, any = 0; i < elf_header.e_shnum; i++)
 	if (streq (SECTION_NAME (section_headers + i), cur->name))
 	  {
-	    request_dump_bynumber (i, cur->type);
+	    request_dump (i, cur->type);
 	    any = 1;
 	  }
 
@@ -8189,13 +8056,10 @@
 	disassemble_section (section, file);
 #endif
       if (dump_sects[i] & HEX_DUMP)
-	dump_section_as_bytes (section, file);
+	dump_section (section, file);
 
       if (dump_sects[i] & DEBUG_DUMP)
 	display_debug_section (section, file);
-
-      if (dump_sects[i] & STRING_DUMP)
-	dump_section_as_strings (section, file);
     }
 
   /* Check to see if the user requested a
@@ -8519,6 +8383,32 @@
       return p;
    }
 
+  if (tag == Tag_GNU_Power_ABI_Vector)
+    {
+      val = read_uleb128 (p, &len);
+      p += len;
+      printf ("  Tag_GNU_Power_ABI_Vector: ");
+      switch (val)
+        {
+        case 0:
+          printf ("Any\n");
+          break;
+        case 1:
+          printf ("Generic\n");
+          break;
+        case 2:
+          printf ("AltiVec\n");
+          break;
+        case 3:
+          printf ("SPE\n");
+          break;
+        default:
+          printf ("??? (%d)\n", val);
+          break;
+        }
+      return p;
+   }
+
   if (tag & 1)
     type = 1; /* String.  */
   else
@@ -9370,7 +9260,6 @@
 static int
 process_note (Elf_Internal_Note *pnote)
 {
-  const char *name = pnote->namesz ? pnote->namedata : "(NONE)";
   const char *nt;
 
   if (pnote->namesz == 0)
@@ -9386,19 +9275,14 @@
     /* NetBSD-specific core file notes.  */
     nt = get_netbsd_elfcore_note_type (pnote->type);
 
-  else if (strneq (pnote->namedata, "SPU/", 4))
-    {
-      /* SPU-specific core file notes.  */
-      nt = pnote->namedata + 4;
-      name = "SPU";
-    }
-
   else
     /* Don't recognize this note name; just use the default set of
        note type strings.  */
       nt = get_note_type (pnote->type);
 
-  printf ("  %s\t\t0x%08lx\t%s\n", name, pnote->descsz, nt);
+  printf ("  %s\t\t0x%08lx\t%s\n",
+	  pnote->namesz ? pnote->namedata : "(NONE)",
+	  pnote->descsz, nt);
   return 1;
 }
 
@@ -9693,17 +9577,16 @@
      must make sure that the dump_sets array is zeroed out before each
      object file is processed.  */
   if (num_dump_sects > num_cmdline_dump_sects)
-    memset (dump_sects, 0, num_dump_sects * sizeof (* dump_sects));
+    memset (dump_sects, 0, num_dump_sects);
 
   if (num_cmdline_dump_sects > 0)
     {
       if (num_dump_sects == 0)
 	/* A sneaky way of allocating the dump_sects array.  */
-	request_dump_bynumber (num_cmdline_dump_sects, 0);
+	request_dump (num_cmdline_dump_sects, 0);
 
       assert (num_dump_sects >= num_cmdline_dump_sects);
-      memcpy (dump_sects, cmdline_dump_sects,
-	      num_cmdline_dump_sects * sizeof (* dump_sects));
+      memcpy (dump_sects, cmdline_dump_sects, num_cmdline_dump_sects);
     }
 
   if (! process_file_header ())
@@ -10078,13 +9961,12 @@
   if (num_dump_sects > 0)
     {
       /* Make a copy of the dump_sects array.  */
-      cmdline_dump_sects = malloc (num_dump_sects * sizeof (* dump_sects));
+      cmdline_dump_sects = malloc (num_dump_sects);
       if (cmdline_dump_sects == NULL)
 	error (_("Out of memory allocating dump request table.\n"));
       else
 	{
-	  memcpy (cmdline_dump_sects, dump_sects,
-		  num_dump_sects * sizeof (* dump_sects));
+	  memcpy (cmdline_dump_sects, dump_sects, num_dump_sects);
 	  num_cmdline_dump_sects = num_dump_sects;
 	}
     }
diff -Nur binutils-2.18.50.0.1/binutils/sysdep.h binutils-stable/binutils/sysdep.h
--- binutils-2.18.50.0.1/binutils/sysdep.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/sysdep.h	2007-09-25 15:41:53.000000000 +0200
@@ -21,12 +21,12 @@
 #ifndef _BIN_SYSDEP_H
 #define _BIN_SYSDEP_H
 
-#include "config.h"
 #include "ansidecl.h"
 #include <stdio.h>
 #include <sys/types.h>
 
 #include "bfdver.h"
+#include "config.h"
 
 #include <stdarg.h>
 
diff -Nur binutils-2.18.50.0.1/binutils/testsuite/binutils-all/dumptest.s binutils-stable/binutils/testsuite/binutils-all/dumptest.s
--- binutils-2.18.50.0.1/binutils/testsuite/binutils-all/dumptest.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/testsuite/binutils-all/dumptest.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-	.data
-	.ascii "test_string"
diff -Nur binutils-2.18.50.0.1/binutils/testsuite/binutils-all/readelf.exp binutils-stable/binutils/testsuite/binutils-all/readelf.exp
--- binutils-2.18.50.0.1/binutils/testsuite/binutils-all/readelf.exp	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/testsuite/binutils-all/readelf.exp	2007-09-25 15:41:52.000000000 +0200
@@ -21,12 +21,6 @@
 # Based on scripts written by Ian Lance Taylor <ian@cygnus.com>
 # and Ken Raeburn <raeburn@cygnus.com>.
 
-# Exclude non-ELF targets.
-if ![is_elf_format] {
-    verbose "$READELF is only intended for ELF targets" 2
-    return
-}
-
 # First some helpful procedures, then the tests themselves
 
 # Return the contents of the filename given
@@ -209,58 +203,10 @@
 }
 
 
-# Test readelf's dumping abilities.
-
-proc readelf_dump_test {} {
-    global READELF
-    global READELFFLAGS
-    global srcdir
-    global subdir
-    
-    # Assemble the dump test file.
-    if {![binutils_assemble $srcdir/$subdir/dumptest.s tmpdir/dumptest.o]} then {
-      unresolved "readelf -p: failed to assemble dump test file"
-      return
-    }
-    # Download it.
-    set tempfile [remote_download host tmpdir/dumptest.o]
-
-    # Run "readelf -p.data" on it.
-    set got [remote_exec host "$READELF $READELFFLAGS -p.data $tempfile" "" "/dev/null" "readelf.out"]
-    set got [lindex $got 1]
-
-    # Upload the results.
-    set output [remote_upload host readelf.out]
-
-    # Check for something going wrong.
-    if ![string match "" $got] then {
-	fail "readelf -p: unexpected output"
-	send_log $got
-	send_log "\n"
-	return
-    }
-
-    # Search for strings that should be in the output.
-    set sought {
-	".*test_string.*"
-    }
-    
-    foreach looked_for $sought {	
-	set lines [grep $output $looked_for]
-	if ![llength $lines] then {
-	    fail "readelf -p: missing: $looked_for"
-	    send_log readelf.out
-	    return
-	}
-    }
-
-    file_on_host delete $tempfile    
-    file_on_host delete $output
-
-    # All done.
-    pass "readelf -p"
-
-    # XXX FIXME: Add test of readelf -x here
+# Exclude non-ELF targets.
+if ![is_elf_format] {
+    verbose "$READELF is only intended for ELF targets" 2
+    return
 }
 
 if ![is_remote host] {
@@ -274,7 +220,7 @@
 
 # Assemble the test file.
 if {![binutils_assemble $srcdir/$subdir/bintest.s tmpdir/bintest.o]} then {
-    perror "could not assemble test file"
+    perror "unresolved 1"
     unresolved "readelf - failed to assemble"
     return
 }
@@ -295,5 +241,3 @@
 readelf_test -r $tempfile readelf.r  {}
 
 readelf_wi_test
-
-readelf_dump_test
Files binutils-2.18.50.0.1/binutils/testsuite/binutils-all/windres/bmp1.bmp and binutils-stable/binutils/testsuite/binutils-all/windres/bmp1.bmp differ
Files binutils-2.18.50.0.1/binutils/testsuite/binutils-all/windres/MSG00001.bin and binutils-stable/binutils/testsuite/binutils-all/windres/MSG00001.bin differ
diff -Nur binutils-2.18.50.0.1/binutils/testsuite/ChangeLog binutils-stable/binutils/testsuite/ChangeLog
--- binutils-2.18.50.0.1/binutils/testsuite/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/binutils/testsuite/ChangeLog	2007-09-25 15:41:52.000000000 +0200
@@ -1,25 +1,3 @@
-2007-08-30  Nick Clifton  <nickc@redhat.com>
-
-	* binutils-all/dumptest.s: New test file.
-	* binutils-all/readelf.exp: Add test of readelf's -p switch.
-
-2007-08-28  Mark Shinwell  <shinwell@codesourcery.com>
-            Joseph Myers  <joseph@codesourcery.com>
-
-	* binutils-all/ar.exp (long_filenames): Delete temporary files on
-	the host.
-	* binutils-all/arm/objdump.exp: Only check "which $OBJDUMP" if
-	host is local.
-	* binutils-all/objcopy.exp: Use ${srecfile} to get the name of the
-	srec file to be passed to binutils_run.
-	(objcopy_test_readelf): Use remote_exec.
-	* binutils-all/readelf.exp (readelf_find_size): Use remote_exec.
-	(readelf_test): Likewise.
-	(readelf_wi_test): Likewise.
-	* lib/utils-lib.exp (run_dump_test): Only check "which $binary" if
-	host is local.  Use remote_exec.  Use $tempfile not
-	tmpdir/bintest.o.
-
 2007-08-09  Alan Modra  <amodra@bigpond.net.au>
 
 	* binutils-all/copy-2.d (not-target): Match *-*-*aout.
diff -Nur binutils-2.18.50.0.1/binutils.spec binutils-stable/binutils.spec
--- binutils-2.18.50.0.1/binutils.spec	2007-09-08 17:43:41.000000000 +0200
+++ binutils-stable/binutils.spec	1970-01-01 01:00:00.000000000 +0100
@@ -1,134 +0,0 @@
-%define cross_compile 0
-%{?_with_crosscompile: %{expand: %%define cross_compile 1}}
-%{!?_with_crosscompile: %{expand: %%define _host %{_target_platform}}}
-%{!?_with_crosscompile: %{expand: %%define _build %{_target_platform}}}
-
-# Define `coff_target' as coff if you want to add i386-coff instead of
-# i386-pe.
-%define coff_target pe
-%{?_with_coff: %{expand: %%define coff_target coff}}
-%define all_targets 0
-%{?_with_all: %{expand: %%define all_targets 1}}
-
-Summary: A GNU collection of binary utilities.
-Name: binutils
-Version: 2.18.50.0.1
-Release: 1
-License: GPLv2
-Group: Development/Tools
-URL: http://www.sourceware.org/binutils
-Source: http://www.kernel.org/pub/linux/devel/binutils/binutils-%{version}.tar.bz2
-Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
-Prereq: /sbin/install-info
-
-%description
-Binutils is a collection of binary utilities, including ar (for creating,
-modifying and extracting from archives), nm (for listing symbols from
-object files), objcopy (for copying and translating object files),
-objdump (for displaying information from object files), ranlib (for
-generating an index for the contents of an archive), size (for listing
-the section sizes of an object or archive file), strings (for listing
-printable strings from files), strip (for discarding symbols), c++filt
-(a filter for demangling encoded C++ symbols), and addr2line (for
-converting addresses to file and line).
-
-%prep
-%setup -q
-
-%build
-if [ -x /usr/bin/getconf ] ; then
-  NRPROC=$(/usr/bin/getconf _NPROCESSORS_ONLN)
-   if [ $NRPROC -eq 0 ] ; then
-    NRPROC=1
-  fi
-else
-  NRPROC=1
-fi
-echo "MAKE=make -j $NRPROC" > makefile
-echo "include Makefile" >> makefile
-ADDITIONAL_TARGETS=""
-%ifos linux
-%if %{all_targets}
-ADDITIONAL_TARGETS="--enable-targets=alpha-linux,arm-linux,cris-linux,hppa-linux,i386-linux,x86_64-linux,ia64-linux,m68k-linux,mips-linux,mips64-linux,mips64el-linux,mipsel-linux,ppc-linux,ppc64-linux,s390-linux,s390x-linux,sh-linux,sparc-linux,sparc64-linux,i386-linuxaout"
-%else
-%ifarch %{ix86}
-ADDITIONAL_TARGETS="--enable-targets=i386-linuxaout,i386-%{coff_target}"
-%endif
-%ifarch ia64
-ADDITIONAL_TARGETS="--enable-targets=i386-linux"
-%endif
-%ifarch sparc ppc s390
-ADDITIONAL_TARGETS="--enable-64-bit-bfd"
-%endif
-%endif
-%endif
-
-# Binutils come with its own custom libtool
-%define __libtoolize echo
-AR=%{__ar}; export AR
-CC=%{__cc}; export CC
-LD=%{__ld}; export LD
-NM=%{__nm}; export NM
-RANLIB=%{__ranlib}; export RANLIB
-LD_SYMBOLIC_FUNCTIONS=1; export LD_SYMBOLIC_FUNCTIONS
-%configure --enable-shared $ADDITIONAL_TARGETS
-make configure-bfd
-%if %{cross_compile}
-make headers -C bfd CFLAGS=-O
-make tooldir=%{_prefix} all info CFLAGS_FOR_BUILD="-O -pipe"
-%else
-make headers -C bfd
-make tooldir=%{_prefix} all info
-%endif
-
-%install
-rm -rf ${RPM_BUILD_ROOT}
-mkdir -p ${RPM_BUILD_ROOT}%{_prefix}
-# Works for rpm 4.0 only.
-%makeinstall tooldir=${RPM_BUILD_ROOT}%{_prefix}
-make prefix=${RPM_BUILD_ROOT}%{_prefix} infodir=${RPM_BUILD_ROOT}%{_infodir} install-info
-strip ${RPM_BUILD_ROOT}%{_bindir}/*
-gzip -q9f ${RPM_BUILD_ROOT}%{_infodir}/*.info*
-
-install -m 644 include/libiberty.h ${RPM_BUILD_ROOT}%{_includedir}
-
-chmod +x ${RPM_BUILD_ROOT}%{_libdir}/lib*.so*
-
-rm -f ${RPM_BUILD_ROOT}%{_libdir}/lib{bfd,opcodes}.{la,so}
-rm -f ${RPM_BUILD_ROOT}%{_infodir}/dir
-rm -f %{buildroot}%{_mandir}/man1/{dlltool,nlmconv,windres}*
-
-%clean
-rm -rf ${RPM_BUILD_ROOT}
-
-%post
-/sbin/ldconfig
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/as.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/bfd.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/binutils.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/gprof.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/ld.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/standards.info.gz
-
-%preun
-if [ $1 = 0 ] ;then
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/as.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/bfd.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/binutils.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/gprof.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/ld.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/standards.info.gz
-fi
-
-%postun -p /sbin/ldconfig
-
-%files
-%defattr(-,root,root)
-%doc README
-%{_bindir}/*
-%{_mandir}/man1/*
-%{_includedir}/*
-%{_prefix}/lib/ldscripts/*
-%{_libdir}/lib*
-%{_infodir}/*info*
-%{_datadir}/locale/*/LC_MESSAGES/*.mo
diff -Nur binutils-2.18.50.0.1/binutils.spec.in binutils-stable/binutils.spec.in
--- binutils-2.18.50.0.1/binutils.spec.in	2007-01-26 03:45:24.000000000 +0100
+++ binutils-stable/binutils.spec.in	1970-01-01 01:00:00.000000000 +0100
@@ -1,134 +0,0 @@
-%define cross_compile 0
-%{?_with_crosscompile: %{expand: %%define cross_compile 1}}
-%{!?_with_crosscompile: %{expand: %%define _host %{_target_platform}}}
-%{!?_with_crosscompile: %{expand: %%define _build %{_target_platform}}}
-
-# Define `coff_target' as coff if you want to add i386-coff instead of
-# i386-pe.
-%define coff_target pe
-%{?_with_coff: %{expand: %%define coff_target coff}}
-%define all_targets 0
-%{?_with_all: %{expand: %%define all_targets 1}}
-
-Summary: A GNU collection of binary utilities.
-Name: binutils
-Version: @VERSION@
-Release: 1
-License: GPLv2
-Group: Development/Tools
-URL: http://www.sourceware.org/binutils
-Source: http://www.kernel.org/pub/linux/devel/binutils/binutils-%{version}.tar.bz2
-Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
-Prereq: /sbin/install-info
-
-%description
-Binutils is a collection of binary utilities, including ar (for creating,
-modifying and extracting from archives), nm (for listing symbols from
-object files), objcopy (for copying and translating object files),
-objdump (for displaying information from object files), ranlib (for
-generating an index for the contents of an archive), size (for listing
-the section sizes of an object or archive file), strings (for listing
-printable strings from files), strip (for discarding symbols), c++filt
-(a filter for demangling encoded C++ symbols), and addr2line (for
-converting addresses to file and line).
-
-%prep
-%setup -q
-
-%build
-if [ -x /usr/bin/getconf ] ; then
-  NRPROC=$(/usr/bin/getconf _NPROCESSORS_ONLN)
-   if [ $NRPROC -eq 0 ] ; then
-    NRPROC=1
-  fi
-else
-  NRPROC=1
-fi
-echo "MAKE=make -j $NRPROC" > makefile
-echo "include Makefile" >> makefile
-ADDITIONAL_TARGETS=""
-%ifos linux
-%if %{all_targets}
-ADDITIONAL_TARGETS="--enable-targets=alpha-linux,arm-linux,cris-linux,hppa-linux,i386-linux,x86_64-linux,ia64-linux,m68k-linux,mips-linux,mips64-linux,mips64el-linux,mipsel-linux,ppc-linux,ppc64-linux,s390-linux,s390x-linux,sh-linux,sparc-linux,sparc64-linux,i386-linuxaout"
-%else
-%ifarch %{ix86}
-ADDITIONAL_TARGETS="--enable-targets=i386-linuxaout,i386-%{coff_target}"
-%endif
-%ifarch ia64
-ADDITIONAL_TARGETS="--enable-targets=i386-linux"
-%endif
-%ifarch sparc ppc s390
-ADDITIONAL_TARGETS="--enable-64-bit-bfd"
-%endif
-%endif
-%endif
-
-# Binutils come with its own custom libtool
-%define __libtoolize echo
-AR=%{__ar}; export AR
-CC=%{__cc}; export CC
-LD=%{__ld}; export LD
-NM=%{__nm}; export NM
-RANLIB=%{__ranlib}; export RANLIB
-LD_SYMBOLIC_FUNCTIONS=1; export LD_SYMBOLIC_FUNCTIONS
-%configure --enable-shared $ADDITIONAL_TARGETS
-make configure-bfd
-%if %{cross_compile}
-make headers -C bfd CFLAGS=-O
-make tooldir=%{_prefix} all info CFLAGS_FOR_BUILD="-O -pipe"
-%else
-make headers -C bfd
-make tooldir=%{_prefix} all info
-%endif
-
-%install
-rm -rf ${RPM_BUILD_ROOT}
-mkdir -p ${RPM_BUILD_ROOT}%{_prefix}
-# Works for rpm 4.0 only.
-%makeinstall tooldir=${RPM_BUILD_ROOT}%{_prefix}
-make prefix=${RPM_BUILD_ROOT}%{_prefix} infodir=${RPM_BUILD_ROOT}%{_infodir} install-info
-strip ${RPM_BUILD_ROOT}%{_bindir}/*
-gzip -q9f ${RPM_BUILD_ROOT}%{_infodir}/*.info*
-
-install -m 644 include/libiberty.h ${RPM_BUILD_ROOT}%{_includedir}
-
-chmod +x ${RPM_BUILD_ROOT}%{_libdir}/lib*.so*
-
-rm -f ${RPM_BUILD_ROOT}%{_libdir}/lib{bfd,opcodes}.{la,so}
-rm -f ${RPM_BUILD_ROOT}%{_infodir}/dir
-rm -f %{buildroot}%{_mandir}/man1/{dlltool,nlmconv,windres}*
-
-%clean
-rm -rf ${RPM_BUILD_ROOT}
-
-%post
-/sbin/ldconfig
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/as.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/bfd.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/binutils.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/gprof.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/ld.info.gz
-/sbin/install-info --info-dir=%{_infodir} %{_infodir}/standards.info.gz
-
-%preun
-if [ $1 = 0 ] ;then
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/as.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/bfd.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/binutils.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/gprof.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/ld.info.gz
-  /sbin/install-info --delete --info-dir=%{_infodir} %{_infodir}/standards.info.gz
-fi
-
-%postun -p /sbin/ldconfig
-
-%files
-%defattr(-,root,root)
-%doc README
-%{_bindir}/*
-%{_mandir}/man1/*
-%{_includedir}/*
-%{_prefix}/lib/ldscripts/*
-%{_libdir}/lib*
-%{_infodir}/*info*
-%{_datadir}/locale/*/LC_MESSAGES/*.mo
diff -Nur binutils-2.18.50.0.1/ChangeLog binutils-stable/ChangeLog
--- binutils-2.18.50.0.1/ChangeLog	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/ChangeLog	2007-09-25 15:42:07.000000000 +0200
@@ -1,12 +1,3 @@
-2007-08-29  Nick Clifton  <nickc@redhat.com>
-
-	* config.sub, config.guess: Update from upstream sources.
-
-2007-08-21  Richard Guenther  <rguenther@suse.de>
-
-	* configure.ac: Add types checking to stage1 checking flags.
-	* configure: Regenerate.
-
 2007-08-18  Paul Brook  <paul@codesourcery.com>
             Joseph Myers  <joseph@codesourcery.com>
 
@@ -19,6 +10,7 @@
 2007-08-17  Richard Sandiford  <richard@codesourcery.com>
 	    Nigel Stephens  <nigel@mips.com>
 
+	* config/mt-sde: New file.
 	* configure.ac (mips*-sde-elf*): New stanza.  Use config/mt-sde
 	as target_makefile_frag.
 	* configure: Regenerate.
diff -Nur binutils-2.18.50.0.1/ChangeLog.csl binutils-stable/ChangeLog.csl
--- binutils-2.18.50.0.1/ChangeLog.csl	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ChangeLog.csl	2007-09-25 22:35:28.000000000 +0200
@@ -0,0 +1,1885 @@
+2007-09-25  Paul Brook  <paul@codesourcery.com>
+
+	gas/
+	* config/tc-arm.c: Enforce register constraints on Thumb-1 add.
+
+	gas/testsuite/
+	* gas/arm/t16-bad.s: Add low reg non flags setting add.
+	* gas/arm/t16-bad.l: Update expected output.
+	* gas/arm/archv6m.s: Add low reg non flags setting add.
+	* gas/arm/archv6m.d: Update expected output.
+
+2007-09-24  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	Backport:
+	bfd/
+	2007-09-24  Daniel Jacobowitz  <dan@codesourcery.com>
+	* elf.c (assign_file_positions_for_load_sections): Trust
+	p_align_valid.
+	(copy_elf_program_header): Copy PT_NULL segments.
+
+2007-09-24  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	gas/testsuite/
+	* gas/mips/loongson-2f.d: Specify a 64-bit ABI.
+	* gas/mips/loongson-2e.d: Likewise.
+
+2007-09-21  Joseph Myers  <joseph@codesourcery.com>
+
+	* release-notes-csl.xml: Add release notes for GOT patch.
+
+	ld/testsuite/
+	* ld-mips-elf/got-page-3.d: Assemble with -mips3.
+
+2007-09-21  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from
+	<http://sourceware.org/ml/binutils/2007-09/msg00308.html>:
+
+	bfd/
+	2007-09-21  Richard Sandiford  <rsandifo@nildram.co.uk>
+	* elfxx-mips.c (mips_got_page_range): New structure.
+	(mips_got_page_entry): Likewise.
+	(mips_got_info): Add page_gotno and got_page_entries fields.
+	(mips_elf_got_per_bfd_arg): Add max_pages field.  Delete
+	primary_count and current_count fields.
+	(mips_got_page_entry_hash, mips_got_page_entry_eq): New functions.
+	(mips_elf_pages_for_range, mips_elf_record_got_page_entry): Likewise.
+	(mips_elf_get_got_for_bfd): New function, split out from
+	mips_elf_make_got_per_bfd.  Initialize the page_gotno and
+	got_page_entries fields when creating a new GOT structure.
+	(mips_elf_make_got_pages_per_bfd): New function.
+	(mips_elf_merge_got_with): New function, split out from
+	mips_elf_make_got_per_bfd.  Merge page entries as well as
+	non-page entries.  Use the minimum of max_pages and the sum
+	of the page_gotnos to estimate the number of page entries.
+	(mips_elf_merge_gots): Use the minimum of max_pages and the
+	bfd's page_gotno to estimate the number of page entries.
+	Use the above functions.
+	(mips_elf_multi_got): Add page entries as well as non-page entries
+	to the individual per-bfd GOTs.  Initialize got_per_bfd_arg.max_pages.
+	Initialize the page_gotno and got_page_entries fields when creating
+	a new primary GOT.  Use the minimum of pages and page_gotno when
+	adding the number of pages entries to local_gotno.
+	(mips_elf_create_got_section): Initialize the page_gotno and
+	got_page_entries fields of the GOT structure.
+	(mips_elf_rel_relocation_p, mips_elf_read_rel_addend)
+	(mips_elf_add_lo16_rel_addend, mips_elf_get_section_contents): New
+	functions, split out from...
+	(_bfd_mips_elf_relocate_section): ...here.
+	(_bfd_mips_elf_check_relocs): Record GOT page entries too.
+	(_bfd_mips_relax_section): Use mips_elf_get_section_contents.
+	(_bfd_mips_elf_always_size_sections): Use the smaller of the
+	loadable_size- and page_gotno-derived estimates.
+
+	ld/testsuite/
+	2007-09-21  Richard Sandiford  <rsandifo@nildram.co.uk>
+	            Joseph Myers  <joseph@codesourcery.com>
+	* ld-mips-elf/got-page-1.d, ld-mips-elf/got-page-1.s,
+	* ld-mips-elf/got-page-2.d, ld-mips-elf/got-page-2.s,
+	* ld-mips-elf/got-page-3.d, ld-mips-elf/got-page-3a.s,
+	* ld-mips-elf/got-page-3b.s, ld-mips-elf/got-page-3c.s,
+	* ld-mips-elf/got-page-1.ld: New tests.
+	* ld-mips-elf/mips-elf.exp: Run them.
+	* ld-mips-elf/multi-got-1.d, ld-mips-elf/multi-got-no-shared.d,
+	* ld-mips-elf/tls-hidden2-got.d, ld-mips-elf/tls-hidden2.d,
+	* ld-mips-elf/tls-hidden3.d, ld-mips-elf/tls-hidden3.got,
+	* ld-mips-elf/tls-hidden3.r, ld-mips-elf/tls-hidden4.got,
+	* ld-mips-elf/tls-hidden4.r, ld-mips-elf/tls-multi-got-1.d,
+	* ld-mips-elf/tls-multi-got-1.got, ld-mips-elf/tls-multi-got-1.r,
+	* ld-mips-elf/tlsbin-o32.d, ld-mips-elf/tlsbin-o32.got,
+	* ld-mips-elf/tlsdyn-o32-1.d, ld-mips-elf/tlsdyn-o32-1.got,
+	* ld-mips-elf/tlsdyn-o32-2.d, ld-mips-elf/tlsdyn-o32-2.got,
+	* ld-mips-elf/tlsdyn-o32-3.d, ld-mips-elf/tlsdyn-o32-3.got,
+	* ld-mips-elf/tlsdyn-o32.d, ld-mips-elf/tlsdyn-o32.got,
+	* ld-mips-elf/tlslib-o32-hidden.got, ld-mips-elf/tlslib-o32-ver.got,
+	* ld-mips-elf/tlslib-o32.d, ld-mips-elf/tlslib-o32.got: Update for
+	GOT allocation changes.
+
+2007-09-19  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	ld/testsuite/
+	* ld-scripts/rgn-over.s: Use sections .txt and .dat.
+	* ld-scripts/rgn-over1.t, ld-scripts/rgn-over2.t,
+	ld-scripts/rgn-over3.t, ld-scripts/rgn-over4.t, ld-scripts/rgn-over5.t,
+	ld-scripts/rgn-over6.t, ld-scripts/rgn-over7.t: Discard other
+	sections.  Handle changed names.
+	* ld-scripts/rgn-over1.d, ld-scripts/rgn-over2.d,
+	ld-scripts/rgn-over3.d, ld-scripts/rgn-over4.d, ld-scripts/rgn-over5.d,
+	ld-scripts/rgn-over6.d, ld-scripts/rgn-over7.d: Expect discarded
+	sections and changed names.
+
+2007-09-19  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	bfd/
+	* elfxx-mips.c (_bfd_mips_elf_finish_dynamic_sections): Make sure .got
+	will be output.
+
+2007-09-18  Maxim Kuvyrkov  <maxim@codesourcery.com>
+
+	* release-notes-csl.xml (ColdFire 51QE support): New.
+	
+2007-09-07  Nathan Froyd  <froydnj@codesourcery.com>
+
+	gas/
+	* config/tc-ppc.c (parse_cpu): Handle -mpmr option.
+
+2007-08-31  Joseph Myers  <joseph@codesourcery.com>
+
+	Revert:
+	2007-06-04  Joseph Myers  <joseph@codesourcery.com>
+	bfd/
+	* elflink.c (bfd_elf_link_record_dynamic_symbol): Do not set
+	dynindx for indirect symbols.
+
+2007-08-30  Brooks Moses  <brooks@codesourcery.com>
+
+	Add files missing from 2007-08-20 merge from FSF trunk:
+	* ld/emultempl/cr16elf.em: New.
+	* ld/testsuite/ld-elf/dl2a.list: New.
+	* ld/testsuite/ld-ia64/merge1.d: New.
+	* ld/testsuite/ld-ia64/merge1.s: New.
+	* ld/testsuite/ld-ia64/merge2.d: New.
+	* ld/testsuite/ld-ia64/merge2.s: New.
+	* ld/testsuite/ld-ia64/merge3.d: New.
+	* ld/testsuite/ld-ia64/merge3.s: New.
+	* ld/testsuite/ld-ia64/merge4.d: New.
+	* ld/testsuite/ld-ia64/merge4.s: New.
+	* ld/testsuite/ld-ia64/merge5.d: New.
+	* ld/testsuite/ld-ia64/merge5.s: New.
+	* ld/testsuite/ld-pe/secrel_64.d: New.
+	* compile: New.
+	* lt~obsolete.m4: New.
+
+2007-08-30  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	ld/testsuite/
+	* ld-elf/weak-dyn-1.rd: Resolve merge conflict.
+
+2007-08-29  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	Issue #1771
+	Backport:
+	2007-08-29  Daniel Jacobowitz  <dan@codesourcery.com>
+	gas/
+	* dwarf2dbg.c (dwarf2_directive_loc): Emit duplicate .loc directives.
+
+	gas/testsuite/
+	* gas/lns/lns-duplicate.d, gas/lns/lns-duplicate.s: New.
+	* gas/lns/lns.exp: Run lns-duplicate.
+
+2007-08-28  Mark Shinwell  <shinwell@codesourcery.com>
+            Joseph Myers  <joseph@codesourcery.com>
+
+	ld/testsuite/
+	* ld-scripts/rgn-over1.d: Disallow space before "ld" at start of
+	line, not ":".
+	* ld-scripts/rgn-over2.d: Likewise.
+	* ld-scripts/rgn-over3.d: Likewise.
+	* ld-scripts/rgn-over4.d: Likewise.
+	* ld-scripts/rgn-over5.d: Likewise.
+	* ld-scripts/rgn-over6.d: Likewise.
+	* ld-scripts/rgn-over7.d: Likewise.
+
+	Backport from FSF:
+
+	bfd/
+	* elf32-arm.c (elf32_arm_compare_mapping): Compare first on vma,
+	then on type.
+
+	binutils/testsuite/
+	* binutils-all/ar.exp (long_filenames): Delete temporary files on
+	the host.
+	* binutils-all/arm/objdump.exp: Only check "which $OBJDUMP" if
+	host is local.
+	* binutils-all/objcopy.exp: Use ${srecfile} to get the name of the
+	srec file to be passed to binutils_run.
+	(objcopy_test_readelf): Use remote_exec.
+	* binutils-all/readelf.exp (readelf_find_size): Use remote_exec.
+	(readelf_test): Likewise.
+	(readelf_wi_test): Likewise.
+	* lib/utils-lib.exp (run_dump_test): Only check "which $binary" if
+	host is local.  Use remote_exec.  Use $tempfile not
+	tmpdir/bintest.o.
+
+	gas/
+	* as.c (main): Flush stderr before printing listings to ensure
+	consistent output order across platforms.
+
+	gas/testsuite/
+	* lib/gas-defs.exp (gas_version): Use remote_* functions instead
+	of exec.
+	(gas_host_run): New.
+	(gas_run): Use gas_host_run.
+	(gas_start): Likewise.
+	(run_dump_test): Likewise.
+	(objdump): Use gas_host_run.
+	(objdump_start_no_subdir): Likewise.
+	* lib/gas-dg.exp (gas-dg-test): Use "remote_file host delete".
+	* lib/run: Remove.
+	* gas/macros/macros.exp: Download app4b.s to host.
+	* gas/i386/i386.exp (gas_64_check): Use gas_host_run.
+	(gas_32_check): Likewise.
+	* gas/maxq10/maxq10.exp (gas_64_check): Likewise
+	(gas_32_check): Likewise.
+	* gas/maxq20/maxq20.exp (gas_64_check): Likewise
+	(gas_32_check): Likewise.
+	* gas/sparc/sparc.exp (gas_64_check): Likewise.
+	* gas/cfi/cfi.exp: Likewise.
+	* gas/elf/elf.exp (run_list_test): Likewise.  Use temporary file
+	for readelf output in place of pipe.
+	* gas/all/gas.exp: Download incbin.dat to host.
+	(do_comment): Allow \r\r\n.
+
+	ld/
+	* ldlang.c (sort_sections_by_lma): Sort by internal id after lma
+	for stable sort.
+
+	ld/testsuite/
+	* ld-elfcomm/elfcomm.exp: Use run_host_cmd.  Only check "which
+	$CC" if host is local.
+	* ld-checks/checks.exp: Use run_host_cmd.
+	* ld-elf/exclude.exp: Likewise.
+	* ld-elf/elf.exp: Download merge.ld if host is remote.
+	* ld-elf/binutils.exp (binutils_test): Use remote_exec.
+	* ld-elf/tls_common.exp: Use run_host_cmd.
+	* lib/ld-lib.exp (ld_version): Only check "which $ld" if host is
+	local.  Use remote_exec.
+	(run_host_cmd): New.
+	(run_host_cmd_yesno): New.
+	(default_ld_relocate): Use run_host_cmd_yesno.
+	(default_ld_link): Likewise.
+	(default_ld_simple_link): Use run_host_cmd.
+	(default_ld_compile): Only check "which $ccprog" if host is local.
+	Use remote_file and remote_exec.
+	(default_ld_assemble): Only check "which $as" if host is local.
+	Use run_host_cmd.
+	(default_ld_nm): Use remote_exec, remote_upload and remote_file.
+	(run_dump_test): Use remote_exec, remote_upload and remote_file.
+	Only check "which $binary" if host is local.
+	(run_ld_link_tests): Use remote_exec, remote_upload and
+	remote_file.
+	* ld-selective/selective.exp: Only check "which $CXX" if host is
+	local.  Use remote_exec.
+	* ld-scripts/phdrs.exp: Only check "which $objdump" if host is
+	local.  Use run_host_cmd.
+	* ld-scripts/phdrs2.exp: Likewise.
+	* ld-scripts/weak.exp: Likewise.
+	* ld-undefined/weak-undef.exp: Likewise.
+	* ld-scripts/crossref.exp: Only check "which $CC" if host is local.
+	Use run_host_cmd.
+	* ld-scripts/map-address.exp: Upload map_address.map if host is
+	remote.
+	* ld-srec/srec.exp (run_srec_tests): Use run_host_cmd.  Only check
+	"which $CC" and "which $CXX" if host is local.
+	* ld-undefined/undefined.exp: Only check "which $CC" if host is
+	local.  Use remote_file and run_host_cmd.
+	* config/default.exp: Use remote_exec to create tmpdir.
+
+2007-08-28  Nathan Sidwell  <nathan@codesourcery.com>
+
+	gas/
+	* config/tc-m68k.c (m68k_ip): Add mcfisa_c case.
+	(m68k_elf_final_processing): Add EF_M68K_CF_ISA_C_NODIV.
+
+	include/elf/
+	* m68k.h (EF_M68K_CF_ISA_C_NODIV): New.
+
+	bfd/
+	* elf32-m68k.c (elf32_m68k_object_p): Add EF_M68K_CF_ISA_C_NODIV.
+	(elf32_m68k_print_private_bfd_data): Likewise.
+
+2007-08-25  Mark Shinwell  <shinwell@codesourcery.com>
+
+	Add files missing from previous commit:
+	gas/testsuite/
+	* gas/mips/loongson-2e.d: New.
+	* gas/mips/loongson-2e.s: New.
+	* gas/mips/loongson-2f.d: New.
+	* gas/mips/loongson-2f.s: New.
+
+2007-08-25  Mark Shinwell  <shinwell@codesourcery.com>
+
+	* release-notes-csl.xml
+	(Loongson-2E and Loongson-2F processor support): New.
+
+2007-08-25  Mark Shinwell  <shinwell@codesourcery.com>
+
+        bfd/
+	* archures.c (bfd_mach_mips_loongson_2e): New.
+	(bfd_mach_mips_loongson_2f): New.
+	* bfd-in2.h (bfd_mach_mips_loongson_2e): New.
+	(bfd_mach_mips_loongson_2f): New.
+	* cpu-mips.c: Add I_loongson_2e and I_loongson_2f to
+	anonymous enum.
+	(arch_info_struct): Add Loongson-2E and Loongson-2F entries.
+	* elfxx-mips.c (_bfd_elf_mips_mach): Handle Loongson-2E
+	and Loongson-2F flags.
+	(mips_set_isa_flags): Likewise.
+	(mips_mach_extensions): Add Loongson-2E and Loongson-2F
+	entries.
+
+	binutils/
+	* readelf.c (get_machine_flags): Handle Loongson-2E and -2F
+	flags.
+	
+	gas/
+	* config/tc-mips.c (mips_cpu_info_table): Add loongson2e
+	and loongson2f entries.
+	* doc/c-mips.texi: Document -march=loongson{2e,2f} options.
+
+	gas/testsuite/
+	* gas/mips/mips.exp: Add loongson-2e and -2f tests.
+	* gas/mips/loongson-2e.d: New.
+	* gas/mips/loongson-2e.s: New.
+	* gas/mips/loongson-2f.d: New.
+	* gas/mips/loongson-2f.s: New.
+
+	include/elf/
+	* mips.h (E_MIPS_MACH_LS2E): New.
+	(E_MIPS_MACH_LS2F): New.
+
+	include/opcode/
+	* mips.h (INSN_LOONGSON_2E): New.
+	(INSN_LOONGSON_2F): New.
+	(CPU_LOONGSON_2E): New.
+	(CPU_LOONGSON_2F): New.
+	(OPCODE_IS_MEMBER): Update for Loongson-2E and -2F flags.
+
+	opcodes/
+	* mips-dis.c (mips_arch_choices): Add Loongson-2E and -2F
+	entries.
+	* mips-opc.c (IL2E): New.
+	(IL2F): New.
+	(mips_builtin_opcodes): Add Loongson-2E and -2F instructions.
+	Allow movz and movn for Loongson-2E and -2F.  Add movnz entry.
+	Move coprocessor encodings to the end of the table.  Allow
+	certain MIPS V .ps instructions on the Loongson-2E and -2F.
+
+2007-08-24  Maxim Kuvyrkov  <maxim@codesourcery.com>
+
+	Rename 51QE to 51qe.
+
+	binutils/
+
+	* gas/config/tc-m68k.c (mcf51QE_ctrl): Rename to mcf51qe_ctrl.
+	(m68k_cpus): Update.
+
+2007-08-24  Mark Shinwell  <shinwell@codesourcery.com>
+
+	include/opcode/
+	* mips.h (INSN_ISA*): Redefine certain values as an
+	enumeration.  Update comments.
+	(mips_isa_table): New.
+	(ISA_MIPS*): Redefine to match enumeration.
+	(OPCODE_IS_MEMBER): Modify to correctly test new INSN_ISA*
+	values.
+
+	opcodes/
+	* mips-opc.c (I3_32, I3_33, I4_32, I4_33, I5_33): New.
+	(mips_builtin_opcodes): Use these new I* values.
+
+2007-08-23  Nathan Sidwell  <nathan@codesourcery.com>
+
+	bfd/
+	* archures.c: Add bfd_mach_mcf_isa_c_nodiv,
+	bfd_mach_mcf_isa_c_nodiv_mac & bfd_mach_mcf_isa_c_nodiv_emac.
+	* bfd/ieee.c (ieee_write_processor): Update coldfire architecture
+	list.
+	* bfd-in2.h: Rebuilt.
+	* cpu-m68k.c (arch_info_struct): Add isa_c nodiv architectures.
+	(m68k_arch_features): Likewise.
+
+2007-08-22  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	* release-notes-csl.xml: Mention GDB support for MIPS -msoft-float
+	tags.
+
+2007-08-21  Maxim Kuvyrkov  <maxim@codesourcery.com>
+
+	Add ColdFire V1 devices.
+
+	binutils/gas
+
+	* config/tc-m68k.c (mcf51QE_ctrl): Define 51QE control registers.
+	(m68k_cpus): Define 51QE cpu.
+
+2007-08-20  Brooks Moses  <brooks@codesourcery.com>
+
+        Merged from //mirrors/binutils/trunk revision 179541.
+
+2007-08-16  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	* release-notes-csl.xml: Mention MIPS linker warnings.
+
+2007-08-16  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	ld/testsuite/
+	* ld-powerpc/attr-gnu-8-31.d, ld-powerpc/attr-gnu-8-1.s,
+	ld-powerpc/attr-gnu-8-11.d, ld-powerpc/attr-gnu-8-3.s: New.
+
+	include/elf/
+	* ppc.h (Tag_GNU_Power_ABI_Vector): New.
+
+	binutils/
+	* readelf.c (display_power_gnu_attribute): Handle
+	Tag_GNU_Power_ABI_Vector.
+
+	bfd/
+	* elf32-ppc.c (ppc_elf_merge_obj_attributes): Handle
+	Tag_GNU_Power_ABI_Vector.
+
+2007-08-11  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	bfd/
+	2007-08-11  Richard Sandiford  <richard@codesourcery.com>
+
+	* config.bfd (sh-*-vxworks): Define targ_underscore to "yes".
+
+2007-08-09  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	gas/
+	* config/tc-arm.c (relaxed_symbol_addr): Compensate for alignment.
+
+	gas/testsuite/
+	* gas/arm/relax_load_align.d: new test.
+	* gas/arm/relax_load_align.s: new test.
+
+2007-08-07  Kazu Hirata  <kazu@codesourcery.com>
+
+	Backport from mainline:
+	ld/testsuite/
+	2007-05-17  Paul Brook  <paul@codesourcery.com>
+	* ld-elf/multibss1.s: Use %nobits instead of @nobits.
+
+2007-08-03  Daniel Jacobowitz  <dan@codesourcery.com>
+
+	Backport from mainline:
+	ld/testsuite/
+	2007-08-03  Daniel Jacobowitz  <dan@codesourcery.com>
+	* ld-srec/srec.exp: XFAIL for powerpc*-*-*.
+
+2007-07-23  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	bfd/
+	2007-07-23  Richard Sandiford  <richard@codesourcery.com>
+
+	* elflink.c (_bfd_elf_fix_symbol_flags): Only assert the type
+	of weakdef->root.type if weakdef has no regular definition.
+
+	ld/testsuite/
+	2007-07-23  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-elf/weak-dyn-1a.s, ld-elf/weak-dyn-1b.s, ld-elf/weak-dyn-1.ld,
+	* ld-elf/weak-dyn-1.rd: New test.
+	* ld-elf/elf.exp: Run it.
+
+2007-07-18  Zack Weinberg  <zack@codesourcery.com>
+
+	Issue 1494
+	ld/
+	* ldlang.c (lang_check_section_addresses): Also report size of
+	overflow for any overflowed memory regions.
+	(os_region_check): Diagnose an overflowed region only once per
+	region.  Do not reset region->current on overflow. 
+
+	ld/testsuite/
+	* ld-scripts/rgn-over.exp: New driver.
+	* ld-scripts/rgn-over.s: New file.
+	* ld-scripts/rgn-over1.d, ld-scripts/rgn-over1.t
+	* ld-scripts/rgn-over2.d, ld-scripts/rgn-over2.t
+	* ld-scripts/rgn-over3.d, ld-scripts/rgn-over3.t
+	* ld-scripts/rgn-over4.d, ld-scripts/rgn-over4.t
+	* ld-scripts/rgn-over5.d, ld-scripts/rgn-over5.t
+	* ld-scripts/rgn-over6.d, ld-scripts/rgn-over6.t
+	* ld-scripts/rgn-over7.d, ld-scripts/rgn-over7.t:
+	New test cases.
+
+2007-07-13  Nathan Sidwell  <nathan@codesourcery.com>
+
+	ld/testsuite/
+	* ld-scripts/assert.t: Tweak to avoid relying on empty's VMA being
+	zero.
+
+2007-07-12  Nathan Sidwell  <nathan@codesourcery.com>
+
+	#1765
+	ld/
+	* scripttempl/pe.sc: Don't include .gcc_except_table and
+	.eh_frame on partial links.
+
+2007-07-09  Nathan Sidwell  <nathan@codesourcery.com>
+
+	Issue 1702
+	bfd/
+	* elf32-ppc.c (ppc_elf_adjust_dynamic_symbol): Don't eliminate
+	copy relocs on vxworks.
+
+2007-07-05  Kazu Hirata  <kazu@codesourcery.com>
+
+	Issue 1775
+	gas/
+	* config/m68k-parse.h (m68k_register): Use MBO instead of MBB.
+	(last_movec_reg): Change to MBO.
+	* config/tc-m68k.c (fido_ctrl): Use MBO instead of MBB.
+	(m68k_ip): Use MBO instead of MBO.
+	(init_table): Use MBO instead of MBO.  Add an entry for mbo.
+
+	gas/testsuite/
+	* gas/m68k/fido.s: Add tests for %mbo.
+	* gas/m68k/fido.d: Update accordingly.
+
+	opcodes/
+	* m68k-dis.c (print_insn_arg): Use %mbo instead of %mbb.
+
+	* release-notes-csl.xml: Add a note for the addition of %mbo.
+
+2007-07-05  Nathan Sidwell  <nathan@codesourcery.com>
+
+	* opcodes/ppc-opc (PPC7450): New.
+	(powerpc_opcodes): Use it in dcba.
+
+2007-07-04  Richard Sandiford  <richard@codesourcery.com>
+
+	gas/
+	* config/tc-mips.c (mips_cpu_info_table): Add 74kf3_2.
+	* doc/c-mips.texi: Document it.
+
+2007-07-04  Richard Sandiford  <richard@codesourcery.com>
+
+	gas/
+	* config/tc-mips.c (mips_cpu_info_table): Add new entries for
+	{24k,24ke,34k,74k}f{2_1,1_1,x}.
+	* doc/c-mips.texi: Document them.
+
+2007-07-03  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from FSF:
+
+	bfd/
+	* elf32-arm.c (elf32_arm_merge_eabi_attributes): Copy type from
+	input attributes if value has been copied.
+
+	ld/testsuite/
+	* ld-arm/attr-merge-2a.s, ld-arm/attr-merge-2b.s,
+	ld-arm/attr-merge-2.attr: New.
+	* ld-arm/arm-elf.exp (armelftests): Add new test.
+
+2007-07-02  Nathan Froyd  <froydnj@codesourcery.com>
+
+	Backport from FSF:
+
+	bfd/
+	* elf32-ppc.c (ppc_elf_info_to_howto): Check for invalid relocation
+	types.
+
+2007-07-02  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	bfd/
+	* elf32-arm.c (bfd_elf32_arm_process_before_allocation): Suppress
+	call veneers for call relocations against undefined symbols.
+	(elf32_arm_final_link_relocate): Turn call to undefined symbol
+	into a jump to the next instruction.
+
+	ld/testuite/
+	* ld-arm/arm-elf.exp (armelftests): Add callweak.
+	* ld-arm/callweak.d: New test.
+	* ld-arm/callweak.s: New test.
+
+2007-07-02  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from FSF:
+
+	bfd/
+	* elfxx-mips.c (mips_elf_calculate_relocation): Handle
+	R_MIPS_TLS_DTPREL32 and R_MIPS_TLS_DTPREL64.
+	* elf64-mips.c (mips_elf64_howto_table_rela): Support
+	R_MIPS_TLS_DTPREL64.
+
+	gas/
+	* config/tc-mips.c (s_dtprelword, s_dtpreldword,
+	s_dtprel_internal): New.
+	(mips_pseudo_table): Add .dtprelword and .dtpreldword.
+	(md_apply_fix): Handle BFD_RELOC_MIPS_TLS_DTPREL32 and
+	BFD_RELOC_MIPS_TLS_DTPREL64.
+
+2007-06-29  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from FSF:
+
+	bfd/
+	* elf32-ppc.c (ppc_elf_merge_obj_attributes): New.
+	(ppc_elf_merge_private_bfd_data): Call it.
+
+	binutils/
+	* readelf.c (display_power_gnu_attribute, process_power_specific):
+	New.
+	(process_arch_specific): Call process_power_specific.
+
+	include/elf/
+	* ppc.h (Tag_GNU_Power_ABI_FP): Define.
+
+	ld/testsuite/
+	* ld-powerpc/attr-gnu-4-0.s, ld-powerpc/attr-gnu-4-00.d,
+	ld-powerpc/attr-gnu-4-01.d, ld-powerpc/attr-gnu-4-02.d,
+	ld-powerpc/attr-gnu-4-1.s, ld-powerpc/attr-gnu-4-10.d,
+	ld-powerpc/attr-gnu-4-11.d, ld-powerpc/attr-gnu-4-12.d,
+	ld-powerpc/attr-gnu-4-13.d, ld-powerpc/attr-gnu-4-2.s,
+	ld-powerpc/attr-gnu-4-20.d, ld-powerpc/attr-gnu-4-21.d,
+	ld-powerpc/attr-gnu-4-22.d, ld-powerpc/attr-gnu-4-3.s,
+	ld-powerpc/attr-gnu-4-31.d: New.
+	* ld-powerpc/powerpc.exp: Run these new tests.
+
+2007-06-29  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from FSF:
+
+	gas/
+	* as.c (main): Only call create_obj_attrs_section if IS_ELF.
+
+2007-06-29  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from FSF:
+
+	bfd/
+	* elfxx-mips.c (mips_elf_merge_obj_attributes): New.
+	(_bfd_mips_elf_merge_private_bfd_data): Call it.
+
+	binutils/
+	* readelf.c (display_mips_gnu_attribute): New.
+	(process_mips_specific): Call process_attributes.
+
+	include/elf/
+	* mips.h (Tag_GNU_MIPS_ABI_FP): Define.
+
+	ld/testsuite/
+	* ld-mips-elf/attr-gnu-4-0.s, ld-mips-elf/attr-gnu-4-00.d,
+	ld-mips-elf/attr-gnu-4-01.d, ld-mips-elf/attr-gnu-4-02.d,
+	ld-mips-elf/attr-gnu-4-03.d, ld-mips-elf/attr-gnu-4-1.s,
+	ld-mips-elf/attr-gnu-4-10.d, ld-mips-elf/attr-gnu-4-11.d,
+	ld-mips-elf/attr-gnu-4-12.d, ld-mips-elf/attr-gnu-4-13.d,
+	ld-mips-elf/attr-gnu-4-14.d, ld-mips-elf/attr-gnu-4-2.s,
+	ld-mips-elf/attr-gnu-4-20.d, ld-mips-elf/attr-gnu-4-21.d,
+	ld-mips-elf/attr-gnu-4-22.d, ld-mips-elf/attr-gnu-4-23.d,
+	ld-mips-elf/attr-gnu-4-3.s, ld-mips-elf/attr-gnu-4-30.d,
+	ld-mips-elf/attr-gnu-4-31.d, ld-mips-elf/attr-gnu-4-32.d,
+	ld-mips-elf/attr-gnu-4-33.d, ld-mips-elf/attr-gnu-4-4.s,
+	ld-mips-elf/attr-gnu-4-41.d: New.
+	* ld-mips-elf/mips-elf.exp: Run these new tests.
+
+2007-06-29  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from FSF:
+
+	bfd/
+	* elf-attrs.c: New.
+	* Makefile.am (BFD32_BACKENDS): Add elf-attrs.lo.
+	(BFD32_BACKENDS_CFILES): Add elf-attrs.c.
+	(elf-attrs.lo): Generate dependencies.
+	* Makefile.in: Regenerate.
+	* configure.in (elf): Add elf-attrs.lo.
+	* configure: Regenerate.
+	* elf-bfd.h (struct elf_backend_data): Add entries for object
+	attributes.
+	(NUM_KNOWN_OBJ_ATTRIBUTES, obj_attribute, obj_attribute_list,
+	OBJ_ATTR_PROC, OBJ_ATTR_GNU, OBJ_ATTR_FIRST, OBJ_ATTR_LAST,
+	Tag_NULL, Tag_File, Tag_Section, Tag_Symbol, Tag_compatibility):
+	New.
+	(struct elf_obj_tdata): Add entries for object attributes.
+	(elf_known_obj_attributes, elf_other_obj_attributes,
+	elf_known_obj_attributes_proc, elf_other_obj_attributes_proc):
+	New.
+	(bfd_elf_obj_attr_size, bfd_elf_set_obj_attr_contents,
+	bfd_elf_get_obj_attr_int, bfd_elf_add_obj_attr_int,
+	bfd_elf_add_proc_attr_int, bfd_elf_add_obj_attr_string,
+	bfd_elf_add_proc_attr_string, bfd_elf_add_obj_attr_compat,
+	bfd_elf_add_proc_attr_compat, _bfd_elf_attr_strdup,
+	_bfd_elf_copy_obj_attributes, _bfd_elf_obj_attrs_arg_type,
+	_bfd_elf_parse_attributes, _bfd_elf_merge_object_attributes): New.
+	* elf.c (_bfd_elf_copy_private_bfd_data): Copy object attributes.
+	(bfd_section_from_shdr): Handle attributes sections.
+	* elflink.c (bfd_elf_final_link): Handle attributes sections.
+	* elfxx-target.h (elf_backend_obj_attrs_vendor,
+	elf_backend_obj_attrs_section, elf_backend_obj_attrs_arg_type,
+	elf_backend_obj_attrs_section_type): New.
+	(elfNN_bed): Update.
+	* elf32-arm.c (NUM_KNOWN_ATTRIBUTES, aeabi_attribute,
+	aeabi_attribute_list): Remove.
+	(struct elf32_arm_obj_tdata): Remove object attributes fields.
+	(check_use_blx, bfd_elf32_arm_set_vfp11_fix, using_thumb2,
+	elf32_arm_copy_private_bfd_data, elf32_arm_merge_eabi_attributes):
+	Update for new object attributes interfaces.
+	(uleb128_size, is_default_attr, eabi_attr_size,
+	elf32_arm_eabi_attr_size, write_uleb128, write_eabi_attribute,
+	elf32_arm_set_eabi_attr_contents, elf32_arm_bfd_final_link,
+	elf32_arm_new_eabi_attr, elf32_arm_get_eabi_attr_int,
+	elf32_arm_add_eabi_attr_int, attr_strdup,
+	elf32_arm_add_eabi_attr_string, elf32_arm_add_eabi_attr_compat,
+	copy_eabi_attributes, elf32_arm_parse_attributes): Remove.  Moved
+	to generic code in elf-attrs.c.
+	(elf32_arm_obj_attrs_arg_type): New.
+	(elf32_arm_fake_sections): Do not handle .ARM.attributes.
+	(elf32_arm_section_from_shdr): Do not handle SHT_ARM_ATTRIBUTES.
+	(bfd_elf32_bfd_final_link): Remove.
+	(elf_backend_obj_attrs_vendor, elf_backend_obj_attrs_section,
+	elf_backend_obj_attrs_arg_type,
+	elf_backend_obj_attrs_section_type): New.
+	* elf32-bfin.c (bfin_elf_copy_private_bfd_data): Copy object
+	attributes.
+	* elf32-frv.c (frv_elf_copy_private_bfd_data): Likewise.
+	* elf32-iq2000.c (iq2000_elf_copy_private_bfd_data): Likewise.
+	* elf32-mep.c (mep_elf_copy_private_bfd_data): Likewise.
+	* elf32-mt.c (mt_elf_copy_private_bfd_data): Likewise.
+	* elf32-sh.c (sh_elf_copy_private_data): Likewise.
+	* elf64-sh64.c (sh_elf64_copy_private_data_internal): Likewise.
+
+	binutils/
+	* readelf.c (display_gnu_attribute): New.
+	(process_arm_specific): Rearrange as process_attributes.
+	(process_arm_specific): Replace by wrapper of process_attributes.
+
+	gas/
+	* as.c (create_obj_attrs_section): New.
+	(main): Call create_obj_attrs_section for ELF.
+	* read.c (s_gnu_attribute, skip_whitespace, skip_past_char,
+	skip_past_comma, s_vendor_attribute): New.
+	(potable): Add gnu_attribute for ELF.
+	* read.h (s_vendor_attribute): Declare.
+	* config/tc-arm.c (s_arm_eabi_attribute): Replace by wrapper
+	round s_vendor_attribute.
+	(aeabi_set_public_attributes): Update for new attributes
+	interfaces.
+	(arm_md_end): Remove attributes contents setting now done
+	generically.
+
+	include/elf/
+	* arm.h (elf32_arm_add_eabi_attr_int,
+	elf32_arm_add_eabi_attr_string, elf32_arm_add_eabi_attr_compat,
+	elf32_arm_get_eabi_attr_int, elf32_arm_set_eabi_attr_contents,
+	elf32_arm_eabi_attr_size, Tag_NULL, Tag_File, Tag_Section,
+	Tag_Symbol, Tag_compatibility): Remove.
+	* common.h (SHT_GNU_ATTRIBUTES): Define.
+
+	ld/
+	* emulparams/armelf.sh (OTHER_SECTIONS): Remove .ARM.attributes.
+	(ATTRS_SECTIONS): Define.
+	* scripttempl/elf.sc, scripttempl/elf32sh-symbian.sc,
+	scripttempl/elf_chaos.sc, scripttempl/elfi370.sc,
+	scripttempl/elfxtensa.sc: Handle ATTRS_SECTIONS.
+
+2007-06-26  Paul Brook  <paul@codesourcery.com>
+
+	gas/
+	* config/tc-arm.c (parse_operands): Accept generic coprocessor regs
+	for OP_RVC.
+	(reg_names): Add fpinst, pfinst2, mvfr0 and mvfr1.
+
+	gas/testsuite/
+	* gas/arm/vfp1xD.d: Add new fmrx/fmxr tests.
+	* gas/arm/vfp1xD.s: Ditto.
+	* gas/arm/vfp1xD_t2.d: Ditto.
+	* gas/arm/vfp1xD_t2.s: Ditto.
+
+	opcodes/
+	* arm-dis.c (coprocessor_opcodes): Add fmxr/fmrx mvfr0/mvfr1.
+
+2007-06-26  Joseph Myers  <joseph@codesourcery.com>
+
+	* release-notes-csl.xml: Add release notes for attribute merging
+	fix.
+
+2007-06-26  Joseph Myers  <joseph@codesourcery.com>
+
+	bfd/
+	* elf32-arm.c (copy_eabi_attributes): Copy type of attributes.
+
+	ld/testsuite/
+	* ld-arm/attr-merge.s, ld-arm/attr-merge.attr: New.
+	* ld-arm/arm-elf.exp (armelftests): Add new test.
+
+2007-06-25  Paul Brook  <paul@codesourcery.com>
+
+	gas/
+	* config/tc-arm.c (do_t_mov_cmp): Handle shift by register and
+	narrow shift by immediate.
+
+	gas/testsuite/
+	* gas/arm/thumb32.s: Add tests for shift instructions.
+	* gas/arm/thumb32.d: Ditto.
+
+2007-06-25  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	bfd/
+	2007-06-25  Richard Sandiford  <richard@codesourcery.com>
+
+	* elfxx-mips.c (mips_elf_calculate_relocation): Allow local stubs
+	to be used for calls from MIPS16 code.
+
+	gas/
+	2007-06-25  Richard Sandiford  <richard@codesourcery.com>
+
+	* config/tc-mips.h (TC_SYMFIELD_TYPE): New.
+	* config/tc-mips.c (append_insn): Record which symbols have
+	R_MIPS16_26 relocations against them.
+	(mips_fix_adjustable): Don't reduce relocations against such symbols.
+
+	ld/testsuite/
+	2007-06-25  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-mips-elf/mips16-local-stubs-1.s,
+	* ld-mips-elf/mips16-local-stubs-1.d: New tests.
+	* ld-mips-elf/mips-elf.exp: Run them.
+
+2007-06-18  Nathan Sidwell  <nathan@codesourcery.com>
+
+	Bug 1722
+	gas/testsuite/
+	* gas/m68k/mcf-coproc.d: New.
+	* gas/m68k/mcf-coproc.s: New.
+	* gas/m68k/all.exp: Add it.
+
+	gas/
+	* config/tc-m68k.c (m68k_ip): Add j & K operand types.
+	(install_operand): Add E encoding.
+	(md_begin): Check and skip initial '.' arg character.
+	(get_num): Add 0..511 case.
+
+	include/
+	* opcode/m68k.h: Document j K & E.
+
+	opcodes/
+	* m68k-dis.c (fetch_arg): Add E.  Replace length switch with
+	direct masking.
+	(print_ins_arg): Add j & K operand types.
+	(match_insn_m68k): Check and skip initial '.' arg character.
+	(m68k_scan_mask): Likewise.
+	* m68k-opc.c (m68k_opcodes): Add coprocessor instructions.
+
+2007-06-14  Nathan Sidwell  <nathan@codesourcery.com>
+
+	gas/
+	* config/tc-m68k.c (mcf52235_ctrl): Add cache registers.
+	(mcf5253_ctrl): Add RAMBAR, MBAR, MBAR2.
+	(mcf5407_ctrl): New.
+	(m68k_cpus): Adjust 5407 entry.
+
+2007-06-13  Joseph Myers  <joseph@codesourcery.com>
+
+	ld/
+	* config.in: Regenerate.
+	* ld.h (args_type): Add poison_system_directories.
+	* ld.texinfo (--no-poison-system-directories): Document.
+	* ldfile.c (ldfile_add_library_path): Check
+	command_line.poison_system_directories.
+	* ldmain.c (main): Initialize
+	command_line.poison_system_directories.
+	* lexsup.c (enum option_values): Add
+	OPTION_NO_POISON_SYSTEM_DIRECTORIES.
+	(ld_options): Add --no-poison-system-directories.
+	(parse_args): Handle new option.
+
+2007-06-13  Nathan Sidwell  <nathan@codesourcery.com>
+
+	ld/
+	* ldexp.c (foldname): ALIGNOF should not be divided by opb.
+
+2007-06-11  Julian Brown  <julian@codesourcery.com>
+
+	bfd/
+	* elf32-arm.c (bfd_elf32_arm_vfp11_erratum_scan): Skip BFDs with
+	EXEC_P or DYNAMIC flags, and skip sections which are being linked
+	with --just-symbols (-R).
+
+2007-06-11  Nathan Sidwell  <nathan@codesourcery.com>
+
+	binutils/
+	* dwarf.c (decode_location_expression): Add DW_OP_form_tls_address.
+
+	ld/
+	* ldlex.l, ldgram.y: Add ALIGNOF.
+	* ldexp.c (exp_print_token, foldname): Likewise.
+	* ld.texinfo: Likewise.
+
+	ld/testsuite/
+	* ld-scripts/alignof.s: New.
+	* ld-scripts/alignof.t: New
+	* ld-scripts/alignof.exp: New.
+
+2007-06-06  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	gas/
+	* config/tc-arm.c (s_align): Pad code sections appropriately.
+
+	gas/testsuite/
+	* gas/arm/thumb.d: Update expected output.
+	* gas/arm/thumb2_relax.d: Ditto.
+
+2007-06-06  Joseph Myers  <joseph@codesourcery.com>
+            Paul Brook  <paul@codesourcery.com>
+
+	gas/
+	* remap.c: New.
+	* as.h (remap_debug_filename, add_debug_prefix_map): Declare.
+	* as.c (show_usage): Document --debug-prefix-map option.
+	(parse_args): Handle --debug-prefix-map.
+	* dwarf2dbg.c (out_file_list, out_debug_info): Remap debug paths.
+	* stabs.c (stabs_generate_asm_file): Remap debug paths.
+	* Makefile.am (GAS_CFILES): Add remap.c
+	(GENERIC_OBJS): Add remap.o.
+	* Makefile.in: Regenerate.
+	* doc/as.texinfo (--debug-prefix-map): Document.
+
+2007-06-05  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	gas/
+	* config/tc-arm.c (insns): Correct Thumb-2 ldrd/strd opcodes.
+
+	gas/testsuite/
+	* gas/arm/thumb32.d: Add writeback addressing mode tests.
+	* gas/arm/thumb32.s: Update expected output.
+
+	opcodes/
+	* arm-dis.c (thumb32_opcodes): Display writeback ldrd/strd addresses.
+
+2007-06-04  Joseph Myers  <joseph@codesourcery.com>
+
+	bfd/
+	* elflink.c (bfd_elf_link_record_dynamic_symbol): Do not set
+	dynindx for indirect symbols.
+
+2007-05-31  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	gas/
+	* config/tc-arm.c (insns): Allow strex on M profile cores.
+
+2007-05-27  Nathan Sidwell  <nathan@codesourcery.com>
+
+	Bug 1652
+	gas/
+	* app.c (do_scrub_chars): Cope with \ at end of buffer.
+	
+	* release-notes-csl.xml: Document fix.
+
+2007-03-25  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	gas/
+	* config/tc-arm.c (T2_SUBS_PC_LR): Define.
+	(do_t_add_sub): Correctly encode subs pc, lr, #const.
+	(do_t_mov_cmp): Correctly encode movs pc, lr.
+
+	gas/testsulte/
+	* gas/arm/thumb32.s: Add tests for subs pc, lr.
+	* gas/arm/thumb32.d: Change error-output: to stderr:.
+	Update expected output.
+
+2007-05-24  Nathan Sidwell  <nathan@codesourcery.com>
+
+	ld/
+	* ldlex.l: ASSERT is recognized in SCRIPT env.  NAMES cannot
+	contain commas in EXP env.
+	* ldgram.y (extern_name_list): Push to EXP env, move body to ...
+	(extern_name_list_body): ... here.
+	(script_file, ifile_list): Reformat.
+	(statement): Add ASSERT.
+
+	ld/testsuite/
+	* ld/ld-scripts/assert.t: Add additional cases.
+	* ld-scripts/extern.t, ld-scripts/extern.s,
+	ld-scripts/extern.exp: New.
+
+2007-05-22  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	ld/testsuite/
+	* ld-arm/arm-pic-veneer.d: Update expected output.
+	* ld-arm/arm-call.d: Ditto.
+
+	bfd/
+	* elf32-arm.c (output_arch_syminfo): Replace plt_shndx and plt_offset
+	with sec and sec_shndx.
+	(elf32_arm_ouput_plt_map_sym): Use them.
+	(elf32_arm_output_arch_local_syms): Output mapping symbols for
+	interworking glue.
+
+2007-05-22  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF.
+	bunutils/
+	* objdump.c (find_symbol_for_address): Merge section and target
+	specific filtering code.
+
+	ld/testsuite/
+	* ld-arm-mixed-lib.d: Update expected output.
+	* ld-arm/arm-app.d: Ditto.
+	* ld-arm/mixed-app.d: Ditto.
+	* ld-arm/arm-lib-plt32.d: Ditto.
+	* ld-arm/arm-app-abs32.d: Ditto.
+	* ld-arm/mixed-app-v5.d: Ditto.
+	* ld-arm/armthumb-lib.d: Ditto.
+	* ld-arm/arm-lib.d: Ditto.
+
+	gas/testsuite/
+	* gas/arm/backslash-at.d: Update expected output.
+
+2007-05-21  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	binutils/
+	2007-05-21  Richard Sandiford  <richard@codesourcery.com>
+
+	* objdump.c (disassemble_bytes): Ignore disassembler_needs_relocs
+	for executables and shared libraries.
+
+	ld/testsuite/
+	2007-05-21  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-arm/emit-relocs1.d, ld-arm/emit-relocs1.s,
+	* ld-arm/emit-relocs1-vxworks.d: New tests.
+	* ld-arm/arm-elf.exp: Run them.
+	* ld-arm/vxworks1.dd: Expect proper branch targets.
+
+2007-05-18  Nathan Sidwell  <nathan@codesourcery.com>
+
+	gas/
+	* config/tc-m68k.c (LONG_BRANCH_VIA_COND): New.
+	(BRANCHBWPL, FRAG_VAR_SIZE): New.
+	(md_relax_table): Add BRANCHBWPL entries.
+	(m68k_ip): Choose BRANCHBWPL relaxation if necessary.
+	(md_assemble): Use FRAG_VAR_SIZE.
+	(md_convert_frag_1): Add BRANCHBWPL cases.
+	(md_estimate_size_before_relaz): Likewise.
+
+	gas/testsuite/
+	* gas/m68k/br-isaa.d: Dump relocs too.
+	* gas/m68k/br-isab.d: Likewise.
+	* gas/m68k/br-isac.d: Likewise.  Adjust for long branch relaxation.
+
+2007-05-18  Joseph Myers  <joseph@codesourcery.com>
+
+	* release-notes-csl.xml: Add release notes for .set change.
+
+2007-05-18  Joseph Myers  <joseph@codesourcery.com>
+
+	ld/testsuite/
+	* ld-elf/group.ld: Discard .reginfo.
+
+2007-05-18  Joseph Myers  <joseph@codesourcery.com>
+
+	gas/
+	* config/tc-mips.c (s_mipsset): Use generic s_set for directives
+	containing a comma.
+
+2007-05-18  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	ld/
+	2007-05-18  Richard Sandiford  <richard@codesourcery.com>
+
+	* emulparams/elf32ebmipvxworks.sh (OTHER_READONLY_SECTIONS)
+	(OTHER_READWRITE_SECTIONS): Define.  Add .rdata sections.
+
+2007-05-18  Paul Brook  <paul@codesourcery.com>
+
+	Backport from FSF:
+	bfd/
+	* elf32-arm.c (ARM2THUMB_V5_STATIC_GLUE_SIZE): Define.
+	(a2t1v5_ldr_insn, a2t1v5_ldr_insn): New.
+	(record_arm_to_thumb_glue): Add v5t non-pic glue.
+	(elf32_arm_create_thumb_stub): Ditto.
+
+	ld/testsuite/
+	* ld-arm/arm-call.d: Update expected output.
+
+2007-05-16  Paul Brook  <paul@codesourcery.com>
+
+	bfd/
+	* elf32-arm.c (elf32_arm_link_hash_entry): Add
+	plt_maybe_thumb_refcount.
+	(elf32_arm_link_hash_newfunc): Set plt_maybe_thumb_refcount.
+	(elf32_arm_copy_indirect_symbol): Ditto.
+	(elf32_arm_adjust_dynamic_symbol): Ditto.
+	(bfd_elf32_arm_process_before_allocation): Handle R_ARM_THM_JUMP24.
+	(arm_add_to_rel): Ditto.
+	(elf32_arm_final_link_relocate): Merge R_ARM_THM_JUMP24 with
+	R_ARM_THM_CALL.  Handle R_ARM_THM_JUMP19 against a PLT stub.
+	(elf32_arm_gc_sweep_hook): Call check_use_blx.  Update plt counts
+	for R_ARM_THM_JUMP24 and R_ARM_THM_JUMP19.
+	(elf32_arm_check_relocs): Update plt counts for R_ARM_THM_JUMP24
+	and R_ARM_THM_JUMP19.  
+	(allocate_dynrelocs): Use plt_maybe_thumb_refcount.
+	(elf32_arm_finish_dynamic_symbol): Ditto.
+	(elf32_arm_output_plt_map): Ditto.
+
+2007-05-16  Paul Brook  <paul@codesourcery.com>
+
+	* config/tc-arm.c (v7m_psrs): Add uppercase PSR names and xpsr.
+
+2007-05-16  Joseph Myers  <joseph@codesourcery.com>
+
+	binutils/testsuite/
+	* binutils-all/strip-3.d: Strip .pdr section.
+
+2007-05-16  Nathan Sidwell  <nathan@codesourcery.com>
+
+	ld/testsuite/
+	* ld-m68k-merge-error-1a.d: Mismatch is an error.
+	* ld-m68k-merge-error-1b.d: Likewise.
+	* ld-m68k-merge-error-1c.d: Likewise.
+	* ld-m68k-merge-error-1d.d: Likewise.
+	* ld-m68k-merge-error-1e.d: Likewise.
+
+	gas/
+	* config/tc-m68k.c (md_apply_fix): Show value of out of range
+	fixups in error message.
+	(md_conver_frag_1): Propagate the fix source location and use
+	as_bad_where rather than fatal, for better error messages.
+
+2007-05-15  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	ld/testsuite/
+	2007-05-15  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-arm/vxworks1.ld: Swap .bss and .data.
+	* ld-arm/vxworks1-lib.rd: Update accordingly.
+	* ld-arm/vxworks1-lib.td: New test.
+	* ld-arm/arm-elf.exp: Run it.
+
+	* ld-i386/vxworks1.ld: Swap .bss and .data.
+	* ld-i386/vxworks1-lib.rd: Update accordingly.
+	* ld-i386/vxworks1-lib.td: New test.
+	* ld-i386/i386.exp: Run it.
+
+	* ld-mips-elf/vxworks1.ld: Swap .bss and .data.
+	* ld-mips-elf/vxworks1-lib.rd: Update accordingly.
+	* ld-mips-elf/vxworks1.rd: Likewise.
+
+	* ld-powerpc/vxworks1.ld: Swap .bss and .data.
+	* ld-powerpc/vxworks1-lib.rd: Update accordingly.
+	* ld-powerpc/vxworks1-lib.td: New test.
+	* ld-powerpc/powerpc.exp: Run it.
+
+	* ld-sh/vxworks1.ld: Swap .bss and .data.
+	* ld-sh/vxworks1-lib.rd: Update accordingly.
+	* ld-sh/vxworks1-lib.td: New test.
+	* ld-sh/sh-vxworks.exp: Run it.
+
+	* ld-sparc/vxworks1.ld: Swap .bss and .data.
+	* ld-sparc/vxworks1-lib.rd: Update accordingly.
+	* ld-sparc/vxworks1-lib.td: New test.
+	* ld-sparc/sparc.exp: Run it.
+
+2007-05-15  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	bfd/
+	2007-05-15  Richard Sandiford  <richard@codesourcery.com>
+
+	* elfxx-mips.c (mips_elf_create_local_got_entry): Remove
+	input_section argument.  Create .rela.dyn relocations against
+	symbol 0 rather than the section symbol.
+	(mips_elf_local_got_index): Remove input_section argument.
+	Update call to mips_elf_create_local_got_entry.
+	(mips_elf_got_page, mips_elf_got16_entry): Likewise.
+	(mips_elf_calculate_relocation): Update calls to
+	mips_elf_local_got_index, mips_elf_got16_entry and mips_elf_got_page.
+
+	ld/testsuite/
+	2007-05-15  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-mips-elf/vxworks1-lib.rd: Expect the GOT relocation to be
+	against symbol 0.
+
+2007-05-14  Richard Sandiford  <richard@codesourcery.com>
+
+	bfd/
+	* coff-rs6000.c (rs6000coff_vec, pmac_xcoff_vec): Initialize
+	_bfd_copy_link_hash_symbol_type.
+
+2007-05-14  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from mainline:
+	bfd/
+	2007-05-12  Alan Modra  <amodra@bigpond.net.au>
+	PR 4497
+	* elf-eh-frame.c (struct cie): Add "local_personality".  Make
+	"personality" a union.
+	(cie_eq): Compare local_personality too.  Adjust personality
+	comparison.
+	(_bfd_elf_discard_section_eh_frame): Check binding on personality
+	reloc sym to allow for bad symtab.  Use stashed local syms rather
+	than reading personality local sym.  Handle discarded sections.
+
+2007-05-14  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	ld/testsuite/
+	2007-05-14  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-sh/vxworks1.dd: Remove hexadecimal prefixes from constant pool
+	contents.  Consistently use "!" as the comment character.
+	Consistently use _PROCEDURE_LINKAGE_TABLE_ in the first PLT entry.
+	* ld-sh/vxworks1-le.dd: Likewise.
+	* ld-sh/vxworks1-lib.dd: Likewise.
+	* ld-sh/vxworks1-lib-le.dd: Likewise.
+	* ld-sh/vxworks3.dd: Likewise.
+	* ld-sh/vxworks3-le.dd: Likewise.
+
+2007-05-11  Paul Brook  <paul@codesourcery.com>
+
+	ld/
+	* ldexp.c (exp_fold_tree_1): Copy symbol type for simple
+	assignments.
+
+	ld/testsuite/
+	* ld-arm/script-type.s: New test.
+	* ld-arm/arm-elf.exp: New test.
+	* ld-arm/script-type.ld: New test.
+
+	bfd/
+	* elf-bfd.h (_bfd_elf_copy_link_hash_symbol_type): Add prototype.
+	* libbfd-in.h (_bfd_generic_copy_link_hash_symbol_type): Add
+	prototype.
+	* elflink.c (_bfd_elf_copy_link_hash_symbol_type): New function.
+	* linker.c (_bfd_generic_copy_link_hash_symbol_type): New
+	function.
+	* targets.c (BFD_JUMP_TABLE_LINK, struct bfd_target): Add
+	_copy_link_hash_symbol_type.
+	* aout-adobe.c (aout_32_bfd_copy_link_hash_symbol_type): Define.
+	* aout-target.h (MY_bfd_copy_link_hash_symbol_type): Define.
+	* aout-tic30.c (MY_bfd_copy_link_hash_symbol_type): Define.
+	* binary.c (binary_bfd_copy_link_hash_symbol_type): Define.
+	* bout.c (b_out_bfd_copy_link_hash_symbol_type): Define.
+	* coffcode.h (coff_bfd_copy_link_hash_symbol_type): Define.
+	* elfxx-target.h (bfd_elfNN_bfd_copy_link_hash_symbol_type): Define.
+	* i386msdos.c (msdos_bfd_copy_link_hash_symbol_type): Define.
+	* i386os9k.c (os9k_bfd_copy_link_hash_symbol_type): Define.
+	* ieee.c (ieee_bfd_copy_link_hash_symbol_type): Define.
+	* ihex.c (ihex_bfd_copy_link_hash_symbol_type): Define.
+	* libecoff.h (_bfd_ecoff_bfd_copy_link_hash_symbol_type): Define.
+	* mach-o.c (bfd_mach_o_bfd_copy_link_hash_symbol_type): Define.
+	* mmo.c (mmo_bfd_copy_link_hash_symbol_type): Define.
+	* nlm-target.h (nlm_bfd_copy_link_hash_symbol_type): Define.
+	* oasys.c (oasys_bfd_copy_link_hash_symbol_type): Define.
+	* pef.c (bfd_pef_bfd_copy_link_hash_symbol_type): Define.
+	* ppcboot.c (ppcboot_bfd_copy_link_hash_symbol_type): Define.
+	* som.c (som_bfd_copy_link_hash_symbol_type): Define.
+	* srec.c (srec_bfd_copy_link_hash_symbol_type): Define.
+	* tekhex.c (tekhex_bfd_copy_link_hash_symbol_type): Define.
+	* versados.c (versados_bfd_copy_link_hash_symbol_type): Define.
+	* vms.c (vms_bfd_copy_link_hash_symbol_type): Define.
+	* xsym.c (bfd_sym_bfd_copy_link_hash_symbol_type): Define.
+	* bfd-in2.h: Regenerate.
+	* libbfd.h: Regenerate.
+
+2007-05-11  Joseph Myers  <joseph@codesourcery.com>
+
+	Backport from mainline:
+	gas/
+	2007-04-30  Alan Modra  <amodra@bigpond.net.au>
+	PR 4436
+	* config/tc-ppc.c (ppc_insert_operand): Disable range check if
+	min > max.
+
+	opcodes/
+	2007-04-30  Alan Modra  <amodra@bigpond.net.au>
+	PR 4436
+	* ppc-opc.c (powerpc_operands): Correct bitm for second entry of MBE.
+
+	gas/
+	2007-05-02  Alan Modra  <amodra@bigpond.net.au>
+	PR 4448
+	* config/tc-ppc.c (ppc_insert_operand): Don't increase min for
+	PPC_OPERAND_PLUS1.
+
+	include/opcode/
+	2007-05-02  Alan Modra  <amodra@bigpond.net.au>
+	* ppc.h (PPC_OPERAND_PLUS1): Update comment.
+
+2007-05-10  Carlos O'Donell  <carlos@codesourcery.com>
+
+	* Makefile.tpl: Add install-pdf to install target deps.
+	* Makefile.in: Regenerate.
+
+2007-05-10  Carlos O'Donell  <carlos@codesourcery.com>
+
+	bfd/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am 
+	and install-pdf-recursive targets. Define pdfdir.
+	* doc/Makefile.am: Define pdf__strip_dir. Add
+	install-pdf and install-pdf-am targets.
+	* po/Make-in: Add install-pdf target. 
+	* configure: Regenerate.
+	* Makefile.in: Regenerate
+	* doc/Makefile.in: Regenerate.
+
+	binutils/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets.
+	* doc/Makefile.am: Define pdf__strip_dir. Add
+	install-pdf and install-pdf-am targets.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+	* doc/Makefile.in: Regenerate.
+
+	etc/
+	* configure.in: ACSUBST pdfdir.
+	* configure: Regenerate.
+
+	opcodes/
+	* Makefile.am: Add install-pdf target.
+	* po/Make-in: Add install-pdf target.
+	* Makefile.in: Regenerate.
+
+	gas/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets.
+	* doc/Makefile.am: Define pdf__strip_dir. Add
+	install-pdf and install-pdf-am targets.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+	* doc/Makefile.in: Regenerate.
+
+	gprof/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets. Define pdf__strip_dir.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+
+	ld/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets. Define pdf__strip_dir.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+
+2007-05-10  Kazu Hirata  <kazu@codesourcery.com>
+
+	Issue 1569
+	Backport from mainline:
+	bfd/
+	2007-05-11  Alan Modra  <amodra@bigpond.net.au>
+	PR 4454
+	* elf-eh-frame.c (struct cie): Make "personality" a bfd_vma.
+	(_bfd_elf_discard_section_eh_frame): Handle local syms on
+	personality relocation.
+
+2007-05-10  Nathan Sidwell  <nathan@codesourcery.com>
+
+	* Makefile.tpl: Add install-pdf to install target deps.
+	* Makefile.in: Regenerate.
+
+2007-05-10  Carlos O'Donell  <carlos@codesourcery.com>
+
+	bfd/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am 
+	and install-pdf-recursive targets. Define pdfdir.
+	* doc/Makefile.am: Define pdf__strip_dir. Add
+	install-pdf and install-pdf-am targets.
+	* po/Make-in: Add install-pdf target. 
+	* configure: Regenerate.
+	* Makefile.in: Regenerate
+	* doc/Makefile.in: Regenerate.
+
+	binutils/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets.
+	* doc/Makefile.am: Define pdf__strip_dir. Add
+	install-pdf and install-pdf-am targets.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+	* doc/Makefile.in: Regenerate.
+
+	etc/
+	* configure.in: ACSUBST pdfdir.
+	* configure: Regenerate.
+
+	opcodes/
+	* Makefile.am: Add install-pdf target.
+	* po/Make-in: Add install-pdf target.
+	* Makefile.in: Regenerate.
+
+	gas/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets.
+	* doc/Makefile.am: Define pdf__strip_dir. Add
+	install-pdf and install-pdf-am targets.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+	* doc/Makefile.in: Regenerate.
+
+	gprof/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets. Define pdf__strip_dir.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+
+	ld/
+	* configure.in: ACSUBST pdfdir.
+	* Makefile.am: Add install-pdf, install-pdf-am,
+	and install-pdf-recursive targets. Define pdf__strip_dir.
+	* po/Make-in: Add install-pdf target.
+	* configure: Regenerate.
+	* Makefile.in: Regenerate.
+
+2007-05-10  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	bfd/
+	2007-05-10  Richard Sandiford  <richard@codesourcery.com>
+
+	* elf32-arm.c (elf32_arm_check_relocs): Don't create PLT entries
+	for R_ARM_ABS12 relocs.
+	(elf32_arm_finish_dynamic_symbol): Fix the loop that creates
+	non-shared VxWorks PLT entries.
+
+	ld/testsuite/
+	2007-05-10  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-arm/vxworks1-lib.dd: Expect "push" instead of stmdb and
+	"pop" instead of ldmia.  Don't require specific symbolic addresses
+	for in-text addresses.  Expect data to be rendered as .words rather
+	than disassembled.
+	* ld-arm/vxworks1.dd: Likewise.
+
+2007-05-10  Richard Sandiford  <richard@codesourcery.com>
+
+	Backport from mainline:
+
+	bfd/
+	2007-05-10  Richard Sandiford  <richard@codesourcery.com>
+
+	* elf.c (assign_file_positions_for_load_sections): Use p_memsz
+	rather than p_filesz to calculate the LMA of the end of a segment.
+
+	ld/testsuite/
+	2007-05-10  Richard Sandiford  <richard@codesourcery.com>
+
+	* ld-elf/multibss1.d, ld-elf/multibss1.s: New test.
+
+2007-05-10  Kazu Hirata  <kazu@codesourcery.com>
+
+	Issue 1569
+	Backport from mainline:
+	bfd/
+	2007-05-11  Alan Modra  <amodra@bigpond.net.au>
+	PR 4454
+	* elf-eh-frame.c (struct cie): Make "personality" a bfd_vma.
+	(_bfd_elf_discard_section_eh_frame): Handle local syms on
+	personality relocation.
+
+2007-05-09  Nathan Sidwell  <nathan@codesourcery.com>
+
+	* release-notes-csl.xml: Document fix.
+
+	opcodes/
+	* m68k-opc.c (m68k_opcodes): Add wdebugl variants.
+
+2007-05-09  Kazu Hirata  <kazu@codesourcery.com>
+
+	* release-notes-csl.xml: Insert a blank line before the first
+	release note fragment.
+
+2007-05-04  Mark Shinwell  <shinwell@codesourcery.com>
+
+	* release-notes-csl.xml (ARM EABI compliance): New.
+
+	gas/
+	* config/te-armeabi.h (EABI_DEFAULT): Use EF_ARM_EABI_VER5.
+	* config/te-armlinuxeabi.h (EABI_DEFAULT): Likewise.
+
+2007-05-04  Kazu Hirata  <kazu@codesourcery.com>
+
+	Backport from mainline:
+	gas/testsuite/
+	* gas/m68k/all.exp: Skip fmoveml on fido.
+
+2007-05-04  Mark Shinwell  <shinwell@codesourcery.com>
+
+	binutils/testsuite/
+	* binutils-all/strip-3.d: Strip .ARM.attributes section.
+
+2007-05-04  Mark Shinwell  <shinwell@codesourcery.com>
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-04-20  Mark Shinwell  <shinwell@codesourcery.com>
+
+	* release-notes-csl.xml (Conditional Thumb-2 branch
+	instructions): New.
+
+	bfd/
+	* elf32-arm.c (elf32_arm_final_link_relocate): Correctly
+	handle the Thumb-2 JUMP19 relocation.
+
+	ld/testsuite/
+	* ld-arm/arm-elf.exp: Add jump19 testcase.
+	* ld-arm/jump19.d: New.
+	* ld-arm/jump19.s: New.
+
+2007-05-04  Mark Shinwell  <shinwell@codesourcery.com>
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-04-20  Mark Shinwell  <shinwell@codesourcery.com>
+ 
+	* release-notes-csl.xml (Linking of non-ELF images): New.
+
+	bfd/
+	* elf32-arm.c (bfd_elf32_arm_vfp11_erratum_scan): Don't
+	attempt to scan if the bfd doesn't correspond to an ELF image.
+	(bfd_elf32_arm_vfp11_fix_veneer_locations): Likewise.
+
+2007-05-03  Mark Shinwell  <shinwell@codesourcery.com>
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-04-27  Mark Shinwell  <shinwell@codesourcery.com>
+
+	gas/
+	* config/tc-arm.c (md_apply_fix): Generate more accurate
+	diagnostic when 8-bit immediate range is exceeded for
+	BFD_RELOC_ARM_OFFSET_IMM8.
+
+2007-05-03  Sandra Loosemore  <sandra@codesourcery.com>
+
+	bfd/
+	* elf32-arm.c (allocate_dynrelocs): Fix typo in comment.
+
+2007-05-03  Paul Brook  <paul@codesourcery.com>
+
+	Merge from CSL-2.17 branch.
+	2007-04-17  Paul Brook  <paul@codesourcery.com>
+	gas/
+	* config/tc-arm.c (arm_ext_msr): New variable.
+	(md_assemble): Allow v6-M 32-bit instructions without requiring
+	Thumb-2.
+	(insns): Use arm_ext_msr for Thumb MSR and MRS.
+	(cpu_arch): Add V6M. Fix numbering of V6K and V6T2.
+	gas/testsuite/
+	* gas/arm/archv6m.d: New test.
+	* gas/arm/archv6m.s: New test.
+	include/opcode/
+	* arm.h (ARM_EXT_THUMB_MSR): Define.
+	(ARM_AEXT_V6T2, ARM_AEXT_V6M): Use it.
+
+	2006-12-15  Paul Brook  <paul@codesourcery.com>
+	gas/
+	* config/tc-arm.c (arm_ext_barrier, arm_ext_m): New.
+	(do_t_mrs): Use arm_ext_m.
+	(insns): Allow dmb, dsb and isb on ARMv6-M.
+	(arm_cpu_option_table): Add cortex-m1.
+	(arm_arch_option_table): Add armv6-m.
+	(aeabi_set_public_attributes): Use arm_ext_m.
+	include/
+	* opcode/arm.h (ARM_EXT_V6M, ARM_EXT_BARRIER, ARM_AEXT_V6M,
+	ARM_ARCH_V6M): Define.
+	(ARM_AEXT_V7_ARM, ARM_AEXT_V7M): Include ARM_EXT_BARRIER.
+
+2007-04-27  Mark Shinwell  <shinwell@codesourcery.com>
+
+	* release-notes-csl.xml (The \@ assembler pseudo-variable):
+	New.
+
+	gas/
+	* app.c (do_scrub_chars): Don't damage \@ pseudo-variables.
+
+	gas/testsuite/
+	* gas/arm/backslash-at.d: New.
+	* gas/arm/backslash-at.s: New.
+
+2007-04-25  Mark Mitchell  <mark@codesourcery.com>
+
+	libiberty/
+	* cygpath.c (<process.h>): Include it.
+	(cygpath_log): New variable.
+	(cygpath_log_msg_arg): New function.
+	(cygpath_log_msg): Likewise.
+	(cygpath_perror): Likewise.
+	(cygpath_close): Declare as prototyped function.  Close the log
+	file.
+	(cygpath): Log interaction with cygpath.  If cygpath dies
+	unexpectedly, restart it.
+	(set_errno_from_windows_code): Avoid signed/unsigned comparison.
+
+2007-04-23  Joseph Myers  <joseph@codesourcery.com>
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-01-24  Joseph Myers  <joseph@codesourcery.com>
+	bfd/
+	* config.bfd (mips*el-*-linux*, mips*-*-linux*): Remove
+	ecoff_little_vec and ecoff_big_vec.
+
+2007-04-23  Sandra Loosemore  <sandra@codesourcery.com>
+
+	* release-notes-csl.xml (Binutils update): New.
+
+2007-04-23  Richard Sandiford  <richard@codesourcery.com>
+
+	gas/testsuite/
+	* gas/mips/ulh3.s, gas/mips/ulh3-el.d, gas/mips/ulh3-eb.d,
+	* gas/mips/octeon1.s, gas/mips/octeon1.l, gas/mips/octeon2.s,
+	* gas/mips/octeon2-un.d, gas/mips/octeon2-noun.d,
+	* gas/mips/octeon2-mix.d, gas/mips/octeon3.s,
+	* gas/mips/octeon3.d: New tests.
+	* gas/mips/mips.exp: Run them.  Don't run ulh2 on mips32r2 targets.
+
+2007-04-23  Richard Sandiford  <richard@codesourcery.com>
+
+	Adapted from a patch by Cavium Networks.
+
+	include/elf/
+	* mips.h (E_MIPS_MACH_OCTEON): New macro.
+
+	include/opcode/
+	* mips.h: Document '^', ';' and 'y'.
+	(OP_MASK_BITIND, OP_SH_BITIND): New macros.
+	(INSN_OCTEON, CPU_OCTEON): Likewise.
+	(OPCODE_IS_MEMBER): Handle CPU_OCTEON.
+
+	bfd/
+	* archures.c (bfd_mach_mips_octeon): Define.
+	* bfd-in2.h: Regenerate.
+	* cpu-mips.c (I_mipsocteon): Define.
+	(arch_info_struct): Add a "mips:octeon" entry.
+	* elfxx-mips.c (_bfd_elf_mips_mach): Handle E_MIPS_MACH_OCTEON.
+	(mips_set_isa_flags): Handle bfd_mach_mips_octeon.
+	(mips_mach_extensions): List bfd_mach_mips_octeon as an extension
+	of bfd_mach_mipsisa64.
+
+	binutils/
+	* readelf.c (get_machine_flags): Handle E_MIPS_MACH_OCTEON.
+
+	opcodes/
+	* mips-dis.c (octeon_use_unalign): New variable.
+	(mips_cp0_names_octeon, mips_cp0sel_names_octeon): New tables.
+	(mips_arch_choices): Add an octeon entry.
+	(parse_mips_dis_option): Handle octeon-useun and no-octeon-useun.
+	(print_insn_args): Handle '^' and 'y'.
+	(print_insn_mips): Skip aliases of uld, ulw, usd and usw when
+	unaligned octeon instructions are allowed.  Print ldr, lwr,
+	sdr and swr as nops in that case.
+	(print_mips_disassembler_options): Print help for octeon-useun and
+	no-octeon-useun.
+	* mips-opc.c (IOCTEON): Define.
+	(mips_builtin_opcodes): Add Octeon baddu, bbit032, bbit0, bbit132,
+	bbit1, cins32, cins, dmul, dpop, exts32, exts, exts, mtm0, mtm1,
+	mtm2, mtp0, mtp1, mtp2, pop, seq, seqi, sne, snei, syncio,
+	synciobdma, syncioall, syncs, syncw, syncws, uld, ulw, usd, usw,
+	v3mulu, vmm0, vmulu, dmfc2 and dmtc2 instructions.
+
+	gas/
+	* config/tc-mips.c (octeon_use_unalign): New variable.
+	(ISA_HAS_INS): New macro.
+	(CPU_HAS_DROR): Return true for CPU_OCTEON.
+	(CPU_HAS_INS): New macro.
+	(macro_build): Handle '^' and 'y'.
+	(macro2): Try to use "ins" instead of "sll" and "or" in the
+	implementation of ulh and ulhu.  Treat uld, ulw, usd and usw
+	as normal stores if the Octeon unaligned instructions are allowed.
+	(validate_mips_insn): Handle '^', ';' and 'y'.
+	(mips_ip): Ignore the uld, ulw, usd and usw hardware instructions
+	unless they have been enabled.  Refuse to assemble left/right stores
+	when uld, ulw, usd and usw are enabled.  Handle '^', ';' and 'y'.
+	(OPTION_OCTEON_UNALIGNED, OPTION_NO_OCTEON_UNALIGNED): New macros.
+	(OPTION_ELF_BASE): Bump by two.
+	(md_longopts): Add -mocteon-useun and -mno-octeon-useun.
+	(md_parse_option): Handle them.
+	(mips_cpu_info_table): Add an "octeon" entry.
+	(md_show_usage): Mention -mocteon-useun and -mno-octeon-useun.
+
+2007-04-22  Mark Shinwell  <shinwell@codesourcery.com>
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-02-02  Mark Shinwell  <shinwell@codesourcery.com>
+
+	gas/
+	* config/tc-arm.c (arm_ext_marvell_f): New.
+	(do_marvell_div): New.
+	(insns): Add entries for Marvell-specific sdiv and udiv encodings.
+	(arm_cpu_option_table): Add marvell-f entry.
+	(arm_arch_option_table): Add marvell-f entry.
+	* include/opcode/arm.h (ARM_CEXT_MARVELL_F): New.
+	(ARM_ARCH_MARVELL_F): New.
+	
+	gas/testsuite/
+	* gas/arm/marvell-f-div.d: New.
+	* gas/arm/marvell-f-div.s: New.
+
+	2007-01-03  Mark Shinwell  <shinwell@codesourcery.com>
+
+	NOT ASSIGNED TO FSF
+	Port from Marvell compiler:
+	gas/
+	* config/tc-arm.c (arm_cpus): Add marvell-f entry.
+
+2007-04-20  Nathan Sidwell  <nathan@codesourcery.com>
+
+	gas/testsuite/
+	* gas/m68k/br-isaa.s: New.
+	* gas/m68k/br-isaa.d: New.
+	* gas/m68k/br-isab.s: New.
+	* gas/m68k/br-isab.d: New.
+	* gas/m68k/br-isac.s: New.
+	* gas/m68k/br-isac.d: New.
+	* gas/m68k/all.exp: Adjust.
+
+	gas/
+	* config/tc-m68k.c (mcf54455_ctrl): New.
+	(HAVE_LONG_DISP, HAVE_LONG_CALL, HAVE_LONG_COND): New.
+	(m68k_archs): Add isac.
+	(m68k_cpus): Add 54455 family.
+	(m68k_ip): Split Bg into Bb, Bs, Bg.
+	(m68k_elf_final_processing): Add ISA_C.
+	* doc/c-m68k.texi (M680x0 Options): Add isac.
+
+	include/opcode/
+	* m68k.h (mcfisa_c): New.
+	(mcfusp, mcf_mask): Adjust.
+
+	bfd/
+	* archures.c (bfd_mach_mcf_isa_c, bfd_mach_mcf_isa_c_mac,
+	bfd_mach_mcf_isa_c_emac): New.
+	* elf32-m68k.c (ISAC_PLT_ENTRY_SIZE, elf_isac_plt0_entry,
+	elf_isac_plt_entry, elf_isac_plt_info): New.
+	(elf32_m68k_object_p): Add ISA_C.
+	(elf32_m68k_print_private_bfd_data): Print ISA_C.
+	(elf32_m68k_get_plt_info): Detect ISA_C.
+	* cpu-m68k.c (arch_info): Add ISAC.
+	(m68k_arch_features): Likewise,
+	(bfd_m68k_compatible): ISAs B & C are not compatible.
+
+	opcodes/
+	* m68k-opc.c: Mark mcfisa_c instructions.
+
+2007-04-20  Joseph Myers  <joseph@codesourcery.com>
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-03-20  Joseph Myers  <joseph@codesourcery.com>
+	Based on patch by Mark Hatle <mark.hatle@windriver.com>.
+	ld/
+	* configure.in (--enable-poison-system-directories): New option.
+	* configure, config.in: Regenerate.
+	* ldfile.c (ldfile_add_library_path): If
+	ENABLE_POISON_SYSTEM_DIRECTORIES defined, warn for use of /lib,
+	/usr/lib, /usr/local/lib or /usr/X11R6/lib.
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-03-22  Julian Brown  <julian@codesourcery.com>
+	bfd/
+	* elf32-arm.c (bfd_elf32_arm_set_vfp11_fix): Default to fixing for
+	scalar code on pre-ARMv7.
+	ld/
+	* ld.texinfo: Document this default.
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-03-23  Richard Sandiford  <richard@codesourcery.com>
+	bfd/
+	From Phil Edwards <phil@codesourcery.com>:
+	* cache.c (bfd_cache_delete): Work around ClearCase bug.
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2006-04-12  Carlos O'Donell  <carlos@codesourcery.com>
+	* Makefile.tpl: Add install-html to install target deps.
+	* Makefile.in: Regenerate.
+
+2007-04-20  Mark Mitchell  <mark@codesourcery.com>
+            Vladimir Prus  <vladimir@codesourcery.com>
+            Carlos O'Donell  <carlos@codesourcery.com>
+            Joseph Myers  <joseph@codesourcery.com>
+
+	libiberty/
+	* configure.ac: Add cygpath for mingw hosts.
+	* configure: Rebuilt.
+	* Makefile.in: Add cygpath.
+	* cygpath.c: New.
+
+2007-04-20  Joseph Myers  <joseph@codesourcery.com>
+
+	Merge from Sourcery G++ binutils 2.17:
+
+	2007-03-01  Joseph Myers  <joseph@codesourcery.com>
+	gas/
+	* configure.in (mips64el-sicortex-linux-gnu): Set
+	mips_default_abi=N64_ABI.
+	* configure: Regenerate.
+
+	2007-02-20  Carlos O'Donell  <carlos@codesourcery.com>
+	Issue #1271
+	ld/
+	* configure.tgt (mips64el-sicortex-linux-gnu): Set targ_emul to
+	elf64ltsmip, and set targ_extra_emuls appropriately.
+
+2007-04-20  Nathan Sidwell  <nathan@codesourcery.com>
+
+	gas/
+	* config/tc-m68k.c (mcf5253_ctrl): New.
+	(mcf52223_ctrl): New.
+	(m68k_cpus): Add 5253, 52221, 52223.
+
+	gas/
+	* config/m68k-parse.h (RAMBAR_ALT): New.
+	* config/tc-m68k.c (mcf5206_ctrl, mcf5307_ctrl): New.
+	(mcf_ctrl, mcf5208_ctrl, mcf5210a_ctrl, mcf5213_ctrl, mcf52235_ctrl,
+	mcf5225_ctrl, mcf5235_ctrl, mcf5271_ctrl, mcf5275_ctrl,
+	mcf5282_ctrl, mcf5329_ctrl, mcf5373_ctrl, mcfv4e_ctrl,
+	mcf5475_ctrl, mcf5485_ctrl): Add RAMBAR synonym for
+	RAMBAR1.
+	(mcf5272_ctrl): Add RAMBAR0, replace add RAMBAR with RAMBAR_ALT.
+	(m68k_cpus): Adjust 5206, 5206e & 5307 entries.
+	(m68k_ip) <Case J>: Detect when RAMBAR_ALT should be used.  Add it
+	to control register mapping.
+
+	gas/testsuite/
+	* gas/m68k/ctrl-1.d, gas/m68k/ctrl-1.s: New.
+	* gas/m68k/ctrl-2.d, gas/m68k/ctrl-2.s: New.
+	* gas/m68k/all.exp: Add them.
+
+	opcodes/
+	* m68k-dis.c (print_insn_arg): Show c04 as rambar0 and c05 as
+	rambar1.
+
+^L
+Local Variables:
+change-log-default-name: "ChangeLog.csl"
+mode: change-log
+End:
diff -Nur binutils-2.18.50.0.1/ChangeLog.linux binutils-stable/ChangeLog.linux
--- binutils-2.18.50.0.1/ChangeLog.linux	2007-04-19 16:14:23.000000000 +0200
+++ binutils-stable/ChangeLog.linux	1970-01-01 01:00:00.000000000 +0100
@@ -1,35 +0,0 @@
-2007-03-23  H.J. Lu <hjl@gnu.org>
-
-	* bfd/configure.in (ACX_PKGVERSION): Pass "Linux/GNU Binutils".
-	(ACX_BUGURL): Add mailto:hjl@lucon.org.
-	* bfd/configure: Regenerated.
-
-2007-03-15  H.J. Lu <hjl@gnu.org>
-
-	* bfd/configure.in (PKGVERSION): Default to (Linux/GNU Binutils).
-	(REPORT_BUGS_TO): Add mailto:hjl@lucon.org.
-	(REPORT_BUGS_TEXI): Likewise.
-	* bfd/configure: Regenerated.
-
-2007-01-25  H.J. Lu <hjl@gnu.org>
-
-	* binutils.spec.in (%build): Set/export LD_SYMBOLIC_FUNCTIONS=1.
-
-2007-01-22  H.J. Lu <hjl@gnu.org>
-
-	* binutils.spec.in (%setup): Don't run patches/README.
-
-2006-10-20  H.J. Lu <hjl@gnu.org>
-
-	* binutils.spec.in (URL): Change to
-
-	http://www.sourceware.org/binutils
-
-2006-09-18  H.J. Lu <hjl@gnu.org>
-
-	* bfd/configure.in (AC_OUTPUT): Add ../binutils.spec.
-	* bfd/configure: Regenerated.
-
-	* binutils.spec.in: New file.
-
-	* include/bin-bugs.h (REPORT_BUGS_TO): Add hjl@lucon.org.
diff -Nur binutils-2.18.50.0.1/ChangeLog.patches binutils-stable/ChangeLog.patches
--- binutils-2.18.50.0.1/ChangeLog.patches	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ChangeLog.patches	1970-01-01 01:00:00.000000000 +0100
@@ -1,374 +0,0 @@
-2006-09-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/3191
-	* dwarf2.c (find_abstract_instance_name): Pass a pointer to
-	attribute instead of offset.  For DW_FORM_ref_addr, get the
-	entry at the offset from the .debug_info section.
-	(scan_unit_for_symbols): Updated.
-	(_bfd_dwarf2_find_nearest_line): Adjust debug_info
-	section vma when needed.
-
-bfd/
-
-2006-10-17  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/3351
-	* elflink.c (_bfd_elf_update_dynamic_flags): New.
-	(_bfd_elf_merge_symbol): Update both real and indirect symbol
-	dynamic flags.
-	(_bfd_elf_add_default_symbol): Make the real symbol dynamic if
-	the indirect symbol is defined in a shared library.
-	(elf_link_add_object_symbols): Likewise.  If the indirect
-	symbol has been forced local, don't make the real symbol
-	dynamic.
-	(elf_link_check_versioned_symbol): Check indirect symbol.
-	(elf_link_output_extsym): Use real symbol definition when
-	reporting indirect symbol error.  Check version info for
-	dynamic versioned symbol.
-
-ld/testsuite/
-
-2006-10-17  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/3351
-	* ld-elf/indirect.exp: New file.
-	* ld-elf/indirect1a.c: Likewise.
-	* ld-elf/indirect1b.c: Likewise.
-	* ld-elf/indirect1c.c: Likewise.
-	* ld-elf/indirect2.c: Likewise.
-	* ld-elf/indirect3.out: Likewise.
-	* ld-elf/indirect3a.c: Likewise.
-	* ld-elf/indirect3b.c: Likewise.
-	* ld-elf/indirect3c.c: Likewise.
-	* ld-elf/indirect4.out: Likewise.
-	* ld-elf/indirect4a.c: Likewise.
-	* ld-elf/indirect4b.c: Likewise.
-	* ld-elf/indirect4c.c: Likewise.
-
-bfd/
-
-2007-01-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* elf-bfd.h (elf_obj_tdata): Remove relro.
-
-	* elf.c (get_program_header_size): Check info->relro instead
-	of elf_tdata (abfd)->relro.
-	(_bfd_elf_map_sections_to_segments): Likewise.
-	(assign_file_positions_for_load_sections): Don't set
-	PT_GNU_RELRO segment alignment here.
-	(assign_file_positions_for_non_load_sections): Properly set up
-	PT_GNU_RELRO segment for copying executable/shared library.
-	(elf_section_status): New enum.
-	(rewrite_elf_program_header): Add elf_section_status. Remove
-	PT_GNU_RELRO segment if a section is modified.
-	(copy_private_bfd_data): Updated rewrite_elf_program_header
-	call.
-
-include/elf/
-
-2006-10-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* internal.h (ELF_IS_SECTION_IN_SEGMENT): Allow SHF_TLS
-	sections in PT_GNU_RELRO segments.
-
-ld/
-
-2006-10-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* ldexp.h (ldexp_control): Add relro, relro_start_stat and
-	relro_end_stat.
-
-	* ldexp.c (fold_binary): Set expld.dataseg.relro to
-	exp_dataseg_relro_start or exp_dataseg_relro_end when
-	seeing DATA_SEGMENT_ALIGN or DATA_SEGMENT_RELRO_END,
-	respectively.
-
-	* ldlang.c (lang_size_sections_1): Properly set
-	expld.dataseg.relro_start_stat and
-	expld.dataseg.relro_end_stat.
-	(find_relro_section_callback): New function.
-	(lang_find_relro_sections_1): Likewise.
-	(lang_find_relro_sections): Likewise.
-	(lang_process): Call lang_find_relro_sections for
-	non-relocatable link.
-
-ld/testsuite/
-
-2006-10-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* ld-elf/binutils.exp: Update "-z relro" tests to use relro.s.
-	Add "-z relro" tests with TLS for objcopy.
-
-	* ld-elf/relro.s: New file.
-
-bfd/
-
-2007-01-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf-bfd.h (_bfd_elf_sharable_com_section): New.
-	(_bfd_elf_add_sharable_symbol): Likewise.
-	(_bfd_elf_sharable_section_from_bfd_section): Likewise.
-	(_bfd_elf_sharable_symbol_processing): Likewise.
-	(_bfd_elf_sharable_common_definition): Likewise.
-	(_bfd_elf_sharable_common_section_index): Likewise.
-	(_bfd_elf_sharable_common_section): Likewise.
-	(_bfd_elf_sharable_merge_symbol): Likewise.
-
-	* elf.c (special_sections_g): Add ".gnu.linkonce.shrb" and
-	".gnu.linkonce.shrd".
-	(special_sections_s): Add ".sharable_bss" and ".sharable_data".
-	(get_program_header_size): Handle PT_GNU_SHR segment.
-	(_bfd_elf_map_sections_to_segments): Likewise.
-	(assign_file_positions_for_load_sections): Likewise.
-
-	* elf32-i386.c (elf_i386_link_hash_table): Add sdynsharablebss
-	and srelsharablebss fields.
-	(elf_i386_link_hash_table_create): Initialize sdynsharablebss
-	and srelsharablebss.
-	(elf_i386_create_dynamic_sections): Handle sdynsharablebss and
-	srelsharablebss.
-	(elf_i386_adjust_dynamic_symbol): Likewise.
-	(elf_i386_size_dynamic_sections): Likewise.
-	(elf_i386_finish_dynamic_symbol): Likewise.
-	(elf_backend_add_symbol_hook): Defined.
-	(elf_backend_section_from_bfd_section): Likewise.
-	(elf_backend_symbol_processing): Likewise.
-	(elf_backend_common_section_index): Likewise.
-	(elf_backend_common_section): Likewise.
-	(elf_backend_common_definition): Likewise.
-	(elf_backend_merge_symbol): Likewise.
-
-	* elf64-x86-64.c (elf64_x86_64_link_hash_table): Add
-	sdynsharablebss and srelsharablebss fields.
-	(elf64_x86_64_link_hash_table_create): Initialize sdynsharablebss
-	and srelsharablebss.
-	(elf64_x86_64_create_dynamic_sections): Handle sdynsharablebss
-	and srelsharablebss.
-	(elf64_x86_64_adjust_dynamic_symbol): Likewise.
-	(elf64_x86_64_size_dynamic_sections): Likewise.
-	(elf64_x86_64_finish_dynamic_symbol): Likewise.
-	(elf64_x86_64_add_symbol_hook): Handle sharable symbols.
-	(elf64_x86_64_elf_section_from_bfd_section): Likewise.
-	(elf64_x86_64_symbol_processing): Likewise.
-	(elf64_x86_64_merge_symbol): Likewise.
-	(elf64_x86_64_common_definition): Handle sharable sections.
-	(elf64_x86_64_common_section_index): Likewise.
-	(elf64_x86_64_common_section): Likewise.
-
-	* elflink.c (_bfd_elf_create_dynamic_sections): Handle
-	.dynsharablebss section.
-	(_bfd_elf_sharable_com_section): New.
-	(get_sharable_common_section): Likewise.
-	(_bfd_elf_add_sharable_symbol): Likewise.
-	(_bfd_elf_sharable_section_from_bfd_section): Likewise.
-	(_bfd_elf_sharable_symbol_processing): Likewise.
-	(_bfd_elf_sharable_common_definition): Likewise.
-	(_bfd_elf_sharable_common_section_index): Likewise.
-	(_bfd_elf_sharable_common_section): Likewise.
-	(_bfd_elf_sharable_merge_symbol): Likewise.
-
-	* elfxx-ia64.c (elfNN_ia64_add_symbol_hook): Handle sharable
-	symbols.
-	(elf_backend_add_symbol_hook): Defined.
-	(elf_backend_section_from_bfd_section): Likewise.
-	(elf_backend_symbol_processing): Likewise.
-	(elf_backend_common_section_index): Likewise.
-	(elf_backend_common_section): Likewise.
-	(elf_backend_common_definition): Likewise.
-	(elf_backend_merge_symbol): Likewise.
-
-binutils/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* readelf.c (dump_relocations): Handle sharable sections.
-	(get_segment_type): Handle sharable segment.
-	(get_symbol_index_type): Handle sharable sections.
-
-gas/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* config/obj-elf.c (obj_elf_sharable_common): New.
-	(elf_pseudo_table): Add "sharable_common".
-	(obj_elf_change_section): Handle sharable sections.
-
-include/
-
-2007-01-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* bfdlink.h (bfd_link_info): Add sharable_sections.
-
-include/elf/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* common.h (PT_GNU_SHR): New.
-	(SHF_GNU_SHARABLE): Likewise.
-	(SHN_GNU_SHARABLE_COMMON): Likewise.
-
-ld/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* emulparams/elf64_ia64.sh (SHARABLE_SECTIONS): Set to yes.
-	* emulparams/elf_i386.sh (SHARABLE_SECTIONS): Likewise.
-	* emulparams/elf_x86_64.sh (SHARABLE_SECTIONS): Likewise.
-
-	* emultempl/elf32.em (gld${EMULATION_NAME}_before_parse): Set
-	link_info.sharable_sections based on $SHARABLE_SECTIONS.
-	(gld${EMULATION_NAME}_place_orphan): Don't allow orphaned
-	sharable sections.
-
-	* ldmain.c (main): Initialize link_info.sharable_sections.
-	* scripttempl/elf.sc: Support sharable sections.
-
-2007-01-24  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* NEWS: Mention LD_SYMBOLIC and LD_SYMBOLIC_FUNCTIONS.
-
-	* ld.texinfo: Document LD_SYMBOLIC and LD_SYMBOLIC_FUNCTIONS.
-
-	* ldmain.c (main): Handle LD_SYMBOLIC and
-	LD_SYMBOLIC_FUNCTIONS.
-
-binutils/
-
-2007-05-09  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/4476
-	* readelf.c (print_dynamic_symbol): New.
-	(process_symbol_table): Handle DT_GNU_HASH for dynamic symbols.
-
-ld/testsuite/
-
-2007-05-09  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/4476
-	* ld-elf/hash.d: Check "-s -D" for readelf.
-
-bfd/
-
-2007-07-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4409
-	* elf-bfd.h (RELOC_FOR_GLOBAL_SYMBOL): Add an argument for
-	error ignored.
-	* elf-m10200.c (mn10200_elf_relocate_section): Updated.
-	* elf-m10300.c (mn10300_elf_relocate_section): Likewise.
-	* elf32-arm.c (elf32_arm_relocate_section): Likewise.
-	* elf32-avr.c (elf32_avr_relocate_section): Likewise.
-	* elf32-bfin.c (bfinfdpic_relocate_section): Likewise.
-	(bfin_relocate_section): Likewise.
-	* elf32-cr16.c (elf32_cr16_relocate_section): Likewise.
-	* elf32-cr16c.c (elf32_cr16c_relocate_section): Likewise.
-	* elf32-cris.c (cris_elf_relocate_section): Likewise.
-	* elf32-crx.c (elf32_crx_relocate_section): Likewise.
-	* elf32-d10v.c (elf32_d10v_relocate_section): Likewise.
-	* elf32-fr30.c (fr30_elf_relocate_section): Likewise.
-	* elf32-frv.c (elf32_frv_relocate_section): Likewise.
-	* elf32-h8300.c (elf32_h8_relocate_section): Likewise.
-	* elf32-hppa.c (elf32_hppa_relocate_section): Likewise.
-	* elf32-i386.c (elf_i386_relocate_section): Likewise.
-	* elf32-i860.c (elf32_i860_relocate_section): Likewise.
-	* elf32-ip2k.c (ip2k_elf_relocate_section): Likewise.
-	* elf32-iq2000.c (iq2000_elf_relocate_section): Likewise.
-	* elf32-m68hc1x.c (elf32_m68hc11_relocate_section): Likewise.
-	* elf32-m68k.c (elf_m68k_relocate_section): Likewise.
-	* elf32-mcore.c (mcore_elf_relocate_section): Likewise.
-	* elf32-msp430.c (elf32_msp430_relocate_section): Likewise.
-	* elf32-mt.c (mt_elf_relocate_section): Likewise.
-	* elf32-openrisc.c (openrisc_elf_relocate_section): Likewise.
-	* elf32-ppc.c (ppc_elf_relocate_section): Likewise.
-	* elf32-s390.c (elf_s390_relocate_section): Likewise.
-	* elf32-spu.c (spu_elf_relocate_section): Likewise.
-	* elf32-v850.c (v850_elf_relocate_section): Likewise.
-	* elf32-vax.c (elf_vax_relocate_section): Likewise.
-	* elf32-xc16x.c (elf32_xc16x_relocate_section): Likewise.
-	* elf32-xstormy16.c (xstormy16_elf_relocate_section): Likewise.
-	* elf32-xtensa.c (elf_xtensa_relocate_section): Likewise.
-	* elf64-alpha.c (elf64_alpha_relocate_section): Likewise.
-	* elf64-mmix.c (mmix_elf_relocate_section): Likewise.
-	* elf64-ppc.c (ppc64_elf_relocate_section): Likewise.
-	* elf64-s390.c (elf_s390_relocate_section): Likewise.
-	* elf64-x86-64.c (elf64_x86_64_relocate_section): Likewise.
-	* elfxx-sparc.c (_bfd_sparc_elf_relocate_section): Likewise.
-
-	* elfxx-ia64.c (elfNN_ia64_relocate_section): Skip if error
-	from RELOC_FOR_GLOBAL_SYMBOL in executable is ignored.
-
-ld/
-
-2007-07-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4409
-	* ldmain.c (how_to_report_unresolved_symbols): New.
-	(main): Set link_info.unresolved_syms_in_objects and
-	link_info.unresolved_syms_in_shared_libs if they aren't set
-	yet.
-
-	* ldmain.h (how_to_report_unresolved_symbols): New.
-
-	* lexsup.c (how_to_report_unresolved_symbols): Removed.
-	(parse_args): Set link_info.pie to FALSE for -shared. Don't
-	set default values for link_info.unresolved_syms_in_objects nor
-	link_info.unresolved_syms_in_shared_libs.
-
-ld/testsuite/
-
-2007-07-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4409
-	* ld-ia64/error1.d: New file.
-	* ld-ia64/error1.s: Likewise.
-	* ld-ia64/error2.d: Likewise.
-	* ld-ia64/error3.d: Likewise.
-	* ld-ia64/error4.d: Likewise.
-
-binutils/
-
-2007-06-22  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* objdump.c (disassemble_bytes): Print addend as signed.
-	(dump_reloc_set): Likewise.
-
-gas/testsuite/
-
-2007-06-22  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/alpha/elf-reloc-1.d: Expect addend as signed.
-	* gas/i386/mixed-mode-reloc64.d: Likewise.
-	* gas/i386/reloc64.d: Likewise.
-	* gas/ia64/pcrel.d: Likewise.
-	* gas/mips/branch-misc-2-64.d: Likewise.
-	* gas/mips/branch-misc-2pic-64.d: Likewise.
-	* gas/mips/ldstla-n64-sym32.d: Likewise.
-	* gas/mips/mips16-hilo-n32.d: Likewise.
-	* gas/ppc/astest.d: Likewise.
-	* gas/ppc/astest2.d: Likewise.
-	* gas/ppc/astest2_64.d: Likewise.
-	* gas/ppc/astest64.d: Likewise.
-	* gas/ppc/test1elf32.d: Likewise.
-	* gas/ppc/test1elf64.d: Likewise.
-	* gas/sparc/reloc64.d: Likewise.
-
-bfd/
-
-2007-07-19  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elflink.c (elf_link_add_object_symbols): Check symbol type
-	for symbol alias in a dynamic object.
-
-ld/testsuite/
-
-2007-07-19  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* ld-elf/data2.c: New.
-	* ld-elf/weakdef1.c: Likewise.
-
-	* ld-elf/shared.exp: Add tests for libdata2 and weakdef1.
-
diff -Nur binutils-2.18.50.0.1/config/ChangeLog binutils-stable/config/ChangeLog
--- binutils-2.18.50.0.1/config/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/config/ChangeLog	2007-09-25 15:42:07.000000000 +0200
@@ -1,19 +1,9 @@
-2007-09-07  Richard Sandiford  <richard@codesourcery.com>
-
-	* mt-sde (CFLAGS_FOR_TARGET): Add -mno-gpopt.
-	(CXXFLAGS_FOR_TARGET): Likewise.
-
 2007-08-18  Paul Brook  <paul@codesourcery.com>
             Joseph Myers  <joseph@codesourcery.com>
 
 	* mt-gnu (CXXFLAGS_FOR_TARGET): Add
 	$(DEBUG_PREFIX_CFLAGS_FOR_TARGET).
 
-2007-08-17  Richard Sandiford  <richard@codesourcery.com>
-	    Nigel Stephens  <nigel@mips.com>
-
-	* mt-sde: New file.
-
 2007-07-06  H.J. Lu  <hongjiu.lu@intel.com>
 
 	* tls.m4 (GCC_CHECK_CC_TLS): New.
diff -Nur binutils-2.18.50.0.1/config/mt-sde binutils-stable/config/mt-sde
--- binutils-2.18.50.0.1/config/mt-sde	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/config/mt-sde	2007-09-25 15:42:06.000000000 +0200
@@ -1,10 +1,8 @@
 # We default to building libraries optimised for size.  We switch off
 # sibling-call optimization to permit interlinking of MIPS16 and
-# non-MIPS16 functions.  The -mcode-xonly option allows MIPS16 libraries
-# to run on Harvard-style split I/D memories, so long as they have the
-# D-to-I redirect for PC-relative loads.  -mno-gpopt has two purposes:
-# it allows libraries to be used in situations where $gp != our _gp,
-# and it allows them to be built with -G8 while retaining link compability
-# with -G0 and -G4.
-CFLAGS_FOR_TARGET = -Os -fno-optimize-sibling-calls -mcode-xonly -mno-gpopt
-CXXFLAGS_FOR_TARGET = -Os -fno-optimize-sibling-calls -mcode-xonly -mno-gpopt
+# non-MIPS16 functions. The -mcode-xonly option allows MIPS16
+# libraries to run on Harvard-style split I/D memories, so long as
+# they have the D-to-I redirect for pc-relative loads.
+
+CFLAGS_FOR_TARGET = -Os -fno-optimize-sibling-calls -mcode-xonly
+CXXFLAGS_FOR_TARGET = -Os -fno-optimize-sibling-calls -mcode-xonly
diff -Nur binutils-2.18.50.0.1/config.guess binutils-stable/config.guess
--- binutils-2.18.50.0.1/config.guess	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/config.guess	2007-09-25 15:42:07.000000000 +0200
@@ -4,7 +4,7 @@
 #   2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation,
 #   Inc.
 
-timestamp='2007-07-22'
+timestamp='2007-05-17'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
@@ -330,7 +330,7 @@
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
-    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
+    i86pc:SunOS:5.*:* | ix86xen:SunOS:5.*:*)
 	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
     sun4*:SunOS:6*:*)
@@ -793,7 +793,7 @@
 	exit ;;
     *:Interix*:[3456]*)
     	case ${UNAME_MACHINE} in
-	    x86)
+	    x86) 
 		echo i586-pc-interix${UNAME_RELEASE}
 		exit ;;
 	    EM64T | authenticamd)
diff -Nur binutils-2.18.50.0.1/config.sub binutils-stable/config.sub
--- binutils-2.18.50.0.1/config.sub	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/config.sub	2007-09-25 15:42:07.000000000 +0200
@@ -4,7 +4,7 @@
 #   2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation,
 #   Inc.
 
-timestamp='2007-06-28'
+timestamp='2007-04-29'
 
 # This file is (in principle) common to ALL GNU software.
 # The presence of a machine in this file suggests that SOME GNU software
@@ -475,8 +475,8 @@
 		basic_machine=craynv-cray
 		os=-unicosmp
 		;;
-	cr16)
-		basic_machine=cr16-unknown
+	cr16c)
+		basic_machine=cr16c-unknown
 		os=-elf
 		;;
 	crds | unos)
diff -Nur binutils-2.18.50.0.1/configure binutils-stable/configure
--- binutils-2.18.50.0.1/configure	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/configure	2007-09-28 00:08:11.000000000 +0200
@@ -11993,9 +11993,9 @@
   stage1_checking=--enable-checking=${enable_stage1_checking}
 else
   if test "x$enable_checking" = xno; then
-  stage1_checking=--enable-checking=yes,types
+  stage1_checking=--enable-checking
 else
-  stage1_checking=--enable-checking=types${enable_checking+,}$enable_checking
+  stage1_checking=--enable-checking${enable_checking+=}$enable_checking
 fi
 fi;
 
diff -Nur binutils-2.18.50.0.1/configure.ac binutils-stable/configure.ac
--- binutils-2.18.50.0.1/configure.ac	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/configure.ac	2007-09-25 15:42:07.000000000 +0200
@@ -2614,9 +2614,9 @@
                           of the compiler],
 [stage1_checking=--enable-checking=${enable_stage1_checking}],
 [if test "x$enable_checking" = xno; then
-  stage1_checking=--enable-checking=yes,types
+  stage1_checking=--enable-checking
 else
-  stage1_checking=--enable-checking=types${enable_checking+,}$enable_checking
+  stage1_checking=--enable-checking${enable_checking+=}$enable_checking
 fi])
 AC_SUBST(stage1_checking)
 
diff -Nur binutils-2.18.50.0.1/etc/configure binutils-stable/etc/configure
--- binutils-2.18.50.0.1/etc/configure	2006-04-29 18:32:57.000000000 +0200
+++ binutils-stable/etc/configure	2007-09-25 15:42:07.000000000 +0200
@@ -272,7 +272,7 @@
 PACKAGE_BUGREPORT=
 
 ac_unique_file="Makefile.in"
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA datarootdir docdir htmldir LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA datarootdir docdir htmldir pdfdir LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -1968,6 +1968,7 @@
 s,@datarootdir@,$datarootdir,;t t
 s,@docdir@,$docdir,;t t
 s,@htmldir@,$htmldir,;t t
+s,@pdfdir@,$pdfdir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff -Nur binutils-2.18.50.0.1/etc/configure.in binutils-stable/etc/configure.in
--- binutils-2.18.50.0.1/etc/configure.in	2006-04-29 18:32:57.000000000 +0200
+++ binutils-stable/etc/configure.in	2007-09-25 15:42:07.000000000 +0200
@@ -7,6 +7,6 @@
 AC_SUBST(datarootdir)
 AC_SUBST(docdir)
 AC_SUBST(htmldir)
-
+AC_SUBST(pdfdir)
 
 AC_OUTPUT(Makefile)
diff -Nur binutils-2.18.50.0.1/gas/ChangeLog binutils-stable/gas/ChangeLog
--- binutils-2.18.50.0.1/gas/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/ChangeLog	2007-09-25 15:41:44.000000000 +0200
@@ -1,105 +1,3 @@
-2007-09-06  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* config/tc-i386.c (match_template): Handle invlpga, vmload,
-	vmrun and vmsave in SVME.
-	(process_suffix): Likewise.
-
-2007-09-05  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* config/tc-i386.c (i386_index_check): Don't use RegRex
-	on the reg_type field.
-	(parse_real_register): Use `||' instead of `|'.
-
-2007-09-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* config/tc-i386.c (process_operands): Remove segment override
-	check on SVME instructions.
-	(i386_index_check): Remove memory operand check on SVME
-	instructions.
-
-2007-09-04  Alan Modra  <amodra@bigpond.net.au>
-
-	* config/tc-spu.c (struct spu_insn): Delete "flag".  Add "reloc".
-	(md_assemble): Update init of insn.  Use insn.reloc instead of
-	calculating from flag.
-	(get_imm): Set reloc rather than flag.
-	(calcop): Formatting.
-
-2007-08-29  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* dwarf2dbg.c (dwarf2_directive_loc): Emit duplicate .loc directives.
-
-2007-08-28  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* doc/c-arc.texi: Fix typo.
-
-2007-08-28  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* config/tc-i386.c (process_suffix): Handle cmpxchg8b in
-	Intel mode.
-
-2007-08-28  Nathan Sidwell  <nathan@codesourcery.com>
-
-	* config/tc-m68k.c (mcf52235_ctrl): Add cache registers.
-	(mcf5253_ctrl): Add RAMBAR, MBAR, MBAR2.
-	(mcf5407_ctrl): New.
-	(m68k_cpus): Adjust 5407 entry.
-
-2007-08-28  Maxim Kuvyrkov  <maxim@codesourcery.com>
-
-	* config/tc-m68k.c (mcf51qe_ctrl): Define 51QE control registers.
-	(m68k_cpus): Define 51QE cpu.
-
-2007-08-28  Mark Shinwell  <shinwell@codesourcery.com>
-	    Joseph Myers  <joseph@codesourcery.com>
-
-	* as.c (main): Flush stderr before printing listings to ensure
-	consistent output order across platforms.
-
-2007-08-28  Robert Sebastian Gerus  <arachnist@gmail.com>
-
-	* configure.tgt: Add support for i[3-7]86-*-dragonfly*.
-
-2007-08-24  Joseph Myers  <joseph@codesourcery.com>
-	    Paul Brook  <paul@codesourcery.com>
-
-	* remap.c: New.
-	* as.h (remap_debug_filename, add_debug_prefix_map): Declare.
-	* as.c (show_usage): Document --debug-prefix-map option.
-	(parse_args): Handle --debug-prefix-map.
-	* dwarf2dbg.c (out_file_list, out_debug_info): Remap debug paths.
-	* stabs.c (stabs_generate_asm_file): Remap debug paths.
-	* Makefile.am (GAS_CFILES): Add remap.c
-	(GENERIC_OBJS): Add remap.o.
-	Regenerate dependencies.
-	* Makefile.in: Regenerate.
-	* doc/as.texinfo (--debug-prefix-map): Document.
-
-2007-08-24  Aurelien Jarno  <aurel32@debian.org>
-
-	* config/tc-arm.c (md_apply_fix): Cast bfd_vma values to long
-	before printing them.
-
-2007-08-24  Anders Waldenborg  <anders@0x63.nu>
-	    Alan Modra  <amodra@bigpond.net.au>
-
-	* config/tc-i386.c (lex_got): Don't scan past a comma.
-
-2007-08-23  Ben Elliston  <bje@au.ibm.com>
-
-	* config/tc-ppc.c (parse_cpu): Handle "750cl".
-	(pre_defined_registers): Add "gqr0" to "gqr7", "gqr.0" to "gqr.7".
-	(md_show_usage): Document -m750cl.
-	(md_assemble): Handle two delimiters in succession (eg. `),').
-	* doc/c-ppc.texi (PowerPC-Opts): Document -m750cl.
-	* testsuite/gas/ppc/ppc.exp: Run ppc70ps dump tests.
-	* testsuite/gas/ppc/ppc750ps.s: New file.
-	* testsuite/gas/ppc/ppc750ps.d: Likewise.
-
-2007-08-23  Ben Elliston  <bje@au.ibm.com>
-
-	* doc/c-arm.texi (ARM Directives): Move brackets out of @vars.
-
 2007-08-17  Alan Modra  <amodra@bigpond.net.au>
 
 	PR gas/4079
diff -Nur binutils-2.18.50.0.1/gas/config/m68k-parse.h binutils-stable/gas/config/m68k-parse.h
--- binutils-2.18.50.0.1/gas/config/m68k-parse.h	2007-08-01 15:11:49.000000000 +0200
+++ binutils-stable/gas/config/m68k-parse.h	2007-09-25 15:41:37.000000000 +0200
@@ -131,8 +131,8 @@
   MBAR,
   ASID,				/* m5475.  */
   CAC,  		        /* fido added this.  */
-  MBB,
-#define last_movec_reg MBB
+  MBO,
+#define last_movec_reg MBO
   /* End of movec ordering constraints.  */
 
   FPI,
diff -Nur binutils-2.18.50.0.1/gas/config/obj-elf.c binutils-stable/gas/config/obj-elf.c
--- binutils-2.18.50.0.1/gas/config/obj-elf.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/config/obj-elf.c	2007-09-25 15:41:37.000000000 +0200
@@ -73,7 +73,6 @@
 static void obj_elf_subsection (int);
 static void obj_elf_popsection (int);
 static void obj_elf_tls_common (int);
-static void obj_elf_sharable_common (int);
 static void obj_elf_lcomm (int);
 static void obj_elf_struct (int);
 
@@ -131,8 +130,6 @@
 
   {"tls_common", obj_elf_tls_common, 0},
 
-  {"sharable_common", obj_elf_sharable_common, 0},
-
   /* End sentinel.  */
   {NULL, NULL, 0},
 };
@@ -377,39 +374,6 @@
 }
 
 static void
-obj_elf_sharable_common (int ignore ATTRIBUTE_UNUSED)
-{
-  static segT sharable_bss_section;
-  asection *saved_com_section_ptr = elf_com_section_ptr;
-  asection *saved_bss_section = bss_section;
-
-  if (sharable_bss_section == NULL)
-    {
-      flagword applicable;
-      segT seg = now_seg;
-      subsegT subseg = now_subseg;
-
-      /* The .sharable_bss section is for local .sharable_common
-	 symbols.  */
-      sharable_bss_section = subseg_new (".sharable_bss", 0);
-      applicable = bfd_applicable_section_flags (stdoutput);
-      bfd_set_section_flags (stdoutput, sharable_bss_section,
-			     applicable & SEC_ALLOC);
-      seg_info (sharable_bss_section)->bss = 1;
-
-      subseg_set (seg, subseg);
-    }
-
-  elf_com_section_ptr = &_bfd_elf_sharable_com_section;
-  bss_section = sharable_bss_section;
-
-  s_comm_internal (0, elf_common_parse);
-
-  elf_com_section_ptr = saved_com_section_ptr;
-  bss_section = saved_bss_section;
-}
-
-static void
 obj_elf_lcomm (int ignore ATTRIBUTE_UNUSED)
 {
   symbolS *symbolP = s_comm_internal (0, s_lcomm_internal);
@@ -623,17 +587,11 @@
 
 		 .section .lbss,"aw",@progbits
 
-		 "@progbits" is incorrect.  Also for sharable bss
-		 sections, gcc, as of 2005-07-06, will emit
-
-		 .section .sharable_bss,"aw",@progbits
-
 		 "@progbits" is incorrect.  */
 #ifdef TC_I386
 	      && (bed->s->arch_size != 64
 		  || !(ssect->attr & SHF_X86_64_LARGE))
 #endif
-	      && !(ssect->attr & SHF_GNU_SHARABLE)
 	      && ssect->type != SHT_INIT_ARRAY
 	      && ssect->type != SHT_FINI_ARRAY
 	      && ssect->type != SHT_PREINIT_ARRAY)
diff -Nur binutils-2.18.50.0.1/gas/config/tc-arm.c binutils-stable/gas/config/tc-arm.c
--- binutils-2.18.50.0.1/gas/config/tc-arm.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/config/tc-arm.c	2007-09-25 22:35:28.000000000 +0200
@@ -191,11 +191,16 @@
 static const arm_feature_set arm_ext_v6z = ARM_FEATURE (ARM_EXT_V6Z, 0);
 static const arm_feature_set arm_ext_v6t2 = ARM_FEATURE (ARM_EXT_V6T2, 0);
 static const arm_feature_set arm_ext_v6_notm = ARM_FEATURE (ARM_EXT_V6_NOTM, 0);
+static const arm_feature_set arm_ext_barrier = ARM_FEATURE (ARM_EXT_BARRIER, 0);
+static const arm_feature_set arm_ext_msr = ARM_FEATURE (ARM_EXT_THUMB_MSR, 0);
 static const arm_feature_set arm_ext_div = ARM_FEATURE (ARM_EXT_DIV, 0);
 static const arm_feature_set arm_ext_v7 = ARM_FEATURE (ARM_EXT_V7, 0);
 static const arm_feature_set arm_ext_v7a = ARM_FEATURE (ARM_EXT_V7A, 0);
 static const arm_feature_set arm_ext_v7r = ARM_FEATURE (ARM_EXT_V7R, 0);
-static const arm_feature_set arm_ext_v7m = ARM_FEATURE (ARM_EXT_V7M, 0);
+static const arm_feature_set arm_ext_marvell_f =
+  ARM_FEATURE (0, ARM_CEXT_MARVELL_F);
+static const arm_feature_set arm_ext_m =
+  ARM_FEATURE (ARM_EXT_V6M | ARM_EXT_V7M, 0);
 
 static const arm_feature_set arm_arch_any = ARM_ANY;
 static const arm_feature_set arm_arch_full = ARM_FEATURE (-1, -1);
@@ -8480,25 +8485,25 @@
 		  return;
 		}
 
-	      if (inst.instruction == T_MNEM_add)
+	      if (inst.instruction == T_MNEM_add && (Rd == Rs || Rd == Rn))
 		{
-		  if (Rd == Rs)
+		  /* Thumb-1 cores (except v6-M) require at least one high
+		     register in a narrow non flag setting add.  */
+		  if (Rd > 7 || Rn > 7
+		      || ARM_CPU_HAS_FEATURE (selected_cpu, arm_ext_v6t2)
+		      || ARM_CPU_HAS_FEATURE (selected_cpu, arm_ext_msr))
 		    {
+		      if (Rd == Rn)
+			{
+			  Rn = Rs;
+			  Rs = Rd;
+			}
 		      inst.instruction = T_OPCODE_ADD_HI;
 		      inst.instruction |= (Rd & 8) << 4;
 		      inst.instruction |= (Rd & 7);
 		      inst.instruction |= Rn << 3;
 		      return;
 		    }
-		  /* ... because addition is commutative! */
-		  else if (Rd == Rn)
-		    {
-		      inst.instruction = T_OPCODE_ADD_HI;
-		      inst.instruction |= (Rd & 8) << 4;
-		      inst.instruction |= (Rd & 7);
-		      inst.instruction |= Rs << 3;
-		      return;
-		    }
 		}
 	    }
 	  /* If we get here, it can't be done in 16 bits.  */
@@ -9040,6 +9045,17 @@
 }
 
 static void
+do_marvell_div (void)
+{
+  /* Encode SDIV or UDIV instructions using the special Marvell
+     encoding utilizing MRC.  */
+
+  inst.instruction |= inst.operands[0].reg << 12;
+  inst.instruction |= inst.operands[1].reg << 16;
+  inst.instruction |= inst.operands[2].reg;
+}
+
+static void
 do_t_div (void)
 {
   if (!inst.operands[1].present)
@@ -9790,7 +9806,7 @@
   flags = inst.operands[1].imm & (PSR_c|PSR_x|PSR_s|PSR_f|SPSR_BIT);
   if (flags == 0)
     {
-      constraint (!ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_v7m),
+      constraint (!ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_m),
 		  _("selected processor does not support "
 		    "requested special purpose register"));
     }
@@ -9828,7 +9844,7 @@
     }
   else
     {
-      constraint (!ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_v7m),
+      constraint (!ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_m),
 		  _("selected processor does not support "
 		    "requested special purpose register"));
       flags |= PSR_f;
@@ -14213,7 +14229,8 @@
 	{
 	  /* Implicit require narrow instructions on Thumb-1.  This avoids
 	     relaxation accidentally introducing Thumb-2 instructions.  */
-	  if (opcode->tencode != do_t_blx && opcode->tencode != do_t_branch23)
+	  if (opcode->tencode != do_t_blx && opcode->tencode != do_t_branch23
+	      && !ARM_CPU_HAS_FEATURE(*opcode->tvariant, arm_ext_msr))
 	    inst.size_req = 2;
 	}
 
@@ -14267,10 +14284,11 @@
 			      *opcode->tvariant);
       /* Many Thumb-2 instructions also have Thumb-1 variants, so explicitly
 	 set those bits when Thumb-2 32-bit instructions are seen.  ie.
-	 anything other than bl/blx.
+	 anything other than bl/blx and v6-M instructions.
 	 This is overly pessimistic for relaxable instructions.  */
-      if ((inst.size == 4 && (inst.instruction & 0xf800e800) != 0xf000e800)
-	  || inst.relax)
+      if (((inst.size == 4 && (inst.instruction & 0xf800e800) != 0xf000e800)
+	   || inst.relax)
+	  && !ARM_CPU_HAS_FEATURE(*opcode->tvariant, arm_ext_msr))
 	ARM_MERGE_FEATURE_SETS (thumb_arch_used, thumb_arch_used,
 				arm_ext_v6t2);
     }
@@ -15011,11 +15029,15 @@
 
 #undef ARM_VARIANT
 #define ARM_VARIANT &arm_ext_v3	/* ARM 6 Status register instructions.	*/
+#undef THUMB_VARIANT
+#define THUMB_VARIANT &arm_ext_msr
  TCE(mrs,	10f0000, f3ef8000, 2, (APSR_RR, RVC_PSR), mrs, t_mrs),
  TCE(msr,	120f000, f3808000, 2, (RVC_PSR, RR_EXi), msr, t_msr),
 
 #undef ARM_VARIANT
 #define ARM_VARIANT &arm_ext_v3m	 /* ARM 7M long multiplies.  */
+#undef THUMB_VARIANT
+#define THUMB_VARIANT &arm_ext_v6t2
  TCE(smull,	0c00090, fb800000, 4, (RRnpc, RRnpc, RRnpc, RRnpc), mull, t_mull),
   CM(smull,s,	0d00090,           4, (RRnpc, RRnpc, RRnpc, RRnpc), mull),
  TCE(umull,	0800090, fba00000, 4, (RRnpc, RRnpc, RRnpc, RRnpc), mull, t_mull),
@@ -15289,11 +15311,23 @@
  TCE(tbb,       0, e8d0f000, 1, (TB), 0, t_tb),
  TCE(tbh,       0, e8d0f010, 1, (TB), 0, t_tb),
 
- /* Thumb-2 hardware division instructions (R and M profiles only).  */
+ /* Thumb-2 hardware division instructions (R and M profiles only) and
+    Marvell-specific encoding of sdiv and udiv as mrc.  */
 #undef THUMB_VARIANT
 #define THUMB_VARIANT &arm_ext_div
- TCE(sdiv,	0, fb90f0f0, 3, (RR, oRR, RR), 0, t_div),
- TCE(udiv,	0, fbb0f0f0, 3, (RR, oRR, RR), 0, t_div),
+#undef ARM_VARIANT
+#define ARM_VARIANT &arm_ext_marvell_f
+ TCE(sdiv,	e300690, fb90f0f0, 3, (RR, oRR, RR), marvell_div, t_div),
+ TCE(udiv,	e300610, fbb0f0f0, 3, (RR, oRR, RR), marvell_div, t_div),
+
+ /* ARM V6M/V7 instructions.  */
+#undef ARM_VARIANT
+#define ARM_VARIANT &arm_ext_barrier
+#undef THUMB_VARIANT
+#define THUMB_VARIANT &arm_ext_barrier
+ TUF(dmb,	57ff050, f3bf8f50, 1, (oBARRIER), barrier,  t_barrier),
+ TUF(dsb,	57ff040, f3bf8f40, 1, (oBARRIER), barrier,  t_barrier),
+ TUF(isb,	57ff060, f3bf8f60, 1, (oBARRIER), barrier,  t_barrier),
 
  /* ARM V7 instructions.  */
 #undef ARM_VARIANT
@@ -15302,9 +15336,6 @@
 #define THUMB_VARIANT &arm_ext_v7
  TUF(pli,	450f000, f910f000, 1, (ADDR),	  pli,	    t_pld),
  TCE(dbg,	320f0f0, f3af80f0, 1, (I15),	  dbg,	    t_dbg),
- TUF(dmb,	57ff050, f3bf8f50, 1, (oBARRIER), barrier,  t_barrier),
- TUF(dsb,	57ff040, f3bf8f40, 1, (oBARRIER), barrier,  t_barrier),
- TUF(isb,	57ff060, f3bf8f60, 1, (oBARRIER), barrier,  t_barrier),
 
 #undef ARM_VARIANT
 #define ARM_VARIANT &fpu_fpa_ext_v1  /* Core FPA instruction set (V1).  */
@@ -18824,7 +18855,7 @@
          if (encoded_addend == (unsigned int) FAIL)
 	   as_bad_where (fixP->fx_file, fixP->fx_line,
 	                 _("the offset 0x%08lX is not representable"),
-                         (unsigned long) addend_abs);
+                         addend_abs);
 
          /* Extract the instruction.  */
          insn = md_chars_to_number (buf, INSN_SIZE);
@@ -18864,7 +18895,7 @@
           if (addend_abs >= 0x1000)
 	    as_bad_where (fixP->fx_file, fixP->fx_line,
 	  	          _("bad offset 0x%08lX (only 12 bits available for the magnitude)"),
-                          (unsigned long) addend_abs);
+                          addend_abs);
 
           /* Extract the instruction.  */
           insn = md_chars_to_number (buf, INSN_SIZE);
@@ -18903,7 +18934,7 @@
           if (addend_abs >= 0x100)
 	    as_bad_where (fixP->fx_file, fixP->fx_line,
 	  	          _("bad offset 0x%08lX (only 8 bits available for the magnitude)"),
-                          (unsigned long) addend_abs);
+                          addend_abs);
 
           /* Extract the instruction.  */
           insn = md_chars_to_number (buf, INSN_SIZE);
@@ -18943,12 +18974,12 @@
           if (addend_abs & 0x3)
 	    as_bad_where (fixP->fx_file, fixP->fx_line,
 	  	          _("bad offset 0x%08lX (must be word-aligned)"),
-                          (unsigned long) addend_abs);
+                          addend_abs);
 
           if ((addend_abs >> 2) > 0xff)
 	    as_bad_where (fixP->fx_file, fixP->fx_line,
 	  	          _("bad offset 0x%08lX (must be an 8-bit number of words)"),
-                          (unsigned long) addend_abs);
+                          addend_abs);
 
           /* Extract the instruction.  */
           insn = md_chars_to_number (buf, INSN_SIZE);
@@ -20071,6 +20102,7 @@
                                                           NULL},
   {"cortex-r4",		ARM_ARCH_V7R,	 FPU_NONE,	  NULL},
   {"cortex-m3",		ARM_ARCH_V7M,	 FPU_NONE,	  NULL},
+  {"cortex-m1",		ARM_ARCH_V6M,	 FPU_NONE,	  NULL},
   /* ??? XSCALE is really an architecture.  */
   {"xscale",		ARM_ARCH_XSCALE, FPU_ARCH_VFP_V2, NULL},
   /* ??? iwmmxt is not a processor.  */
@@ -20079,6 +20111,8 @@
   {"i80200",		ARM_ARCH_XSCALE, FPU_ARCH_VFP_V2, NULL},
   /* Maverick */
   {"ep9312",	ARM_FEATURE(ARM_AEXT_V4T, ARM_CEXT_MAVERICK), FPU_ARCH_MAVERICK, "ARM920T"},
+  /* Marvell */
+  {"marvell-f",         ARM_ARCH_MARVELL_F, FPU_ARCH_VFP_V2, NULL},
   {NULL,		ARM_ARCH_NONE,	 ARM_ARCH_NONE, NULL}
 };
 
@@ -20119,6 +20153,7 @@
   {"armv6kt2",		ARM_ARCH_V6KT2,	 FPU_ARCH_VFP},
   {"armv6zt2",		ARM_ARCH_V6ZT2,	 FPU_ARCH_VFP},
   {"armv6zkt2",		ARM_ARCH_V6ZKT2, FPU_ARCH_VFP},
+  {"armv6-m",		ARM_ARCH_V6M,	 FPU_ARCH_VFP},
   {"armv7",		ARM_ARCH_V7,	 FPU_ARCH_VFP},
   /* The official spelling of the ARMv7 profile variants is the dashed form.
      Accept the non-dashed form for compatibility with old toolchains.  */
@@ -20131,6 +20166,7 @@
   {"xscale",		ARM_ARCH_XSCALE, FPU_ARCH_VFP},
   {"iwmmxt",		ARM_ARCH_IWMMXT, FPU_ARCH_VFP},
   {"iwmmxt2",		ARM_ARCH_IWMMXT2,FPU_ARCH_VFP},
+  {"marvell-f",		ARM_ARCH_MARVELL_F,FPU_ARCH_VFP},
   {NULL,		ARM_ARCH_NONE,	 ARM_ARCH_NONE}
 };
 
@@ -20549,8 +20585,9 @@
     {5, ARM_ARCH_V5TEJ},
     {6, ARM_ARCH_V6},
     {7, ARM_ARCH_V6Z},
-    {8, ARM_ARCH_V6K},
-    {9, ARM_ARCH_V6T2},
+    {9, ARM_ARCH_V6K},
+    {9, ARM_ARCH_V6M},
+    {8, ARM_ARCH_V6T2},
     {10, ARM_ARCH_V7A},
     {10, ARM_ARCH_V7R},
     {10, ARM_ARCH_V7M},
@@ -20612,7 +20649,7 @@
     bfd_elf_add_proc_attr_int (stdoutput, 7, 'A');
   else if (ARM_CPU_HAS_FEATURE (flags, arm_ext_v7r))
     bfd_elf_add_proc_attr_int (stdoutput, 7, 'R');
-  else if (ARM_CPU_HAS_FEATURE (flags, arm_ext_v7m))
+  else if (ARM_CPU_HAS_FEATURE (flags, arm_ext_m))
     bfd_elf_add_proc_attr_int (stdoutput, 7, 'M');
   /* Tag_ARM_ISA_use.  */
   if (ARM_CPU_HAS_FEATURE (arm_arch_used, arm_arch_full))
diff -Nur binutils-2.18.50.0.1/gas/config/tc-i386.c binutils-stable/gas/config/tc-i386.c
--- binutils-2.18.50.0.1/gas/config/tc-i386.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/config/tc-i386.c	2007-09-25 15:41:37.000000000 +0200
@@ -2664,15 +2664,9 @@
 	      || !MATCH (overlap1, i.types[1], operand_types[1])
 	      /* monitor in SSE3 is a very special case.  The first
 		 register and the second register may have different
-		 sizes.  The same applies to crc32 in SSE4.2.  It is
-		 also true for invlpga, vmload, vmrun and vmsave in
-		 SVME.  */
+		 sizes.  The same applies to crc32 in SSE4.2.  */
 	      || !((t->base_opcode == 0x0f01
-		    && (t->extension_opcode == 0xc8
-			|| t->extension_opcode == 0xd8
-			|| t->extension_opcode == 0xda
-			|| t->extension_opcode == 0xdb
-			|| t->extension_opcode == 0xdf))
+		    && t->extension_opcode == 0xc8)
 		   || t->base_opcode == 0xf20f38f1
 		   || CONSISTENT_REGISTER_MATCH (overlap0, i.types[0],
 						 operand_types[0],
@@ -3006,17 +3000,11 @@
       /* Now select between word & dword operations via the operand
 	 size prefix, except for instructions that will ignore this
 	 prefix anyway.  */
-      if (i.tm.base_opcode == 0x0f01
-	   && (i.tm.extension_opcode == 0xc8
-	       || i.tm.extension_opcode == 0xd8
-	       || i.tm.extension_opcode == 0xda
-	       || i.tm.extension_opcode == 0xdb
-	       || i.tm.extension_opcode == 0xdf))
+      if (i.tm.base_opcode == 0x0f01 && i.tm.extension_opcode == 0xc8)
 	{
 	  /* monitor in SSE3 is a very special case. The default size
 	     of AX is the size of mode. The address size override
-	     prefix will change the size of AX.  It is also true for
-	     invlpga, vmload, vmrun and vmsave in SVME.  */
+	     prefix will change the size of AX.  */
 	  if (i.op->regs[0].reg_type &
 	      (flag_code == CODE_32BIT ? Reg16 : Reg32))
 	    if (!add_prefix (ADDR_PREFIX_OPCODE))
@@ -3044,17 +3032,11 @@
 	  && (i.tm.opcode_modifier & NoRex64) == 0)
 	{
 	  /* Special case for xchg %rax,%rax.  It is NOP and doesn't
-	     need rex64.  cmpxchg8b is also a special case. */
-	  if (! (i.operands == 2
-		 && i.tm.base_opcode == 0x90
-		 && i.tm.extension_opcode == None
-		 && i.types [0] == (Acc | Reg64)
-		 && i.types [1] == (Acc | Reg64))
-	      && ! (i.operands == 1
-		    && i.tm.base_opcode == 0xfc7
-		    && i.tm.extension_opcode == 1
-		    && (i.types [0] & Reg) == 0
-		    && (i.types [0] & AnyMem) != 0))
+	     need rex64.  */
+	  if (i.operands != 2
+	      || i.types [0] != (Acc | Reg64)
+	      || i.types [1] != (Acc | Reg64)
+	      || i.tm.base_opcode != 0x90)
 	    i.rex |= REX_W;
 	}
 
@@ -3489,9 +3471,9 @@
       default_seg = &ds;
     }
 
-  if (i.tm.base_opcode == 0x8d /* lea */
-      && i.seg[0]
-      && !quiet_warnings)
+  if ((i.tm.base_opcode == 0x8d /* lea */
+       || (i.tm.cpu_flags & CpuSVME))
+      && i.seg[0] && !quiet_warnings)
     as_warn (_("segment override on `%s' is ineffectual"), i.tm.name);
 
   /* If a segment was explicitly specified, and the specified segment
@@ -4503,7 +4485,7 @@
     return NULL;
 
   for (cp = input_line_pointer; *cp != '@'; cp++)
-    if (is_end_of_line[(unsigned char) *cp] || *cp == ',')
+    if (is_end_of_line[(unsigned char) *cp])
       return NULL;
 
   for (j = 0; j < sizeof (gotrel) / sizeof (gotrel[0]); j++)
@@ -4537,12 +4519,12 @@
 	      first = cp - input_line_pointer;
 
 	      /* The second part goes from after the reloc token until
-		 (and including) an end_of_line char or comma.  */
+		 (and including) an end_of_line char.  Don't use strlen
+		 here as the end_of_line char may not be a NUL.  */
 	      past_reloc = cp + 1 + len;
-	      cp = past_reloc;
-	      while (!is_end_of_line[(unsigned char) *cp] && *cp != ',')
-		++cp;
-	      second = cp + 1 - past_reloc;
+	      for (cp = past_reloc; !is_end_of_line[(unsigned char) *cp++]; )
+		;
+	      second = cp - past_reloc;
 
 	      /* Allocate and copy string.  The trailing NUL shouldn't
 		 be necessary, but be safe.  */
@@ -4974,7 +4956,30 @@
  tryprefix:
 #endif
   ok = 1;
-  if (flag_code == CODE_64BIT)
+  if ((current_templates->start->cpu_flags & CpuSVME)
+      && current_templates->end[-1].operand_types[0] == AnyMem)
+    {
+      /* Memory operands of SVME insns are special in that they only allow
+	 rAX as their memory address and ignore any segment override.  */
+      unsigned RegXX;
+
+      /* SKINIT is even more restrictive: it always requires EAX.  */
+      if (strcmp (current_templates->start->name, "skinit") == 0)
+	RegXX = Reg32;
+      else if (flag_code == CODE_64BIT)
+	RegXX = i.prefix[ADDR_PREFIX] == 0 ? Reg64 : Reg32;
+      else
+	RegXX = ((flag_code == CODE_16BIT) ^ (i.prefix[ADDR_PREFIX] != 0)
+		 ? Reg16
+		 : Reg32);
+      if (!i.base_reg
+	  || !(i.base_reg->reg_type & Acc)
+	  || !(i.base_reg->reg_type & RegXX)
+	  || i.index_reg
+	  || (i.types[0] & Disp))
+	ok = 0;
+    }
+  else if (flag_code == CODE_64BIT)
     {
       unsigned RegXX = (i.prefix[ADDR_PREFIX] == 0 ? Reg64 : Reg32);
 
@@ -4993,7 +4998,7 @@
 	{
 	  /* 16bit checks.  */
 	  if ((i.base_reg
-	       && ((i.base_reg->reg_type & (Reg16 | BaseIndex))
+	       && ((i.base_reg->reg_type & (Reg16 | BaseIndex | RegRex))
 		   != (Reg16 | BaseIndex)))
 	      || (i.index_reg
 		  && (((i.index_reg->reg_type & (Reg16 | BaseIndex))
@@ -5008,9 +5013,9 @@
 	{
 	  /* 32bit checks.  */
 	  if ((i.base_reg
-	       && (i.base_reg->reg_type & Reg32) != Reg32)
+	       && (i.base_reg->reg_type & (Reg32 | RegRex)) != Reg32)
 	      || (i.index_reg
-		  && ((i.index_reg->reg_type & (Reg32 | BaseIndex))
+		  && ((i.index_reg->reg_type & (Reg32 | BaseIndex | RegRex))
 		      != (Reg32 | BaseIndex))))
 	    ok = 0;
 	}
@@ -5897,8 +5902,7 @@
     }
 
   if (r != NULL
-      && ((r->reg_flags & (RegRex64 | RegRex))
-	  || (r->reg_type & Reg64))
+      && ((r->reg_flags & (RegRex64 | RegRex)) | (r->reg_type & Reg64)) != 0
       && (r->reg_type != Control || !(cpu_arch_flags & CpuSledgehammer))
       && flag_code != CODE_64BIT)
     return (const reg_entry *) NULL;
diff -Nur binutils-2.18.50.0.1/gas/config/tc-m68k.c binutils-stable/gas/config/tc-m68k.c
--- binutils-2.18.50.0.1/gas/config/tc-m68k.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/config/tc-m68k.c	2007-09-25 15:41:37.000000000 +0200
@@ -309,7 +309,7 @@
   0
 };
 static const enum m68k_register fido_ctrl[] = {
-  SFC, DFC, USP, VBR, CAC, MBB,
+  SFC, DFC, USP, VBR, CAC, MBO,
   0
 };
 #define cpu32_ctrl m68010_ctrl
@@ -380,6 +380,7 @@
 	((x) & (m68020|m68030|m68040|m68060|cpu32|fido_a|mcfisa_b|mcfisa_c))
 #define HAVE_LONG_BRANCH(x)	\
 	((x) & (m68020|m68030|m68040|m68060|cpu32|fido_a|mcfisa_b))
+#define LONG_BRANCH_VIA_COND(x) (HAVE_LONG_COND(x) && !HAVE_LONG_BRANCH(x))
 
 static struct m68k_it the_ins;	/* The instruction being assembled.  */
 
@@ -734,8 +735,14 @@
 #define PCINDEX		8	/* PC + displacement + index. */
 #define ABSTOPCREL	9	/* Absolute relax down to 16-bit PC-relative.  */
 
+/* This relaxation is required for branches where there is no long
+   branch and we are in pcrel mode.  We generate a bne/beq pair.  */
+#define BRANCHBWPL	10      /* Branch byte, word or pair of longs
+				   */
+
 /* Note that calls to frag_var need to specify the maximum expansion
-   needed; this is currently 10 bytes for DBCC.  */
+   needed; this is currently 12 bytes for bne/beq pair.  */
+#define FRAG_VAR_SIZE 12
 
 /* The fields are:
    How far Forward this mode will reach:
@@ -795,6 +802,11 @@
   { 32767, -32768,  2, TAB (ABSTOPCREL, LONG) },
   {	0,	0,  4, 0 },
   {	1,	1,  0, 0 },
+  
+  {   127,   -128,  0, TAB (BRANCHBWPL, SHORT) },
+  { 32767, -32768,  2, TAB (BRANCHBWPL, LONG) },
+  {     0,	0,  10, 0 },
+  {     1,	1,  0, 0 },
 };
 
 /* These are the machine dependent pseudo-ops.  These are included so
@@ -2186,6 +2198,9 @@
 		case mcfisa_b:
 		  APPEND (_("ColdFire ISA_B"));
 		  break;
+		case mcfisa_c:
+		  APPEND (_("ColdFire ISA_C"));
+		  break;
 		case cfloat:
 		  APPEND (_("ColdFire fpu"));
 		  break;
@@ -2272,6 +2287,7 @@
   for (s = the_ins.args, opP = &the_ins.operands[0]; *s; s += 2, opP++)
     {
       int have_disp = 0;
+      int use_pl = 0;
       
       /* This switch is a doozy.
 	 Watch the first step; its a big one! */
@@ -2955,6 +2971,7 @@
 	      
 	    case 'b': /* Unconditional branch */
 	      have_disp = HAVE_LONG_BRANCH (current_architecture);
+	      use_pl = LONG_BRANCH_VIA_COND (current_architecture);
 	      goto var_branch;
 	      
 	    case 's': /* Unconditional subroutine */
@@ -3018,7 +3035,8 @@
 	      else
 		add_frag (adds (&opP->disp),
 			  SEXT (offs (&opP->disp)),
-			  TAB (BRANCHBW, SZ_UNDEF));
+			  (use_pl ? TAB (BRANCHBWPL, SZ_UNDEF)
+			   : TAB (BRANCHBW, SZ_UNDEF)));
 	      break;
 	    case 'w':
 	      if (isvar (&opP->disp))
@@ -3247,7 +3265,7 @@
             case CAC:
               tmpreg = 0xFFE;
               break;
-            case MBB:
+            case MBO:
               tmpreg = 0xFFF;
               break;
 	    default:
@@ -3568,10 +3586,9 @@
   return out;
 }				/* reverse_8_bits() */
 
-/* Cause an extra frag to be generated here, inserting up to 10 bytes
-   (that value is chosen in the frag_var call in md_assemble).  TYPE
-   is the subtype of the frag to be generated; its primary type is
-   rs_machine_dependent.
+/* Cause an extra frag to be generated here, inserting up to
+   FRAG_VAR_SIZE bytes.  TYPE is the subtype of the frag to be
+   generated; its primary type is rs_machine_dependent.
 
    The TYPE parameter is also used by md_convert_frag_1 and
    md_estimate_size_before_relax.  The appropriate type of fixup will
@@ -3989,7 +4006,8 @@
   { "mbar2",    MBAR2 },  	/* mcf5249 registers.  */
 
   { "cac",    CAC },  		/* fido registers.  */
-  { "mbb",    MBB },  		/* fido registers.  */
+  { "mbb",    MBO },  		/* fido registers (obsolete).  */
+  { "mbo",    MBO },  		/* fido registers.  */
   /* End of control registers.  */
 
   { "ac", AC },
@@ -4244,7 +4262,7 @@
     for (n = 1; n < the_ins.nfrag; n++)
       wid += 2 * (the_ins.numo - the_ins.fragb[n - 1].fragoff);
     /* frag_var part.  */
-    wid += 10;
+    wid += FRAG_VAR_SIZE;
     /* Make sure the whole insn fits in one chunk, in particular that
        the var part is attached, as we access one byte before the
        variable frag for byte branches.  */
@@ -4292,7 +4310,7 @@
 					      the_ins.reloc[m].pic_reloc));
 	  fixP->fx_pcrel_adjust = the_ins.reloc[m].pcrel_fix;
 	}
-      (void) frag_var (rs_machine_dependent, 10, 0,
+      (void) frag_var (rs_machine_dependent, FRAG_VAR_SIZE, 0,
 		       (relax_substateT) (the_ins.fragb[n].fragty),
 		       the_ins.fragb[n].fadd, the_ins.fragb[n].foff, to_beg_P);
     }
@@ -4864,6 +4882,7 @@
     case TAB (BRABSJUNC, BYTE):
     case TAB (BRABSJCOND, BYTE):
     case TAB (BRANCHBW, BYTE):
+    case TAB (BRANCHBWPL, BYTE):
       know (issbyte (disp));
       if (disp == 0)
 	as_bad_where (fragP->fr_file, fragP->fr_line,
@@ -4876,6 +4895,7 @@
     case TAB (BRABSJUNC, SHORT):
     case TAB (BRABSJCOND, SHORT):
     case TAB (BRANCHBW, SHORT):
+    case TAB (BRANCHBWPL, SHORT):
       fragP->fr_opcode[1] = 0x00;
       fixP = fix_new (fragP, fragP->fr_fix, 2, fragP->fr_symbol,
 		      fragP->fr_offset, 1, RELAX_RELOC_PC16);
@@ -4887,6 +4907,24 @@
 		      fragP->fr_offset, 1, RELAX_RELOC_PC32);
       fragP->fr_fix += 4;
       break;
+    case TAB (BRANCHBWPL, LONG):
+      /* Here we are converting an unconditional branch into a pair of
+	 conditional branches, in order to get the range.  */
+      fragP->fr_opcode[0] = 0x66; /* bne */
+      fragP->fr_opcode[1] = 0xFF;
+      fixP = fix_new (fragP, fragP->fr_fix, 4, fragP->fr_symbol,
+		      fragP->fr_offset, 1, RELAX_RELOC_PC32);
+      fixP->fx_file = fragP->fr_file;
+      fixP->fx_line = fragP->fr_line;
+      fragP->fr_fix += 4;  /* Skip first offset */
+      buffer_address += 4;
+      *buffer_address++ = 0x67; /* beq */
+      *buffer_address++ = 0xff;
+      fragP->fr_fix += 2;  /* Skip second branch opcode */
+      fixP = fix_new (fragP, fragP->fr_fix, 4, fragP->fr_symbol,
+		      fragP->fr_offset, 1, RELAX_RELOC_PC32);
+      fragP->fr_fix += 4;
+      break;
     case TAB (BRABSJUNC, LONG):
       if (fragP->fr_opcode[0] == 0x61)		/* jbsr */
 	{
@@ -5082,6 +5120,7 @@
   switch (fragP->fr_subtype)
     {
     case TAB (BRANCHBWL, SZ_UNDEF):
+    case TAB (BRANCHBWPL, SZ_UNDEF):
     case TAB (BRABSJUNC, SZ_UNDEF):
     case TAB (BRABSJCOND, SZ_UNDEF):
       {
@@ -7749,6 +7788,7 @@
 	{EF_M68K_CF_ISA_B_NOUSP,mcfisa_a|mcfisa_b|mcfhwdiv},
 	{EF_M68K_CF_ISA_B,	mcfisa_a|mcfisa_b|mcfhwdiv|mcfusp},
 	{EF_M68K_CF_ISA_C,	mcfisa_a|mcfisa_c|mcfhwdiv|mcfusp},
+	{EF_M68K_CF_ISA_C_NODIV,mcfisa_a|mcfisa_c|mcfusp},
 	{0,0},
       };
       static const unsigned mac_features[][2] =
diff -Nur binutils-2.18.50.0.1/gas/config/tc-mips.c binutils-stable/gas/config/tc-mips.c
--- binutils-2.18.50.0.1/gas/config/tc-mips.c	2007-08-01 15:11:50.000000000 +0200
+++ binutils-stable/gas/config/tc-mips.c	2007-09-25 15:41:37.000000000 +0200
@@ -73,6 +73,8 @@
 
 int mips_flag_mdebug = -1;
 
+static int octeon_use_unalign = 0;
+
 /* Control generation of .pdr sections.  Off by default on IRIX: the native
    linker doesn't know about and discards them, but relocations against them
    remain, leading to rld crashes.  */
@@ -367,6 +369,12 @@
   ((ISA) == ISA_MIPS32R2		\
    || (ISA) == ISA_MIPS64R2)
 
+/* Return true if ISA supports ins instructions. */
+#define ISA_HAS_INS(ISA) ( \
+  (ISA) == ISA_MIPS32R2    \
+  || (ISA) == ISA_MIPS64R2 \
+  )
+
 #define HAVE_32BIT_GPRS		                   \
     (mips_opts.gp32 || !ISA_HAS_64BIT_REGS (mips_opts.isa))
 
@@ -415,11 +423,16 @@
     || strncmp (TARGET_CANONICAL, "mips-lsi-elf", sizeof ("mips-lsi-elf") - 1) == 0)
 
 /* True if CPU has a dror instruction.  */
-#define CPU_HAS_DROR(CPU)	((CPU) == CPU_VR5400 || (CPU) == CPU_VR5500)
+#define CPU_HAS_DROR(CPU)	((CPU) == CPU_VR5400 	\
+			          || (CPU) == CPU_VR5500 \
+				  || (CPU) == CPU_OCTEON)
 
 /* True if CPU has a ror instruction.  */
 #define CPU_HAS_ROR(CPU)	CPU_HAS_DROR (CPU)
 
+/* True if CPU has a ins instruction. */
+#define CPU_HAS_INS(CPU)	((CPU) == CPU_OCTEON)
+
 /* True if mflo and mfhi can be immediately followed by instructions
    which write to the HI and LO registers.
 
@@ -3454,6 +3467,10 @@
 	case 'z':
 	  continue;
 
+	case '^': 
+	  INSERT_OPERAND (BITIND, insn, va_arg (args, int));
+	  continue;
+
 	case '<':
 	  INSERT_OPERAND (SHAMT, insn, va_arg (args, int));
 	  continue;
@@ -3471,6 +3488,7 @@
 	  continue;
 
 	case 'q':
+	case 'y':
 	  INSERT_OPERAND (CODE2, insn, va_arg (args, int));
 	  continue;
 
@@ -7751,8 +7769,13 @@
       else
 	++offset_expr.X_add_number;
       macro_build (&offset_expr, "lbu", "t,o(b)", treg, BFD_RELOC_LO16, breg);
-      macro_build (NULL, "sll", "d,w,<", AT, AT, 8);
-      macro_build (NULL, "or", "d,v,t", treg, treg, AT);
+      if (ISA_HAS_INS (mips_opts.isa) || CPU_HAS_INS (mips_opts.arch))
+	macro_build (NULL, "ins", "t,r,+A,+B", treg, AT, 8, 31); 
+      else
+	{
+	  macro_build (NULL, "sll", "d,w,<", AT, AT, 8);
+	  macro_build (NULL, "or", "d,v,t", treg, treg, AT);
+	}
       break;
 
     case M_ULD:
@@ -7792,11 +7815,21 @@
       break;
 
     case M_ULD_A:
+      if (mips_opts.arch == CPU_OCTEON && octeon_use_unalign)
+	{
+	  s = "uld";
+	  goto ld;
+	}
       s = "ldl";
       s2 = "ldr";
       off = 7;
       goto ulwa;
     case M_ULW_A:
+      if (mips_opts.arch == CPU_OCTEON && octeon_use_unalign)
+	{
+	  s = "ulw";
+	  goto ld;
+	}
       s = "lwl";
       s2 = "lwr";
       off = 3;
@@ -7823,17 +7856,25 @@
       load_address (AT, &offset_expr, &used_at);
       if (breg != 0)
 	macro_build (NULL, ADDRESS_ADD_INSN, "d,v,t", AT, AT, breg);
-      if (target_big_endian)
-	expr1.X_add_number = 0;
-      macro_build (&expr1, mask == M_ULH_A ? "lb" : "lbu", "t,o(b)",
-		   treg, BFD_RELOC_LO16, AT);
-      if (target_big_endian)
-	expr1.X_add_number = 1;
+      if (ISA_HAS_INS (mips_opts.isa) || CPU_HAS_INS (mips_opts.arch))
+	{
+	  expr1.X_add_number = target_big_endian ? 1 : 0;
+	  macro_build (&expr1, "lbu", "t,o(b)", treg, BFD_RELOC_LO16, AT);
+	  expr1.X_add_number = target_big_endian ? 0 : 1;
+	  macro_build (&expr1, mask == M_ULH_A ? "lb" : "lbu", "t,o(b)",
+		       AT, BFD_RELOC_LO16, AT);
+	  macro_build (NULL, "ins", "t,r,+A,+B", treg, AT, 8, 31);
+	}
       else
-	expr1.X_add_number = 0;
-      macro_build (&expr1, "lbu", "t,o(b)", AT, BFD_RELOC_LO16, AT);
-      macro_build (NULL, "sll", "d,w,<", treg, treg, 8);
-      macro_build (NULL, "or", "d,v,t", treg, treg, AT);
+	{
+	  expr1.X_add_number = target_big_endian ? 0 : 1;
+	  macro_build (&expr1, mask == M_ULH_A ? "lb" : "lbu", "t,o(b)",
+		       treg, BFD_RELOC_LO16, AT);
+	  expr1.X_add_number = target_big_endian ? 1 : 0;
+	  macro_build (&expr1, "lbu", "t,o(b)", AT, BFD_RELOC_LO16, AT);
+	  macro_build (NULL, "sll", "d,w,<", treg, treg, 8);
+	  macro_build (NULL, "or", "d,v,t", treg, treg, AT);
+	}
       break;
 
     case M_USH:
@@ -7874,11 +7915,21 @@
       break;
 
     case M_USD_A:
+      if (mips_opts.arch == CPU_OCTEON && octeon_use_unalign)
+	{
+	  s = "usd";
+	  goto st;
+	}
       s = "sdl";
       s2 = "sdr";
       off = 7;
       goto uswa;
     case M_USW_A:
+      if (mips_opts.arch == CPU_OCTEON && octeon_use_unalign)
+	{
+	  s = "usw";
+	  goto st;
+	}
       s = "swl";
       s2 = "swr";
       off = 3;
@@ -8186,6 +8237,8 @@
       case ',': break;
       case '(': break;
       case ')': break;
+      case '^': USE_BITS (OP_MASK_BITIND,       OP_SH_BITIND);   break;
+      case ';': USE_BITS (OP_MASK_BITIND,       OP_SH_BITIND);   break;
       case '+':
     	switch (c = *p++)
 	  {
@@ -8252,6 +8305,7 @@
       case 'o': USE_BITS (OP_MASK_DELTA,	OP_SH_DELTA);	break;
       case 'p':	USE_BITS (OP_MASK_DELTA,	OP_SH_DELTA);	break;
       case 'q':	USE_BITS (OP_MASK_CODE2,	OP_SH_CODE2);	break;
+      case 'y':	USE_BITS (OP_MASK_CODE2,	OP_SH_CODE2);	break;
       case 'r': USE_BITS (OP_MASK_RS,		OP_SH_RS);	break;
       case 's':	USE_BITS (OP_MASK_RS,		OP_SH_RS);	break;
       case 't':	USE_BITS (OP_MASK_RT,		OP_SH_RT);	break;
@@ -8458,6 +8512,32 @@
 	{
 	  if (mips_opts.arch == CPU_R4650 && (insn->pinfo & FP_D) != 0)
 	    ok = FALSE;
+
+	  if (mips_opts.arch == CPU_OCTEON
+	      && !octeon_use_unalign
+	      && (strcmp (insn->name, "ulw") == 0
+		  || strcmp (insn->name, "uld") == 0
+		  || strcmp (insn->name, "usw") == 0
+		  || strcmp (insn->name, "usd") == 0))
+	    ok = FALSE;
+
+	  if (mips_opts.arch == CPU_OCTEON
+	      && octeon_use_unalign
+	      && (strcmp (insn->name, "lwl") == 0
+		  || strcmp (insn->name, "lwr") == 0
+		  || strcmp (insn->name, "ldl") == 0
+		  || strcmp (insn->name, "ldr") == 0
+		  || strcmp (insn->name, "sdl") == 0
+		  || strcmp (insn->name, "sdr") == 0
+		  || strcmp (insn->name, "swr") == 0
+		  || strcmp (insn->name, "swl") == 0))
+	    {
+	      static char buf[100];
+	      sprintf (buf, _("Unaligned load/store instructions are not "
+			      "allowed with -mocteon-useun"));
+	      insn_error = buf;
+	      return;
+	    }
 	}
 
       if (! ok)
@@ -8965,6 +9045,32 @@
 	      s = expr_end;
 	      continue;
 
+	    case '^':           /* must be at least one digit */
+	      my_getExpression (&imm_expr, s);
+	      check_absolute_expr (ip, &imm_expr);
+	      if (imm_expr.X_add_number < 0
+		  || imm_expr.X_add_number > 31)
+		{
+		  as_warn (_("Improper bit index amount (%lu)"),
+			   (unsigned long) imm_expr.X_add_number);
+		  imm_expr.X_add_number &= OP_MASK_BITIND;
+		}
+	      INSERT_OPERAND (BITIND, *ip, imm_expr.X_add_number);
+	      imm_expr.X_op = O_absent;
+	      s = expr_end;
+	      continue;
+                                                                               
+            case ';':           /* bit index minus 32 */
+	      my_getExpression (&imm_expr, s);
+	      check_absolute_expr (ip, &imm_expr);
+	      if (imm_expr.X_add_number < 32
+		  || imm_expr.X_add_number > 63)
+		break;
+	      INSERT_OPERAND (BITIND, *ip, imm_expr.X_add_number - 32);
+	      imm_expr.X_op = O_absent;
+	      s = expr_end;
+	      continue;
+
 	    case 'k':		/* cache code */
 	    case 'h':		/* prefx code */
 	      my_getExpression (&imm_expr, s);
@@ -9005,6 +9111,21 @@
 	      s = expr_end;
 	      continue;
 
+	    case 'y':		/* lower break code */
+	      my_getExpression (&imm_expr, s);
+	      check_absolute_expr (ip, &imm_expr);
+	      if (imm_expr.X_add_number < -512
+		  || imm_expr.X_add_number >= 512)
+		{
+		  as_warn (_("Illegal 10-bit signed constant (%lu)"),
+			   (unsigned long) imm_expr.X_add_number);
+		  imm_expr.X_add_number &= OP_MASK_CODE2;
+		}
+	      INSERT_OPERAND (CODE2, *ip, imm_expr.X_add_number);
+	      imm_expr.X_op = O_absent;
+	      s = expr_end;
+	      continue;
+
 	    case 'B':           /* 20-bit syscall/break code.  */
 	      my_getExpression (&imm_expr, s);
 	      check_absolute_expr (ip, &imm_expr);
@@ -10963,10 +11084,14 @@
 #define OPTION_MNO_SYM32 (OPTION_MISC_BASE + 15)
   {"msym32", no_argument, NULL, OPTION_MSYM32},
   {"mno-sym32", no_argument, NULL, OPTION_MNO_SYM32},
+#define OPTION_OCTEON_UNALIGNED (OPTION_MISC_BASE + 16)
+#define OPTION_NO_OCTEON_UNALIGNED (OPTION_MISC_BASE + 17)
+  {"mocteon-useun", no_argument, NULL, OPTION_OCTEON_UNALIGNED},
+  {"mno-octeon-useun", no_argument, NULL, OPTION_NO_OCTEON_UNALIGNED},
 
   /* ELF-specific options.  */
 #ifdef OBJ_ELF
-#define OPTION_ELF_BASE    (OPTION_MISC_BASE + 16)
+#define OPTION_ELF_BASE    (OPTION_MISC_BASE + 18)
 #define OPTION_CALL_SHARED (OPTION_ELF_BASE + 0)
   {"KPIC",        no_argument, NULL, OPTION_CALL_SHARED},
   {"call_shared", no_argument, NULL, OPTION_CALL_SHARED},
@@ -11236,6 +11361,14 @@
       mips_opts.sym32 = FALSE;
       break;
 
+    case OPTION_OCTEON_UNALIGNED:
+      octeon_use_unalign = 1;
+      break;
+
+    case OPTION_NO_OCTEON_UNALIGNED:
+      octeon_use_unalign = 0;
+      break;
+
 #ifdef OBJ_ELF
       /* When generating ELF code, we permit -KPIC and -call_shared to
 	 select SVR4_PIC, and -non_shared to select no PIC.  This is
@@ -14828,6 +14961,8 @@
 						ISA_MIPS32R2,	CPU_MIPS32R2 },
   { "74kx",           MIPS_CPU_ASE_DSP | MIPS_CPU_ASE_DSPR2,
 						ISA_MIPS32R2,	CPU_MIPS32R2 },
+  { "74kf3_2",        MIPS_CPU_ASE_DSP | MIPS_CPU_ASE_DSPR2,
+						ISA_MIPS32R2,	CPU_MIPS32R2 },
 
   /* MIPS 64 */
   { "5kc",            0,			ISA_MIPS64,	CPU_MIPS64 },
@@ -14844,6 +14979,13 @@
   { "sb1a",           MIPS_CPU_ASE_MIPS3D | MIPS_CPU_ASE_MDMX,
 						ISA_MIPS64,	CPU_SB1 },
 
+  /* Cavium Networks OCTEON CPU core */
+  { "octeon",         0,      ISA_MIPS64R2,   CPU_OCTEON },
+
+  /* ST Microelectronics Loongson 2E and 2F cores */
+  { "loongson2e",     0,      ISA_MIPS3,      CPU_LOONGSON_2E },
+  { "loongson2f",     0,      ISA_MIPS3,      CPU_LOONGSON_2F },
+
   /* End marker */
   { NULL, 0, 0, 0 }
 };
@@ -15072,7 +15214,9 @@
 -O			remove unneeded NOPs and swap branches\n\
 --[no-]construct-floats [dis]allow floating point values to be constructed\n\
 --trap, --no-break	trap exception on div by 0 and mult overflow\n\
---break, --no-trap	break exception on div by 0 and mult overflow\n"));
+--break, --no-trap	break exception on div by 0 and mult overflow\n\
+-mocteon-useun		use Octeon-specific unaligned loads/stores for 32/64-bit data (default)\n\
+-mno-octeon-useun	do not use Octeon-specific unaligned loads/stores for 32/64-bit data\n"));
 #ifdef OBJ_ELF
   fprintf (stream, _("\
 -KPIC, -call_shared	generate SVR4 position independent code\n\
diff -Nur binutils-2.18.50.0.1/gas/config/tc-ppc.c binutils-stable/gas/config/tc-ppc.c
--- binutils-2.18.50.0.1/gas/config/tc-ppc.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/config/tc-ppc.c	2007-09-25 15:41:37.000000000 +0200
@@ -396,24 +396,6 @@
 
   { "fpscr", 0 },
 
-  /* Quantization registers used with pair single instructions.  */
-  { "gqr.0", 0 },
-  { "gqr.1", 1 },
-  { "gqr.2", 2 },
-  { "gqr.3", 3 },
-  { "gqr.4", 4 },
-  { "gqr.5", 5 },
-  { "gqr.6", 6 },
-  { "gqr.7", 7 },
-  { "gqr0", 0 },
-  { "gqr1", 1 },
-  { "gqr2", 2 },
-  { "gqr3", 3 },
-  { "gqr4", 4 },
-  { "gqr5", 5 },
-  { "gqr6", 6 },
-  { "gqr7", 7 },
-
   { "lr", 8 },     /* Link Register */
 
   { "pmr", 0 },
@@ -842,9 +824,6 @@
 	   || strcmp (arg, "603") == 0
 	   || strcmp (arg, "604") == 0)
     ppc_cpu = PPC_OPCODE_PPC | PPC_OPCODE_CLASSIC | PPC_OPCODE_32;
-  /* Do all PPC750s have paired single ops?  */
-  else if (strcmp (arg, "750cl") == 0)
-    ppc_cpu = PPC_OPCODE_PPC | PPC_OPCODE_PPCPS;
   /* -m403 and -m405 mean to assemble for the PowerPC 403/405.  */
   else if (strcmp (arg, "403") == 0
 	   || strcmp (arg, "405") == 0)
@@ -885,6 +864,10 @@
     }
   /* -mppc64 and -m620 mean to assemble for the 64-bit PowerPC
      620.  */
+  else if (strcmp (arg, "pmr") == 0)
+    {
+      ppc_cpu |= PPC_OPCODE_PMR;
+    }
   else if (strcmp (arg, "ppc64") == 0 || strcmp (arg, "620") == 0)
     {
       ppc_cpu = PPC_OPCODE_PPC | PPC_OPCODE_CLASSIC | PPC_OPCODE_64;
@@ -1112,8 +1095,7 @@
 -m403, -m405		generate code for PowerPC 403/405\n\
 -m440			generate code for PowerPC 440\n\
 -m7400, -m7410, -m7450, -m7455\n\
-			generate code for PowerPC 7400/7410/7450/7455\n\
--m750cl			generate code for PowerPC 750cl\n"));
+			generate code For PowerPC 7400/7410/7450/7455\n"));
   fprintf (stream, _("\
 -mppc64, -m620		generate code for PowerPC 620/625/630\n\
 -mppc64bridge		generate code for PowerPC 64, including bridge insns\n\
@@ -2661,14 +2643,6 @@
 	{
 	  endc = ')';
 	  need_paren = 0;
-	  /* If expecting more operands, then we want to see "),".  */
-	  if (*str == endc && opindex_ptr[1] != 0)
-	    {
-	      do
-		++str;
-	      while (ISSPACE (*str));
-	      endc = ',';
-	    }
 	}
       else if ((operand->flags & PPC_OPERAND_PARENS) != 0)
 	{
diff -Nur binutils-2.18.50.0.1/gas/config/tc-spu.c binutils-stable/gas/config/tc-spu.c
--- binutils-2.18.50.0.1/gas/config/tc-spu.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/config/tc-spu.c	2007-09-25 15:41:37.000000000 +0200
@@ -44,7 +44,7 @@
   unsigned int opcode;
   expressionS exp[MAX_RELOCS];
   int reloc_arg[MAX_RELOCS];
-  bfd_reloc_code_real_type reloc[MAX_RELOCS];
+  int flag[MAX_RELOCS];
   enum spu_insns tag;
 };
 
@@ -303,7 +303,7 @@
 	  insn.exp[i].X_add_number = 0;
 	  insn.exp[i].X_op = O_illegal;
 	  insn.reloc_arg[i] = -1;
-	  insn.reloc[i] = BFD_RELOC_NONE;
+	  insn.flag[i] = 0;
 	}
       insn.opcode = format->opcode;
       insn.tag = (enum spu_insns) (format - spu_opcodes);
@@ -352,13 +352,17 @@
     if (insn.reloc_arg[i] >= 0) 
       {
         fixS *fixP;
-        bfd_reloc_code_real_type reloc = insn.reloc[i];
+        bfd_reloc_code_real_type reloc = arg_encode[insn.reloc_arg[i]].reloc;
 	int pcrel = 0;
 
-	if (reloc == BFD_RELOC_SPU_PCREL9a
+        if (reloc == BFD_RELOC_SPU_PCREL9a
 	    || reloc == BFD_RELOC_SPU_PCREL9b
-	    || reloc == BFD_RELOC_SPU_PCREL16)
+            || reloc == BFD_RELOC_SPU_PCREL16)
 	  pcrel = 1;
+	if (insn.flag[i] == 1)
+	  reloc = BFD_RELOC_SPU_HI16;
+	else if (insn.flag[i] == 2)
+	  reloc = BFD_RELOC_SPU_LO16;
 	fixP = fix_new_exp (frag_now,
 			    thisfrag - frag_now->fr_literal,
 			    4,
@@ -390,7 +394,7 @@
       if (arg < A_P)
         param = get_reg (param, insn, arg, 1);
       else if (arg > A_P)
-        param = get_imm (param, insn, arg);
+        param = get_imm (param, insn,  arg);
       else if (arg == A_P)
 	{
 	  paren++;
@@ -684,16 +688,16 @@
       insn->opcode |= (((val >> arg_encode[arg].rshift)
 			& ((1 << arg_encode[arg].size) - 1))
 		       << arg_encode[arg].pos);
+      insn->reloc_arg[reloc_i] = -1;
+      insn->flag[reloc_i] = 0;
     }
   else
     {
       insn->reloc_arg[reloc_i] = arg;
       if (high)
-	insn->reloc[reloc_i] = BFD_RELOC_SPU_HI16;
+	insn->flag[reloc_i] = 1;
       else if (low)
-	insn->reloc[reloc_i] = BFD_RELOC_SPU_LO16;
-      else
-	insn->reloc[reloc_i] = arg_encode[arg].reloc;
+	insn->flag[reloc_i] = 2;
     }
 
   return param;
diff -Nur binutils-2.18.50.0.1/gas/config/te-armeabi.h binutils-stable/gas/config/te-armeabi.h
--- binutils-2.18.50.0.1/gas/config/te-armeabi.h	2007-08-01 15:11:50.000000000 +0200
+++ binutils-stable/gas/config/te-armeabi.h	2007-09-25 15:41:37.000000000 +0200
@@ -19,7 +19,7 @@
 
 /* The EABI requires the use of VFP.  */
 #define FPU_DEFAULT FPU_ARCH_VFP_V2
-#define EABI_DEFAULT EF_ARM_EABI_VER4
+#define EABI_DEFAULT EF_ARM_EABI_VER5
 
 #define LOCAL_LABELS_DOLLAR 1
 #define LOCAL_LABELS_FB 1
diff -Nur binutils-2.18.50.0.1/gas/config/te-armlinuxeabi.h binutils-stable/gas/config/te-armlinuxeabi.h
--- binutils-2.18.50.0.1/gas/config/te-armlinuxeabi.h	2007-08-01 15:11:50.000000000 +0200
+++ binutils-stable/gas/config/te-armlinuxeabi.h	2007-09-25 15:41:37.000000000 +0200
@@ -21,4 +21,4 @@
 
 /* The EABI requires the use of VFP.  */
 #define FPU_DEFAULT FPU_ARCH_VFP_V2
-#define EABI_DEFAULT EF_ARM_EABI_VER4
+#define EABI_DEFAULT EF_ARM_EABI_VER5
diff -Nur binutils-2.18.50.0.1/gas/configure binutils-stable/gas/configure
--- binutils-2.18.50.0.1/gas/configure	2007-06-18 19:29:28.000000000 +0200
+++ binutils-stable/gas/configure	2007-09-25 15:41:44.000000000 +0200
@@ -458,7 +458,7 @@
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP WARN_CFLAGS NO_WERROR GDBINIT cgen_cpu_prefix extra_objects target_cpu_type obj_format te_file install_tooldir atof OPCODES_LIB YACC LEX LEXLIB LEX_OUTPUT_ROOT USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE ALLOCA LIBM datarootdir docdir htmldir LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP WARN_CFLAGS NO_WERROR GDBINIT cgen_cpu_prefix extra_objects target_cpu_type obj_format te_file install_tooldir atof OPCODES_LIB YACC LEX LEXLIB LEX_OUTPUT_ROOT USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE ALLOCA LIBM datarootdir docdir htmldir pdfdir LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -10091,6 +10091,9 @@
 	esac
 	# Decide which ABI to target by default.
 	case ${target} in
+	  mips64el-sicortex-linux-gnu)
+	    mips_default_abi=N64_ABI
+	    ;;
 	  mips64*-linux* | mips-sgi-irix6*)
 	    mips_default_abi=N32_ABI
 	    ;;
@@ -13802,6 +13805,7 @@
 
 
 
+
                               ac_config_files="$ac_config_files Makefile doc/Makefile po/Makefile.in:po/Make-in"
 
           ac_config_commands="$ac_config_commands default"
@@ -14823,6 +14827,7 @@
 s,@datarootdir@,$datarootdir,;t t
 s,@docdir@,$docdir,;t t
 s,@htmldir@,$htmldir,;t t
+s,@pdfdir@,$pdfdir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff -Nur binutils-2.18.50.0.1/gas/configure.in binutils-stable/gas/configure.in
--- binutils-2.18.50.0.1/gas/configure.in	2007-05-11 17:23:20.000000000 +0200
+++ binutils-stable/gas/configure.in	2007-09-25 15:41:44.000000000 +0200
@@ -247,6 +247,9 @@
 	esac
 	# Decide which ABI to target by default.
 	case ${target} in
+	  mips64el-sicortex-linux-gnu)
+	    mips_default_abi=N64_ABI
+	    ;;
 	  mips64*-linux* | mips-sgi-irix6*)
 	    mips_default_abi=N32_ABI
 	    ;;
@@ -696,10 +699,11 @@
 
 BFD_BINARY_FOPEN
 
-dnl Required for html and install-html targets.
+dnl Required for html, pdf, install-pdf and install-html targets.
 AC_SUBST(datarootdir)
 AC_SUBST(docdir)
 AC_SUBST(htmldir)
+AC_SUBST(pdfdir)
 
 dnl This must come last.
 
diff -Nur binutils-2.18.50.0.1/gas/configure.tgt binutils-stable/gas/configure.tgt
--- binutils-2.18.50.0.1/gas/configure.tgt	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/configure.tgt	2007-09-25 15:41:44.000000000 +0200
@@ -198,7 +198,7 @@
   i386-*-freebsdaout*)			fmt=aout em=386bsd ;;
   i386-*-freebsd[12].*)			fmt=aout em=386bsd ;;
   i386-*-freebsd[12])			fmt=aout em=386bsd ;;
-  i386-*-freebsd* | i386-*-kfreebsd*-gnu | i386-*-dragonfly*)
+  i386-*-freebsd* | i386-*-kfreebsd*-gnu)
 				    	fmt=elf em=freebsd ;;
   i386-*-sysv*)				fmt=coff ;;
   i386-*-sco3.2v5*coff)			fmt=coff ;;
diff -Nur binutils-2.18.50.0.1/gas/doc/c-arc.texi binutils-stable/gas/doc/c-arc.texi
--- binutils-2.18.50.0.1/gas/doc/c-arc.texi	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/doc/c-arc.texi	2007-09-25 15:41:07.000000000 +0200
@@ -230,7 +230,7 @@
 @code{SUFFIX_FLAG} which indicates the absence or presence of
 conditional suffixes and flag setting by the extension instruction.
 It is also possible to specify that an instruction sets the flags and
-is conditional by using @code{SUFFIX_CODE} | @code{SUFFIX_FLAG}.
+is condtional by using @code{SUFFIX_CODE} | @code{SUFFIX_FLAG}.
 
 @item @var{syntaxclass}
 Determines the syntax class for the instruction.  It can have the
diff -Nur binutils-2.18.50.0.1/gas/doc/c-arm.texi binutils-stable/gas/doc/c-arm.texi
--- binutils-2.18.50.0.1/gas/doc/c-arm.texi	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/doc/c-arm.texi	2007-09-25 15:41:07.000000000 +0200
@@ -403,8 +403,8 @@
 should only be done if it is really necessary.
 
 @cindex @code{dn} and @code{qn} directives, ARM
-@item @var{name} .dn @var{register name} [@var{.type}] [[@var{index}]]
-@item @var{name} .qn @var{register name} [@var{.type}] [[@var{index}]]
+@item @var{name} .dn @var{register name} [@var{.type}] [@var{[index]}]
+@item @var{name} .qn @var{register name} [@var{.type}] [@var{[index]}]
 
 The @code{dn} and @code{qn} directives are used to create typed
 and/or indexed register aliases for use in Advanced SIMD Extension
diff -Nur binutils-2.18.50.0.1/gas/doc/c-mips.texi binutils-stable/gas/doc/c-mips.texi
--- binutils-2.18.50.0.1/gas/doc/c-mips.texi	2007-08-01 15:11:50.000000000 +0200
+++ binutils-stable/gas/doc/c-mips.texi	2007-09-25 15:41:07.000000000 +0200
@@ -265,12 +265,15 @@
 74kf,
 74kf1_1,
 74kf3_2,
+74kf3_2,
 5kc,
 5kf,
 20kc,
 25kf,
 sb1,
-sb1a
+sb1a,
+loongson2e,
+loongson2f
 @end quotation
 
 For compatibility reasons, @samp{@var{n}x} and @samp{@var{b}fx} are
diff -Nur binutils-2.18.50.0.1/gas/doc/c-ppc.texi binutils-stable/gas/doc/c-ppc.texi
--- binutils-2.18.50.0.1/gas/doc/c-ppc.texi	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/doc/c-ppc.texi	2007-09-25 15:41:07.000000000 +0200
@@ -55,9 +55,6 @@
 @item -m7400, -m7410, -m7450, -m7455
 Generate code for PowerPC 7400/7410/7450/7455.
 
-@item -m750cl
-Generate code for PowerPC 750CL.
-
 @item -mppc64, -m620
 Generate code for PowerPC 620/625/630.
 
diff -Nur binutils-2.18.50.0.1/gas/doc/Makefile.am binutils-stable/gas/doc/Makefile.am
--- binutils-2.18.50.0.1/gas/doc/Makefile.am	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/doc/Makefile.am	2007-09-25 15:41:07.000000000 +0200
@@ -70,6 +70,20 @@
 # cygnus option.
 install-data-local: install-info
 
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
+
+install-pdf: install-pdf-am
+ 
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 
 install-html: install-html-am
diff -Nur binutils-2.18.50.0.1/gas/doc/Makefile.in binutils-stable/gas/doc/Makefile.in
--- binutils-2.18.50.0.1/gas/doc/Makefile.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/doc/Makefile.in	2007-09-25 15:41:07.000000000 +0200
@@ -199,6 +199,7 @@
 mkdir_p = @mkdir_p@
 obj_format = @obj_format@
 oldincludedir = @oldincludedir@
+pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 sbindir = @sbindir@
@@ -269,6 +270,7 @@
 	c-z80.texi \
 	c-z8k.texi
 
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 
 # This one isn't ready for prime time yet.  Not even a little bit.
@@ -607,6 +609,18 @@
 # cygnus option.
 install-data-local: install-info
 
+install-pdf: install-pdf-am
+
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
 install-html: install-html-am
 
 install-html-am: $(HTMLS)
diff -Nur binutils-2.18.50.0.1/gas/Makefile.am binutils-stable/gas/Makefile.am
--- binutils-2.18.50.0.1/gas/Makefile.am	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/Makefile.am	2007-09-25 15:41:44.000000000 +0200
@@ -692,6 +692,35 @@
 
 CLEANFILES = dep.sed DEPTC DEPTCA DEPOBJ DEPOBJA DEP2 DEP2A DEP1 DEPA DEP DEPDIR
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf:	install-pdf-recursive
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html:	install-html-recursive
@@ -1492,11 +1521,6 @@
   $(INCDIR)/bfdlink.h $(srcdir)/config/tc-bfin.h dwarf2dbg.h \
   $(INCDIR)/safe-ctype.h subsegs.h $(INCDIR)/obstack.h \
   $(INCDIR)/obstack.h struc-symbol.h dwarf2dbg.h $(INCDIR)/aout/aout64.h
-DEPOBJ_cr16_elf = $(srcdir)/config/obj-elf.h $(BFDDIR)/elf-bfd.h \
-  $(INCDIR)/elf/common.h $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h \
-  $(INCDIR)/bfdlink.h $(srcdir)/config/tc-cr16.h dwarf2dbg.h \
-  $(INCDIR)/safe-ctype.h subsegs.h $(INCDIR)/obstack.h \
-  $(INCDIR)/obstack.h struc-symbol.h dwarf2dbg.h $(INCDIR)/aout/aout64.h
 DEPOBJ_cris_aout = $(srcdir)/config/obj-aout.h $(srcdir)/config/tc-cris.h \
   $(BFDDIR)/libaout.h $(INCDIR)/bfdlink.h $(INCDIR)/aout/aout64.h \
   $(INCDIR)/obstack.h
@@ -2165,7 +2189,6 @@
 output-file.o: output-file.c output-file.h
 read.o: read.c $(INCDIR)/safe-ctype.h subsegs.h $(INCDIR)/obstack.h \
   sb.h macro.h ecoff.h dw2gencfi.h $(INCDIR)/elf/dwarf2.h
-remap.o: remap.c
 sb.o: sb.c sb.h
 stabs.o: stabs.c $(INCDIR)/obstack.h subsegs.h ecoff.h \
   $(INCDIR)/aout/stab_gnu.h $(INCDIR)/aout/stab.def
diff -Nur binutils-2.18.50.0.1/gas/Makefile.in binutils-stable/gas/Makefile.in
--- binutils-2.18.50.0.1/gas/Makefile.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/Makefile.in	2007-09-25 15:41:44.000000000 +0200
@@ -244,6 +244,7 @@
 mkdir_p = @mkdir_p@
 obj_format = @obj_format@
 oldincludedir = @oldincludedir@
+pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 sbindir = @sbindir@
@@ -1343,12 +1344,6 @@
   $(INCDIR)/safe-ctype.h subsegs.h $(INCDIR)/obstack.h \
   $(INCDIR)/obstack.h struc-symbol.h dwarf2dbg.h $(INCDIR)/aout/aout64.h
 
-DEPOBJ_cr16_elf = $(srcdir)/config/obj-elf.h $(BFDDIR)/elf-bfd.h \
-  $(INCDIR)/elf/common.h $(INCDIR)/elf/internal.h $(INCDIR)/elf/external.h \
-  $(INCDIR)/bfdlink.h $(srcdir)/config/tc-cr16.h dwarf2dbg.h \
-  $(INCDIR)/safe-ctype.h subsegs.h $(INCDIR)/obstack.h \
-  $(INCDIR)/obstack.h struc-symbol.h dwarf2dbg.h $(INCDIR)/aout/aout64.h
-
 DEPOBJ_cris_aout = $(srcdir)/config/obj-aout.h $(srcdir)/config/tc-cris.h \
   $(BFDDIR)/libaout.h $(INCDIR)/bfdlink.h $(INCDIR)/aout/aout64.h \
   $(INCDIR)/obstack.h
@@ -2666,6 +2661,35 @@
 	$(srcdir)/../opcodes/$(CGEN_CPU_PREFIX)-desc.h \
 	$(srcdir)/../opcodes/$(CGEN_CPU_PREFIX)-opc.h
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf:	install-pdf-recursive
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html:	install-html-recursive
@@ -3004,7 +3028,6 @@
 output-file.o: output-file.c output-file.h
 read.o: read.c $(INCDIR)/safe-ctype.h subsegs.h $(INCDIR)/obstack.h \
   sb.h macro.h ecoff.h dw2gencfi.h $(INCDIR)/elf/dwarf2.h
-remap.o: remap.c
 sb.o: sb.c sb.h
 stabs.o: stabs.c $(INCDIR)/obstack.h subsegs.h ecoff.h \
   $(INCDIR)/aout/stab_gnu.h $(INCDIR)/aout/stab.def
diff -Nur binutils-2.18.50.0.1/gas/po/Make-in binutils-stable/gas/po/Make-in
--- binutils-2.18.50.0.1/gas/po/Make-in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/po/Make-in	2007-09-25 15:41:44.000000000 +0200
@@ -113,6 +113,7 @@
 install-exec:
 install-info:
 install-html:
+install-pdf:
 install-data: install-data-@USE_NLS@
 install-data-no: all
 install-data-yes: all
diff -Nur binutils-2.18.50.0.1/gas/remap.c binutils-stable/gas/remap.c
--- binutils-2.18.50.0.1/gas/remap.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/remap.c	2007-09-25 15:41:44.000000000 +0200
@@ -5,7 +5,7 @@
 
    GAS is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3, or (at your option)
+   the Free Software Foundation; either version 2, or (at your option)
    any later version.
 
    GAS is distributed in the hope that it will be useful,
diff -Nur binutils-2.18.50.0.1/gas/testsuite/ChangeLog binutils-stable/gas/testsuite/ChangeLog
--- binutils-2.18.50.0.1/gas/testsuite/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/ChangeLog	2007-09-25 15:41:34.000000000 +0200
@@ -1,92 +1,3 @@
-2007-09-06  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/i386/svme.s: Updated to allow eax in 64bit.
-	* gas/i386/svme.d: Updated.
-	* gas/i386/svme64.d: Likewise.
-
-2007-08-31  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/i386/svme.s: Updated to accept eax in 32bit and rax in
-	64bit.
-	* gas/i386/svme.d: Updated.
-	* gas/i386/svme64.d: Likewise.
-
-2007-08-30  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/i386/amd.s: Add rdtscp.
-	* gas/i386/amd.d: Updated.
-
-	* gas/i386/mem-intel.d: Update invlpg for BYTE PTR.
-	* gas/i386/x86-64-mem-intel.d: Likewise.
-
-	* gas/i386/x86-64-opcode.s: Add swapgs.
-	* gas/i386/x86-64-opcode.d: Updated.
-
-2007-08-29  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* gas/lns/lns-duplicate.d, gas/lns/lns-duplicate.s: New.
-	* gas/lns/lns.exp: Run lns-duplicate.
-
-2007-08-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/i386/i386.exp: Run x86-64-reg and x86-64-reg-intel.
-
-	* gas/i386/x86-64-reg.s: New. Add tests for instructions
-	with one register operand.
-	* gas/i386/x86-64-reg-intel.d: Likewise.
-	* gas/i386/x86-64-reg.d: Likewise.
-
-2007-08-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/i386/i386.exp: Run reg and reg-intel.
-
-	* gas/i386/katmai.d: Update bad instructions.
-
-	* gas/i386/reg.s: New. Add tests for instructions with one
-	register operand.
-	* gas/i386/reg-intel.d: Likewise.
-	* gas/i386/reg.d: Likewise.
-
-2007-08-28  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/i386/i386.exp: Run mem, mem-intel, x86-64-mem and
-	x86-64-mem-intel.
-
-	* gas/i386/mem.s: New. Add tests for instructions with one
-	memory operand.
-	* gas/i386/x86-64-mem.s: Likewise.
-	* gas/i386/mem-intel.d: Likewise.
-	* gas/i386/mem.d: Likewise.
-	* gas/i386/x86-64-mem-intel.d: Likewise.
-	* gas/i386/x86-64-mem.d: Likewise.
-
-2007-08-28  Mark Shinwell  <shinwell@codesourcery.com>
-	    Joseph Myers  <joseph@codesourcery.com>
-
-	* lib/gas-defs.exp (gas_version): Use remote_* functions instead
-	of exec.
-	(gas_host_run): New.
-	(gas_run): Use gas_host_run.
-	(gas_start): Likewise.
-	(run_dump_test): Likewise.
-	(objdump): Use gas_host_run.
-	(objdump_start_no_subdir): Likewise.
-	* lib/gas-dg.exp (gas-dg-test): Use "remote_file host delete".
-	* lib/run: Remove.
-	* gas/macros/macros.exp: Download app4b.s to host.
-	* gas/i386/i386.exp (gas_64_check): Use gas_host_run.
-	(gas_32_check): Likewise.
-	* gas/maxq10/maxq10.exp (gas_64_check): Likewise
-	(gas_32_check): Likewise.
-	* gas/maxq20/maxq20.exp (gas_64_check): Likewise
-	(gas_32_check): Likewise.
-	* gas/sparc/sparc.exp (gas_64_check): Likewise.
-	* gas/cfi/cfi.exp: Likewise.
-	* gas/elf/elf.exp (run_list_test): Likewise.  Use temporary file
-	for readelf output in place of pipe.
-	* gas/all/gas.exp: Download incbin.dat to host.
-	(do_comment): Allow \r\r\n.
-
 2007-08-09  Paul Brook  <paul@codesourcery.com>
 
 	* gas/arm/relax_load_align.d: new test.
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/alpha/elf-reloc-1.d binutils-stable/gas/testsuite/gas/alpha/elf-reloc-1.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/alpha/elf-reloc-1.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/alpha/elf-reloc-1.d	2007-09-25 15:41:16.000000000 +0200
@@ -16,6 +16,6 @@
 0*000001c GPRELHIGH         d
 0*0000020 GPRELLOW          e
 0*0000024 GPDISP            \.text\+0x0*0000008
-0*0000030 GPDISP            \.text-0x0*0000008
+0*0000030 GPDISP            \.text\+0xf*ffffff8
 
 
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/arm/archv6m.d binutils-stable/gas/testsuite/gas/arm/archv6m.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/arm/archv6m.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/arm/archv6m.d	2007-09-25 22:35:28.000000000 +0200
@@ -0,0 +1,15 @@
+# name: ARMv6-M
+# objdump: -dr --prefix-addresses --show-raw-insn
+
+.*: +file format .*arm.*
+
+Disassembly of section .text:
+0[0-9a-f]+ <[^>]+> f386 8800 	msr	(APSR|CPSR_f), r6
+0[0-9a-f]+ <[^>]+> f389 8806 	msr	EPSR, r9
+0[0-9a-f]+ <[^>]+> f3ef 8201 	mrs	r2, IAPSR
+0[0-9a-f]+ <[^>]+> bf10      	yield
+0[0-9a-f]+ <[^>]+> bf20      	wfe
+0[0-9a-f]+ <[^>]+> bf30      	wfi
+0[0-9a-f]+ <[^>]+> bf40      	sev
+0[0-9a-f]+ <[^>]+> 4408      	add	r0, r1
+0[0-9a-f]+ <[^>]+> bf00      	nop
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/arm/archv6m.s binutils-stable/gas/testsuite/gas/arm/archv6m.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/arm/archv6m.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/arm/archv6m.s	2007-09-25 22:35:28.000000000 +0200
@@ -0,0 +1,16 @@
+	.arch	armv6-m
+	.syntax unified
+	.thumb
+	.text
+	.align	2
+	.global	foo
+foo:
+	msr apsr,r6
+	msr epsr,r9
+	mrs r2, iapsr
+	yield
+	wfe
+	wfi
+	sev
+	add r0, r0, r1
+	nop
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/arm/backslash-at.d binutils-stable/gas/testsuite/gas/arm/backslash-at.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/arm/backslash-at.d	2007-08-01 15:11:50.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/arm/backslash-at.d	2007-09-25 15:41:14.000000000 +0200
@@ -4,14 +4,13 @@
 .*:     file format .*arm.*
 
 Disassembly of section .text:
-0+000 <.*>.*615c.*
-0+002 <foo> e3a00000 	mov	r0, #0	; 0x0
-0+006 <foo\+0x4> e3a00000 	mov	r0, #0	; 0x0
-0+00a <foo\+0x8> e3a00000 	mov	r0, #0	; 0x0
-0+00e <foo\+0xc> e3a00001 	mov	r0, #1	; 0x1
-0+012 <foo\+0x10> e3a00001 	mov	r0, #1	; 0x1
-0+016 <foo\+0x14> e3a00001 	mov	r0, #1	; 0x1
-0+01a <foo\+0x18> e3a00002 	mov	r0, #2	; 0x2
-0+01e <foo\+0x1c> e3a00002 	mov	r0, #2	; 0x2
-0+022 <foo\+0x20> e3a00002 	mov	r0, #2	; 0x2
-#...
+00000000 <foo-0x2> 615c      	.short	0x615c
+00000002 <foo> e3a00000 	mov	r0, #0	; 0x0
+00000006 <foo\+0x4> e3a00000 	mov	r0, #0	; 0x0
+0000000a <foo\+0x8> e3a00000 	mov	r0, #0	; 0x0
+0000000e <foo\+0xc> e3a00001 	mov	r0, #1	; 0x1
+00000012 <foo\+0x10> e3a00001 	mov	r0, #1	; 0x1
+00000016 <foo\+0x14> e3a00001 	mov	r0, #1	; 0x1
+0000001a <foo\+0x18> e3a00002 	mov	r0, #2	; 0x2
+0000001e <foo\+0x1c> e3a00002 	mov	r0, #2	; 0x2
+00000022 <foo\+0x20> e3a00002 	mov	r0, #2	; 0x2
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/arm/marvell-f-div.d binutils-stable/gas/testsuite/gas/arm/marvell-f-div.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/arm/marvell-f-div.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/arm/marvell-f-div.d	2007-09-25 15:41:14.000000000 +0200
@@ -0,0 +1,11 @@
+#objdump: -dr --prefix-addresses --show-raw-insn
+#name: Marvell division encodings
+
+.*:     file format .*arm.*
+
+Disassembly of section .text:
+0[0-9a-f]+ <[^>]+> ee321693 	mrc	6, 1, r1, cr2, cr3, \{4\}
+0[0-9a-f]+ <[^>]+> be321693 	mrclt	6, 1, r1, cr2, cr3, \{4\}
+0[0-9a-f]+ <[^>]+> ee321613 	mrc	6, 1, r1, cr2, cr3, \{0\}
+0[0-9a-f]+ <[^>]+> ce321613 	mrcgt	6, 1, r1, cr2, cr3, \{0\}
+
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/arm/marvell-f-div.s binutils-stable/gas/testsuite/gas/arm/marvell-f-div.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/arm/marvell-f-div.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/arm/marvell-f-div.s	2007-09-25 15:41:14.000000000 +0200
@@ -0,0 +1,8 @@
+	.text
+	.arch marvell-f
+
+	sdiv	r1, r2, r3
+	sdivlt	r1, r2, r3
+	udiv	r1, r2, r3
+	udivgt	r1, r2, r3
+
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/arm/t16-bad.l binutils-stable/gas/testsuite/gas/arm/t16-bad.l
--- binutils-2.18.50.0.1/gas/testsuite/gas/arm/t16-bad.l	2005-06-22 22:53:35.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/arm/t16-bad.l	2007-09-25 22:35:28.000000000 +0200
@@ -184,3 +184,4 @@
 [^:]*:134: Error: Thumb does not support the 2-argument form of this instruction -- `cpsie ai,#5'
 [^:]*:135: Error: Thumb does not support the 2-argument form of this instruction -- `cpsid ai,#5'
 [^:]*:138: Error: Thumb does not support conditional execution
+[^:]*:141: Error: cannot honor width suffix -- `add r0,r1'
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/arm/t16-bad.s binutils-stable/gas/testsuite/gas/arm/t16-bad.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/arm/t16-bad.s	2005-06-22 22:53:35.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/arm/t16-bad.s	2007-09-25 22:35:28.000000000 +0200
@@ -136,3 +136,7 @@
 
 	@ Conditional suffixes
 	addeq	r0,r1,r2
+	@ low register non flag setting add.
+	.syntax unified
+	add	r0, r1
+
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/amd.d binutils-stable/gas/testsuite/gas/i386/amd.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/amd.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/amd.d	2007-09-25 15:41:27.000000000 +0200
@@ -5,38 +5,36 @@
 
 Disassembly of section .text:
 
-0+ <foo>:
-[ 	]*[a-f0-9]+:	0f 0d 03             	prefetch \(%ebx\)
-[ 	]*[a-f0-9]+:	0f 0d 0c 75 00 10 00 00 	prefetchw 0x1000\(,%esi,2\)
-[ 	]*[a-f0-9]+:	0f 0e                	femms  
-[ 	]*[a-f0-9]+:	0f 0f 00 bf          	pavgusb \(%eax\),%mm0
-[ 	]*[a-f0-9]+:	0f 0f 48 02 1d       	pf2id  0x2\(%eax\),%mm1
-[ 	]*[a-f0-9]+:	0f 0f 90 00 01 00 00 ae 	pfacc  0x100\(%eax\),%mm2
-[ 	]*[a-f0-9]+:	0f 0f 1e 9e          	pfadd  \(%esi\),%mm3
-[ 	]*[a-f0-9]+:	0f 0f 66 02 b0       	pfcmpeq 0x2\(%esi\),%mm4
-[ 	]*[a-f0-9]+:	0f 0f ae 90 90 00 00 90 	pfcmpge 0x9090\(%esi\),%mm5
-[ 	]*[a-f0-9]+:	0f 0f 74 75 00 a0    	pfcmpgt 0x0\(%ebp,%esi,2\),%mm6
-[ 	]*[a-f0-9]+:	0f 0f 7c 75 02 a4    	pfmax  0x2\(%ebp,%esi,2\),%mm7
-[ 	]*[a-f0-9]+:	0f 0f 84 75 90 90 90 90 94 	pfmin  -0x6f6f6f70\(%ebp,%esi,2\),%mm0
-[ 	]*[a-f0-9]+:	0f 0f 0d 04 00 00 00 b4 	pfmul  0x4,%mm1
-[ 	]*[a-f0-9]+:	2e 0f 0f 54 c3 07 96 	pfrcp  %cs:0x7\(%ebx,%eax,8\),%mm2
-[ 	]*[a-f0-9]+:	0f 0f d8 a6          	pfrcpit1 %mm0,%mm3
-[ 	]*[a-f0-9]+:	0f 0f e1 b6          	pfrcpit2 %mm1,%mm4
-[ 	]*[a-f0-9]+:	0f 0f ea a7          	pfrsqit1 %mm2,%mm5
-[ 	]*[a-f0-9]+:	0f 0f f3 97          	pfrsqrt %mm3,%mm6
-[ 	]*[a-f0-9]+:	0f 0f fc 9a          	pfsub  %mm4,%mm7
-[ 	]*[a-f0-9]+:	0f 0f c5 aa          	pfsubr %mm5,%mm0
-[ 	]*[a-f0-9]+:	0f 0f ce 0d          	pi2fd  %mm6,%mm1
-[ 	]*[a-f0-9]+:	0f 0f d7 b7          	pmulhrw %mm7,%mm2
-[ 	]*[a-f0-9]+:	0f 01 f9             	rdtscp 
-[ 	]*[a-f0-9]+:	2e 0f                	\(bad\)  
-[ 	]*[a-f0-9]+:	0f 54 c3             	andps  %xmm3,%xmm0
-[ 	]*[a-f0-9]+:	07                   	pop    %es
-[ 	]*[a-f0-9]+:	c3                   	ret    
-[ 	]*[a-f0-9]+:	90                   	nop    
-[ 	]*[a-f0-9]+:	90                   	nop    
-[ 	]*[a-f0-9]+:	90                   	nop    
-[ 	]*[a-f0-9]+:	90                   	nop    
-[ 	]*[a-f0-9]+:	90                   	nop    
-[ 	]*[a-f0-9]+:	90                   	nop    
-#pass
+0+000 <foo>:
+   0:	0f 0d 03 [ 	]*prefetch \(%ebx\)
+   3:	0f 0d 0c 75 00 10 00 00 [ 	]*prefetchw 0x1000\(,%esi,2\)
+   b:	0f 0e [ 	]*femms  
+   d:	0f 0f 00 bf [ 	]*pavgusb \(%eax\),%mm0
+  11:	0f 0f 48 02 1d [ 	]*pf2id  0x2\(%eax\),%mm1
+  16:	0f 0f 90 00 01 00 00 ae [ 	]*pfacc  0x100\(%eax\),%mm2
+  1e:	0f 0f 1e 9e [ 	]*pfadd  \(%esi\),%mm3
+  22:	0f 0f 66 02 b0 [ 	]*pfcmpeq 0x2\(%esi\),%mm4
+  27:	0f 0f ae 90 90 00 00 90 [ 	]*pfcmpge 0x9090\(%esi\),%mm5
+  2f:	0f 0f 74 75 00 a0 [ 	]*pfcmpgt 0x0\(%ebp,%esi,2\),%mm6
+  35:	0f 0f 7c 75 02 a4 [ 	]*pfmax  0x2\(%ebp,%esi,2\),%mm7
+  3b:	0f 0f 84 75 90 90 90 90 94 [ 	]*pfmin  -0x6f6f6f70\(%ebp,%esi,2\),%mm0
+  44:	0f 0f 0d 04 00 00 00 b4 [ 	]*pfmul  0x4,%mm1
+  4c:	2e 0f 0f 54 c3 07 96 [ 	]*pfrcp  %cs:0x7\(%ebx,%eax,8\),%mm2
+  53:	0f 0f d8 a6 [ 	]*pfrcpit1 %mm0,%mm3
+  57:	0f 0f e1 b6 [ 	]*pfrcpit2 %mm1,%mm4
+  5b:	0f 0f ea a7 [ 	]*pfrsqit1 %mm2,%mm5
+  5f:	0f 0f f3 97 [ 	]*pfrsqrt %mm3,%mm6
+  63:	0f 0f fc 9a [ 	]*pfsub  %mm4,%mm7
+  67:	0f 0f c5 aa [ 	]*pfsubr %mm5,%mm0
+  6b:	0f 0f ce 0d [ 	]*pi2fd  %mm6,%mm1
+  6f:	0f 0f d7 b7 [ 	]*pmulhrw %mm7,%mm2
+  73:	2e 0f [ 	]*\(bad\)  
+  75:	0f 54 c3 [ 	]*andps  %xmm3,%xmm0
+  78:	07 [ 	]*pop    %es
+  79:	c3 [ 	]*ret    
+  7a:	90 [ 	]*nop    
+  7b:	90 [ 	]*nop    
+  7c:	90 [ 	]*nop    
+  7d:	90 [ 	]*nop    
+  7e:	90 [ 	]*nop    
+  7f:	90 [ 	]*nop    
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/amd.s binutils-stable/gas/testsuite/gas/i386/amd.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/amd.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/amd.s	2007-09-25 15:41:27.000000000 +0200
@@ -25,8 +25,6 @@
  pi2fd		%mm6,%mm1
  pmulhrw	%mm7,%mm2
 
- rdtscp
-
 # This is a 3DNow! instruction, with a prefix, that isn't quite right
 # Everything's good bar the opcode suffix
 .byte 0x2e, 0x0f, 0x0f, 0x54, 0xc3, 0x07, 0xc3
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/i386.exp binutils-stable/gas/testsuite/gas/i386/i386.exp
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/i386.exp	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/i386.exp	2007-09-25 15:41:27.000000000 +0200
@@ -88,10 +88,6 @@
     run_list_test "inval-crc32" "-al"
     run_dump_test "simd"
     run_dump_test "simd-intel"
-    run_dump_test "mem"
-    run_dump_test "mem-intel"
-    run_dump_test "reg"
-    run_dump_test "reg-intel"
 
     # These tests require support for 8 and 16 bit relocs,
     # so we only run them for ELF and COFF targets.
@@ -191,10 +187,6 @@
     run_list_test "x86-64-inval-crc32" "-al"
     run_dump_test "x86-64-simd"
     run_dump_test "x86-64-simd-intel"
-    run_dump_test "x86-64-mem"
-    run_dump_test "x86-64-mem-intel"
-    run_dump_test "x86-64-reg"
-    run_dump_test "x86-64-reg-intel"
 
     if { ![istarget "*-*-aix*"]
       && ![istarget "*-*-beos*"]
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/katmai.d binutils-stable/gas/testsuite/gas/i386/katmai.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/katmai.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/katmai.d	2007-09-25 15:41:27.000000000 +0200
@@ -165,7 +165,8 @@
  246:	90 [ 	]*nop    
  247:	90 [ 	]*nop    
  248:	65 [ 	]*gs
- 249:	0f ae[ 	]*\(bad\).*
+ 249:	0f [ 	]*sfence.*\(bad\).*
+ 24a:	ae [ 	]*scas   %es:\(%edi\),%al
  24b:	ff 00 [ 	]*incl   \(%eax\)
  24d:	00 00 [ 	]*add    %al,\(%eax\)
 	...
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/mem.d binutils-stable/gas/testsuite/gas/i386/mem.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/mem.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/mem.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,39 +0,0 @@
-#objdump: -dw
-#name: i386 mem
-
-.*:     file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg \(%esi\)
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b \(%esi\)
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld \(%esi\)
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear \(%esi\)
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  \(%esi\)
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidtl  \(%esi\)
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg \(%esi\)
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b \(%esi\)
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld \(%esi\)
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear \(%esi\)
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  \(%esi\)
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr \(%esi\)
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush \(%esi\)
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/mem-intel.d binutils-stable/gas/testsuite/gas/i386/mem-intel.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/mem-intel.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/mem-intel.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,41 +0,0 @@
-#source: mem.s
-#as: -J
-#objdump: -dw -Mintel
-#name: i386 mem (Intel mode)
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg BYTE PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr DWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr DWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush BYTE PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidtd  \[esi\]
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg BYTE PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst QWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr DWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr DWORD PTR \[esi\]
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush BYTE PTR \[esi\]
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/mem.s binutils-stable/gas/testsuite/gas/i386/mem.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/mem.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/mem.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,39 +0,0 @@
-# Check instructions with one memory operand
-
-	.text
-_start:
-
-sgdt (%esi)
-sidt (%esi)
-lgdt (%esi)
-lidt (%esi)
-invlpg (%esi)
-cmpxchg8b (%esi)
-vmptrld (%esi)
-vmclear (%esi)
-vmxon (%esi)
-vmptrst (%esi)
-fxsave (%esi)
-fxrstor (%esi)
-ldmxcsr (%esi)
-stmxcsr (%esi)
-clflush (%esi)
-
-.intel_syntax noprefix
-sgdt [esi]
-sidt [esi]
-lgdt [esi]
-lidt [esi]
-invlpg [esi]
-cmpxchg8b qword ptr [esi]
-vmptrld qword ptr [esi]
-vmclear qword ptr [esi]
-vmxon qword ptr [esi]
-vmptrst qword ptr [esi]
-fxsave [esi]
-fxrstor [esi]
-ldmxcsr dword ptr [esi]
-stmxcsr dword ptr [esi]
-clflush byte ptr [esi]
-
-.p2align 4,0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/mixed-mode-reloc64.d binutils-stable/gas/testsuite/gas/i386/mixed-mode-reloc64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/mixed-mode-reloc64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/mixed-mode-reloc64.d	2007-09-25 15:41:27.000000000 +0200
@@ -7,8 +7,8 @@
 RELOCATION RECORDS FOR \[.text\]:
 OFFSET[ 	]+TYPE[ 	]+VALUE[ 	]*
 [0-9a-f]+[ 	]+R_X86_64_GOT32[ 	]+xtrn[ 	]*
-[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4[ 	]*
+[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c[ 	]*
 [0-9a-f]+[ 	]+R_X86_64_GOT32[ 	]+xtrn[ 	]*
-[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4[ 	]*
+[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c[ 	]*
 [0-9a-f]+[ 	]+R_X86_64_GOT32[ 	]+xtrn[ 	]*
-[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4[ 	]*
+[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c[ 	]*
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/reg.d binutils-stable/gas/testsuite/gas/i386/reg.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/reg.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/reg.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,45 +0,0 @@
-#objdump: -dw
-#name: i386 reg
-
-.*:     file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 d6 02       	psrlw  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 e6 02       	psraw  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 f6 02       	psllw  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 d6 02       	psrld  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 e6 02       	psrad  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 f6 02       	pslld  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 73 d6 02       	psrlq  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	66 0f 73 de 02       	psrldq \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 73 f6 02       	psllq  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	66 0f 73 fe 02       	pslldq \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 d6 02       	psrlw  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 e6 02       	psraw  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 f6 02       	psllw  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 d6 02       	psrld  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 e6 02       	psrad  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 f6 02       	pslld  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 73 d6 02       	psrlq  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	66 0f 73 de 02       	psrldq \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 73 f6 02       	psllq  \$0x2,%xmm6
-[ 	]*[a-f0-9]+:	66 0f 73 fe 02       	pslldq \$0x2,%xmm6
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/reg-intel.d binutils-stable/gas/testsuite/gas/i386/reg-intel.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/reg-intel.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/reg-intel.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,47 +0,0 @@
-#source: reg.s
-#as: -J
-#objdump: -dw -Mintel
-#name: i386 reg (Intel mode)
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 d6 02       	psrlw  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 e6 02       	psraw  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 f6 02       	psllw  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 d6 02       	psrld  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 e6 02       	psrad  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 f6 02       	pslld  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 d6 02       	psrlq  xmm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 de 02       	psrldq xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 f6 02       	psllq  xmm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 fe 02       	pslldq xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 d6 02       	psrlw  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 e6 02       	psraw  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 f6 02       	psllw  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 d6 02       	psrld  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 e6 02       	psrad  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 f6 02       	pslld  xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 d6 02       	psrlq  xmm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 de 02       	psrldq xmm6,0x2
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 f6 02       	psllq  xmm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 fe 02       	pslldq xmm6,0x2
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/reg.s binutils-stable/gas/testsuite/gas/i386/reg.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/reg.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/reg.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,44 +0,0 @@
-# Check instructions with one register operand
-
-	.text
-_start:
-psrlw $2, %mm6
-psrlw $2, %xmm6
-psraw $2, %mm6
-psraw $2, %xmm6
-psllw $2, %mm6
-psllw $2, %xmm6
-psrld $2, %mm6
-psrld $2, %xmm6
-psrad $2, %mm6
-psrad $2, %xmm6
-pslld $2, %mm6
-pslld $2, %xmm6
-psrlq $2, %mm6
-psrlq $2, %xmm6
-psrldq $2, %xmm6
-psllq $2, %mm6
-psllq $2, %xmm6
-pslldq $2, %xmm6
-
-.intel_syntax noprefix
-psrlw mm6, 2
-psrlw xmm6, 2
-psraw mm6, 2
-psraw xmm6, 2
-psllw mm6, 2
-psllw xmm6, 2
-psrld mm6, 2
-psrld xmm6, 2
-psrad mm6, 2
-psrad xmm6, 2
-pslld mm6, 2
-pslld xmm6, 2
-psrlq mm6, 2
-psrlq xmm6, 2
-psrldq xmm6, 2
-psllq mm6, 2
-psllq xmm6, 2
-pslldq xmm6, 2
-
-.p2align 4,0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/reloc64.d binutils-stable/gas/testsuite/gas/i386/reloc64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/reloc64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/reloc64.d	2007-09-25 15:41:27.000000000 +0200
@@ -16,31 +16,31 @@
 .*[ 	]+R_X86_64_PC32[ 	]+xtrn\+0x0*2
 .*[ 	]+R_X86_64_PC16[ 	]+xtrn\+0x0*2
 .*[ 	]+R_X86_64_PC8[ 	]+xtrn\+0x0*1
-.*[ 	]+R_X86_64_PC32[ 	]+xtrn-0x0*4
-.*[ 	]+R_X86_64_PC32[ 	]+xtrn-0x0*4
-.*[ 	]+R_X86_64_PC8[ 	]+xtrn-0x0*1
+.*[ 	]+R_X86_64_PC32[ 	]+xtrn\+0xf+c
+.*[ 	]+R_X86_64_PC32[ 	]+xtrn\+0xf+c
+.*[ 	]+R_X86_64_PC8[ 	]+xtrn\+0xf+f
 .*[ 	]+R_X86_64_GOT64[ 	]+xtrn
 .*[ 	]+R_X86_64_GOT32[ 	]+xtrn
 .*[ 	]+R_X86_64_GOT32[ 	]+xtrn
 .*[ 	]+R_X86_64_GOTOFF64[ 	]+xtrn
 .*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn
 .*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn
-.*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn-0x0*4
+.*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn\+0xf+c
 .*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_\+0x0*2
-.*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_-0x0*4
+.*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_\+0xf+c
 .*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_\+0x0*2
 .*[ 	]+R_X86_64_PLT32[ 	]+xtrn
 .*[ 	]+R_X86_64_PLT32[ 	]+xtrn
-.*[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4
+.*[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c
 .*[ 	]+R_X86_64_TLSGD[ 	]+xtrn
 .*[ 	]+R_X86_64_TLSGD[ 	]+xtrn
-.*[ 	]+R_X86_64_TLSGD[ 	]+xtrn-0x0*4
+.*[ 	]+R_X86_64_TLSGD[ 	]+xtrn\+0xf+c
 .*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn
 .*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn
-.*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn-0x0*4
+.*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn\+0xf+c
 .*[ 	]+R_X86_64_TLSLD[ 	]+xtrn
 .*[ 	]+R_X86_64_TLSLD[ 	]+xtrn
-.*[ 	]+R_X86_64_TLSLD[ 	]+xtrn-0x0*4
+.*[ 	]+R_X86_64_TLSLD[ 	]+xtrn\+0xf+c
 .*[ 	]+R_X86_64_DTPOFF64[ 	]+xtrn
 .*[ 	]+R_X86_64_DTPOFF32[ 	]+xtrn
 .*[ 	]+R_X86_64_DTPOFF32[ 	]+xtrn
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/svme64.d binutils-stable/gas/testsuite/gas/i386/svme64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/svme64.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/svme64.d	2007-09-25 15:41:27.000000000 +0200
@@ -23,10 +23,10 @@
 [	 ]*[0-9a-f]+:[	 ]+0f 01 db[	 ]+vmsave[	 ]*
 [0-9a-f]+ <att32>:
 [	 ]*[0-9a-f]+:[	 ]+0f 01 de[	 ]+skinit[	 ]*
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 df[	 ]+addr32 invlpga[	 ]
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 da[	 ]+addr32 vmload[	 ]
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 d8[	 ]+addr32 vmrun[	 ]
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 db[	 ]+addr32 vmsave[	 ]
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 df[	 ]+(addr32 )?invlpga[	 ]*\(%eax\),[	 ]*%ecx
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 da[	 ]+(addr32 )?vmload[	 ]*\(%eax\)
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 d8[	 ]+(addr32 )?vmrun[	 ]*\(%eax\)
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 db[	 ]+(addr32 )?vmsave[	 ]*\(%eax\)
 [0-9a-f]+ <intel64>:
 [	 ]*[0-9a-f]+:[	 ]+0f 01 df[	 ]+invlpga[	 ]*
 [	 ]*[0-9a-f]+:[	 ]+0f 01 da[	 ]+vmload[	 ]*
@@ -34,8 +34,8 @@
 [	 ]*[0-9a-f]+:[	 ]+0f 01 db[	 ]+vmsave[	 ]*
 [0-9a-f]+ <intel32>:
 [	 ]*[0-9a-f]+:[	 ]+0f 01 de[	 ]+skinit[	 ]*
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 df[	 ]+addr32 invlpga[	 ]
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 da[	 ]+addr32 vmload[	 ]
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 d8[	 ]+addr32 vmrun[	 ]
-[	 ]*[0-9a-f]+:[	 ]+67 0f 01 db[	 ]+addr32 vmsave[	 ]
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 df[	 ]+(addr32 )?invlpga[	 ]*\(%eax\),[	 ]*%ecx
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 da[	 ]+(addr32 )?vmload[	 ]*\(%eax\)
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 d8[	 ]+(addr32 )?vmrun[	 ]*\(%eax\)
+[	 ]*[0-9a-f]+:[	 ]+67 0f 01 db[	 ]+(addr32 )?vmsave[	 ]*\(%eax\)
 #pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/svme.s binutils-stable/gas/testsuite/gas/i386/svme.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/svme.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/svme.s	2007-09-25 15:41:27.000000000 +0200
@@ -18,19 +18,19 @@
 
 .ifdef __amd64__
 att64:
-	do_args	%rax, %ecx
+	do_args	(%rax), %ecx
 .endif
 att32:
-	skinit	%eax
-	do_args	%eax, %ecx
+	skinit	(%eax)
+	do_args	(%eax), %ecx
 
 .intel_syntax noprefix
 .ifdef __amd64__
 intel64:
-	do_args	rax, ecx
+	do_args	[rax], ecx
 .endif
 intel32:
-	skinit	eax
-	do_args	eax, ecx
+	skinit	[eax]
+	do_args	[eax], ecx
 
 	.p2align 4,0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-mem.d binutils-stable/gas/testsuite/gas/i386/x86-64-mem.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-mem.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-mem.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,42 +0,0 @@
-#as: -J
-#objdump: -dw
-#name: x86-64 mem
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg \(%rsi\)
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b \(%rsi\)
-[ 	]*[a-f0-9]+:	48 0f c7 0e          	cmpxchg16b \(%rsi\)
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld \(%rsi\)
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear \(%rsi\)
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  \(%rsi\)
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidt   \(%rsi\)
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg \(%rsi\)
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b \(%rsi\)
-[ 	]*[a-f0-9]+:	48 0f c7 0e          	cmpxchg16b \(%rsi\)
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld \(%rsi\)
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear \(%rsi\)
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  \(%rsi\)
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr \(%rsi\)
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush \(%rsi\)
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-mem-intel.d binutils-stable/gas/testsuite/gas/i386/x86-64-mem-intel.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-mem-intel.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-mem-intel.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,43 +0,0 @@
-#source: x86-64-mem.s
-#as: -J
-#objdump: -dw -Mintel
-#name: x86-64 mem (Intel mode)
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg BYTE PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	48 0f c7 0e          	cmpxchg16b OWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr DWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr DWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush BYTE PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 06             	sgdt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 0e             	sidt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 16             	lgdt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 1e             	lidt   \[rsi\]
-[ 	]*[a-f0-9]+:	0f 01 3e             	invlpg BYTE PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f c7 0e             	cmpxchg8b QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	48 0f c7 0e          	cmpxchg16b OWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f c7 36             	vmptrld QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	66 0f c7 36          	vmclear QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	f3 0f c7 36          	vmxon  QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f c7 3e             	vmptrst QWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 06             	fxsave \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 0e             	fxrstor \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 16             	ldmxcsr DWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 1e             	stmxcsr DWORD PTR \[rsi\]
-[ 	]*[a-f0-9]+:	0f ae 3e             	clflush BYTE PTR \[rsi\]
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-mem.s binutils-stable/gas/testsuite/gas/i386/x86-64-mem.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-mem.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-mem.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,41 +0,0 @@
-# Check 64bit instructions with one memory operand
-
-	.text
-_start:
-
-sgdt (%rsi)
-sidt (%rsi)
-lgdt (%rsi)
-lidt (%rsi)
-invlpg (%rsi)
-cmpxchg8b (%rsi)
-cmpxchg16b (%rsi)
-vmptrld (%rsi)
-vmclear (%rsi)
-vmxon (%rsi)
-vmptrst (%rsi)
-fxsave (%rsi)
-fxrstor (%rsi)
-ldmxcsr (%rsi)
-stmxcsr (%rsi)
-clflush (%rsi)
-
-.intel_syntax noprefix
-sgdt [rsi]
-sidt [rsi]
-lgdt [rsi]
-lidt [rsi]
-invlpg [rsi]
-cmpxchg8b qword ptr [rsi]
-cmpxchg16b oword ptr [rsi]
-vmptrld qword ptr [rsi]
-vmclear qword ptr [rsi]
-vmxon qword ptr [rsi]
-vmptrst qword ptr [rsi]
-fxsave [rsi]
-fxrstor [rsi]
-ldmxcsr dword ptr [rsi]
-stmxcsr dword ptr [rsi]
-clflush byte ptr [rsi]
-
-.p2align 4,0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-opcode.d binutils-stable/gas/testsuite/gas/i386/x86-64-opcode.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-opcode.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-opcode.d	2007-09-25 15:41:27.000000000 +0200
@@ -292,5 +292,4 @@
 [	 ]*[0-9a-f]+:[	 ]+0f 00 c8[	 ]+str[	 ]+%eax[	 ]*(#.*)*
 [	 ]*[0-9a-f]+:[	 ]+66 0f 00 c8[	 ]+str[	 ]+%ax[	 ]*(#.*)*
 [	 ]*[0-9a-f]+:[	 ]+0f 00 08[	 ]+str[	 ]+\(%rax\)[	 ]*(#.*)*
-[ 	]*[a-f0-9]+:	0f 01 f8             	swapgs 
 #pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-opcode.s binutils-stable/gas/testsuite/gas/i386/x86-64-opcode.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-opcode.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-opcode.s	2007-09-25 15:41:27.000000000 +0200
@@ -418,6 +418,4 @@
         str %ax		              #  66  --	 -- --	 0F 00 c8
         str (%rax)	              #  --  --	 -- --	 0F 00 08
 
-        swapgs		              #  --  --	 -- --	 0F 01 f8
-
  .p2align 4,0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-reg.d binutils-stable/gas/testsuite/gas/i386/x86-64-reg.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-reg.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-reg.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,46 +0,0 @@
-#as: -J
-#objdump: -dw
-#name: x86-64 reg
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 71 d2 02    	psrlw  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 71 e2 02    	psraw  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 71 f2 02    	psllw  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 72 d2 02    	psrld  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 72 e2 02    	psrad  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 72 f2 02    	pslld  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 73 d2 02    	psrlq  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	66 41 0f 73 da 02    	psrldq \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 41 0f 73 f2 02    	psllq  \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	66 41 0f 73 fa 02    	pslldq \$0x2,%xmm10
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 d2 02       	psrlw  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 e2 02       	psraw  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 71 f2 02       	psllw  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 d2 02       	psrld  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 e2 02       	psrad  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 72 f2 02       	pslld  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 73 d2 02       	psrlq  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	66 0f 73 da 02       	psrldq \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  \$0x2,%mm6
-[ 	]*[a-f0-9]+:	66 0f 73 f2 02       	psllq  \$0x2,%xmm2
-[ 	]*[a-f0-9]+:	66 0f 73 fa 02       	pslldq \$0x2,%xmm2
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-reg-intel.d binutils-stable/gas/testsuite/gas/i386/x86-64-reg-intel.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-reg-intel.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-reg-intel.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,47 +0,0 @@
-#source: x86-64-reg.s
-#as: -J
-#objdump: -dw -Mintel
-#name: x86-64 reg (Intel mode)
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-0+ <_start>:
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 71 d2 02    	psrlw  xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 71 e2 02    	psraw  xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 71 f2 02    	psllw  xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 72 d2 02    	psrld  xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 72 e2 02    	psrad  xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 72 f2 02    	pslld  xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 73 d2 02    	psrlq  xmm10,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 73 da 02    	psrldq xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 73 f2 02    	psllq  xmm10,0x2
-[ 	]*[a-f0-9]+:	66 41 0f 73 fa 02    	pslldq xmm10,0x2
-[ 	]*[a-f0-9]+:	0f 71 d6 02          	psrlw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 d2 02       	psrlw  xmm2,0x2
-[ 	]*[a-f0-9]+:	0f 71 e6 02          	psraw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 e2 02       	psraw  xmm2,0x2
-[ 	]*[a-f0-9]+:	0f 71 f6 02          	psllw  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 71 f2 02       	psllw  xmm2,0x2
-[ 	]*[a-f0-9]+:	0f 72 d6 02          	psrld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 d2 02       	psrld  xmm2,0x2
-[ 	]*[a-f0-9]+:	0f 72 e6 02          	psrad  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 e2 02       	psrad  xmm2,0x2
-[ 	]*[a-f0-9]+:	0f 72 f6 02          	pslld  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 72 f2 02       	pslld  xmm2,0x2
-[ 	]*[a-f0-9]+:	0f 73 d6 02          	psrlq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 d2 02       	psrlq  xmm2,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 da 02       	psrldq xmm2,0x2
-[ 	]*[a-f0-9]+:	0f 73 f6 02          	psllq  mm6,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 f2 02       	psllq  xmm2,0x2
-[ 	]*[a-f0-9]+:	66 0f 73 fa 02       	pslldq xmm2,0x2
-#pass
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-reg.s binutils-stable/gas/testsuite/gas/i386/x86-64-reg.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/i386/x86-64-reg.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/i386/x86-64-reg.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,44 +0,0 @@
-# Check 64bit instructions with one register operand
-
-	.text
-_start:
-psrlw $2, %mm6
-psrlw $2, %xmm10
-psraw $2, %mm6
-psraw $2, %xmm10
-psllw $2, %mm6
-psllw $2, %xmm10
-psrld $2, %mm6
-psrld $2, %xmm10
-psrad $2, %mm6
-psrad $2, %xmm10
-pslld $2, %mm6
-pslld $2, %xmm10
-psrlq $2, %mm6
-psrlq $2, %xmm10
-psrldq $2, %xmm10
-psllq $2, %mm6
-psllq $2, %xmm10
-pslldq $2, %xmm10
-
-.intel_syntax noprefix
-psrlw mm6, 2
-psrlw xmm2, 2
-psraw mm6, 2
-psraw xmm2, 2
-psllw mm6, 2
-psllw xmm2, 2
-psrld mm6, 2
-psrld xmm2, 2
-psrad mm6, 2
-psrad xmm2, 2
-pslld mm6, 2
-pslld xmm2, 2
-psrlq mm6, 2
-psrlq xmm2, 2
-psrldq xmm2, 2
-psllq mm6, 2
-psllq xmm2, 2
-pslldq xmm2, 2
-
-.p2align 4,0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ia64/pcrel.d binutils-stable/gas/testsuite/gas/ia64/pcrel.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ia64/pcrel.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ia64/pcrel.d	2007-09-25 15:41:18.000000000 +0200
@@ -9,28 +9,28 @@
 0+10[[:space:]]+PCREL22[[:space:]]+esym
 0+20[[:space:]]+PCREL22[[:space:]]+esym\+0x0+20
 0+30[[:space:]]+PCREL22[[:space:]]+esym
-0+40[[:space:]]+PCREL22[[:space:]]+esym-0x0+20
+0+40[[:space:]]+PCREL22[[:space:]]+esym\+0xf+e0
 
 RELOCATION RECORDS FOR \[\.movl\]:
 OFFSET[[:space:]]+TYPE[[:space:]]+VALUE[[:space:]]*
 0+12[[:space:]]+PCREL64I[[:space:]]+esym
 0+22[[:space:]]+PCREL64I[[:space:]]+esym\+0x0+20
 0+32[[:space:]]+PCREL64I[[:space:]]+esym
-0+42[[:space:]]+PCREL64I[[:space:]]+esym-0x0+20
+0+42[[:space:]]+PCREL64I[[:space:]]+esym\+0xf+e0
 
 RELOCATION RECORDS FOR \[\.data8\]:
 OFFSET[[:space:]]+TYPE[[:space:]]+VALUE[[:space:]]*
 0+10[[:space:]]+PCREL64[LM]SB[[:space:]]+esym
 0+20[[:space:]]+PCREL64[LM]SB[[:space:]]+esym\+0x0+20
 0+30[[:space:]]+PCREL64[LM]SB[[:space:]]+esym
-0+40[[:space:]]+PCREL64[LM]SB[[:space:]]+esym-0x0+20
+0+40[[:space:]]+PCREL64[LM]SB[[:space:]]+esym\+0xf+e0
 
 RELOCATION RECORDS FOR \[\.data4\]:
 OFFSET[[:space:]]+TYPE[[:space:]]+VALUE[[:space:]]*
 0+10[[:space:]]+PCREL32[LM]SB[[:space:]]+esym
 0+20[[:space:]]+PCREL32[LM]SB[[:space:]]+esym\+0x0+20
 0+30[[:space:]]+PCREL32[LM]SB[[:space:]]+esym
-0+40[[:space:]]+PCREL32[LM]SB[[:space:]]+esym-0x0+20
+0+40[[:space:]]+PCREL32[LM]SB[[:space:]]+esym\+0xf+e0
 
 
 Contents of section \.mov:
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/m68k/br-isaa.d binutils-stable/gas/testsuite/gas/m68k/br-isaa.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/m68k/br-isaa.d	2007-05-11 17:23:20.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/m68k/br-isaa.d	2007-09-25 15:41:23.000000000 +0200
@@ -1,5 +1,5 @@
 #name: br-isaa.d
-#objdump: -d
+#objdump: -dr
 #as: -march=isaa -pcrel
 
 .*:     file format .*
@@ -10,6 +10,8 @@
    0:	4e71           	nop
    2:	60fc           	bras 0 <foo>
    4:	6000 0000      	braw 6 <foo\+0x6>
+			6: R_68K_PC16	bar
    8:	61f6           	bsrs 0 <foo>
    a:	6100 0000      	bsrw c <foo\+0xc>
+			c: R_68K_PC16	bar
    e:	4e71           	nop
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/m68k/br-isab.d binutils-stable/gas/testsuite/gas/m68k/br-isab.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/m68k/br-isab.d	2007-06-18 19:29:29.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/m68k/br-isab.d	2007-09-25 15:41:23.000000000 +0200
@@ -1,5 +1,5 @@
 #name: br-isab.d
-#objdump: -d
+#objdump: -dr
 #as: -march=isab -pcrel
 
 .*:     file format .*
@@ -11,6 +11,8 @@
    2:	61ff ffff fffc 	bsrl 0 <foo>
    8:	60f6           	bras 0 <foo>
    a:	60ff 0000 0000 	bral c <foo\+0xc>
+			c: R_68K_PC32	bar
   10:	61ee           	bsrs 0 <foo>
   12:	61ff 0000 0000 	bsrl 14 <foo\+0x14>
+			14: R_68K_PC32	bar
   18:	4e71           	nop
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/m68k/br-isac.d binutils-stable/gas/testsuite/gas/m68k/br-isac.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/m68k/br-isac.d	2007-06-18 19:29:29.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/m68k/br-isac.d	2007-09-25 15:41:23.000000000 +0200
@@ -1,5 +1,5 @@
 #name: br-isac.d
-#objdump: -d
+#objdump: -dr
 #as: -march=isac -pcrel
 
 .*:     file format .*
@@ -10,7 +10,11 @@
    0:	4e71           	nop
    2:	61ff ffff fffc 	bsrl 0 <foo>
    8:	60f6           	bras 0 <foo>
-   a:	6000 0000      	braw c <foo\+0xc>
-   e:	61f0           	bsrs 0 <foo>
-  10:	61ff 0000 0000 	bsrl 12 <foo\+0x12>
-  16:	4e71           	nop
+   a:	66ff 0000 0000 	bnel c <foo\+0xc>
+			c: R_68K_PC32	bar
+  10:	67ff 0000 0000 	beql 12 <foo\+0x12>
+			12: R_68K_PC32	bar
+  16:	61e8           	bsrs 0 <foo>
+  18:	61ff 0000 0000 	bsrl 1a <foo\+0x1a>
+			1a: R_68K_PC32	bar
+  1e:	4e71           	nop
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/m68k/fido.d binutils-stable/gas/testsuite/gas/m68k/fido.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/m68k/fido.d	2007-01-03 20:49:13.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/m68k/fido.d	2007-09-25 15:41:23.000000000 +0200
@@ -25,17 +25,21 @@
 0+020 <foo\+(0x|)20> trapx #15
 0+022 <foo\+(0x|)22> movec %cac,%d0
 0+026 <foo\+(0x|)26> movec %cac,%a0
-0+02a <foo\+(0x|)2a> movec %mbb,%d1
-0+02e <foo\+(0x|)2e> movec %mbb,%a1
+0+02a <foo\+(0x|)2a> movec %mbo,%d1
+0+02e <foo\+(0x|)2e> movec %mbo,%a1
 0+032 <foo\+(0x|)32> movec %d2,%cac
 0+036 <foo\+(0x|)36> movec %a2,%cac
-0+03a <foo\+(0x|)3a> movec %d3,%mbb
-0+03e <foo\+(0x|)3e> movec %a3,%mbb
+0+03a <foo\+(0x|)3a> movec %d3,%mbo
+0+03e <foo\+(0x|)3e> movec %a3,%mbo
 0+042 <foo\+(0x|)42> movec %cac,%d4
 0+046 <foo\+(0x|)46> movec %cac,%a4
-0+04a <foo\+(0x|)4a> movec %mbb,%d5
-0+04e <foo\+(0x|)4e> movec %mbb,%a5
+0+04a <foo\+(0x|)4a> movec %mbo,%d5
+0+04e <foo\+(0x|)4e> movec %mbo,%a5
 0+052 <foo\+(0x|)52> movec %d6,%cac
 0+056 <foo\+(0x|)56> movec %fp,%cac
-0+05a <foo\+(0x|)5a> movec %d7,%mbb
-0+05e <foo\+(0x|)5e> movec %sp,%mbb
+0+05a <foo\+(0x|)5a> movec %d7,%mbo
+0+05e <foo\+(0x|)5e> movec %sp,%mbo
+0+062 <foo\+(0x|)62> movec %mbo,%d0
+0+066 <foo\+(0x|)66> movec %mbo,%a0
+0+06a <foo\+(0x|)6a> movec %d1,%mbo
+0+06e <foo\+(0x|)6e> movec %a1,%mbo
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/m68k/fido.s binutils-stable/gas/testsuite/gas/m68k/fido.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/m68k/fido.s	2007-01-03 20:49:13.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/m68k/fido.s	2007-09-25 15:41:23.000000000 +0200
@@ -35,3 +35,7 @@
 	movec %a6,%cac
 	movec %d7,%mbb
 	movec %a7,%mbb
+	movec %mbo,%d0
+	movec %mbo,%a0
+	movec %d1,%mbo
+	movec %a1,%mbo
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/branch-misc-2-64.d binutils-stable/gas/testsuite/gas/mips/branch-misc-2-64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/branch-misc-2-64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/mips/branch-misc-2-64.d	2007-09-25 15:41:20.000000000 +0200
@@ -12,51 +12,51 @@
 	\.\.\.
 	\.\.\.
 0+003c <[^>]*> 04110000 	bal	0000000000000040 <x\+0x4>
-[ 	]*3c: R_MIPS_PC16	g1-0x4
-[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*3c: R_MIPS_PC16	g1\+0xfffffffffffffffc
+[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0040 <[^>]*> 00000000 	nop
 0+0044 <[^>]*> 04110000 	bal	0000000000000048 <x\+0xc>
-[ 	]*44: R_MIPS_PC16	g2-0x4
-[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*44: R_MIPS_PC16	g2\+0xfffffffffffffffc
+[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0048 <[^>]*> 00000000 	nop
 0+004c <[^>]*> 04110000 	bal	0000000000000050 <x\+0x14>
-[ 	]*4c: R_MIPS_PC16	g3-0x4
-[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*4c: R_MIPS_PC16	g3\+0xfffffffffffffffc
+[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0050 <[^>]*> 00000000 	nop
 0+0054 <[^>]*> 04110000 	bal	0000000000000058 <x\+0x1c>
-[ 	]*54: R_MIPS_PC16	g4-0x4
-[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*54: R_MIPS_PC16	g4\+0xfffffffffffffffc
+[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0058 <[^>]*> 00000000 	nop
 0+005c <[^>]*> 04110000 	bal	0000000000000060 <x\+0x24>
-[ 	]*5c: R_MIPS_PC16	g5-0x4
-[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*5c: R_MIPS_PC16	g5\+0xfffffffffffffffc
+[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0060 <[^>]*> 00000000 	nop
 0+0064 <[^>]*> 04110000 	bal	0000000000000068 <x\+0x2c>
-[ 	]*64: R_MIPS_PC16	g6-0x4
-[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*64: R_MIPS_PC16	g6\+0xfffffffffffffffc
+[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0068 <[^>]*> 00000000 	nop
 	\.\.\.
 	\.\.\.
 	\.\.\.
 0+00a8 <[^>]*> 10000000 	b	00000000000000ac <g6\+0x4>
-[ 	]*a8: R_MIPS_PC16	x1-0x4
-[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*a8: R_MIPS_PC16	x1\+0xfffffffffffffffc
+[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+00ac <[^>]*> 00000000 	nop
 0+00b0 <[^>]*> 10000000 	b	00000000000000b4 <g6\+0xc>
-[ 	]*b0: R_MIPS_PC16	x2-0x4
-[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*b0: R_MIPS_PC16	x2\+0xfffffffffffffffc
+[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+00b4 <[^>]*> 00000000 	nop
 0+00b8 <[^>]*> 10000000 	b	00000000000000bc <g6\+0x14>
-[ 	]*b8: R_MIPS_PC16	\.data-0x4
-[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*b8: R_MIPS_PC16	\.data\+0xfffffffffffffffc
+[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+00bc <[^>]*> 00000000 	nop
 	\.\.\.
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/branch-misc-2pic-64.d binutils-stable/gas/testsuite/gas/mips/branch-misc-2pic-64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/branch-misc-2pic-64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/mips/branch-misc-2pic-64.d	2007-09-25 15:41:20.000000000 +0200
@@ -12,51 +12,51 @@
 	\.\.\.
 	\.\.\.
 0+003c <[^>]*> 04110000 	bal	0000000000000040 <x\+0x4>
-[ 	]*3c: R_MIPS_PC16	g1-0x4
-[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*3c: R_MIPS_PC16	g1\+0xfffffffffffffffc
+[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0040 <[^>]*> 00000000 	nop
 0+0044 <[^>]*> 04110000 	bal	0000000000000048 <x\+0xc>
-[ 	]*44: R_MIPS_PC16	g2-0x4
-[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*44: R_MIPS_PC16	g2\+0xfffffffffffffffc
+[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0048 <[^>]*> 00000000 	nop
 0+004c <[^>]*> 04110000 	bal	0000000000000050 <x\+0x14>
-[ 	]*4c: R_MIPS_PC16	g3-0x4
-[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*4c: R_MIPS_PC16	g3\+0xfffffffffffffffc
+[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0050 <[^>]*> 00000000 	nop
 0+0054 <[^>]*> 04110000 	bal	0000000000000058 <x\+0x1c>
-[ 	]*54: R_MIPS_PC16	g4-0x4
-[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*54: R_MIPS_PC16	g4\+0xfffffffffffffffc
+[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0058 <[^>]*> 00000000 	nop
 0+005c <[^>]*> 04110000 	bal	0000000000000060 <x\+0x24>
-[ 	]*5c: R_MIPS_PC16	g5-0x4
-[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*5c: R_MIPS_PC16	g5\+0xfffffffffffffffc
+[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0060 <[^>]*> 00000000 	nop
 0+0064 <[^>]*> 04110000 	bal	0000000000000068 <x\+0x2c>
-[ 	]*64: R_MIPS_PC16	g6-0x4
-[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*64: R_MIPS_PC16	g6\+0xfffffffffffffffc
+[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+0068 <[^>]*> 00000000 	nop
 	\.\.\.
 	\.\.\.
 	\.\.\.
 0+00a8 <[^>]*> 10000000 	b	00000000000000ac <g6\+0x4>
-[ 	]*a8: R_MIPS_PC16	x1-0x4
-[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*a8: R_MIPS_PC16	x1\+0xfffffffffffffffc
+[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+00ac <[^>]*> 00000000 	nop
 0+00b0 <[^>]*> 10000000 	b	00000000000000b4 <g6\+0xc>
-[ 	]*b0: R_MIPS_PC16	x2-0x4
-[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*b0: R_MIPS_PC16	x2\+0xfffffffffffffffc
+[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+00b4 <[^>]*> 00000000 	nop
 0+00b8 <[^>]*> 10000000 	b	00000000000000bc <g6\+0x14>
-[ 	]*b8: R_MIPS_PC16	\.data-0x4
-[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
-[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
+[ 	]*b8: R_MIPS_PC16	\.data\+0xfffffffffffffffc
+[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
+[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
 0+00bc <[^>]*> 00000000 	nop
 	\.\.\.
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/ldstla-n64-sym32.d binutils-stable/gas/testsuite/gas/mips/ldstla-n64-sym32.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/ldstla-n64-sym32.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/mips/ldstla-n64-sym32.d	2007-09-25 15:41:20.000000000 +0200
@@ -196,19 +196,19 @@
 .*: R_MIPS_NONE	.*
 .*	daddu	a0,a0,v1
 .*	lui	a0,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	d?addiu	a0,a0,0
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	lui	a0,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	d?addiu	a0,a0,0
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	daddu	a0,a0,v1
@@ -406,20 +406,20 @@
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	lui	a0,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	lw	a0,0\(a0\)
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	lui	a0,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	daddu	a0,a0,v1
 .*	lw	a0,0\(a0\)
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 #
@@ -616,20 +616,20 @@
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	lui	at,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	sw	a0,0\(at\)
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	lui	at,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	daddu	at,at,v1
 .*	sw	a0,0\(at\)
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 #
@@ -880,21 +880,21 @@
 .*	swl	a0,0\(at\)
 .*	swr	a0,3\(at\)
 .*	lui	at,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	d?addiu	at,at,0
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	swl	a0,0\(at\)
 .*	swr	a0,3\(at\)
 .*	lui	at,0x0
-.*: R_MIPS_HI16	extern-0x34000
+.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	d?addiu	at,at,0
-.*: R_MIPS_LO16	extern-0x34000
+.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
 .*: R_MIPS_NONE	.*
 .*: R_MIPS_NONE	.*
 .*	daddu	at,at,v1
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2e.d binutils-stable/gas/testsuite/gas/mips/loongson-2e.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2e.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/loongson-2e.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,150 @@
+#as: -march=loongson2e -mabi=o64
+#objdump: -M reg-names=numeric -dr
+#name: ST Microelectronics Loongson-2E tests
+
+.*:     file format .*
+
+Disassembly of section .text:
+
+[0-9a-f]+ <movz_insns>:
+.*:	0064100a 	movz	\$2,\$3,\$4
+.*:	0064100b 	movn	\$2,\$3,\$4
+.*:	0064100b 	movn	\$2,\$3,\$4
+
+[0-9a-f]+ <integer_insns>:
+.*:	7c641018 	mult.g	\$2,\$3,\$4
+.*:	7cc72819 	multu.g	\$5,\$6,\$7
+.*:	7d2a401c 	dmult.g	\$8,\$9,\$10
+.*:	7d8d581d 	dmultu.g	\$11,\$12,\$13
+.*:	7df0701a 	div.g	\$14,\$15,\$16
+.*:	7e53881b 	divu.g	\$17,\$18,\$19
+.*:	7eb6a01e 	ddiv.g	\$20,\$21,\$22
+.*:	7f19b81f 	ddivu.g	\$23,\$24,\$25
+.*:	7f7cd022 	mod.g	\$26,\$27,\$28
+.*:	7fdfe823 	modu.g	\$29,\$30,\$31
+.*:	7c641026 	dmod.g	\$2,\$3,\$4
+.*:	7cc72827 	dmodu.g	\$5,\$6,\$7
+
+[0-9a-f]+ <fpu_insns>:
+.*:	46020818 	madd.s	\$f0,\$f1,\$f2
+.*:	462520d8 	madd.d	\$f3,\$f4,\$f5
+.*:	45683998 	madd.ps	\$f6,\$f7,\$f8
+.*:	460b5259 	msub.s	\$f9,\$f10,\$f11
+.*:	462e6b19 	msub.d	\$f12,\$f13,\$f14
+.*:	457183d9 	msub.ps	\$f15,\$f16,\$f17
+.*:	46149c9a 	nmadd.s	\$f18,\$f19,\$f20
+.*:	4637b55a 	nmadd.d	\$f21,\$f22,\$f23
+.*:	457ace1a 	nmadd.ps	\$f24,\$f25,\$f26
+.*:	461de6db 	nmsub.s	\$f27,\$f28,\$f29
+.*:	4622081b 	nmsub.d	\$f0,\$f1,\$f2
+.*:	456520db 	nmsub.ps	\$f3,\$f4,\$f5
+
+[0-9a-f]+ <simd_insns>:
+.*:	47420802 	packsshb	\$f0,\$f1,\$f2
+.*:	472520c2 	packsswh	\$f3,\$f4,\$f5
+.*:	47683982 	packushb	\$f6,\$f7,\$f8
+.*:	47cb5240 	paddb	\$f9,\$f10,\$f11
+.*:	474e6b00 	paddh	\$f12,\$f13,\$f14
+.*:	477183c0 	paddw	\$f15,\$f16,\$f17
+.*:	47f49c80 	paddd	\$f18,\$f19,\$f20
+.*:	4797b540 	paddsb	\$f21,\$f22,\$f23
+.*:	471ace00 	paddsh	\$f24,\$f25,\$f26
+.*:	47bde6c0 	paddusb	\$f27,\$f28,\$f29
+.*:	47220800 	paddush	\$f0,\$f1,\$f2
+.*:	47e520c2 	pandn	\$f3,\$f4,\$f5
+.*:	46683980 	pavgb	\$f6,\$f7,\$f8
+.*:	464b5240 	pavgh	\$f9,\$f10,\$f11
+.*:	46ce6b01 	pcmpeqb	\$f12,\$f13,\$f14
+.*:	469183c1 	pcmpeqh	\$f15,\$f16,\$f17
+.*:	46549c81 	pcmpeqw	\$f18,\$f19,\$f20
+.*:	46f7b541 	pcmpgtb	\$f21,\$f22,\$f23
+.*:	46bace01 	pcmpgth	\$f24,\$f25,\$f26
+.*:	467de6c1 	pcmpgtw	\$f27,\$f28,\$f29
+.*:	45c20802 	pextrh	\$f0,\$f1,\$f2
+.*:	478520c3 	pinsrh_0	\$f3,\$f4,\$f5
+.*:	47a83983 	pinsrh_1	\$f6,\$f7,\$f8
+.*:	47cb5243 	pinsrh_2	\$f9,\$f10,\$f11
+.*:	47ee6b03 	pinsrh_3	\$f12,\$f13,\$f14
+.*:	45f183c2 	pmaddhw	\$f15,\$f16,\$f17
+.*:	46949c80 	pmaxsh	\$f18,\$f19,\$f20
+.*:	46d7b540 	pmaxub	\$f21,\$f22,\$f23
+.*:	46bace00 	pminsh	\$f24,\$f25,\$f26
+.*:	46fde6c0 	pminub	\$f27,\$f28,\$f29
+.*:	46a00805 	pmovmskb	\$f0,\$f1
+.*:	46e41882 	pmulhuh	\$f2,\$f3,\$f4
+.*:	46a73142 	pmulhh	\$f5,\$f6,\$f7
+.*:	468a4a02 	pmullh	\$f8,\$f9,\$f10
+.*:	46cd62c2 	pmuluw	\$f11,\$f12,\$f13
+.*:	45b07b81 	pasubub	\$f14,\$f15,\$f16
+.*:	46809445 	biadd	\$f17,\$f18
+.*:	4715a4c2 	pshufh	\$f19,\$f20,\$f21
+.*:	4678bd82 	psllh	\$f22,\$f23,\$f24
+.*:	465bd642 	psllw	\$f25,\$f26,\$f27
+.*:	46beef03 	psrah	\$f28,\$f29,\$f30
+.*:	46820803 	psraw	\$f0,\$f1,\$f2
+.*:	466520c3 	psrlh	\$f3,\$f4,\$f5
+.*:	46483983 	psrlw	\$f6,\$f7,\$f8
+.*:	47cb5241 	psubb	\$f9,\$f10,\$f11
+.*:	474e6b01 	psubh	\$f12,\$f13,\$f14
+.*:	477183c1 	psubw	\$f15,\$f16,\$f17
+.*:	47f49c81 	psubd	\$f18,\$f19,\$f20
+.*:	4797b541 	psubsb	\$f21,\$f22,\$f23
+.*:	471ace01 	psubsh	\$f24,\$f25,\$f26
+.*:	47bde6c1 	psubusb	\$f27,\$f28,\$f29
+.*:	47220801 	psubush	\$f0,\$f1,\$f2
+.*:	476520c3 	punpckhbh	\$f3,\$f4,\$f5
+.*:	47283983 	punpckhhw	\$f6,\$f7,\$f8
+.*:	46eb5243 	punpckhwd	\$f9,\$f10,\$f11
+.*:	474e6b03 	punpcklbh	\$f12,\$f13,\$f14
+.*:	471183c3 	punpcklhw	\$f15,\$f16,\$f17
+.*:	46d49c83 	punpcklwd	\$f18,\$f19,\$f20
+
+[0-9a-f]+ <fixed_point_insns>:
+.*:	45c20800 	add	\$f0,\$f1,\$f2
+.*:	458520c0 	addu	\$f3,\$f4,\$f5
+.*:	45e83980 	dadd	\$f6,\$f7,\$f8
+.*:	45cb5241 	sub	\$f9,\$f10,\$f11
+.*:	458e6b01 	subu	\$f12,\$f13,\$f14
+.*:	45f183c1 	dsub	\$f15,\$f16,\$f17
+.*:	45b49c80 	or	\$f18,\$f19,\$f20
+.*:	4597b542 	sll	\$f21,\$f22,\$f23
+.*:	45bace02 	dsll	\$f24,\$f25,\$f26
+.*:	479de6c2 	xor	\$f27,\$f28,\$f29
+.*:	47a20802 	nor	\$f0,\$f1,\$f2
+.*:	47c520c2 	and	\$f3,\$f4,\$f5
+.*:	45883983 	srl	\$f6,\$f7,\$f8
+.*:	45ab5243 	dsrl	\$f9,\$f10,\$f11
+.*:	45ce6b03 	sra	\$f12,\$f13,\$f14
+.*:	45f183c3 	dsra	\$f15,\$f16,\$f17
+.*:	46939032 	sequ	\$f18,\$f19
+.*:	4695a03c 	sltu	\$f20,\$f21
+.*:	4697b03e 	sleu	\$f22,\$f23
+.*:	46b9c032 	seq	\$f24,\$f25
+.*:	46bbd03c 	slt	\$f26,\$f27
+.*:	46bde03e 	sle	\$f28,\$f29
+
+[0-9a-f]+ <mips5_ps_insns>:
+.*:	45601005 	abs.ps	\$f0,\$f2
+.*:	45662080 	add.ps	\$f2,\$f4,\$f6
+.*:	456a4032 	c.eq.ps	\$f8,\$f10
+.*:	456a4030 	c.f.ps	\$f8,\$f10
+.*:	456a403e 	c.le.ps	\$f8,\$f10
+.*:	456a403c 	c.lt.ps	\$f8,\$f10
+.*:	456a403d 	c.nge.ps	\$f8,\$f10
+.*:	456a403b 	c.ngl.ps	\$f8,\$f10
+.*:	456a4039 	c.ngle.ps	\$f8,\$f10
+.*:	456a403f 	c.ngt.ps	\$f8,\$f10
+.*:	456a4036 	c.ole.ps	\$f8,\$f10
+.*:	456a4034 	c.olt.ps	\$f8,\$f10
+.*:	456a403a 	c.seq.ps	\$f8,\$f10
+.*:	456a4038 	c.sf.ps	\$f8,\$f10
+.*:	456a4033 	c.ueq.ps	\$f8,\$f10
+.*:	456a4037 	c.ule.ps	\$f8,\$f10
+.*:	456a4035 	c.ult.ps	\$f8,\$f10
+.*:	456a4031 	c.un.ps	\$f8,\$f10
+.*:	4560d606 	mov.ps	\$f24,\$f26
+.*:	45662082 	mul.ps	\$f2,\$f4,\$f6
+.*:	45604187 	neg.ps	\$f6,\$f8
+.*:	457ac581 	sub.ps	\$f22,\$f24,\$f26
+#pass
+
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2e.s binutils-stable/gas/testsuite/gas/mips/loongson-2e.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2e.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/loongson-2e.s	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,144 @@
+        .text
+	.set noreorder
+
+movz_insns:
+	movz		$2, $3, $4
+	movnz		$2, $3, $4
+	movn		$2, $3, $4
+
+integer_insns:
+	mult.g		$2, $3, $4
+	multu.g		$5, $6, $7
+	dmult.g		$8, $9, $10
+	dmultu.g	$11, $12, $13
+	div.g		$14, $15, $16
+	divu.g		$17, $18, $19
+	ddiv.g		$20, $21, $22
+	ddivu.g		$23, $24, $25
+	mod.g		$26, $27, $28
+	modu.g		$29, $30, $31
+	dmod.g		$2, $3, $4
+	dmodu.g		$5, $6, $7
+
+fpu_insns:
+	madd.s		$f0, $f1, $f2
+	madd.d		$f3, $f4, $f5
+	madd.ps		$f6, $f7, $f8
+	msub.s		$f9, $f10, $f11
+	msub.d		$f12, $f13, $f14
+	msub.ps		$f15, $f16, $f17
+	nmadd.s		$f18, $f19, $f20
+	nmadd.d		$f21, $f22, $f23
+	nmadd.ps	$f24, $f25, $f26
+	nmsub.s		$f27, $f28, $f29
+	nmsub.d		$f0, $f1, $f2
+	nmsub.ps	$f3, $f4, $f5
+
+simd_insns:
+	packsshb	$f0, $f1, $f2
+	packsswh	$f3, $f4, $f5
+	packushb	$f6, $f7, $f8
+	paddb		$f9, $f10, $f11
+	paddh		$f12, $f13, $f14
+	paddw		$f15, $f16, $f17
+	paddd		$f18, $f19, $f20
+	paddsb		$f21, $f22, $f23
+	paddsh		$f24, $f25, $f26
+	paddusb		$f27, $f28, $f29
+	paddush		$f0, $f1, $f2
+	pandn		$f3, $f4, $f5
+	pavgb		$f6, $f7, $f8
+	pavgh		$f9, $f10, $f11
+	pcmpeqb		$f12, $f13, $f14
+	pcmpeqh		$f15, $f16, $f17
+	pcmpeqw		$f18, $f19, $f20
+	pcmpgtb		$f21, $f22, $f23
+	pcmpgth		$f24, $f25, $f26
+	pcmpgtw		$f27, $f28, $f29
+	pextrh		$f0, $f1, $f2
+	pinsrh_0	$f3, $f4, $f5
+	pinsrh_1	$f6, $f7, $f8
+	pinsrh_2	$f9, $f10, $f11
+	pinsrh_3	$f12, $f13, $f14
+	pmaddhw		$f15, $f16, $f17
+	pmaxsh		$f18, $f19, $f20
+	pmaxub		$f21, $f22, $f23
+	pminsh		$f24, $f25, $f26
+	pminub		$f27, $f28, $f29
+	pmovmskb	$f0, $f1
+	pmulhuh		$f2, $f3, $f4
+	pmulhh		$f5, $f6, $f7
+	pmullh		$f8, $f9, $f10
+	pmuluw		$f11, $f12, $f13
+	pasubub		$f14, $f15, $f16
+	biadd		$f17, $f18
+	pshufh		$f19, $f20, $f21
+	psllh		$f22, $f23, $f24
+	psllw		$f25, $f26, $f27
+	psrah		$f28, $f29, $f30
+	psraw		$f0, $f1, $f2
+	psrlh		$f3, $f4, $f5
+	psrlw		$f6, $f7, $f8
+	psubb		$f9, $f10, $f11
+	psubh		$f12, $f13, $f14
+	psubw		$f15, $f16, $f17
+	psubd		$f18, $f19, $f20
+	psubsb		$f21, $f22, $f23
+	psubsh		$f24, $f25, $f26
+	psubusb		$f27, $f28, $f29
+	psubush		$f0, $f1, $f2
+	punpckhbh	$f3, $f4, $f5
+	punpckhhw	$f6, $f7, $f8
+	punpckhwd	$f9, $f10, $f11
+	punpcklbh	$f12, $f13, $f14
+	punpcklhw	$f15, $f16, $f17
+	punpcklwd	$f18, $f19, $f20
+
+fixed_point_insns:
+	add		$f0, $f1, $f2
+	addu		$f3, $f4, $f5
+	dadd		$f6, $f7, $f8
+	sub		$f9, $f10, $f11
+	subu		$f12, $f13, $f14
+	dsub		$f15, $f16, $f17
+	or		$f18, $f19, $f20
+	sll		$f21, $f22, $f23
+	dsll		$f24, $f25, $f26
+	xor		$f27, $f28, $f29
+	nor		$f0, $f1, $f2
+	and		$f3, $f4, $f5
+	srl		$f6, $f7, $f8
+	dsrl		$f9, $f10, $f11
+	sra		$f12, $f13, $f14
+	dsra		$f15, $f16, $f17
+	sequ		$f18, $f19
+	sltu		$f20, $f21
+	sleu		$f22, $f23
+	seq		$f24, $f25
+	slt		$f26, $f27
+	sle		$f28, $f29
+
+mips5_ps_insns:
+	abs.ps		$f0, $f2
+	add.ps		$f2, $f4, $f6
+	c.eq.ps		$f8, $f10
+	c.f.ps	    	$f8, $f10
+	c.le.ps		$f8, $f10
+	c.lt.ps		$f8, $f10
+	c.nge.ps	$f8, $f10
+	c.ngl.ps	$f8, $f10
+	c.ngle.ps	$f8, $f10
+	c.ngt.ps	$f8, $f10
+	c.ole.ps	$f8, $f10
+	c.olt.ps	$f8, $f10
+	c.seq.ps	$f8, $f10
+	c.sf.ps		$f8, $f10
+	c.ueq.ps	$f8, $f10
+	c.ule.ps	$f8, $f10
+	c.ult.ps	$f8, $f10
+	c.un.ps		$f8, $f10
+	mov.ps		$f24, $f26
+	mul.ps		$f2, $f4, $f6
+	neg.ps		$f6, $f8
+	sub.ps		$f22, $f24, $f26
+
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2f.d binutils-stable/gas/testsuite/gas/mips/loongson-2f.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2f.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/loongson-2f.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,150 @@
+#as: -march=loongson2f -mabi=o64
+#objdump: -M reg-names=numeric -dr
+#name: ST Microelectronics Loongson-2F tests
+
+.*:     file format .*
+
+Disassembly of section .text:
+
+[0-9a-f]+ <movz_insns>:
+.*:	0064100a 	movz	\$2,\$3,\$4
+.*:	0064100b 	movn	\$2,\$3,\$4
+.*:	0064100b 	movn	\$2,\$3,\$4
+
+[0-9a-f]+ <integer_insns>:
+.*:	70641010 	mult.g	\$2,\$3,\$4
+.*:	70c72812 	multu.g	\$5,\$6,\$7
+.*:	712a4011 	dmult.g	\$8,\$9,\$10
+.*:	718d5813 	dmultu.g	\$11,\$12,\$13
+.*:	71f07014 	div.g	\$14,\$15,\$16
+.*:	72538816 	divu.g	\$17,\$18,\$19
+.*:	72b6a015 	ddiv.g	\$20,\$21,\$22
+.*:	7319b817 	ddivu.g	\$23,\$24,\$25
+.*:	737cd01c 	mod.g	\$26,\$27,\$28
+.*:	73dfe81e 	modu.g	\$29,\$30,\$31
+.*:	7064101d 	dmod.g	\$2,\$3,\$4
+.*:	70c7281f 	dmodu.g	\$5,\$6,\$7
+
+[0-9a-f]+ <fpu_insns>:
+.*:	72020818 	madd.s	\$f0,\$f1,\$f2
+.*:	722520d8 	madd.d	\$f3,\$f4,\$f5
+.*:	71683998 	madd.ps	\$f6,\$f7,\$f8
+.*:	720b5259 	msub.s	\$f9,\$f10,\$f11
+.*:	722e6b19 	msub.d	\$f12,\$f13,\$f14
+.*:	717183d9 	msub.ps	\$f15,\$f16,\$f17
+.*:	72149c9a 	nmadd.s	\$f18,\$f19,\$f20
+.*:	7237b55a 	nmadd.d	\$f21,\$f22,\$f23
+.*:	717ace1a 	nmadd.ps	\$f24,\$f25,\$f26
+.*:	721de6db 	nmsub.s	\$f27,\$f28,\$f29
+.*:	7222081b 	nmsub.d	\$f0,\$f1,\$f2
+.*:	716520db 	nmsub.ps	\$f3,\$f4,\$f5
+
+[0-9a-f]+ <simd_insns>:
+.*:	4b420802 	packsshb	\$f0,\$f1,\$f2
+.*:	4b2520c2 	packsswh	\$f3,\$f4,\$f5
+.*:	4b683982 	packushb	\$f6,\$f7,\$f8
+.*:	4bcb5240 	paddb	\$f9,\$f10,\$f11
+.*:	4b4e6b00 	paddh	\$f12,\$f13,\$f14
+.*:	4b7183c0 	paddw	\$f15,\$f16,\$f17
+.*:	4bf49c80 	paddd	\$f18,\$f19,\$f20
+.*:	4b97b540 	paddsb	\$f21,\$f22,\$f23
+.*:	4b1ace00 	paddsh	\$f24,\$f25,\$f26
+.*:	4bbde6c0 	paddusb	\$f27,\$f28,\$f29
+.*:	4b220800 	paddush	\$f0,\$f1,\$f2
+.*:	4be520c2 	pandn	\$f3,\$f4,\$f5
+.*:	4b283988 	pavgb	\$f6,\$f7,\$f8
+.*:	4b0b5248 	pavgh	\$f9,\$f10,\$f11
+.*:	4b8e6b09 	pcmpeqb	\$f12,\$f13,\$f14
+.*:	4b5183c9 	pcmpeqh	\$f15,\$f16,\$f17
+.*:	4b149c89 	pcmpeqw	\$f18,\$f19,\$f20
+.*:	4bb7b549 	pcmpgtb	\$f21,\$f22,\$f23
+.*:	4b7ace09 	pcmpgth	\$f24,\$f25,\$f26
+.*:	4b3de6c9 	pcmpgtw	\$f27,\$f28,\$f29
+.*:	4b42080e 	pextrh	\$f0,\$f1,\$f2
+.*:	4b8520c3 	pinsrh_0	\$f3,\$f4,\$f5
+.*:	4ba83983 	pinsrh_1	\$f6,\$f7,\$f8
+.*:	4bcb5243 	pinsrh_2	\$f9,\$f10,\$f11
+.*:	4bee6b03 	pinsrh_3	\$f12,\$f13,\$f14
+.*:	4b7183ce 	pmaddhw	\$f15,\$f16,\$f17
+.*:	4b549c88 	pmaxsh	\$f18,\$f19,\$f20
+.*:	4b97b548 	pmaxub	\$f21,\$f22,\$f23
+.*:	4b7ace08 	pminsh	\$f24,\$f25,\$f26
+.*:	4bbde6c8 	pminub	\$f27,\$f28,\$f29
+.*:	4ba0080f 	pmovmskb	\$f0,\$f1
+.*:	4ba4188a 	pmulhuh	\$f2,\$f3,\$f4
+.*:	4b67314a 	pmulhh	\$f5,\$f6,\$f7
+.*:	4b4a4a0a 	pmullh	\$f8,\$f9,\$f10
+.*:	4b8d62ca 	pmuluw	\$f11,\$f12,\$f13
+.*:	4b307b8d 	pasubub	\$f14,\$f15,\$f16
+.*:	4b80944f 	biadd	\$f17,\$f18
+.*:	4b15a4c2 	pshufh	\$f19,\$f20,\$f21
+.*:	4b38bd8a 	psllh	\$f22,\$f23,\$f24
+.*:	4b1bd64a 	psllw	\$f25,\$f26,\$f27
+.*:	4b7eef0b 	psrah	\$f28,\$f29,\$f30
+.*:	4b42080b 	psraw	\$f0,\$f1,\$f2
+.*:	4b2520cb 	psrlh	\$f3,\$f4,\$f5
+.*:	4b08398b 	psrlw	\$f6,\$f7,\$f8
+.*:	4bcb5241 	psubb	\$f9,\$f10,\$f11
+.*:	4b4e6b01 	psubh	\$f12,\$f13,\$f14
+.*:	4b7183c1 	psubw	\$f15,\$f16,\$f17
+.*:	4bf49c81 	psubd	\$f18,\$f19,\$f20
+.*:	4b97b541 	psubsb	\$f21,\$f22,\$f23
+.*:	4b1ace01 	psubsh	\$f24,\$f25,\$f26
+.*:	4bbde6c1 	psubusb	\$f27,\$f28,\$f29
+.*:	4b220801 	psubush	\$f0,\$f1,\$f2
+.*:	4b6520c3 	punpckhbh	\$f3,\$f4,\$f5
+.*:	4b283983 	punpckhhw	\$f6,\$f7,\$f8
+.*:	4bab524b 	punpckhwd	\$f9,\$f10,\$f11
+.*:	4b4e6b03 	punpcklbh	\$f12,\$f13,\$f14
+.*:	4b1183c3 	punpcklhw	\$f15,\$f16,\$f17
+.*:	4b949c8b 	punpcklwd	\$f18,\$f19,\$f20
+
+[0-9a-f]+ <fixed_point_insns>:
+.*:	4b42080c 	add	\$f0,\$f1,\$f2
+.*:	4b0520cc 	addu	\$f3,\$f4,\$f5
+.*:	4b68398c 	dadd	\$f6,\$f7,\$f8
+.*:	4b4b524d 	sub	\$f9,\$f10,\$f11
+.*:	4b0e6b0d 	subu	\$f12,\$f13,\$f14
+.*:	4b7183cd 	dsub	\$f15,\$f16,\$f17
+.*:	4b349c8c 	or	\$f18,\$f19,\$f20
+.*:	4b17b54e 	sll	\$f21,\$f22,\$f23
+.*:	4b3ace0e 	dsll	\$f24,\$f25,\$f26
+.*:	4b9de6c2 	xor	\$f27,\$f28,\$f29
+.*:	4ba20802 	nor	\$f0,\$f1,\$f2
+.*:	4bc520c2 	and	\$f3,\$f4,\$f5
+.*:	4b08398f 	srl	\$f6,\$f7,\$f8
+.*:	4b2b524f 	dsrl	\$f9,\$f10,\$f11
+.*:	4b4e6b0f 	sra	\$f12,\$f13,\$f14
+.*:	4b7183cf 	dsra	\$f15,\$f16,\$f17
+.*:	4b93900c 	sequ	\$f18,\$f19
+.*:	4b95a00d 	sltu	\$f20,\$f21
+.*:	4b97b00e 	sleu	\$f22,\$f23
+.*:	4bb9c00c 	seq	\$f24,\$f25
+.*:	4bbbd00d 	slt	\$f26,\$f27
+.*:	4bbde00e 	sle	\$f28,\$f29
+
+000001ac <mips5_ps_insns>:
+.*:	46c01005 	abs.ps	\$f0,\$f2
+.*:	46c62080 	add.ps	\$f2,\$f4,\$f6
+.*:	46ca4032 	c.eq.ps	\$f8,\$f10
+.*:	46ca4030 	c.f.ps	\$f8,\$f10
+.*:	46ca403e 	c.le.ps	\$f8,\$f10
+.*:	46ca403c 	c.lt.ps	\$f8,\$f10
+.*:	46ca403d 	c.nge.ps	\$f8,\$f10
+.*:	46ca403b 	c.ngl.ps	\$f8,\$f10
+.*:	46ca4039 	c.ngle.ps	\$f8,\$f10
+.*:	46ca403f 	c.ngt.ps	\$f8,\$f10
+.*:	46ca4036 	c.ole.ps	\$f8,\$f10
+.*:	46ca4034 	c.olt.ps	\$f8,\$f10
+.*:	46ca403a 	c.seq.ps	\$f8,\$f10
+.*:	46ca4038 	c.sf.ps	\$f8,\$f10
+.*:	46ca4033 	c.ueq.ps	\$f8,\$f10
+.*:	46ca4037 	c.ule.ps	\$f8,\$f10
+.*:	46ca4035 	c.ult.ps	\$f8,\$f10
+.*:	46ca4031 	c.un.ps	\$f8,\$f10
+.*:	46c0d606 	mov.ps	\$f24,\$f26
+.*:	46c62082 	mul.ps	\$f2,\$f4,\$f6
+.*:	46c04187 	neg.ps	\$f6,\$f8
+.*:	46dac581 	sub.ps	\$f22,\$f24,\$f26
+#pass
+
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2f.s binutils-stable/gas/testsuite/gas/mips/loongson-2f.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/loongson-2f.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/loongson-2f.s	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,144 @@
+	.text
+	.set noreorder
+
+movz_insns:
+	movz		$2, $3, $4
+	movnz		$2, $3, $4
+	movn		$2, $3, $4
+
+integer_insns:
+	mult.g		$2, $3, $4
+	multu.g		$5, $6, $7
+	dmult.g		$8, $9, $10
+	dmultu.g	$11, $12, $13
+	div.g		$14, $15, $16
+	divu.g		$17, $18, $19
+	ddiv.g		$20, $21, $22
+	ddivu.g		$23, $24, $25
+	mod.g		$26, $27, $28
+	modu.g		$29, $30, $31
+	dmod.g		$2, $3, $4
+	dmodu.g		$5, $6, $7
+
+fpu_insns:
+	madd.s		$f0, $f1, $f2
+	madd.d		$f3, $f4, $f5
+	madd.ps		$f6, $f7, $f8
+	msub.s		$f9, $f10, $f11
+	msub.d		$f12, $f13, $f14
+	msub.ps		$f15, $f16, $f17
+	nmadd.s		$f18, $f19, $f20
+	nmadd.d		$f21, $f22, $f23
+	nmadd.ps	$f24, $f25, $f26
+	nmsub.s		$f27, $f28, $f29
+	nmsub.d		$f0, $f1, $f2
+	nmsub.ps	$f3, $f4, $f5
+
+simd_insns:
+	packsshb	$f0, $f1, $f2
+	packsswh	$f3, $f4, $f5
+	packushb	$f6, $f7, $f8
+	paddb		$f9, $f10, $f11
+	paddh		$f12, $f13, $f14
+	paddw		$f15, $f16, $f17
+	paddd		$f18, $f19, $f20
+	paddsb		$f21, $f22, $f23
+	paddsh		$f24, $f25, $f26
+	paddusb		$f27, $f28, $f29
+	paddush		$f0, $f1, $f2
+	pandn		$f3, $f4, $f5
+	pavgb		$f6, $f7, $f8
+	pavgh		$f9, $f10, $f11
+	pcmpeqb		$f12, $f13, $f14
+	pcmpeqh		$f15, $f16, $f17
+	pcmpeqw		$f18, $f19, $f20
+	pcmpgtb		$f21, $f22, $f23
+	pcmpgth		$f24, $f25, $f26
+	pcmpgtw		$f27, $f28, $f29
+	pextrh		$f0, $f1, $f2
+	pinsrh_0	$f3, $f4, $f5
+	pinsrh_1	$f6, $f7, $f8
+	pinsrh_2	$f9, $f10, $f11
+	pinsrh_3	$f12, $f13, $f14
+	pmaddhw		$f15, $f16, $f17
+	pmaxsh		$f18, $f19, $f20
+	pmaxub		$f21, $f22, $f23
+	pminsh		$f24, $f25, $f26
+	pminub		$f27, $f28, $f29
+	pmovmskb	$f0, $f1
+	pmulhuh		$f2, $f3, $f4
+	pmulhh		$f5, $f6, $f7
+	pmullh		$f8, $f9, $f10
+	pmuluw		$f11, $f12, $f13
+	pasubub		$f14, $f15, $f16
+	biadd		$f17, $f18
+	pshufh		$f19, $f20, $f21
+	psllh		$f22, $f23, $f24
+	psllw		$f25, $f26, $f27
+	psrah		$f28, $f29, $f30
+	psraw		$f0, $f1, $f2
+	psrlh		$f3, $f4, $f5
+	psrlw		$f6, $f7, $f8
+	psubb		$f9, $f10, $f11
+	psubh		$f12, $f13, $f14
+	psubw		$f15, $f16, $f17
+	psubd		$f18, $f19, $f20
+	psubsb		$f21, $f22, $f23
+	psubsh		$f24, $f25, $f26
+	psubusb		$f27, $f28, $f29
+	psubush		$f0, $f1, $f2
+	punpckhbh	$f3, $f4, $f5
+	punpckhhw	$f6, $f7, $f8
+	punpckhwd	$f9, $f10, $f11
+	punpcklbh	$f12, $f13, $f14
+	punpcklhw	$f15, $f16, $f17
+	punpcklwd	$f18, $f19, $f20
+
+fixed_point_insns:
+	add		$f0, $f1, $f2
+	addu		$f3, $f4, $f5
+	dadd		$f6, $f7, $f8
+	sub		$f9, $f10, $f11
+	subu		$f12, $f13, $f14
+	dsub		$f15, $f16, $f17
+	or		$f18, $f19, $f20
+	sll		$f21, $f22, $f23
+	dsll		$f24, $f25, $f26
+	xor		$f27, $f28, $f29
+	nor		$f0, $f1, $f2
+	and		$f3, $f4, $f5
+	srl		$f6, $f7, $f8
+	dsrl		$f9, $f10, $f11
+	sra		$f12, $f13, $f14
+	dsra		$f15, $f16, $f17
+	sequ		$f18, $f19
+	sltu		$f20, $f21
+	sleu		$f22, $f23
+	seq		$f24, $f25
+	slt		$f26, $f27
+	sle		$f28, $f29
+
+mips5_ps_insns:
+	abs.ps		$f0, $f2
+	add.ps		$f2, $f4, $f6
+	c.eq.ps		$f8, $f10
+	c.f.ps	    	$f8, $f10
+	c.le.ps		$f8, $f10
+	c.lt.ps		$f8, $f10
+	c.nge.ps	$f8, $f10
+	c.ngl.ps	$f8, $f10
+	c.ngle.ps	$f8, $f10
+	c.ngt.ps	$f8, $f10
+	c.ole.ps	$f8, $f10
+	c.olt.ps	$f8, $f10
+	c.seq.ps	$f8, $f10
+	c.sf.ps		$f8, $f10
+	c.ueq.ps	$f8, $f10
+	c.ule.ps	$f8, $f10
+	c.ult.ps	$f8, $f10
+	c.un.ps		$f8, $f10
+	mov.ps		$f24, $f26
+	mul.ps		$f2, $f4, $f6
+	neg.ps		$f6, $f8
+	sub.ps		$f22, $f24, $f26
+
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/mips16-hilo-n32.d binutils-stable/gas/testsuite/gas/mips/mips16-hilo-n32.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/mips16-hilo-n32.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/mips/mips16-hilo-n32.d	2007-09-25 15:41:20.000000000 +0200
@@ -141,45 +141,45 @@
  13c:	f400 3480 	sll	a0,16
  140:	f010 4c00 	addiu	a0,-32768
  144:	f000 6c00 	li	a0,0
-			144: R_MIPS16_HI16	\.data-0x8000
+			144: R_MIPS16_HI16	\.data\+0xffff8000
  148:	f400 3480 	sll	a0,16
  14c:	f000 4c00 	addiu	a0,0
-			14c: R_MIPS16_LO16	\.data-0x8000
+			14c: R_MIPS16_LO16	\.data\+0xffff8000
  150:	f000 6c00 	li	a0,0
-			150: R_MIPS16_HI16	\.data-0x7ffc
+			150: R_MIPS16_HI16	\.data\+0xffff8004
  154:	f400 3480 	sll	a0,16
  158:	f000 4c00 	addiu	a0,0
-			158: R_MIPS16_LO16	\.data-0x7ffc
+			158: R_MIPS16_LO16	\.data\+0xffff8004
  15c:	f000 6c00 	li	a0,0
-			15c: R_MIPS16_HI16	big_external_data_label-0x8000
+			15c: R_MIPS16_HI16	big_external_data_label\+0xffff8000
  160:	f400 3480 	sll	a0,16
  164:	f000 4c00 	addiu	a0,0
-			164: R_MIPS16_LO16	big_external_data_label-0x8000
+			164: R_MIPS16_LO16	big_external_data_label\+0xffff8000
  168:	f000 6c00 	li	a0,0
-			168: R_MIPS16_HI16	small_external_data_label-0x8000
+			168: R_MIPS16_HI16	small_external_data_label\+0xffff8000
  16c:	f400 3480 	sll	a0,16
  170:	f000 4c00 	addiu	a0,0
-			170: R_MIPS16_LO16	small_external_data_label-0x8000
+			170: R_MIPS16_LO16	small_external_data_label\+0xffff8000
  174:	f000 6c00 	li	a0,0
-			174: R_MIPS16_HI16	big_external_common-0x8000
+			174: R_MIPS16_HI16	big_external_common\+0xffff8000
  178:	f400 3480 	sll	a0,16
  17c:	f000 4c00 	addiu	a0,0
-			17c: R_MIPS16_LO16	big_external_common-0x8000
+			17c: R_MIPS16_LO16	big_external_common\+0xffff8000
  180:	f000 6c00 	li	a0,0
-			180: R_MIPS16_HI16	small_external_common-0x8000
+			180: R_MIPS16_HI16	small_external_common\+0xffff8000
  184:	f400 3480 	sll	a0,16
  188:	f000 4c00 	addiu	a0,0
-			188: R_MIPS16_LO16	small_external_common-0x8000
+			188: R_MIPS16_LO16	small_external_common\+0xffff8000
  18c:	f000 6c00 	li	a0,0
-			18c: R_MIPS16_HI16	\.bss-0x8000
+			18c: R_MIPS16_HI16	\.bss\+0xffff8000
  190:	f400 3480 	sll	a0,16
  194:	f000 4c00 	addiu	a0,0
-			194: R_MIPS16_LO16	\.bss-0x8000
+			194: R_MIPS16_LO16	\.bss\+0xffff8000
  198:	f000 6c00 	li	a0,0
-			198: R_MIPS16_HI16	\.sbss-0x8000
+			198: R_MIPS16_HI16	\.sbss\+0xffff8000
  19c:	f400 3480 	sll	a0,16
  1a0:	f000 4c00 	addiu	a0,0
-			1a0: R_MIPS16_LO16	\.sbss-0x8000
+			1a0: R_MIPS16_LO16	\.sbss\+0xffff8000
  1a4:	6c01      	li	a0,1
  1a6:	f400 3480 	sll	a0,16
  1aa:	4c00      	addiu	a0,0
@@ -399,45 +399,45 @@
  3b4:	f400 35a0 	sll	a1,16
  3b8:	f010 9d80 	lw	a0,-32768\(a1\)
  3bc:	f000 6d00 	li	a1,0
-			3bc: R_MIPS16_HI16	\.data-0x8000
+			3bc: R_MIPS16_HI16	\.data\+0xffff8000
  3c0:	f400 35a0 	sll	a1,16
  3c4:	f000 9d80 	lw	a0,0\(a1\)
-			3c4: R_MIPS16_LO16	\.data-0x8000
+			3c4: R_MIPS16_LO16	\.data\+0xffff8000
  3c8:	f000 6d00 	li	a1,0
-			3c8: R_MIPS16_HI16	\.data-0x7ffc
+			3c8: R_MIPS16_HI16	\.data\+0xffff8004
  3cc:	f400 35a0 	sll	a1,16
  3d0:	f000 9d80 	lw	a0,0\(a1\)
-			3d0: R_MIPS16_LO16	\.data-0x7ffc
+			3d0: R_MIPS16_LO16	\.data\+0xffff8004
  3d4:	f000 6d00 	li	a1,0
-			3d4: R_MIPS16_HI16	big_external_data_label-0x8000
+			3d4: R_MIPS16_HI16	big_external_data_label\+0xffff8000
  3d8:	f400 35a0 	sll	a1,16
  3dc:	f000 9d80 	lw	a0,0\(a1\)
-			3dc: R_MIPS16_LO16	big_external_data_label-0x8000
+			3dc: R_MIPS16_LO16	big_external_data_label\+0xffff8000
  3e0:	f000 6d00 	li	a1,0
-			3e0: R_MIPS16_HI16	small_external_data_label-0x8000
+			3e0: R_MIPS16_HI16	small_external_data_label\+0xffff8000
  3e4:	f400 35a0 	sll	a1,16
  3e8:	f000 9d80 	lw	a0,0\(a1\)
-			3e8: R_MIPS16_LO16	small_external_data_label-0x8000
+			3e8: R_MIPS16_LO16	small_external_data_label\+0xffff8000
  3ec:	f000 6d00 	li	a1,0
-			3ec: R_MIPS16_HI16	big_external_common-0x8000
+			3ec: R_MIPS16_HI16	big_external_common\+0xffff8000
  3f0:	f400 35a0 	sll	a1,16
  3f4:	f000 9d80 	lw	a0,0\(a1\)
-			3f4: R_MIPS16_LO16	big_external_common-0x8000
+			3f4: R_MIPS16_LO16	big_external_common\+0xffff8000
  3f8:	f000 6d00 	li	a1,0
-			3f8: R_MIPS16_HI16	small_external_common-0x8000
+			3f8: R_MIPS16_HI16	small_external_common\+0xffff8000
  3fc:	f400 35a0 	sll	a1,16
  400:	f000 9d80 	lw	a0,0\(a1\)
-			400: R_MIPS16_LO16	small_external_common-0x8000
+			400: R_MIPS16_LO16	small_external_common\+0xffff8000
  404:	f000 6d00 	li	a1,0
-			404: R_MIPS16_HI16	\.bss-0x8000
+			404: R_MIPS16_HI16	\.bss\+0xffff8000
  408:	f400 35a0 	sll	a1,16
  40c:	f000 9d80 	lw	a0,0\(a1\)
-			40c: R_MIPS16_LO16	\.bss-0x8000
+			40c: R_MIPS16_LO16	\.bss\+0xffff8000
  410:	f000 6d00 	li	a1,0
-			410: R_MIPS16_HI16	\.sbss-0x8000
+			410: R_MIPS16_HI16	\.sbss\+0xffff8000
  414:	f400 35a0 	sll	a1,16
  418:	f000 9d80 	lw	a0,0\(a1\)
-			418: R_MIPS16_LO16	\.sbss-0x8000
+			418: R_MIPS16_LO16	\.sbss\+0xffff8000
  41c:	6d01      	li	a1,1
  41e:	f400 35a0 	sll	a1,16
  422:	9d80      	lw	a0,0\(a1\)
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/mips.exp binutils-stable/gas/testsuite/gas/mips/mips.exp
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/mips.exp	2007-06-18 19:29:29.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/mips/mips.exp	2007-09-25 15:41:20.000000000 +0200
@@ -488,8 +488,10 @@
     if !$aout { run_dump_test "sb" }
     run_dump_test "trunc"
     if !$aout { run_dump_test "ulh" }
-    run_dump_test_arches "ulh2-eb"	[mips_arch_list_matching mips1]
-    run_dump_test_arches "ulh2-el"	[mips_arch_list_matching mips1]
+    run_dump_test_arches "ulh2-eb" [mips_arch_list_matching mips1 !mips32r2]
+    run_dump_test_arches "ulh2-el" [mips_arch_list_matching mips1 !mips32r2]
+    run_dump_test_arches "ulh3-eb" [mips_arch_list_matching mips32r2]
+    run_dump_test_arches "ulh3-el" [mips_arch_list_matching mips32r2]
     if $elf { run_dump_test "ulh-svr4pic" }
     if $elf { run_dump_test "ulh-xgot" }
     if !$aout {
@@ -749,6 +751,15 @@
     run_list_test "noat-6" ""
     run_list_test "noat-7" ""
 
+    run_list_test "octeon1" "-march=octeon -mocteon-useun"
+    run_dump_test "octeon2-un"
+    run_dump_test "octeon2-noun"
+    run_dump_test "octeon2-mix"
+    run_dump_test "octeon3"
+
+    run_dump_test "loongson-2e"
+    run_dump_test "loongson-2f"
+
     run_dump_test_arches "smartmips"	[mips_arch_list_matching mips32 !gpr64]
     run_dump_test_arches "mips32-dsp"	[mips_arch_list_matching mips32r2]
     run_dump_test_arches "mips32-dspr2"	[mips_arch_list_matching mips32r2]
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon1.l binutils-stable/gas/testsuite/gas/mips/octeon1.l
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon1.l	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon1.l	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,9 @@
+.*: Assembler messages:
+.*:1: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `lwl'
+.*:2: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `lwr'
+.*:3: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `ldl'
+.*:4: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `ldr'
+.*:5: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `swl'
+.*:6: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `swr'
+.*:7: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `sdl'
+.*:8: Error: Unaligned load/store instructions are not allowed with -mocteon-useun `sdr'
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon1.s binutils-stable/gas/testsuite/gas/mips/octeon1.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon1.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon1.s	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,8 @@
+	lwl	$4,0($11)
+	lwr	$4,3($11)
+	ldl	$4,0($11)
+	ldr	$4,7($11)
+	swl	$4,0($11)
+	swr	$4,3($11)
+	sdl	$4,0($11)
+	sdr	$4,7($11)
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2-mix.d binutils-stable/gas/testsuite/gas/mips/octeon2-mix.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2-mix.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon2-mix.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,89 @@
+#source: octeon2.s
+#as: -march=octeon -mno-octeon-useun
+#objdump: -dr -Mocteon-useun
+
+.*:     file format .*
+
+Disassembly of section .*:
+
+00000000 <.*>:
+.*:	68a40000 	uld	a0,0\(a1\)
+.*:	6ca40007 	nop
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	68240000 	uld	a0,0\(at\)
+.*:	6c240007 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	68240000 	uld	a0,0\(at\)
+.*:	6c240007 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	68240000 	uld	a0,0\(at\)
+.*:	6c240007 	nop
+.*:	88a40000 	ulw	a0,0\(a1\)
+.*:	98a40003 	nop
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	88240000 	ulw	a0,0\(at\)
+.*:	98240003 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	88240000 	ulw	a0,0\(at\)
+.*:	98240003 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	88240000 	ulw	a0,0\(at\)
+.*:	98240003 	nop
+.*:	b0a40000 	usd	a0,0\(a1\)
+.*:	b4a40007 	nop
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	b0240000 	usd	a0,0\(at\)
+.*:	b4240007 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	b0240000 	usd	a0,0\(at\)
+.*:	b4240007 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	b0240000 	usd	a0,0\(at\)
+.*:	b4240007 	nop
+.*:	a8a40000 	usw	a0,0\(a1\)
+.*:	b8a40003 	nop
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	a8240000 	usw	a0,0\(at\)
+.*:	b8240003 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	a8240000 	usw	a0,0\(at\)
+.*:	b8240003 	nop
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	a8240000 	usw	a0,0\(at\)
+.*:	b8240003 	nop
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2-noun.d binutils-stable/gas/testsuite/gas/mips/octeon2-noun.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2-noun.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon2-noun.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,89 @@
+#source: octeon2.s
+#as: -march=octeon -mno-octeon-useun
+#objdump: -dr -Mno-octeon-useun
+
+.*:     file format .*
+
+Disassembly of section .*:
+
+00000000 <.*>:
+.*:	68a40000 	ldl	a0,0\(a1\)
+.*:	6ca40007 	ldr	a0,7\(a1\)
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	68240000 	ldl	a0,0\(at\)
+.*:	6c240007 	ldr	a0,7\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	68240000 	ldl	a0,0\(at\)
+.*:	6c240007 	ldr	a0,7\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	68240000 	ldl	a0,0\(at\)
+.*:	6c240007 	ldr	a0,7\(at\)
+.*:	88a40000 	lwl	a0,0\(a1\)
+.*:	98a40003 	lwr	a0,3\(a1\)
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	88240000 	lwl	a0,0\(at\)
+.*:	98240003 	lwr	a0,3\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	88240000 	lwl	a0,0\(at\)
+.*:	98240003 	lwr	a0,3\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	88240000 	lwl	a0,0\(at\)
+.*:	98240003 	lwr	a0,3\(at\)
+.*:	b0a40000 	sdl	a0,0\(a1\)
+.*:	b4a40007 	sdr	a0,7\(a1\)
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	b0240000 	sdl	a0,0\(at\)
+.*:	b4240007 	sdr	a0,7\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	b0240000 	sdl	a0,0\(at\)
+.*:	b4240007 	sdr	a0,7\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	b0240000 	sdl	a0,0\(at\)
+.*:	b4240007 	sdr	a0,7\(at\)
+.*:	a8a40000 	swl	a0,0\(a1\)
+.*:	b8a40003 	swr	a0,3\(a1\)
+.*:	3c011234 	lui	at,0x1234
+.*:	34215678 	ori	at,at,0x5678
+.*:	00250821 	addu	at,at,a1
+.*:	a8240000 	swl	a0,0\(at\)
+.*:	b8240003 	swr	a0,3\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	a8240000 	swl	a0,0\(at\)
+.*:	b8240003 	swr	a0,3\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	at,at,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	a8240000 	swl	a0,0\(at\)
+.*:	b8240003 	swr	a0,3\(at\)
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2.s binutils-stable/gas/testsuite/gas/mips/octeon2.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon2.s	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,16 @@
+	uld	$4,($5)
+	uld	$4,0x12345678($5)
+	uld	$4,symbol
+	uld	$4,symbol($5)
+	ulw	$4,($5)
+	ulw	$4,0x12345678($5)
+	ulw	$4,symbol
+	ulw	$4,symbol($5)
+	usd	$4,($5)
+	usd	$4,0x12345678($5)
+	usd	$4,symbol
+	usd	$4,symbol($5)
+	usw	$4,($5)
+	usw	$4,0x12345678($5)
+	usw	$4,symbol
+	usw	$4,symbol($5)
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2-un.d binutils-stable/gas/testsuite/gas/mips/octeon2-un.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon2-un.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon2-un.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,61 @@
+#source: octeon2.s
+#as: -march=octeon -mocteon-useun
+#objdump: -dr
+
+.*:     file format .*
+
+Disassembly of section .*:
+
+00000000 <.*>:
+.*:	68a40000 	uld	a0,0\(a1\)
+.*:	3c041234 	lui	a0,0x1234
+.*:	00852021 	addu	a0,a0,a1
+.*:	68845678 	uld	a0,22136\(a0\)
+.*:	3c040000 	lui	a0,0x0
+.*: R_MIPS_HI16	symbol
+.*:	68840000 	uld	a0,0\(a0\)
+.*: R_MIPS_LO16	symbol
+.*:	3c040000 	lui	a0,0x0
+.*: R_MIPS_HI16	symbol
+.*:	00852021 	addu	a0,a0,a1
+.*:	68840000 	uld	a0,0\(a0\)
+.*: R_MIPS_LO16	symbol
+.*:	88a40000 	ulw	a0,0\(a1\)
+.*:	3c041234 	lui	a0,0x1234
+.*:	00852021 	addu	a0,a0,a1
+.*:	88845678 	ulw	a0,22136\(a0\)
+.*:	3c040000 	lui	a0,0x0
+.*: R_MIPS_HI16	symbol
+.*:	88840000 	ulw	a0,0\(a0\)
+.*: R_MIPS_LO16	symbol
+.*:	3c040000 	lui	a0,0x0
+.*: R_MIPS_HI16	symbol
+.*:	00852021 	addu	a0,a0,a1
+.*:	88840000 	ulw	a0,0\(a0\)
+.*: R_MIPS_LO16	symbol
+.*:	b0a40000 	usd	a0,0\(a1\)
+.*:	3c011234 	lui	at,0x1234
+.*:	00250821 	addu	at,at,a1
+.*:	b0245678 	usd	a0,22136\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	b0240000 	usd	a0,0\(at\)
+.*: R_MIPS_LO16	symbol
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	b0240000 	usd	a0,0\(at\)
+.*: R_MIPS_LO16	symbol
+.*:	a8a40000 	usw	a0,0\(a1\)
+.*:	3c011234 	lui	at,0x1234
+.*:	00250821 	addu	at,at,a1
+.*:	a8245678 	usw	a0,22136\(at\)
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	a8240000 	usw	a0,0\(at\)
+.*: R_MIPS_LO16	symbol
+.*:	3c010000 	lui	at,0x0
+.*: R_MIPS_HI16	symbol
+.*:	00250821 	addu	at,at,a1
+.*:	a8240000 	usw	a0,0\(at\)
+.*: R_MIPS_LO16	symbol
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon3.d binutils-stable/gas/testsuite/gas/mips/octeon3.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon3.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon3.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,100 @@
+#as: -march=octeon
+#objdump: -dr -M gpr-names=numeric
+
+.*:     file format .*
+
+Disassembly of section \.text:
+
+00000000 <start>:
+.*:	70a62028 	baddu	\$4,\$5,\$6
+.*:	c880fffe 	bbit0	\$4,0x0,0 <start>
+.*:	00000000 	nop
+.*:	c894fffc 	bbit0	\$4,0x14,0 <start>
+.*:	00000000 	nop
+.*:	c89ffffa 	bbit0	\$4,0x1f,0 <start>
+.*:	00000000 	nop
+.*:	d880fff8 	bbit032	\$4,0x0,0 <start>
+.*:	00000000 	nop
+.*:	d892fff6 	bbit032	\$4,0x12,0 <start>
+.*:	00000000 	nop
+.*:	d89ffff4 	bbit032	\$4,0x1f,0 <start>
+.*:	00000000 	nop
+.*:	d880fff2 	bbit032	\$4,0x0,0 <start>
+.*:	00000000 	nop
+.*:	d894fff0 	bbit032	\$4,0x14,0 <start>
+.*:	00000000 	nop
+.*:	d89fffee 	bbit032	\$4,0x1f,0 <start>
+.*:	00000000 	nop
+.*:	e880ffec 	bbit1	\$4,0x0,0 <start>
+.*:	00000000 	nop
+.*:	e894ffea 	bbit1	\$4,0x14,0 <start>
+.*:	00000000 	nop
+.*:	e89fffe8 	bbit1	\$4,0x1f,0 <start>
+.*:	00000000 	nop
+.*:	f880ffe6 	bbit132	\$4,0x0,0 <start>
+.*:	00000000 	nop
+.*:	f892ffe4 	bbit132	\$4,0x12,0 <start>
+.*:	00000000 	nop
+.*:	f89fffe2 	bbit132	\$4,0x1f,0 <start>
+.*:	00000000 	nop
+.*:	f880ffe0 	bbit132	\$4,0x0,0 <start>
+.*:	00000000 	nop
+.*:	f894ffde 	bbit132	\$4,0x14,0 <start>
+.*:	00000000 	nop
+.*:	f89fffdc 	bbit132	\$4,0x1f,0 <start>
+.*:	00000000 	nop
+.*:	70a4f832 	cins	\$4,\$5,0x0,0x1f
+.*:	70a4f2b2 	cins	\$4,\$5,0xa,0x1e
+.*:	70a4eff2 	cins	\$4,\$5,0x1f,0x1d
+.*:	70a4a033 	cins32	\$4,\$5,0x0,0x14
+.*:	70a454b3 	cins32	\$4,\$5,0x12,0xa
+.*:	70a407f3 	cins32	\$4,\$5,0x1f,0x0
+.*:	70a45033 	cins32	\$4,\$5,0x0,0xa
+.*:	70a45533 	cins32	\$4,\$5,0x14,0xa
+.*:	70a457f3 	cins32	\$4,\$5,0x1f,0xa
+.*:	70a62003 	dmul	\$4,\$5,\$6
+.*:	70a0202d 	dpop	\$4,\$5
+.*:	70a4f83a 	exts	\$4,\$5,0x0,0x1f
+.*:	70a4f2ba 	exts	\$4,\$5,0xa,0x1e
+.*:	70a4effa 	exts	\$4,\$5,0x1f,0x1d
+.*:	70a4a03b 	exts32	\$4,\$5,0x0,0x14
+.*:	70a454bb 	exts32	\$4,\$5,0x12,0xa
+.*:	70a407fb 	exts32	\$4,\$5,0x1f,0x0
+.*:	70a4503b 	exts32	\$4,\$5,0x0,0xa
+.*:	70a4553b 	exts32	\$4,\$5,0x14,0xa
+.*:	70a457fb 	exts32	\$4,\$5,0x1f,0xa
+.*:	70800008 	mtm0	\$4
+.*:	7080000c 	mtm1	\$4
+.*:	7080000d 	mtm2	\$4
+.*:	70800009 	mtp0	\$4
+.*:	7080000a 	mtp1	\$4
+.*:	7080000b 	mtp2	\$4
+.*:	70a0202c 	pop	\$4,\$5
+.*:	70a6202a 	seq	\$4,\$5,\$6
+.*:	70a4802e 	seqi	\$4,\$5,-512
+.*:	70a4ffee 	seqi	\$4,\$5,-1
+.*:	70a4002e 	seqi	\$4,\$5,0
+.*:	70a4006e 	seqi	\$4,\$5,1
+.*:	70a47fee 	seqi	\$4,\$5,511
+.*:	70a6202b 	sne	\$4,\$5,\$6
+.*:	70a4802f 	snei	\$4,\$5,-512
+.*:	70a4ffef 	snei	\$4,\$5,-1
+.*:	70a4002f 	snei	\$4,\$5,0
+.*:	70a4006f 	snei	\$4,\$5,1
+.*:	70a47fef 	snei	\$4,\$5,511
+.*:	0000004f 	syncio
+.*:	0000008f 	synciobdma
+.*:	000000cf 	syncioall
+.*:	0000018f 	syncs
+.*:	0000010f 	syncw
+.*:	0000014f 	syncws
+.*:	70a62011 	v3mulu	\$4,\$5,\$6
+.*:	70a62010 	vmm0	\$4,\$5,\$6
+.*:	70a6200f 	vmulu	\$4,\$5,\$6
+.*:	48240000 	dmfc2	\$4,0x0
+.*:	482403e8 	dmfc2	\$4,0x3e8
+.*:	4824ffff 	dmfc2	\$4,0xffff
+.*:	48a40000 	dmtc2	\$4,0x0
+.*:	48a403e8 	dmtc2	\$4,0x3e8
+.*:	48a4ffff 	dmtc2	\$4,0xffff
+.*:	00000000 	nop
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon3.s binutils-stable/gas/testsuite/gas/mips/octeon3.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/octeon3.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/octeon3.s	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,74 @@
+start:
+	baddu	$4,$5,$6
+	bbit0	$4,0,start
+	bbit0	$4,20,start
+	bbit0	$4,31,start
+	bbit0	$4,32,start
+	bbit0	$4,50,start
+	bbit0	$4,63,start
+	bbit032	$4,0,start
+	bbit032	$4,20,start
+	bbit032	$4,31,start
+	bbit1	$4,0,start
+	bbit1	$4,20,start
+	bbit1	$4,31,start
+	bbit1	$4,32,start
+	bbit1	$4,50,start
+	bbit1	$4,63,start
+	bbit132	$4,0,start
+	bbit132	$4,20,start
+	bbit132	$4,31,start
+	cins	$4,$5,0,31
+	cins	$4,$5,10,30
+	cins	$4,$5,31,29
+	cins	$4,$5,32,20
+	cins	$4,$5,50,10
+	cins	$4,$5,63,0
+	cins32	$4,$5,0,10
+	cins32	$4,$5,20,10
+	cins32	$4,$5,31,10
+	dmul	$4,$5,$6
+	dpop	$4,$5
+	exts	$4,$5,0,31
+	exts	$4,$5,10,30
+	exts	$4,$5,31,29
+	exts	$4,$5,32,20
+	exts	$4,$5,50,10
+	exts	$4,$5,63,0
+	exts32	$4,$5,0,10
+	exts32	$4,$5,20,10
+	exts32	$4,$5,31,10
+	mtm0	$4
+	mtm1	$4
+	mtm2	$4
+	mtp0	$4
+	mtp1	$4
+	mtp2	$4
+	pop	$4,$5
+	seq	$4,$5,$6
+	seqi	$4,$5,-512
+	seqi	$4,$5,-1
+	seqi	$4,$5,0
+	seqi	$4,$5,1
+	seqi	$4,$5,511
+	sne	$4,$5,$6
+	snei	$4,$5,-512
+	snei	$4,$5,-1
+	snei	$4,$5,0
+	snei	$4,$5,1
+	snei	$4,$5,511
+	syncio
+	synciobdma
+	syncioall
+	syncs
+	syncw
+	syncws
+	v3mulu	$4,$5,$6
+	vmm0	$4,$5,$6
+	vmulu	$4,$5,$6
+	dmfc2	$4,0
+	dmfc2	$4,1000
+	dmfc2	$4,65535
+	dmtc2	$4,0
+	dmtc2	$4,1000
+	dmtc2	$4,65535
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/ulh3-eb.d binutils-stable/gas/testsuite/gas/mips/ulh3-eb.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/ulh3-eb.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/ulh3-eb.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,58 @@
+#as: -EB -32
+#objdump: -dr -M reg-names=numeric
+#name: ulh3 -EB
+#source: ulh3.s
+
+.*: +file format .*mips.*
+
+Disassembly of section .text:
+
+.*:
+.*:	80a10000 	lb	\$1,0\(\$5\)
+.*:	90a40001 	lbu	\$4,1\(\$5\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c011234 	lui	\$1,0x1234
+.*:	34215678 	ori	\$1,\$1,0x5678
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240001 	lbu	\$4,1\(\$1\)
+.*:	80210000 	lb	\$1,0\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	90240001 	lbu	\$4,1\(\$1\)
+.*:	80210000 	lb	\$1,0\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240001 	lbu	\$4,1\(\$1\)
+.*:	80210000 	lb	\$1,0\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	90a10000 	lbu	\$1,0\(\$5\)
+.*:	90a40001 	lbu	\$4,1\(\$5\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c011234 	lui	\$1,0x1234
+.*:	34215678 	ori	\$1,\$1,0x5678
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240001 	lbu	\$4,1\(\$1\)
+.*:	90210000 	lbu	\$1,0\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	90240001 	lbu	\$4,1\(\$1\)
+.*:	90210000 	lbu	\$1,0\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240001 	lbu	\$4,1\(\$1\)
+.*:	90210000 	lbu	\$1,0\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/ulh3-el.d binutils-stable/gas/testsuite/gas/mips/ulh3-el.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/ulh3-el.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/ulh3-el.d	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,58 @@
+#as: -EL -32
+#objdump: -dr -M reg-names=numeric
+#name: ulh3 -EL
+#source: ulh3.s
+
+.*: +file format .*mips.*
+
+Disassembly of section .text:
+
+.*:
+.*:	80a10001 	lb	\$1,1\(\$5\)
+.*:	90a40000 	lbu	\$4,0\(\$5\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c011234 	lui	\$1,0x1234
+.*:	34215678 	ori	\$1,\$1,0x5678
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240000 	lbu	\$4,0\(\$1\)
+.*:	80210001 	lb	\$1,1\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	90240000 	lbu	\$4,0\(\$1\)
+.*:	80210001 	lb	\$1,1\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240000 	lbu	\$4,0\(\$1\)
+.*:	80210001 	lb	\$1,1\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	90a10001 	lbu	\$1,1\(\$5\)
+.*:	90a40000 	lbu	\$4,0\(\$5\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c011234 	lui	\$1,0x1234
+.*:	34215678 	ori	\$1,\$1,0x5678
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240000 	lbu	\$4,0\(\$1\)
+.*:	90210001 	lbu	\$1,1\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	90240000 	lbu	\$4,0\(\$1\)
+.*:	90210001 	lbu	\$1,1\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
+.*:	3c010000 	lui	\$1,0x0
+.*: R_MIPS_HI16	symbol
+.*:	24210000 	addiu	\$1,\$1,0
+.*: R_MIPS_LO16	symbol
+.*:	00250821 	addu	\$1,\$1,\$5
+.*:	90240000 	lbu	\$4,0\(\$1\)
+.*:	90210001 	lbu	\$1,1\(\$1\)
+.*:	7c24fa04 	ins	\$4,\$1,0x8,0x18
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/mips/ulh3.s binutils-stable/gas/testsuite/gas/mips/ulh3.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/mips/ulh3.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/gas/testsuite/gas/mips/ulh3.s	2007-09-25 15:41:20.000000000 +0200
@@ -0,0 +1,8 @@
+	ulh	$4,($5)
+	ulh	$4,0x12345678($5)
+	ulh	$4,symbol
+	ulh	$4,symbol($5)
+	ulhu	$4,($5)
+	ulhu	$4,0x12345678($5)
+	ulhu	$4,symbol
+	ulhu	$4,symbol($5)
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest2_64.d binutils-stable/gas/testsuite/gas/ppc/astest2_64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest2_64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/astest2_64.d	2007-09-25 15:41:16.000000000 +0200
@@ -45,11 +45,11 @@
   58:	00 00 00 00 	\.long 0x0
 			58: R_PPC64_ADDR32	z
   5c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			5c: R_PPC64_ADDR32	x-0x4
+			5c: R_PPC64_ADDR32	x\+0xfffffffffffffffc
   60:	00 00 00 00 	\.long 0x0
 			60: R_PPC64_ADDR32	\.data
   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			64: R_PPC64_ADDR32	z-0x4
+			64: R_PPC64_ADDR32	z\+0xfffffffffffffffc
   68:	00 00 00 08 	\.long 0x8
   6c:	00 00 00 08 	\.long 0x8
 
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest2.d binutils-stable/gas/testsuite/gas/ppc/astest2.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest2.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/astest2.d	2007-09-25 15:41:16.000000000 +0200
@@ -48,11 +48,11 @@
   60:	00 00 00 00 	\.long 0x0
 			60: R_PPC_ADDR32	z
   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			64: R_PPC_ADDR32	x-0x4
+			64: R_PPC_ADDR32	x\+0xf+ffffffc
   68:	00 00 00 00 	\.long 0x0
 			68: R_PPC_ADDR32	\.data
   6c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			6c: R_PPC_ADDR32	z-0x4
+			6c: R_PPC_ADDR32	z\+0xf+ffffffc
   70:	00 00 00 08 	\.long 0x8
   74:	00 00 00 08 	\.long 0x8
 
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest64.d binutils-stable/gas/testsuite/gas/ppc/astest64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/astest64.d	2007-09-25 15:41:16.000000000 +0200
@@ -49,11 +49,11 @@
   58:	00 00 00 00 	\.long 0x0
 			58: R_PPC64_ADDR32	z
   5c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			5c: R_PPC64_ADDR32	x-0x4
+			5c: R_PPC64_ADDR32	x\+0xfffffffffffffffc
   60:	00 00 00 00 	\.long 0x0
 			60: R_PPC64_ADDR32	\.data
   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			64: R_PPC64_ADDR32	z-0x4
+			64: R_PPC64_ADDR32	z\+0xfffffffffffffffc
   68:	ff ff ff a4 	\.long 0xffffffa4
   6c:	ff ff ff a4 	\.long 0xffffffa4
   70:	00 00 00 00 	\.long 0x0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest.d binutils-stable/gas/testsuite/gas/ppc/astest.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/astest.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/astest.d	2007-09-25 15:41:16.000000000 +0200
@@ -52,11 +52,11 @@
   60:	00 00 00 00 	\.long 0x0
 			60: R_PPC_ADDR32	z
   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			64: R_PPC_ADDR32	x-0x4
+			64: R_PPC_ADDR32	x\+0xf+ffffffc
   68:	00 00 00 00 	\.long 0x0
 			68: R_PPC_ADDR32	\.data
   6c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			6c: R_PPC_ADDR32	z-0x4
+			6c: R_PPC_ADDR32	z\+0xf+ffffffc
   70:	ff ff ff 9c 	\.long 0xffffff9c
   74:	ff ff ff 9c 	\.long 0xffffff9c
   78:	00 00 00 00 	\.long 0x0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/ppc750ps.d binutils-stable/gas/testsuite/gas/ppc/ppc750ps.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/ppc750ps.d	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/ppc750ps.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,72 +0,0 @@
-#as: -m750cl
-#objdump: -dr -Mppcps
-#name: PPC750CL paired single tests
-
-.*: +file format elf(32)?(64)?-powerpc.*
-
-Disassembly of section \.text:
-
-0+0000000 <start>:
-   0:	e0 03 d0 04 	psq_l   f0,4\(r3\),1,5
-   4:	e4 22 30 08 	psq_lu  f1,8\(r2\),0,3
-   8:	10 45 25 4c 	psq_lux f2,r5,r4,1,2
-   c:	10 62 22 8c 	psq_lx  f3,r2,r4,0,5
-  10:	f0 62 30 08 	psq_st  f3,8\(r2\),0,3
-  14:	f4 62 70 08 	psq_stu f3,8\(r2\),0,7
-  18:	10 43 22 ce 	psq_stux f2,r3,r4,0,5
-  1c:	10 c7 46 0e 	psq_stx f6,r7,r8,1,4
-  20:	10 a0 3a 10 	ps_abs  f5,f7
-  24:	10 a0 3a 11 	ps_abs. f5,f7
-  28:	10 22 18 2a 	ps_add  f1,f2,f3
-  2c:	10 22 18 2b 	ps_add. f1,f2,f3
-  30:	11 82 20 40 	ps_cmpo0 cr3,f2,f4
-  34:	11 82 20 c0 	ps_cmpo1 cr3,f2,f4
-  38:	11 82 20 00 	ps_cmpu0 cr3,f2,f4
-  3c:	11 82 20 80 	ps_cmpu1 cr3,f2,f4
-  40:	10 44 30 24 	ps_div  f2,f4,f6
-  44:	10 44 30 25 	ps_div. f2,f4,f6
-  48:	10 01 18 ba 	ps_madd f0,f1,f2,f3
-  4c:	10 01 18 bb 	ps_madd. f0,f1,f2,f3
-  50:	10 22 20 dc 	ps_madds0 f1,f2,f3,f4
-  54:	10 22 20 dd 	ps_madds0. f1,f2,f3,f4
-  58:	10 22 20 de 	ps_madds1 f1,f2,f3,f4
-  5c:	10 22 20 df 	ps_madds1. f1,f2,f3,f4
-  60:	10 44 34 20 	ps_merge00 f2,f4,f6
-  64:	10 44 34 21 	ps_merge00. f2,f4,f6
-  68:	10 44 34 60 	ps_merge01 f2,f4,f6
-  6c:	10 44 34 61 	ps_merge01. f2,f4,f6
-  70:	10 44 34 a0 	ps_merge10 f2,f4,f6
-  74:	10 44 34 a1 	ps_merge10. f2,f4,f6
-  78:	10 44 34 e0 	ps_merge11 f2,f4,f6
-  7c:	10 44 34 e1 	ps_merge11. f2,f4,f6
-  80:	10 60 28 90 	ps_mr   f3,f5
-  84:	10 60 28 91 	ps_mr.  f3,f5
-  88:	10 44 41 b8 	ps_msub f2,f4,f6,f8
-  8c:	10 44 41 b9 	ps_msub. f2,f4,f6,f8
-  90:	10 43 01 72 	ps_mul  f2,f3,f5
-  94:	10 43 01 73 	ps_mul. f2,f3,f5
-  98:	10 64 01 d8 	ps_muls0 f3,f4,f7
-  9c:	10 64 01 d9 	ps_muls0. f3,f4,f7
-  a0:	10 64 01 da 	ps_muls1 f3,f4,f7
-  a4:	10 64 01 db 	ps_muls1. f3,f4,f7
-  a8:	10 20 29 10 	ps_nabs f1,f5
-  ac:	10 20 29 11 	ps_nabs. f1,f5
-  b0:	10 20 28 50 	ps_neg  f1,f5
-  b4:	10 20 28 51 	ps_neg. f1,f5
-  b8:	10 23 39 7e 	ps_nmadd f1,f3,f5,f7
-  bc:	10 23 39 7f 	ps_nmadd. f1,f3,f5,f7
-  c0:	10 23 39 7c 	ps_nmsub f1,f3,f5,f7
-  c4:	10 23 39 7d 	ps_nmsub. f1,f3,f5,f7
-  c8:	11 20 18 30 	ps_res  f9,f3
-  cc:	11 20 18 31 	ps_res. f9,f3
-  d0:	11 20 18 34 	ps_rsqrte f9,f3
-  d4:	11 20 18 35 	ps_rsqrte. f9,f3
-  d8:	10 22 20 ee 	ps_sel  f1,f2,f3,f4
-  dc:	10 22 20 ef 	ps_sel. f1,f2,f3,f4
-  e0:	10 ab 10 28 	ps_sub  f5,f11,f2
-  e4:	10 ab 10 29 	ps_sub. f5,f11,f2
-  e8:	10 45 52 54 	ps_sum0 f2,f5,f9,f10
-  ec:	10 45 52 55 	ps_sum0. f2,f5,f9,f10
-  f0:	10 45 52 56 	ps_sum1 f2,f5,f9,f10
-  f4:	10 45 52 57 	ps_sum1. f2,f5,f9,f10
-  f8:	10 03 2f ec 	dcbz_l  r3,r5
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/ppc750ps.s binutils-stable/gas/testsuite/gas/ppc/ppc750ps.s
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/ppc750ps.s	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/ppc750ps.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,66 +0,0 @@
-# PowerPC 750 paired single precision tests
-	.section ".text"
-start:
-	psq_l	0, 4(3), 1, 5
-	psq_lu	1, 8(2), 0, 3
-	psq_lux	2, 5, 4, 1, 2
-	psq_lx	3, 2, 4, 0, 5
-	psq_st	3, 8(2), 0, 3
-	psq_stu	3, 8(2), 0, 7
-	psq_stux 2, 3, 4, 0, 5
-	psq_stx	6, 7, 8, 1, 4
-	ps_abs	5,7
-	ps_abs.	5,7
-	ps_add	1,2,3
-	ps_add. 1,2,3
-	ps_cmpo0 3,2,4
-	ps_cmpo1 3,2,4
-	ps_cmpu0 3,2,4
-	ps_cmpu1 3,2,4
-	ps_div 2,4,6
-	ps_div. 2,4,6
-	ps_madd 0,1,2,3
-	ps_madd. 0,1,2,3
-	ps_madds0 1,2,3,4
-	ps_madds0. 1,2,3,4
-	ps_madds1 1,2,3,4
-	ps_madds1. 1,2,3,4
-	ps_merge00 2,4,6
-	ps_merge00. 2,4,6
-	ps_merge01 2,4,6
-	ps_merge01. 2,4,6
-	ps_merge10 2,4,6
-	ps_merge10. 2,4,6
-	ps_merge11 2,4,6
-	ps_merge11. 2,4,6
-	ps_mr 3,5
-	ps_mr. 3,5
-	ps_msub 2,4,6,8
-	ps_msub. 2,4,6,8
-	ps_mul 2,3,5
-	ps_mul. 2,3,5
-	ps_muls0 3,4,7
-	ps_muls0. 3,4,7
-	ps_muls1 3,4,7
-	ps_muls1. 3,4,7
-	ps_nabs	1,5
-	ps_nabs. 1,5
-	ps_neg 1,5
-	ps_neg. 1,5
-	ps_nmadd 1,3,5,7
-	ps_nmadd. 1,3,5,7
-	ps_nmsub 1,3,5,7
-	ps_nmsub. 1,3,5,7
-	ps_res 9,3
-	ps_res. 9,3
-	ps_rsqrte 9,3
-	ps_rsqrte. 9,3
-	ps_sel 1,2,3,4
-	ps_sel. 1,2,3,4
-	ps_sub 5,11,2
-	ps_sub. 5,11,2
-	ps_sum0 2,5,9,10
-	ps_sum0. 2,5,9,10
-	ps_sum1 2,5,9,10
-	ps_sum1. 2,5,9,10
-	dcbz_l 3,5
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/ppc.exp binutils-stable/gas/testsuite/gas/ppc/ppc.exp
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/ppc.exp	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/ppc.exp	2007-09-25 15:41:16.000000000 +0200
@@ -41,6 +41,5 @@
 	run_dump_test "booke"
 	run_dump_test "e500"
 	run_list_test "range" "-a32"
-	run_dump_test "ppc750ps"
     }
 }
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/test1elf32.d binutils-stable/gas/testsuite/gas/ppc/test1elf32.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/test1elf32.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/test1elf32.d	2007-09-25 15:41:16.000000000 +0200
@@ -79,7 +79,7 @@
 
 0+000c <dat0>:
    c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			c: R_PPC_REL32	jk-0x4
+			c: R_PPC_REL32	jk\+0xf+fffc
 
 0+0010 <dat1>:
   10:	00 00 00 00 	\.long 0x0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/ppc/test1elf64.d binutils-stable/gas/testsuite/gas/ppc/test1elf64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/ppc/test1elf64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/ppc/test1elf64.d	2007-09-25 15:41:16.000000000 +0200
@@ -114,7 +114,7 @@
 
 0000000000000014 <dat0>:
   14:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
-			14: R_PPC64_REL32	jk-0x4
+			14: R_PPC64_REL32	jk\+0xfffffffffffffffc
 
 0000000000000018 <dat1>:
   18:	00 00 00 00 	\.long 0x0
diff -Nur binutils-2.18.50.0.1/gas/testsuite/gas/sparc/reloc64.d binutils-stable/gas/testsuite/gas/sparc/reloc64.d
--- binutils-2.18.50.0.1/gas/testsuite/gas/sparc/reloc64.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/gas/testsuite/gas/sparc/reloc64.d	2007-09-25 15:41:21.000000000 +0200
@@ -35,13 +35,13 @@
 			44: R_SPARC_LO10	.text
   48:	01 00 00 00 	nop 
   4c:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
-			4c: R_SPARC_HH22	.text\-0x123456789abcdf0
+			4c: R_SPARC_HH22	.text\+0xfedcba9876543210
   50:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
-			50: R_SPARC_HM10	.text\-0x123456789abcdf0
+			50: R_SPARC_HM10	.text\+0xfedcba9876543210
   54:	05 00 00 00 	sethi  %hi\((0x|)0\), %g2
-			54: R_SPARC_LM22	.text\-0x123456789abcdf0
+			54: R_SPARC_LM22	.text\+0xfedcba9876543210
   58:	84 10 60 00 	mov  %g1, %g2
-			58: R_SPARC_LO10	.text\-0x123456789abcdf0
+			58: R_SPARC_LO10	.text\+0xfedcba9876543210
   5c:	01 00 00 00 	nop 
   60:	03 2a 61 d9 	sethi  %hi\(0xa9876400\), %g1
   64:	82 10 61 43 	or  %g1, 0x143, %g1.*
@@ -70,7 +70,7 @@
 			a0: R_SPARC_LOX10	.text
   a4:	01 00 00 00 	nop 
   a8:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
-			a8: R_SPARC_HIX22	.text-0x89abcdf0
+			a8: R_SPARC_HIX22	.text\+0xffffffff76543210
   ac:	82 18 60 00 	xor  %g1, 0, %g1
-			ac: R_SPARC_LOX10	.text-0x89abcdf0
+			ac: R_SPARC_LOX10	.text\+0xffffffff76543210
   b0:	01 00 00 00 	nop 
diff -Nur binutils-2.18.50.0.1/gprof/ChangeLog binutils-stable/gprof/ChangeLog
--- binutils-2.18.50.0.1/gprof/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/ChangeLog	2007-09-25 15:42:07.000000000 +0200
@@ -1,11 +1,3 @@
-2007-08-30  Nick Clifton  <nickc@redhat.com>
-
-	* po/fi.po: Updated Finnish translation.
-
-2007-08-24  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* po/sv.po: Updated Swedish translation.
-
 2007-08-17  Alan Modra  <amodra@bigpond.net.au>
 
 	* po/Make-in: Add --msgid-bugs-address to xgettext invocation.
diff -Nur binutils-2.18.50.0.1/gprof/configure binutils-stable/gprof/configure
--- binutils-2.18.50.0.1/gprof/configure	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/configure	2007-09-25 15:42:07.000000000 +0200
@@ -458,7 +458,7 @@
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE WARN_CFLAGS NO_WERROR datarootdir docdir htmldir LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE WARN_CFLAGS NO_WERROR datarootdir docdir htmldir pdfdir  LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -11131,6 +11131,7 @@
 
 
 
+
                     ac_config_files="$ac_config_files Makefile po/Makefile.in:po/Make-in"
 
 cat >confcache <<\_ACEOF
@@ -12126,6 +12127,7 @@
 s,@datarootdir@,$datarootdir,;t t
 s,@docdir@,$docdir,;t t
 s,@htmldir@,$htmldir,;t t
+s,@pdfdir@,$pdfdir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 CEOF
diff -Nur binutils-2.18.50.0.1/gprof/configure.in binutils-stable/gprof/configure.in
--- binutils-2.18.50.0.1/gprof/configure.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/configure.in	2007-09-25 15:42:07.000000000 +0200
@@ -46,10 +46,11 @@
 
 AM_BINUTILS_WARNINGS
 
-dnl Required by html and install-html
+dnl Required by html, pdf, install-pdf and install-html
 AC_SUBST(datarootdir)
 AC_SUBST(docdir)
 AC_SUBST(htmldir)
+AC_SUBST(pdfdir)
 
 AC_CONFIG_FILES([Makefile po/Makefile.in:po/Make-in])
 AC_OUTPUT
diff -Nur binutils-2.18.50.0.1/gprof/Makefile.am binutils-stable/gprof/Makefile.am
--- binutils-2.18.50.0.1/gprof/Makefile.am	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/Makefile.am	2007-09-25 15:42:07.000000000 +0200
@@ -83,6 +83,47 @@
 	       (rm -f $@.T$$$$ && exit 1)
 	rm -f gprof.pod
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
+
+install-pdf: install-pdf-recursive install-pdf-am
+ 
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
diff -Nur binutils-2.18.50.0.1/gprof/Makefile.in binutils-stable/gprof/Makefile.in
--- binutils-2.18.50.0.1/gprof/Makefile.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/Makefile.in	2007-09-25 15:42:07.000000000 +0200
@@ -227,6 +227,7 @@
 mandir = @mandir@
 mkdir_p = @mkdir_p@
 oldincludedir = @oldincludedir@
+pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 sbindir = @sbindir@
@@ -274,6 +275,7 @@
 man_MANS = gprof.1
 AM_MAKEINFOFLAGS = -I "$(srcdir)" -I "$(top_srcdir)/../bfd/doc" -I ../bfd/doc
 TEXI2DVI = texi2dvi -I "$(srcdir)" -I "$(top_srcdir)/../bfd/doc" -I ../bfd/doc
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 CLEANFILES = dep.sed DEP DEPA DEP1 DEP2
 MAINTAINERCLEANFILES = gprof.info
@@ -841,6 +843,45 @@
 	       (rm -f $@.T$$$$ && exit 1)
 	rm -f gprof.pod
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf: install-pdf-recursive install-pdf-am
+
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html: install-html-recursive  install-html-am
diff -Nur binutils-2.18.50.0.1/gprof/po/fi.po binutils-stable/gprof/po/fi.po
--- binutils-2.18.50.0.1/gprof/po/fi.po	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/po/fi.po	2007-09-25 15:42:07.000000000 +0200
@@ -8,7 +8,7 @@
 "Project-Id-Version: gprof 2.17.90\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2007-05-15 16:49+0930\n"
-"PO-Revision-Date: 2007-08-29 20:12+0300\n"
+"PO-Revision-Date: 2007-08-10 16:17+0300\n"
 "Last-Translator: Jorma Karvonen <karvjorm@users.sf.net>\n"
 "Language-Team: Finnish <translation-team-fi@lists.sourceforge.net>\n"
 "MIME-Version: 1.0\n"
@@ -23,17 +23,17 @@
 #: alpha.c:107 mips.c:59
 #, c-format
 msgid "[find_call] %s: 0x%lx to 0x%lx\n"
-msgstr "[etsi_kutsu] %s: 0x%lx arvoon 0x%lx\n"
+msgstr "[find_call] %s: 0x%lx to 0x%lx\n"
 
 #: alpha.c:129
 #, c-format
 msgid "[find_call] 0x%lx: jsr%s <indirect_child>\n"
-msgstr "[etsi_kutsu] 0x%lx: jsr%s-ksky <epsuora_lapsi>\n"
+msgstr "[find_call] 0x%lx: jsr%s <indirect_child>\n"
 
 #: alpha.c:139
 #, c-format
 msgid "[find_call] 0x%lx: bsr"
-msgstr "[etsi_kutsu] 0x%lx: bsr-ksky"
+msgstr "[find_call] 0x%lx: bsr"
 
 #  ensimminen %s whoami, toinen %s filename
 #: basic_blocks.c:128 call_graph.c:89 hist.c:105
@@ -51,7 +51,7 @@
 #: basic_blocks.c:289 basic_blocks.c:299
 #, c-format
 msgid "%s:%d: (%s:0x%lx) %lu executions\n"
-msgstr "%s:%d: (%s:0x%lx) %lu suoritusta\n"
+msgstr "%s:%d: (%s:0x%lx) %lu suorituksia\n"
 
 #: basic_blocks.c:290 basic_blocks.c:300
 msgid "<unknown>"
@@ -125,7 +125,7 @@
 "\t\t     Call graph (explanation follows)\n"
 "\n"
 msgstr ""
-"\t\t     Kutsugraafi (selitys seuraa)\n"
+"\t\t     Kutsugrafiikka (selitys seuraa)\n"
 "\n"
 
 #: cg_print.c:75
@@ -134,7 +134,7 @@
 "\t\t\tCall graph\n"
 "\n"
 msgstr ""
-"\t\t\tKutsugraafi\n"
+"\t\t\tKutsugrafiikka\n"
 "\n"
 
 #: cg_print.c:78 hist.c:466
@@ -256,7 +256,7 @@
 #: corefile.c:177
 #, c-format
 msgid "%s: can't find .text section in %s\n"
-msgstr "%s: ei lydy .text-lohkoa kohteesta %s\n"
+msgstr "%s: ei lydy \".text\"-lohkoa kohteesta %s\n"
 
 #: corefile.c:252
 #, c-format
@@ -276,7 +276,7 @@
 #: corefile.c:470
 #, c-format
 msgid "%s: file `%s' has no symbols\n"
-msgstr "%s: tiedostossa %s ei ole symboleja\n"
+msgstr "%s: tiedostossa \"%s\" ei ole symboleja\n"
 
 #: corefile.c:772
 #, c-format
@@ -296,12 +296,12 @@
 #: gmon_io.c:330 gmon_io.c:459
 #, c-format
 msgid "%s: file `%s' has bad magic cookie\n"
-msgstr "%s: tiedostossa %s on virheellinen maaginen pipari\n"
+msgstr "%s: tiedostossa \"%s\" on virheellinen maaginen pipari\n"
 
 #: gmon_io.c:341
 #, c-format
 msgid "%s: file `%s' has unsupported version %d\n"
-msgstr "%s: tiedostossa %s on tukematon versio %d\n"
+msgstr "%s: tiedostossa \"%s\" on tukematon versio %d\n"
 
 #: gmon_io.c:371
 #, c-format
@@ -321,12 +321,12 @@
 #: gmon_io.c:516
 #, c-format
 msgid "%s: file '%s' does not appear to be in gmon.out format\n"
-msgstr "%s: tiedosto %s ei vaikuta olevan gmon.out-muotoinen\n"
+msgstr "%s: tiedosto \"%s\" ei vaikuta olevan \"gmon.out\"-muotoinen\n"
 
 #: gmon_io.c:529
 #, c-format
 msgid "%s: unexpected EOF after reading %d/%d bins\n"
-msgstr "%s: odottamaton tiedoston loppumerkki %d/%d bins-lukemisen jlkeen\n"
+msgstr "%s: odottamaton tiedoston loppumerkki \"%d/%d bins\"-lukemisen jlkeen\n"
 
 #: gmon_io.c:563
 #, c-format
@@ -341,7 +341,7 @@
 #: gmon_io.c:576
 #, c-format
 msgid "File `%s' (version %d) contains:\n"
-msgstr "Tiedosto %s (versio %d) sislt:\n"
+msgstr "Tiedosto \"%s\" (versio %d) sislt:\n"
 
 #: gmon_io.c:579
 #, c-format
@@ -356,12 +356,12 @@
 #: gmon_io.c:582
 #, c-format
 msgid "\t%d call-graph record\n"
-msgstr "\t%d kutsugraafitietue\n"
+msgstr "\t%d kutsugrafiikkatietue\n"
 
 #: gmon_io.c:583
 #, c-format
 msgid "\t%d call-graph records\n"
-msgstr "\t%d kutsugraafitietueet\n"
+msgstr "\t%d kutsugrafiikkatietueet\n"
 
 #: gmon_io.c:585
 #, c-format
@@ -407,12 +407,12 @@
 #: gprof.c:174
 #, c-format
 msgid "Report bugs to %s\n"
-msgstr "Lhet raportit ohjelmistovioista (englanniksi) osoitteeseen %s\n"
+msgstr "Raportoi virheest osoitteeseen %s\n"
 
 #: gprof.c:250
 #, c-format
 msgid "%s: debugging not supported; -d ignored\n"
-msgstr "%s: debuggausta ei tueta; -d:t ei oteta huomioon\n"
+msgstr "%s: debuggausta ei tueta; -d ei oteta huomioon\n"
 
 #: gprof.c:330
 #, c-format
@@ -428,7 +428,7 @@
 #: gprof.c:415
 #, c-format
 msgid "Based on BSD gprof, copyright 1983 Regents of the University of California.\n"
-msgstr "Perustuu BSD:n gprofiin, copyright 1983 Regents of the University of California.\n"
+msgstr "Perustuu BSD gprof, copyright 1983 Regents of the University of California.\n"
 
 #: gprof.c:416
 #, c-format
@@ -438,27 +438,27 @@
 #: gprof.c:457
 #, c-format
 msgid "%s: unknown demangling style `%s'\n"
-msgstr "%s: tuntematon eheytystyyli %s\n"
+msgstr "%s: tuntematon eheytystyyli \"%s\"\n"
 
 #: gprof.c:477
 #, c-format
 msgid "%s: Only one of --function-ordering and --file-ordering may be specified.\n"
-msgstr "%s: Vain joko --function-ordering tai --file-ordering saadaan mritell.\n"
+msgstr "%s: Vain joko \"--function-ordering\" tai \"--file-ordering\" saadaan mritell.\n"
 
 #: gprof.c:527
 #, c-format
 msgid "%s: sorry, file format `prof' is not yet supported\n"
-msgstr "%s: valitettavasti tiedostomuotoa prof ei viel tueta\n"
+msgstr "%s: valitettavasti tiedostomuotoa \"prof\" ei viel tueta\n"
 
 #: gprof.c:581
 #, c-format
 msgid "%s: gmon.out file is missing histogram\n"
-msgstr "%s: gmon.out-tiedosto puuttuu histogrammista\n"
+msgstr "%s: \"gmon.out\"-tiedosto puuttuu histogrammista\n"
 
 #: gprof.c:588
 #, c-format
 msgid "%s: gmon.out file is missing call-graph data\n"
-msgstr "%s: gmon.out-tiedosto puuttuu kutsugraafidatasta\n"
+msgstr "%s: \"gmon.out\"-tiedosto puuttuu kutsugrafiikkadatasta\n"
 
 #: hist.c:133
 #, c-format
@@ -468,8 +468,8 @@
 "%s: to '%s'\n"
 msgstr ""
 "%s: mittasuhdeyksikk muuttui histogrammitietueiden vlill\n"
-"%s: arvosta %s\n"
-"%s: arvoon %s\n"
+"%s: arvosta \"%s\"\n"
+"%s: arvoon \"%s\"\n"
 
 #: hist.c:143
 #, c-format
@@ -479,8 +479,8 @@
 "%s: to '%c'\n"
 msgstr ""
 "%s: mittasuhdelyhenne muuttui histogrammitietueiden vlill\n"
-"%s: arvosta %c\n"
-"%s: arvoon %c\n"
+"%s: arvosta \"%c\"\n"
+"%s: arvoon \"%c\"\n"
 
 #: hist.c:157
 #, c-format
@@ -508,7 +508,7 @@
 " for %.2f%% of %.2f %s\n"
 "\n"
 msgstr ""
-" kohteelle %.2f%% / %.2f %s\n"
+" kohteelle %.2f%% of %.2f %s\n"
 "\n"
 
 #: hist.c:476
@@ -526,7 +526,7 @@
 " no time accumulated\n"
 "\n"
 msgstr ""
-" ei kerntynytt aikaa\n"
+" ei akkumuloitunutta aikaa\n"
 "\n"
 
 #: hist.c:488
@@ -575,17 +575,17 @@
 #: mips.c:71
 #, c-format
 msgid "[find_call] 0x%lx: jal"
-msgstr "[etsi_kutsu] 0x%lx: jal-ksky"
+msgstr "[find_call] 0x%lx: jal-ksky"
 
 #: mips.c:96
 #, c-format
 msgid "[find_call] 0x%lx: jalr\n"
-msgstr "[etsi_kutsu] 0x%lx: jalr-ksky (epsuora kutsu)\n"
+msgstr "[find_call] 0x%lx: jalr-ksky (epsuora kutsu)\n"
 
 #: source.c:162
 #, c-format
 msgid "%s: could not locate `%s'\n"
-msgstr "%s: ei voitu paikantaa %s\n"
+msgstr "%s: ei voitu paikantaa \"%s\"\n"
 
 #: source.c:237
 #, c-format
diff -Nur binutils-2.18.50.0.1/gprof/po/Make-in binutils-stable/gprof/po/Make-in
--- binutils-2.18.50.0.1/gprof/po/Make-in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/po/Make-in	2007-09-25 15:42:07.000000000 +0200
@@ -113,6 +113,7 @@
 install-exec:
 install-info:
 install-html:
+install-pdf:
 install-data: install-data-@USE_NLS@
 install-data-no: all
 install-data-yes: all
diff -Nur binutils-2.18.50.0.1/gprof/po/sv.po binutils-stable/gprof/po/sv.po
--- binutils-2.18.50.0.1/gprof/po/sv.po	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/gprof/po/sv.po	2007-09-25 15:42:07.000000000 +0200
@@ -1,14 +1,14 @@
 # Swedish messages for gprof.
-# Copyright (C) 2001, 2002, 2004, 2006, 2007 Free Software Foundation, Inc.
+# Copyright (C) 2001, 2002, 2004, 2006 Free Software Foundation, Inc.
 # Christian Rose <menthos@menthos.com>, 2001, 2002, 2004.
-# Daniel Nylander <po@danielnylander.se>, 2006, 2007.
+# Daniel Nylander <po@danielnylander.se>, 2006.
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: gprof 2.17.90\n"
+"Project-Id-Version: gprof 2.15.96\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-05-15 16:49+0930\n"
-"PO-Revision-Date: 2007-08-24 13:42+0100\n"
+"POT-Creation-Date: 2005-03-03 21:05+1030\n"
+"PO-Revision-Date: 2006-02-12 23:55+0100\n"
 "Last-Translator: Daniel Nylander <po@danielnylander.se>\n"
 "Language-Team: Swedish <tp-sv@listor.tp-sv.se>\n"
 "MIME-Version: 1.0\n"
@@ -19,22 +19,22 @@
 msgid "<indirect child>"
 msgstr "<indirekt barn>"
 
-#: alpha.c:107 mips.c:59
+#: alpha.c:119 mips.c:71
 #, c-format
 msgid "[find_call] %s: 0x%lx to 0x%lx\n"
 msgstr "[find_call] %s: 0x%lx till 0x%lx\n"
 
-#: alpha.c:129
+#: alpha.c:141
 #, c-format
 msgid "[find_call] 0x%lx: jsr%s <indirect_child>\n"
 msgstr "[find_call] 0x%lx: jsr%s <indirekt_barn>\n"
 
-#: alpha.c:139
+#: alpha.c:151
 #, c-format
 msgid "[find_call] 0x%lx: bsr"
 msgstr "[find_call] 0x%lx: bsr"
 
-#: basic_blocks.c:128 call_graph.c:89 hist.c:105
+#: basic_blocks.c:128 call_graph.c:89 hist.c:97
 #, c-format
 msgid "%s: %s: unexpected end of file\n"
 msgstr "%s: %s: ovntat filslut\n"
@@ -45,16 +45,16 @@
 msgstr "%s: varning: ignorerar exekveringsrkning fr grundblock (anvnd -l eller --line)\n"
 
 #. FIXME: This only works if bfd_vma is unsigned long.
-#: basic_blocks.c:289 basic_blocks.c:299
+#: basic_blocks.c:287 basic_blocks.c:297
 #, c-format
 msgid "%s:%d: (%s:0x%lx) %lu executions\n"
 msgstr "%s:%d: (%s:0x%lx) %lu exekveringar\n"
 
-#: basic_blocks.c:290 basic_blocks.c:300
+#: basic_blocks.c:288 basic_blocks.c:298
 msgid "<unknown>"
 msgstr "<oknd>"
 
-#: basic_blocks.c:543
+#: basic_blocks.c:541
 #, c-format
 msgid ""
 "\n"
@@ -71,7 +71,7 @@
 "     Rad       Antal\n"
 "\n"
 
-#: basic_blocks.c:567
+#: basic_blocks.c:565
 #, c-format
 msgid ""
 "\n"
@@ -82,22 +82,22 @@
 "Exekveringssammanfattning:\n"
 "\n"
 
-#: basic_blocks.c:568
+#: basic_blocks.c:566
 #, c-format
 msgid "%9ld   Executable lines in this file\n"
 msgstr "%9ld   Exekverbara rader i denna fil\n"
 
-#: basic_blocks.c:570
+#: basic_blocks.c:568
 #, c-format
 msgid "%9ld   Lines executed\n"
 msgstr "%9ld   Exekverade rader\n"
 
-#: basic_blocks.c:571
+#: basic_blocks.c:569
 #, c-format
 msgid "%9.2f   Percent of the file executed\n"
 msgstr "%9.2f   Procent av filen som exekverats\n"
 
-#: basic_blocks.c:575
+#: basic_blocks.c:573
 #, c-format
 msgid ""
 "\n"
@@ -106,7 +106,7 @@
 "\n"
 "%9lu   Totala antalet radexekveringar\n"
 
-#: basic_blocks.c:577
+#: basic_blocks.c:575
 #, c-format
 msgid "%9.2f   Average executions per line\n"
 msgstr "%9.2f   Medelexekveringar per rad\n"
@@ -134,7 +134,7 @@
 "\t\t\tAnropsgraf\n"
 "\n"
 
-#: cg_print.c:78 hist.c:466
+#: cg_print.c:78 hist.c:359
 #, c-format
 msgid ""
 "\n"
@@ -190,7 +190,7 @@
 msgid "descendants"
 msgstr "ttlingar"
 
-#: cg_print.c:98 hist.c:492
+#: cg_print.c:98 hist.c:385
 msgid "name"
 msgstr "namn"
 
@@ -232,47 +232,47 @@
 msgid "<cycle %d>"
 msgstr "<cykel %d>"
 
-#: corefile.c:59
+#: corefile.c:64
+#, c-format
+msgid "%s: could not open %s.\n"
+msgstr "%s: kunde inte ppna %s.\n"
+
+#: corefile.c:78 corefile.c:112
 #, c-format
 msgid "%s: unable to parse mapping file %s.\n"
 msgstr "%s: kan inte tolka mappfilen %s.\n"
 
-#: corefile.c:72
+#: corefile.c:155
 #, c-format
-msgid "%s: could not open %s.\n"
-msgstr "%s: kunde inte ppna %s.\n"
+msgid "%s: %s: not in a.out format\n"
+msgstr "%s: %s: inte i a.out-format\n"
 
 #: corefile.c:166
 #, c-format
-msgid "%s: %s: not in executable format\n"
-msgstr "%s: %s: inte i ett krbart format\n"
-
-#: corefile.c:177
-#, c-format
 msgid "%s: can't find .text section in %s\n"
 msgstr "%s: kan inte hitta .text-sektion i %s\n"
 
-#: corefile.c:252
+#: corefile.c:224
 #, c-format
 msgid "%s: ran out room for %lu bytes of text space\n"
 msgstr "%s: slut p utrymme fr %lu byte textutrymme\n"
 
-#: corefile.c:266
+#: corefile.c:238
 #, c-format
 msgid "%s: can't do -c\n"
 msgstr "%s: kan inte gra -c\n"
 
-#: corefile.c:305
+#: corefile.c:272
 #, c-format
 msgid "%s: -c not supported on architecture %s\n"
 msgstr "%s: -c stds inte p arkitekturen %s\n"
 
-#: corefile.c:470
+#: corefile.c:437
 #, c-format
 msgid "%s: file `%s' has no symbols\n"
 msgstr "%s: filen \"%s\" har inga symboler\n"
 
-#: corefile.c:772
+#: corefile.c:751
 #, c-format
 msgid "%s: somebody miscounted: ltab.len=%d instead of %ld\n"
 msgstr "%s: ngon rknade fel: ltab.len=%d istllet fr %ld\n"
@@ -282,94 +282,94 @@
 msgid "%s: address size has unexpected value of %u\n"
 msgstr "%s: adresstorleken har ett ovntat vrde p %u\n"
 
-#: gmon_io.c:320 gmon_io.c:416
+#: gmon_io.c:317 gmon_io.c:413
 #, c-format
 msgid "%s: file too short to be a gmon file\n"
 msgstr "%s: filen r fr kort fr att vara en gmon-fil\n"
 
-#: gmon_io.c:330 gmon_io.c:459
+#: gmon_io.c:327 gmon_io.c:456
 #, c-format
 msgid "%s: file `%s' has bad magic cookie\n"
 msgstr "%s: filen \"%s\" har felaktigt magiskt tal\n"
 
-#: gmon_io.c:341
+#: gmon_io.c:338
 #, c-format
 msgid "%s: file `%s' has unsupported version %d\n"
 msgstr "%s: filen \"%s\" har version %d som inte stds\n"
 
-#: gmon_io.c:371
+#: gmon_io.c:368
 #, c-format
 msgid "%s: %s: found bad tag %d (file corrupted?)\n"
 msgstr "%s: %s: hittade felaktig tagg %d (r filen skadad?)\n"
 
-#: gmon_io.c:438
+#: gmon_io.c:435
 #, c-format
 msgid "%s: profiling rate incompatible with first gmon file\n"
 msgstr "%s: profileringshastighet r inkompatibel med frsta gmon-filen\n"
 
-#: gmon_io.c:489
+#: gmon_io.c:483
 #, c-format
 msgid "%s: incompatible with first gmon file\n"
 msgstr "%s: inkompatibel med frsta gmon-filen\n"
 
-#: gmon_io.c:516
+#: gmon_io.c:511
 #, c-format
 msgid "%s: file '%s' does not appear to be in gmon.out format\n"
 msgstr "%s: filen \"%s\" verkar inte vara i gmon.out-format\n"
 
 # Man brukar tala om "bins" i hashtabeller
 #
-#: gmon_io.c:529
+#: gmon_io.c:532
 #, c-format
 msgid "%s: unexpected EOF after reading %d/%d bins\n"
 msgstr "%s: ovntat filslut efter lsning av %d/%d poster\n"
 
-#: gmon_io.c:563
+#: gmon_io.c:565
 #, c-format
 msgid "time is in ticks, not seconds\n"
 msgstr "tiden r i tick, inte sekunder\n"
 
-#: gmon_io.c:569 gmon_io.c:746
+#: gmon_io.c:571 gmon_io.c:747
 #, c-format
 msgid "%s: don't know how to deal with file format %d\n"
 msgstr "%s: vet inte hur fileformat %d ska hanteras\n"
 
-#: gmon_io.c:576
+#: gmon_io.c:578
 #, c-format
 msgid "File `%s' (version %d) contains:\n"
 msgstr "Filen \"%s\" (version %d) innehller:\n"
 
-#: gmon_io.c:579
+#: gmon_io.c:581
 #, c-format
 msgid "\t%d histogram record\n"
 msgstr "\t%d histogrampost\n"
 
-#: gmon_io.c:580
+#: gmon_io.c:582
 #, c-format
 msgid "\t%d histogram records\n"
 msgstr "\t%d histogramposter\n"
 
-#: gmon_io.c:582
+#: gmon_io.c:584
 #, c-format
 msgid "\t%d call-graph record\n"
 msgstr "\t%d anropsgrafpost\n"
 
-#: gmon_io.c:583
+#: gmon_io.c:585
 #, c-format
 msgid "\t%d call-graph records\n"
 msgstr "\t%d anropsgrafposter\n"
 
-#: gmon_io.c:585
+#: gmon_io.c:587
 #, c-format
 msgid "\t%d basic-block count record\n"
 msgstr "\t%d grundblocksrkningspost\n"
 
-#: gmon_io.c:586
+#: gmon_io.c:588
 #, c-format
 msgid "\t%d basic-block count records\n"
 msgstr "\t%d grundblocksrkningsposter\n"
 
-#: gprof.c:158
+#: gprof.c:160
 #, c-format
 msgid ""
 "Usage: %s [-[abcDhilLsTvwxyz]] [-[ACeEfFJnNOpPqQZ][name]] [-I dirs]\n"
@@ -383,124 +383,97 @@
 "\t[--no-static] [--print-path] [--separate-files]\n"
 "\t[--static-call-graph] [--sum] [--table-length=len] [--traditional]\n"
 "\t[--version] [--width=n] [--ignore-non-functions]\n"
-"\t[--demangle[=STYLE]] [--no-demangle] [@FILE]\n"
+"\t[--demangle[=STYLE]] [--no-demangle]\n"
 "\t[image-file] [profile-file...]\n"
 msgstr ""
-"Anvndning: %s [-[abcDhilLsTvwxyz]] [-[ACeEfFJnNOpPqQZ][name]] [-I kataloger]\n"
-"\t[-d[num]] [-k frn/till] [-m min_antal] [-t tabell_lngd]\n"
-"\t[--[no-]annotated-source[=namn]] [--[no-]exec-counts[=namn]]\n"
-"\t[--[no-]flat-profile[=namn]] [--[no-]graph[=namn]]\n"
-"\t[--[no-]time=namn] [--all-lines] [--brief] [--debug[=niv]]\n"
-"\t[--function-ordering] [--file-ordering]\n"
+"Anvndning: %s [-[abcDhilLsTvwxyz]] [-[ACeEfFJnNOpPqQZ][namn]]\n"
+"\t[-I kataloger] [-d[tal]] [-k frn/till] [-m minsta-antal]\n"
+"\t[-t table-length] [--[no-]annotated-source[=namn]]\n"
+"\t[--[no-]exec-counts[=namn]] [--[no-]flat-profile[=namn]]\n"
+"\t[--[no-]graph[=namn]] [--[no-]time=namn] [--all-lines] [--brief]\n"
+"\t[--debug[=niv]] [--function-ordering] [--file-ordering]\n"
 "\t[--directory-path=kataloger] [--display-unused-functions]\n"
 "\t[--file-format=namn] [--file-info] [--help] [--line] [--min-count=n]\n"
 "\t[--no-static] [--print-path] [--separate-files]\n"
 "\t[--static-call-graph] [--sum] [--table-length=lngd] [--traditional]\n"
 "\t[--version] [--width=n] [--ignore-non-functions]\n"
-"\t[--demangle[=STIL]] [--no-demangle] [@FIL]\n"
+"\t[--demangle[=STIL]] [--no-demangle]\n"
 "\t[bildfil] [profilfil...]\n"
 
-#: gprof.c:174
+#: gprof.c:176
 #, c-format
 msgid "Report bugs to %s\n"
 msgstr ""
 "Rapportera fel till %s,\n"
-"Rapportera synpunkter p versttningen till tp-sv@listor.tp-sv.se\n"
+"och synpunkter p versttningen till sv@li.org\n"
 
-#: gprof.c:250
+#: gprof.c:248
 #, c-format
 msgid "%s: debugging not supported; -d ignored\n"
 msgstr "%s: felskning stds inte; -d ignorerades\n"
 
-#: gprof.c:330
+#: gprof.c:328
 #, c-format
 msgid "%s: unknown file format %s\n"
 msgstr "%s: oknt filformat %s\n"
 
 #. This output is intended to follow the GNU standards document.
-#: gprof.c:414
+#: gprof.c:412
 #, c-format
 msgid "GNU gprof %s\n"
 msgstr "GNU gprof %s\n"
 
-#: gprof.c:415
+#: gprof.c:413
 #, c-format
 msgid "Based on BSD gprof, copyright 1983 Regents of the University of California.\n"
 msgstr "Baserat p BSD gprof, copyright 1983 Regents of the University of California.\n"
 
-#: gprof.c:416
+#: gprof.c:414
 #, c-format
 msgid "This program is free software.  This program has absolutely no warranty.\n"
 msgstr "Detta program r fri programvara. Detta program har ingen som helst garanti.\n"
 
-#: gprof.c:457
+#: gprof.c:455
 #, c-format
 msgid "%s: unknown demangling style `%s'\n"
 msgstr "%s: oknd avmanglingsstil \"%s\"\n"
 
-#: gprof.c:477
+#: gprof.c:475
 #, c-format
 msgid "%s: Only one of --function-ordering and --file-ordering may be specified.\n"
 msgstr "%s: Endast en av --function-ordering och --file-ordering kan anges.\n"
 
-#: gprof.c:527
+#: gprof.c:525
 #, c-format
 msgid "%s: sorry, file format `prof' is not yet supported\n"
 msgstr "%s: tyvrr, filformatet \"prof\" stds inte n\n"
 
-#: gprof.c:581
+#: gprof.c:574
 #, c-format
 msgid "%s: gmon.out file is missing histogram\n"
 msgstr "%s: gmon.out-filen saknar histogram\n"
 
-#: gprof.c:588
+#: gprof.c:581
 #, c-format
 msgid "%s: gmon.out file is missing call-graph data\n"
 msgstr "%s: gmon.out-filen saknar anropsgrafdata\n"
 
-#: hist.c:133
+#: hist.c:126
 #, c-format
-msgid ""
-"%s: dimension unit changed between histogram records\n"
-"%s: from '%s'\n"
-"%s: to '%s'\n"
-msgstr ""
-"%s: dimensionsenhet ndrades mellan histogramposter\n"
-"%s: frn \"%s\"\n"
-"%s: till \"%s\"\n"
+msgid "%s: `%s' is incompatible with first gmon file\n"
+msgstr "%s: \"%s\" r inkompatibel med frsta gmon-filen\n"
 
-#: hist.c:143
-#, c-format
-msgid ""
-"%s: dimension abbreviation changed between histogram records\n"
-"%s: from '%c'\n"
-"%s: to '%c'\n"
-msgstr ""
-"%s: dimensionsfrkortning ndrades mellan histogramposter\n"
-"%s: frn \"%c\"\n"
-"%s: till \"%c\"\n"
-
-#: hist.c:157
-#, c-format
-msgid "%s: different scales in histogram records"
-msgstr "%s: olika skalor i histogramposter"
-
-#: hist.c:194
-#, c-format
-msgid "%s: overlapping histogram records\n"
-msgstr "%s: verlappande histogramposter\n"
-
-#: hist.c:228
+#: hist.c:142
 #, c-format
 msgid "%s: %s: unexpected EOF after reading %u of %u samples\n"
 msgstr "%s: %s: ovntat filslut efter lsning av %u av %u stickprov\n"
 
-#: hist.c:462
+#: hist.c:355
 #, c-format
 msgid "%c%c/call"
 msgstr "%c%c/anrop"
 
-#: hist.c:470
+#: hist.c:363
 #, c-format
 msgid ""
 " for %.2f%% of %.2f %s\n"
@@ -509,7 +482,7 @@
 " fr %.2f%% av %.2f %s\n"
 "\n"
 
-#: hist.c:476
+#: hist.c:369
 #, c-format
 msgid ""
 "\n"
@@ -518,7 +491,7 @@
 "\n"
 "Varje stickprov rknas som %g %s.\n"
 
-#: hist.c:481
+#: hist.c:374
 #, c-format
 msgid ""
 " no time accumulated\n"
@@ -527,27 +500,27 @@
 " ingen ackumulerad tid\n"
 "\n"
 
-#: hist.c:488
+#: hist.c:381
 msgid "cumulative"
 msgstr "kumulativ"
 
-#: hist.c:488
+#: hist.c:381
 msgid "self  "
 msgstr "sjlv"
 
-#: hist.c:488
+#: hist.c:381
 msgid "total "
 msgstr "totalt"
 
-#: hist.c:491
+#: hist.c:384
 msgid "time"
 msgstr "tid"
 
-#: hist.c:491
+#: hist.c:384
 msgid "calls"
 msgstr "anrop"
 
-#: hist.c:580
+#: hist.c:473
 #, c-format
 msgid ""
 "\n"
@@ -560,22 +533,17 @@
 "\n"
 "platt profil:\n"
 
-#: hist.c:586
+#: hist.c:479
 #, c-format
 msgid "Flat profile:\n"
 msgstr "Platt profil:\n"
 
-#: hist.c:705
-#, c-format
-msgid "%s: found a symbol that covers several histogram records"
-msgstr "%s: hittade en symbol som tcker in flera histogramposter"
-
-#: mips.c:71
+#: mips.c:82
 #, c-format
 msgid "[find_call] 0x%lx: jal"
 msgstr "[find_call] 0x%lx: jal"
 
-#: mips.c:96
+#: mips.c:107
 #, c-format
 msgid "[find_call] 0x%lx: jalr\n"
 msgstr "[find_call] 0x%lx: jalr\n"
@@ -590,13 +558,10 @@
 msgid "*** File %s:\n"
 msgstr "*** Fil %s:\n"
 
-#: utils.c:99
+#: utils.c:107
 #, c-format
 msgid " <cycle %d>"
 msgstr " <cykel %d>"
 
-#~ msgid "%s: `%s' is incompatible with first gmon file\n"
-#~ msgstr "%s: \"%s\" r inkompatibel med frsta gmon-filen\n"
-
 #~ msgid "%s: bfd_vma has unexpected size of %ld bytes\n"
 #~ msgstr "%s: bfd_vma har en ovntad storlek p %ld byte\n"
diff -Nur binutils-2.18.50.0.1/include/bfdlink.h binutils-stable/include/bfdlink.h
--- binutils-2.18.50.0.1/include/bfdlink.h	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/include/bfdlink.h	2007-09-25 15:41:47.000000000 +0200
@@ -351,9 +351,6 @@
   /* Non-NULL if .note.gnu.build-id section should be created.  */
   char *emit_note_gnu_build_id;
 
-  /* TRUE if sharables sections may be created.  */
-  unsigned int sharable_sections: 1;
-
   /* What to do with unresolved symbols in an object file.
      When producing executables the default is GENERATE_ERROR.
      When producing shared libraries the default is IGNORE.  The
diff -Nur binutils-2.18.50.0.1/include/ChangeLog binutils-stable/include/ChangeLog
--- binutils-2.18.50.0.1/include/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/ChangeLog	2007-09-25 15:41:47.000000000 +0200
@@ -1,12 +1,3 @@
-2007-09-06  Tom Tromey  <tromey@redhat.com>
-
-	* libiberty.h (pex_free): Document process killing.
-
-2007-08-31  Douglas Gregor  <doug.gregor@gmail.com>
-
-	* demangle.h (enum demangle_component_type): Add
-	DEMANGLE_COMPONENT_RVALUE_REFERENCE.
-
 2007-07-25  Ben Elliston  <bje@au.ibm.com>
 
 	* ternary.h: Remove.
diff -Nur binutils-2.18.50.0.1/include/demangle.h binutils-stable/include/demangle.h
--- binutils-2.18.50.0.1/include/demangle.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/demangle.h	2007-09-25 15:41:47.000000000 +0200
@@ -296,9 +296,6 @@
   /* A reference.  The one subtree is the type which is being
      referenced.  */
   DEMANGLE_COMPONENT_REFERENCE,
-  /* C++0x: An rvalue reference.  The one subtree is the type which is
-     being referenced.  */
-  DEMANGLE_COMPONENT_RVALUE_REFERENCE,
   /* A complex type.  The one subtree is the base type.  */
   DEMANGLE_COMPONENT_COMPLEX,
   /* An imaginary type.  The one subtree is the base type.  */
diff -Nur binutils-2.18.50.0.1/include/elf/ChangeLog binutils-stable/include/elf/ChangeLog
--- binutils-2.18.50.0.1/include/elf/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/elf/ChangeLog	2007-09-25 15:41:46.000000000 +0200
@@ -1,7 +1,3 @@
-2007-08-25  Ulrich Weigand  <uweigand@de.ibm.com>
-
-	* common.h (NT_SPU): Define.
-
 2007-08-16  H.J. Lu  <hongjiu.lu@intel.com>
 
 	* common.h: Revert last change.
diff -Nur binutils-2.18.50.0.1/include/elf/common.h binutils-stable/include/elf/common.h
--- binutils-2.18.50.0.1/include/elf/common.h	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/include/elf/common.h	2007-09-25 15:41:46.000000000 +0200
@@ -309,7 +309,6 @@
 #define PT_SUNW_EH_FRAME PT_GNU_EH_FRAME      /* Solaris uses the same value */
 #define PT_GNU_STACK	(PT_LOOS + 0x474e551) /* Stack flags */
 #define PT_GNU_RELRO	(PT_LOOS + 0x474e552) /* Read-only after relocation */
-#define PT_GNU_SHR	(PT_LOOS + 0x474e554) /* Sharable segment */
 
 /* Program segment permissions, in program header p_flags field.  */
 
@@ -382,8 +381,6 @@
 #define SHF_MASKOS	0x0FF00000	/* New value, Oct 4, 1999 Draft */
 #define SHF_MASKPROC	0xF0000000	/* Processor-specific semantics */
 
-#define SHF_GNU_SHARABLE 0x01000000	/* sharable section */
-
 /* Values of note segment descriptor types for core files.  */
 
 #define NT_PRSTATUS	1		/* Contains copy of prstatus struct */
@@ -410,10 +407,6 @@
 #define NT_NETBSDCORE_PROCINFO	1	/* Has a struct procinfo */
 #define NT_NETBSDCORE_FIRSTMACH	32	/* start of machdep note types */
 
-/* Note segments for core files on SPU systems.  Note name
-   must start with "SPU/".  */
-
-#define NT_SPU		1
 
 /* Values of note segment descriptor types for object files.  */
 
@@ -512,9 +505,6 @@
 #define SHN_HIRESERVE	0xFFFF		/* End range of reserved indices */
 #define SHN_BAD		((unsigned) -1) /* Used internally by bfd */
 
-/* Associated symbol is in common sharable */
-#define SHN_GNU_SHARABLE_COMMON (SHN_LOOS + 10)
-
 /* The following constants control how a symbol may be accessed once it has
    become part of an executable or shared library.  */
 
diff -Nur binutils-2.18.50.0.1/include/elf/internal.h binutils-stable/include/elf/internal.h
--- binutils-2.18.50.0.1/include/elf/internal.h	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/include/elf/internal.h	2007-09-25 15:41:46.000000000 +0200
@@ -266,12 +266,11 @@
      || segment->p_type == PT_TLS) ? sec_hdr->sh_size : 0)
 
 /* Decide if the given sec_hdr is in the given segment.  PT_TLS segment
-   contains only SHF_TLS sections.  Only PT_LOAD, PT_GNU_RELRO and
-   and PT_TLS segments can contain SHF_TLS sections.  */
+   contains only SHF_TLS sections.  Only PT_LOAD and PT_TLS segments
+   can contain SHF_TLS sections.  */
 #define ELF_IS_SECTION_IN_SEGMENT(sec_hdr, segment)			\
   (((((sec_hdr->sh_flags & SHF_TLS) != 0)				\
      && (segment->p_type == PT_TLS					\
-	 || segment->p_type == PT_GNU_RELRO				\
 	 || segment->p_type == PT_LOAD))				\
     || ((sec_hdr->sh_flags & SHF_TLS) == 0				\
 	&& segment->p_type != PT_TLS))					\
diff -Nur binutils-2.18.50.0.1/include/elf/m68k.h binutils-stable/include/elf/m68k.h
--- binutils-2.18.50.0.1/include/elf/m68k.h	2007-01-23 22:37:00.000000000 +0100
+++ binutils-stable/include/elf/m68k.h	2007-09-25 15:41:46.000000000 +0200
@@ -71,6 +71,7 @@
 #define EF_M68K_CF_ISA_B_NOUSP	0x04  /* ISA_B except for USP */
 #define EF_M68K_CF_ISA_B	0x05
 #define EF_M68K_CF_ISA_C	0x06
+#define EF_M68K_CF_ISA_C_NODIV	0x07  /* ISA C except for div */
 #define EF_M68K_CF_MAC_MASK	0x30 
 #define EF_M68K_CF_MAC		0x10  /* MAC */
 #define EF_M68K_CF_EMAC		0x20  /* EMAC */
diff -Nur binutils-2.18.50.0.1/include/elf/mips.h binutils-stable/include/elf/mips.h
--- binutils-2.18.50.0.1/include/elf/mips.h	2007-08-01 15:11:51.000000000 +0200
+++ binutils-stable/include/elf/mips.h	2007-09-25 15:41:46.000000000 +0200
@@ -213,9 +213,12 @@
 #define E_MIPS_MACH_4120	0x00870000
 #define E_MIPS_MACH_4111	0x00880000
 #define E_MIPS_MACH_SB1         0x008a0000
+#define E_MIPS_MACH_OCTEON	0x008b0000
 #define E_MIPS_MACH_5400	0x00910000
 #define E_MIPS_MACH_5500	0x00980000
 #define E_MIPS_MACH_9000	0x00990000
+#define E_MIPS_MACH_LS2E        0x00A00000
+#define E_MIPS_MACH_LS2F        0x00A10000
 
 /* Processor specific section indices.  These sections do not actually
    exist.  Symbols with a st_shndx field corresponding to one of these
diff -Nur binutils-2.18.50.0.1/include/elf/ppc.h binutils-stable/include/elf/ppc.h
--- binutils-2.18.50.0.1/include/elf/ppc.h	2007-08-01 15:11:51.000000000 +0200
+++ binutils-stable/include/elf/ppc.h	2007-09-25 15:41:46.000000000 +0200
@@ -180,6 +180,11 @@
 			       soft-float; 0 for not tagged or not
 			       using any ABIs affected by the
 			       differences.  */
+
+  /* Value 1 for general purpose registers only, 2 for AltiVec
+     registers, 3 for SPE registers; 0 for not tagged or not using any
+     ABIs affected by the differences.  */
+  Tag_GNU_Power_ABI_Vector = 8,
 };
 
 #endif /* _ELF_PPC_H */
diff -Nur binutils-2.18.50.0.1/include/gdb/callback.h binutils-stable/include/gdb/callback.h
--- binutils-2.18.50.0.1/include/gdb/callback.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/callback.h	2007-09-25 15:41:45.000000000 +0200
@@ -2,20 +2,21 @@
    Copyright 1997, 2007 Free Software Foundation, Inc.
    Contributed by Cygnus Solutions.
 
-   This file is part of GDB.
+This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
-
-   You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 
 /* This interface isn't intended to be specific to any particular kind
    of remote (hardware, simulator, whatever).  As such, support for it
diff -Nur binutils-2.18.50.0.1/include/gdb/ChangeLog binutils-stable/include/gdb/ChangeLog
--- binutils-2.18.50.0.1/include/gdb/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/ChangeLog	2007-09-25 15:41:45.000000000 +0200
@@ -1,7 +1,3 @@
-2007-08-23  Joel Brobecker  <brobecker@adacore.com>
-
-	Switch the license of all .h files to GPLv3.
-
 2007-01-09  Daniel Jacobowitz  <dan@codesourcery.com>
 
 	Updated copyright notices for most files.
diff -Nur binutils-2.18.50.0.1/include/gdb/fileio.h binutils-stable/include/gdb/fileio.h
--- binutils-2.18.50.0.1/include/gdb/fileio.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/fileio.h	2007-09-25 15:41:45.000000000 +0200
@@ -2,18 +2,20 @@
 
    Copyright 2003, 2007 Free Software Foundation, Inc.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
+   This program is free software; you can redistribute it and/or
+   modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation; either version 2 of the
+   License, or (at your option) any later version.
+
+   This program is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   General Public License for more details.
 
    You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+   along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #ifndef GDB_FILEIO_H_
 #define GDB_FILEIO_H_
diff -Nur binutils-2.18.50.0.1/include/gdb/remote-sim.h binutils-stable/include/gdb/remote-sim.h
--- binutils-2.18.50.0.1/include/gdb/remote-sim.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/remote-sim.h	2007-09-25 15:41:45.000000000 +0200
@@ -3,20 +3,21 @@
    Copyright 1993, 1994, 1996, 1997, 1998, 2000, 2002, 2007
    Free Software Foundation, Inc.
 
-   This file is part of GDB.
+This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
-
-   You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 
 #if !defined (REMOTE_SIM_H)
 #define REMOTE_SIM_H 1
diff -Nur binutils-2.18.50.0.1/include/gdb/signals.h binutils-stable/include/gdb/signals.h
--- binutils-2.18.50.0.1/include/gdb/signals.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/signals.h	2007-09-25 15:41:45.000000000 +0200
@@ -6,7 +6,7 @@
 
    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
+   the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.
 
    This program is distributed in the hope that it will be useful,
@@ -15,7 +15,9 @@
    GNU General Public License for more details.
 
    You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+   along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330,
+   Boston, MA 02111-1307, USA.  */
 
 #ifndef GDB_SIGNALS_H
 #define GDB_SIGNALS_H
diff -Nur binutils-2.18.50.0.1/include/gdb/sim-arm.h binutils-stable/include/gdb/sim-arm.h
--- binutils-2.18.50.0.1/include/gdb/sim-arm.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/sim-arm.h	2007-09-25 15:41:45.000000000 +0200
@@ -6,18 +6,20 @@
 
    This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
+   This program is free software; you can redistribute it and/or
+   modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation; either version 2 of the
+   License, or (at your option) any later version.
+
+   This program is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   General Public License for more details.
 
    You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+   along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if !defined (SIM_ARM_H)
 #define SIM_ARM_H
diff -Nur binutils-2.18.50.0.1/include/gdb/sim-d10v.h binutils-stable/include/gdb/sim-d10v.h
--- binutils-2.18.50.0.1/include/gdb/sim-d10v.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/sim-d10v.h	2007-09-25 15:41:45.000000000 +0200
@@ -2,20 +2,21 @@
 
    Copyright 1999, 2002, 2007 Free Software Foundation, Inc.
 
-   This file is part of GDB.
+This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
-
-   You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 
 #if !defined (SIM_D10V_H)
 #define SIM_D10V_H
diff -Nur binutils-2.18.50.0.1/include/gdb/sim-frv.h binutils-stable/include/gdb/sim-frv.h
--- binutils-2.18.50.0.1/include/gdb/sim-frv.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/sim-frv.h	2007-09-25 15:41:45.000000000 +0200
@@ -6,18 +6,20 @@
 
    This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
+   This program is free software; you can redistribute it and/or
+   modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation; either version 2 of the
+   License, or (at your option) any later version.
+
+   This program is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   General Public License for more details.
 
    You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+   along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if !defined (SIM_FRV_H)
 #define SIM_FRV_H
diff -Nur binutils-2.18.50.0.1/include/gdb/sim-h8300.h binutils-stable/include/gdb/sim-h8300.h
--- binutils-2.18.50.0.1/include/gdb/sim-h8300.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/sim-h8300.h	2007-09-25 15:41:45.000000000 +0200
@@ -1,20 +1,21 @@
 /* This file defines the interface between the h8300 simulator and gdb.
    Copyright (C) 2002, 2007 Free Software Foundation, Inc.
 
-   This file is part of GDB.
+This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
-
-   You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 
 #if !defined (SIM_H8300_H)
 #define SIM_H8300_H
diff -Nur binutils-2.18.50.0.1/include/gdb/sim-m32c.h binutils-stable/include/gdb/sim-m32c.h
--- binutils-2.18.50.0.1/include/gdb/sim-m32c.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/sim-m32c.h	2007-09-25 15:41:45.000000000 +0200
@@ -1,20 +1,21 @@
 /* This file defines the interface between the m32c simulator and gdb.
    Copyright (C) 2005, 2007 Free Software Foundation, Inc.
 
-   This file is part of GDB.
+This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
-
-   You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 
 #ifndef SIM_M32C_H
 #define SIM_M32C_H
diff -Nur binutils-2.18.50.0.1/include/gdb/sim-ppc.h binutils-stable/include/gdb/sim-ppc.h
--- binutils-2.18.50.0.1/include/gdb/sim-ppc.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/sim-ppc.h	2007-09-25 15:41:45.000000000 +0200
@@ -6,18 +6,20 @@
 
    This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
+   This program is free software; you can redistribute it and/or
+   modify it under the terms of the GNU General Public License as
+   published by the Free Software Foundation; either version 2 of the
+   License, or (at your option) any later version.
+
+   This program is distributed in the hope that it will be useful, but
+   WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   General Public License for more details.
 
    You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+   along with this program; if not, write to the Free Software
+   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+   02111-1307, USA.  */
 
 #if !defined (SIM_PPC_H)
 #define SIM_PPC_H
diff -Nur binutils-2.18.50.0.1/include/gdb/sim-sh.h binutils-stable/include/gdb/sim-sh.h
--- binutils-2.18.50.0.1/include/gdb/sim-sh.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/gdb/sim-sh.h	2007-09-25 15:41:45.000000000 +0200
@@ -1,20 +1,21 @@
 /* This file defines the interface between the sh simulator and gdb.
    Copyright (C) 2000, 2002, 2004, 2007 Free Software Foundation, Inc.
 
-   This file is part of GDB.
+This file is part of GDB.
 
-   This program is free software; you can redistribute it and/or modify
-   it under the terms of the GNU General Public License as published by
-   the Free Software Foundation; either version 3 of the License, or
-   (at your option) any later version.
-
-   This program is distributed in the hope that it will be useful,
-   but WITHOUT ANY WARRANTY; without even the implied warranty of
-   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-   GNU General Public License for more details.
-
-   You should have received a copy of the GNU General Public License
-   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 
 #if !defined (SIM_SH_H)
 #define SIM_SH_H
diff -Nur binutils-2.18.50.0.1/include/libiberty.h binutils-stable/include/libiberty.h
--- binutils-2.18.50.0.1/include/libiberty.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/libiberty.h	2007-09-25 15:41:47.000000000 +0200
@@ -1,6 +1,6 @@
 /* Function declarations for libiberty.
 
-   Copyright 2001, 2002, 2005, 2007 Free Software Foundation, Inc.
+   Copyright 2001, 2002, 2005 Free Software Foundation, Inc.
    
    Note - certain prototypes declared in this header file are for
    functions whoes implementation copyright does not belong to the
@@ -541,8 +541,7 @@
 extern int pex_get_times (struct pex_obj *, int count,
 			  struct pex_time *vector);
 
-/* Clean up a pex_obj.  If you have not called pex_get_times or
-   pex_get_status, this will try to kill the subprocesses.  */
+/* Clean up a pex_obj.  */
 
 extern void pex_free (struct pex_obj *);
 
diff -Nur binutils-2.18.50.0.1/include/opcode/arm.h binutils-stable/include/opcode/arm.h
--- binutils-2.18.50.0.1/include/opcode/arm.h	2006-09-27 19:24:20.000000000 +0200
+++ binutils-stable/include/opcode/arm.h	2007-09-25 15:41:46.000000000 +0200
@@ -44,12 +44,16 @@
 #define ARM_EXT_V7A	 0x00100000	/* Arm V7A.                */
 #define ARM_EXT_V7R	 0x00200000	/* Arm V7R.                */
 #define ARM_EXT_V7M	 0x00400000	/* Arm V7M.                */
+#define ARM_EXT_V6M	 0x00800000	/* ARM V6M.		    */
+#define ARM_EXT_BARRIER	 0x01000000	/* DSB/DMB/ISB.		    */
+#define ARM_EXT_THUMB_MSR 0x02000000	/* Thumb MSR/MRS.	    */
 
 /* Co-processor space extensions.  */
 #define ARM_CEXT_XSCALE   0x00000001	/* Allow MIA etc.          */
 #define ARM_CEXT_MAVERICK 0x00000002	/* Use Cirrus/DSP coprocessor.  */
 #define ARM_CEXT_IWMMXT   0x00000004    /* Intel Wireless MMX technology coprocessor.   */
 #define ARM_CEXT_IWMMXT2  0x00000008    /* Intel Wireless MMX technology coprocessor version 2.   */
+#define ARM_CEXT_MARVELL_F 0x00000010	/* Marvell division extension. */
 
 #define FPU_ENDIAN_PURE	 0x80000000	/* Pure-endian doubles.	      */
 #define FPU_ENDIAN_BIG	 0		/* Double words-big-endian.   */
@@ -87,17 +91,22 @@
 #define ARM_AEXT_V6K    (ARM_AEXT_V6    | ARM_EXT_V6K)
 #define ARM_AEXT_V6Z    (ARM_AEXT_V6    | ARM_EXT_V6Z)
 #define ARM_AEXT_V6ZK   (ARM_AEXT_V6    | ARM_EXT_V6K | ARM_EXT_V6Z)
-#define ARM_AEXT_V6T2   (ARM_AEXT_V6    | ARM_EXT_V6T2 | ARM_EXT_V6_NOTM)
+#define ARM_AEXT_V6T2   (ARM_AEXT_V6 \
+    | ARM_EXT_V6T2 | ARM_EXT_V6_NOTM | ARM_EXT_THUMB_MSR)
 #define ARM_AEXT_V6KT2  (ARM_AEXT_V6T2 | ARM_EXT_V6K)
 #define ARM_AEXT_V6ZT2  (ARM_AEXT_V6T2 | ARM_EXT_V6Z)
 #define ARM_AEXT_V6ZKT2 (ARM_AEXT_V6T2 | ARM_EXT_V6K | ARM_EXT_V6Z)
-#define ARM_AEXT_V7_ARM	(ARM_AEXT_V6ZKT2 | ARM_EXT_V7)
+#define ARM_AEXT_V7_ARM	(ARM_AEXT_V6ZKT2 | ARM_EXT_V7 | ARM_EXT_BARRIER)
 #define ARM_AEXT_V7A	(ARM_AEXT_V7_ARM | ARM_EXT_V7A)
 #define ARM_AEXT_V7R	(ARM_AEXT_V7_ARM | ARM_EXT_V7R | ARM_EXT_DIV)
 #define ARM_AEXT_NOTM \
   (ARM_AEXT_V4 | ARM_EXT_V5ExP | ARM_EXT_V5J | ARM_EXT_V6_NOTM)
+#define ARM_AEXT_V6M \
+  ((ARM_AEXT_V6K | ARM_EXT_BARRIER | ARM_EXT_V6M | ARM_EXT_THUMB_MSR) \
+   & ~(ARM_AEXT_NOTM))
 #define ARM_AEXT_V7M \
-  ((ARM_AEXT_V7_ARM | ARM_EXT_V7M | ARM_EXT_DIV) & ~(ARM_AEXT_NOTM))
+  ((ARM_AEXT_V7_ARM | ARM_EXT_V6M | ARM_EXT_V7M | ARM_EXT_DIV) \
+   & ~(ARM_AEXT_NOTM))
 #define ARM_AEXT_V7 (ARM_AEXT_V7A & ARM_AEXT_V7R & ARM_AEXT_V7M)
 
 /* Processors with specific extensions in the co-processor space.  */
@@ -106,6 +115,8 @@
  ARM_FEATURE (ARM_AEXT_V5TE, ARM_CEXT_XSCALE | ARM_CEXT_IWMMXT)
 #define ARM_ARCH_IWMMXT2	\
  ARM_FEATURE (ARM_AEXT_V5TE, ARM_CEXT_XSCALE | ARM_CEXT_IWMMXT | ARM_CEXT_IWMMXT2)
+#define ARM_ARCH_MARVELL_F	\
+ ARM_FEATURE (ARM_AEXT_V5TE, ARM_CEXT_MARVELL_F)
 
 #define FPU_VFP_V1xD	(FPU_VFP_EXT_V1xD | FPU_ENDIAN_PURE)
 #define FPU_VFP_V1	(FPU_VFP_V1xD | FPU_VFP_EXT_V1)
@@ -158,6 +169,7 @@
 #define ARM_ARCH_V6KT2	ARM_FEATURE (ARM_AEXT_V6KT2, 0)
 #define ARM_ARCH_V6ZT2	ARM_FEATURE (ARM_AEXT_V6ZT2, 0)
 #define ARM_ARCH_V6ZKT2	ARM_FEATURE (ARM_AEXT_V6ZKT2, 0)
+#define ARM_ARCH_V6M	ARM_FEATURE (ARM_AEXT_V6M, 0)
 #define ARM_ARCH_V7	ARM_FEATURE (ARM_AEXT_V7, 0)
 #define ARM_ARCH_V7A	ARM_FEATURE (ARM_AEXT_V7A, 0)
 #define ARM_ARCH_V7R	ARM_FEATURE (ARM_AEXT_V7R, 0)
diff -Nur binutils-2.18.50.0.1/include/opcode/ChangeLog binutils-stable/include/opcode/ChangeLog
--- binutils-2.18.50.0.1/include/opcode/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/opcode/ChangeLog	2007-09-25 15:41:46.000000000 +0200
@@ -1,7 +1,3 @@
-2007-08-08  Ben Elliston  <bje@au.ibm.com>
-
-	* ppc.h (PPC_OPCODE_PPCPS): New.
-
 2007-07-03  Nathan Sidwell  <nathan@codesourcery.com>
 
 	* m68k.h: Document j K & E.
diff -Nur binutils-2.18.50.0.1/include/opcode/mips.h binutils-stable/include/opcode/mips.h
--- binutils-2.18.50.0.1/include/opcode/mips.h	2007-03-16 16:48:30.000000000 +0100
+++ binutils-stable/include/opcode/mips.h	2007-09-25 15:41:46.000000000 +0200
@@ -90,6 +90,8 @@
 #define OP_SH_CODE20		6
 #define OP_MASK_SHAMT		0x1f
 #define OP_SH_SHAMT		6
+#define OP_MASK_BITIND		OP_MASK_RT
+#define OP_SH_BITIND		OP_SH_RT
 #define OP_MASK_FD		0x1f
 #define OP_SH_FD		6
 #define OP_MASK_TARGET		0x3ffffff
@@ -254,6 +256,8 @@
 
    "<" 5 bit shift amount (OP_*_SHAMT)
    ">" shift amount between 32 and 63, stored after subtracting 32 (OP_*_SHAMT)
+   "^" 5 bit bit index amount (OP_*_BITIND)
+   ";" bit index between 32 and 63, stored after subtracting 32 (OP_*_BITIND)
    "a" 26 bit target address (OP_*_TARGET)
    "b" 5 bit base register (OP_*_RS)
    "c" 10 bit breakpoint code (OP_*_CODE)
@@ -278,6 +282,7 @@
    "B" 20 bit syscall/breakpoint function code (OP_*_CODE20)
    "J" 19 bit wait function code (OP_*_CODE19)
    "x" accept and ignore register name
+   "y" 10 bit signed immediate (OP_*_CODE2)
    "z" must be zero register
    "K" 5 bit Hardware Register (rdhwr instruction) (OP_*_RD)
    "+A" 5 bit ins/ext/dins/dext/dinsm/dextm position, which becomes
@@ -378,9 +383,9 @@
 
    Characters used so far, for quick reference when adding more:
    "234567890"
-   "%[]<>(),+:'@!$*&"
+   "%[]<>(),+:'@!$*&^;"
    "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
-   "abcdefghijklopqrstuvwxz"
+   "abcdefghijklopqrstuvwxyz"
 
    Extension character sequences used so far ("+" followed by the
    following), for quick reference when adding more:
@@ -472,20 +477,43 @@
 #define INSN_MACRO                  0xffffffff
 
 /* Masks used to mark instructions to indicate which MIPS ISA level
-   they were introduced in.  ISAs, as defined below, are logical
-   ORs of these bits, indicating that they support the instructions
-   defined at the given level.  */
-
-#define INSN_ISA_MASK		  0x00000fff
-#define INSN_ISA1                 0x00000001
-#define INSN_ISA2                 0x00000002
-#define INSN_ISA3                 0x00000004
-#define INSN_ISA4                 0x00000008
-#define INSN_ISA5                 0x00000010
-#define INSN_ISA32                0x00000020
-#define INSN_ISA64                0x00000040
-#define INSN_ISA32R2              0x00000080
-#define INSN_ISA64R2              0x00000100
+   they were introduced in.  INSN_ISA_MASK masks an enumeration that
+   specifies the base ISA level(s).  The remainder of a 32-bit
+   word constructed using these macros is a bitmask of the remaining
+   INSN_* values below.  */
+
+#define INSN_ISA_MASK		  0x0000000ful
+
+/* We cannot start at zero due to ISA_UNKNOWN below.  */
+#define INSN_ISA1                 1
+#define INSN_ISA2                 2
+#define INSN_ISA3                 3
+#define INSN_ISA4                 4
+#define INSN_ISA5                 5
+#define INSN_ISA32                6
+#define INSN_ISA32R2              7
+#define INSN_ISA64                8
+#define INSN_ISA64R2              9
+/* Below this point the INSN_* values correspond to combinations of ISAs.
+   They are only for use in the opcodes table to indicate membership of
+   a combination of ISAs that cannot be expressed using the usual inclusion
+   ordering on the above INSN_* values.  */
+#define INSN_ISA3_32              10
+#define INSN_ISA3_32R2            11
+#define INSN_ISA4_32              12
+#define INSN_ISA4_32R2            13
+#define INSN_ISA5_32R2            14
+
+/* Given INSN_ISA* values X and Y, where X ranges over INSN_ISA1 through
+   INSN_ISA5_32R2 and Y ranges over INSN_ISA1 through INSN_ISA64R2,
+   this table describes whether at least one of the ISAs described by X
+   is/are implemented by ISA Y.  (Think of Y as the ISA level supported by
+   a particular core and X as the ISA level(s) at which a certain instruction
+   is defined.)  The ISA(s) described by X is/are implemented by Y iff
+   (mips_isa_table[(Y & INSN_ISA_MASK) - 1] >> ((X & INSN_ISA_MASK) - 1)) & 1
+   is non-zero.  */
+static const unsigned int mips_isa_table[] =
+  { 0x0001, 0x0003, 0x0607, 0x1e0f, 0x3e1f, 0x0a23, 0x3e63, 0x3ebf, 0x3fff };
 
 /* Masks used for MIPS-defined ASEs.  */
 #define INSN_ASE_MASK		  0x3c00f000
@@ -529,21 +557,27 @@
 #define INSN_SMARTMIPS            0x10000000
 /* DSP R2 ASE  */
 #define INSN_DSPR2                0x20000000
+/* Cavium Networks Octeon instruction. */
+#define INSN_OCTEON		  0x40000000
+/* ST Microelectronics Loongson 2E.  */
+#define INSN_LOONGSON_2E          0x80000000
+/* ST Microelectronics Loongson 2F.  */
+#define INSN_LOONGSON_2F          0x00000010
 
 /* MIPS ISA defines, use instead of hardcoding ISA level.  */
 
 #define       ISA_UNKNOWN     0               /* Gas internal use.  */
-#define       ISA_MIPS1       (INSN_ISA1)
-#define       ISA_MIPS2       (ISA_MIPS1 | INSN_ISA2)
-#define       ISA_MIPS3       (ISA_MIPS2 | INSN_ISA3)
-#define       ISA_MIPS4       (ISA_MIPS3 | INSN_ISA4)
-#define       ISA_MIPS5       (ISA_MIPS4 | INSN_ISA5)
+#define       ISA_MIPS1       INSN_ISA1
+#define       ISA_MIPS2       INSN_ISA2
+#define       ISA_MIPS3       INSN_ISA3
+#define       ISA_MIPS4       INSN_ISA4
+#define       ISA_MIPS5       INSN_ISA5
 
-#define       ISA_MIPS32      (ISA_MIPS2 | INSN_ISA32)
-#define       ISA_MIPS64      (ISA_MIPS5 | INSN_ISA32 | INSN_ISA64)
+#define       ISA_MIPS32      INSN_ISA32
+#define       ISA_MIPS64      INSN_ISA64
 
-#define       ISA_MIPS32R2    (ISA_MIPS32 | INSN_ISA32R2)
-#define       ISA_MIPS64R2    (ISA_MIPS64 | INSN_ISA32R2 | INSN_ISA64R2)
+#define       ISA_MIPS32R2    INSN_ISA32R2
+#define       ISA_MIPS64R2    INSN_ISA64R2
 
 
 /* CPU defines, use instead of hardcoding processor number. Keep this
@@ -576,6 +610,9 @@
 #define CPU_MIPS64      64
 #define CPU_MIPS64R2	65
 #define CPU_SB1         12310201        /* octal 'SB', 01.  */
+#define CPU_OCTEON	6402
+#define CPU_LOONGSON_2E 3001
+#define CPU_LOONGSON_2F 3002
 
 /* Test for membership in an ISA including chip specific ISAs.  INSN
    is pointer to an element of the opcode table; ISA is the specified
@@ -583,7 +620,12 @@
    test, or zero if no CPU specific ISA test is desired.  */
 
 #define OPCODE_IS_MEMBER(insn, isa, cpu)				\
-    (((insn)->membership & isa) != 0					\
+    (((isa & INSN_ISA_MASK) != 0                                        \
+      && ((insn)->membership & INSN_ISA_MASK) != 0                      \
+      && ((mips_isa_table [(isa & INSN_ISA_MASK) - 1] >>                \
+           (((insn)->membership & INSN_ISA_MASK) - 1)) & 1) != 0)       \
+     || ((isa & ~INSN_ISA_MASK)                                         \
+          & ((insn)->membership & ~INSN_ISA_MASK)) != 0                 \
      || (cpu == CPU_R4650 && ((insn)->membership & INSN_4650) != 0)	\
      || (cpu == CPU_RM7000 && ((insn)->membership & INSN_4650) != 0)	\
      || (cpu == CPU_RM9000 && ((insn)->membership & INSN_4650) != 0)	\
@@ -593,10 +635,15 @@
      || ((cpu == CPU_R10000 || cpu == CPU_R12000)			\
 	 && ((insn)->membership & INSN_10000) != 0)			\
      || (cpu == CPU_SB1 && ((insn)->membership & INSN_SB1) != 0)	\
+     || (cpu == CPU_OCTEON && ((insn)->membership & INSN_OCTEON) != 0)  \
      || (cpu == CPU_R4111 && ((insn)->membership & INSN_4111) != 0)	\
      || (cpu == CPU_VR4120 && ((insn)->membership & INSN_4120) != 0)	\
      || (cpu == CPU_VR5400 && ((insn)->membership & INSN_5400) != 0)	\
      || (cpu == CPU_VR5500 && ((insn)->membership & INSN_5500) != 0)	\
+     || (cpu == CPU_LOONGSON_2E                                         \
+         && ((insn)->membership & INSN_LOONGSON_2E) != 0)               \
+     || (cpu == CPU_LOONGSON_2F                                         \
+         && ((insn)->membership & INSN_LOONGSON_2F) != 0)               \
      || 0)	/* Please keep this term for easier source merging.  */
 
 /* This is a list of macro expanded instructions.
diff -Nur binutils-2.18.50.0.1/include/opcode/ppc.h binutils-stable/include/opcode/ppc.h
--- binutils-2.18.50.0.1/include/opcode/ppc.h	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/include/opcode/ppc.h	2007-09-25 15:41:46.000000000 +0200
@@ -146,9 +146,6 @@
 /* Opcode is only supported by PowerPC Cell family.  */
 #define PPC_OPCODE_CELL		 0x8000000
 
-/* Opcode is supported by CPUs with paired singles support.  */
-#define PPC_OPCODE_PPCPS	 0x10000000
-
 /* A macro to extract the major opcode from an instruction.  */
 #define PPC_OP(i) (((i) >> 26) & 0x3f)
 
diff -Nur binutils-2.18.50.0.1/ld/ChangeLog binutils-stable/ld/ChangeLog
--- binutils-2.18.50.0.1/ld/ChangeLog	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/ChangeLog	2007-09-25 15:41:03.000000000 +0200
@@ -1,30 +1,3 @@
-2007-09-08  Alan Modra  <amodra@bigpond.net.au>
-
-	* ldwrite.c (build_link_order <lang_padding_statement_enum>): Correct
-	condition under which we build a bfd_data_link_order.
-
-2007-08-31  Tristan Gingold  <gingold@adacore.com>
-
-	* ldlang.c (lang_map): Increment lang_statement_iteration so that
-	DEFINED() expressions are correctly computed.
-
-2007-08-31  Alan Modra  <amodra@bigpond.net.au>
-
-	* ldlang.c (lang_record_phdrs): Give a fatal error if no sections
-	assigned to phdrs.  Avoid multiple forward scans for a section
-	with phdr assignment.
-
-2007-08-28  Mark Shinwell  <shinwell@codesourcery.com>
-            Joseph Myers  <joseph@codesourcery.com>
-
-	* ldlang.c (sort_sections_by_lma): Sort by internal id after lma
-	for stable sort.
-
-2007-08-28  Robert Sebastian Gerus  <arachnist@gmail.com>
-
-	* configure.host: Add support for i[3-7]86-*-dragonfly*.
-	* configure.tgt: Likewise.
-
 2007-08-18  Alan Modra  <amodra@bigpond.net.au>
 
 	* ld.texinfo (Input Section Basics): Correct EXCLUDE_FILE example.
diff -Nur binutils-2.18.50.0.1/ld/config.in binutils-stable/ld/config.in
--- binutils-2.18.50.0.1/ld/config.in	2007-08-01 15:11:51.000000000 +0200
+++ binutils-stable/ld/config.in	2007-09-25 15:41:03.000000000 +0200
@@ -4,6 +4,9 @@
    language is requested. */
 #undef ENABLE_NLS
 
+/* Define to warn for use of native system library directories */
+#undef ENABLE_POISON_SYSTEM_DIRECTORIES
+
 /* Additional extension a shared object might have. */
 #undef EXTRA_SHLIB_EXTENSION
 
diff -Nur binutils-2.18.50.0.1/ld/configure binutils-stable/ld/configure
--- binutils-2.18.50.0.1/ld/configure	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/configure	2007-09-25 15:41:03.000000000 +0200
@@ -1,3 +1,4 @@
+
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.59.
@@ -458,7 +459,7 @@
 # include <unistd.h>
 #endif"
 
-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP use_sysroot TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE WARN_CFLAGS NO_WERROR USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE YACC LEX LEXLIB LEX_OUTPUT_ROOT MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE HDEFINES HOSTING_CRT0 HOSTING_LIBS NATIVE_LIB_DIRS STRINGIFY EMUL EMULATION_OFILES EMUL_EXTRA_OFILES LIB_PATH EMULATION_LIBPATH TESTBFDLIB datarootdir docdir htmldir LIBOBJS LTLIBOBJS'
+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE LIBTOOL SED EGREP FGREP GREP LD DUMPBIN ac_ct_DUMPBIN NM LN_S AR ac_ct_AR RANLIB ac_ct_RANLIB lt_ECHO CPP use_sysroot TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE WARN_CFLAGS NO_WERROR USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT MKINSTALLDIRS MSGFMT MSGMERGE YACC LEX LEXLIB LEX_OUTPUT_ROOT MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT GENINSRC_NEVER_TRUE GENINSRC_NEVER_FALSE HDEFINES HOSTING_CRT0 HOSTING_LIBS NATIVE_LIB_DIRS STRINGIFY EMUL EMULATION_OFILES EMUL_EXTRA_OFILES LIB_PATH EMULATION_LIBPATH TESTBFDLIB datarootdir docdir htmldir pdfdir LIBOBJS LTLIBOBJS'
 ac_subst_files='TDIRS'
 
 # Initialize some variables set by options.
@@ -1010,6 +1011,8 @@
   --disable-libtool-lock  avoid locking (might break parallel builds)
   --enable-targets        alternative target configurations
   --enable-64-bit-bfd     64-bit support (on hosts with narrower word sizes)
+  --enable-poison-system-directories
+                          warn for use of native system library directories
   --enable-werror         treat compile warnings as errors
   --enable-build-warnings enable build-time compiler warnings
   --disable-nls           do not use Native Language Support
@@ -9605,6 +9608,21 @@
 
 
 
+# Check whether --enable-poison-system-directories or --disable-poison-system-directories was given.
+if test "${enable_poison_system_directories+set}" = set; then
+  enableval="$enable_poison_system_directories"
+
+else
+  enable_poison_system_directories=no
+fi;
+if test "x${enable_poison_system_directories}" = "xyes"; then
+
+cat >>confdefs.h <<\_ACEOF
+#define ENABLE_POISON_SYSTEM_DIRECTORIES 1
+_ACEOF
+
+fi
+
 
 GCC_WARN_CFLAGS="-W -Wall -Wstrict-prototypes -Wmissing-prototypes"
 
@@ -12858,6 +12876,7 @@
 
 
 
+
                     ac_config_files="$ac_config_files Makefile po/Makefile.in:po/Make-in"
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -13870,6 +13889,7 @@
 s,@datarootdir@,$datarootdir,;t t
 s,@docdir@,$docdir,;t t
 s,@htmldir@,$htmldir,;t t
+s,@pdfdir@,$pdfdir,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
 /@TDIRS@/r $TDIRS
diff -Nur binutils-2.18.50.0.1/ld/configure.host binutils-stable/ld/configure.host
--- binutils-2.18.50.0.1/ld/configure.host	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/configure.host	2007-09-25 15:41:03.000000000 +0200
@@ -18,7 +18,7 @@
 
 case "${host}" in
 
-*-*-freebsd* | *-*-kfreebsd*-gnu | *-*-dragonfly*)
+*-*-freebsd* | *-*-kfreebsd*-gnu)
   HOSTING_CRT0='-dynamic-linker `[ -f \`${CC} --print-prog-name=ld-elf.so.1\` ] || echo /usr/libexec/``${CC} --print-prog-name=ld-elf.so.1` `${CC} --print-file-name=crt1.o` `${CC} --print-file-name=crti.o` `${CC} --print-file-name=crtbegin.o`'
   HOSTING_LIBS='-L`dirname \`${CC} --print-file-name=libc.so\`` '"$HOSTING_LIBS"' `if [ -f ../gcc/crtend.o ]; then echo ../gcc/crtend.o; else ${CC} --print-file-name=crtend.o; fi` `${CC} --print-file-name=crtn.o`'
   ;;
@@ -233,7 +233,7 @@
   HOSTING_CRT0=`echo "$HOSTING_CRT0" | sed -e "s,\\\`specs.*\"\\\`,/lib64/ld-linux-x86-64.so.2,"`
   ;;
 
-*-*-freebsd* | *-*-kfreebsd*-gnu | *-*-dragonfly*)
+*-*-freebsd* | *-*-kfreebsd*-gnu)
   ;;
 
 *-*-linux*)
diff -Nur binutils-2.18.50.0.1/ld/configure.in binutils-stable/ld/configure.in
--- binutils-2.18.50.0.1/ld/configure.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/configure.in	2007-09-25 15:41:03.000000000 +0200
@@ -69,6 +69,16 @@
 AC_SUBST(TARGET_SYSTEM_ROOT)
 AC_SUBST(TARGET_SYSTEM_ROOT_DEFINE)
 
+AC_ARG_ENABLE([poison-system-directories],
+	      AS_HELP_STRING([--enable-poison-system-directories],
+			     [warn for use of native system library directories]),,
+	      [enable_poison_system_directories=no])
+if test "x${enable_poison_system_directories}" = "xyes"; then
+  AC_DEFINE([ENABLE_POISON_SYSTEM_DIRECTORIES],
+	    [1],
+	    [Define to warn for use of native system library directories])
+fi
+
 AM_BINUTILS_WARNINGS
 
 AM_CONFIG_HEADER(config.h:config.in)
@@ -270,9 +280,10 @@
    [Additional extension a shared object might have.])
 fi
 
-dnl Required by html and install-html
+dnl Required by html, pdf, install-pdf and install-html
 AC_SUBST(datarootdir)
 AC_SUBST(docdir)
 AC_SUBST(htmldir)
+AC_SUBST(pdfdir)
 
 AC_OUTPUT(Makefile po/Makefile.in:po/Make-in)
diff -Nur binutils-2.18.50.0.1/ld/configure.tgt binutils-stable/ld/configure.tgt
--- binutils-2.18.50.0.1/ld/configure.tgt	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/configure.tgt	2007-09-25 15:41:03.000000000 +0200
@@ -237,7 +237,7 @@
 i[3-7]86-*-kaos*)	targ_emul=elf_i386 ;;
 i[3-7]86-*-freebsdaout* | i[3-7]86-*-freebsd[12].* | i[3-7]86-*-freebsd[12])
 			targ_emul=i386bsd ;;
-i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu | i[3-7]86-*-dragonfly*)
+i[3-7]86-*-freebsd* | i[3-7]86-*-kfreebsd*-gnu)
 		        targ_emul=elf_i386_fbsd
 			targ_extra_emuls="elf_i386 i386bsd" ;;
 x86_64-*-freebsd* | x86_64-*-kfreebsd*-gnu)
@@ -382,6 +382,10 @@
 mips*-*-vxworks*)	targ_emul=elf32ebmipvxworks
 		        targ_extra_emuls="elf32elmipvxworks" ;;
 mips*-*-windiss)	targ_emul=elf32mipswindiss ;;
+mips64el-sicortex-linux-gnu)
+			targ_emul=elf64ltsmip
+			targ_extra_emuls="elf32ltsmipn32 elf32btsmipn32 elf32ltsmip elf32btsmip elf64btsmip"
+			targ_extra_libpath=$targ_extra_emuls ;;
 mips64*el-*-linux-*)	targ_emul=elf32ltsmipn32
 			targ_extra_emuls="elf32btsmipn32 elf32ltsmip elf32btsmip elf64ltsmip elf64btsmip"
 			targ_extra_libpath=$targ_extra_emuls ;;
@@ -640,7 +644,7 @@
 NATIVE_LIB_DIRS='/usr/local/lib /lib /usr/lib'
 case "${target}" in
 
-*-*-freebsd* | *-*-dragonfly*)
+*-*-freebsd*)
   NATIVE_LIB_DIRS='/lib /usr/lib /usr/local/lib'
   ;;
 
@@ -680,7 +684,7 @@
 *-*-linux*)
   ;;
 
-*-*-freebsd* | *-*-dragonfly*)
+*-*-freebsd*)
   ;;
 
 *-*-netbsd*)
diff -Nur binutils-2.18.50.0.1/ld/emulparams/elf64_ia64.sh binutils-stable/ld/emulparams/elf64_ia64.sh
--- binutils-2.18.50.0.1/ld/emulparams/elf64_ia64.sh	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/emulparams/elf64_ia64.sh	2007-09-25 15:41:03.000000000 +0200
@@ -37,4 +37,3 @@
 # .dtors.  They have to be next to .sbss/.sbss2/.sdata/.sdata2.
 SMALL_DATA_CTOR=" "
 SMALL_DATA_DTOR=" "
-SHARABLE_SECTIONS=yes
diff -Nur binutils-2.18.50.0.1/ld/emulparams/elf_i386.sh binutils-stable/ld/emulparams/elf_i386.sh
--- binutils-2.18.50.0.1/ld/emulparams/elf_i386.sh	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/emulparams/elf_i386.sh	2007-09-25 15:41:03.000000000 +0200
@@ -11,4 +11,3 @@
 GENERATE_PIE_SCRIPT=yes
 NO_SMALL_DATA=yes
 SEPARATE_GOTPLT=12
-SHARABLE_SECTIONS=yes
diff -Nur binutils-2.18.50.0.1/ld/emulparams/elf_x86_64.sh binutils-stable/ld/emulparams/elf_x86_64.sh
--- binutils-2.18.50.0.1/ld/emulparams/elf_x86_64.sh	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/emulparams/elf_x86_64.sh	2007-09-25 15:41:03.000000000 +0200
@@ -13,7 +13,6 @@
 NO_SMALL_DATA=yes
 LARGE_SECTIONS=yes
 SEPARATE_GOTPLT=24
-SHARABLE_SECTIONS=yes
 
 if [ "x${host}" = "x${target}" ]; then
   case " $EMULATION_LIBPATH " in
diff -Nur binutils-2.18.50.0.1/ld/emultempl/elf32.em binutils-stable/ld/emultempl/elf32.em
--- binutils-2.18.50.0.1/ld/emultempl/elf32.em	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/emultempl/elf32.em	2007-09-25 15:40:26.000000000 +0200
@@ -101,7 +101,6 @@
   ldfile_set_output_arch ("${OUTPUT_ARCH}", bfd_arch_`echo ${ARCH} | sed -e 's/:.*//'`);
   config.dynamic_link = ${DYNAMIC_LINK-TRUE};
   config.has_shared = `if test -n "$GENERATE_SHLIB_SCRIPT" ; then echo TRUE ; else echo FALSE ; fi`;
-  link_info.sharable_sections = `if test "$SHARABLE_SECTIONS" = "yes" ; then echo TRUE ; else echo FALSE ; fi`;
 }
 
 EOF
@@ -1675,12 +1674,6 @@
 
   secname = bfd_get_section_name (s->owner, s);
 
-  /* Orphaned sharable sections won't have correct page
-     requirements.  */
-  if (elf_section_flags (s) & SHF_GNU_SHARABLE)
-    einfo ("%F%P: unable to place orphaned sharable section %A (%B)\n",
-	   s, s->owner);
-
   if (! link_info.relocatable
       && link_info.combreloc
       && (s->flags & SEC_ALLOC))
diff -Nur binutils-2.18.50.0.1/ld/ldexp.c binutils-stable/ld/ldexp.c
--- binutils-2.18.50.0.1/ld/ldexp.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/ldexp.c	2007-09-25 15:41:03.000000000 +0200
@@ -390,7 +390,6 @@
 	      break;
 
 	    case DATA_SEGMENT_ALIGN:
-	      expld.dataseg.relro = exp_dataseg_relro_start;
 	      if (expld.phase != lang_first_phase_enum
 		  && expld.section == bfd_abs_section_ptr
 		  && (expld.dataseg.phase == exp_dataseg_none
@@ -426,7 +425,6 @@
 	      break;
 
 	    case DATA_SEGMENT_RELRO_END:
-	      expld.dataseg.relro = exp_dataseg_relro_end;
 	      if (expld.phase != lang_first_phase_enum
 		  && (expld.dataseg.phase == exp_dataseg_align_seen
 		      || expld.dataseg.phase == exp_dataseg_adjust
@@ -807,6 +805,19 @@
 	      h->u.def.section = expld.result.section;
 	      if (tree->type.node_class == etree_provide)
 		tree->type.node_class = etree_provided;
+
+	      /* Copy the symbol type if this is a simple assignment of
+	         one symbol to annother.  */
+	      if (tree->assign.src->type.node_class == etree_name)
+		{
+		  struct bfd_link_hash_entry *hsrc;
+
+		  hsrc = bfd_link_hash_lookup (link_info.hash,
+					       tree->assign.src->name.name,
+					       FALSE, FALSE, TRUE);
+		  if (hsrc)
+		    bfd_copy_link_hash_symbol_type (output_bfd, h, hsrc);
+		}
 	    }
 	}
       break;
diff -Nur binutils-2.18.50.0.1/ld/ldexp.h binutils-stable/ld/ldexp.h
--- binutils-2.18.50.0.1/ld/ldexp.h	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/ldexp.h	2007-09-25 15:41:03.000000000 +0200
@@ -98,8 +98,6 @@
   lang_final_phase_enum
 } lang_phase_type;
 
-union lang_statement_union;
-
 struct ldexp_control {
   /* Modify expression evaluation depending on this.  */
   lang_phase_type phase;
@@ -127,15 +125,6 @@
     } phase;
 
     bfd_vma base, min_base, relro_end, end, pagesize, maxpagesize;
-
-    enum {
-      exp_dataseg_relro_none,
-      exp_dataseg_relro_start,
-      exp_dataseg_relro_end,
-    } relro;
-
-    union lang_statement_union *relro_start_stat;
-    union lang_statement_union *relro_end_stat;
   } dataseg;
 };
 
diff -Nur binutils-2.18.50.0.1/ld/ldfile.c binutils-stable/ld/ldfile.c
--- binutils-2.18.50.0.1/ld/ldfile.c	2007-08-01 15:11:51.000000000 +0200
+++ binutils-stable/ld/ldfile.c	2007-09-25 15:41:03.000000000 +0200
@@ -120,6 +120,16 @@
     {
       new->name = xstrdup (name);
       new->sysrooted = is_sysrooted_pathname (name, FALSE);
+
+#ifdef ENABLE_POISON_SYSTEM_DIRECTORIES
+      if (command_line.poison_system_directories
+	  && ((!strncmp (name, "/lib", 4))
+	      || (!strncmp (name, "/usr/lib", 8))
+	      || (!strncmp (name, "/usr/local/lib", 14))
+	      || (!strncmp (name, "/usr/X11R6/lib", 14))))
+	einfo (_("%P: warning: library search path \"%s\" is unsafe for "
+		 "cross-compilation\n"), name);
+#endif
     }
 }
 
diff -Nur binutils-2.18.50.0.1/ld/ld.h binutils-stable/ld/ld.h
--- binutils-2.18.50.0.1/ld/ld.h	2007-08-01 15:11:51.000000000 +0200
+++ binutils-stable/ld/ld.h	2007-09-25 15:41:03.000000000 +0200
@@ -176,6 +176,10 @@
      input files.  */
   bfd_boolean accept_unknown_input_arch;
 
+  /* If TRUE (the default) warn for uses of system directories when
+     cross linking.  */
+  bfd_boolean poison_system_directories;
+
   /* Big or little endian as set on command line.  */
   enum { ENDIAN_UNSET = 0, ENDIAN_BIG, ENDIAN_LITTLE } endian;
 
diff -Nur binutils-2.18.50.0.1/ld/ldlang.c binutils-stable/ld/ldlang.c
--- binutils-2.18.50.0.1/ld/ldlang.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/ldlang.c	2007-09-25 15:41:03.000000000 +0200
@@ -1811,7 +1811,6 @@
 	bfd_map_over_sections (p, init_map_userdata, 0);
       bfd_link_hash_traverse (link_info.hash, sort_def_symbol, 0);
     }
-  lang_statement_iteration ++;
   print_statements ();
 }
 
@@ -3540,7 +3539,7 @@
 	      value = h->u.def.value;
 
 	      if (expld.result.section)
-		value += expld.result.section->vma;
+	      value += expld.result.section->vma;
 
 	      minfo ("[0x%V]", value);
 	    }
@@ -4120,7 +4119,8 @@
 
 /* Check to see if any allocated sections overlap with other allocated
    sections.  This can happen if a linker script specifies the output
-   section addresses of the two sections.  */
+   section addresses of the two sections.  Also check whether any memory
+   region has overflowed.  */
 
 static void
 lang_check_section_addresses (void)
@@ -4133,6 +4133,7 @@
   bfd_vma os_start;
   bfd_vma os_end;
   bfd_size_type amt;
+  lang_memory_region_type *m;
 
   if (bfd_count_sections (output_bfd) <= 1)
     return;
@@ -4181,6 +4182,20 @@
     }
 
   free (sections);
+
+  /* If any memory region has overflowed, report by how much.
+     We do not issue this diagnostic for regions that had sections
+     explicitly placed outside their bounds; os_region_check's
+     diagnostics are adequate for that case.
+
+     FIXME: It is conceivable that m->current - (m->origin + m->length)
+     might overflow a 32-bit integer.  There is, alas, no way to print
+     a bfd_vma quantity in decimal.  */
+  for (m = lang_memory_region_list; m; m = m->next)
+    if (m->had_full_message)
+      einfo (_("%X%P: region %s overflowed by %ld bytes\n"),
+	     m->name, (long)(m->current - (m->origin + m->length)));
+
 }
 
 /* Make sure the new address is within the region.  We explicitly permit the
@@ -4208,15 +4223,15 @@
 		 os->bfd_section->name,
 		 region->name);
 	}
-      else
+      else if (!region->had_full_message)
 	{
-	  einfo (_("%X%P: region %s is full (%B section %s)\n"),
-		 region->name,
+	  region->had_full_message = TRUE;
+
+	  einfo (_("%X%P: %B section %s will not fit in region %s\n"),
 		 os->bfd_section->owner,
-		 os->bfd_section->name);
+		 os->bfd_section->name,
+		 region->name);
 	}
-      /* Reset the region pointer.  */
-      region->current = region->origin;
     }
 }
 
@@ -4636,32 +4651,10 @@
 	    bfd_vma newdot = dot;
 	    etree_type *tree = s->assignment_statement.exp;
 
-	    expld.dataseg.relro = exp_dataseg_relro_none;
-
 	    exp_fold_tree (tree,
 			   output_section_statement->bfd_section,
 			   &newdot);
 
-	    if (expld.dataseg.relro == exp_dataseg_relro_start)
-	      {
-		if (!expld.dataseg.relro_start_stat)
-		  expld.dataseg.relro_start_stat = s;
-		else
-		  {
-		    ASSERT (expld.dataseg.relro_start_stat == s);
-		  }
-	      }
-	    else if (expld.dataseg.relro == exp_dataseg_relro_end)
-	      {
-		if (!expld.dataseg.relro_end_stat)
-		  expld.dataseg.relro_end_stat = s;
-		else
-		  {
-		    ASSERT (expld.dataseg.relro_end_stat == s);
-		  }
-	      }
-	    expld.dataseg.relro = exp_dataseg_relro_none;
-
 	    /* This symbol is relative to this section.  */
 	    if ((tree->type.node_class == etree_provided
 		 || tree->type.node_class == etree_assign)
@@ -5687,81 +5680,6 @@
     bfd_gc_sections (output_bfd, &link_info);
 }
 
-/* Worker for lang_find_relro_sections_1.  */
-
-static void
-find_relro_section_callback (lang_wild_statement_type *ptr ATTRIBUTE_UNUSED,
-			     struct wildcard_list *sec ATTRIBUTE_UNUSED,
-			     asection *section,
-			     lang_input_statement_type *file ATTRIBUTE_UNUSED,
-			     void *data)
-{
-  /* Discarded, excluded and ignored sections effectively have zero
-     size.  */
-  if (section->output_section != NULL
-      && section->output_section->owner == output_bfd
-      && (section->output_section->flags & SEC_EXCLUDE) == 0
-      && !IGNORE_SECTION (section)
-      && section->size != 0)
-    {
-      bfd_boolean *has_relro_section = (bfd_boolean *) data;
-      *has_relro_section = TRUE;
-    }
-}
-
-/* Iterate over sections for relro sections.  */
-
-static void
-lang_find_relro_sections_1 (lang_statement_union_type *s,
-			    bfd_boolean *has_relro_section)
-{
-  if (*has_relro_section)
-    return;
-
-  for (; s != NULL; s = s->header.next)
-    {
-      if (s == expld.dataseg.relro_end_stat)
-	break;
-
-      switch (s->header.type)
-	{
-	case lang_wild_statement_enum:
-	  walk_wild (&s->wild_statement,
-		     find_relro_section_callback,
-		     has_relro_section);
-	  break;
-	case lang_constructors_statement_enum:
-	  lang_find_relro_sections_1 (constructor_list.head,
-				      has_relro_section);
-	  break;
-	case lang_output_section_statement_enum:
-	  lang_find_relro_sections_1 (s->output_section_statement.children.head,
-				      has_relro_section);
-	  break;
-	case lang_group_statement_enum:
-	  lang_find_relro_sections_1 (s->group_statement.children.head,
-				      has_relro_section);
-	  break;
-	default:
-	  break;
-	}
-    }
-}
-
-static void
-lang_find_relro_sections (void)
-{
-  bfd_boolean has_relro_section = FALSE;
-
-  /* Check all sections in the link script.  */
-
-  lang_find_relro_sections_1 (expld.dataseg.relro_start_stat,
-			      &has_relro_section);
-
-  if (!has_relro_section)
-    link_info.relro = FALSE;
-}
-
 /* Relax all sections until bfd_relax_section gives up.  */
 
 static void
@@ -5889,10 +5807,6 @@
      section positions, since they will affect SIZEOF_HEADERS.  */
   lang_record_phdrs ();
 
-  /* Check relro sections.  */
-  if (link_info.relro && ! link_info.relocatable)
-    lang_find_relro_sections ();
-
   /* Size up the sections.  */
   lang_size_sections (NULL, !command_line.relax);
 
@@ -6365,7 +6279,9 @@
 		  || (os->bfd_section->flags & SEC_ALLOC) == 0)
 		continue;
 
-	      if (last == NULL)
+	      if (last)
+		pl = last;
+	      else
 		{
 		  lang_output_section_statement_type * tmp_os;
 
@@ -6379,14 +6295,9 @@
 		     http://sourceware.org/ml/binutils/2007-02/msg00291.html  */
 		  for (tmp_os = os; tmp_os; tmp_os = tmp_os->next)
 		    if (tmp_os->phdrs)
-		      {
-			last = tmp_os->phdrs;
-			break;
-		      }
-		  if (last == NULL)
-		    einfo (_("%F%P: no sections assigned to phdrs\n"));
+		      break;
+		  pl = tmp_os->phdrs;
 		}
-	      pl = last;
 	    }
 
 	  if (os->bfd_section == NULL)
diff -Nur binutils-2.18.50.0.1/ld/ldmain.c binutils-stable/ld/ldmain.c
--- binutils-2.18.50.0.1/ld/ldmain.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/ldmain.c	2007-09-25 15:41:03.000000000 +0200
@@ -103,9 +103,6 @@
 /* TRUE if we should demangle symbol names.  */
 bfd_boolean demangling;
 
-/* How to report unresolved symbols.  */
-enum report_method how_to_report_unresolved_symbols = RM_GENERATE_ERROR;
-
 args_type command_line;
 
 ld_config_type config;
@@ -256,11 +253,7 @@
   command_line.warn_mismatch = TRUE;
   command_line.warn_search_mismatch = TRUE;
   command_line.check_section_addresses = TRUE;
-
-  if (getenv ("LD_SYMBOLIC") != NULL)
-    command_line.symbolic = symbolic;
-  else if (getenv ("LD_SYMBOLIC_FUNCTIONS") != NULL)
-    command_line.symbolic = symbolic_functions;
+  command_line.poison_system_directories = TRUE;
 
   /* We initialize DEMANGLING based on the environment variable
      COLLECT_NO_DEMANGLE.  The gcc collect2 program will demangle the
@@ -283,7 +276,6 @@
   link_info.relax_pass = 1;
   link_info.pei386_auto_import = -1;
   link_info.spare_dynamic_tags = 5;
-  link_info.sharable_sections = FALSE;
 
   ldfile_add_arch ("");
   emulation = get_emulation (argc, argv);
@@ -357,27 +349,6 @@
   if (! link_info.shared || link_info.pie)
     link_info.executable = TRUE;
 
-  /* When creating a shared library, the default behaviour is to
-     ignore any unresolved references.  */
-
-  if (link_info.unresolved_syms_in_objects == RM_NOT_YET_SET)
-    {
-      if (link_info.shared && !link_info.pie)
-	link_info.unresolved_syms_in_objects = RM_IGNORE;
-      else
-	link_info.unresolved_syms_in_objects
-	  = how_to_report_unresolved_symbols;
-    }
-
-  if (link_info.unresolved_syms_in_shared_libs == RM_NOT_YET_SET)
-    {
-      if (link_info.shared && !link_info.pie)
-	link_info.unresolved_syms_in_shared_libs = RM_IGNORE;
-      else
-	link_info.unresolved_syms_in_shared_libs
-	  = how_to_report_unresolved_symbols;
-    }
-
   /* Treat ld -r -s as ld -r -S -x (i.e., strip all local symbols).  I
      don't see how else this can be handled, since in this case we
      must preserve all externally visible symbols.  */
diff -Nur binutils-2.18.50.0.1/ld/ldmain.h binutils-stable/ld/ldmain.h
--- binutils-2.18.50.0.1/ld/ldmain.h	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/ldmain.h	2007-09-25 15:41:03.000000000 +0200
@@ -35,7 +35,6 @@
 extern bfd_boolean as_needed;
 extern bfd_boolean add_needed;
 extern bfd_boolean demangling;
-extern enum report_method how_to_report_unresolved_symbols;
 extern int g_switch_value;
 extern const char *output_filename;
 extern struct bfd_link_info link_info;
diff -Nur binutils-2.18.50.0.1/ld/ld.texinfo binutils-stable/ld/ld.texinfo
--- binutils-2.18.50.0.1/ld/ld.texinfo	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/ld.texinfo	2007-09-25 15:41:03.000000000 +0200
@@ -1142,21 +1142,14 @@
 definition within the shared library, if any.  Normally, it is possible
 for a program linked against a shared library to override the definition
 within the shared library.  This option is only meaningful on ELF
-platforms which support shared libraries.  If @option{-Bsymbolic} is not
-used when linking a shared library, the linker will also turn on this
-option if the environment variable @code{LD_SYMBOLIC} is set.
+platforms which support shared libraries.
 
 @kindex -Bsymbolic-functions
 @item -Bsymbolic-functions
 When creating a shared library, bind references to global function
 symbols to the definition within the shared library, if any.
 This option is only meaningful on ELF platforms which support shared
-libraries.  If @option{-Bsymbolic-functions} is not used when linking a
-shared library, the linker will also turn on this option if the
-environment variable @code{LD_SYMBOLIC_FUNCTIONS} is set.  When
-both environment variables @code{LD_SYMBOLIC} and
-@code{LD_SYMBOLIC_FUNCTIONS} are set, @code{LD_SYMBOLIC} will take
-precedent.
+libraries.
 
 @kindex --dynamic-list=@var{dynamic-list-file}
 @item --dynamic-list=@var{dynamic-list-file}
@@ -2001,6 +1994,13 @@
 
 Passing @code{none} for @var{style} disables the setting from any
 @code{--build-id} options earlier on the command line.
+
+@kindex --no-poison-system-directories
+@item --no-poison-system-directories
+Do not warn for @option{-L} options using system directories such as
+@file{/usr/lib} when cross linking.  This option is intended for use
+in chroot environments when such directories contain the correct
+libraries for the target system rather than the host.
 @end table
 
 @c man end
@@ -5567,12 +5567,12 @@
 full-compliance floating-point mode: you do not need this workaround if
 you are using "runfast" mode. Please contact ARM for further details.
 
-If you know you are using buggy VFP11 hardware, you can
-enable this workaround by specifying the linker option
-@samp{--vfp-denorm-fix=scalar} if you are using the VFP11 scalar
-mode only, or @samp{--vfp-denorm-fix=vector} if you are using
-vector mode (the latter also works for scalar code). The default is
-@samp{--vfp-denorm-fix=none}.
+This workaround is enabled for scalar code by default for
+pre-ARMv7 architectures, but disabled by default for later
+architectures. If you know you are not using buggy VFP11 hardware,
+you can disable the workaround by specifying the linker option
+@samp{--vfp-denorm-fix=none}. If you are using VFP vector mode, you
+should specify @samp{--vfp-denorm-fix=vector}.
 
 If the workaround is enabled, instructions are scanned for
 potentially-troublesome sequences, and a veneer is created for each
diff -Nur binutils-2.18.50.0.1/ld/ldwrite.c binutils-stable/ld/ldwrite.c
--- binutils-2.18.50.0.1/ld/ldwrite.c	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/ldwrite.c	2007-09-25 15:41:03.000000000 +0200
@@ -270,10 +270,7 @@
 	output_section = statement->padding_statement.output_section;
 	ASSERT (statement->padding_statement.output_section->owner
 		== output_bfd);
-	if (((output_section->flags & SEC_HAS_CONTENTS) != 0
-	     || ((output_section->flags & SEC_LOAD) != 0
-		 && (output_section->flags & SEC_THREAD_LOCAL)))
-	    && (output_section->flags & SEC_NEVER_LOAD) == 0)
+	if ((output_section->flags & SEC_HAS_CONTENTS) != 0)
 	  {
 	    link_order = bfd_new_link_order (output_bfd, output_section);
 	    link_order->type = bfd_data_link_order;
diff -Nur binutils-2.18.50.0.1/ld/lexsup.c binutils-stable/ld/lexsup.c
--- binutils-2.18.50.0.1/ld/lexsup.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/lexsup.c	2007-09-25 15:41:03.000000000 +0200
@@ -162,7 +162,8 @@
   OPTION_ERROR_UNRESOLVED_SYMBOLS,
   OPTION_WARN_SHARED_TEXTREL,
   OPTION_REDUCE_MEMORY_OVERHEADS,
-  OPTION_DEFAULT_SCRIPT
+  OPTION_DEFAULT_SCRIPT,
+  OPTION_NO_POISON_SYSTEM_DIRECTORIES
 };
 
 /* The long options.  This structure is used for both the option
@@ -557,6 +558,10 @@
     TWO_DASHES },
   { {"wrap", required_argument, NULL, OPTION_WRAP},
     '\0', N_("SYMBOL"), N_("Use wrapper functions for SYMBOL"), TWO_DASHES },
+  { {"no-poison-system-directories", no_argument, NULL,
+     OPTION_NO_POISON_SYSTEM_DIRECTORIES},
+    '\0', NULL, N_("Do not warn for -L options using system directories"),
+    TWO_DASHES },
 };
 
 #define OPTION_COUNT ARRAY_SIZE (ld_options)
@@ -572,6 +577,7 @@
   struct option *longopts;
   struct option *really_longopts;
   int last_optind;
+  enum report_method how_to_report_unresolved_symbols = RM_GENERATE_ERROR;
 
   shortopts = xmalloc (OPTION_COUNT * 3 + 2);
   longopts = xmalloc (sizeof (*longopts) * (OPTION_COUNT + 1));
@@ -1117,7 +1123,12 @@
 	  if (config.has_shared)
 	    {
 	      link_info.shared = TRUE;
-	      link_info.pie = FALSE;
+	      /* When creating a shared library, the default
+		 behaviour is to ignore any unresolved references.  */
+	      if (link_info.unresolved_syms_in_objects == RM_NOT_YET_SET)
+		link_info.unresolved_syms_in_objects = RM_IGNORE;
+	      if (link_info.unresolved_syms_in_shared_libs == RM_NOT_YET_SET)
+		link_info.unresolved_syms_in_shared_libs = RM_IGNORE;
 	    }
 	  else
 	    einfo (_("%P%F: -shared not supported\n"));
@@ -1432,6 +1443,10 @@
               einfo (_("%P%X: --hash-size needs a numeric argument\n"));
           }
           break;
+
+	case OPTION_NO_POISON_SYSTEM_DIRECTORIES:
+	  command_line.poison_system_directories = FALSE;
+	  break;
 	}
     }
 
@@ -1443,6 +1458,14 @@
       set_default_dirlist (default_dirlist);
       free (default_dirlist);
     }
+
+  if (link_info.unresolved_syms_in_objects == RM_NOT_YET_SET)
+    /* FIXME: Should we allow emulations a chance to set this ?  */
+    link_info.unresolved_syms_in_objects = how_to_report_unresolved_symbols;
+
+  if (link_info.unresolved_syms_in_shared_libs == RM_NOT_YET_SET)
+    /* FIXME: Should we allow emulations a chance to set this ?  */
+    link_info.unresolved_syms_in_shared_libs = how_to_report_unresolved_symbols;
 }
 
 /* Add the (colon-separated) elements of DIRLIST_PTR to the
diff -Nur binutils-2.18.50.0.1/ld/Makefile.am binutils-stable/ld/Makefile.am
--- binutils-2.18.50.0.1/ld/Makefile.am	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/Makefile.am	2007-09-25 15:41:03.000000000 +0200
@@ -1812,6 +1812,47 @@
 	-rm -rf tmpdir
 CLEANFILES = dep.sed DEP DEPA DEP1 DEP2 spu_ovl.s
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
+
+install-pdf: install-pdf-recursive install-pdf-am
+ 
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
diff -Nur binutils-2.18.50.0.1/ld/Makefile.in binutils-stable/ld/Makefile.in
--- binutils-2.18.50.0.1/ld/Makefile.in	2007-09-08 19:33:36.000000000 +0200
+++ binutils-stable/ld/Makefile.in	2007-09-25 15:41:03.000000000 +0200
@@ -719,6 +719,7 @@
 	ldemul-list.h crtbegin.o crtend.o ld.log ld.sum
 
 CLEANFILES = dep.sed DEP DEPA DEP1 DEP2 spu_ovl.s
+pdf__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
 
 # Stuff that should be included in a distribution.  The diststuff
@@ -736,15 +737,15 @@
 	@for dep in $?; do \
 	  case '$(am__configure_deps)' in \
 	    *$$dep*) \
-	      echo ' cd $(srcdir) && $(AUTOMAKE) --cygnus '; \
-	      cd $(srcdir) && $(AUTOMAKE) --cygnus  \
+	      echo ' cd $(srcdir) && $(AUTOMAKE) --foreign '; \
+	      cd $(srcdir) && $(AUTOMAKE) --foreign  \
 		&& exit 0; \
 	      exit 1;; \
 	  esac; \
 	done; \
-	echo ' cd $(top_srcdir) && $(AUTOMAKE) --cygnus  Makefile'; \
+	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign  Makefile'; \
 	cd $(top_srcdir) && \
-	  $(AUTOMAKE) --cygnus  Makefile
+	  $(AUTOMAKE) --foreign  Makefile
 .PRECIOUS: Makefile
 Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
 	@case '$?' in \
@@ -2617,6 +2618,45 @@
 mostlyclean-local:
 	-rm -rf tmpdir
 
+.PHONY: install-pdf install-pdf-am install-pdf-recursive
+
+install-pdf: install-pdf-recursive install-pdf-am
+
+install-pdf-am: $(PDFS)
+	@$(NORMAL_INSTALL)
+	test -z "$(pdfdir)" || $(mkinstalldirs) "$(DESTDIR)$(pdfdir)"
+	@list='$(PDFS)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(pdf__strip_dir) \
+	  echo " $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(pdfdir)/$$f'"; \
+	  $(INSTALL_DATA) "$$d$$p" "$(DESTDIR)$(pdfdir)/$$f"; \
+	done
+
+install-pdf-recursive:
+	@failcom='exit 1'; \
+	for f in x $$MAKEFLAGS; do \
+	  case $$f in \
+	    *=* | --[!k]*);; \
+	    *k*) failcom='fail=yes';; \
+	  esac; \
+	done; \
+	dot_seen=no; \
+	target=`echo $@ | sed s/-recursive//`; \
+	list='$(SUBDIRS)'; for subdir in $$list; do \
+	  echo "Making $$target in $$subdir"; \
+	  if test "$$subdir" = "."; then \
+	    dot_seen=yes; \
+	    local_target="$$target-am"; \
+	  else \
+	    local_target="$$target"; \
+	  fi; \
+	  (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
+	  || eval $$failcom; \
+	done; \
+	if test "$$dot_seen" = "no"; then \
+	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
+	fi; test -z "$$fail"
+
 .PHONY: install-html install-html-am install-html-recursive
 
 install-html: install-html-recursive  install-html-am
diff -Nur binutils-2.18.50.0.1/ld/NEWS binutils-stable/ld/NEWS
--- binutils-2.18.50.0.1/ld/NEWS	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/NEWS	2007-09-25 15:41:03.000000000 +0200
@@ -1,7 +1,4 @@
 -*- text -*-
-* ELF: Support environment variables, LD_SYMBOLIC for -Bsymbolic and
-  LD_SYMBOLIC_FUNCTIONS for -Bsymbolic-functions.
-
 Changes in 2.18:
 
 * Linker sources now released under version 3 of the GNU General Public
diff -Nur binutils-2.18.50.0.1/ld/po/Make-in binutils-stable/ld/po/Make-in
--- binutils-2.18.50.0.1/ld/po/Make-in	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/po/Make-in	2007-09-25 15:41:03.000000000 +0200
@@ -113,6 +113,7 @@
 install-exec:
 install-info:
 install-html:
+install-pdf:
 install-data: install-data-@USE_NLS@
 install-data-no: all
 install-data-yes: all
diff -Nur binutils-2.18.50.0.1/ld/scripttempl/elf.sc binutils-stable/ld/scripttempl/elf.sc
--- binutils-2.18.50.0.1/ld/scripttempl/elf.sc	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/scripttempl/elf.sc	2007-09-25 15:41:01.000000000 +0200
@@ -238,40 +238,6 @@
     ${RELOCATING+_stack = .;}
     *(.stack)
   }"
-test "${SHARABLE_SECTIONS}" = "yes" && OTHER_READWRITE_SECTIONS="
-  ${OTHER_READWRITE_SECTIONS}
-  /* Sharable data sections.  */
-  .sharable_data ${RELOCATING-0} : ${RELOCATING+ALIGN(${MAXPAGESIZE})}
-  {
-    ${RELOCATING+PROVIDE_HIDDEN (__sharable_data_start = .);}
-    *(.sharable_data${RELOCATING+ .sharable_data.* .gnu.linkonce.shrd.*})
-    /* Align here to ensure that the sharable data section ends at the
-       page boundary.  */
-    ${RELOCATING+. = ALIGN(. != 0 ? ${MAXPAGESIZE} : 1);}
-    ${RELOCATING+PROVIDE_HIDDEN (__sharable_data_end = .);}
-  }
-"
-test "${SHARABLE_SECTIONS}" = "yes" && OTHER_BSS_SECTIONS="
-  ${OTHER_BSS_SECTIONS}
-  /* Sharable bss sections  */
-  .sharable_bss ${RELOCATING-0} : ${RELOCATING+ALIGN(${MAXPAGESIZE})}
-  {
-    ${RELOCATING+PROVIDE_HIDDEN (__sharable_bss_start = .);}
-    *(.dynsharablebss)
-    *(.sharable_bss${RELOCATING+ .sharable_bss.* .gnu.linkonce.shrb.*}) 
-    *(SHARABLE_COMMON)
-    /* Align here to ensure that the sharable bss section ends at the
-       page boundary.  */
-    ${RELOCATING+. = ALIGN(. != 0 ? ${MAXPAGESIZE} : 1);}
-    ${RELOCATING+PROVIDE_HIDDEN (__sharable_bss_end = .);}
-  }
-"
-test "${SHARABLE_SECTIONS}" = "yes" && REL_SHARABLE="
-  .rel.sharable_data	${RELOCATING-0} : { *(.rel.sharable_data${RELOCATING+ .rel.sharable_data.* .rel.gnu.linkonce.shrd.*}) }
-  .rela.sharable_data	${RELOCATING-0} : { *(.rela.sharable_data${RELOCATING+ .rela.sharable_data.* .rela.gnu.linkonce.shrd.*}) }
-  .rel.sharable_bss	${RELOCATING-0} : { *(.rel.sharable_bss${RELOCATING+ .rel.sharable_bss.* .rel.gnu.linkonce.shrb.*}) }
-  .rela.sharable_bss	${RELOCATING-0} : { *(.rela.sharable_bss${RELOCATING+ .rela.sharable_bss.* .rela.gnu.linkonce.shrb.*}) }
-"
 
 # if this is for an embedded system, don't add SIZEOF_HEADERS.
 if [ -z "$EMBEDDED" ]; then
@@ -342,7 +308,6 @@
   .rel.got      ${RELOCATING-0} : { *(.rel.got) }
   .rela.got     ${RELOCATING-0} : { *(.rela.got) }
   ${OTHER_GOT_RELOC_SECTIONS}
-  ${REL_SHARABLE}
   ${REL_SDATA}
   ${REL_SBSS}
   ${REL_SDATA2}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ChangeLog binutils-stable/ld/testsuite/ChangeLog
--- binutils-2.18.50.0.1/ld/testsuite/ChangeLog	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ChangeLog	2007-09-25 15:40:59.000000000 +0200
@@ -1,115 +1,3 @@
-2007-09-04  Mike Frysinger  <vapier@gentoo.org>
-
-	* lib/ld-lib.exp (default_ld_compile): Pull in global CXXFLAGS and
-	add it to $flags when $ccexe matches *++*.
-	(run_ld_link_exec_tests): Pull in global CXXFLAGS and execute CXX
-	with CXXFLAGS when $lang matches c++.
-	(run_cc_link_tests): Likewise.
-
-2007-09-02  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4986
-	* ld-ia64/line.exp: New.
-	* ld-ia64/undefined.s: Likewise.
-
-	* ld-x86-64/line.exp: Don't check CC.
-
-2007-08-31  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4986
-	* ld-x86-64/line.exp: New
-	* ld-x86-64/undefined.s: Likewise.
-
-2007-08-31  Tristan Gingold  <gingold@adacore.com>
-
-	* ld-script/map-address.t: Add a test for testing DEFINED in map
-	output.
-	* ld-script/map-address.d: Update expected output.
-
-2007-08-28  Mark Shinwell  <shinwell@codesourcery.com>
-	    Joseph Myers  <joseph@codesourcery.com>
-
-	* ld-elfcomm/elfcomm.exp: Use run_host_cmd.  Only check "which
-	$CC" if host is local.
-	* ld-checks/checks.exp: Use run_host_cmd.
-	* ld-elf/exclude.exp: Likewise.
-	* ld-elf/elf.exp: Download merge.ld if host is remote.
-	* ld-elf/binutils.exp (binutils_test): Use remote_exec.
-	* ld-elf/tls_common.exp: Use run_host_cmd.
-	* lib/ld-lib.exp (ld_version): Only check "which $ld" if host is
-	local.  Use remote_exec.
-	(run_host_cmd): New.
-	(run_host_cmd_yesno): New.
-	(default_ld_relocate): Use run_host_cmd_yesno.
-	(default_ld_link): Likewise.
-	(default_ld_simple_link): Use run_host_cmd.
-	(default_ld_compile): Only check "which $ccprog" if host is local.
-	Use remote_file and remote_exec.
-	(default_ld_assemble): Only check "which $as" if host is local.
-	Use run_host_cmd.
-	(default_ld_nm): Use remote_exec, remote_upload and remote_file.
-	(run_dump_test): Use remote_exec, remote_upload and remote_file.
-	Only check "which $binary" if host is local.
-	(run_ld_link_tests): Use remote_exec, remote_upload and
-	remote_file.
-	* ld-selective/selective.exp: Only check "which $CXX" if host is
-	local.  Use remote_exec.
-	* ld-scripts/phdrs.exp: Only check "which $objdump" if host is
-	local.  Use run_host_cmd.
-	* ld-scripts/phdrs2.exp: Likewise.
-	* ld-scripts/weak.exp: Likewise.
-	* ld-undefined/weak-undef.exp: Likewise.
-	* ld-scripts/crossref.exp: Only check "which $CC" if host is local.
-	Use run_host_cmd.
-	* ld-scripts/map-address.exp: Upload map_address.map if host is
-	remote.
-	* ld-srec/srec.exp (run_srec_tests): Use run_host_cmd.  Only check
-	"which $CC" and "which $CXX" if host is local.
-	* ld-undefined/undefined.exp: Only check "which $CC" if host is
-	local.  Use remote_file and run_host_cmd.
-	* config/default.exp: Use remote_exec to create tmpdir.
-
-2007-08-24  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* ld-i386/i386.exp (i386tests): Add a test for TLS IE->LE
-	transition.
-	Run tlsie2, tlsie3, tlsie4 and tlsie5.
-
-	* ld-i386/tlsie1.dd: New file.
-	* ld-i386/tlsie1.s: Likewise.
-	* ld-i386/tlsie2.d: Likewise.
-	* ld-i386/tlsie2.s: Likewise.
-	* ld-i386/tlsie3.d: Likewise.
-	* ld-i386/tlsie3.s: Likewise.
-	* ld-i386/tlsie4.d: Likewise.
-	* ld-i386/tlsie4.s: Likewise.
-	* ld-i386/tlsie5.d: Likewise.
-	* ld-i386/tlsie5.s: Likewise.
-	* ld-x86-64/tlsgd2.d: Likewise.
-	* ld-x86-64/tlsgd2.s: Likewise.
-	* ld-x86-64/tlsgd3.d: Likewise.
-	* ld-x86-64/tlsgd3.s: Likewise.
-	* ld-x86-64/tlsie1.dd: Likewise.
-	* ld-x86-64/tlsie1.s: Likewise.
-	* ld-x86-64/tlsie2.d: Likewise.
-	* ld-x86-64/tlsie2.s: Likewise.
-	* ld-x86-64/tlsie3.d: Likewise.
-	* ld-x86-64/tlsie3.s: Likewise.
-
-	* ld-x86-64/x86-64.exp (x86_64tests): Add a test for TLS LD->LE
-	transition.
-	Run tlsgd2, tlsgd3, tlsie2 and tlsie3.
-
-2007-08-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* ld-i386/tlsbinpic.s: Add a new GD -> IE test.
-
-	* ld-i386/tlsgd1.s: Add a new GD -> LE test.
-
-	* ld-i386/tlsbin.dd: Updated.
-	* ld-i386/tlsbin.rd: Likewise.
-	* ld-i386/tlsgd1.dd: Likewise.
-
 2007-08-17  Jakub Jelinek  <jakub@redhat.com>
 
 	* ld-sparc/tlssunnopic32.dd: Fix up #target.
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-arm/arm-elf.exp binutils-stable/ld/testsuite/ld-arm/arm-elf.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-arm/arm-elf.exp	2007-08-01 15:11:51.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-arm/arm-elf.exp	2007-09-25 15:40:50.000000000 +0200
@@ -167,12 +167,21 @@
      {preempt-app.s}
      {{readelf -Ds preempt-app.sym}}
      "preempt-app"}
-     {"jump19" "-static -T arm.ld" "" {jump19.s}
-      {{objdump -dr jump19.d}}
-      "jump19"}
-     {"callweak" "-static -T arm.ld" "" {callweak.s}
-      {{objdump -dr callweak.d}}
-      "callweak"}
+    {"jump19" "-static -T arm.ld" "" {jump19.s}
+     {{objdump -dr jump19.d}}
+     "jump19"}
+    {"script-type" "-static -T script-type.ld" "" {script-type.s}
+     {{readelf -s script-type.sym}}
+     "script-type"}
+    {"EABI attribute merging" "-r" "" {attr-merge.s attr-merge.s}
+     {{readelf -A attr-merge.attr}}
+     "attr-merge"}
+    {"EABI attribute merging 2" "-r" "" {attr-merge-2a.s attr-merge-2b.s}
+     {{readelf -A attr-merge-2.attr}}
+     "attr-merge-2"}
+    {"callweak" "-static -T arm.ld" "" {callweak.s}
+     {{objdump -dr callweak.d}}
+     "callweak"}
 }
 
 run_ld_link_tests $armelftests
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-arm/script-type.ld binutils-stable/ld/testsuite/ld-arm/script-type.ld
--- binutils-2.18.50.0.1/ld/testsuite/ld-arm/script-type.ld	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-arm/script-type.ld	2007-09-25 15:40:50.000000000 +0200
@@ -0,0 +1,7 @@
+SECTIONS {
+  foo_a = bar_a;
+  foo_t = bar_t;
+  foo_o = bar_o;
+  .text : { *(.text) }
+  .ARM.attribues 0 : { *(.ARM.attributes) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-arm/script-type.s binutils-stable/ld/testsuite/ld-arm/script-type.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-arm/script-type.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-arm/script-type.s	2007-09-25 15:40:50.000000000 +0200
@@ -0,0 +1,20 @@
+.syntax unified
+.text
+.global bar_a
+.type bar_a %function
+bar_a:
+bx lr
+
+.p2align 4
+.global bar_o
+.type bar_o %object
+bar_o:
+.word 0
+
+.p2align 4
+.thumb
+.global bar_t
+.type bar_t %function
+bar_t:
+bx lr
+
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-arm/script-type.sym binutils-stable/ld/testsuite/ld-arm/script-type.sym
--- binutils-2.18.50.0.1/ld/testsuite/ld-arm/script-type.sym	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-arm/script-type.sym	2007-09-25 15:40:50.000000000 +0200
@@ -0,0 +1,15 @@
+
+Symbol table '.symtab' contains 12 entries:
+   Num:    Value  Size Type    Bind   Vis      Ndx Name
+     0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND 
+     1: 00000000     0 SECTION LOCAL  DEFAULT    1 
+     2: 00000000     0 SECTION LOCAL  DEFAULT    2 
+     3: 00000000     0 NOTYPE  LOCAL  DEFAULT    1 \$a
+     4: 00000010     0 NOTYPE  LOCAL  DEFAULT    1 \$d
+     5: 00000020     0 NOTYPE  LOCAL  DEFAULT    1 \$t
+     6: 00000010     0 OBJECT  GLOBAL DEFAULT    1 bar_o
+     7: 00000021     0 FUNC    GLOBAL DEFAULT    1 bar_t
+     8: 00000000     0 FUNC    GLOBAL DEFAULT    1 foo_a
+     9: 00000021     0 FUNC    GLOBAL DEFAULT    1 foo_t
+    10: 00000010     0 OBJECT  GLOBAL DEFAULT    1 foo_o
+    11: 00000000     0 FUNC    GLOBAL DEFAULT    1 bar_a
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/binutils.exp binutils-stable/ld/testsuite/ld-elf/binutils.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/binutils.exp	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/binutils.exp	2007-09-25 15:40:40.000000000 +0200
@@ -104,33 +104,24 @@
 binutils_test objcopy "" maxpage1
 binutils_test objcopy "-shared" maxpage1
 
-binutils_test strip "-z relro" relro
-binutils_test strip "-z relro -shared" relro
-binutils_test objcopy "-z relro" relro
-binutils_test objcopy "-z relro -shared" relro
+binutils_test strip "-z relro" maxpage1
+binutils_test strip "-z relro -shared" maxpage1
+binutils_test objcopy "-z relro" maxpage1
+binutils_test objcopy "-z relro -shared" maxpage1
 
 binutils_test objcopy "" tbss1
-binutils_test objcopy "-z relro" tbss1
 binutils_test objcopy "-shared" tbss1
-binutils_test objcopy "-shared -z relro" tbss1
 binutils_test objcopy "-z max-page-size=0x100000" tbss1
 binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tbss1
 binutils_test objcopy "" tdata1
-binutils_test objcopy "-z relro" tdata1
 binutils_test objcopy "-shared" tdata1
-binutils_test objcopy "-shared -z relro" tdata1
 binutils_test objcopy "-z max-page-size=0x100000" tdata1
 binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tdata1
 binutils_test objcopy "" tbss2
-binutils_test objcopy "-z relro" tbss2
 binutils_test objcopy "-shared" tbss2
-binutils_test objcopy "-shared -z relro" tbss2
 binutils_test objcopy "-z max-page-size=0x100000" tbss2
 binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tbss2
-
+binutils_test objcopy "-z max-page-size=0x100000" tdata2
 binutils_test objcopy "" tdata2
-binutils_test objcopy "-z relro" tdata2
 binutils_test objcopy "-shared" tdata2
-binutils_test objcopy "-shared -z relro" tdata2
-binutils_test objcopy "-z max-page-size=0x100000" tdata2
 binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tdata2
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/data2.c binutils-stable/ld/testsuite/ld-elf/data2.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/data2.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/data2.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,9 +0,0 @@
-int foo = 0;
-extern int foo_alias __attribute__ ((weak, alias ("foo")));
-
-void
-bar (void)
-{
-  foo = -1;
-}
-
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/hash.d binutils-stable/ld/testsuite/ld-elf/hash.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/hash.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/hash.d	2007-09-25 15:40:40.000000000 +0200
@@ -1,5 +1,5 @@
 #source: start.s
-#readelf: -d -s -D
+#readelf: -d 
 #ld: -shared --hash-style=gnu
 #target: *-*-linux*
 #notarget: mips*-*-*
@@ -7,11 +7,3 @@
 #...
 [ 	]*0x[0-9a-z]+[ 	]+\(GNU_HASH\)[ 	]+0x[0-9a-z]+
 #...
-[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] _start
-#...
-[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] main
-#...
-[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] start
-#...
-[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] __start
-#...
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect1a.c binutils-stable/ld/testsuite/ld-elf/indirect1a.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect1a.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect1a.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,8 +0,0 @@
-extern void bar (void);
-
-int
-start (void)
-{
-  bar ();
-  return 0;
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect1b.c binutils-stable/ld/testsuite/ld-elf/indirect1b.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect1b.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect1b.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,6 +0,0 @@
-void
-foo (void)
-{
-}
-
-asm (".symver foo,foo@FOO");
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect1c.c binutils-stable/ld/testsuite/ld-elf/indirect1c.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect1c.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect1c.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,7 +0,0 @@
-extern void foo (void);
-
-void
-bar (void)
-{
-  foo ();
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect2.c binutils-stable/ld/testsuite/ld-elf/indirect2.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect2.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect2.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,9 +0,0 @@
-extern void foo (void);
-
-asm (".symver foo,foo@@@FOO");
-
-void
-bar (void)
-{
-  foo ();
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3a.c binutils-stable/ld/testsuite/ld-elf/indirect3a.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3a.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect3a.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,10 +0,0 @@
-extern void bar (void);
-extern void foo (void);
-
-int
-main (void)
-{
-  foo ();
-  bar ();
-  return 0;
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3b.c binutils-stable/ld/testsuite/ld-elf/indirect3b.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3b.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect3b.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,9 +0,0 @@
-#include <stdio.h>
-
-void
-foo (void)
-{
-  printf ("MAIN\n");
-}
-
-asm (".symver foo,foo@FOO");
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3c.c binutils-stable/ld/testsuite/ld-elf/indirect3c.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3c.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect3c.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,15 +0,0 @@
-#include <stdio.h>
-
-extern void foo (void);
-
-void
-foo (void)
-{
-  printf ("DSO\n");
-}
-
-void
-bar (void)
-{
-  foo ();
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3.out binutils-stable/ld/testsuite/ld-elf/indirect3.out
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect3.out	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect3.out	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-MAIN
-DSO
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4a.c binutils-stable/ld/testsuite/ld-elf/indirect4a.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4a.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect4a.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,10 +0,0 @@
-extern void bar (void);
-extern void foo (void);
-
-int
-main (void)
-{
-  foo ();
-  bar ();
-  return 0;
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4b.c binutils-stable/ld/testsuite/ld-elf/indirect4b.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4b.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect4b.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,17 +0,0 @@
-#include <stdio.h>
-
-void
-foo2 (void)
-{
-  printf ("MAIN2\n");
-}
-
-asm (".symver foo2,foo@@FOO2");
-
-void
-foo1 (void)
-{
-  printf ("MAIN1\n");
-}
-
-asm (".symver foo1,foo@FOO1");
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4c.c binutils-stable/ld/testsuite/ld-elf/indirect4c.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4c.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect4c.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,15 +0,0 @@
-#include <stdio.h>
-
-extern void foo (void);
-
-void
-foo (void)
-{
-  printf ("DSO\n");
-}
-
-void
-bar (void)
-{
-  foo ();
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4.out binutils-stable/ld/testsuite/ld-elf/indirect4.out
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect4.out	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect4.out	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-MAIN2
-MAIN2
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect.exp binutils-stable/ld/testsuite/ld-elf/indirect.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/indirect.exp	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/indirect.exp	1970-01-01 01:00:00.000000000 +0100
@@ -1,126 +0,0 @@
-# Expect script for various indirect symbol tests.
-#   Copyright 2006 Free Software Foundation, Inc.
-#
-# This file is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
-# (at your option) any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.
-#
-
-#
-# Written by H.J. Lu (hongjiu.lu@intel.com)
-#
-
-# Exclude non-ELF targets.
-
-if ![is_elf_format] {
-    return
-}
-
-# Check if compiler works
-if { [which $CC] == 0 } {
-    return
-}
-
-proc check_link_message { cmd string testname } {
-    send_log "$cmd\n"
-    verbose "$cmd"
-    catch "exec $cmd" exec_output
-    send_log "$exec_output\n"
-    verbose "$exec_output"
-
-    foreach str $string {
-	if [string match "*$str*" $exec_output] {
-	    pass "$testname: $str"
-	} else {
-	    fail "$testname: $str"
-	}
-    }
-}
-
-if { ![ld_compile $CC $srcdir/$subdir/indirect1a.c tmpdir/indirect1a.o]
-     || ![ld_compile $CC $srcdir/$subdir/indirect1b.c tmpdir/indirect1b.o]
-     || ![ld_compile "$CC -fPIC" $srcdir/$subdir/indirect2.c tmpdir/indirect2.o]
-     || ![ld_compile $CC $srcdir/$subdir/indirect3a.c tmpdir/indirect3a.o]
-     || ![ld_compile $CC $srcdir/$subdir/indirect3b.c tmpdir/indirect3b.o]
-     || ![ld_compile $CC $srcdir/$subdir/indirect4a.c tmpdir/indirect4a.o]
-     || ![ld_compile $CC $srcdir/$subdir/indirect4b.c tmpdir/indirect4b.o] } {
-    unresolved "Indirect symbol tests"
-    return
-}
-
-set build_tests {
-  {"Build libindirect1c.so"
-   "-shared" "-fPIC"
-   {indirect1c.c} {} "libindirect1c.so"}
-  {"Build libindirect3c.so"
-   "-shared" "-fPIC"
-   {indirect3c.c} {} "libindirect3c.so"}
-  {"Build libindirect4c.so"
-   "-shared" "-fPIC"
-   {indirect4c.c} {} "libindirect4c.so"}
-}
-
-run_cc_link_tests $build_tests
-
-global ld
-
-set string ": final link failed: Nonrepresentable section on output"
-
-set string1 ": local symbol \`foo\' in tmpdir/indirect1b.o is referenced by DSO"
-
-set testname "Indirect symbol 1a"
-set cmd "$ld -e start -o tmpdir/indirect1 tmpdir/indirect1a.o tmpdir/indirect1b.o tmpdir/libindirect1c.so"
-check_link_message "$cmd" [list $string1 $string] "$testname"
-
-set testname "Indirect symbol 1b"
-set cmd "$ld -e start -o tmpdir/indirect1 tmpdir/indirect1a.o tmpdir/libindirect1c.so tmpdir/indirect1b.o"
-check_link_message "$cmd" [list $string1 $string] "$testname"
-
-set string2 ": No symbol version section for versioned symbol \`foo@FOO\'"
-set testname "Indirect symbol 2"
-set cmd "$ld -shared  -o tmpdir/indirect2.so tmpdir/indirect2.o"
-check_link_message "$cmd" [list $string2 $string] "$testname"
-
-# The following tests require running the executable generated by ld.
-if ![isnative] {
-    return
-}
-
-set run_tests {
-    {"Run with libindirect3c.so 1"
-     "tmpdir/indirect3a.o tmpdir/indirect3b.o tmpdir/libindirect3c.so" ""
-     {dummy.c} "indirect3a" "indirect3.out"}
-    {"Run with libindirect3c.so 2"
-     "tmpdir/indirect3a.o tmpdir/libindirect3c.so tmpdir/indirect3b.o" ""
-     {dummy.c} "indirect3b" "indirect3.out"}
-    {"Run with libindirect3c.so 3"
-     "tmpdir/indirect3b.o tmpdir/libindirect3c.so tmpdir/indirect3a.o" ""
-     {dummy.c} "indirect3c" "indirect3.out"}
-    {"Run with libindirect3c.so 4"
-     "tmpdir/libindirect3c.so tmpdir/indirect3b.o tmpdir/indirect3a.o" ""
-     {dummy.c} "indirect3d" "indirect3.out"}
-    {"Run with libindirect4c.so 1"
-     "tmpdir/indirect4a.o tmpdir/indirect4b.o tmpdir/libindirect4c.so" ""
-     {dummy.c} "indirect4a" "indirect4.out"}
-    {"Run with libindirect4c.so 2"
-     "tmpdir/indirect4a.o tmpdir/libindirect4c.so tmpdir/indirect4b.o" ""
-     {dummy.c} "indirect4b" "indirect4.out"}
-    {"Run with libindirect4c.so 3"
-     "tmpdir/indirect4b.o tmpdir/libindirect4c.so tmpdir/indirect4a.o" ""
-     {dummy.c} "indirect4c" "indirect4.out"}
-    {"Run with libindirect4c.so 4"
-     "tmpdir/libindirect4c.so tmpdir/indirect4b.o tmpdir/indirect4a.o" ""
-     {dummy.c} "indirect4d" "indirect4.out"}
-}
-
-run_ld_link_exec_tests [] $run_tests
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/relro.s binutils-stable/ld/testsuite/ld-elf/relro.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/relro.s	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/relro.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,14 +0,0 @@
-	.globl main
-	.globl start
-	.globl _start
-	.globl __start
-	.text
-main:
-start:
-_start:
-__start:
-	.long	0
-	.data
-	.long	0
-	.section .data.rel.ro,"aw",%progbits
-	.long	0
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/shared.exp binutils-stable/ld/testsuite/ld-elf/shared.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/shared.exp	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/shared.exp	2007-09-25 15:40:40.000000000 +0200
@@ -123,9 +123,6 @@
   {"Build libdata1.so"
    "-shared" "-fPIC"
    {data1.c} {} "libdata1.so"}
-  {"Build libdata2.so"
-   "-shared" "-fPIC"
-   {data2.c} {} "libdata2.so"}
 }
 
 set run_tests {
@@ -238,9 +235,6 @@
     {"Run with libdata1.so"
      "tmpdir/libdata1.so" ""
      {dynbss1.c} "dynbss1" "pass.out"}
-    {"Run with libdata2.so"
-     "tmpdir/libdata2.so" ""
-     {weakdef1.c} "weakdef1" "pass.out"}
 }
 
 run_cc_link_tests $build_tests
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-elf/weakdef1.c binutils-stable/ld/testsuite/ld-elf/weakdef1.c
--- binutils-2.18.50.0.1/ld/testsuite/ld-elf/weakdef1.c	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-elf/weakdef1.c	1970-01-01 01:00:00.000000000 +0100
@@ -1,15 +0,0 @@
-#include <stdio.h>
-#include <stdlib.h>
-
-extern int foo_alias;
-extern void bar (void);
-
-int
-main (void)
-{
-  bar ();
-  if (foo_alias != -1)
-    abort ();
-  printf ("PASS\n");
-  return 0;
-}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/i386.exp binutils-stable/ld/testsuite/ld-i386/i386.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/i386.exp	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/i386.exp	2007-09-25 15:40:55.000000000 +0200
@@ -115,9 +115,6 @@
     {"TLS LD->LE transition" "-melf_i386"
      "--32" {tlsld1.s}
      {{objdump -dwr tlsld1.dd}} "tlsld1"}
-    {"TLS IE->LE transition" "-melf_i386"
-     "--32" {tlsie1.s}
-     {{objdump -dwr tlsie1.dd}} "tlsie1"}
 }
 
 run_ld_link_tests $i386tests
@@ -128,7 +125,3 @@
 run_dump_test "pcrel16abs"
 run_dump_test "alloc"
 run_dump_test "warn1"
-run_dump_test "tlsie2"
-run_dump_test "tlsie3"
-run_dump_test "tlsie4"
-run_dump_test "tlsie5"
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsbin.dd binutils-stable/ld/testsuite/ld-i386/tlsbin.dd
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsbin.dd	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsbin.dd	2007-09-25 15:40:55.000000000 +0200
@@ -222,243 +222,235 @@
  8049170:	90[ 	]+nop *
  8049171:	90[ 	]+nop *
  8049172:	90[ 	]+nop *
-#  GD -> IE because variable is not defined in executable
- 8049173:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
- 8049179:	2b 83 f8 ff ff ff[ 	]+sub    -0x8\(%ebx\),%eax
-#				->R_386_TLS_TPOFF32	sG1
- 804917f:	90[ 	]+nop *
- 8049180:	90[ 	]+nop *
- 8049181:	90[ 	]+nop *
- 8049182:	90[ 	]+nop *
- 8049183:	8b 5d fc[ 	]+mov    -0x4\(%ebp\),%ebx
- 8049186:	c9[ 	]+leave *
- 8049187:	c3[ 	]+ret *
+ 8049173:	8b 5d fc[ 	]+mov    -0x4\(%ebp\),%ebx
+ 8049176:	c9[ 	]+leave *
+ 8049177:	c3[ 	]+ret *
 
-0+8049188 <_start>:
- 8049188:	55[ 	]+push   %ebp
- 8049189:	89 e5[ 	]+mov    %esp,%ebp
- 804918b:	e8 00 00 00 00[ 	]+call   8049190 <_start\+0x8>
- 8049190:	59[ 	]+pop    %ecx
- 8049191:	81 c1 94 0f 00 00[ 	]+add    \$0xf94,%ecx
- 8049197:	90[ 	]+nop *
- 8049198:	90[ 	]+nop *
- 8049199:	90[ 	]+nop *
- 804919a:	90[ 	]+nop *
+0+8049178 <_start>:
+ 8049178:	55[ 	]+push   %ebp
+ 8049179:	89 e5[ 	]+mov    %esp,%ebp
+ 804917b:	e8 00 00 00 00[ 	]+call   8049180 <_start\+0x8>
+ 8049180:	59[ 	]+pop    %ecx
+ 8049181:	81 c1 a4 0f 00 00[ 	]+add    \$0xfa4,%ecx
+ 8049187:	90[ 	]+nop *
+ 8049188:	90[ 	]+nop *
+ 8049189:	90[ 	]+nop *
+ 804918a:	90[ 	]+nop *
 #  @gottpoff IE against global var
- 804919b:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 80491a2:	90[ 	]+nop *
- 80491a3:	90[ 	]+nop *
- 80491a4:	2b 91 f4 ff ff ff[ 	]+sub    -0xc\(%ecx\),%edx
+ 804918b:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
+ 8049192:	90[ 	]+nop *
+ 8049193:	90[ 	]+nop *
+ 8049194:	2b 91 f4 ff ff ff[ 	]+sub    -0xc\(%ecx\),%edx
 #				->R_386_TLS_TPOFF32	sG6
- 80491aa:	90[ 	]+nop *
- 80491ab:	90[ 	]+nop *
- 80491ac:	90[ 	]+nop *
- 80491ad:	90[ 	]+nop *
+ 804919a:	90[ 	]+nop *
+ 804919b:	90[ 	]+nop *
+ 804919c:	90[ 	]+nop *
+ 804919d:	90[ 	]+nop *
 #  @indntpoff IE against global var
- 80491ae:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
- 80491b4:	90[ 	]+nop *
- 80491b5:	90[ 	]+nop *
- 80491b6:	03 05 08 a1 04 08[ 	]+add    0x804a108,%eax
+ 804919e:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
+ 80491a4:	90[ 	]+nop *
+ 80491a5:	90[ 	]+nop *
+ 80491a6:	03 05 08 a1 04 08[ 	]+add    0x804a108,%eax
 #				->R_386_TLS_TPOFF	sG7
+ 80491ac:	90[ 	]+nop *
+ 80491ad:	90[ 	]+nop *
+ 80491ae:	90[ 	]+nop *
+ 80491af:	90[ 	]+nop *
+#  @indntpoff direct %gs access IE against global var
+ 80491b0:	8b 15 20 a1 04 08[ 	]+mov    0x804a120,%edx
+#				->R_386_TLS_TPOFF	sG8
+ 80491b6:	90[ 	]+nop *
+ 80491b7:	90[ 	]+nop *
+ 80491b8:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
+ 80491bb:	90[ 	]+nop *
  80491bc:	90[ 	]+nop *
  80491bd:	90[ 	]+nop *
  80491be:	90[ 	]+nop *
- 80491bf:	90[ 	]+nop *
-#  @indntpoff direct %gs access IE against global var
- 80491c0:	8b 15 20 a1 04 08[ 	]+mov    0x804a120,%edx
-#				->R_386_TLS_TPOFF	sG8
+#  @gottpoff IE -> LE against global var defined in exec
+ 80491bf:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
  80491c6:	90[ 	]+nop *
  80491c7:	90[ 	]+nop *
- 80491c8:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
- 80491cb:	90[ 	]+nop *
- 80491cc:	90[ 	]+nop *
- 80491cd:	90[ 	]+nop *
- 80491ce:	90[ 	]+nop *
-#  @gottpoff IE -> LE against global var defined in exec
- 80491cf:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 80491d6:	90[ 	]+nop *
- 80491d7:	90[ 	]+nop *
- 80491d8:	81 ea 8c 0f 00 00[ 	]+sub    \$0xf8c,%edx
+ 80491c8:	81 ea 8c 0f 00 00[ 	]+sub    \$0xf8c,%edx
 #							bg6
- 80491de:	90[ 	]+nop *
- 80491df:	90[ 	]+nop *
- 80491e0:	90[ 	]+nop *
- 80491e1:	90[ 	]+nop *
+ 80491ce:	90[ 	]+nop *
+ 80491cf:	90[ 	]+nop *
+ 80491d0:	90[ 	]+nop *
+ 80491d1:	90[ 	]+nop *
 #  @indntpoff IE -> LE against global var defined in exec
- 80491e2:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
- 80491e8:	90[ 	]+nop *
- 80491e9:	90[ 	]+nop *
- 80491ea:	81 c0 78 f0 ff ff[ 	]+add    \$0xfffff078,%eax
+ 80491d2:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
+ 80491d8:	90[ 	]+nop *
+ 80491d9:	90[ 	]+nop *
+ 80491da:	81 c0 78 f0 ff ff[ 	]+add    \$0xfffff078,%eax
 #							bg7
- 80491f0:	90[ 	]+nop *
- 80491f1:	90[ 	]+nop *
- 80491f2:	90[ 	]+nop *
- 80491f3:	90[ 	]+nop *
+ 80491e0:	90[ 	]+nop *
+ 80491e1:	90[ 	]+nop *
+ 80491e2:	90[ 	]+nop *
+ 80491e3:	90[ 	]+nop *
 #  @indntpoff direct %gs access IE -> LE against global var defined
 #  in exec
- 80491f4:	c7 c2 7c f0 ff ff[ 	]+mov    \$0xfffff07c,%edx
+ 80491e4:	c7 c2 7c f0 ff ff[ 	]+mov    \$0xfffff07c,%edx
 #							bg8
+ 80491ea:	90[ 	]+nop *
+ 80491eb:	90[ 	]+nop *
+ 80491ec:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
+ 80491ef:	90[ 	]+nop *
+ 80491f0:	90[ 	]+nop *
+ 80491f1:	90[ 	]+nop *
+ 80491f2:	90[ 	]+nop *
+#  @gottpoff IE -> LE against local var
+ 80491f3:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
  80491fa:	90[ 	]+nop *
  80491fb:	90[ 	]+nop *
- 80491fc:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
- 80491ff:	90[ 	]+nop *
- 8049200:	90[ 	]+nop *
- 8049201:	90[ 	]+nop *
- 8049202:	90[ 	]+nop *
-#  @gottpoff IE -> LE against local var
- 8049203:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 804920a:	90[ 	]+nop *
- 804920b:	90[ 	]+nop *
- 804920c:	81 ea 6c 0f 00 00[ 	]+sub    \$0xf6c,%edx
+ 80491fc:	81 ea 6c 0f 00 00[ 	]+sub    \$0xf6c,%edx
 #							bl6
- 8049212:	90[ 	]+nop *
- 8049213:	90[ 	]+nop *
- 8049214:	90[ 	]+nop *
- 8049215:	90[ 	]+nop *
+ 8049202:	90[ 	]+nop *
+ 8049203:	90[ 	]+nop *
+ 8049204:	90[ 	]+nop *
+ 8049205:	90[ 	]+nop *
 #  @indntpoff IE -> LE against local var
- 8049216:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
- 804921c:	90[ 	]+nop *
- 804921d:	90[ 	]+nop *
- 804921e:	81 c0 98 f0 ff ff[ 	]+add    \$0xfffff098,%eax
+ 8049206:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
+ 804920c:	90[ 	]+nop *
+ 804920d:	90[ 	]+nop *
+ 804920e:	81 c0 98 f0 ff ff[ 	]+add    \$0xfffff098,%eax
 #							bl7
+ 8049214:	90[ 	]+nop *
+ 8049215:	90[ 	]+nop *
+ 8049216:	90[ 	]+nop *
+ 8049217:	90[ 	]+nop *
+#  @indntpoff direct %gs access IE -> LE against local var
+ 8049218:	c7 c2 9c f0 ff ff[ 	]+mov    \$0xfffff09c,%edx
+#							bl8
+ 804921e:	90[ 	]+nop *
+ 804921f:	90[ 	]+nop *
+ 8049220:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
+ 8049223:	90[ 	]+nop *
  8049224:	90[ 	]+nop *
  8049225:	90[ 	]+nop *
  8049226:	90[ 	]+nop *
- 8049227:	90[ 	]+nop *
-#  @indntpoff direct %gs access IE -> LE against local var
- 8049228:	c7 c2 9c f0 ff ff[ 	]+mov    \$0xfffff09c,%edx
-#							bl8
+#  @gottpoff IE -> LE against hidden but not local var
+ 8049227:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
  804922e:	90[ 	]+nop *
  804922f:	90[ 	]+nop *
- 8049230:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
- 8049233:	90[ 	]+nop *
- 8049234:	90[ 	]+nop *
- 8049235:	90[ 	]+nop *
- 8049236:	90[ 	]+nop *
-#  @gottpoff IE -> LE against hidden but not local var
- 8049237:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 804923e:	90[ 	]+nop *
- 804923f:	90[ 	]+nop *
- 8049240:	81 ea ac 0f 00 00[ 	]+sub    \$0xfac,%edx
+ 8049230:	81 ea ac 0f 00 00[ 	]+sub    \$0xfac,%edx
 #							sh6
- 8049246:	90[ 	]+nop *
- 8049247:	90[ 	]+nop *
- 8049248:	90[ 	]+nop *
- 8049249:	90[ 	]+nop *
+ 8049236:	90[ 	]+nop *
+ 8049237:	90[ 	]+nop *
+ 8049238:	90[ 	]+nop *
+ 8049239:	90[ 	]+nop *
 #  @indntpoff IE -> LE against hidden but not local var
- 804924a:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
- 8049250:	90[ 	]+nop *
- 8049251:	90[ 	]+nop *
- 8049252:	81 c0 58 f0 ff ff[ 	]+add    \$0xfffff058,%eax
+ 804923a:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
+ 8049240:	90[ 	]+nop *
+ 8049241:	90[ 	]+nop *
+ 8049242:	81 c0 58 f0 ff ff[ 	]+add    \$0xfffff058,%eax
 #							sh7
- 8049258:	90[ 	]+nop *
- 8049259:	90[ 	]+nop *
- 804925a:	90[ 	]+nop *
- 804925b:	90[ 	]+nop *
+ 8049248:	90[ 	]+nop *
+ 8049249:	90[ 	]+nop *
+ 804924a:	90[ 	]+nop *
+ 804924b:	90[ 	]+nop *
 #  @indntpoff direct %gs access IE -> LE against hidden but not
 #  local var
- 804925c:	c7 c2 5c f0 ff ff[ 	]+mov    \$0xfffff05c,%edx
+ 804924c:	c7 c2 5c f0 ff ff[ 	]+mov    \$0xfffff05c,%edx
 #							sh8
- 8049262:	90[ 	]+nop *
- 8049263:	90[ 	]+nop *
- 8049264:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
- 8049267:	90[ 	]+nop *
- 8049268:	90[ 	]+nop *
- 8049269:	90[ 	]+nop *
- 804926a:	90[ 	]+nop *
+ 8049252:	90[ 	]+nop *
+ 8049253:	90[ 	]+nop *
+ 8049254:	65 8b 02[ 	]+mov    %gs:\(%edx\),%eax
+ 8049257:	90[ 	]+nop *
+ 8049258:	90[ 	]+nop *
+ 8049259:	90[ 	]+nop *
+ 804925a:	90[ 	]+nop *
 #  LE @tpoff, global var defined in exec
- 804926b:	ba 00 10 00 00[ 	]+mov    \$0x1000,%edx
+ 804925b:	ba 00 10 00 00[ 	]+mov    \$0x1000,%edx
 #							sg1
- 8049270:	90[ 	]+nop *
- 8049271:	90[ 	]+nop *
- 8049272:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
- 8049278:	90[ 	]+nop *
- 8049279:	90[ 	]+nop *
- 804927a:	29 d0[ 	]+sub    %edx,%eax
- 804927c:	90[ 	]+nop *
- 804927d:	90[ 	]+nop *
- 804927e:	90[ 	]+nop *
- 804927f:	90[ 	]+nop *
+ 8049260:	90[ 	]+nop *
+ 8049261:	90[ 	]+nop *
+ 8049262:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
+ 8049268:	90[ 	]+nop *
+ 8049269:	90[ 	]+nop *
+ 804926a:	29 d0[ 	]+sub    %edx,%eax
+ 804926c:	90[ 	]+nop *
+ 804926d:	90[ 	]+nop *
+ 804926e:	90[ 	]+nop *
+ 804926f:	90[ 	]+nop *
 #  LE @tpoff, local var
- 8049280:	b8 7f 0f 00 00[ 	]+mov    \$0xf7f,%eax
+ 8049270:	b8 7f 0f 00 00[ 	]+mov    \$0xf7f,%eax
 #							bl1+1
+ 8049275:	90[ 	]+nop *
+ 8049276:	90[ 	]+nop *
+ 8049277:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
+ 804927e:	90[ 	]+nop *
+ 804927f:	90[ 	]+nop *
+ 8049280:	29 c2[ 	]+sub    %eax,%edx
+ 8049282:	90[ 	]+nop *
+ 8049283:	90[ 	]+nop *
+ 8049284:	90[ 	]+nop *
  8049285:	90[ 	]+nop *
- 8049286:	90[ 	]+nop *
- 8049287:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 804928e:	90[ 	]+nop *
- 804928f:	90[ 	]+nop *
- 8049290:	29 c2[ 	]+sub    %eax,%edx
- 8049292:	90[ 	]+nop *
- 8049293:	90[ 	]+nop *
- 8049294:	90[ 	]+nop *
- 8049295:	90[ 	]+nop *
 #  LE @tpoff, hidden var defined in exec
- 8049296:	b8 bd 0f 00 00[ 	]+mov    \$0xfbd,%eax
+ 8049286:	b8 bd 0f 00 00[ 	]+mov    \$0xfbd,%eax
 #							sh1+3
+ 804928b:	90[ 	]+nop *
+ 804928c:	90[ 	]+nop *
+ 804928d:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
+ 8049294:	90[ 	]+nop *
+ 8049295:	90[ 	]+nop *
+ 8049296:	29 c2[ 	]+sub    %eax,%edx
+ 8049298:	90[ 	]+nop *
+ 8049299:	90[ 	]+nop *
+ 804929a:	90[ 	]+nop *
  804929b:	90[ 	]+nop *
- 804929c:	90[ 	]+nop *
- 804929d:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 80492a4:	90[ 	]+nop *
- 80492a5:	90[ 	]+nop *
- 80492a6:	29 c2[ 	]+sub    %eax,%edx
- 80492a8:	90[ 	]+nop *
- 80492a9:	90[ 	]+nop *
+#  LE @ntpoff, global var defined in exec
+ 804929c:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
+ 80492a2:	90[ 	]+nop *
+ 80492a3:	90[ 	]+nop *
+ 80492a4:	8d 90 04 f0 ff ff[ 	]+lea    -0xffc\(%eax\),%edx
+#							sg2
  80492aa:	90[ 	]+nop *
  80492ab:	90[ 	]+nop *
-#  LE @ntpoff, global var defined in exec
- 80492ac:	65 a1 00 00 00 00[ 	]+mov    %gs:0x0,%eax
- 80492b2:	90[ 	]+nop *
+ 80492ac:	90[ 	]+nop *
+ 80492ad:	90[ 	]+nop *
+#  LE @ntpoff, local var, non-canonical sequence
+ 80492ae:	b8 86 f0 ff ff[ 	]+mov    \$0xfffff086,%eax
+#							bl2+2
  80492b3:	90[ 	]+nop *
- 80492b4:	8d 90 04 f0 ff ff[ 	]+lea    -0xffc\(%eax\),%edx
-#							sg2
- 80492ba:	90[ 	]+nop *
- 80492bb:	90[ 	]+nop *
+ 80492b4:	90[ 	]+nop *
+ 80492b5:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
  80492bc:	90[ 	]+nop *
  80492bd:	90[ 	]+nop *
-#  LE @ntpoff, local var, non-canonical sequence
- 80492be:	b8 86 f0 ff ff[ 	]+mov    \$0xfffff086,%eax
-#							bl2+2
+ 80492be:	01 c2[ 	]+add    %eax,%edx
+ 80492c0:	90[ 	]+nop *
+ 80492c1:	90[ 	]+nop *
+ 80492c2:	90[ 	]+nop *
  80492c3:	90[ 	]+nop *
- 80492c4:	90[ 	]+nop *
- 80492c5:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 80492cc:	90[ 	]+nop *
- 80492cd:	90[ 	]+nop *
- 80492ce:	01 c2[ 	]+add    %eax,%edx
- 80492d0:	90[ 	]+nop *
- 80492d1:	90[ 	]+nop *
- 80492d2:	90[ 	]+nop *
- 80492d3:	90[ 	]+nop *
 #  LE @ntpoff, hidden var defined in exec, non-canonical sequence
- 80492d4:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
- 80492db:	90[ 	]+nop *
- 80492dc:	90[ 	]+nop *
- 80492dd:	81 c2 45 f0 ff ff[ 	]+add    \$0xfffff045,%edx
+ 80492c4:	65 8b 15 00 00 00 00[ 	]+mov    %gs:0x0,%edx
+ 80492cb:	90[ 	]+nop *
+ 80492cc:	90[ 	]+nop *
+ 80492cd:	81 c2 45 f0 ff ff[ 	]+add    \$0xfffff045,%edx
 #							sh2+1
- 80492e3:	90[ 	]+nop *
- 80492e4:	90[ 	]+nop *
- 80492e5:	90[ 	]+nop *
- 80492e6:	90[ 	]+nop *
+ 80492d3:	90[ 	]+nop *
+ 80492d4:	90[ 	]+nop *
+ 80492d5:	90[ 	]+nop *
+ 80492d6:	90[ 	]+nop *
 #  LE @ntpoff, global var defined in exec
- 80492e7:	65 a1 08 f0 ff ff[ 	]+mov    %gs:0xfffff008,%eax
+ 80492d7:	65 a1 08 f0 ff ff[ 	]+mov    %gs:0xfffff008,%eax
 #							sg3
- 80492ed:	90[ 	]+nop *
- 80492ee:	90[ 	]+nop *
- 80492ef:	90[ 	]+nop *
- 80492f0:	90[ 	]+nop *
+ 80492dd:	90[ 	]+nop *
+ 80492de:	90[ 	]+nop *
+ 80492df:	90[ 	]+nop *
+ 80492e0:	90[ 	]+nop *
 #  LE @ntpoff, local var
- 80492f1:	65 8b 15 8b f0 ff ff[ 	]+mov    %gs:0xfffff08b,%edx
+ 80492e1:	65 8b 15 8b f0 ff ff[ 	]+mov    %gs:0xfffff08b,%edx
 #							bl3+3
- 80492f8:	90[ 	]+nop *
- 80492f9:	90[ 	]+nop *
- 80492fa:	90[ 	]+nop *
- 80492fb:	90[ 	]+nop *
+ 80492e8:	90[ 	]+nop *
+ 80492e9:	90[ 	]+nop *
+ 80492ea:	90[ 	]+nop *
+ 80492eb:	90[ 	]+nop *
 #  LE @ntpoff, hidden var defined in exec
- 80492fc:	65 8b 15 49 f0 ff ff[ 	]+mov    %gs:0xfffff049,%edx
+ 80492ec:	65 8b 15 49 f0 ff ff[ 	]+mov    %gs:0xfffff049,%edx
 #							sh3+1
- 8049303:	90[ 	]+nop *
- 8049304:	90[ 	]+nop *
- 8049305:	90[ 	]+nop *
- 8049306:	90[ 	]+nop *
- 8049307:	8b 5d fc[ 	]+mov    -0x4\(%ebp\),%ebx
- 804930a:	c9[ 	]+leave *
- 804930b:	c3[ 	]+ret *
+ 80492f3:	90[ 	]+nop *
+ 80492f4:	90[ 	]+nop *
+ 80492f5:	90[ 	]+nop *
+ 80492f6:	90[ 	]+nop *
+ 80492f7:	8b 5d fc[ 	]+mov    -0x4\(%ebp\),%ebx
+ 80492fa:	c9[ 	]+leave *
+ 80492fb:	c3[ 	]+ret *
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsbinpic.s binutils-stable/ld/testsuite/ld-i386/tlsbinpic.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsbinpic.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsbinpic.s	2007-09-25 15:40:55.000000000 +0200
@@ -162,11 +162,6 @@
 	movl	%gs:(%edx), %edx
 	nop;nop;nop;nop
 
-	/* GD -> IE because variable is not defined in executable */
-	leal	sG1@tlsgd(%ebx), %eax
-	call	___tls_get_addr@plt
-	nop;nop;nop;nop;nop
-
 	movl    -4(%ebp), %ebx
 	leave
 	ret
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsbin.rd binutils-stable/ld/testsuite/ld-i386/tlsbin.rd
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsbin.rd	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsbin.rd	2007-09-25 15:40:55.000000000 +0200
@@ -32,7 +32,7 @@
 .*
 
 Elf file type is EXEC \(Executable file\)
-Entry point 0x8049188
+Entry point 0x8049178
 There are 6 program headers, starting at offset [0-9]+
 
 Program Headers:
@@ -137,7 +137,7 @@
  +[0-9]+: 00000058 +0 TLS +GLOBAL HIDDEN +9 sh7
  +[0-9]+: 0000005c +0 TLS +GLOBAL HIDDEN +9 sh8
  +[0-9]+: 0+ +0 TLS +GLOBAL DEFAULT +9 sg1
- +[0-9]+: 0+8049188 +0 FUNC +GLOBAL DEFAULT +8 _start
+ +[0-9]+: 0+8049178 +0 FUNC +GLOBAL DEFAULT +8 _start
  +[0-9]+: 0000004c +0 TLS +GLOBAL HIDDEN +9 sh4
  +[0-9]+: 00000078 +0 TLS +GLOBAL DEFAULT +10 bg7
  +[0-9]+: 00000050 +0 TLS +GLOBAL HIDDEN +9 sh5
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsgd1.dd binutils-stable/ld/testsuite/ld-i386/tlsgd1.dd
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsgd1.dd	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsgd1.dd	2007-09-25 15:40:55.000000000 +0200
@@ -11,6 +11,4 @@
 [a-f0-9]+ <_start>:
 [ 	]*[a-f0-9]+:	65 a1 00 00 00 00    	mov    %gs:0x0,%eax
 [ 	]*[a-f0-9]+:	81 e8 04 00 00 00    	sub    \$0x4,%eax
-[ 	]*[a-f0-9]+:	65 a1 00 00 00 00    	mov    %gs:0x0,%eax
-[ 	]*[a-f0-9]+:	81 e8 04 00 00 00    	sub    \$0x4,%eax
 #pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsgd1.s binutils-stable/ld/testsuite/ld-i386/tlsgd1.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsgd1.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsgd1.s	2007-09-25 15:40:55.000000000 +0200
@@ -3,9 +3,6 @@
 _start:
 	leal	foo@TLSGD(,%ebx,1), %eax
 	call	___tls_get_addr
-	leal	foo@TLSGD(%ebx), %eax
-	call	___tls_get_addr
-	nop
 	.globl foo
 	.section	.tdata,"awT",@progbits
 	.align 4
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie1.dd binutils-stable/ld/testsuite/ld-i386/tlsie1.dd
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie1.dd	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie1.dd	1970-01-01 01:00:00.000000000 +0100
@@ -1,18 +0,0 @@
-#source: tlsie1.s
-#as: --32
-#ld: -melf_i386 tmpdir/tlsld1
-#objdump: -drw
-#target: i?86-*-linux*
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-[a-f0-9]+ <_start>:
-[ 	]*[a-f0-9]+:	81 c1 fc ff ff ff    	add    \$0xfffffffc,%ecx
-[ 	]*[a-f0-9]+:	81 c1 fc ff ff ff    	add    \$0xfffffffc,%ecx
-[ 	]*[a-f0-9]+:	c7 c0 fc ff ff ff    	mov    \$0xfffffffc,%eax
-[ 	]*[a-f0-9]+:	c7 c1 fc ff ff ff    	mov    \$0xfffffffc,%ecx
-[ 	]*[a-f0-9]+:	b8 fc ff ff ff       	mov    \$0xfffffffc,%eax
-[ 	]*[a-f0-9]+:	c7 c1 fc ff ff ff    	mov    \$0xfffffffc,%ecx
-#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie1.s binutils-stable/ld/testsuite/ld-i386/tlsie1.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie1.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie1.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,16 +0,0 @@
-	.text
-	.globl _start
-_start:
-	addl	foo@gotntpoff(%ebx), %ecx
-	addl	foo@indntpoff, %ecx
-	movl	foo@gotntpoff(%ebx), %eax
-	movl	foo@gotntpoff(%ebx), %ecx
-	movl	foo@indntpoff, %eax
-	movl	foo@indntpoff, %ecx
-	.globl foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie2.d binutils-stable/ld/testsuite/ld-i386/tlsie2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie2.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie2.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS IE->LE transition check (R_386_TLS_GOTIE with %eax)
-#as: --32
-#ld: -melf_i386
-#error: .*TLS transition from R_386_TLS_GOTIE to R_386_TLS_LE_32 against `foo'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie2.s binutils-stable/ld/testsuite/ld-i386/tlsie2.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie2.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie2.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,12 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leal	foo@gotntpoff(%ebx), %eax
-	movl	(%eax), %eax
-	.globl foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie3.d binutils-stable/ld/testsuite/ld-i386/tlsie3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie3.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie3.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS IE->LE transition check (R_386_TLS_GOTIE)
-#as: --32
-#ld: -melf_i386
-#error: .*TLS transition from R_386_TLS_GOTIE to R_386_TLS_LE_32 against `foo'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie3.s binutils-stable/ld/testsuite/ld-i386/tlsie3.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie3.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie3.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,12 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leal	foo@gotntpoff(%ebx), %ecx
-	movl	(%ecx), %ecx
-	.globl foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie4.d binutils-stable/ld/testsuite/ld-i386/tlsie4.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie4.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie4.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS IE->LE transition check (R_386_TLS_IE with %eax)
-#as: --32
-#ld: -melf_i386
-#error: .*TLS transition from R_386_TLS_IE to R_386_TLS_LE_32 against `foo'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie4.s binutils-stable/ld/testsuite/ld-i386/tlsie4.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie4.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie4.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,12 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leal	foo@indntpoff(%ebx), %eax
-	movl	(%eax), %eax
-	.globl foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie5.d binutils-stable/ld/testsuite/ld-i386/tlsie5.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie5.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie5.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS IE->LE transition check (R_386_TLS_IE)
-#as: --32
-#ld: -melf_i386
-#error: .*TLS transition from R_386_TLS_IE to R_386_TLS_LE_32 against `foo'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie5.s binutils-stable/ld/testsuite/ld-i386/tlsie5.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-i386/tlsie5.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-i386/tlsie5.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,12 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leal	foo@indntpoff, %ecx
-	movl	(%ecx), %ecx
-	.globl foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error1.d binutils-stable/ld/testsuite/ld-ia64/error1.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error1.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-ia64/error1.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,7 +0,0 @@
-#source: error1.s
-#ld: -unresolved-symbols=ignore-all
-#readelf: -s
-
-#...
-[ 	]+[0-9]+:[ 	]+[0]+[ 	]+0[ 	]+NOTYPE[ 	]+GLOBAL DEFAULT[ 	]+UND[ 	]+foo
-#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error1.s binutils-stable/ld/testsuite/ld-ia64/error1.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error1.s	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-ia64/error1.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,30 +0,0 @@
-	.explicit
-	.pred.safe_across_calls p1-p5,p16-p63
-	.text
-	.align 16
-	.global _start#
-	.proc _start#
-_start:
-	.prologue 12, 32
-	.mii
-	.save ar.pfs, r33
-	alloc r33 = ar.pfs, 0, 3, 0, 0
-	.save rp, r32
-	mov r32 = b0
-	mov r34 = r1
-	.body
-	;;
-	.bbb
-	nop 0
-	nop 0
-	br.call.sptk.many b0 = foo#
-	;;
-	.mmi
-	nop 0
-	mov r1 = r34
-	mov b0 = r32
-	.mib
-	nop 0
-	mov ar.pfs = r33
-	br.ret.sptk.many b0
-	.endp _start#
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error2.d binutils-stable/ld/testsuite/ld-ia64/error2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error2.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-ia64/error2.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,7 +0,0 @@
-#source: error1.s
-#ld: -pie -unresolved-symbols=ignore-all
-#readelf: -s
-
-#...
-[ 	]+[0-9]+:[ 	]+[0]+[ 	]+0[ 	]+NOTYPE[ 	]+GLOBAL DEFAULT[ 	]+UND[ 	]+foo
-#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error3.d binutils-stable/ld/testsuite/ld-ia64/error3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error3.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-ia64/error3.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,7 +0,0 @@
-#source: error1.s
-#ld: -pie -shared
-#readelf: -s
-
-#...
-[ 	]+[0-9]+:[ 	]+[0]+[ 	]+0[ 	]+NOTYPE[ 	]+GLOBAL DEFAULT[ 	]+UND[ 	]+foo
-#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error4.d binutils-stable/ld/testsuite/ld-ia64/error4.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-ia64/error4.d	2007-09-08 19:34:12.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-ia64/error4.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,3 +0,0 @@
-#source: error1.s
-#ld: -shared -pie
-#error: .*undefined reference to `foo'
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-ia64/line.exp binutils-stable/ld/testsuite/ld-ia64/line.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-ia64/line.exp	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-ia64/line.exp	1970-01-01 01:00:00.000000000 +0100
@@ -1,57 +0,0 @@
-# Test that the linker reports undefined symbol line number correctly.
-#
-#   Copyright 2007  Free Software Foundation, Inc.
-#
-# This file is part of the GNU Binutils.
-#
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 3 of the License, or
-# (at your option) any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston,
-# MA 02110-1301, USA.
-
-if { !([istarget "ia64-*-elf*"]
-       || [istarget "ia64-*-linux*"]) } {
-    return
-}
-
-set testline "undefined line"
-
-if ![ld_assemble $as "-x $srcdir/$subdir/undefined.s" tmpdir/undefined.o] {
-    verbose "Unable to assemble test file!" 1
-    unresolved $testline
-    return
-}
-
-remote_file host delete "tmpdir/undefined"
-
-# Using -e start prevents the SunOS linker from trying to build a
-# shared library.
-send_log "$ld -e start -o tmpdir/undefined tmpdir/undefined.o\n"
-set exec_output [run_host_cmd "$ld" "-e start -o tmpdir/undefined tmpdir/undefined.o"]
-
-send_log "$exec_output\n"
-verbose "$exec_output"
-
-proc checkund { string testname } {
-    global exec_output
-
-    if [string match "*$string*" $exec_output] {
-	pass $testname
-    } else {
-	fail $testname
-    }
-}
-
-set ml "undefined.c:9: undefined reference to `*this_function_is_not_defined'"
-
-checkund $ml $testline
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-ia64/undefined.s binutils-stable/ld/testsuite/ld-ia64/undefined.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-ia64/undefined.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-ia64/undefined.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,152 +0,0 @@
-	.file	"undefined.c"
-	.pred.safe_across_calls p1-p5,p16-p63
-	.section	.debug_abbrev,"",@progbits
-.Ldebug_abbrev0:
-	.section	.debug_info,"",@progbits
-.Ldebug_info0:
-	.section	.debug_line,"",@progbits
-.Ldebug_line0:
-	.text
-.Ltext0:
-	.align 16
-	.global function#
-	.proc function#
-function:
-[.LFB2:]
-	.file 1 "undefined.c"
-	.loc 1 8 0
-	.prologue 12, 32
-	.mii
-	.save ar.pfs, r33
-	alloc r33 = ar.pfs, 0, 3, 0, 0
-	.save rp, r32
-	mov r32 = b0
-	mov r34 = r1
-	.body
-	.loc 1 9 0
-	;;
-	.mib
-	nop 0
-	nop 0
-	br.call.sptk.many b0 = this_function_is_not_defined#
-	.loc 1 10 0
-	;;
-	.loc 1 9 0
-	.mmi
-	nop 0
-	mov r1 = r34
-	.loc 1 10 0
-	mov b0 = r32
-	.mib
-	nop 0
-	mov ar.pfs = r33
-	br.ret.sptk.many b0
-.LFE2:
-	.endp function#
-.Letext0:
-	.section	.debug_info
-	data4.ua	0x4c
-	data2.ua	0x2
-	data4.ua	@secrel(.Ldebug_abbrev0)
-	data1	0x8
-	.uleb128 0x1
-	data4.ua	@secrel(.Ldebug_line0)
-	data8.ua	.Letext0
-	data8.ua	.Ltext0
-	data4.ua	@secrel(.LASF0)
-	data1	0x1
-	data4.ua	@secrel(.LASF1)
-	.uleb128 0x2
-	data1	0x1
-	data4.ua	@secrel(.LASF2)
-	data1	0x1
-	data1	0x8
-	data4.ua	0x48
-	data8.ua	.LFB2
-	data8.ua	.LFE2
-	data1	0x2
-	data1	0x7c
-	.sleb128 16
-	.uleb128 0x3
-	stringz	"int"
-	data1	0x4
-	data1	0x5
-	data1	0x0
-	.section	.debug_abbrev
-	.uleb128 0x1
-	.uleb128 0x11
-	data1	0x1
-	.uleb128 0x10
-	.uleb128 0x6
-	.uleb128 0x12
-	.uleb128 0x1
-	.uleb128 0x11
-	.uleb128 0x1
-	.uleb128 0x25
-	.uleb128 0xe
-	.uleb128 0x13
-	.uleb128 0xb
-	.uleb128 0x3
-	.uleb128 0xe
-	data1	0x0
-	data1	0x0
-	.uleb128 0x2
-	.uleb128 0x2e
-	data1	0x0
-	.uleb128 0x3f
-	.uleb128 0xc
-	.uleb128 0x3
-	.uleb128 0xe
-	.uleb128 0x3a
-	.uleb128 0xb
-	.uleb128 0x3b
-	.uleb128 0xb
-	.uleb128 0x49
-	.uleb128 0x13
-	.uleb128 0x11
-	.uleb128 0x1
-	.uleb128 0x12
-	.uleb128 0x1
-	.uleb128 0x40
-	.uleb128 0xa
-	data1	0x0
-	data1	0x0
-	.uleb128 0x3
-	.uleb128 0x24
-	data1	0x0
-	.uleb128 0x3
-	.uleb128 0x8
-	.uleb128 0xb
-	.uleb128 0xb
-	.uleb128 0x3e
-	.uleb128 0xb
-	data1	0x0
-	data1	0x0
-	data1	0x0
-	.section	.debug_pubnames,"",@progbits
-	data4.ua	0x1b
-	data2.ua	0x2
-	data4.ua	@secrel(.Ldebug_info0)
-	data4.ua	0x50
-	data4.ua	0x29
-	stringz	"function"
-	data4.ua	0x0
-	.section	.debug_aranges,"",@progbits
-	data4.ua	0x2c
-	data2.ua	0x2
-	data4.ua	@secrel(.Ldebug_info0)
-	data1	0x8
-	data1	0x0
-	data2.ua	0x0
-	data2.ua	0x0
-	data8.ua	.Ltext0
-	data8.ua	.Letext0-.Ltext0
-	data8.ua	0x0
-	data8.ua	0x0
-	.section	.debug_str,"MS",@progbits,1
-.LASF0:
-	stringz	"GNU C 4.1.2"
-.LASF1:
-	stringz	"undefined.c"
-.LASF2:
-	stringz	"function"
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-1.d binutils-stable/ld/testsuite/ld-mips-elf/got-page-1.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-1.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-1.d	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,10 @@
+#name: GOT page test 1
+#source: got-page-1.s
+#ld: -T got-page-1.ld -shared
+#readelf: -d
+#
+# There should be 10 page entries and 2 reserved entries
+#
+#...
+.* \(MIPS_LOCAL_GOTNO\) *12
+#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-1.ld binutils-stable/ld/testsuite/ld-mips-elf/got-page-1.ld
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-1.ld	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-1.ld	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,31 @@
+SECTIONS
+{
+  . = 0x80000;
+  .interp : { *(.interp) }
+  .hash : { *(.hash) }
+  .dynsym : { *(.dynsym) }
+  .dynstr : { *(.dynstr) }
+
+  . = ALIGN (0x400);
+  .rel.dyn : { *(.rel.dyn) }
+
+  . = ALIGN (0x400);
+  .MIPS.stubs : { *(.MIPS.stubs) }
+
+  . = ALIGN (0x400);
+  .text : { *(.text) }
+
+  . = ALIGN (0x10000);
+  _gp = . + 0x7ff0;
+  .got : { *(.got) }
+
+  . = ALIGN (0x400);
+  .bss : { *(.bss .bss.*) }
+
+  /DISCARD/ : { *(.reginfo) }
+}
+
+VERSION
+{
+  { local: *; };
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-1.s binutils-stable/ld/testsuite/ld-mips-elf/got-page-1.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-1.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-1.s	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,46 @@
+	# See below.
+	lw	$4,%got(foo+0x120000)($gp)
+	addiu	$4,$4,%lo(foo+0x120000)
+
+	# 2 pages
+	lw	$4,%got(foo-0x8000)($gp)
+	addiu	$4,$4,%lo(foo-0x8000)
+	lw	$4,%got(foo+0x800)($gp)
+	addiu	$4,$4,%lo(foo+0x8000)
+
+	# 2 pages
+	lw	$4,%got(foo-0x1000000)($gp)
+	addiu	$4,$4,%lo(foo-0x1000000)
+	lw	$4,%got(foo-0xffffff)($gp)
+	addiu	$4,$4,%lo(foo-0xffffff)
+
+	# 1 page
+	lw	$4,%got(foo+0x120000)($gp)
+	addiu	$4,$4,%lo(foo+0x120000)
+
+	# 5 pages
+	lw	$4,%got(bar)($gp)
+	addiu	$4,$4,%lo(bar)
+	lw	$4,%got(bar+0x20000)($gp)
+	addiu	$4,$4,%lo(bar+0x20000)
+	lw	$4,%got(bar+0x40000)($gp)
+	addiu	$4,$4,%lo(bar+0x40000)
+	lw	$4,%got(bar+0x30000)($gp)
+	addiu	$4,$4,%lo(bar+0x30000)
+	lw	$4,%got(bar+0x10000)($gp)
+	addiu	$4,$4,%lo(bar+0x10000)
+	lw	$4,%got(bar+0x38000)($gp)
+	addiu	$4,$4,%lo(bar+0x38000)
+	lw	$4,%got(bar+0x14000)($gp)
+	addiu	$4,$4,%lo(bar+0x14000)
+	lw	$4,%got(bar+0x2c000)($gp)
+	addiu	$4,$4,%lo(bar+0x2c000)
+	lw	$4,%got(bar+0x02000)($gp)
+	addiu	$4,$4,%lo(bar+0x02000)
+
+	.section .bss.foo,"aw",@nobits
+	.fill	0x800000
+foo:	.fill	0x800000
+
+	.section .bss.bar,"aw",@nobits
+bar:	.fill	0xc00000
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-2.d binutils-stable/ld/testsuite/ld-mips-elf/got-page-2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-2.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-2.d	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,11 @@
+#name: GOT page test 2
+#source: got-page-2.s
+#as: -EB -n32
+#ld: -T got-page-1.ld -shared -melf32btsmipn32
+#readelf: -d
+#
+# There should be 10 page entries and 2 reserved entries
+#
+#...
+.* \(MIPS_LOCAL_GOTNO\) *12
+#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-2.s binutils-stable/ld/testsuite/ld-mips-elf/got-page-2.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-2.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-2.s	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,46 @@
+	# See below.
+	lw	$4,%got_page(foo+0x120000)($gp)
+	addiu	$4,$4,%got_ofst(foo+0x120000)
+
+	# 2 pages
+	lw	$4,%got_page(foo-0x8000)($gp)
+	addiu	$4,$4,%got_ofst(foo-0x8000)
+	lw	$4,%got_page(foo+0x800)($gp)
+	addiu	$4,$4,%got_ofst(foo+0x8000)
+
+	# 2 pages
+	lw	$4,%got_page(foo-0x1000000)($gp)
+	addiu	$4,$4,%got_ofst(foo-0x1000000)
+	lw	$4,%got_page(foo-0xffffff)($gp)
+	addiu	$4,$4,%got_ofst(foo-0xffffff)
+
+	# 1 page
+	lw	$4,%got_page(foo+0x120000)($gp)
+	addiu	$4,$4,%got_ofst(foo+0x120000)
+
+	# 5 pages
+	lw	$4,%got_page(bar)($gp)
+	addiu	$4,$4,%got_ofst(bar)
+	lw	$4,%got_page(bar+0x20000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x20000)
+	lw	$4,%got_page(bar+0x40000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x40000)
+	lw	$4,%got_page(bar+0x30000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x30000)
+	lw	$4,%got_page(bar+0x10000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x10000)
+	lw	$4,%got_page(bar+0x38000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x38000)
+	lw	$4,%got_page(bar+0x14000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x14000)
+	lw	$4,%got_page(bar+0x2c000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x2c000)
+	lw	$4,%got_page(bar+0x02000)($gp)
+	addiu	$4,$4,%got_ofst(bar+0x02000)
+
+	.section .bss.foo,"aw",@nobits
+	.fill	0x800000
+foo:	.fill	0x800000
+
+	.section .bss.bar,"aw",@nobits
+bar:	.fill	0xc00000
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3a.s binutils-stable/ld/testsuite/ld-mips-elf/got-page-3a.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3a.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-3a.s	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,58 @@
+	.macro	makeref,sym
+	lw	$5,%got(\sym\@)($gp)
+	.endm
+
+	.globl	f1
+	.ent	f1
+f1:
+	# See below.
+	lw	$4,%got(foo+0x120000)($gp)
+	addiu	$4,$4,%lo(foo+0x120000)
+
+	# 2 pages
+	lw	$4,%got(foo-0x8000)($gp)
+	addiu	$4,$4,%lo(foo-0x8000)
+	lw	$4,%got(foo+0x800)($gp)
+	addiu	$4,$4,%lo(foo+0x8000)
+
+	# 2 pages
+	lw	$4,%got(foo-0x1000000)($gp)
+	addiu	$4,$4,%lo(foo-0x1000000)
+	lw	$4,%got(foo-0xffffff)($gp)
+	addiu	$4,$4,%lo(foo-0xffffff)
+
+	# 1 page
+	lw	$4,%got(foo+0x120000)($gp)
+	addiu	$4,$4,%lo(foo+0x120000)
+
+	# 5 pages
+	lw	$4,%got(bar)($gp)
+	addiu	$4,$4,%lo(bar)
+	lw	$4,%got(bar+0x20000)($gp)
+	addiu	$4,$4,%lo(bar+0x20000)
+	lw	$4,%got(bar+0x40000)($gp)
+	addiu	$4,$4,%lo(bar+0x40000)
+	lw	$4,%got(bar+0x30000)($gp)
+	addiu	$4,$4,%lo(bar+0x30000)
+	lw	$4,%got(bar+0x10000)($gp)
+	addiu	$4,$4,%lo(bar+0x10000)
+	lw	$4,%got(bar+0x38000)($gp)
+	addiu	$4,$4,%lo(bar+0x38000)
+	lw	$4,%got(bar+0x14000)($gp)
+	addiu	$4,$4,%lo(bar+0x14000)
+	lw	$4,%got(bar+0x2c000)($gp)
+	addiu	$4,$4,%lo(bar+0x2c000)
+	lw	$4,%got(bar+0x02000)($gp)
+	addiu	$4,$4,%lo(bar+0x02000)
+	.end	f1
+
+	.rept	8000
+	makeref	foo
+	.endr
+
+	.section .bss.foo,"aw",@nobits
+	.fill	0x800000
+foo:	.fill	0x800000
+
+	.section .bss.bar,"aw",@nobits
+bar:	.fill	0xc00000
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3b.s binutils-stable/ld/testsuite/ld-mips-elf/got-page-3b.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3b.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-3b.s	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,11 @@
+	.macro	makeref,sym
+	lw	$5,%got(\sym\@)($gp)
+	.endm
+
+	.globl	f2
+	.ent	f2
+f2:
+	.rept	8000
+	makeref	bar
+	.endr
+	.end	f2
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3c.s binutils-stable/ld/testsuite/ld-mips-elf/got-page-3c.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3c.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-3c.s	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,11 @@
+	.macro	makeref,sym
+	lw	$5,%got(\sym\@)($gp)
+	.endm
+
+	.globl	f3
+	.ent	f3
+f3:
+	.rept	8000
+	makeref	frob
+	.endr
+	.end	f3
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3.d binutils-stable/ld/testsuite/ld-mips-elf/got-page-3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/got-page-3.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/got-page-3.d	2007-09-25 15:40:44.000000000 +0200
@@ -0,0 +1,26 @@
+#name: GOT page test 3
+#source: got-page-3a.s
+#source: got-page-3b.s
+#source: got-page-3c.s
+#as: -mips3
+#ld: -T got-page-1.ld -shared
+#objdump: -dr
+#
+# got-page-3a.s and got-page-3b.s should get assigned the same GOT,
+# with a page estimate of 10.  Thus the first page entry has offset
+# -32744 (-32768 + 0x8000 - ELF_MIPS_GP_OFFSET + MIPS_RESERVED_GOTNO)
+# and the first global entry has an offset -32744 + 40 == -32704.
+#
+# got-page-3c.s should get its own GOT, and needs no page entries.
+# The first global symbol should therefore be at offset -32744.
+#
+#...
+.*	lw	a0,-32744\(gp\)
+.*	addiu	a0,a0,.*
+#...
+.*	lw	a1,-32704\(gp\)
+#...
+.* <f3>:
+#...
+.*	lw	a1,-32744\(gp\)
+#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/mips-elf.exp binutils-stable/ld/testsuite/ld-mips-elf/mips-elf.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/mips-elf.exp	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/mips-elf.exp	2007-09-25 15:40:44.000000000 +0200
@@ -142,6 +142,11 @@
 
 if { $linux_gnu } {
     run_dump_test "textrel-1"
+    run_dump_test "got-page-1"
+    if $has_newabi {
+	run_dump_test "got-page-2"
+    }
+    run_dump_test "got-page-3"
 }
 
 if $has_newabi {
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/multi-got-1.d binutils-stable/ld/testsuite/ld-mips-elf/multi-got-1.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/multi-got-1.d	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/multi-got-1.d	2007-09-25 15:40:44.000000000 +0200
@@ -19,7 +19,7 @@
  0x70000001 \(MIPS_RLD_VERSION\)           1
  0x70000005 \(MIPS_FLAGS\)                 NOTPOT
  0x70000006 \(MIPS_BASE_ADDRESS\)          0
- 0x7000000a \(MIPS_LOCAL_GOTNO\)           12
+ 0x7000000a \(MIPS_LOCAL_GOTNO\)           2
  0x70000011 \(MIPS_SYMTABNO\)              [0-9]+
  0x70000012 \(MIPS_UNREFEXTNO\)            [0-9]+
  0x70000013 \(MIPS_GOTSYM\)                0x[0-9a-f]+
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/multi-got-no-shared.d binutils-stable/ld/testsuite/ld-mips-elf/multi-got-no-shared.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/multi-got-no-shared.d	2006-07-15 20:23:55.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/multi-got-no-shared.d	2007-09-25 15:40:44.000000000 +0200
@@ -9,10 +9,10 @@
 
 Disassembly of section \.text:
 004000b0 <[^>]*> 3c1c0043 	lui	gp,0x43
-004000b4 <[^>]*> 279c9ff0 	addiu	gp,gp,-24592
+004000b4 <[^>]*> 279c9a00 	addiu	gp,gp,-26112
 004000b8 <[^>]*> afbc0008 	sw	gp,8\(sp\)
 #...
 00408d60 <[^>]*> 3c1c0044 	lui	gp,0x44
-00408d64 <[^>]*> 279cb960 	addiu	gp,gp,-18080
+00408d64 <[^>]*> 279cb348 	addiu	gp,gp,-19640
 00408d68 <[^>]*> afbc0008 	sw	gp,8\(sp\)
 #pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsbin-o32.d binutils-stable/ld/testsuite/ld-mips-elf/tlsbin-o32.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsbin-o32.d	2005-04-09 21:03:28.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsbin-o32.d	2007-09-25 15:40:44.000000000 +0200
@@ -10,14 +10,14 @@
   4000e0:	afbe0008 	sw	s8,8\(sp\)
   4000e4:	03a0f021 	move	s8,sp
   4000e8:	afbc0000 	sw	gp,0\(sp\)
-  4000ec:	8f99802c 	lw	t9,-32724\(gp\)
-  4000f0:	2784803c 	addiu	a0,gp,-32708
+  4000ec:	8f998018 	lw	t9,-32744\(gp\)
+  4000f0:	27848028 	addiu	a0,gp,-32728
   4000f4:	0320f809 	jalr	t9
   4000f8:	00000000 	nop
   4000fc:	8fdc0000 	lw	gp,0\(s8\)
   400100:	00000000 	nop
-  400104:	8f99802c 	lw	t9,-32724\(gp\)
-  400108:	27848034 	addiu	a0,gp,-32716
+  400104:	8f998018 	lw	t9,-32744\(gp\)
+  400108:	27848020 	addiu	a0,gp,-32736
   40010c:	0320f809 	jalr	t9
   400110:	00000000 	nop
   400114:	8fdc0000 	lw	gp,0\(s8\)
@@ -26,7 +26,7 @@
   400120:	24638000 	addiu	v1,v1,-32768
   400124:	00621821 	addu	v1,v1,v0
   400128:	7c02283b 	rdhwr	v0,\$5
-  40012c:	8f838030 	lw	v1,-32720\(gp\)
+  40012c:	8f83801c 	lw	v1,-32740\(gp\)
   400130:	00000000 	nop
   400134:	00621821 	addu	v1,v1,v0
   400138:	7c02283b 	rdhwr	v0,\$5
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsbin-o32.got binutils-stable/ld/testsuite/ld-mips-elf/tlsbin-o32.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsbin-o32.got	2005-04-09 21:03:28.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsbin-o32.got	2007-09-25 15:40:44.000000000 +0200
@@ -2,7 +2,5 @@
 .*:     file format elf32-tradbigmips
 
 Contents of section .got:
- 10000010 00000000 80000000 00000000 00000000  ................
- 10000020 00000000 00000000 00000000 00400158  .............@.X
- 10000030 ffff900c 00000001 00000000 00000001  ................
- 10000040 ffff8008                             ....            
+ 10000010 00000000 80000000 00400158 ffff900c  .........@.X....
+ 10000020 00000001 00000000 00000001 ffff8008  ................
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.d binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.d	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.d	2007-09-25 15:40:44.000000000 +0200
@@ -11,20 +11,20 @@
   .*:	afbe0008 	sw	s8,8\(sp\)
   .*:	03a0f021 	move	s8,sp
   .*:	afbc0000 	sw	gp,0\(sp\)
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848044 	addiu	a0,gp,-32700
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848030 	addiu	a0,gp,-32720
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848038 	addiu	a0,gp,-32712
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848024 	addiu	a0,gp,-32732
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848030 	addiu	a0,gp,-32720
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	2784801c 	addiu	a0,gp,-32740
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -33,10 +33,10 @@
   .*:	24638000 	addiu	v1,v1,-32768
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
-  .*:	8f83804c 	lw	v1,-32692\(gp\)
+  .*:	8f838038 	lw	v1,-32712\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
-  .*:	8f838040 	lw	v1,-32704\(gp\)
+  .*:	8f83802c 	lw	v1,-32724\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
@@ -61,20 +61,20 @@
   .*:	afbe0008 	sw	s8,8\(sp\)
   .*:	03a0f021 	move	s8,sp
   .*:	afbc0000 	sw	gp,0\(sp\)
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848044 	addiu	a0,gp,-32700
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848030 	addiu	a0,gp,-32720
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848038 	addiu	a0,gp,-32712
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848024 	addiu	a0,gp,-32732
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848030 	addiu	a0,gp,-32720
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	2784801c 	addiu	a0,gp,-32740
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -83,10 +83,10 @@
   .*:	24638000 	addiu	v1,v1,-32768
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
-  .*:	8f83804c 	lw	v1,-32692\(gp\)
+  .*:	8f838038 	lw	v1,-32712\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
-  .*:	8f838040 	lw	v1,-32704\(gp\)
+  .*:	8f83802c 	lw	v1,-32724\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.got binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.got	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-1.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,16 +4,15 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-10000054 R_MIPS_TLS_DTPMOD32  tlsbin_gd
-10000058 R_MIPS_TLS_DTPREL32  tlsbin_gd
-10000048 R_MIPS_TLS_DTPMOD32  tlsvar_gd
-1000004c R_MIPS_TLS_DTPREL32  tlsvar_gd
-10000050 R_MIPS_TLS_TPREL32  tlsvar_ie
-1000005c R_MIPS_TLS_TPREL32  tlsbin_ie
+10000040 R_MIPS_TLS_DTPMOD32  tlsbin_gd
+10000044 R_MIPS_TLS_DTPREL32  tlsbin_gd
+10000034 R_MIPS_TLS_DTPMOD32  tlsvar_gd
+10000038 R_MIPS_TLS_DTPREL32  tlsvar_gd
+1000003c R_MIPS_TLS_TPREL32  tlsvar_ie
+10000048 R_MIPS_TLS_TPREL32  tlsbin_ie
 
 
 Contents of section .got:
- 10000020 00000000 80000000 00000000 00000000  ................
- 10000030 00000000 00000000 00000000 0040053c  .............@..
- 10000040 00000001 00000000 00000000 00000000  ................
- 10000050 00000000 00000000 00000000 00000000  ................
+ 10000020 00000000 80000000 0040053c 00000001  .........@......
+ 10000030 00000000 00000000 00000000 00000000  ................
+ 10000040 00000000 00000000 00000000           ............    
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.d binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.d	2007-09-25 15:40:44.000000000 +0200
@@ -11,20 +11,20 @@
   .*:	afbe0008 	sw	s8,8\(sp\)
   .*:	03a0f021 	move	s8,sp
   .*:	afbc0000 	sw	gp,0\(sp\)
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848044 	addiu	a0,gp,-32700
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848030 	addiu	a0,gp,-32720
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848038 	addiu	a0,gp,-32712
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848024 	addiu	a0,gp,-32732
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848030 	addiu	a0,gp,-32720
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	2784801c 	addiu	a0,gp,-32740
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -33,10 +33,10 @@
   .*:	24638000 	addiu	v1,v1,-32768
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
-  .*:	8f83804c 	lw	v1,-32692\(gp\)
+  .*:	8f838038 	lw	v1,-32712\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
-  .*:	8f838040 	lw	v1,-32704\(gp\)
+  .*:	8f83802c 	lw	v1,-32724\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
@@ -61,20 +61,20 @@
   .*:	afbe0008 	sw	s8,8\(sp\)
   .*:	03a0f021 	move	s8,sp
   .*:	afbc0000 	sw	gp,0\(sp\)
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848044 	addiu	a0,gp,-32700
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848030 	addiu	a0,gp,-32720
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848038 	addiu	a0,gp,-32712
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848024 	addiu	a0,gp,-32732
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848030 	addiu	a0,gp,-32720
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	2784801c 	addiu	a0,gp,-32740
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -83,10 +83,10 @@
   .*:	24638000 	addiu	v1,v1,-32768
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
-  .*:	8f83804c 	lw	v1,-32692\(gp\)
+  .*:	8f838038 	lw	v1,-32712\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
-  .*:	8f838040 	lw	v1,-32704\(gp\)
+  .*:	8f83802c 	lw	v1,-32724\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.got binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.got	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-2.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,17 +4,16 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-10000054 R_MIPS_TLS_DTPMOD32  tlsbin_gd
-10000058 R_MIPS_TLS_DTPREL32  tlsbin_gd
-10000048 R_MIPS_TLS_DTPMOD32  tlsvar_gd
-1000004c R_MIPS_TLS_DTPREL32  tlsvar_gd
-10000050 R_MIPS_TLS_TPREL32  tlsvar_ie
-1000005c R_MIPS_TLS_TPREL32  tlsbin_ie
+10000040 R_MIPS_TLS_DTPMOD32  tlsbin_gd
+10000044 R_MIPS_TLS_DTPREL32  tlsbin_gd
+10000034 R_MIPS_TLS_DTPMOD32  tlsvar_gd
+10000038 R_MIPS_TLS_DTPREL32  tlsvar_gd
+1000003c R_MIPS_TLS_TPREL32  tlsvar_ie
+10000048 R_MIPS_TLS_TPREL32  tlsbin_ie
 
 
 Contents of section .got:
- 10000020 00000000 80000000 00000000 00000000  .*
- 10000030 00000000 00000000 00000000 0040053c  .*
- 10000040 00000001 00000000 00000000 00000000  .*
- 10000050 00000000 00000000 00000000 00000000  .*
- 10000060 00000000 00000000 00000000           .*
+ 10000020 00000000 80000000 0040053c 00000001  .*
+ 10000030 00000000 00000000 00000000 00000000  .*
+ 10000040 00000000 00000000 00000000 00000000  .*
+ 10000050 00000000 00000000                    .*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.d binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.d	2007-09-25 15:40:44.000000000 +0200
@@ -11,20 +11,20 @@
   .*:	afbe0008 	sw	s8,8\(sp\)
   .*:	03a0f021 	move	s8,sp
   .*:	afbc0000 	sw	gp,0\(sp\)
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848044 	addiu	a0,gp,-32700
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848030 	addiu	a0,gp,-32720
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848038 	addiu	a0,gp,-32712
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848024 	addiu	a0,gp,-32732
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848030 	addiu	a0,gp,-32720
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	2784801c 	addiu	a0,gp,-32740
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -33,10 +33,10 @@
   .*:	24638000 	addiu	v1,v1,-32768
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
-  .*:	8f83804c 	lw	v1,-32692\(gp\)
+  .*:	8f838038 	lw	v1,-32712\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
-  .*:	8f838040 	lw	v1,-32704\(gp\)
+  .*:	8f83802c 	lw	v1,-32724\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
@@ -57,20 +57,20 @@
   .*:	afbe0008 	sw	s8,8\(sp\)
   .*:	03a0f021 	move	s8,sp
   .*:	afbc0000 	sw	gp,0\(sp\)
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848044 	addiu	a0,gp,-32700
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848030 	addiu	a0,gp,-32720
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848038 	addiu	a0,gp,-32712
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848024 	addiu	a0,gp,-32732
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848030 	addiu	a0,gp,-32720
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	2784801c 	addiu	a0,gp,-32740
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -79,10 +79,10 @@
   .*:	24638000 	addiu	v1,v1,-32768
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
-  .*:	8f83804c 	lw	v1,-32692\(gp\)
+  .*:	8f838038 	lw	v1,-32712\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
-  .*:	8f838040 	lw	v1,-32704\(gp\)
+  .*:	8f83802c 	lw	v1,-32724\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.got binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.got	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32-3.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,17 +4,16 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-10000054 R_MIPS_TLS_DTPMOD32  tlsbin_gd
-10000058 R_MIPS_TLS_DTPREL32  tlsbin_gd
-10000048 R_MIPS_TLS_DTPMOD32  tlsvar_gd
-1000004c R_MIPS_TLS_DTPREL32  tlsvar_gd
-10000050 R_MIPS_TLS_TPREL32  tlsvar_ie
-1000005c R_MIPS_TLS_TPREL32  tlsbin_ie
+10000040 R_MIPS_TLS_DTPMOD32  tlsbin_gd
+10000044 R_MIPS_TLS_DTPREL32  tlsbin_gd
+10000034 R_MIPS_TLS_DTPMOD32  tlsvar_gd
+10000038 R_MIPS_TLS_DTPREL32  tlsvar_gd
+1000003c R_MIPS_TLS_TPREL32  tlsvar_ie
+10000048 R_MIPS_TLS_TPREL32  tlsbin_ie
 
 
 Contents of section .got:
- 10000020 00000000 80000000 00000000 00000000  .*
- 10000030 00000000 00000000 00000000 004005ec  .*
- 10000040 00000001 00000000 00000000 00000000  .*
- 10000050 00000000 00000000 00000000 00000000  .*
- 10000060 00000000 00000000 00000000           .*
+ 10000020 00000000 80000000 004005ec 00000001  .*
+ 10000030 00000000 00000000 00000000 00000000  .*
+ 10000040 00000000 00000000 00000000 00000000  .*
+ 10000050 00000000 00000000                    .*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32.d binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32.d	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32.d	2007-09-25 15:40:44.000000000 +0200
@@ -11,20 +11,20 @@
   .*:	afbe0008 	sw	s8,8\(sp\)
   .*:	03a0f021 	move	s8,sp
   .*:	afbc0000 	sw	gp,0\(sp\)
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848038 	addiu	a0,gp,-32712
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848024 	addiu	a0,gp,-32732
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848048 	addiu	a0,gp,-32696
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	27848034 	addiu	a0,gp,-32716
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
   .*:	00000000 	nop
-  .*:	8f99802c 	lw	t9,-32724\(gp\)
-  .*:	27848030 	addiu	a0,gp,-32720
+  .*:	8f998018 	lw	t9,-32744\(gp\)
+  .*:	2784801c 	addiu	a0,gp,-32740
   .*:	0320f809 	jalr	t9
   .*:	00000000 	nop
   .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -33,10 +33,10 @@
   .*:	24638000 	addiu	v1,v1,-32768
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
-  .*:	8f838044 	lw	v1,-32700\(gp\)
+  .*:	8f838030 	lw	v1,-32720\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
-  .*:	8f838040 	lw	v1,-32704\(gp\)
+  .*:	8f83802c 	lw	v1,-32724\(gp\)
   .*:	00000000 	nop
   .*:	00621821 	addu	v1,v1,v0
   .*:	7c02283b 	rdhwr	v0,\$5
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32.got binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlsdyn-o32.got	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlsdyn-o32.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,16 +4,15 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-10000048 R_MIPS_TLS_DTPMOD32  tlsbin_gd
-1000004c R_MIPS_TLS_DTPREL32  tlsbin_gd
-10000058 R_MIPS_TLS_DTPMOD32  tlsvar_gd
-1000005c R_MIPS_TLS_DTPREL32  tlsvar_gd
-10000054 R_MIPS_TLS_TPREL32  tlsbin_ie
-10000050 R_MIPS_TLS_TPREL32  tlsvar_ie
+10000034 R_MIPS_TLS_DTPMOD32  tlsbin_gd
+10000038 R_MIPS_TLS_DTPREL32  tlsbin_gd
+10000044 R_MIPS_TLS_DTPMOD32  tlsvar_gd
+10000048 R_MIPS_TLS_DTPREL32  tlsvar_gd
+10000040 R_MIPS_TLS_TPREL32  tlsbin_ie
+1000003c R_MIPS_TLS_TPREL32  tlsvar_ie
 
 
 Contents of section .got:
- 10000020 00000000 80000000 00000000 00000000  ................
- 10000030 00000000 00000000 00000000 0040051c  ................
- 10000040 00000001 00000000 00000000 00000000  ................
- 10000050 00000000 00000000 00000000 00000000  ................
+ 10000020 00000000 80000000 0040051c 00000001  ................
+ 10000030 00000000 00000000 00000000 00000000  ................
+ 10000040 00000000 00000000 00000000           ............    
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden2.d binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden2.d	2006-02-14 00:10:17.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden2.d	2007-09-25 15:40:44.000000000 +0200
@@ -4,7 +4,7 @@
 Disassembly of section \.text:
 
 .* <.*>:
-.*:	8f82802c *	lw	v0,-32724\(gp\)
+.*:	8f828018 *	lw	v0,-32744\(gp\)
 	\.\.\.
-.*:	8f82802c *	lw	v0,-32724\(gp\)
+.*:	8f828018 *	lw	v0,-32744\(gp\)
 	\.\.\.
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden2-got.d binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden2-got.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden2-got.d	2006-02-14 00:10:17.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden2-got.d	2007-09-25 15:40:44.000000000 +0200
@@ -2,5 +2,4 @@
 .*file format.*
 
 Contents of section \.got:
- *[0-9a-f]* 00000000 80000000 00000000 00000000 *\..*
- *[0-9a-f]* 00000000 00000000 00000000 00000ba8 *\..*
+ *[0-9a-f]* 00000000 80000000 00000ba8          *\..*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden3.d binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden3.d	2006-04-29 18:32:58.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden3.d	2007-09-25 15:40:44.000000000 +0200
@@ -14,11 +14,11 @@
 # Any order would be acceptable, but it must match the .got dump.
 #
 00080c00 <\.text>:
-   80c00:	8f848030 	lw	a0,-32720\(gp\)
-   80c04:	8f84803c 	lw	a0,-32708\(gp\)
-   80c08:	8f848034 	lw	a0,-32716\(gp\)
-   80c0c:	8f848038 	lw	a0,-32712\(gp\)
-   80c10:	8f848030 	lw	a0,-32720\(gp\)
-   80c14:	8f84803c 	lw	a0,-32708\(gp\)
-   80c18:	8f848034 	lw	a0,-32716\(gp\)
-   80c1c:	8f848038 	lw	a0,-32712\(gp\)
+   80c00:	8f84801c 	lw	a0,-32740\(gp\)
+   80c04:	8f848028 	lw	a0,-32728\(gp\)
+   80c08:	8f848020 	lw	a0,-32736\(gp\)
+   80c0c:	8f848024 	lw	a0,-32732\(gp\)
+   80c10:	8f84801c 	lw	a0,-32740\(gp\)
+   80c14:	8f848028 	lw	a0,-32728\(gp\)
+   80c18:	8f848020 	lw	a0,-32736\(gp\)
+   80c1c:	8f848024 	lw	a0,-32732\(gp\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden3.got binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden3.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden3.got	2006-04-29 18:32:58.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden3.got	2007-09-25 15:40:44.000000000 +0200
@@ -19,6 +19,5 @@
 # Any order would be acceptable, but it must match the .d dump.
 #
 Contents of section \.got:
- 90000 00000000 80000000 00000000 00000000  .*
- 90010 00000000 00000000 00000000 00000000  .*
- 90020 0000abc0 0000abc8 0000abcc 0000abc4  .*
+ 90000 00000000 80000000 00000000 0000abc0  .*
+ 90010 0000abc8 0000abcc 0000abc4           .*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden3.r binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden3.r
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden3.r	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden3.r	2007-09-25 15:40:44.000000000 +0200
@@ -6,8 +6,8 @@
 # The order of the next four entries doesn't matter.  The important thing
 # is that there is exactly one entry per GOT TLS slot.
 #
-00090020  0000002f R_MIPS_TLS_TPREL3
-00090024  0000002f R_MIPS_TLS_TPREL3
-00090028  0000002f R_MIPS_TLS_TPREL3
-0009002c  0000002f R_MIPS_TLS_TPREL3
-00090030  .*03 R_MIPS_REL32      00000000   undef
+0009000c  0000002f R_MIPS_TLS_TPREL3
+00090010  0000002f R_MIPS_TLS_TPREL3
+00090014  0000002f R_MIPS_TLS_TPREL3
+00090018  0000002f R_MIPS_TLS_TPREL3
+00090020  .*03 R_MIPS_REL32      00000000   undef
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden4.got binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden4.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden4.got	2006-04-29 18:32:58.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden4.got	2007-09-25 15:40:44.000000000 +0200
@@ -15,7 +15,8 @@
 # entry for each symbol.
 #
 #...
- 1c4080 0000abc8 0000abcc 0000abc0 0000abc4  .*
+ 1c4010 00000000 00000000 0000abc8 0000abcc  .*
+ 1c4020 0000abc0 0000abc4 00000000 80000000  .*
 #
 # Likewise, but the order of the entries in this GOT is:
 #
@@ -24,5 +25,4 @@
 #     foo0
 #     foo1
 #...
- 1d00c0 00000000 00000000 00000000 0000abcc  .*
- 1d00d0 0000abc8 0000abc0 0000abc4           .*
+ 1d0030 0000abcc 0000abc8 0000abc0 0000abc4  .*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden4.r binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden4.r
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-hidden4.r	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-hidden4.r	2007-09-25 15:40:44.000000000 +0200
@@ -7,13 +7,13 @@
 # important thing is that there is exactly one entry per GOT TLS slot
 # and that the addresses match those in the .got dump.
 #
-001c4080  0000002f R_MIPS_TLS_TPREL3
-001c4084  0000002f R_MIPS_TLS_TPREL3
-001c4088  0000002f R_MIPS_TLS_TPREL3
-001c408c  0000002f R_MIPS_TLS_TPREL3
-001d00cc  0000002f R_MIPS_TLS_TPREL3
-001d00d0  0000002f R_MIPS_TLS_TPREL3
-001d00d4  0000002f R_MIPS_TLS_TPREL3
-001d00d8  0000002f R_MIPS_TLS_TPREL3
+001c4018  0000002f R_MIPS_TLS_TPREL3
+001c401c  0000002f R_MIPS_TLS_TPREL3
+001c4020  0000002f R_MIPS_TLS_TPREL3
+001c4024  0000002f R_MIPS_TLS_TPREL3
+001d0030  0000002f R_MIPS_TLS_TPREL3
+001d0034  0000002f R_MIPS_TLS_TPREL3
+001d0038  0000002f R_MIPS_TLS_TPREL3
+001d003c  0000002f R_MIPS_TLS_TPREL3
 .* R_MIPS_REL32 .*
 #pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32.d binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32.d	2005-04-09 21:03:28.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32.d	2007-09-25 15:40:44.000000000 +0200
@@ -11,14 +11,14 @@
  .*:	afbe0008 	sw	s8,8\(sp\)
  .*:	03a0f021 	move	s8,sp
  .*:	afbc0000 	sw	gp,0\(sp\)
- .*:	8f99802c 	lw	t9,-32724\(gp\)
- .*:	2784803c 	addiu	a0,gp,-32708
+ .*:	8f998018 	lw	t9,-32744\(gp\)
+ .*:	27848028 	addiu	a0,gp,-32728
  .*:	0320f809 	jalr	t9
  .*:	00000000 	nop
  .*:	8fdc0000 	lw	gp,0\(s8\)
  .*:	00000000 	nop
- .*:	8f99802c 	lw	t9,-32724\(gp\)
- .*:	27848034 	addiu	a0,gp,-32716
+ .*:	8f998018 	lw	t9,-32744\(gp\)
+ .*:	27848020 	addiu	a0,gp,-32736
  .*:	0320f809 	jalr	t9
  .*:	00000000 	nop
  .*:	8fdc0000 	lw	gp,0\(s8\)
@@ -27,7 +27,7 @@
  .*:	24638000 	addiu	v1,v1,-32768
  .*:	00621821 	addu	v1,v1,v0
  .*:	7c02283b 	rdhwr	v0,\$5
- .*:	8f838030 	lw	v1,-32720\(gp\)
+ .*:	8f83801c 	lw	v1,-32740\(gp\)
  .*:	00000000 	nop
  .*:	00621821 	addu	v1,v1,v0
  .*:	03c0e821 	move	sp,s8
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32.got binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32.got	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,14 +4,12 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-00040494 R_MIPS_TLS_DTPMOD32  \*ABS\*
-0004049c R_MIPS_TLS_DTPMOD32  tlsvar_gd
-000404a0 R_MIPS_TLS_DTPREL32  tlsvar_gd
-00040490 R_MIPS_TLS_TPREL32  tlsvar_ie
+00040480 R_MIPS_TLS_DTPMOD32  \*ABS\*
+00040488 R_MIPS_TLS_DTPMOD32  tlsvar_gd
+0004048c R_MIPS_TLS_DTPREL32  tlsvar_gd
+0004047c R_MIPS_TLS_TPREL32  tlsvar_ie
 
 
 Contents of section .got:
- 40470 00000000 80000000 00000000 00000000  ................
- 40480 00000000 00000000 00000000 00000440  ................
- 40490 00000000 00000000 00000000 00000000  ................
- 404a0 00000000                             ....            
+ 40470 00000000 80000000 00000440 00000000  ................
+ 40480 00000000 00000000 00000000 00000000  ................
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32-hidden.got binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32-hidden.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32-hidden.got	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32-hidden.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,13 +4,11 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-000403d0 R_MIPS_TLS_TPREL32  \*ABS\*
-000403d4 R_MIPS_TLS_DTPMOD32  \*ABS\*
-000403dc R_MIPS_TLS_DTPMOD32  \*ABS\*
+000403bc R_MIPS_TLS_TPREL32  \*ABS\*
+000403c0 R_MIPS_TLS_DTPMOD32  \*ABS\*
+000403c8 R_MIPS_TLS_DTPMOD32  \*ABS\*
 
 
 Contents of section .got:
- 403b0 00000000 80000000 00000000 00000000  ................
- 403c0 00000000 00000000 00000000 00000380  ................
- 403d0 00000008 00000000 00000000 00000000  ................
- 403e0 ffff8004                             ....            
+ 403b0 00000000 80000000 00000380 00000008  ................
+ 403c0 00000000 00000000 00000000 ffff8004  ................
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32-ver.got binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32-ver.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tlslib-o32-ver.got	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tlslib-o32-ver.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,14 +4,12 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-00040534 R_MIPS_TLS_DTPMOD32  \*ABS\*
-0004053c R_MIPS_TLS_DTPMOD32  tlsvar_gd
-00040540 R_MIPS_TLS_DTPREL32  tlsvar_gd
-00040530 R_MIPS_TLS_TPREL32  tlsvar_ie
+00040520 R_MIPS_TLS_DTPMOD32  \*ABS\*
+00040528 R_MIPS_TLS_DTPMOD32  tlsvar_gd
+0004052c R_MIPS_TLS_DTPREL32  tlsvar_gd
+0004051c R_MIPS_TLS_TPREL32  tlsvar_ie
 
 
 Contents of section .got:
- 40510 00000000 80000000 00000000 00000000  ................
- 40520 00000000 00000000 00000000 000004e0  ................
- 40530 00000000 00000000 00000000 00000000  ................
- 40540 00000000                             ....            
+ 40510 00000000 80000000 000004e0 00000000  ................
+ 40520 00000000 00000000 00000000 00000000  ................
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-multi-got-1.d binutils-stable/ld/testsuite/ld-mips-elf/tls-multi-got-1.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-multi-got-1.d	2005-04-09 21:03:28.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-multi-got-1.d	2007-09-25 15:40:44.000000000 +0200
@@ -5,16 +5,16 @@
 
 #...
 [0-9a-f]+ <tls_bits_1>:
-   [0-9a-f]+:	27841c90 	addiu	a0,gp,7312
-   [0-9a-f]+:	27841c84 	addiu	a0,gp,7300
-   [0-9a-f]+:	24441c8c 	addiu	a0,v0,7308
+   [0-9a-f]+:	27841c64 	addiu	a0,gp,7268
+   [0-9a-f]+:	27841c58 	addiu	a0,gp,7256
+   [0-9a-f]+:	24441c60 	addiu	a0,v0,7264
    [0-9a-f]+:	00000000 	nop
 
 [0-9a-f]+ <sym_2_0000>:
 #...
 [0-9a-f]+ <tls_bits_2>:
-   [0-9a-f]+:	27841c90 	addiu	a0,gp,7312
-   [0-9a-f]+:	27841c84 	addiu	a0,gp,7300
-   [0-9a-f]+:	24441c8c 	addiu	a0,v0,7308
+   [0-9a-f]+:	27841c64 	addiu	a0,gp,7268
+   [0-9a-f]+:	27841c58 	addiu	a0,gp,7256
+   [0-9a-f]+:	24441c60 	addiu	a0,v0,7264
    [0-9a-f]+:	00000000 	nop
 #pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-multi-got-1.got binutils-stable/ld/testsuite/ld-mips-elf/tls-multi-got-1.got
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-multi-got-1.got	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-multi-got-1.got	2007-09-25 15:40:44.000000000 +0200
@@ -4,33 +4,33 @@
 DYNAMIC RELOCATION RECORDS
 OFFSET   TYPE              VALUE 
 00000000 R_MIPS_NONE       \*ABS\*
-0013f948 R_MIPS_TLS_DTPMOD32  \*ABS\*
-001495d0 R_MIPS_TLS_DTPMOD32  \*ABS\*
-0013f954 R_MIPS_TLS_DTPMOD32  tlsvar_gd
-0013f958 R_MIPS_TLS_DTPREL32  tlsvar_gd
-001495dc R_MIPS_TLS_DTPMOD32  tlsvar_gd
-001495e0 R_MIPS_TLS_DTPREL32  tlsvar_gd
-0013f950 R_MIPS_TLS_TPREL32  tlsvar_ie
-001495d8 R_MIPS_TLS_TPREL32  tlsvar_ie
-00143f7c R_MIPS_REL32      sym_1_9526
+0013f840 R_MIPS_TLS_DTPMOD32  \*ABS\*
+0014949c R_MIPS_TLS_DTPMOD32  \*ABS\*
+0013f84c R_MIPS_TLS_DTPMOD32  tlsvar_gd
+0013f850 R_MIPS_TLS_DTPREL32  tlsvar_gd
+001494a8 R_MIPS_TLS_DTPMOD32  tlsvar_gd
+001494ac R_MIPS_TLS_DTPREL32  tlsvar_gd
+0013f848 R_MIPS_TLS_TPREL32  tlsvar_ie
+001494a4 R_MIPS_TLS_TPREL32  tlsvar_ie
+00143e48 R_MIPS_REL32      sym_1_9526
 #...
-00139bd0 R_MIPS_REL32      sym_2_8654
+00139ac8 R_MIPS_REL32      sym_2_8654
 
 
 Contents of section .got:
- 122420 00000000 80000000 00000000 00000000  .*
- 122430 00000000 00000000 00000000 00000000  .*
- 122440 00000000 00000000 00000000 00000000  .*
- 122450 00000000 000d8048 000d66a4 000d2054  .*
+ 122370 00000000 80000000 000d7f98 000d65f4  .*
+ 122380 000d1fa4 000d6010 000d5a48 000d19c0  .*
 #...
- 13f930 00000000 00000000 00000000 00000000  .*
- 13f940 00000000 00000000 00000000 00000000  .*
- 13f950 00000000 00000000 00000000 00000000  .*
- 13f960 80000000 00000000 00000000 00000000  .*
+ 135bf0 000cf204 000e0e48 00000000 80000000  .*
+ 135c00 00000000 00000000 00000000 00000000  .*
 #...
- 1495a0 00000000 00000000 00000000 00000000  .*
- 1495b0 00000000 00000000 00000000 00000000  .*
- 1495c0 00000000 00000000 00000000 00000000  .*
- 1495d0 00000000 00000000 00000000 00000000  .*
- 1495e0 00000000                             .*
+ 13f830 00000000 00000000 00000000 00000000  .*
+ 13f840 00000000 00000000 00000000 00000000  .*
+ 13f850 00000000 00000000 80000000 00000000  .*
+#...
+ 149460 00000000 00000000 00000000 00000000  .*
+ 149470 00000000 00000000 00000000 00000000  .*
+ 149480 00000000 00000000 00000000 00000000  .*
+ 149490 00000000 00000000 00000000 00000000  .*
+ 1494a0 00000000 00000000 00000000 00000000  .*
 #pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-multi-got-1.r binutils-stable/ld/testsuite/ld-mips-elf/tls-multi-got-1.r
--- binutils-2.18.50.0.1/ld/testsuite/ld-mips-elf/tls-multi-got-1.r	2006-10-20 20:51:00.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-mips-elf/tls-multi-got-1.r	2007-09-25 15:40:44.000000000 +0200
@@ -6,14 +6,14 @@
  0x00000006 \(SYMTAB\).*
  0x0000000a \(STRSZ\)                      220091 \(bytes\)
  0x0000000b \(SYMENT\)                     16 \(bytes\)
- 0x00000003 \(PLTGOT\)                     0x122420
+ 0x00000003 \(PLTGOT\)                     0x122370
  0x00000011 \(REL\)                        0xa7978
  0x00000012 \(RELSZ\)                      160072 \(bytes\)
  0x00000013 \(RELENT\)                     8 \(bytes\)
  0x70000001 \(MIPS_RLD_VERSION\)           1
  0x70000005 \(MIPS_FLAGS\)                 NOTPOT
  0x70000006 \(MIPS_BASE_ADDRESS\)          0
- 0x7000000a \(MIPS_LOCAL_GOTNO\)           13
+ 0x7000000a \(MIPS_LOCAL_GOTNO\)           2
  0x70000011 \(MIPS_SYMTABNO\)              20013
  0x70000012 \(MIPS_UNREFEXTNO\)            11
  0x70000013 \(MIPS_GOTSYM\)                0xd
@@ -31,8 +31,8 @@
 [0-9a-f ]+R_MIPS_TLS_DTPREL 00000000   tlsvar_gd
 [0-9a-f ]+R_MIPS_TLS_TPREL3 00000004   tlsvar_ie
 [0-9a-f ]+R_MIPS_TLS_TPREL3 00000004   tlsvar_ie
-[0-9a-f ]+R_MIPS_REL32      000d8048   sym_1_9526
-[0-9a-f ]+R_MIPS_REL32      000d66a4   sym_1_7885
+[0-9a-f ]+R_MIPS_REL32      000d7f98   sym_1_9526
+[0-9a-f ]+R_MIPS_REL32      000d65f4   sym_1_7885
 #...
-[0-9a-f ]+R_MIPS_REL32      000cf2b4   sym_1_0465
-[0-9a-f ]+R_MIPS_REL32      000e0ef8   sym_2_8654
+[0-9a-f ]+R_MIPS_REL32      000cf204   sym_1_0465
+[0-9a-f ]+R_MIPS_REL32      000e0e48   sym_2_8654
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-11.d binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-11.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-11.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-11.d	2007-09-25 15:40:51.000000000 +0200
@@ -0,0 +1,10 @@
+#source: attr-gnu-8-1.s
+#source: attr-gnu-8-1.s
+#as: -a32
+#ld: -r -melf32ppc
+#readelf: -A
+#target: powerpc*-*-*
+
+Attribute Section: gnu
+File Attributes
+  Tag_GNU_Power_ABI_Vector: Generic
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-1.s binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-1.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-1.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-1.s	2007-09-25 15:40:51.000000000 +0200
@@ -0,0 +1 @@
+.gnu_attribute 8,1
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-31.d binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-31.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-31.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-31.d	2007-09-25 15:40:51.000000000 +0200
@@ -0,0 +1,6 @@
+#source: attr-gnu-8-3.s
+#source: attr-gnu-8-1.s
+#as: -a32
+#ld: -r -melf32ppc
+#warning: Warning: .* uses vector ABI "SPE", .* uses "generic"
+#target: powerpc*-*-*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-3.s binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-3.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-powerpc/attr-gnu-8-3.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-powerpc/attr-gnu-8-3.s	2007-09-25 15:40:51.000000000 +0200
@@ -0,0 +1 @@
+.gnu_attribute 8,3
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/map-address.d binutils-stable/ld/testsuite/ld-scripts/map-address.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/map-address.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-scripts/map-address.d	2007-09-25 15:40:54.000000000 +0200
@@ -1,8 +1,6 @@
 #...
 Linker script and memory map
 #...
- *0x0*000020 *def1 = .*
- *0x0*000020 *def2 = def1
  *0x0*010001 *\. = 0x10001
  *0x0*010001 *foo = \.
  *0x0*010201 *\. = \(\. \+ 0x200\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/map-address.t binutils-stable/ld/testsuite/ld-scripts/map-address.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/map-address.t	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-scripts/map-address.t	2007-09-25 15:40:54.000000000 +0200
@@ -1,7 +1,5 @@
 SECTIONS
 {
-  def1 = DEFINED(foo) ? 0x10 : 0x20;
-  def2 = def1;
   . = 0x10001;
   foo = .;
   . += 0x200;
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over1.d binutils-stable/ld/testsuite/ld-scripts/rgn-over1.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over1.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over1.d	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,34 @@
+# name: rgn-over1
+# source: rgn-over.s
+# ld: -T rgn-over1.t -Map tmpdir/rgn-over1.map
+# error: \A[^ \n]*?ld[^:\n]*?: [^\n]*?section \.text will not fit in region r1\n[^ \n]*?ld[^:\n]*?: region r1 overflowed by 16 bytes\Z
+
+Discarded input sections
+#...
+Memory\s+Configuration
+
+Name\s+Origin\s+Length\s+Attributes
+bss\s+0x0+0000\s+0x0+0000\s+xrw
+r1\s+0x0+1000\s+0x0+0008\s+xrw
+\*default\*\s+0x0+0000\s+0xf+ffff
+
+Linker\s+script\s+and\s+memory\s+map
+
+\s*0x0+1000\s+_start\s+=\s+0x1000
+
+\s*\.bss\s+0x0+0000\s+0x0
+\s*\*\(\.bss\)
+\s*\.bss\s+0x0+0000\s+0x0\s+.*?
+
+\s*\.text\s+0x0+1000\s+0xc
+\s*\*\(\.txt\)
+\s*\.txt\s+0x0+1000\s+0xc\s+.*?
+
+\s*\.data\s+0x0+100c\s+0xc
+\s*\*\(\.dat\)
+\s*\.dat\s+0x0+100c\s+0xc\s+.*?
+
+/DISCARD/
+ \*\(\*\)
+LOAD\s+.*?
+OUTPUT\(.*?\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over1.t binutils-stable/ld/testsuite/ld-scripts/rgn-over1.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over1.t	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over1.t	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,13 @@
+/* Memory region overflow tests: one region, first output sect doesn't fit. */
+
+MEMORY {
+  bss (rwx) : ORIGIN = 0, LENGTH = 0
+  r1  (rwx) : ORIGIN = 0x1000, LENGTH = 8
+}
+_start = 0x1000;
+SECTIONS {
+  .bss  : { *(.bss)  } > bss
+  .text : { *(.txt) } > r1
+  .data : { *(.dat) } > r1
+  /DISCARD/ : { *(*) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over2.d binutils-stable/ld/testsuite/ld-scripts/rgn-over2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over2.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over2.d	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,34 @@
+# name: rgn-over2
+# source: rgn-over.s
+# ld: -T rgn-over2.t -Map tmpdir/rgn-over2.map
+# error: \A[^ \n]*?ld[^:\n]*?: [^\n]*?section \.data will not fit in region r1\n[^ \n]*?ld[^:\n]*?: region r1 overflowed by 4 bytes\Z
+
+Discarded input sections
+#...
+Memory\s+Configuration
+
+Name\s+Origin\s+Length\s+Attributes
+bss\s+0x0+0000\s+0x0+0000\s+xrw
+r1\s+0x0+1000\s+0x0+0014\s+xrw
+\*default\*\s+0x0+0000\s+0xf+ffff
+
+Linker\s+script\s+and\s+memory\s+map
+
+\s*0x0+1000\s+_start\s+=\s+0x1000
+
+\s*\.bss\s+0x0+0000\s+0x0
+\s*\*\(\.bss\)
+\s*\.bss\s+0x0+0000\s+0x0\s+.*?
+
+\s*\.text\s+0x0+1000\s+0xc
+\s*\*\(\.txt\)
+\s*\.txt\s+0x0+1000\s+0xc\s+.*?
+
+\s*\.data\s+0x0+100c\s+0xc
+\s*\*\(\.dat\)
+\s*\.dat\s+0x0+100c\s+0xc\s+.*?
+
+/DISCARD/
+ \*\(\*\)
+LOAD\s+.*?
+OUTPUT\(.*?\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over2.t binutils-stable/ld/testsuite/ld-scripts/rgn-over2.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over2.t	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over2.t	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,14 @@
+/* Memory region overflow tests: one region, first output sect fits,
+   second doesn't. */
+
+MEMORY {
+  bss (rwx) : ORIGIN = 0, LENGTH = 0
+  r1 (rwx) : ORIGIN = 0x1000, LENGTH = 20
+}
+_start = 0x1000;
+SECTIONS {
+  .bss  : { *(.bss)  } > bss
+  .text : { *(.txt) } > r1
+  .data : { *(.dat) } > r1
+  /DISCARD/ : { *(*) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over3.d binutils-stable/ld/testsuite/ld-scripts/rgn-over3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over3.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over3.d	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,35 @@
+# name: rgn-over3
+# source: rgn-over.s
+# ld: -T rgn-over3.t -Map tmpdir/rgn-over3.map
+# error: \A[^ \n]*?ld[^:\n]*?: [^\n]*?section \.text will not fit in region r1\n[^ \n]*?ld[^:\n]*?: [^\n]*?section \.data will not fit in region r2\n[^ \n]*?ld[^:\n]*?: region r1 overflowed by 4 bytes\n[^ \n]*?ld[^:\n]*?: region r2 overflowed by 4 bytes\Z
+
+Discarded input sections
+#...
+Memory\s+Configuration
+
+Name\s+Origin\s+Length\s+Attributes
+bss\s+0x0+0000\s+0x0+0000\s+xrw
+r1\s+0x0+1000\s+0x0+0008\s+xrw
+r2\s+0x0+2000\s+0x0+0008\s+xrw
+\*default\*\s+0x0+0000\s+0xf+ffff
+
+Linker\s+script\s+and\s+memory\s+map
+
+\s*0x0+1000\s+_start\s+=\s+0x1000
+
+\s*\.bss\s+0x0+0000\s+0x0
+\s*\*\(\.bss\)
+\s*\.bss\s+0x0+0000\s+0x0\s+.*?
+
+\s*\.text\s+0x0+1000\s+0xc
+\s*\*\(\.txt\)
+\s*\.txt\s+0x0+1000\s+0xc\s+.*?
+
+\s*\.data\s+0x0+2000\s+0xc
+\s*\*\(\.dat\)
+\s*\.dat\s+0x0+2000\s+0xc\s+.*?
+
+/DISCARD/
+ \*\(\*\)
+LOAD\s+.*?
+OUTPUT\(.*?\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over3.t binutils-stable/ld/testsuite/ld-scripts/rgn-over3.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over3.t	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over3.t	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,15 @@
+/* Memory region overflow tests: two regions, each too small for the single
+   section placed there. */
+
+MEMORY {
+  bss (rwx) : ORIGIN = 0, LENGTH = 0
+  r1  (rwx) : ORIGIN = 0x1000, LENGTH = 8
+  r2  (rwx) : ORIGIN = 0x2000, LENGTH = 8
+}
+_start = 0x1000;
+SECTIONS {
+  .bss  : { *(.bss)  } > bss
+  .text : { *(.txt) } > r1
+  .data : { *(.dat) } > r2
+  /DISCARD/ : { *(*) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over4.d binutils-stable/ld/testsuite/ld-scripts/rgn-over4.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over4.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over4.d	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,35 @@
+# name: rgn-over4
+# source: rgn-over.s
+# ld: -T rgn-over4.t -Map tmpdir/rgn-over4.map
+# error: \A[^ \n]*?ld[^:\n]*?: [^:\n]*?section \.text will not fit in region r1\n[^ \n]*?ld[^:\n]*?: region r1 overflowed by 16 bytes\Z
+
+Discarded input sections
+#...
+Memory\s+Configuration
+
+Name\s+Origin\s+Length\s+Attributes
+bss\s+0x0+0000\s+0x0+0000\s+xrw
+r1\s+0x0+1000\s+0x0+0008\s+xrw
+v1\s+0x0+2000\s+0x0+0018\s+xrw
+\*default\*\s+0x0+0000\s+0xf+ffff
+
+Linker\s+script\s+and\s+memory\s+map
+
+\s*0x0+1000\s+_start\s+=\s+0x1000
+
+\s*\.bss\s+0x0+0000\s+0x0
+\s*\*\(\.bss\)
+\s*\.bss\s+0x0+0000\s+0x0\s+.*?
+
+\s*\.text\s+0x0+1000\s+0xc\s+load\s+address\s+0x0+2000
+\s*\*\(\.txt\)
+\s*\.txt\s+0x0+1000\s+0xc\s+.*?
+
+\s*\.data\s+0x0+100c\s+0xc\s+load\s+address\s+0x0+200c
+\s*\*\(\.dat\)
+\s*\.dat\s+0x0+100c\s+0xc\s+.*?
+
+/DISCARD/
+ \*\(\*\)
+LOAD\s+.*?
+OUTPUT\(.*?\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over4.t binutils-stable/ld/testsuite/ld-scripts/rgn-over4.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over4.t	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over4.t	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,14 @@
+/* Memory region overflow tests: overflow VMA but not LMA.  */
+
+MEMORY {
+  bss (rwx) : ORIGIN = 0, LENGTH = 0
+  r1  (rwx) : ORIGIN = 0x1000, LENGTH = 8
+  v1  (rwx) : ORIGIN = 0x2000, LENGTH = 24
+}
+_start = 0x1000;
+SECTIONS {
+  .bss  : { *(.bss)  } > bss
+  .text : { *(.txt) } > r1 AT> v1
+  .data : { *(.dat) } > r1 AT> v1
+  /DISCARD/ : { *(*) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over5.d binutils-stable/ld/testsuite/ld-scripts/rgn-over5.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over5.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over5.d	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,35 @@
+# name: rgn-over5
+# source: rgn-over.s
+# ld: -T rgn-over5.t -Map tmpdir/rgn-over5.map
+# error: \A[^ \n]*?ld[^:\n]*?: [^\n]*?section \.text will not fit in region v1\n[^ \n]*?ld[^:\n]*?: region v1 overflowed by 16 bytes\Z
+
+Discarded input sections
+#...
+Memory\s+Configuration
+
+Name\s+Origin\s+Length\s+Attributes
+bss\s+0x0+0000\s+0x0+0000\s+xrw
+r1\s+0x0+1000\s+0x0+0018\s+xrw
+v1\s+0x0+2000\s+0x0+0008\s+xrw
+\*default\*\s+0x0+0000\s+0xf+ffff
+
+Linker\s+script\s+and\s+memory\s+map
+
+\s*0x0+1000\s+_start\s+=\s+0x1000
+
+\s*\.bss\s+0x0+0000\s+0x0
+\s*\*\(\.bss\)
+\s*\.bss\s+0x0+0000\s+0x0\s+.*?
+
+\s*\.text\s+0x0+1000\s+0xc\s+load\s+address\s+0x0+2000
+\s*\*\(\.txt\)
+\s*\.txt\s+0x0+1000\s+0xc\s+.*?
+
+\s*\.data\s+0x0+100c\s+0xc\s+load\s+address\s+0x0+200c
+\s*\*\(\.dat\)
+\s*\.dat\s+0x0+100c\s+0xc\s+.*?
+
+/DISCARD/
+ \*\(\*\)
+LOAD\s+.*?
+OUTPUT\(.*?\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over5.t binutils-stable/ld/testsuite/ld-scripts/rgn-over5.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over5.t	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over5.t	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,14 @@
+/* Memory region overflow tests: overflow LMA but not VMA.  */
+
+MEMORY {
+  bss (rwx) : ORIGIN = 0, LENGTH = 0
+  r1  (rwx) : ORIGIN = 0x1000, LENGTH = 24
+  v1  (rwx) : ORIGIN = 0x2000, LENGTH = 8
+}
+_start = 0x1000;
+SECTIONS {
+  .bss  : { *(.bss)  } > bss
+  .text : { *(.txt) } > r1 AT> v1
+  .data : { *(.dat) } > r1 AT> v1
+  /DISCARD/ : { *(*) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over6.d binutils-stable/ld/testsuite/ld-scripts/rgn-over6.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over6.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over6.d	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,35 @@
+# name: rgn-over6
+# source: rgn-over.s
+# ld: -T rgn-over6.t -Map tmpdir/rgn-over6.map
+# error: \A[^ \n]*?ld[^:\n]*?: [^\n]*?section \.text will not fit in region r1\n[^ \n]*?ld[^:\n]*?: [^\n]*?section \.text will not fit in region v1\n[^ \n]*?ld[^:\n]*?: region r1 overflowed by 16 bytes\n[^ \n]*?ld[^:\n]*?: region v1 overflowed by 16 bytes\Z
+
+Discarded input sections
+#...
+Memory\s+Configuration
+
+Name\s+Origin\s+Length\s+Attributes
+bss\s+0x0+0000\s+0x0+0000\s+xrw
+r1\s+0x0+1000\s+0x0+0008\s+xrw
+v1\s+0x0+2000\s+0x0+0008\s+xrw
+\*default\*\s+0x0+0000\s+0xf+ffff
+
+Linker\s+script\s+and\s+memory\s+map
+
+\s*0x0+1000\s+_start\s+=\s+0x1000
+
+\s*\.bss\s+0x0+0000\s+0x0
+\s*\*\(\.bss\)
+\s*\.bss\s+0x0+0000\s+0x0\s+.*?
+
+\s*\.text\s+0x0+1000\s+0xc\s+load\s+address\s+0x0+2000
+\s*\*\(\.txt\)
+\s*\.txt\s+0x0+1000\s+0xc\s+.*?
+
+\s*\.data\s+0x0+100c\s+0xc\s+load\s+address\s+0x0+200c
+\s*\*\(\.dat\)
+\s*\.dat\s+0x0+100c\s+0xc\s+.*?
+
+/DISCARD/
+ \*\(\*\)
+LOAD\s+.*?
+OUTPUT\(.*?\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over6.t binutils-stable/ld/testsuite/ld-scripts/rgn-over6.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over6.t	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over6.t	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,14 @@
+/* Memory region overflow tests: overflow LMA and VMA.  */
+
+MEMORY {
+  bss (rwx) : ORIGIN = 0, LENGTH = 0
+  r1  (rwx) : ORIGIN = 0x1000, LENGTH = 8
+  v1  (rwx) : ORIGIN = 0x2000, LENGTH = 8
+}
+_start = 0x1000;
+SECTIONS {
+  .bss  : { *(.bss)  } > bss
+  .text : { *(.txt) } > r1 AT> v1
+  .data : { *(.dat) } > r1 AT> v1
+  /DISCARD/ : { *(*) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over7.d binutils-stable/ld/testsuite/ld-scripts/rgn-over7.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over7.d	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over7.d	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,35 @@
+# name: rgn-over7
+# source: rgn-over.s
+# ld: -T rgn-over7.t -Map tmpdir/rgn-over7.map
+# error: \A[^ \n]*?ld[^:\n]*?: [^\n]*?section \.text will not fit in region r1\n[^ \n]*?ld[^:\n]*?: section \.data \[0+1008 -> 0+1013\] overlaps section \.text \[0+1000 -> 0+100b\]\n[^ \n]*?ld[^:\n]*?: region r1 overflowed by 4 bytes\Z
+
+Discarded input sections
+#...
+Memory\s+Configuration
+
+Name\s+Origin\s+Length\s+Attributes
+bss\s+0x0+0000\s+0x0+0000\s+xrw
+r1\s+0x0+1000\s+0x0+0008\s+xrw
+r2\s+0x0+1008\s+0x0+000c\s+xrw
+\*default\*\s+0x0+0000\s+0xf+ffff
+
+Linker\s+script\s+and\s+memory\s+map
+
+\s*0x0+1000\s+_start\s+=\s+0x1000
+
+\s*\.bss\s+0x0+0000\s+0x0
+\s*\*\(\.bss\)
+\s*\.bss\s+0x0+0000\s+0x0\s+.*?
+
+\s*\.text\s+0x0+1000\s+0xc
+\s*\*\(\.txt\)
+\s*\.txt\s+0x0+1000\s+0xc\s+.*?
+
+\s*\.data\s+0x0+1008\s+0xc
+\s*\*\(\.dat\)
+\s*\.dat\s+0x0+1008\s+0xc\s+.*?
+
+/DISCARD/
+ \*\(\*\)
+LOAD\s+.*?
+OUTPUT\(.*?\)
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over7.t binutils-stable/ld/testsuite/ld-scripts/rgn-over7.t
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over7.t	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over7.t	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,14 @@
+/* Memory region overflow tests: overflow r1 plus text/data collision.  */
+
+MEMORY {
+  bss (rwx) : ORIGIN = 0, LENGTH = 0
+  r1  (rwx) : ORIGIN = 0x1000, LENGTH = 8
+  r2  (rwx) : ORIGIN = 0x1008, LENGTH = 12
+}
+_start = 0x1000;
+SECTIONS {
+  .bss  : { *(.bss)  } > bss
+  .text : { *(.txt) } > r1
+  .data : { *(.dat) } > r2
+  /DISCARD/ : { *(*) }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over.exp binutils-stable/ld/testsuite/ld-scripts/rgn-over.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over.exp	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over.exp	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,46 @@
+# Test for proper diagnosis of overflowed memory regions.
+# Copyright 2007 Free Software Foundation, Inc.
+#
+# This file is part of the GNU Binutils.
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 3 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston,
+# MA 02110-1301, USA.
+
+if ![is_elf_format] {
+    return
+}
+
+load_lib ld-lib.exp
+
+set test_list [lsort [glob -nocomplain $srcdir/$subdir/rgn-over*.d]]
+foreach test_file $test_list {
+    set test_name [file rootname $test_file]
+    set map_file "tmpdir/[file tail $test_name].map"
+    verbose $test_name
+    run_dump_test $test_name
+
+    set testname "[file tail $test_name] (map check)"
+    if [file exists $map_file] {
+	# compare the map file to the expectations in the .d file
+	# (run_dump_test can't do that).
+	if [regexp_diff $map_file $test_file] {
+	    fail $testname
+	} else {
+	    pass $testname
+	}
+    } else {
+	untested $testname
+    }
+}
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over.s binutils-stable/ld/testsuite/ld-scripts/rgn-over.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-scripts/rgn-over.s	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/ld/testsuite/ld-scripts/rgn-over.s	2007-09-25 15:40:54.000000000 +0200
@@ -0,0 +1,9 @@
+	.section .txt, "ax", "progbits"
+	.4byte 0x11223344
+	.4byte 0x55667788
+	.4byte 0x99aabbcc
+
+	.section .dat, "aw", "progbits"
+	.4byte 0x01020304
+	.4byte 0x05060708
+	.4byte 0x090a0b0c
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/line.exp binutils-stable/ld/testsuite/ld-x86-64/line.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/line.exp	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/line.exp	1970-01-01 01:00:00.000000000 +0100
@@ -1,57 +0,0 @@
-# Test that the linker reports undefined symbol line number correctly.
-#
-#   Copyright 2007  Free Software Foundation, Inc.
-#
-# This file is part of the GNU Binutils.
-#
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 3 of the License, or
-# (at your option) any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston,
-# MA 02110-1301, USA.
-
-if { !([istarget "x86_64-*-elf*"]
-       || [istarget "x86_64-*-linux*"]) } {
-    return
-}
-
-set testline "undefined line"
-
-if ![ld_assemble $as "--64 $srcdir/$subdir/undefined.s" tmpdir/undefined.o] {
-    verbose "Unable to assemble test file!" 1
-    unresolved $testline
-    return
-}
-
-remote_file host delete "tmpdir/undefined"
-
-# Using -e start prevents the SunOS linker from trying to build a
-# shared library.
-send_log "$ld -e start -melf_x86_64 -o tmpdir/undefined tmpdir/undefined.o\n"
-set exec_output [run_host_cmd "$ld" "-e start -melf_x86_64 -o tmpdir/undefined tmpdir/undefined.o"]
-
-send_log "$exec_output\n"
-verbose "$exec_output"
-
-proc checkund { string testname } {
-    global exec_output
-
-    if [string match "*$string*" $exec_output] {
-	pass $testname
-    } else {
-	fail $testname
-    }
-}
-
-set ml "undefined.c:9: undefined reference to `*this_function_is_not_defined'"
-
-checkund $ml $testline
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd2.d binutils-stable/ld/testsuite/ld-x86-64/tlsgd2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd2.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsgd2.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS GD->IE transition check
-#as: --64
-#ld: -melf_x86_64
-#error: .*TLS transition from R_X86_64_TLSGD to R_X86_64_GOTTPOFF against `foo'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd2.s binutils-stable/ld/testsuite/ld-x86-64/tlsgd2.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd2.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsgd2.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,5 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leaq	foo@TLSGD(%rip), %rdi
-	call	__tls_get_addr
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd3.d binutils-stable/ld/testsuite/ld-x86-64/tlsgd3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd3.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsgd3.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS GD->LE transition check
-#as: --64
-#ld: -melf_x86_64
-#error: .*TLS transition from R_X86_64_TLSGD to R_X86_64_TPOFF32 against `a local symbol'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd3.s binutils-stable/ld/testsuite/ld-x86-64/tlsgd3.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsgd3.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsgd3.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,11 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leaq	foo@TLSGD(%rip), %rdi
-	call	__tls_get_addr
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie1.dd binutils-stable/ld/testsuite/ld-x86-64/tlsie1.dd
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie1.dd	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsie1.dd	1970-01-01 01:00:00.000000000 +0100
@@ -1,16 +0,0 @@
-#source: tlsie1.s
-#as: --64
-#ld: -melf_x86_64 tmpdir/tlsie1
-#objdump: -drw
-#target: x86_64-*-linux*
-
-.*: +file format .*
-
-Disassembly of section .text:
-
-[a-f0-9]+ <_start>:
-[ 	]*[a-f0-9]+:	48 c7 c0 fc ff ff ff 	mov    \$0xfffffffffffffffc,%rax
-[ 	]*[a-f0-9]+:	48 8d 80 fc ff ff ff 	lea    -0x4\(%rax\),%rax
-[ 	]*[a-f0-9]+:	49 c7 c4 fc ff ff ff 	mov    \$0xfffffffffffffffc,%r12
-[ 	]*[a-f0-9]+:	49 81 c4 fc ff ff ff 	add    \$0xfffffffffffffffc,%r12
-#pass
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie1.s binutils-stable/ld/testsuite/ld-x86-64/tlsie1.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie1.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsie1.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,14 +0,0 @@
-	.text
-	.globl _start
-_start:
-	movq	foo@GOTTPOFF(%rip), %rax
-	addq	foo@GOTTPOFF(%rip), %rax
-	movq	foo@GOTTPOFF(%rip), %r12
-	addq	foo@GOTTPOFF(%rip), %r12
-	.globl	foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie2.d binutils-stable/ld/testsuite/ld-x86-64/tlsie2.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie2.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsie2.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS IE->LE transition check
-#as: --64
-#ld: -melf_x86_64
-#error: .*TLS transition from R_X86_64_GOTTPOFF to R_X86_64_TPOFF32 against `foo'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie2.s binutils-stable/ld/testsuite/ld-x86-64/tlsie2.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie2.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsie2.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,12 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leaq	foo@GOTTPOFF(%rip), %rax
-	movq	(%rax), %rax
-	.globl	foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie3.d binutils-stable/ld/testsuite/ld-x86-64/tlsie3.d
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie3.d	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsie3.d	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-#name: TLS IE->LE transition check (%r12)
-#as: --64
-#ld: -melf_x86_64
-#error: .*TLS transition from R_X86_64_GOTTPOFF to R_X86_64_TPOFF32 against `foo'.*failed.*
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie3.s binutils-stable/ld/testsuite/ld-x86-64/tlsie3.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/tlsie3.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/tlsie3.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,12 +0,0 @@
-	.text
-	.globl _start
-_start:
-	leaq	foo@GOTTPOFF(%rip), %r12
-	movq	(%r12), %r12
-	.globl	foo
-	.section	.tdata,"awT",@progbits
-	.align 4
-	.type	foo, @object
-	.size	foo, 4
-foo:
-	.long	100
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/undefined.s binutils-stable/ld/testsuite/ld-x86-64/undefined.s
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/undefined.s	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/undefined.s	1970-01-01 01:00:00.000000000 +0100
@@ -1,154 +0,0 @@
-	.file	"undefined.c"
-	.section	.debug_abbrev,"",@progbits
-.Ldebug_abbrev0:
-	.section	.debug_info,"",@progbits
-.Ldebug_info0:
-	.section	.debug_line,"",@progbits
-.Ldebug_line0:
-	.text
-.Ltext0:
-	.p2align 4,,15
-.globl function
-	.type	function, @function
-function:
-.LFB2:
-	.file 1 "undefined.c"
-	.loc 1 8 0
-	.loc 1 9 0
-	xorl	%eax, %eax
-	jmp	this_function_is_not_defined
-.LFE2:
-	.size	function, .-function
-	.section	.debug_frame,"",@progbits
-.Lframe0:
-	.long	.LECIE0-.LSCIE0
-.LSCIE0:
-	.long	0xffffffff
-	.byte	0x1
-	.string	""
-	.uleb128 0x1
-	.sleb128 -8
-	.byte	0x10
-	.byte	0xc
-	.uleb128 0x7
-	.uleb128 0x8
-	.byte	0x90
-	.uleb128 0x1
-	.align 8
-.LECIE0:
-.LSFDE0:
-	.long	.LEFDE0-.LASFDE0
-.LASFDE0:
-	.long	.Lframe0
-	.quad	.LFB2
-	.quad	.LFE2-.LFB2
-	.align 8
-.LEFDE0:
-	.text
-.Letext0:
-	.section	.debug_info
-	.long	0x4c
-	.value	0x2
-	.long	.Ldebug_abbrev0
-	.byte	0x8
-	.uleb128 0x1
-	.long	.Ldebug_line0
-	.quad	.Letext0
-	.quad	.Ltext0
-	.long	.LASF0
-	.byte	0x1
-	.long	.LASF1
-	.uleb128 0x2
-	.byte	0x1
-	.long	.LASF2
-	.byte	0x1
-	.byte	0x8
-	.long	0x48
-	.quad	.LFB2
-	.quad	.LFE2
-	.byte	0x2
-	.byte	0x77
-	.sleb128 8
-	.uleb128 0x3
-	.string	"int"
-	.byte	0x4
-	.byte	0x5
-	.byte	0x0
-	.section	.debug_abbrev
-	.uleb128 0x1
-	.uleb128 0x11
-	.byte	0x1
-	.uleb128 0x10
-	.uleb128 0x6
-	.uleb128 0x12
-	.uleb128 0x1
-	.uleb128 0x11
-	.uleb128 0x1
-	.uleb128 0x25
-	.uleb128 0xe
-	.uleb128 0x13
-	.uleb128 0xb
-	.uleb128 0x3
-	.uleb128 0xe
-	.byte	0x0
-	.byte	0x0
-	.uleb128 0x2
-	.uleb128 0x2e
-	.byte	0x0
-	.uleb128 0x3f
-	.uleb128 0xc
-	.uleb128 0x3
-	.uleb128 0xe
-	.uleb128 0x3a
-	.uleb128 0xb
-	.uleb128 0x3b
-	.uleb128 0xb
-	.uleb128 0x49
-	.uleb128 0x13
-	.uleb128 0x11
-	.uleb128 0x1
-	.uleb128 0x12
-	.uleb128 0x1
-	.uleb128 0x40
-	.uleb128 0xa
-	.byte	0x0
-	.byte	0x0
-	.uleb128 0x3
-	.uleb128 0x24
-	.byte	0x0
-	.uleb128 0x3
-	.uleb128 0x8
-	.uleb128 0xb
-	.uleb128 0xb
-	.uleb128 0x3e
-	.uleb128 0xb
-	.byte	0x0
-	.byte	0x0
-	.byte	0x0
-	.section	.debug_pubnames,"",@progbits
-	.long	0x1b
-	.value	0x2
-	.long	.Ldebug_info0
-	.long	0x50
-	.long	0x29
-	.string	"function"
-	.long	0x0
-	.section	.debug_aranges,"",@progbits
-	.long	0x2c
-	.value	0x2
-	.long	.Ldebug_info0
-	.byte	0x8
-	.byte	0x0
-	.value	0x0
-	.value	0x0
-	.quad	.Ltext0
-	.quad	.Letext0-.Ltext0
-	.quad	0x0
-	.quad	0x0
-	.section	.debug_str,"MS",@progbits,1
-.LASF0:
-	.string	"GNU C 3.4.6"
-.LASF1:
-	.string	"undefined.c"
-.LASF2:
-	.string	"function"
diff -Nur binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/x86-64.exp binutils-stable/ld/testsuite/ld-x86-64/x86-64.exp
--- binutils-2.18.50.0.1/ld/testsuite/ld-x86-64/x86-64.exp	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/ld-x86-64/x86-64.exp	2007-09-25 15:40:59.000000000 +0200
@@ -72,9 +72,6 @@
     {"TLS LD->LE transition" "-melf_x86_64"
      "--64" {tlsld1.s}
      {{objdump -dwr tlsld1.dd}} "tlsld1"}
-    {"TLS IE->LE transition" "-melf_x86_64"
-     "--64" {tlsie1.s}
-     {{objdump -dwr tlsie1.dd}} "tlsie1"}
 }
 
 run_ld_link_tests $x86_64tests
@@ -82,7 +79,3 @@
 run_dump_test "abs"
 run_dump_test "pcrel8"
 run_dump_test "pcrel16"
-run_dump_test "tlsgd2"
-run_dump_test "tlsgd3"
-run_dump_test "tlsie2"
-run_dump_test "tlsie3"
diff -Nur binutils-2.18.50.0.1/ld/testsuite/lib/ld-lib.exp binutils-stable/ld/testsuite/lib/ld-lib.exp
--- binutils-2.18.50.0.1/ld/testsuite/lib/ld-lib.exp	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/ld/testsuite/lib/ld-lib.exp	2007-09-25 15:40:40.000000000 +0200
@@ -207,7 +207,6 @@
 #
 proc default_ld_compile { cc source object } {
     global CFLAGS
-    global CXXFLAGS
     global srcdir
     global subdir
     global host_triplet
@@ -225,7 +224,7 @@
     remote_file build delete "$object"
     remote_file host delete "$object"
 
-    set flags "-I$srcdir/$subdir"
+    set flags "-I$srcdir/$subdir $CFLAGS"
 
     # If we are compiling with gcc, we want to add gcc_gas_flag to
     # flags.  Rather than determine this in some complex way, we guess
@@ -243,12 +242,6 @@
 	set flags "$gcc_gas_flag $flags"
     }
 
-    if {[string match "*++*" $ccexe]} {
-	set flags "$flags $CXXFLAGS"
-    } else {
-	set flags "$flags $CFLAGS"
-    }
-
     if [board_info [target_info name] exists multilib_flags] {
 	append flags " [board_info [target_info name] multilib_flags]"
     }
@@ -1292,7 +1285,6 @@
     global CC
     global CXX
     global CFLAGS
-    global CXXFLAGS
     global errcnt
     global exec_output
 
@@ -1327,11 +1319,7 @@
 	    # We ignore warnings since some compilers may generate
 	    # incorrect section attributes and the assembler will warn
 	    # them.
-	    if { [ string match "c++" $lang ] } {
-		ld_compile "$CXX -c $CXXFLAGS $cflags" $srcdir/$subdir/$src_file $objfile
-	    } else {
-		ld_compile "$CC -c $CFLAGS $cflags" $srcdir/$subdir/$src_file $objfile
-	    }
+	    ld_compile "$CC -c $CFLAGS $cflags" $srcdir/$subdir/$src_file $objfile
 
 	    # We have to use $CC to build PIE and shared library.
 	    if { [ string match "c" $lang ] } {
@@ -1423,7 +1411,6 @@
     global CC
     global CXX
     global CFLAGS
-    global CXXFLAGS
 
     foreach testitem $ldtests {
 	set testname [lindex $testitem 0]
@@ -1445,11 +1432,7 @@
 	    # We ignore warnings since some compilers may generate
 	    # incorrect section attributes and the assembler will warn
 	    # them.
-	    if { [ string match "c++" $lang ] } {
-		ld_compile "$CXX -c $CXXFLAGS $cflags" $srcdir/$subdir/$src_file $objfile
-	    } else {
-		ld_compile "$CC -c $CFLAGS $cflags" $srcdir/$subdir/$src_file $objfile
-	    }
+	    ld_compile "$CC -c $CFLAGS $cflags" $srcdir/$subdir/$src_file $objfile
 	}
 
 	# Clear error and warning counts.
diff -Nur binutils-2.18.50.0.1/libiberty/ChangeLog binutils-stable/libiberty/ChangeLog
--- binutils-2.18.50.0.1/libiberty/ChangeLog	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/ChangeLog	2007-09-25 15:41:49.000000000 +0200
@@ -1,25 +1,3 @@
-2007-09-06  Tom Tromey  <tromey@redhat.com>
-
-	* pexecute.txh (pex_free): Document process killing.
-
-2007-08-31  Douglas Gregor  <doug.gregor@gmail.com>
-	
-	* cp-demangle.c (d_dump): Handle
-	DEMANGLE_COMPONENT_RVALUE_REFERENCE. 
-	(d_make_comp): Ditto.
-	(cplus_demangle_type): Ditto.
-	(d_print_comp): Ditto.
-	(d_print_mod): Ditto.
-	(d_print_function_type): Ditto.
-
-2007-08-24  Kai Tietz  <kai.tietz@onevision.com>
-
-	* pex-common.h: (pex_funcs): Retyped wait and exec_child to pid_t.
-	* pex-djgpp.c: Likewise.
-	* pex-msdos.c: Likewise.
-	* pex-unix.c: Likewise.
-	* pex-win32.c: Likewise.
-
 2007-08-17  Michael Snyder  <msnyder@access-company.com>
 
 	* make-relative-prefix.c (make_relative_prefix_1): Resource leaks.
diff -Nur binutils-2.18.50.0.1/libiberty/configure binutils-stable/libiberty/configure
--- binutils-2.18.50.0.1/libiberty/configure	2007-08-01 15:11:52.000000000 +0200
+++ binutils-stable/libiberty/configure	2007-09-25 15:41:49.000000000 +0200
@@ -8524,6 +8524,20 @@
 esac
 
 
+# On MinGW, add support for Cygwin paths.
+case "${host}" in
+     *-*-mingw*)
+	case $LIBOBJS in
+    "cygpath.$ac_objext"   | \
+  *" cygpath.$ac_objext"   | \
+    "cygpath.$ac_objext "* | \
+  *" cygpath.$ac_objext "* ) ;;
+  *) LIBOBJS="$LIBOBJS cygpath.$ac_objext" ;;
+esac
+
+	;;
+esac
+
 if test x$gcc_no_link = xyes; then
   if test "x${ac_cv_func_mmap_fixed_mapped+set}" != xset; then
     ac_cv_func_mmap_fixed_mapped=no
diff -Nur binutils-2.18.50.0.1/libiberty/configure.ac binutils-stable/libiberty/configure.ac
--- binutils-2.18.50.0.1/libiberty/configure.ac	2007-08-01 15:11:52.000000000 +0200
+++ binutils-stable/libiberty/configure.ac	2007-09-25 15:41:49.000000000 +0200
@@ -686,6 +686,13 @@
 esac
 AC_SUBST(pexecute)
 
+# On MinGW, add support for Cygwin paths.
+case "${host}" in
+     *-*-mingw*)
+	AC_LIBOBJ([cygpath])
+	;;
+esac
+
 libiberty_AC_FUNC_STRNCMP
 
 # Install a library built with a cross compiler in $(tooldir) rather
diff -Nur binutils-2.18.50.0.1/libiberty/cp-demangle.c binutils-stable/libiberty/cp-demangle.c
--- binutils-2.18.50.0.1/libiberty/cp-demangle.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/cp-demangle.c	2007-09-25 15:41:49.000000000 +0200
@@ -596,9 +596,6 @@
     case DEMANGLE_COMPONENT_REFERENCE:
       printf ("reference\n");
       break;
-    case DEMANGLE_COMPONENT_RVALUE_REFERENCE:
-      printf ("rvalue reference\n");
-      break;
     case DEMANGLE_COMPONENT_COMPLEX:
       printf ("complex\n");
       break;
@@ -788,7 +785,6 @@
     case DEMANGLE_COMPONENT_HIDDEN_ALIAS:
     case DEMANGLE_COMPONENT_POINTER:
     case DEMANGLE_COMPONENT_REFERENCE:
-    case DEMANGLE_COMPONENT_RVALUE_REFERENCE:
     case DEMANGLE_COMPONENT_COMPLEX:
     case DEMANGLE_COMPONENT_IMAGINARY:
     case DEMANGLE_COMPONENT_VENDOR_TYPE:
@@ -1730,7 +1726,6 @@
           ::= <CV-qualifiers> <type>
           ::= P <type>
           ::= R <type>
-          ::= O <type> (C++0x)
           ::= C <type>
           ::= G <type>
           ::= U <source-name> <type>
@@ -1897,12 +1892,6 @@
       }
       break;
 
-    case 'O':
-      d_advance (di, 1);
-      ret = d_make_comp (di, DEMANGLE_COMPONENT_RVALUE_REFERENCE,
-                         cplus_demangle_type (di), NULL);
-      break;
-
     case 'P':
       d_advance (di, 1);
       ret = d_make_comp (di, DEMANGLE_COMPONENT_POINTER,
@@ -1912,7 +1901,7 @@
     case 'R':
       d_advance (di, 1);
       ret = d_make_comp (di, DEMANGLE_COMPONENT_REFERENCE,
-                         cplus_demangle_type (di), NULL);
+			 cplus_demangle_type (di), NULL);
       break;
 
     case 'C':
@@ -3195,7 +3184,6 @@
     case DEMANGLE_COMPONENT_VENDOR_TYPE_QUAL:
     case DEMANGLE_COMPONENT_POINTER:
     case DEMANGLE_COMPONENT_REFERENCE:
-    case DEMANGLE_COMPONENT_RVALUE_REFERENCE:
     case DEMANGLE_COMPONENT_COMPLEX:
     case DEMANGLE_COMPONENT_IMAGINARY:
       {
@@ -3720,9 +3708,6 @@
     case DEMANGLE_COMPONENT_REFERENCE:
       d_append_char (dpi, '&');
       return;
-    case DEMANGLE_COMPONENT_RVALUE_REFERENCE:
-      d_append_string (dpi, "&&");
-      return;
     case DEMANGLE_COMPONENT_COMPLEX:
       d_append_string (dpi, "complex ");
       return;
@@ -3772,7 +3757,6 @@
 	{
 	case DEMANGLE_COMPONENT_POINTER:
 	case DEMANGLE_COMPONENT_REFERENCE:
-	case DEMANGLE_COMPONENT_RVALUE_REFERENCE:
 	  need_paren = 1;
 	  break;
 	case DEMANGLE_COMPONENT_RESTRICT:
diff -Nur binutils-2.18.50.0.1/libiberty/cygpath.c binutils-stable/libiberty/cygpath.c
--- binutils-2.18.50.0.1/libiberty/cygpath.c	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/libiberty/cygpath.c	2007-09-25 15:41:49.000000000 +0200
@@ -0,0 +1,565 @@
+/* Support Cygwin paths under MinGW.
+   Copyright (C) 2006 Free Software Foundation, Inc.
+   Written by CodeSourcery.
+
+This file is part of the libiberty library.
+Libiberty is free software; you can redistribute it and/or modify it
+under the terms of the GNU Library General Public License as published
+by the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+Libiberty is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+Library General Public License for more details.
+
+You should have received a copy of the GNU Library General Public
+License along with libiberty; see the file COPYING.LIB.  If not, write
+to the Free Software Foundation, Inc., 51 Franklin Street - Fifth
+Floor, Boston, MA 02110-1301, USA.  */
+
+#include <windows.h>
+#include <errno.h>
+#include <fcntl.h>
+#include <sys/stat.h>
+#include <sys/types.h>
+#include <io.h>
+#include <process.h>
+#include <stdbool.h>
+#include <stdio.h>
+#include <stdlib.h>
+#include "libiberty.h"
+
+/* If non-zero, we have attempted to use cygpath.  CYGPATH_PEX may
+   still be NULL, if cygpath is unavailable.  */
+static int cygpath_initialized;
+
+/* If non-NULL, an instance of cygpath connected via a pipe.  */
+static struct pex_obj *cygpath_pex;
+
+/* The input to cygpath.  */
+static FILE *cygpath_in;
+
+/* The output from cygpath.  */
+static FILE *cygpath_out;
+
+/* If non-NULL, a file to which path translations are logged.  */
+static FILE *cygpath_log;
+
+/* Record MESSAGE in the CYGPATH_LOG.  MESSAGE is a format string,
+   which is expected to have a single "%s" field, to be replaced by
+   ARG.  */
+static void
+cygpath_log_msg_arg (const char *message, const char *arg)
+{
+  if (!cygpath_log)
+    return;
+  fprintf (cygpath_log, "[%d] cygpath: ", _getpid ());
+  fprintf (cygpath_log, message, arg);
+  fprintf (cygpath_log, "\n");
+  fflush (cygpath_log);
+}
+
+/* Record MESSAGE in the CYGPATH_LOG.  */
+static void
+cygpath_log_msg (const char *message)
+{
+  cygpath_log_msg_arg ("%s", message);
+}
+
+/* An error has occured.  Add the MESSAGE to the CYGPATH_LOG, noting
+   the cause of the error based on errno.  */
+static void
+cygpath_perror (const char *message)
+{
+  if (!cygpath_log)
+    return;
+  fprintf (cygpath_log, "[%d] cygpath: error: %s: %s\n",
+	   _getpid(), message, strerror (errno));
+  fflush (cygpath_log);
+}
+
+/* Closes CYGPATH_PEX and frees all associated
+   resoures.  */
+static void
+cygpath_close (void)
+{
+  /* Free resources.  */
+  if (cygpath_out)
+    {
+      fclose (cygpath_out);
+      cygpath_out = NULL;
+    }
+  if (cygpath_in)
+    {
+      fclose (cygpath_in);
+      cygpath_in = NULL;
+    }
+  if (cygpath_pex)
+    {
+      pex_free (cygpath_pex);
+      cygpath_pex = NULL;
+    }
+  if (cygpath_log)
+    {
+      cygpath_log_msg ("end");
+      cygpath_log = NULL;
+    }
+}
+
+/* CYG_PATH is a pointer to a Cygwin path.  This function converts the
+   Cygwin path to a Windows path, storing the result in
+   WIN32_PATH.  Returns true if the conversion was successful; false
+   otherwise.  */
+static bool
+cygpath (const char *cyg_path, char win32_path[MAX_PATH + 1])
+{
+  bool ok;
+  bool retrying;
+  
+  retrying = false;
+
+ retry:
+  if (!cygpath_initialized) 
+    {
+      const char *argv[] = { "cygpath", "-w", "-f", "-", NULL };
+      const char *cygpath_path;
+      const char *log;
+      int err;
+
+      /* If we are unable to invoke cygpath, we do not want to try
+	 again.  So, we set the initialized flag at this point; if
+	 errors occur during the invocation, it will remain set.  */
+      cygpath_initialized = 1;
+      /* Check to see if the user wants cygpath support.  */
+      cygpath_path = getenv ("CYGPATH");
+      if (!cygpath_path)
+	/* The user doesn't need to support Cygwin paths.  */
+	goto error;
+      /* If debugging, open the log file.  */
+      log = getenv ("CSL_DEBUG_CYGPATH");
+      if (log && log[0])
+	{
+	  /* The log file is opened for "append" so that multiple
+	     processes (perhaps invoked from "make") can share it.  */
+	  cygpath_log = fopen (log, "a");
+	  if (cygpath_log)
+	    cygpath_log_msg ("begin");
+	}
+      /* If the environment variable is set to a non-empty string, use
+	 that string as the path to cygpath.  */ 
+      if (cygpath_path[0] != '\0')
+	argv[0] = cygpath_path;
+      /* Create the pex object.  */
+      cygpath_pex = pex_init (PEX_SEARCH | PEX_USE_PIPES, 
+			      "cygpath", NULL);
+      if (!cygpath_pex)
+	goto error;
+      /* Get the FILE we will use to write to the child.  */
+      cygpath_in = pex_input_pipe (cygpath_pex, /*binary=*/0);
+      if (!cygpath_in)
+	goto error;
+      /* Start the child process.  */
+      if (pex_run (cygpath_pex, PEX_SEARCH | PEX_USE_PIPES, 
+		   argv[0], (char**) argv, 
+		   NULL, NULL,
+		   &err) != NULL)
+	goto error;
+      /* Get the FILE we will use to read from the child.  */
+      cygpath_out = pex_read_output (cygpath_pex, /*binary=*/1);
+      if (!cygpath_out)
+	goto error;
+    }
+  else if (!cygpath_pex) 
+    /* We previously tried to use cygpath, but something went wrong.  */
+    return false;
+
+  /* Write CYG_PATH to the child, on a line by itself.  */
+  cygpath_log_msg_arg ("-> %s", cyg_path);
+  if (fprintf (cygpath_in, "%s\n", cyg_path) < 0)
+    {
+      cygpath_perror ("write failed");
+      goto error;
+    }
+  /* Flush the output.  (We cannot set the stream into line-buffered
+     mode with setvbuf because Windows treats _IOLBF as a synonym for
+     _IOFBF.)  */
+  if (fflush (cygpath_in))
+    cygpath_perror ("flush failed");
+  /* Read the output.  */
+  ok = true;
+  while (1)
+    {
+      size_t pathlen;
+      if (!fgets (win32_path, MAX_PATH, cygpath_out))
+	{
+	  if (ferror (cygpath_out))
+	    cygpath_perror ("read failed");
+	  else
+	    {
+	      cygpath_log_msg ("error: EOF");
+	      /* Unfortunately, cygpath sometimes crashes for no
+		 apparent reason.  We give it two chances... */
+	      if (!retrying)
+		{
+		  retrying = true;
+		  cygpath_log_msg ("retrying");
+		  cygpath_close ();
+		  cygpath_initialized = 0;
+		  goto retry;
+		}
+	    }
+	  goto error;
+	}
+      pathlen = strlen (win32_path);
+      if (pathlen == 0 && ok)
+	/* This isn't a well-formed response from cygpath.  */
+	goto error;
+      if (win32_path[pathlen - 1] == '\n')
+	{
+	  win32_path[pathlen - 1] = '\0';
+	  cygpath_log_msg_arg ("<- %s", win32_path);
+	  break;
+	}
+      /* We didn't reach the end of the line.  There's no point in
+	 trying to use this output, since we know the length of
+	 paths are limited to MAX_PATH characters, but we read the
+	 entire line so that we are still in sync with
+	 cygpath.  */
+      ok = false;
+      if (cygpath_log)
+	cygpath_log_msg_arg ("error: invalid response: %s",
+			     win32_path);
+    }
+  
+  return ok;
+  
+ error:
+  cygpath_close();
+  return false;
+}
+
+/* Returns the handle for the MVCRT DLL, or NULL if it is not
+   available.  */
+static HANDLE
+msvcrt_dll (void)
+{
+  static HANDLE dll = INVALID_HANDLE_VALUE;
+
+  /* After we call LoadLibrary, DLL will be either a valid handle or
+     NULL, so this check ensures that we only try to load the library
+     once.  */
+  if (dll == INVALID_HANDLE_VALUE)
+    dll = LoadLibrary ("msvcrt.dll");
+
+  return dll;
+}
+
+/* Call the underlying MSVCRT fopen with PATH and MODE, and return
+   what it returns.  */
+static FILE *
+msvcrt_fopen (const char *path, const char *mode)
+{
+  typedef FILE *(fopen_type)(const char *path, 
+			     const char *mode);
+
+  static fopen_type *f = NULL;
+
+  /* Get the address of "fopen".  */
+  if (!f) 
+    {
+      HANDLE dll = msvcrt_dll ();
+      if (!dll)
+	{
+	  errno = ENOSYS;
+	  return NULL;
+	}
+      f = (fopen_type *) GetProcAddress (dll, "fopen");
+      if (!f)
+	{
+	  errno = ENOSYS;
+	  return NULL;
+	}
+    }
+
+  /* Call fopen.  */
+  return (*f)(path, mode);
+}
+
+FILE *
+fopen (const char *path, const char *mode)
+{
+  FILE *f;
+  char win32_path[MAX_PATH + 1];
+
+  /* Assume PATH is a Windows path.  */
+  f = msvcrt_fopen (path, mode);
+  if (f || errno != ENOENT)
+    return f;
+  /* Perhaps it is a Cygwin path?  */
+  if (cygpath (path, win32_path))
+    f = msvcrt_fopen (win32_path, mode);
+  return f;
+}
+
+int 
+open (const char *path, int oflag, ...)
+{
+  int fd;
+  char win32_path[MAX_PATH + 1];
+  int pmode = 0;
+
+  if ((oflag & _O_CREAT))
+    {
+      va_list ap;
+      va_start (ap, oflag);
+      pmode = va_arg (ap, int); 
+      va_end (ap);
+    }
+
+  /* Assume PATH is a Windows path.  */
+  fd = _open (path, oflag, pmode);
+  if (fd != -1 || errno != ENOENT)
+    return fd;
+  /* Perhaps it is a Cygwin path?  */
+  if (cygpath (path, win32_path))
+    fd = _open (win32_path, oflag, pmode);
+  return fd;
+}
+
+int
+stat (const char *path, struct stat *buffer)
+{
+  int r;
+  char win32_path[MAX_PATH + 1];
+
+  /* Assume PATH is a Windows path.  */
+  r = _stat (path, (struct _stat *) buffer);
+  if (r != -1 || errno != ENOENT)
+    return r;
+  /* Perhaps it is a Cygwin path?  */
+  if (cygpath (path, win32_path))
+    r = _stat (win32_path, (struct _stat *) buffer);
+  return r;
+}
+
+int
+access (const char *path, int mode)
+{
+  int r;
+  char win32_path[MAX_PATH + 1];
+
+#ifdef _WIN32
+  /* Some GNU tools mistakenly defined X_OK to 1 on Windows.  */
+  mode = mode & ~1;
+#endif
+  /* Assume PATH is a Windows path.  */
+  r = _access (path, mode);
+  if (r != -1 || errno != ENOENT)
+    return r;
+  /* Perhaps it is a Cygwin path?  */
+  if (cygpath (path, win32_path))
+    r = _access (win32_path, mode);
+  return r;
+}
+
+/* Given the WINDOWS_CODE (typically the result of GetLastError), set
+   ERRNO to the corresponding error code.  If there is no obvious
+   correspondence, ERRNO will be set to EACCES.  */
+static void
+set_errno_from_windows_code (DWORD windows_code)
+{
+  int mapping[][2] = {
+    {ERROR_ACCESS_DENIED, EACCES},
+    {ERROR_ACCOUNT_DISABLED, EACCES},
+    {ERROR_ACCOUNT_RESTRICTION, EACCES},
+    {ERROR_ALREADY_ASSIGNED, EBUSY},
+    {ERROR_ALREADY_EXISTS, EEXIST},
+    {ERROR_ARITHMETIC_OVERFLOW, ERANGE},
+    {ERROR_BAD_COMMAND, EIO},
+    {ERROR_BAD_DEVICE, ENODEV},
+    {ERROR_BAD_DRIVER_LEVEL, ENXIO},
+    {ERROR_BAD_EXE_FORMAT, ENOEXEC},
+    {ERROR_BAD_FORMAT, ENOEXEC},
+    {ERROR_BAD_LENGTH, EINVAL},
+    {ERROR_BAD_PATHNAME, ENOENT},
+    {ERROR_BAD_PIPE, EPIPE},
+    {ERROR_BAD_UNIT, ENODEV},
+    {ERROR_BAD_USERNAME, EINVAL},
+    {ERROR_BROKEN_PIPE, EPIPE},
+    {ERROR_BUFFER_OVERFLOW, ENOMEM},
+    {ERROR_BUSY, EBUSY},
+    {ERROR_BUSY_DRIVE, EBUSY},
+    {ERROR_CALL_NOT_IMPLEMENTED, ENOSYS},
+    {ERROR_CRC, EIO},
+    {ERROR_CURRENT_DIRECTORY, EINVAL},
+    {ERROR_DEVICE_IN_USE, EBUSY},
+    {ERROR_DIR_NOT_EMPTY, EEXIST},
+    {ERROR_DIRECTORY, ENOENT},
+    {ERROR_DISK_CHANGE, EIO},
+    {ERROR_DISK_FULL, ENOSPC},
+    {ERROR_DRIVE_LOCKED, EBUSY},
+    {ERROR_ENVVAR_NOT_FOUND, EINVAL},
+    {ERROR_EXE_MARKED_INVALID, ENOEXEC},
+    {ERROR_FILE_EXISTS, EEXIST},
+    {ERROR_FILE_INVALID, ENODEV},
+    {ERROR_FILE_NOT_FOUND, ENOENT},
+    {ERROR_FILENAME_EXCED_RANGE, ENAMETOOLONG},
+    {ERROR_GEN_FAILURE, EIO},
+    {ERROR_HANDLE_DISK_FULL, ENOSPC},
+    {ERROR_INSUFFICIENT_BUFFER,  ENOMEM},
+    {ERROR_INVALID_ACCESS, EINVAL},
+    {ERROR_INVALID_ADDRESS, EFAULT},
+    {ERROR_INVALID_BLOCK, EFAULT},
+    {ERROR_INVALID_DATA, EINVAL},
+    {ERROR_INVALID_DRIVE, ENODEV},
+    {ERROR_INVALID_EXE_SIGNATURE,  ENOEXEC},
+    {ERROR_INVALID_FLAGS, EINVAL},
+    {ERROR_INVALID_FUNCTION,  ENOSYS},
+    {ERROR_INVALID_HANDLE, EBADF},
+    {ERROR_INVALID_LOGON_HOURS,  EACCES},
+    {ERROR_INVALID_NAME, ENOENT},
+    {ERROR_INVALID_OWNER, EINVAL},
+    {ERROR_INVALID_PARAMETER, EINVAL},
+    {ERROR_INVALID_PASSWORD, EPERM},
+    {ERROR_INVALID_PRIMARY_GROUP, EINVAL},
+    {ERROR_INVALID_SIGNAL_NUMBER, EINVAL},
+    {ERROR_INVALID_TARGET_HANDLE, EIO},
+    {ERROR_INVALID_WORKSTATION, EACCES},
+    {ERROR_IO_DEVICE, EIO},
+    {ERROR_IO_INCOMPLETE, EINTR},
+    {ERROR_LOCKED, EBUSY},
+    {ERROR_LOGON_FAILURE, EACCES},
+    {ERROR_MAPPED_ALIGNMENT, EINVAL},
+    {ERROR_META_EXPANSION_TOO_LONG, E2BIG},
+    {ERROR_MORE_DATA, EPIPE},
+    {ERROR_NEGATIVE_SEEK, ESPIPE},
+    {ERROR_NO_DATA, EPIPE},
+    {ERROR_NO_MORE_SEARCH_HANDLES, EIO},
+    {ERROR_NO_PROC_SLOTS, EAGAIN},
+    {ERROR_NO_SUCH_PRIVILEGE, EACCES},
+    {ERROR_NOACCESS, EFAULT},
+    {ERROR_NONE_MAPPED, EINVAL},
+    {ERROR_NOT_ENOUGH_MEMORY, ENOMEM},
+    {ERROR_NOT_READY, ENODEV},
+    {ERROR_NOT_SAME_DEVICE, EXDEV},
+    {ERROR_OPEN_FAILED, EIO},
+    {ERROR_OPERATION_ABORTED, EINTR},
+    {ERROR_OUTOFMEMORY,  ENOMEM},
+    {ERROR_PASSWORD_EXPIRED, EACCES},
+    {ERROR_PATH_BUSY,  EBUSY},
+    {ERROR_PATH_NOT_FOUND, ENOTDIR},
+    {ERROR_PIPE_BUSY, EBUSY},
+    {ERROR_PIPE_CONNECTED, EPIPE},
+    {ERROR_PIPE_LISTENING, EPIPE},
+    {ERROR_PIPE_NOT_CONNECTED, EPIPE},
+    {ERROR_PRIVILEGE_NOT_HELD, EACCES},
+    {ERROR_READ_FAULT, EIO},
+    {ERROR_SEEK, ESPIPE},
+    {ERROR_SEEK_ON_DEVICE, ESPIPE},
+    {ERROR_SHARING_BUFFER_EXCEEDED, ENFILE},
+    {ERROR_STACK_OVERFLOW, ENOMEM},
+    {ERROR_SWAPERROR, ENOENT},
+    {ERROR_TOO_MANY_MODULES, EMFILE},
+    {ERROR_TOO_MANY_OPEN_FILES, EMFILE},
+    {ERROR_UNRECOGNIZED_MEDIA,  ENXIO},
+    {ERROR_UNRECOGNIZED_VOLUME,  ENODEV},
+    {ERROR_WAIT_NO_CHILDREN,  ECHILD},
+    {ERROR_WRITE_FAULT, EIO},
+    {ERROR_WRITE_PROTECT, EROFS}
+/*  MinGW does not define ETXTBSY as yet.  
+    {ERROR_LOCK_VIOLATION, ETXTBSY},
+    {ERROR_SHARING_VIOLATION, ETXTBSY}, 
+*/
+  };
+
+  size_t i;
+
+  for (i = 0; i < sizeof (mapping)/sizeof (mapping[0]); ++i)
+    if (mapping[i][0] == windows_code)
+      {
+	errno = mapping[i][1];
+	return;
+      }
+
+  /* Unrecognized error. Use EACCESS to have some error code,
+     not misleading "No error" thing.  */
+  errno = EACCES;      
+}
+
+int rename (const char *oldpath, const char *newpath)
+{
+  BOOL r;
+  int oldpath_converted = 0;
+  char win32_oldpath[MAX_PATH + 1];
+  char win32_newpath[MAX_PATH + 1];
+
+  /* Older versions of the cygpath program called FindFirstFile, but
+     not FindClose.  As a result, a long-running cygpath program ends
+     up leaking these handles, and, as a result, the Windows kernel
+     will not let us remove or rename things in directories.  Therefore,
+     we kill the child cygpath program now.
+
+     The defect in cygpath was corrected by this patch:
+
+       http://cygwin.com/ml/cygwin-patches/2007-q1/msg00033.html
+
+     but older versions of cygpath will be in use for the forseeable
+     future.  */
+
+  cygpath_close ();
+  cygpath_initialized = 0;
+
+  /* Assume all paths are Windows paths.  */
+  r = MoveFileEx (oldpath, newpath, MOVEFILE_REPLACE_EXISTING);
+  if (r)
+      return 0;
+  else if (GetLastError () != ERROR_PATH_NOT_FOUND)
+    goto error;
+
+  /* Perhaps the old path is a cygwin path?  */
+  if (cygpath (oldpath, win32_oldpath))
+    {
+      oldpath_converted = 1;
+      r = MoveFileEx (win32_oldpath, newpath, MOVEFILE_REPLACE_EXISTING);      
+      if (r)
+          return 0;
+      else if (GetLastError () != ERROR_PATH_NOT_FOUND)
+          goto error;
+    }
+
+  /* Perhaps the new path is a cygwin path?  */
+  if (cygpath (newpath, win32_newpath))
+    {
+      r = MoveFileEx (oldpath_converted ? win32_oldpath : oldpath,
+		      win32_newpath, MOVEFILE_REPLACE_EXISTING);
+      if (r == TRUE)
+	return 0;
+    }
+error:
+  set_errno_from_windows_code (GetLastError ());
+  return -1;      
+}
+
+int remove (const char *pathname)
+{
+  int r;
+  char win32_path[MAX_PATH + 1];
+
+  cygpath_close ();
+  cygpath_initialized = 0;
+
+  /* Assume PATH is a Windows path.  */
+  r = _unlink (pathname);
+  if (r != -1 || errno != ENOENT)
+    return r;
+  /* Perhaps it is a Cygwin path?  */
+  if (cygpath (pathname, win32_path))
+    r = _unlink (win32_path);
+  return r;
+}
+
+int unlink(const char *pathname)
+{
+    return remove (pathname);
+}
diff -Nur binutils-2.18.50.0.1/libiberty/Makefile.in binutils-stable/libiberty/Makefile.in
--- binutils-2.18.50.0.1/libiberty/Makefile.in	2007-08-01 15:11:52.000000000 +0200
+++ binutils-stable/libiberty/Makefile.in	2007-09-25 15:41:49.000000000 +0200
@@ -124,7 +124,7 @@
 CFILES = alloca.c argv.c asprintf.c atexit.c				\
 	basename.c bcmp.c bcopy.c bsearch.c bzero.c			\
 	calloc.c choose-temp.c clock.c concat.c cp-demangle.c		\
-	 cp-demint.c cplus-dem.c					\
+	 cp-demint.c cplus-dem.c cygpath.c				\
 	dyn-string.c							\
 	fdmatch.c ffs.c fibheap.c filename_cmp.c floatformat.c		\
 	fnmatch.c fopen_unlocked.c					\
@@ -180,7 +180,7 @@
 # maint-missing" and "make check".
 CONFIGURED_OFILES = ./asprintf.o ./atexit.o				\
 	./basename.o ./bcmp.o ./bcopy.o ./bsearch.o ./bzero.o		\
-	./calloc.o ./clock.o ./copysign.o				\
+	./calloc.o ./clock.o ./copysign.o ./cygpath.o			\
 	./_doprnt.o							\
 	./ffs.o								\
 	./getcwd.o ./getpagesize.o ./gettimeofday.o			\
@@ -615,6 +615,12 @@
 	else true; fi
 	$(COMPILE.c) $(srcdir)/cplus-dem.c $(OUTPUT_OPTION)
 
+./cygpath.o: $(srcdir)/cygpath.c $(INCDIR)/ansidecl.h $(INCDIR)/libiberty.h
+	if [ x"$(PICFLAG)" != x ]; then \
+	  $(COMPILE.c) $(PICFLAG) $(srcdir)/cygpath.c -o pic/$@; \
+	else true; fi
+	$(COMPILE.c) $(srcdir)/cygpath.c $(OUTPUT_OPTION)
+
 ./dyn-string.o: $(srcdir)/dyn-string.c stamp-h $(INCDIR)/ansidecl.h \
 	$(INCDIR)/dyn-string.h $(INCDIR)/libiberty.h
 	if [ x"$(PICFLAG)" != x ]; then \
diff -Nur binutils-2.18.50.0.1/libiberty/pex-common.h binutils-stable/libiberty/pex-common.h
--- binutils-2.18.50.0.1/libiberty/pex-common.h	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/pex-common.h	2007-09-25 15:41:49.000000000 +0200
@@ -26,12 +26,6 @@
 #include "libiberty.h"
 #include <stdio.h>
 
-/* pid_t is may defined by config.h or sys/types.h needs to be
-   included.  */
-#if !defined(pid_t) && defined(HAVE_SYS_TYPES_H)
-#include <sys/types.h>
-#endif
-
 #define install_error_msg "installation problem, cannot exec `%s'"
 
 /* stdin file number.  */
@@ -114,7 +108,7 @@
      closed in the child process.  The function should handle the
      PEX_STDERR_TO_STDOUT flag.  Return >= 0 on success, or -1 on
      error and set *ERRMSG and *ERR.  */
-  pid_t (*exec_child) (struct pex_obj *, int /* flags */,
+  long (*exec_child) (struct pex_obj *, int /* flags */,
                       const char */* executable */, char * const * /* argv */,
                       char * const * /* env */,
                       int /* in */, int /* out */, int /* errdes */,
@@ -126,7 +120,7 @@
      and time in *TIME (if it is not null).  CHILD is from fork.  DONE
      is 1 if this is called via pex_free.  ERRMSG and ERR are as in
      fork.  Return 0 on success, -1 on error.  */
-  int (*wait) (struct pex_obj *, pid_t /* child */, int * /* status */,
+  int (*wait) (struct pex_obj *, long /* child */, int * /* status */,
                struct pex_time * /* time */, int /* done */,
                const char ** /* errmsg */, int * /* err */);
   /* Create a pipe (only called if PEX_USE_PIPES is set) storing two
diff -Nur binutils-2.18.50.0.1/libiberty/pex-djgpp.c binutils-stable/libiberty/pex-djgpp.c
--- binutils-2.18.50.0.1/libiberty/pex-djgpp.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/pex-djgpp.c	2007-09-25 15:41:49.000000000 +0200
@@ -44,12 +44,12 @@
 
 static int pex_djgpp_open_read (struct pex_obj *, const char *, int);
 static int pex_djgpp_open_write (struct pex_obj *, const char *, int);
-static pid_t pex_djgpp_exec_child (struct pex_obj *, int, const char *,
+static long pex_djgpp_exec_child (struct pex_obj *, int, const char *,
 				  char * const *, char * const *,
 				  int, int, int, int,
 				  const char **, int *);
 static int pex_djgpp_close (struct pex_obj *, int);
-static int pex_djgpp_wait (struct pex_obj *, pid_t, int *, struct pex_time *,
+static int pex_djgpp_wait (struct pex_obj *, long, int *, struct pex_time *,
 			   int, const char **, int *);
 
 /* The list of functions we pass to the common routines.  */
@@ -110,7 +110,7 @@
 
 /* Execute a child.  */
 
-static pid_t
+static long
 pex_djgpp_exec_child (struct pex_obj *obj, int flags, const char *executable,
 		      char * const * argv, char * const * env,
                       int in, int out, int errdes,
@@ -132,19 +132,19 @@
 	{
 	  *err = errno;
 	  *errmsg = "dup";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (dup2 (in, STDIN_FILE_NO) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "dup2";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (close (in) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "close";
-	  return (pid_t) -1;
+	  return -1;
 	}
     }
 
@@ -155,19 +155,19 @@
 	{
 	  *err = errno;
 	  *errmsg = "dup";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (dup2 (out, STDOUT_FILE_NO) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "dup2";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (close (out) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "close";
-	  return (pid_t) -1;
+	  return -1;
 	}
     }
 
@@ -179,14 +179,14 @@
 	{
 	  *err = errno;
 	  *errmsg = "dup";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (dup2 ((flags & PEX_STDERR_TO_STDOUT) != 0 ? STDOUT_FILE_NO : errdes,
 		 STDERR_FILE_NO) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "dup2";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (errdes != STDERR_FILE_NO)
 	{
@@ -194,7 +194,7 @@
 	    {
 	      *err = errno;
 	      *errmsg = "close";
-	      return (pid_t) -1;
+	      return -1;
 	    }
 	}
     }
@@ -218,13 +218,13 @@
 	{
 	  *err = errno;
 	  *errmsg = "dup2";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (close (org_in) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "close";
-	  return (pid_t) -1;
+	  return -1;
 	}
     }
 
@@ -234,13 +234,13 @@
 	{
 	  *err = errno;
 	  *errmsg = "dup2";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (close (org_out) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "close";
-	  return (pid_t) -1;
+	  return -1;
 	}
     }
 
@@ -251,13 +251,13 @@
 	{
 	  *err = errno;
 	  *errmsg = "dup2";
-	  return (pid_t) -1;
+	  return -1;
 	}
       if (close (org_errdes) < 0)
 	{
 	  *err = errno;
 	  *errmsg = "close";
-	  return (pid_t) -1;
+	  return -1;
 	}
     }
 
@@ -269,7 +269,7 @@
   statuses[obj->count] = status;
   obj->sysdep = (void *) statuses;
 
-  return (pid_t) obj->count;
+  return obj->count;
 }
 
 /* Wait for a child process to complete.  Actually the child process
@@ -277,7 +277,7 @@
    status.  */
 
 static int
-pex_djgpp_wait (struct pex_obj *obj, pid_t pid, int *status,
+pex_djgpp_wait (struct pex_obj *obj, long pid, int *status,
 		struct pex_time *time, int done ATTRIBUTE_UNUSED,
 		const char **errmsg ATTRIBUTE_UNUSED,
 		int *err ATTRIBUTE_UNUSED)
diff -Nur binutils-2.18.50.0.1/libiberty/pexecute.txh binutils-stable/libiberty/pexecute.txh
--- binutils-2.18.50.0.1/libiberty/pexecute.txh	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/pexecute.txh	2007-09-25 15:41:49.000000000 +0200
@@ -265,9 +265,7 @@
 
 @deftypefn Extension void pex_free (struct pex_obj @var{obj})
 
-Clean up and free all data associated with @var{obj}.  If you have not
-yet called @code{pex_get_times} or @code{pex_get_status}, this will
-try to kill the subprocesses.
+Clean up and free all data associated with @var{obj}.
 
 @end deftypefn
 
diff -Nur binutils-2.18.50.0.1/libiberty/pex-msdos.c binutils-stable/libiberty/pex-msdos.c
--- binutils-2.18.50.0.1/libiberty/pex-msdos.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/pex-msdos.c	2007-09-25 15:41:49.000000000 +0200
@@ -54,12 +54,12 @@
 static int pex_msdos_open (struct pex_obj *, const char *, int);
 static int pex_msdos_open (struct pex_obj *, const char *, int);
 static int pex_msdos_fdindex (struct pex_msdos *, int);
-static pid_t pex_msdos_exec_child (struct pex_obj *, int, const char *,
+static long pex_msdos_exec_child (struct pex_obj *, int, const char *,
 				  char * const *, char * const *,
 				  int, int, int, int,
 				  int, const char **, int *);
 static int pex_msdos_close (struct pex_obj *, int);
-static int pex_msdos_wait (struct pex_obj *, pid_t, int *, struct pex_time *,
+static int pex_msdos_wait (struct pex_obj *, long, int *, struct pex_time *,
 			   int, const char **, int *);
 static void pex_msdos_cleanup (struct pex_obj *);
 
@@ -152,7 +152,7 @@
 
 /* Execute a child.  */
 
-static pid_t
+static long
 pex_msdos_exec_child (struct pex_obj *obj, int flags, const char *executable,
 		      char * const * argv, char * const * env, int in, int out,
 		      int toclose ATTRIBUTE_UNUSED,
@@ -235,7 +235,7 @@
       free (scmd);
       free (rf);
       *errmsg = "cannot open temporary command file";
-      return (pid_t) -1;
+      return -1;
     }
 
   for (i = 1; argv[i] != NULL; ++i)
@@ -262,7 +262,7 @@
       free (scmd);
       free (rf);
       *errmsg = "system";
-      return (pid_t) -1;
+      return -1;
     }
 
   remove (rf);
@@ -275,7 +275,7 @@
   ms->statuses = XRESIZEVEC(int, ms->statuses, obj->count + 1);
   ms->statuses[obj->count] = status;
 
-  return (pid_t) obj->count;
+  return obj->count;
 }
 
 /* Wait for a child process to complete.  Actually the child process
@@ -283,7 +283,7 @@
    status.  */
 
 static int
-pex_msdos_wait (struct pex_obj *obj, pid_t pid, int *status,
+pex_msdos_wait (struct pex_obj *obj, long pid, int *status,
 		struct pex_time *time, int done ATTRIBUTE_UNUSED,
 		const char **errmsg ATTRIBUTE_UNUSED,
 		int *err ATTRIBUTE_UNUSED)
diff -Nur binutils-2.18.50.0.1/libiberty/pex-unix.c binutils-stable/libiberty/pex-unix.c
--- binutils-2.18.50.0.1/libiberty/pex-unix.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/pex-unix.c	2007-09-25 15:41:49.000000000 +0200
@@ -269,12 +269,12 @@
      ATTRIBUTE_NORETURN;
 static int pex_unix_open_read (struct pex_obj *, const char *, int);
 static int pex_unix_open_write (struct pex_obj *, const char *, int);
-static pid_t pex_unix_exec_child (struct pex_obj *, int, const char *,
+static long pex_unix_exec_child (struct pex_obj *, int, const char *,
 				 char * const *, char * const *,
 				 int, int, int, int,
 				 const char **, int *);
 static int pex_unix_close (struct pex_obj *, int);
-static int pex_unix_wait (struct pex_obj *, pid_t, int *, struct pex_time *,
+static int pex_unix_wait (struct pex_obj *, long, int *, struct pex_time *,
 			  int, const char **, int *);
 static int pex_unix_pipe (struct pex_obj *, int *, int);
 static FILE *pex_unix_fdopenr (struct pex_obj *, int, int);
@@ -355,7 +355,7 @@
 
 extern char **environ;
 
-static pid_t
+static long
 pex_unix_exec_child (struct pex_obj *obj, int flags, const char *executable,
 		     char * const * argv, char * const * env,
                      int in, int out, int errdes,
@@ -384,7 +384,7 @@
     case -1:
       *err = errno;
       *errmsg = VFORK_STRING;
-      return (pid_t) -1;
+      return -1;
 
     case 0:
       /* Child process.  */
@@ -435,7 +435,7 @@
 	}
 
       /* NOTREACHED */
-      return (pid_t) -1;
+      return -1;
 
     default:
       /* Parent process.  */
@@ -445,7 +445,7 @@
 	    {
 	      *err = errno;
 	      *errmsg = "close";
-	      return (pid_t) -1;
+	      return -1;
 	    }
 	}
       if (out != STDOUT_FILE_NO)
@@ -454,7 +454,7 @@
 	    {
 	      *err = errno;
 	      *errmsg = "close";
-	      return (pid_t) -1;
+	      return -1;
 	    }
 	}
       if (errdes != STDERR_FILE_NO)
@@ -463,18 +463,18 @@
 	    {
 	      *err = errno;
 	      *errmsg = "close";
-	      return (pid_t) -1;
+	      return -1;
 	    }
 	}
 
-      return pid;
+      return (long) pid;
     }
 }
 
 /* Wait for a child process to complete.  */
 
 static int
-pex_unix_wait (struct pex_obj *obj, pid_t pid, int *status,
+pex_unix_wait (struct pex_obj *obj, long pid, int *status,
 	       struct pex_time *time, int done, const char **errmsg,
 	       int *err)
 {
diff -Nur binutils-2.18.50.0.1/libiberty/pex-win32.c binutils-stable/libiberty/pex-win32.c
--- binutils-2.18.50.0.1/libiberty/pex-win32.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/libiberty/pex-win32.c	2007-09-25 15:41:49.000000000 +0200
@@ -79,12 +79,12 @@
 
 static int pex_win32_open_read (struct pex_obj *, const char *, int);
 static int pex_win32_open_write (struct pex_obj *, const char *, int);
-static pid_t pex_win32_exec_child (struct pex_obj *, int, const char *,
+static long pex_win32_exec_child (struct pex_obj *, int, const char *,
 				  char * const *, char * const *,
                                   int, int, int, int,
 				  const char **, int *);
 static int pex_win32_close (struct pex_obj *, int);
-static int pex_win32_wait (struct pex_obj *, pid_t, int *,
+static int pex_win32_wait (struct pex_obj *, long, int *,
 			   struct pex_time *, int, const char **, int *);
 static int pex_win32_pipe (struct pex_obj *, int *, int);
 static FILE *pex_win32_fdopenr (struct pex_obj *, int, int);
@@ -522,7 +522,7 @@
   return c1 - c2;
 }
 
-static pid_t
+static long
 win32_spawn (const char *executable,
 	     BOOL search,
 	     char *const *argv,
@@ -597,7 +597,7 @@
 
       free (full_executable);
 
-      return (pid_t) -1;
+      return -1;
     }
 
   /* Clean up.  */
@@ -606,7 +606,7 @@
   if (env_block)
     free (env_block);
 
-  return (pid_t) pi->hProcess;
+  return (long) pi->hProcess;
 
  error:
   if (env_block)
@@ -616,17 +616,17 @@
   if (full_executable)
     free (full_executable);
 
-  return (pid_t) -1;
+  return -1;
 }
 
-static pid_t
+static long
 spawn_script (const char *executable, char *const *argv,
               char* const *env,
 	      DWORD dwCreationFlags,
 	      LPSTARTUPINFO si,
 	      LPPROCESS_INFORMATION pi)
 {
-  pid_t pid = (pid_t) -1;
+  int pid = -1;
   int save_errno = errno;
   int fd = _open (executable, _O_RDONLY);
 
@@ -673,7 +673,7 @@
 				     dwCreationFlags, si, pi);
 		  if (executable1 != newex)
 		    free ((char *) newex);
-		  if ((long) pid < 0)
+		  if (pid < 0)
 		    {
 		      newex = msys_rootify (executable1);
 		      if (newex != executable1)
@@ -689,14 +689,14 @@
 	    }
 	}
     }
-  if ((long) pid < 0)
+  if (pid < 0)
     errno = save_errno;
   return pid;
 }
 
 /* Execute a child.  */
 
-static pid_t
+static long
 pex_win32_exec_child (struct pex_obj *obj ATTRIBUTE_UNUSED, int flags,
 		      const char *executable, char * const * argv,
                       char* const* env,
@@ -705,7 +705,7 @@
 		      const char **errmsg,
 		      int *err)
 {
-  pid_t pid;
+  long pid;
   HANDLE stdin_handle;
   HANDLE stdout_handle;
   HANDLE stderr_handle;
@@ -780,10 +780,10 @@
   /* Create the child process.  */  
   pid = win32_spawn (executable, (flags & PEX_SEARCH) != 0,
 		     argv, env, dwCreationFlags, &si, &pi);
-  if (pid == (pid_t) -1)
+  if (pid == -1)
     pid = spawn_script (executable, argv, env, dwCreationFlags,
                         &si, &pi);
-  if (pid == (pid_t) -1)
+  if (pid == -1)
     {
       *err = ENOENT;
       *errmsg = "CreateProcess";
@@ -808,7 +808,7 @@
    macros.  Note that WIFSIGNALED will never be true under CRTDLL. */
 
 static int
-pex_win32_wait (struct pex_obj *obj ATTRIBUTE_UNUSED, pid_t pid,
+pex_win32_wait (struct pex_obj *obj ATTRIBUTE_UNUSED, long pid,
 		int *status, struct pex_time *time, int done ATTRIBUTE_UNUSED,
 		const char **errmsg, int *err)
 {
@@ -883,7 +883,7 @@
   char const *errmsg;
   int err;
   argv++;
-  printf ("%ld\n", (long) pex_win32_exec_child (NULL, PEX_SEARCH, argv[0], argv, NULL, 0, 0, 1, 2, &errmsg, &err));
+  printf ("%ld\n", pex_win32_exec_child (NULL, PEX_SEARCH, argv[0], argv, NULL, 0, 0, 1, 2, &errmsg, &err));
   exit (0);
 }
 #endif
diff -Nur binutils-2.18.50.0.1/Makefile.in binutils-stable/Makefile.in
--- binutils-2.18.50.0.1/Makefile.in	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/Makefile.in	2007-09-25 15:42:07.000000000 +0200
@@ -2441,7 +2441,8 @@
 	@: $(MAKE); $(unstage)
 	@r=`${PWD_COMMAND}`; export r; \
 	s=`cd $(srcdir); ${PWD_COMMAND}`; export s; \
-	$(MAKE) $(RECURSE_FLAGS_TO_PASS) installdirs install-host install-target
+	$(MAKE) $(RECURSE_FLAGS_TO_PASS) installdirs \
+	install-host install-target install-html install-pdf
 
 .PHONY: install-host-nogcc
 install-host-nogcc:  \
diff -Nur binutils-2.18.50.0.1/Makefile.tpl binutils-stable/Makefile.tpl
--- binutils-2.18.50.0.1/Makefile.tpl	2007-09-08 19:33:35.000000000 +0200
+++ binutils-stable/Makefile.tpl	2007-09-25 15:42:07.000000000 +0200
@@ -692,7 +692,8 @@
 	@: $(MAKE); $(unstage)
 	@r=`${PWD_COMMAND}`; export r; \
 	s=`cd $(srcdir); ${PWD_COMMAND}`; export s; \
-	$(MAKE) $(RECURSE_FLAGS_TO_PASS) installdirs install-host install-target
+	$(MAKE) $(RECURSE_FLAGS_TO_PASS) installdirs \
+	install-host install-target install-html install-pdf
 
 .PHONY: install-host-nogcc
 install-host-nogcc: [+
diff -Nur binutils-2.18.50.0.1/opcodes/ChangeLog binutils-stable/opcodes/ChangeLog
--- binutils-2.18.50.0.1/opcodes/ChangeLog	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/ChangeLog	2007-09-25 15:42:02.000000000 +0200
@@ -1,177 +1,3 @@
-2007-09-06  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-gen.c (next_field): Updated to take a separator.
-	(process_i386_opcodes): Updated.
-	(process_i386_registers): Likewise.
-
-2007-09-06  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-gen.c (table): Moved ...
-	(main): Here.  Call process_copyright to output copyright.
-	(process_copyright): New.
-	(process_i386_opcodes): Take FILE *table.
-	(process_i386_registers): Likewise.
-
-2007-09-06  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-gen.c (table): New.
-	(process_i386_opcodes): Report errno when faied to open
-	i386-opc.tbl.  Output opcodes to table.  Close i386-opc.tbl
-	before return.
-	(process_i386_registers): Report errno when faied to open
-	i386-reg.tbl.  Output opcodes to table.  Close i386-reg.tbl
-	before return.
-	(main): Open i386-tbl.h for output.
-
-	* Makefile.am ($(srcdir)/i386-tbl.h): Remove " > $@".
-	* Makefile.in: Regenerated.
-
-2007-09-06  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-opc.tbl: Correct SVME instructions to allow 32bit register
-	operand in 64bit mode.
-	* i386-tbl.h: Regenerated.
-
-2007-08-31  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (OPC_EXT_40...OPC_EXT_45): New.
-	(dis386_twobyte): Use OPC_EXT_40...OPC_EXT_45.
-	(opc_ext_table): Add OPC_EXT_40...OPC_EXT_45.
-
-2007-08-31  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (SVME_Fixup): Removed.
-	(OPC_EXT_39): New.
-	(OPC_EXT_RM_6): Likewise.
-	(grps): Use OPC_EXT_39.
-	(opc_ext_table): Add OPC_EXT_39.
-	(opc_ext_rm_table): Add OPC_EXT_RM_6.
-
-	* i386-opc.tbl: Correct SVME instructions to take register
-	operand only.
-	* i386-tbl.h: Regenerated.
-
-2007-08-31  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.am (INCLUDES): Remove -D_GNU_SOURCE.
-	* Makefile.in: Regenerated.
-
-	* configure.in (AC_GNU_SOURCE): Added.
-	(AC_PROG_CC): Moved before AC_GNU_SOURCE.
-	(AC_CHECK_DECLS): Add stpcpy.
-	* configure: Regenerated.
-	* config.in: Likewise.
-
-	* i386-dis.c: Include "sysdep.h" before "dis-asm.h".
-
-	* sysdep.h (stpcpy): New.
-
-2007-08-30  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (INVLPG_Fixup): Removed.
-	(OPC_EXT_38): New.
-	(OPC_EXT_RM_5): Likewise.
-	(grps): Use OPC_EXT_38.
-	(opc_ext_table): Add OPC_EXT_38.
-	(opc_ext_rm_table): Add OPC_EXT_RM_5.
-
-2007-08-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (SIMD_Fixup): Removed.
-	(OPC_EXT_34...OPC_EXT_37): New.
-	(dis386_twobyte): Use OPC_EXT_34 and OPC_EXT_35.
-	(prefix_user_table): Use OPC_EXT_36 and OPC_EXT_37.
-	(opc_ext_table): Add OPC_EXT_34...OPC_EXT_37.
-
-2007-08-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (OPC_EXT_25...OPC_EXT_33): New.
-	(dis386): Use OPC_EXT_0...OPC_EXT_2.
-	(dis386_twobyte): Use OPC_EXT_3...OPC_EXT_5.
-	(grps): Updated to use OPC_EXT_6...OPC_EXT_31.
-	(prefix_user_table): Use OPC_EXT_32.
-	(x86_64_table): Use OPC_EXT_33.
-	(opc_ext_table): Reorder and add OPC_EXT_25...OPC_EXT_33.
-
-2007-08-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (prefix_user_table): Fix comment.
-
-2007-08-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (OP_Skip_MODRM): New.
-	(OP_Monitor): Likewise.
-	(OP_Mwait): Likewise.
-	(Mb): Likewise.
-	(Skip_MODRM): Likewise.
-	(USE_OPC_EXT_TABLE): Likewise.
-	(USE_OPC_EXT_RM_TABLE): Likewise.
-	(PREGRP98...PREGRP100): Likewise.
-	(OPC_EXT_0...OPC_EXT_24): Likewise.
-	(OPC_EXT_RM_0...OPC_EXT_RM_4): Likewise.
-	(lock_prefix): Likewise.
-	(data_prefix): Likewise.
-	(addr_prefix): Likewise.
-	(repz_prefix): Likewise.
-	(repnz_prefix): Likewise.
-	(opc_ext_table): Likewise.
-	(opc_ext_rm_table): Likewise.
-	(get_valid_dis386): Likewise.
-	(OP_VMX): Removed.
-	(OP_0fae): Likewise.
-	(PNI_Fixup): Likewise.
-	(VMX_Fixup): Likewise.
-	(VM): Likewise.
-	(twobyte_uses_DATA_prefix): Likewise.
-	(twobyte_uses_REPNZ_prefix): Likewise.
-	(twobyte_uses_REPZ_prefix): Likewise.
-	(threebyte_0x38_uses_DATA_prefix): Likewise.
-	(threebyte_0x38_uses_REPNZ_prefix): Likewise.
-	(threebyte_0x38_uses_REPZ_prefix): Likewise.
-	(threebyte_0x3a_uses_DATA_prefix): Likewise.
-	(threebyte_0x3a_uses_REPNZ_prefix): Likewise.
-	(threebyte_0x3a_uses_REPZ_prefix): Likewise.
-	(grps): Use OPC_EXT_0...OPC_EXT_24.
-	(prefix_user_table): Add PREGRP98...PREGRP100.
-	(print_insn): Remove uses_DATA_prefix, uses_LOCK_prefix,
-	uses_REPNZ_prefix and uses_REPZ_prefix.  Initialize
-	repz_prefix, repnz_prefix, lock_prefix, addr_prefix and
-	data_prefix based on prefixes.  Call get_valid_dis386 to
-	get a pointer to the valid dis386.  Print out prefixes if
-	they aren't NULL.
-	(OP_C): Clear lock_prefix if PREFIX_LOCK is used.
-	(REP_Fixup): Set repz_prefix to "rep " when seeing
-	PREFIX_REPZ.
-
-2007-08-28  Daniel Jacobowitz  <dan@codesourcery.com>
-
-	* po/nl.po: Updated translation.
-
-2007-08-28  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* i386-dis.c (Md): New.
-	(grps): Use 0 on invlpg.  Use M on fxsave and fxrstor.  Use
-	Md on ldmxcsr and stmxcsr.  Use b_mode on clflush.
-	(OP_0fae): Clear bytemode for sfence.
-
-2007-08-22  Ben Elliston  <bje@au.ibm.com>
-
-	* ppc-opc.c (PSW, PSWM, PSQ, PSQM, PSD, MTMSRD_L): New.
-	(XOPS, XOPS_MASK, XW, XW_MASK): Likewise.
-	(PPCPS): Likewise.
-	(powerpc_opcodes): Add all pair singles instructions.
-	* ppc-dis.c (powerpc_dialect): Handle "ppcps".
-	(print_ppc_disassembler_options): Document -Mppcps.
-
-2007-08-21  Andreas Krebbel  <krebbel1@de.ibm.com>
-
-	* s390-mkopc.c (struct s390_cond_ext_format): New global struct.
-	(s390_cond_ext_format): New global variable.
-	(expandConditionalJump): New function.
-	(main): Invoke expandConditionalJump for mnemonics containing '*'.	
-	* s390-opc.txt: Replace mnemonics with conditional
-	mask extensions with instructions using the newly introduced '*' tag.
-
 2007-08-17  Alan Modra  <amodra@bigpond.net.au>
 
 	* po/Make-in: Add --msgid-bugs-address to xgettext invocation.
diff -Nur binutils-2.18.50.0.1/opcodes/config.in binutils-stable/opcodes/config.in
--- binutils-2.18.50.0.1/opcodes/config.in	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/config.in	2007-09-25 15:42:02.000000000 +0200
@@ -8,10 +8,6 @@
    don't. */
 #undef HAVE_DECL_BASENAME
 
-/* Define to 1 if you have the declaration of `stpcpy', and to 0 if you don't.
-   */
-#undef HAVE_DECL_STPCPY
-
 /* Define to 1 if you have the <dlfcn.h> header file. */
 #undef HAVE_DLFCN_H
 
@@ -69,8 +65,3 @@
 
 /* Version number of package */
 #undef VERSION
-
-/* Enable GNU extensions on systems that have them.  */
-#ifndef _GNU_SOURCE
-# undef _GNU_SOURCE
-#endif
diff -Nur binutils-2.18.50.0.1/opcodes/configure binutils-stable/opcodes/configure
--- binutils-2.18.50.0.1/opcodes/configure	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/configure	2007-09-25 15:42:02.000000000 +0200
@@ -3231,21 +3231,16 @@
 
 
 
-ac_ext=c
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_c_compiler_gnu
 if test -n "$ac_tool_prefix"; then
-  # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
-set dummy ${ac_tool_prefix}gcc; ac_word=$2
+  # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
+set dummy ${ac_tool_prefix}ar; ac_word=$2
 echo "$as_me:$LINENO: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_CC+set}" = set; then
+if test "${ac_cv_prog_AR+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
+  if test -n "$AR"; then
+  ac_cv_prog_AR="$AR" # Let the user override the test.
 else
 as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
@@ -3254,7 +3249,7 @@
   test -z "$as_dir" && as_dir=.
   for ac_exec_ext in '' $ac_executable_extensions; do
   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_CC="${ac_tool_prefix}gcc"
+    ac_cv_prog_AR="${ac_tool_prefix}ar"
     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
     break 2
   fi
@@ -3263,27 +3258,27 @@
 
 fi
 fi
-CC=$ac_cv_prog_CC
-if test -n "$CC"; then
-  echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6
+AR=$ac_cv_prog_AR
+if test -n "$AR"; then
+  echo "$as_me:$LINENO: result: $AR" >&5
+echo "${ECHO_T}$AR" >&6
 else
   echo "$as_me:$LINENO: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
-if test -z "$ac_cv_prog_CC"; then
-  ac_ct_CC=$CC
-  # Extract the first word of "gcc", so it can be a program name with args.
-set dummy gcc; ac_word=$2
+if test -z "$ac_cv_prog_AR"; then
+  ac_ct_AR=$AR
+  # Extract the first word of "ar", so it can be a program name with args.
+set dummy ar; ac_word=$2
 echo "$as_me:$LINENO: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+if test "${ac_cv_prog_ac_ct_AR+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  if test -n "$ac_ct_CC"; then
-  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+  if test -n "$ac_ct_AR"; then
+  ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
 else
 as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
@@ -3292,7 +3287,7 @@
   test -z "$as_dir" && as_dir=.
   for ac_exec_ext in '' $ac_executable_extensions; do
   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_ac_ct_CC="gcc"
+    ac_cv_prog_ac_ct_AR="ar"
     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
     break 2
   fi
@@ -3301,31 +3296,30 @@
 
 fi
 fi
-ac_ct_CC=$ac_cv_prog_ac_ct_CC
-if test -n "$ac_ct_CC"; then
-  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
-echo "${ECHO_T}$ac_ct_CC" >&6
+ac_ct_AR=$ac_cv_prog_ac_ct_AR
+if test -n "$ac_ct_AR"; then
+  echo "$as_me:$LINENO: result: $ac_ct_AR" >&5
+echo "${ECHO_T}$ac_ct_AR" >&6
 else
   echo "$as_me:$LINENO: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
-  CC=$ac_ct_CC
+  AR=$ac_ct_AR
 else
-  CC="$ac_cv_prog_CC"
+  AR="$ac_cv_prog_AR"
 fi
 
-if test -z "$CC"; then
-  if test -n "$ac_tool_prefix"; then
-  # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
-set dummy ${ac_tool_prefix}cc; ac_word=$2
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
+set dummy ${ac_tool_prefix}ranlib; ac_word=$2
 echo "$as_me:$LINENO: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_CC+set}" = set; then
+if test "${ac_cv_prog_RANLIB+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
+  if test -n "$RANLIB"; then
+  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
 else
 as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
@@ -3334,7 +3328,7 @@
   test -z "$as_dir" && as_dir=.
   for ac_exec_ext in '' $ac_executable_extensions; do
   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
     break 2
   fi
@@ -3343,27 +3337,27 @@
 
 fi
 fi
-CC=$ac_cv_prog_CC
-if test -n "$CC"; then
-  echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6
+RANLIB=$ac_cv_prog_RANLIB
+if test -n "$RANLIB"; then
+  echo "$as_me:$LINENO: result: $RANLIB" >&5
+echo "${ECHO_T}$RANLIB" >&6
 else
   echo "$as_me:$LINENO: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
-if test -z "$ac_cv_prog_CC"; then
-  ac_ct_CC=$CC
-  # Extract the first word of "cc", so it can be a program name with args.
-set dummy cc; ac_word=$2
+if test -z "$ac_cv_prog_RANLIB"; then
+  ac_ct_RANLIB=$RANLIB
+  # Extract the first word of "ranlib", so it can be a program name with args.
+set dummy ranlib; ac_word=$2
 echo "$as_me:$LINENO: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  if test -n "$ac_ct_CC"; then
-  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+  if test -n "$ac_ct_RANLIB"; then
+  ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
 else
 as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
@@ -3372,843 +3366,282 @@
   test -z "$as_dir" && as_dir=.
   for ac_exec_ext in '' $ac_executable_extensions; do
   if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_ac_ct_CC="cc"
+    ac_cv_prog_ac_ct_RANLIB="ranlib"
     echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
 done
 
+  test -z "$ac_cv_prog_ac_ct_RANLIB" && ac_cv_prog_ac_ct_RANLIB=":"
 fi
 fi
-ac_ct_CC=$ac_cv_prog_ac_ct_CC
-if test -n "$ac_ct_CC"; then
-  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
-echo "${ECHO_T}$ac_ct_CC" >&6
+ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
+if test -n "$ac_ct_RANLIB"; then
+  echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
+echo "${ECHO_T}$ac_ct_RANLIB" >&6
 else
   echo "$as_me:$LINENO: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
-  CC=$ac_ct_CC
+  RANLIB=$ac_ct_RANLIB
 else
-  CC="$ac_cv_prog_CC"
+  RANLIB="$ac_cv_prog_RANLIB"
 fi
 
-fi
-if test -z "$CC"; then
-  # Extract the first word of "cc", so it can be a program name with args.
-set dummy cc; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
-else
-  ac_prog_rejected=no
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
-       ac_prog_rejected=yes
-       continue
-     fi
-    ac_cv_prog_CC="cc"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
 
-if test $ac_prog_rejected = yes; then
-  # We found a bogon in the path, so make sure we never use it.
-  set dummy $ac_cv_prog_CC
-  shift
-  if test $# != 0; then
-    # We chose a different compiler from the bogus one.
-    # However, it has the same basename, so the bogon will be chosen
-    # first if we set CC to just the basename; use the full file name.
-    shift
-    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
-  fi
-fi
-fi
-fi
-CC=$ac_cv_prog_CC
-if test -n "$CC"; then
-  echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6
+# Check whether --enable-shared or --disable-shared was given.
+if test "${enable_shared+set}" = set; then
+  enableval="$enable_shared"
+  p=${PACKAGE-default}
+    case $enableval in
+    yes) enable_shared=yes ;;
+    no) enable_shared=no ;;
+    *)
+      enable_shared=no
+      # Look at the argument we got.  We use all the common list separators.
+      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
+      for pkg in $enableval; do
+	IFS="$lt_save_ifs"
+	if test "X$pkg" = "X$p"; then
+	  enable_shared=yes
+	fi
+      done
+      IFS="$lt_save_ifs"
+      ;;
+    esac
 else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
+  enable_shared=no
+fi;
 
-fi
-if test -z "$CC"; then
-  if test -n "$ac_tool_prefix"; then
-  for ac_prog in cl
-  do
-    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
-set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
 
-fi
-fi
-CC=$ac_cv_prog_CC
-if test -n "$CC"; then
-  echo "$as_me:$LINENO: result: $CC" >&5
-echo "${ECHO_T}$CC" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
 
-    test -n "$CC" && break
-  done
-fi
-if test -z "$CC"; then
-  ac_ct_CC=$CC
-  for ac_prog in cl
-do
-  # Extract the first word of "$ac_prog", so it can be a program name with args.
-set dummy $ac_prog; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if test -n "$ac_ct_CC"; then
-  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_ac_ct_CC="$ac_prog"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
 
-fi
-fi
-ac_ct_CC=$ac_cv_prog_ac_ct_CC
-if test -n "$ac_ct_CC"; then
-  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
-echo "${ECHO_T}$ac_ct_CC" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
 
-  test -n "$ac_ct_CC" && break
-done
 
-  CC=$ac_ct_CC
-fi
 
-fi
 
 
-test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
-See \`config.log' for more details." >&5
-echo "$as_me: error: no acceptable C compiler found in \$PATH
-See \`config.log' for more details." >&2;}
-   { (exit 1); exit 1; }; }
 
-# Provide some information about the compiler.
-echo "$as_me:$LINENO:" \
-     "checking for C compiler version" >&5
-ac_compiler=`set X $ac_compile; echo $2`
-{ (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
-  (eval $ac_compiler --version </dev/null >&5) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (eval echo "$as_me:$LINENO: \"$ac_compiler -v </dev/null >&5\"") >&5
-  (eval $ac_compiler -v </dev/null >&5) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
-{ (eval echo "$as_me:$LINENO: \"$ac_compiler -V </dev/null >&5\"") >&5
-  (eval $ac_compiler -V </dev/null >&5) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }
 
-echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
-echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
-if test "${ac_cv_c_compiler_gnu+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
+macro_version='2.1a'
+macro_revision='1.2435'
 
-int
-main ()
-{
-#ifndef __GNUC__
-       choke me
-#endif
 
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"
-			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_compiler_gnu=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_compiler_gnu=no
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-ac_cv_c_compiler_gnu=$ac_compiler_gnu
 
-fi
-echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
-echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
-GCC=`test $ac_compiler_gnu = yes && echo yes`
-ac_test_CFLAGS=${CFLAGS+set}
-ac_save_CFLAGS=$CFLAGS
-CFLAGS="-g"
-echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
-echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
-if test "${ac_cv_prog_cc_g+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
 
-int
-main ()
-{
 
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"
-			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_prog_cc_g=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_prog_cc_g=no
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
-echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
-if test "$ac_test_CFLAGS" = set; then
-  CFLAGS=$ac_save_CFLAGS
-elif test $ac_cv_prog_cc_g = yes; then
-  if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
-  else
-    CFLAGS="-g"
-  fi
-else
-  if test "$GCC" = yes; then
-    CFLAGS="-O2"
-  else
-    CFLAGS=
-  fi
-fi
-echo "$as_me:$LINENO: checking for $CC option to accept ANSI C" >&5
-echo $ECHO_N "checking for $CC option to accept ANSI C... $ECHO_C" >&6
-if test "${ac_cv_prog_cc_stdc+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_cv_prog_cc_stdc=no
-ac_save_CC=$CC
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <stdarg.h>
-#include <stdio.h>
-#include <sys/types.h>
-#include <sys/stat.h>
-/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
-struct buf { int x; };
-FILE * (*rcsopen) (struct buf *, struct stat *, int);
-static char *e (p, i)
-     char **p;
-     int i;
-{
-  return p[i];
-}
-static char *f (char * (*g) (char **, int), char **p, ...)
-{
-  char *s;
-  va_list v;
-  va_start (v,p);
-  s = g (p, va_arg (v,int));
-  va_end (v);
-  return s;
-}
 
-/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
-   function prototypes and stuff, but not '\xHH' hex character constants.
-   These don't provoke an error unfortunately, instead are silently treated
-   as 'x'.  The following induces an error, until -std1 is added to get
-   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
-   array size at least.  It's necessary to write '\x00'==0 to get something
-   that's true only with -std1.  */
-int osf4_cc_array ['\x00' == 0 ? 1 : -1];
 
-int test (int i, double x);
-struct s1 {int (*f) (int a);};
-struct s2 {int (*f) (double a);};
-int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
-int argc;
-char **argv;
-int
-main ()
-{
-return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
-  ;
-  return 0;
-}
-_ACEOF
-# Don't try gcc -ansi; that turns off useful extensions and
-# breaks some systems' header files.
-# AIX			-qlanglvl=ansi
-# Ultrix and OSF/1	-std1
-# HP-UX 10.20 and later	-Ae
-# HP-UX older versions	-Aa -D_HPUX_SOURCE
-# SVR4			-Xc -D__EXTENSIONS__
-for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
-do
-  CC="$ac_save_CC $ac_arg"
-  rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"
-			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_prog_cc_stdc=$ac_arg
-break
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
 
-fi
-rm -f conftest.err conftest.$ac_objext
-done
-rm -f conftest.$ac_ext conftest.$ac_objext
-CC=$ac_save_CC
 
-fi
 
-case "x$ac_cv_prog_cc_stdc" in
-  x|xno)
-    echo "$as_me:$LINENO: result: none needed" >&5
-echo "${ECHO_T}none needed" >&6 ;;
-  *)
-    echo "$as_me:$LINENO: result: $ac_cv_prog_cc_stdc" >&5
-echo "${ECHO_T}$ac_cv_prog_cc_stdc" >&6
-    CC="$CC $ac_cv_prog_cc_stdc" ;;
-esac
+ltmain="$ac_aux_dir/ltmain.sh"
 
-# Some people use a C++ compiler to compile C.  Since we use `exit',
-# in C++ we need to declare it.  In case someone uses the same compiler
-# for both compiling C and C++ we need to have the C++ compiler decide
-# the declaration of exit, since it's the most demanding environment.
-cat >conftest.$ac_ext <<_ACEOF
-#ifndef __cplusplus
-  choke me
-#endif
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"
-			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  for ac_declaration in \
-   '' \
-   'extern "C" void std::exit (int) throw (); using std::exit;' \
-   'extern "C" void std::exit (int); using std::exit;' \
-   'extern "C" void exit (int) throw ();' \
-   'extern "C" void exit (int);' \
-   'void exit (int);'
-do
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_declaration
-#include <stdlib.h>
-int
-main ()
-{
-exit (42);
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"
-			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  :
+# Set options
+
+enable_dlopen=no
+
+
+enable_win32_dll=no
+
+
+
+# Check whether --enable-static or --disable-static was given.
+if test "${enable_static+set}" = set; then
+  enableval="$enable_static"
+  p=${PACKAGE-default}
+    case $enableval in
+    yes) enable_static=yes ;;
+    no) enable_static=no ;;
+    *)
+     enable_static=no
+      # Look at the argument we got.  We use all the common list separators.
+      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
+      for pkg in $enableval; do
+	IFS="$lt_save_ifs"
+	if test "X$pkg" = "X$p"; then
+	  enable_static=yes
+	fi
+      done
+      IFS="$lt_save_ifs"
+      ;;
+    esac
 else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+  enable_static=yes
+fi;
 
-continue
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_declaration
-int
-main ()
-{
-exit (42);
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"
-			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  break
+
+
+
+
+
+
+
+
+# Check whether --with-pic or --without-pic was given.
+if test "${with_pic+set}" = set; then
+  withval="$with_pic"
+  pic_mode="$withval"
 else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+  pic_mode=default
+fi;
+
+test -z "$pic_mode" && pic_mode=default
+
+
+
+
+
 
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-done
-rm -f conftest*
-if test -n "$ac_declaration"; then
-  echo '#ifdef __cplusplus' >>confdefs.h
-  echo $ac_declaration      >>confdefs.h
-  echo '#endif'             >>confdefs.h
-fi
 
+# Check whether --enable-fast-install or --disable-fast-install was given.
+if test "${enable_fast_install+set}" = set; then
+  enableval="$enable_fast_install"
+  p=${PACKAGE-default}
+    case $enableval in
+    yes) enable_fast_install=yes ;;
+    no) enable_fast_install=no ;;
+    *)
+      enable_fast_install=no
+      # Look at the argument we got.  We use all the common list separators.
+      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
+      for pkg in $enableval; do
+	IFS="$lt_save_ifs"
+	if test "X$pkg" = "X$p"; then
+	  enable_fast_install=yes
+	fi
+      done
+      IFS="$lt_save_ifs"
+      ;;
+    esac
 else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+  enable_fast_install=yes
+fi;
 
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-ac_ext=c
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
-cat >>confdefs.h <<\_ACEOF
-#define _GNU_SOURCE 1
-_ACEOF
 
 
 
-if test -n "$ac_tool_prefix"; then
-  # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
-set dummy ${ac_tool_prefix}ar; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_AR+set}" = set; then
+
+
+echo "$as_me:$LINENO: checking for a sed that does not truncate output" >&5
+echo $ECHO_N "checking for a sed that does not truncate output... $ECHO_C" >&6
+if test "${lt_cv_path_SED+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  if test -n "$AR"; then
-  ac_cv_prog_AR="$AR" # Let the user override the test.
-else
+  # Loop through the user's path and test for sed and gsed.
+# Then use that list of sed's as ones to test for truncation.
 as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
   test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_AR="${ac_tool_prefix}ar"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
+  for lt_ac_prog in sed gsed; do
+    for ac_exec_ext in '' $ac_executable_extensions; do
+      if $as_executable_p "$as_dir/$lt_ac_prog$ac_exec_ext"; then
+        lt_ac_sed_list="$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext"
+      fi
+    done
+  done
 done
-
-fi
-fi
-AR=$ac_cv_prog_AR
-if test -n "$AR"; then
-  echo "$as_me:$LINENO: result: $AR" >&5
-echo "${ECHO_T}$AR" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-fi
-if test -z "$ac_cv_prog_AR"; then
-  ac_ct_AR=$AR
-  # Extract the first word of "ar", so it can be a program name with args.
-set dummy ar; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_ac_ct_AR+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if test -n "$ac_ct_AR"; then
-  ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_ac_ct_AR="ar"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-fi
-fi
-ac_ct_AR=$ac_cv_prog_ac_ct_AR
-if test -n "$ac_ct_AR"; then
-  echo "$as_me:$LINENO: result: $ac_ct_AR" >&5
-echo "${ECHO_T}$ac_ct_AR" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-  AR=$ac_ct_AR
-else
-  AR="$ac_cv_prog_AR"
-fi
-
-if test -n "$ac_tool_prefix"; then
-  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
-set dummy ${ac_tool_prefix}ranlib; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_RANLIB+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if test -n "$RANLIB"; then
-  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
-  fi
-done
-done
-
-fi
-fi
-RANLIB=$ac_cv_prog_RANLIB
-if test -n "$RANLIB"; then
-  echo "$as_me:$LINENO: result: $RANLIB" >&5
-echo "${ECHO_T}$RANLIB" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-
-fi
-if test -z "$ac_cv_prog_RANLIB"; then
-  ac_ct_RANLIB=$RANLIB
-  # Extract the first word of "ranlib", so it can be a program name with args.
-set dummy ranlib; ac_word=$2
-echo "$as_me:$LINENO: checking for $ac_word" >&5
-echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
-if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if test -n "$ac_ct_RANLIB"; then
-  ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
-else
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for ac_exec_ext in '' $ac_executable_extensions; do
-  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    ac_cv_prog_ac_ct_RANLIB="ranlib"
-    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
-    break 2
+IFS=$as_save_IFS
+lt_ac_max=0
+lt_ac_count=0
+# Add /usr/xpg4/bin/sed as it is typically found on Solaris
+# along with /bin/sed that truncates output.
+for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
+  test ! -f $lt_ac_sed && continue
+  cat /dev/null > conftest.in
+  lt_ac_count=0
+  echo $ECHO_N "0123456789$ECHO_C" >conftest.in
+  # Check for GNU sed and select it if it is found.
+  if "$lt_ac_sed" --version 2>&1 < /dev/null | grep 'GNU' > /dev/null; then
+    lt_cv_path_SED=$lt_ac_sed
+    break
   fi
+  while true; do
+    cat conftest.in conftest.in >conftest.tmp
+    mv conftest.tmp conftest.in
+    cp conftest.in conftest.nl
+    echo >>conftest.nl
+    $lt_ac_sed -e 's/a$//' < conftest.nl >conftest.out || break
+    cmp -s conftest.out conftest.nl || break
+    # 10000 chars as input seems more than enough
+    test $lt_ac_count -gt 10 && break
+    lt_ac_count=`expr $lt_ac_count + 1`
+    if test $lt_ac_count -gt $lt_ac_max; then
+      lt_ac_max=$lt_ac_count
+      lt_cv_path_SED=$lt_ac_sed
+    fi
+  done
 done
-done
-
-  test -z "$ac_cv_prog_ac_ct_RANLIB" && ac_cv_prog_ac_ct_RANLIB=":"
-fi
-fi
-ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
-if test -n "$ac_ct_RANLIB"; then
-  echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
-echo "${ECHO_T}$ac_ct_RANLIB" >&6
-else
-  echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
 
-  RANLIB=$ac_ct_RANLIB
-else
-  RANLIB="$ac_cv_prog_RANLIB"
 fi
 
+SED=$lt_cv_path_SED
 
-# Check whether --enable-shared or --disable-shared was given.
-if test "${enable_shared+set}" = set; then
-  enableval="$enable_shared"
-  p=${PACKAGE-default}
-    case $enableval in
-    yes) enable_shared=yes ;;
-    no) enable_shared=no ;;
-    *)
-      enable_shared=no
-      # Look at the argument we got.  We use all the common list separators.
-      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
-      for pkg in $enableval; do
-	IFS="$lt_save_ifs"
-	if test "X$pkg" = "X$p"; then
-	  enable_shared=yes
-	fi
-      done
-      IFS="$lt_save_ifs"
-      ;;
-    esac
-else
-  enable_shared=no
-fi;
-
-
-
-
+echo "$as_me:$LINENO: result: $SED" >&5
+echo "${ECHO_T}$SED" >&6
 
+test -z "$SED" && SED=sed
+Xsed="$SED -e 1s/^X//"
 
 
 
 
 
 
-macro_version='2.1a'
-macro_revision='1.2435'
 
 
 
 
 
+echo "$as_me:$LINENO: checking for egrep" >&5
+echo $ECHO_N "checking for egrep... $ECHO_C" >&6
+if test "${ac_cv_prog_egrep+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if echo a | (grep -E '(a|b)') >/dev/null 2>&1
+    then ac_cv_prog_egrep='grep -E'
+    else ac_cv_prog_egrep='egrep'
+    fi
+fi
+echo "$as_me:$LINENO: result: $ac_cv_prog_egrep" >&5
+echo "${ECHO_T}$ac_cv_prog_egrep" >&6
+ EGREP=$ac_cv_prog_egrep
 
 
+echo "$as_me:$LINENO: checking for fgrep" >&5
+echo $ECHO_N "checking for fgrep... $ECHO_C" >&6
+if test "${ac_cv_prog_fgrep+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if echo 'ab*c' | (grep -F 'ab*c') >/dev/null 2>&1
+    then ac_cv_prog_fgrep='grep -F'
+    else ac_cv_prog_fgrep='fgrep'
+    fi
+fi
+echo "$as_me:$LINENO: result: $ac_cv_prog_fgrep" >&5
+echo "${ECHO_T}$ac_cv_prog_fgrep" >&6
+ FGREP=$ac_cv_prog_fgrep
 
 
+test -z "$GREP" && GREP=grep
 
 
 
-ltmain="$ac_aux_dir/ltmain.sh"
 
-# Set options
 
-enable_dlopen=no
 
 
-enable_win32_dll=no
 
 
 
-# Check whether --enable-static or --disable-static was given.
-if test "${enable_static+set}" = set; then
-  enableval="$enable_static"
-  p=${PACKAGE-default}
-    case $enableval in
-    yes) enable_static=yes ;;
-    no) enable_static=no ;;
-    *)
-     enable_static=no
-      # Look at the argument we got.  We use all the common list separators.
-      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
-      for pkg in $enableval; do
-	IFS="$lt_save_ifs"
-	if test "X$pkg" = "X$p"; then
-	  enable_static=yes
-	fi
-      done
-      IFS="$lt_save_ifs"
-      ;;
-    esac
-else
-  enable_static=yes
-fi;
 
 
 
@@ -4218,181 +3651,12 @@
 
 
 
-# Check whether --with-pic or --without-pic was given.
-if test "${with_pic+set}" = set; then
-  withval="$with_pic"
-  pic_mode="$withval"
+# Check whether --with-gnu-ld or --without-gnu-ld was given.
+if test "${with_gnu_ld+set}" = set; then
+  withval="$with_gnu_ld"
+  test "$withval" = no || with_gnu_ld=yes
 else
-  pic_mode=default
-fi;
-
-test -z "$pic_mode" && pic_mode=default
-
-
-
-
-
-
-
-# Check whether --enable-fast-install or --disable-fast-install was given.
-if test "${enable_fast_install+set}" = set; then
-  enableval="$enable_fast_install"
-  p=${PACKAGE-default}
-    case $enableval in
-    yes) enable_fast_install=yes ;;
-    no) enable_fast_install=no ;;
-    *)
-      enable_fast_install=no
-      # Look at the argument we got.  We use all the common list separators.
-      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
-      for pkg in $enableval; do
-	IFS="$lt_save_ifs"
-	if test "X$pkg" = "X$p"; then
-	  enable_fast_install=yes
-	fi
-      done
-      IFS="$lt_save_ifs"
-      ;;
-    esac
-else
-  enable_fast_install=yes
-fi;
-
-
-
-
-
-
-
-
-echo "$as_me:$LINENO: checking for a sed that does not truncate output" >&5
-echo $ECHO_N "checking for a sed that does not truncate output... $ECHO_C" >&6
-if test "${lt_cv_path_SED+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  # Loop through the user's path and test for sed and gsed.
-# Then use that list of sed's as ones to test for truncation.
-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in $PATH
-do
-  IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-  for lt_ac_prog in sed gsed; do
-    for ac_exec_ext in '' $ac_executable_extensions; do
-      if $as_executable_p "$as_dir/$lt_ac_prog$ac_exec_ext"; then
-        lt_ac_sed_list="$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext"
-      fi
-    done
-  done
-done
-IFS=$as_save_IFS
-lt_ac_max=0
-lt_ac_count=0
-# Add /usr/xpg4/bin/sed as it is typically found on Solaris
-# along with /bin/sed that truncates output.
-for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
-  test ! -f $lt_ac_sed && continue
-  cat /dev/null > conftest.in
-  lt_ac_count=0
-  echo $ECHO_N "0123456789$ECHO_C" >conftest.in
-  # Check for GNU sed and select it if it is found.
-  if "$lt_ac_sed" --version 2>&1 < /dev/null | grep 'GNU' > /dev/null; then
-    lt_cv_path_SED=$lt_ac_sed
-    break
-  fi
-  while true; do
-    cat conftest.in conftest.in >conftest.tmp
-    mv conftest.tmp conftest.in
-    cp conftest.in conftest.nl
-    echo >>conftest.nl
-    $lt_ac_sed -e 's/a$//' < conftest.nl >conftest.out || break
-    cmp -s conftest.out conftest.nl || break
-    # 10000 chars as input seems more than enough
-    test $lt_ac_count -gt 10 && break
-    lt_ac_count=`expr $lt_ac_count + 1`
-    if test $lt_ac_count -gt $lt_ac_max; then
-      lt_ac_max=$lt_ac_count
-      lt_cv_path_SED=$lt_ac_sed
-    fi
-  done
-done
-
-fi
-
-SED=$lt_cv_path_SED
-
-echo "$as_me:$LINENO: result: $SED" >&5
-echo "${ECHO_T}$SED" >&6
-
-test -z "$SED" && SED=sed
-Xsed="$SED -e 1s/^X//"
-
-
-
-
-
-
-
-
-
-
-
-echo "$as_me:$LINENO: checking for egrep" >&5
-echo $ECHO_N "checking for egrep... $ECHO_C" >&6
-if test "${ac_cv_prog_egrep+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if echo a | (grep -E '(a|b)') >/dev/null 2>&1
-    then ac_cv_prog_egrep='grep -E'
-    else ac_cv_prog_egrep='egrep'
-    fi
-fi
-echo "$as_me:$LINENO: result: $ac_cv_prog_egrep" >&5
-echo "${ECHO_T}$ac_cv_prog_egrep" >&6
- EGREP=$ac_cv_prog_egrep
-
-
-echo "$as_me:$LINENO: checking for fgrep" >&5
-echo $ECHO_N "checking for fgrep... $ECHO_C" >&6
-if test "${ac_cv_prog_fgrep+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  if echo 'ab*c' | (grep -F 'ab*c') >/dev/null 2>&1
-    then ac_cv_prog_fgrep='grep -F'
-    else ac_cv_prog_fgrep='fgrep'
-    fi
-fi
-echo "$as_me:$LINENO: result: $ac_cv_prog_fgrep" >&5
-echo "${ECHO_T}$ac_cv_prog_fgrep" >&6
- FGREP=$ac_cv_prog_fgrep
-
-
-test -z "$GREP" && GREP=grep
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-# Check whether --with-gnu-ld or --without-gnu-ld was given.
-if test "${with_gnu_ld+set}" = set; then
-  withval="$with_gnu_ld"
-  test "$withval" = no || with_gnu_ld=yes
-else
-  with_gnu_ld=no
+  with_gnu_ld=no
 fi;
 ac_prog=ld
 if test "$GCC" = yes; then
@@ -4662,13 +3926,13 @@
 else
   lt_cv_nm_interface="BSD nm"
   echo "int some_variable = 0;" > conftest.$ac_ext
-  (eval echo "\"\$as_me:4665: $ac_compile\"" >&5)
+  (eval echo "\"\$as_me:3929: $ac_compile\"" >&5)
   (eval "$ac_compile" 2>conftest.err)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:4668: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+  (eval echo "\"\$as_me:3932: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:4671: output\"" >&5)
+  (eval echo "\"\$as_me:3935: output\"" >&5)
   cat conftest.out >&5
   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
     lt_cv_nm_interface="MS dumpbin"
@@ -5723,7 +4987,7 @@
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 5726 "configure"' > conftest.$ac_ext
+  echo '#line 4990 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -6823,11 +6087,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:6826: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6090: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:6830: \$? = $ac_status" >&5
+   echo "$as_me:6094: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -7145,11 +6409,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7148: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6412: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7152: \$? = $ac_status" >&5
+   echo "$as_me:6416: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -7250,11 +6514,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7253: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6517: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:7257: \$? = $ac_status" >&5
+   echo "$as_me:6521: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -7305,11 +6569,11 @@
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7308: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:6572: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:7312: \$? = $ac_status" >&5
+   echo "$as_me:6576: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -10102,7 +9366,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10105 "configure"
+#line 9369 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -10202,7 +9466,7 @@
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10205 "configure"
+#line 9469 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -10565,43 +9829,773 @@
   enableval="$enable_install_libbfd"
   install_libbfd_p=$enableval
 else
-  if test "${host}" = "${target}" || test "$enable_shared" = "yes"; then
-        install_libbfd_p=yes
-      else
-        install_libbfd_p=no
-      fi
-fi;
-  echo "$as_me:$LINENO: result: $install_libbfd_p" >&5
-echo "${ECHO_T}$install_libbfd_p" >&6
-
+  if test "${host}" = "${target}" || test "$enable_shared" = "yes"; then
+        install_libbfd_p=yes
+      else
+        install_libbfd_p=no
+      fi
+fi;
+  echo "$as_me:$LINENO: result: $install_libbfd_p" >&5
+echo "${ECHO_T}$install_libbfd_p" >&6
+
+
+if test $install_libbfd_p = yes; then
+  INSTALL_LIBBFD_TRUE=
+  INSTALL_LIBBFD_FALSE='#'
+else
+  INSTALL_LIBBFD_TRUE='#'
+  INSTALL_LIBBFD_FALSE=
+fi
+
+  # Need _noncanonical variables for this.
+
+
+
+
+  # libbfd.a is a host library containing target dependent code
+  bfdlibdir='$(libdir)'
+  bfdincludedir='$(includedir)'
+  if test "${host}" != "${target}"; then
+    bfdlibdir='$(exec_prefix)/$(host_noncanonical)/$(target_noncanonical)/lib'
+    bfdincludedir='$(exec_prefix)/$(host_noncanonical)/$(target_noncanonical)/include'
+  fi
+
+
+
+
+
+
+# host-specific stuff:
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}gcc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "gcc", so it can be a program name with args.
+set dummy gcc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
+if test -z "$CC"; then
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+  ac_prog_rejected=no
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+       ac_prog_rejected=yes
+       continue
+     fi
+    ac_cv_prog_CC="cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+if test $ac_prog_rejected = yes; then
+  # We found a bogon in the path, so make sure we never use it.
+  set dummy $ac_cv_prog_CC
+  shift
+  if test $# != 0; then
+    # We chose a different compiler from the bogus one.
+    # However, it has the same basename, so the bogon will be chosen
+    # first if we set CC to just the basename; use the full file name.
+    shift
+    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
+  fi
+fi
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  for ac_prog in cl
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+    test -n "$CC" && break
+  done
+fi
+if test -z "$CC"; then
+  ac_ct_CC=$CC
+  for ac_prog in cl
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  test -n "$ac_ct_CC" && break
+done
+
+  CC=$ac_ct_CC
+fi
+
+fi
+
+
+test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
+See \`config.log' for more details." >&5
+echo "$as_me: error: no acceptable C compiler found in \$PATH
+See \`config.log' for more details." >&2;}
+   { (exit 1); exit 1; }; }
+
+# Provide some information about the compiler.
+echo "$as_me:$LINENO:" \
+     "checking for C compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
+  (eval $ac_compiler --version </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -v </dev/null >&5\"") >&5
+  (eval $ac_compiler -v </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -V </dev/null >&5\"") >&5
+  (eval $ac_compiler -V </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
+echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
+echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
+if test "${ac_cv_c_compiler_gnu+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+#ifndef __GNUC__
+       choke me
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_compiler_gnu=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_compiler_gnu=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+ac_cv_c_compiler_gnu=$ac_compiler_gnu
+
+fi
+echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
+echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
+GCC=`test $ac_compiler_gnu = yes && echo yes`
+ac_test_CFLAGS=${CFLAGS+set}
+ac_save_CFLAGS=$CFLAGS
+CFLAGS="-g"
+echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
+echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
+if test "${ac_cv_prog_cc_g+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cc_g=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_prog_cc_g=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
+if test "$ac_test_CFLAGS" = set; then
+  CFLAGS=$ac_save_CFLAGS
+elif test $ac_cv_prog_cc_g = yes; then
+  if test "$GCC" = yes; then
+    CFLAGS="-g -O2"
+  else
+    CFLAGS="-g"
+  fi
+else
+  if test "$GCC" = yes; then
+    CFLAGS="-O2"
+  else
+    CFLAGS=
+  fi
+fi
+echo "$as_me:$LINENO: checking for $CC option to accept ANSI C" >&5
+echo $ECHO_N "checking for $CC option to accept ANSI C... $ECHO_C" >&6
+if test "${ac_cv_prog_cc_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_prog_cc_stdc=no
+ac_save_CC=$CC
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdarg.h>
+#include <stdio.h>
+#include <sys/types.h>
+#include <sys/stat.h>
+/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
+struct buf { int x; };
+FILE * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+
+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+   function prototypes and stuff, but not '\xHH' hex character constants.
+   These don't provoke an error unfortunately, instead are silently treated
+   as 'x'.  The following induces an error, until -std1 is added to get
+   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
+   array size at least.  It's necessary to write '\x00'==0 to get something
+   that's true only with -std1.  */
+int osf4_cc_array ['\x00' == 0 ? 1 : -1];
+
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
+int argc;
+char **argv;
+int
+main ()
+{
+return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
+  ;
+  return 0;
+}
+_ACEOF
+# Don't try gcc -ansi; that turns off useful extensions and
+# breaks some systems' header files.
+# AIX			-qlanglvl=ansi
+# Ultrix and OSF/1	-std1
+# HP-UX 10.20 and later	-Ae
+# HP-UX older versions	-Aa -D_HPUX_SOURCE
+# SVR4			-Xc -D__EXTENSIONS__
+for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+do
+  CC="$ac_save_CC $ac_arg"
+  rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cc_stdc=$ac_arg
+break
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
-if test $install_libbfd_p = yes; then
-  INSTALL_LIBBFD_TRUE=
-  INSTALL_LIBBFD_FALSE='#'
-else
-  INSTALL_LIBBFD_TRUE='#'
-  INSTALL_LIBBFD_FALSE=
 fi
+rm -f conftest.err conftest.$ac_objext
+done
+rm -f conftest.$ac_ext conftest.$ac_objext
+CC=$ac_save_CC
 
-  # Need _noncanonical variables for this.
-
-
-
+fi
 
-  # libbfd.a is a host library containing target dependent code
-  bfdlibdir='$(libdir)'
-  bfdincludedir='$(includedir)'
-  if test "${host}" != "${target}"; then
-    bfdlibdir='$(exec_prefix)/$(host_noncanonical)/$(target_noncanonical)/lib'
-    bfdincludedir='$(exec_prefix)/$(host_noncanonical)/$(target_noncanonical)/include'
-  fi
+case "x$ac_cv_prog_cc_stdc" in
+  x|xno)
+    echo "$as_me:$LINENO: result: none needed" >&5
+echo "${ECHO_T}none needed" >&6 ;;
+  *)
+    echo "$as_me:$LINENO: result: $ac_cv_prog_cc_stdc" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_stdc" >&6
+    CC="$CC $ac_cv_prog_cc_stdc" ;;
+esac
 
+# Some people use a C++ compiler to compile C.  Since we use `exit',
+# in C++ we need to declare it.  In case someone uses the same compiler
+# for both compiling C and C++ we need to have the C++ compiler decide
+# the declaration of exit, since it's the most demanding environment.
+cat >conftest.$ac_ext <<_ACEOF
+#ifndef __cplusplus
+  choke me
+#endif
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  for ac_declaration in \
+   '' \
+   'extern "C" void std::exit (int) throw (); using std::exit;' \
+   'extern "C" void std::exit (int); using std::exit;' \
+   'extern "C" void exit (int) throw ();' \
+   'extern "C" void exit (int);' \
+   'void exit (int);'
+do
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_declaration
+#include <stdlib.h>
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+continue
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_declaration
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  break
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+done
+rm -f conftest*
+if test -n "$ac_declaration"; then
+  echo '#ifdef __cplusplus' >>confdefs.h
+  echo $ac_declaration      >>confdefs.h
+  echo '#endif'             >>confdefs.h
+fi
 
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
-# host-specific stuff:
 
 ALL_LINGUAS="fr sv tr es da de id pt_BR ro nl fi vi ga zh_CN"
 # If we haven't got the data from the intl directory,
@@ -11328,76 +11322,6 @@
 
 
 fi
-echo "$as_me:$LINENO: checking whether stpcpy is declared" >&5
-echo $ECHO_N "checking whether stpcpy is declared... $ECHO_C" >&6
-if test "${ac_cv_have_decl_stpcpy+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-int
-main ()
-{
-#ifndef stpcpy
-  char *p = (char *) stpcpy;
-#endif
-
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"
-			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_have_decl_stpcpy=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-ac_cv_have_decl_stpcpy=no
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-echo "$as_me:$LINENO: result: $ac_cv_have_decl_stpcpy" >&5
-echo "${ECHO_T}$ac_cv_have_decl_stpcpy" >&6
-if test $ac_cv_have_decl_stpcpy = yes; then
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_STPCPY 1
-_ACEOF
-
-
-else
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_DECL_STPCPY 0
-_ACEOF
-
-
-fi
 
 
 
@@ -13340,7 +13264,7 @@
 #
 # This program is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
+# the Free Software Foundation; either version 3 of the License, or
 # (at your option) any later version.
 #
 # This program is distributed in the hope that it will be useful, but
diff -Nur binutils-2.18.50.0.1/opcodes/configure.in binutils-stable/opcodes/configure.in
--- binutils-2.18.50.0.1/opcodes/configure.in	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/configure.in	2007-09-25 15:42:02.000000000 +0200
@@ -17,9 +17,6 @@
 
 AM_INIT_AUTOMAKE(opcodes, ${BFD_VERSION})
 
-AC_PROG_CC
-AC_GNU_SOURCE
-
 dnl These must be called before AM_PROG_LIBTOOL, because it may want
 dnl to call AC_CHECK_PROG.
 AC_CHECK_TOOL(AR, ar)
@@ -61,6 +58,8 @@
 
 # host-specific stuff:
 
+AC_PROG_CC
+
 ALL_LINGUAS="fr sv tr es da de id pt_BR ro nl fi vi ga zh_CN"
 ZW_GNU_GETTEXT_SISTER_DIR
 AM_PO_SUBDIRS
@@ -74,7 +73,7 @@
 
 AC_CHECK_HEADERS(string.h strings.h stdlib.h)
 
-AC_CHECK_DECLS([basename, stpcpy])
+AC_CHECK_DECLS(basename)
 
 cgen_maint=no
 cgendir='$(srcdir)/../cgen'
diff -Nur binutils-2.18.50.0.1/opcodes/i386-dis.c binutils-stable/opcodes/i386-dis.c
--- binutils-2.18.50.0.1/opcodes/i386-dis.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/i386-dis.c	2007-09-25 15:42:02.000000000 +0200
@@ -33,8 +33,8 @@
    and the small letter tells about the operand size.  Refer to
    the Intel manual for details.  */
 
-#include "sysdep.h"
 #include "dis-asm.h"
+#include "sysdep.h"
 #include "opintl.h"
 #include "opcode/i386.h"
 
@@ -60,7 +60,6 @@
 static bfd_signed_vma get32s (void);
 static int get16 (void);
 static void set_op (bfd_vma, int);
-static void OP_Skip_MODRM (int, int);
 static void OP_REG (int, int);
 static void OP_IMREG (int, int);
 static void OP_I (int, int);
@@ -87,14 +86,19 @@
 static void OP_MS (int, int);
 static void OP_XS (int, int);
 static void OP_M (int, int);
+static void OP_VMX (int, int);
+static void OP_0fae (int, int);
 static void OP_0f07 (int, int);
-static void OP_Monitor (int, int);
-static void OP_Mwait (int, int);
 static void NOP_Fixup1 (int, int);
 static void NOP_Fixup2 (int, int);
 static void OP_3DNowSuffix (int, int);
 static void OP_SIMD_Suffix (int, int);
+static void SIMD_Fixup (int, int);
+static void PNI_Fixup (int, int);
+static void SVME_Fixup (int, int);
+static void INVLPG_Fixup (int, int);
 static void BadOp (void);
+static void VMX_Fixup (int, int);
 static void REP_Fixup (int, int);
 static void CMPXCHG8B_Fixup (int, int);
 static void XMM_Fixup (int, int);
@@ -211,8 +215,6 @@
 #define Ew { OP_E, w_mode }
 #define M { OP_M, 0 }		/* lea, lgdt, etc. */
 #define Ma { OP_M, v_mode }
-#define Mb { OP_M, b_mode }
-#define Md { OP_M, d_mode }
 #define Mp { OP_M, f_mode }		/* 32 or 48 bit memory operand for LDS, LES etc */
 #define Mq { OP_M, q_mode }
 #define Gb { OP_G, b_mode }
@@ -235,7 +237,6 @@
 #define Cm { OP_C, m_mode }
 #define Dm { OP_D, m_mode }
 #define Td { OP_T, d_mode }
-#define Skip_MODRM { OP_Skip_MODRM, 0 }
 
 #define RMeAX { OP_REG, eAX_reg }
 #define RMeBX { OP_REG, eBX_reg }
@@ -318,6 +319,7 @@
 #define XS { OP_XS, v_mode }
 #define EMCq { OP_EMC, q_mode }
 #define MXC { OP_MXC, 0 }
+#define VM { OP_VMX, q_mode }
 #define OPSUF { OP_3DNowSuffix, 0 }
 #define OPSIMD { OP_SIMD_Suffix, 0 }
 #define XMM0 { XMM_Fixup, 0 }
@@ -411,8 +413,6 @@
 #define USE_PREFIX_USER_TABLE 3
 #define X86_64_SPECIAL 4
 #define IS_3BYTE_OPCODE 5
-#define USE_OPC_EXT_TABLE 6
-#define USE_OPC_EXT_RM_TABLE 7
 
 #define FLOAT	  NULL, { { NULL, FLOATCODE } }
 
@@ -543,9 +543,6 @@
 #define PREGRP95  NULL, { { NULL, USE_PREFIX_USER_TABLE }, { NULL, 95 } }
 #define PREGRP96  NULL, { { NULL, USE_PREFIX_USER_TABLE }, { NULL, 96 } }
 #define PREGRP97  NULL, { { NULL, USE_PREFIX_USER_TABLE }, { NULL, 97 } }
-#define PREGRP98  NULL, { { NULL, USE_PREFIX_USER_TABLE }, { NULL, 98 } }
-#define PREGRP99  NULL, { { NULL, USE_PREFIX_USER_TABLE }, { NULL, 99 } }
-#define PREGRP100 NULL, { { NULL, USE_PREFIX_USER_TABLE }, { NULL, 100 } }
 
 
 #define X86_64_0  NULL, { { NULL, X86_64_SPECIAL }, { NULL, 0 } }
@@ -556,61 +553,6 @@
 #define THREE_BYTE_0 NULL, { { NULL, IS_3BYTE_OPCODE }, { NULL, 0 } }
 #define THREE_BYTE_1 NULL, { { NULL, IS_3BYTE_OPCODE }, { NULL, 1 } }
 
-#define OPC_EXT_0  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 0 } }
-#define OPC_EXT_1  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 1 } }
-#define OPC_EXT_2  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 2 } }
-#define OPC_EXT_3  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 3 } }
-#define OPC_EXT_4  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 4 } }
-#define OPC_EXT_5  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 5 } }
-#define OPC_EXT_6  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 6 } }
-#define OPC_EXT_7  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 7 } }
-#define OPC_EXT_8  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 8 } }
-#define OPC_EXT_9  NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 9 } }
-#define OPC_EXT_10 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 10 } }
-#define OPC_EXT_11 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 11 } }
-#define OPC_EXT_12 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 12 } }
-#define OPC_EXT_13 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 13 } }
-#define OPC_EXT_14 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 14 } }
-#define OPC_EXT_15 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 15 } }
-#define OPC_EXT_16 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 16 } }
-#define OPC_EXT_17 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 17 } }
-#define OPC_EXT_18 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 18 } }
-#define OPC_EXT_19 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 19 } }
-#define OPC_EXT_20 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 20 } }
-#define OPC_EXT_21 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 21 } }
-#define OPC_EXT_22 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 22 } }
-#define OPC_EXT_23 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 23 } }
-#define OPC_EXT_24 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 24 } }
-#define OPC_EXT_25 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 25 } }
-#define OPC_EXT_26 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 26 } }
-#define OPC_EXT_27 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 27 } }
-#define OPC_EXT_28 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 28 } }
-#define OPC_EXT_29 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 29 } }
-#define OPC_EXT_30 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 30 } }
-#define OPC_EXT_31 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 31 } }
-#define OPC_EXT_32 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 32 } }
-#define OPC_EXT_33 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 33 } }
-#define OPC_EXT_34 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 34 } }
-#define OPC_EXT_35 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 35 } }
-#define OPC_EXT_36 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 36 } }
-#define OPC_EXT_37 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 37 } }
-#define OPC_EXT_38 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 38 } }
-#define OPC_EXT_39 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 39 } }
-#define OPC_EXT_40 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 40 } }
-#define OPC_EXT_41 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 41 } }
-#define OPC_EXT_42 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 42 } }
-#define OPC_EXT_43 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 43 } }
-#define OPC_EXT_44 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 44 } }
-#define OPC_EXT_45 NULL, { { NULL, USE_OPC_EXT_TABLE }, { NULL, 45 } }
-
-#define OPC_EXT_RM_0  NULL, { { NULL, USE_OPC_EXT_RM_TABLE }, { NULL, 0 } }
-#define OPC_EXT_RM_1  NULL, { { NULL, USE_OPC_EXT_RM_TABLE }, { NULL, 1 } }
-#define OPC_EXT_RM_2  NULL, { { NULL, USE_OPC_EXT_RM_TABLE }, { NULL, 2 } }
-#define OPC_EXT_RM_3  NULL, { { NULL, USE_OPC_EXT_RM_TABLE }, { NULL, 3 } }
-#define OPC_EXT_RM_4  NULL, { { NULL, USE_OPC_EXT_RM_TABLE }, { NULL, 4 } }
-#define OPC_EXT_RM_5  NULL, { { NULL, USE_OPC_EXT_RM_TABLE }, { NULL, 5 } }
-#define OPC_EXT_RM_6  NULL, { { NULL, USE_OPC_EXT_RM_TABLE }, { NULL, 6 } }
-
 typedef void (*op_rtn) (int bytemode, int sizeflag);
 
 struct dis386 {
@@ -823,7 +765,7 @@
   { "movB",		{ Gb, Eb } },
   { "movS",		{ Gv, Ev } },
   { "movD",		{ Sv, Sw } },
-  { OPC_EXT_0 },
+  { "leaS",		{ Gv, M } },
   { "movD",		{ Sw, Sv } },
   { GRP1a },
   /* 90 */
@@ -885,8 +827,8 @@
   { GRP2S },
   { "retT",		{ Iw } },
   { "retT",		{ XX } },
-  { OPC_EXT_1 },
-  { OPC_EXT_2 },
+  { "les{S|}",		{ Gv, Mp } },
+  { "ldsS",		{ Gv, Mp } },
   { GRP11_C6 },
   { GRP11_C7 },
   /* c8 */
@@ -977,11 +919,11 @@
   { PREGRP8 },
   { PREGRP9 },
   { PREGRP30 },
-  { OPC_EXT_34 },
+  { "movlpX",		{ EXq, XM, { SIMD_Fixup, 'h' } } },
   { "unpcklpX",		{ XM, EXq } },
   { "unpckhpX",		{ XM, EXq } },
   { PREGRP31 },
-  { OPC_EXT_35 },
+  { "movhpX",		{ EXq, XM, { SIMD_Fixup, 'l' } } },
   /* 18 */
   { GRP16 },
   { "(bad)",		{ XX } },
@@ -992,13 +934,13 @@
   { "(bad)",		{ XX } },
   { "nopQ",		{ Ev } },
   /* 20 */
-  { OPC_EXT_40 },
-  { OPC_EXT_41 },
-  { OPC_EXT_42 },
-  { OPC_EXT_43 },
-  { OPC_EXT_44 },
+  { "movZ",		{ Rm, Cm } },
+  { "movZ",		{ Rm, Dm } },
+  { "movZ",		{ Cm, Rm } },
+  { "movZ",		{ Dm, Rm } },
+  { "movL",		{ Rd, Td } },
   { "(bad)",		{ XX } },
-  { OPC_EXT_45 },
+  { "movL",		{ Td, Rd } },
   { "(bad)",		{ XX } },
   /* 28 */
   { "movapX",		{ XM, EXx } },
@@ -1156,10 +1098,10 @@
   /* b0 */
   { "cmpxchgB",		{ Eb, Gb } },
   { "cmpxchgS",		{ Ev, Gv } },
-  { OPC_EXT_3 },
+  { "lssS",		{ Gv, Mp } },
   { "btrS",		{ Ev, Gv } },
-  { OPC_EXT_4 },
-  { OPC_EXT_5 },
+  { "lfsS",		{ Gv, Mp } },
+  { "lgsS",		{ Gv, Mp } },
   { "movz{bR|x|bR|x}",	{ Gv, Eb } },
   { "movz{wR|x|wR|x}",	{ Gv, Ew } }, /* yes, there really is movzww ! */
   /* b8 */
@@ -1291,17 +1233,225 @@
   /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
 };
 
+static const unsigned char twobyte_uses_DATA_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 0f */
+  /* 10 */ 1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0, /* 3f */
+  /* 40 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1, /* 6f */
+  /* 70 */ 1,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0  /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+static const unsigned char twobyte_uses_REPNZ_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 0f */
+  /* 10 */ 1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
+  /* 40 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,1,0,0,0,0,0,0,1,1,1,0,1,1,1,1, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 6f */
+  /* 70 */ 1,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+static const unsigned char twobyte_uses_REPZ_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 0f */
+  /* 10 */ 1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
+  /* 40 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1, /* 6f */
+  /* 70 */ 1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0, /* bf */
+  /* c0 */ 0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+/* This is used to determine if opcode 0f 38 XX uses DATA prefix.  */
+static const unsigned char threebyte_0x38_uses_DATA_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0, /* 0f */
+  /* 10 */ 1,0,0,0,1,1,0,1,0,0,0,0,1,1,1,0, /* 1f */
+  /* 20 */ 1,1,1,1,1,1,0,0,1,1,1,1,0,0,0,0, /* 2f */
+  /* 30 */ 1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1, /* 3f */
+  /* 40 */ 1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 6f */
+  /* 70 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+/* This is used to determine if opcode 0f 38 XX uses REPNZ prefix.  */
+static const unsigned char threebyte_0x38_uses_REPNZ_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 0f */
+  /* 10 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
+  /* 40 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 6f */
+  /* 70 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+/* This is used to determine if opcode 0f 38 XX uses REPZ prefix.  */
+static const unsigned char threebyte_0x38_uses_REPZ_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 0f */
+  /* 10 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
+  /* 40 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 6f */
+  /* 70 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+/* This is used to determine if opcode 0f 3a XX uses DATA prefix.  */
+static const unsigned char threebyte_0x3a_uses_DATA_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1, /* 0f */
+  /* 10 */ 0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
+  /* 40 */ 1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 5f */
+  /* 60 */ 1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0, /* 6f */
+  /* 70 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+/* This is used to determine if opcode 0f 3a XX uses REPNZ prefix.  */
+static const unsigned char threebyte_0x3a_uses_REPNZ_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 0f */
+  /* 10 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
+  /* 40 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 6f */
+  /* 70 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
+/* This is used to determine if opcode 0f 3a XX uses REPZ prefix.  */
+static const unsigned char threebyte_0x3a_uses_REPZ_prefix[256] = {
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+  /*       -------------------------------        */
+  /* 00 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 0f */
+  /* 10 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 1f */
+  /* 20 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 2f */
+  /* 30 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 3f */
+  /* 40 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 4f */
+  /* 50 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 5f */
+  /* 60 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 6f */
+  /* 70 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 7f */
+  /* 80 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 8f */
+  /* 90 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* 9f */
+  /* a0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* af */
+  /* b0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* bf */
+  /* c0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* cf */
+  /* d0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* df */
+  /* e0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ef */
+  /* f0 */ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, /* ff */
+  /*       -------------------------------        */
+  /*       0 1 2 3 4 5 6 7 8 9 a b c d e f        */
+};
+
 static char obuf[100];
 static char *obufp;
 static char scratchbuf[100];
 static unsigned char *start_codep;
 static unsigned char *insn_codep;
 static unsigned char *codep;
-static const char *lock_prefix;
-static const char *data_prefix;
-static const char *addr_prefix;
-static const char *repz_prefix;
-static const char *repnz_prefix;
 static disassemble_info *the_info;
 static struct
   {
@@ -1545,14 +1695,14 @@
   },
   /* GRP7 */
   {
-    { OPC_EXT_6 },
-    { OPC_EXT_7 },
-    { OPC_EXT_8 },
-    { OPC_EXT_39 },
+    { "sgdt{Q|IQ||}", { { VMX_Fixup, 0 } } },
+    { "sidt{Q|IQ||}", { { PNI_Fixup, 0 } } },
+    { "lgdt{Q|Q||}",	 { M } },
+    { "lidt{Q|Q||}",	 { { SVME_Fixup, 0 } } },
     { "smswD",	{ Sv } },
     { "(bad)",	{ XX } },
     { "lmsw",	{ Ew } },
-    { OPC_EXT_38 },
+    { "invlpg",	{ { INVLPG_Fixup, w_mode } } },
   },
   /* GRP8 */
   {
@@ -1573,8 +1723,8 @@
     { "(bad)",	{ XX } },
     { "(bad)",	{ XX } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_9 },
-    { OPC_EXT_10 },
+    { "",	{ VM } },		/* See OP_VMX.  */
+    { "vmptrst", { Mq } },
   },
   /* GRP11_C6 */
   {
@@ -1602,56 +1752,56 @@
   {
     { "(bad)",	{ XX } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_11 },
+    { "psrlw",	{ MS, Ib } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_12 },
+    { "psraw",	{ MS, Ib } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_13 },
+    { "psllw",	{ MS, Ib } },
     { "(bad)",	{ XX } },
   },
   /* GRP13 */
   {
     { "(bad)",	{ XX } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_14 },
+    { "psrld",	{ MS, Ib } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_15 },
+    { "psrad",	{ MS, Ib } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_16 },
+    { "pslld",	{ MS, Ib } },
     { "(bad)",	{ XX } },
   },
   /* GRP14 */
   {
     { "(bad)",	{ XX } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_17 },
-    { OPC_EXT_18 },
+    { "psrlq",	{ MS, Ib } },
+    { "psrldq",	{ MS, Ib } },
     { "(bad)",	{ XX } },
     { "(bad)",	{ XX } },
-    { OPC_EXT_19 },
-    { OPC_EXT_20 },
+    { "psllq",	{ MS, Ib } },
+    { "pslldq",	{ MS, Ib } },
   },
   /* GRP15 */
   {
-    { OPC_EXT_21 },
-    { OPC_EXT_22 },
-    { OPC_EXT_23 },
-    { OPC_EXT_24 },
-    { "(bad)",	{ XX } },
-    { OPC_EXT_25 },
-    { OPC_EXT_26 },
-    { OPC_EXT_27 },
+    { "fxsave",		{ Ev } },
+    { "fxrstor",	{ Ev } },
+    { "ldmxcsr",	{ Ev } },
+    { "stmxcsr",	{ Ev } },
+    { "(bad)",		{ XX } },
+    { "lfence",		{ { OP_0fae, 0 } } },
+    { "mfence",		{ { OP_0fae, 0 } } },
+    { "clflush",	{ { OP_0fae, 0 } } },
   },
   /* GRP16 */
   {
-    { OPC_EXT_28 },
-    { OPC_EXT_29 },
-    { OPC_EXT_30 },
-    { OPC_EXT_31 },
-    { "(bad)",	{ XX } },
-    { "(bad)",	{ XX } },
-    { "(bad)",	{ XX } },
-    { "(bad)",	{ XX } },
+    { "prefetchnta",	{ Ev } },
+    { "prefetcht0",	{ Ev } },
+    { "prefetcht1",	{ Ev } },
+    { "prefetcht2",	{ Ev } },
+    { "(bad)",		{ XX } },
+    { "(bad)",		{ XX } },
+    { "(bad)",		{ XX } },
+    { "(bad)",		{ XX } },
   },
   /* GRPAMD */
   {
@@ -1901,14 +2051,14 @@
   },
   /* PREGRP30 */
   {
-    { OPC_EXT_36 },
+    { "movlpX",	{ XM, EXq, { SIMD_Fixup, 'h' } } }, /* really only 2 operands */
     { "movsldup", { XM, EXx } },
     { "movlpd",	{ XM, EXq } },
     { "movddup", { XM, EXq } },
   },
   /* PREGRP31 */
   {
-    { OPC_EXT_37 },
+    { "movhpX",	{ XM, EXq, { SIMD_Fixup, 'l' } } },
     { "movshdup", { XM, EXx } },
     { "movhpd",	{ XM, EXq } },
     { "(bad)",	{ XM, EXq } },
@@ -1918,7 +2068,7 @@
     { "(bad)",	{ XM, EXx } },
     { "(bad)",	{ XM, EXx } },
     { "(bad)",	{ XM, EXx } },
-    { OPC_EXT_32 },
+    { "lddqu",	{ XM, M } },
   },
   /* PREGRP33 */
   {
@@ -2439,30 +2589,6 @@
     { "punpckldq",{ MX, EMx } },
     { "(bad)",	{ XX } },
   },
-
-  /* PREGRP98 */
-  {
-    { "vmptrld",{ Mq } },
-    { "vmxon",	{ Mq } },
-    { "vmclear",{ Mq } },
-    { "(bad)",	{ XX } },
-  },
-
-  /* PREGRP99 */
-  {
-    { "(bad)",	{ XX } },
-    { "(bad)",	{ XX } },
-    { "psrldq",	{ MS, Ib } },
-    { "(bad)",	{ XX } },
-  },
-
-  /* PREGRP100 */
-  {
-    { "(bad)",	{ XX } },
-    { "(bad)",	{ XX } },
-    { "pslldq",	{ MS, Ib } },
-    { "(bad)",	{ XX } },
-  },
 };
 
 static const struct dis386 x86_64_table[][2] = {
@@ -2475,7 +2601,7 @@
     { "(bad)", { XX } },
   },
   {
-    { OPC_EXT_33 },
+    { "bound{S|}", { Gv, Ma } },
     { "(bad)", { XX } },
   },
   {
@@ -3069,319 +3195,6 @@
   }
 };
 
-static const struct dis386 opc_ext_table[][2] = {
-  {
-    /* OPC_EXT_0 */
-    { "leaS",		{ Gv, M } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_1 */
-    { "les{S|}",	{ Gv, Mp } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_2 */
-    { "ldsS",		{ Gv, Mp } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_3 */
-    { "lssS",		{ Gv, Mp } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_4 */
-    { "lfsS",		{ Gv, Mp } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_5 */
-    { "lgsS",		{ Gv, Mp } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_6 */
-    { "sgdt{Q|IQ||}",	{ M } },
-    { OPC_EXT_RM_0 },
-  },
-  {
-    /* OPC_EXT_7 */
-    { "sidt{Q|IQ||}",	{ M } },
-    { OPC_EXT_RM_1 },
-  },
-  {
-    /* OPC_EXT_8 */
-    { "lgdt{Q|Q||}",	{ M } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_9 */
-    { PREGRP98 },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_10 */
-    { "vmptrst",	{ Mq } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_11 */
-    { "(bad)",		{ XX } },
-    { "psrlw",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_12 */
-    { "(bad)",		{ XX } },
-    { "psraw",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_13 */
-    { "(bad)",		{ XX } },
-    { "psllw",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_14 */
-    { "(bad)",		{ XX } },
-    { "psrld",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_15 */
-    { "(bad)",		{ XX } },
-    { "psrad",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_16 */
-    { "(bad)",		{ XX } },
-    { "pslld",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_17 */
-    { "(bad)",		{ XX } },
-    { "psrlq",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_18 */
-    { "(bad)",		{ XX } },
-    { PREGRP99 },
-  },
-  {
-    /* OPC_EXT_19 */
-    { "(bad)",		{ XX } },
-    { "psllq",		{ MS, Ib } },
-  },
-  {
-    /* OPC_EXT_20 */
-    { "(bad)",		{ XX } },
-    { PREGRP100 },
-  },
-  {
-    /* OPC_EXT_21 */
-    { "fxsave",		{ M } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_22 */
-    { "fxrstor",	{ M } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_23 */
-    { "ldmxcsr",	{ Md } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_24 */
-    { "stmxcsr",	{ Md } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_25 */
-    { "(bad)",		{ XX } },
-    { OPC_EXT_RM_2 },
-  },
-  {
-    /* OPC_EXT_26 */
-    { "(bad)",		{ XX } },
-    { OPC_EXT_RM_3 },
-  },
-  {
-    /* OPC_EXT_27 */
-    { "clflush",	{ Mb } },
-    { OPC_EXT_RM_4 },
-  },
-  {
-    /* OPC_EXT_28 */
-    { "prefetchnta",	{ Mb } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_29 */
-    { "prefetcht0",	{ Mb } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_30 */
-    { "prefetcht1",	{ Mb } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_31 */
-    { "prefetcht2",	{ Mb } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_32 */
-    { "lddqu",		{ XM, M } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_33 */
-    { "bound{S|}",	{ Gv, Ma } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_34 */
-    { "movlpX",		{ EXq, XM } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_35 */
-    { "movhpX",		{ EXq, XM } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_36 */
-    { "movlpX",		{ XM, EXq } },
-    { "movhlpX",	{ XM, EXq } },
-  },
-  {
-    /* OPC_EXT_37 */
-    { "movhpX",		{ XM, EXq } },
-    { "movlhpX",	{ XM, EXq } },
-  },
-  {
-    /* OPC_EXT_38 */
-    { "invlpg",		{ Mb } },
-    { OPC_EXT_RM_5 },
-  },
-  {
-    /* OPC_EXT_39 */
-    { "lidt{Q|Q||}",	{ M } },
-    { OPC_EXT_RM_6 },
-  },
-  {
-    /* OPC_EXT_40 */
-    { "(bad)",		{ XX } },
-    { "movZ",		{ Rm, Cm } },
-  },
-  {
-    /* OPC_EXT_41 */
-    { "(bad)",		{ XX } },
-    { "movZ",		{ Rm, Dm } },
-  },
-  {
-    /* OPC_EXT_42 */
-    { "(bad)",		{ XX } },
-    { "movZ",		{ Cm, Rm } },
-  },
-  {
-    /* OPC_EXT_43 */
-    { "(bad)",		{ XX } },
-    { "movZ",		{ Dm, Rm } },
-  },
-  {
-    /* OPC_EXT_44 */
-    { "(bad)",		{ XX } },
-    { "movL",		{ Rd, Td } },
-  },
-  {
-    /* OPC_EXT_45 */
-    { "(bad)",		{ XX } },
-    { "movL",		{ Td, Rd } },
-  },
-};
-
-static const struct dis386 opc_ext_rm_table[][8] = {
-  {
-    /* OPC_EXT_RM_0 */
-    { "(bad)",		{ XX } },
-    { "vmcall",		{ Skip_MODRM } },
-    { "vmlaunch",	{ Skip_MODRM } },
-    { "vmresume",	{ Skip_MODRM } },
-    { "vmxoff",		{ Skip_MODRM } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_RM_1 */
-    { "monitor",	{ { OP_Monitor, 0 } } },
-    { "mwait",		{ { OP_Mwait, 0 } } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_RM_2 */
-    { "lfence",		{ Skip_MODRM } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_RM_3 */
-    { "mfence",		{ Skip_MODRM } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_RM_4 */
-    { "sfence",		{ Skip_MODRM } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_RM_5 */
-    { "swapgs",		{ Skip_MODRM } },
-    { "rdtscp",		{ Skip_MODRM } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-    { "(bad)",		{ XX } },
-  },
-  {
-    /* OPC_EXT_RM_6 */
-    { "vmrun",		{ Skip_MODRM } },
-    { "vmmcall",	{ Skip_MODRM } },
-    { "vmload",		{ Skip_MODRM } },
-    { "vmsave",		{ Skip_MODRM } },
-    { "stgi",		{ Skip_MODRM } },
-    { "clgi",		{ Skip_MODRM } },
-    { "skinit",		{ Skip_MODRM } },
-    { "invlpga",	{ Skip_MODRM } },
-  },
-};
-
 #define INTERNAL_DISASSEMBLER_ERROR _("<internal disassembler error>")
 
 static void
@@ -3626,79 +3439,6 @@
   fprintf (stream, _("  suffix      Always display instruction suffix in AT&T syntax\n"));
 }
 
-/* Get a pointer to struct dis386 with a valid name.  */
-
-static const struct dis386 *
-get_valid_dis386 (const struct dis386 *dp)
-{
-  int index;
-
-  if (dp->name != NULL)
-    return dp;
-
-  switch (dp->op[0].bytemode)
-    {
-    case USE_GROUPS:
-      dp = &grps[dp->op[1].bytemode][modrm.reg];
-      break;
-
-    case USE_PREFIX_USER_TABLE:
-      index = 0;
-      used_prefixes |= (prefixes & PREFIX_REPZ);
-      if (prefixes & PREFIX_REPZ)
-	{
-	  index = 1;
-	  repz_prefix = NULL;
-	}
-      else
-	{
-	  /* We should check PREFIX_REPNZ and PREFIX_REPZ before
-	     PREFIX_DATA.  */
-	  used_prefixes |= (prefixes & PREFIX_REPNZ);
-	  if (prefixes & PREFIX_REPNZ)
-	    {
-	      index = 3;
-	      repnz_prefix = NULL;
-	    }
-	  else
-	    {
-	      used_prefixes |= (prefixes & PREFIX_DATA);
-	      if (prefixes & PREFIX_DATA)
-		{
-		  index = 2;
-		  data_prefix = NULL;
-		}
-	    }
-	}
-      dp = &prefix_user_table[dp->op[1].bytemode][index];
-      break;
-
-    case X86_64_SPECIAL:
-      index = address_mode == mode_64bit ? 1 : 0;
-      dp = &x86_64_table[dp->op[1].bytemode][index];
-      break;
-
-    case USE_OPC_EXT_TABLE:
-      index = modrm.mod == 0x3 ? 1 : 0;
-      dp = &opc_ext_table[dp->op[1].bytemode][index];
-      break;
-
-    case USE_OPC_EXT_RM_TABLE:
-      index = modrm.rm;
-      dp = &opc_ext_rm_table[dp->op[1].bytemode][index];
-      break;
-
-    default:
-      oappend (INTERNAL_DISASSEMBLER_ERROR);
-      return NULL;
-    }
-
-  if (dp->name != NULL)
-    return dp;
-  else
-    return get_valid_dis386 (dp);
-}
-
 static int
 print_insn (bfd_vma pc, disassemble_info *info)
 {
@@ -3706,12 +3446,12 @@
   int i;
   char *op_txt[MAX_OPERANDS];
   int needcomma;
+  unsigned char uses_DATA_prefix, uses_LOCK_prefix;
+  unsigned char uses_REPNZ_prefix, uses_REPZ_prefix;
   int sizeflag;
   const char *p;
   struct dis_private priv;
   unsigned char op;
-  char prefix_obuf[32];
-  char *prefix_obufp;
 
   if (info->mach == bfd_mach_x86_64_intel_syntax
       || info->mach == bfd_mach_x86_64)
@@ -3896,60 +3636,75 @@
       threebyte = *++codep;
       dp = &dis386_twobyte[threebyte];
       need_modrm = twobyte_has_modrm[*codep];
+      uses_DATA_prefix = twobyte_uses_DATA_prefix[*codep];
+      uses_REPNZ_prefix = twobyte_uses_REPNZ_prefix[*codep];
+      uses_REPZ_prefix = twobyte_uses_REPZ_prefix[*codep];
+      uses_LOCK_prefix = (*codep & ~0x02) == 0x20;
       codep++;
       if (dp->name == NULL && dp->op[0].bytemode == IS_3BYTE_OPCODE)
 	{
 	  FETCH_DATA (info, codep + 2);
 	  op = *codep++;
+	  switch (threebyte)
+	    {
+	    case 0x38:
+	      uses_DATA_prefix = threebyte_0x38_uses_DATA_prefix[op];
+	      uses_REPNZ_prefix = threebyte_0x38_uses_REPNZ_prefix[op];
+	      uses_REPZ_prefix = threebyte_0x38_uses_REPZ_prefix[op];
+	      break;
+	    case 0x3a:
+	      uses_DATA_prefix = threebyte_0x3a_uses_DATA_prefix[op];
+	      uses_REPNZ_prefix = threebyte_0x3a_uses_REPNZ_prefix[op];
+	      uses_REPZ_prefix = threebyte_0x3a_uses_REPZ_prefix[op];
+	      break;
+	    default:
+	      break;
+	    }
 	}
     }
   else
     {
       dp = &dis386[*codep];
       need_modrm = onebyte_has_modrm[*codep];
+      uses_DATA_prefix = 0;
+      uses_REPNZ_prefix = 0;
+      /* pause is 0xf3 0x90.  */
+      uses_REPZ_prefix = *codep == 0x90;
+      uses_LOCK_prefix = 0;
       codep++;
     }
 
-  if ((prefixes & PREFIX_REPZ))
+  if (!uses_REPZ_prefix && (prefixes & PREFIX_REPZ))
     {
-      repz_prefix = "repz ";
+      oappend ("repz ");
       used_prefixes |= PREFIX_REPZ;
     }
-  else
-    repz_prefix = NULL;
-
-  if ((prefixes & PREFIX_REPNZ))
+  if (!uses_REPNZ_prefix && (prefixes & PREFIX_REPNZ))
     {
-      repnz_prefix = "repnz ";
+      oappend ("repnz ");
       used_prefixes |= PREFIX_REPNZ;
     }
-  else
-    repnz_prefix = NULL;
 
-  if ((prefixes & PREFIX_LOCK))
+  if (!uses_LOCK_prefix && (prefixes & PREFIX_LOCK))
     {
-      lock_prefix = "lock ";
+      oappend ("lock ");
       used_prefixes |= PREFIX_LOCK;
     }
-  else
-    lock_prefix = NULL;
 
-  addr_prefix = NULL;
   if (prefixes & PREFIX_ADDR)
     {
       sizeflag ^= AFLAG;
       if (dp->op[2].bytemode != loop_jcxz_mode || intel_syntax)
 	{
 	  if ((sizeflag & AFLAG) || address_mode == mode_64bit)
-	    addr_prefix = "addr32 ";
+	    oappend ("addr32 ");
 	  else
-	    addr_prefix = "addr16 ";
+	    oappend ("addr16 ");
 	  used_prefixes |= PREFIX_ADDR;
 	}
     }
 
-  data_prefix = NULL;
-  if ((prefixes & PREFIX_DATA))
+  if (!uses_DATA_prefix && (prefixes & PREFIX_DATA))
     {
       sizeflag ^= DFLAG;
       if (dp->op[2].bytemode == cond_jump_mode
@@ -3957,9 +3712,9 @@
 	  && !intel_syntax)
 	{
 	  if (sizeflag & DFLAG)
-	    data_prefix = "data32 ";
+	    oappend ("data32 ");
 	  else
-	    data_prefix = "data16 ";
+	    oappend ("data16 ");
 	  used_prefixes |= PREFIX_DATA;
 	}
     }
@@ -3985,8 +3740,49 @@
     }
   else
     {
-      dp = get_valid_dis386 (dp);
-      if (dp != NULL && putop (dp->name, sizeflag) == 0)
+      int index;
+      if (dp->name == NULL)
+	{
+	  switch (dp->op[0].bytemode)
+	    {
+	    case USE_GROUPS:
+	      dp = &grps[dp->op[1].bytemode][modrm.reg];
+	      break;
+
+	    case USE_PREFIX_USER_TABLE:
+	      index = 0;
+	      used_prefixes |= (prefixes & PREFIX_REPZ);
+	      if (prefixes & PREFIX_REPZ)
+		index = 1;
+	      else
+		{
+		  /* We should check PREFIX_REPNZ and PREFIX_REPZ
+		     before PREFIX_DATA.  */
+		  used_prefixes |= (prefixes & PREFIX_REPNZ);
+		  if (prefixes & PREFIX_REPNZ)
+		    index = 3;
+		  else
+		    {
+		      used_prefixes |= (prefixes & PREFIX_DATA);
+		      if (prefixes & PREFIX_DATA)
+			index = 2;
+		    }
+		}
+	      dp = &prefix_user_table[dp->op[1].bytemode][index];
+	      break;
+
+	    case X86_64_SPECIAL:
+	      index = address_mode == mode_64bit ? 1 : 0;
+	      dp = &x86_64_table[dp->op[1].bytemode][index];
+	      break;
+
+	    default:
+	      oappend (INTERNAL_DISASSEMBLER_ERROR);
+	      break;
+	    }
+	}
+
+      if (dp->name != NULL && putop (dp->name, sizeflag) == 0)
         {
 	  for (i = 0; i < MAX_OPERANDS; ++i)
 	    {
@@ -4021,24 +3817,8 @@
       (*info->fprintf_func) (info->stream, "%s ", name);
     }
 
-  prefix_obuf[0] = 0;
-  prefix_obufp = prefix_obuf;
-  if (lock_prefix)
-    prefix_obufp = stpcpy (prefix_obufp, lock_prefix);
-  if (repz_prefix)
-    prefix_obufp = stpcpy (prefix_obufp, repz_prefix);
-  if (repnz_prefix)
-    prefix_obufp = stpcpy (prefix_obufp, repnz_prefix);
-  if (addr_prefix)
-    prefix_obufp = stpcpy (prefix_obufp, addr_prefix);
-  if (data_prefix)
-    prefix_obufp = stpcpy (prefix_obufp, data_prefix);
-
-  if (prefix_obuf[0] != 0)
-    (*info->fprintf_func) (info->stream, "%s", prefix_obuf);
-
   obufp = obuf + strlen (obuf);
-  for (i = strlen (obuf) + strlen (prefix_obuf); i < 6; i++)
+  for (i = strlen (obuf); i < 6; i++)
     oappend (" ");
   oappend (" ");
   (*info->fprintf_func) (info->stream, "%s", obuf);
@@ -4409,15 +4189,6 @@
 };
 
 static void
-OP_Skip_MODRM (int bytemode ATTRIBUTE_UNUSED,
-	       int sizeflag ATTRIBUTE_UNUSED)
-{
-  /* Skip mod/rm byte.  */
-  MODRM_CHECK;
-  codep++;
-}
-
-static void
 dofloat (int sizeflag)
 {
   const struct dis386 *dp;
@@ -5942,7 +5713,6 @@
     }
   else if (address_mode != mode_64bit && (prefixes & PREFIX_LOCK))
     {
-      lock_prefix = NULL;
       used_prefixes |= PREFIX_LOCK;
       add = 8;
     }
@@ -6132,6 +5902,29 @@
     OP_E (bytemode, sizeflag);
 }
 
+static void
+OP_0fae (int bytemode, int sizeflag)
+{
+  if (modrm.mod == 3)
+    {
+      if (modrm.reg == 7)
+	strcpy (obuf + strlen (obuf) - sizeof ("clflush") + 1, "sfence");
+
+      if (modrm.reg < 5 || modrm.rm != 0)
+	{
+	  BadOp ();	/* bad sfence, mfence, or lfence */
+	  return;
+	}
+    }
+  else if (modrm.reg != 7)
+    {
+      BadOp ();		/* bad clflush */
+      return;
+    }
+
+  OP_E (bytemode, sizeflag);
+}
+
 /* NOP is an alias of "xchg %ax,%ax" in 16bit mode, "xchg %eax,%eax" in
    32bit mode and "xchg %rax,%rax" in 64bit mode.  */
 
@@ -6301,52 +6094,174 @@
 }
 
 static void
-OP_Mwait (int bytemode ATTRIBUTE_UNUSED,
-	  int sizeflag ATTRIBUTE_UNUSED)
+SIMD_Fixup (int extrachar, int sizeflag ATTRIBUTE_UNUSED)
 {
-  /* mwait %eax,%ecx  */
-  if (!intel_syntax)
+  /* Change movlps/movhps to movhlps/movlhps for 2 register operand
+     forms of these instructions.  */
+  if (modrm.mod == 3)
     {
-      const char **names = (address_mode == mode_64bit
-			    ? names64 : names32);
-      strcpy (op_out[0], names[0]);
-      strcpy (op_out[1], names[1]);
-      two_source_ops = 1;
+      char *p = obuf + strlen (obuf);
+      *(p + 1) = '\0';
+      *p       = *(p - 1);
+      *(p - 1) = *(p - 2);
+      *(p - 2) = *(p - 3);
+      *(p - 3) = extrachar;
     }
-  /* Skip mod/rm byte.  */
-  MODRM_CHECK;
-  codep++;
 }
 
 static void
-OP_Monitor (int bytemode ATTRIBUTE_UNUSED,
-	    int sizeflag ATTRIBUTE_UNUSED)
+PNI_Fixup (int extrachar ATTRIBUTE_UNUSED, int sizeflag)
 {
-  /* monitor %eax,%ecx,%edx"  */
-  if (!intel_syntax)
+  if (modrm.mod == 3 && modrm.reg == 1 && modrm.rm <= 1)
     {
-      const char **op1_names;
+      /* Override "sidt".  */
+      size_t olen = strlen (obuf);
+      char *p = obuf + olen - 4;
       const char **names = (address_mode == mode_64bit
 			    ? names64 : names32);
 
-      if (!(prefixes & PREFIX_ADDR))
-	op1_names = (address_mode == mode_16bit
-		     ? names16 : names);
+      /* We might have a suffix when disassembling with -Msuffix.  */
+      if (*p == 'i')
+	--p;
+
+      /* Remove "addr16/addr32" if we aren't in Intel mode.  */
+      if (!intel_syntax
+	  && (prefixes & PREFIX_ADDR)
+	  && olen >= (4 + 7)
+	  && *(p - 1) == ' '
+	  && CONST_STRNEQ (p - 7, "addr")
+	  && (CONST_STRNEQ (p - 3, "16")
+	      || CONST_STRNEQ (p - 3, "32")))
+	p -= 7;
+
+      if (modrm.rm)
+	{
+	  /* mwait %eax,%ecx  */
+	  strcpy (p, "mwait");
+	  if (!intel_syntax)
+	    strcpy (op_out[0], names[0]);
+	}
       else
 	{
-	  /* Remove "addr16/addr32".  */
-	  addr_prefix = NULL;
-	  op1_names = (address_mode != mode_32bit
-		       ? names32 : names16);
-	  used_prefixes |= PREFIX_ADDR;
+	  /* monitor %eax,%ecx,%edx"  */
+	  strcpy (p, "monitor");
+	  if (!intel_syntax)
+	    {
+	      const char **op1_names;
+	      if (!(prefixes & PREFIX_ADDR))
+		op1_names = (address_mode == mode_16bit
+			     ? names16 : names);
+	      else
+		{
+		  op1_names = (address_mode != mode_32bit
+			       ? names32 : names16);
+		  used_prefixes |= PREFIX_ADDR;
+		}
+	      strcpy (op_out[0], op1_names[0]);
+	      strcpy (op_out[2], names[2]);
+	    }
+	}
+      if (!intel_syntax)
+	{
+	  strcpy (op_out[1], names[1]);
+	  two_source_ops = 1;
 	}
-      strcpy (op_out[0], op1_names[0]);
-      strcpy (op_out[1], names[1]);
-      strcpy (op_out[2], names[2]);
+
+      codep++;
+    }
+  else
+    OP_M (0, sizeflag);
+}
+
+static void
+SVME_Fixup (int bytemode, int sizeflag)
+{
+  const char *alt;
+  char *p;
+
+  switch (*codep)
+    {
+    case 0xd8:
+      alt = "vmrun";
+      break;
+    case 0xd9:
+      alt = "vmmcall";
+      break;
+    case 0xda:
+      alt = "vmload";
+      break;
+    case 0xdb:
+      alt = "vmsave";
+      break;
+    case 0xdc:
+      alt = "stgi";
+      break;
+    case 0xdd:
+      alt = "clgi";
+      break;
+    case 0xde:
+      alt = "skinit";
+      break;
+    case 0xdf:
+      alt = "invlpga";
+      break;
+    default:
+      OP_M (bytemode, sizeflag);
+      return;
+    }
+  /* Override "lidt".  */
+  p = obuf + strlen (obuf) - 4;
+  /* We might have a suffix.  */
+  if (*p == 'i')
+    --p;
+  strcpy (p, alt);
+  if (!(prefixes & PREFIX_ADDR))
+    {
+      ++codep;
+      return;
+    }
+  used_prefixes |= PREFIX_ADDR;
+  switch (*codep++)
+    {
+    case 0xdf:
+      strcpy (op_out[1], names32[1]);
       two_source_ops = 1;
+	  /* Fall through.  */
+    case 0xd8:
+    case 0xda:
+    case 0xdb:
+      *obufp++ = open_char;
+      if (address_mode == mode_64bit || (sizeflag & AFLAG))
+        alt = names32[0];
+      else
+        alt = names16[0];
+      strcpy (obufp, alt);
+      obufp += strlen (alt);
+      *obufp++ = close_char;
+      *obufp = '\0';
+      break;
     }
-  /* Skip mod/rm byte.  */
-  MODRM_CHECK;
+}
+
+static void
+INVLPG_Fixup (int bytemode, int sizeflag)
+{
+  const char *alt;
+
+  switch (*codep)
+    {
+    case 0xf8:
+      alt = "swapgs";
+      break;
+    case 0xf9:
+      alt = "rdtscp";
+      break;
+    default:
+      OP_M (bytemode, sizeflag);
+      return;
+    }
+  /* Override "invlpg".  */
+  strcpy (obuf + strlen (obuf) - 6, alt);
   codep++;
 }
 
@@ -6359,12 +6274,108 @@
 }
 
 static void
+VMX_Fixup (int extrachar ATTRIBUTE_UNUSED, int sizeflag)
+{
+  if (modrm.mod == 3
+      && modrm.reg == 0
+      && modrm.rm >=1
+      && modrm.rm <= 4)
+    {
+      /* Override "sgdt".  */
+      char *p = obuf + strlen (obuf) - 4;
+
+      /* We might have a suffix when disassembling with -Msuffix.  */
+      if (*p == 'g')
+	--p;
+
+      switch (modrm.rm)
+	{
+	case 1:
+	  strcpy (p, "vmcall");
+	  break;
+	case 2:
+	  strcpy (p, "vmlaunch");
+	  break;
+	case 3:
+	  strcpy (p, "vmresume");
+	  break;
+	case 4:
+	  strcpy (p, "vmxoff");
+	  break;
+	}
+
+      codep++;
+    }
+  else
+    OP_E (0, sizeflag);
+}
+
+static void
+OP_VMX (int bytemode, int sizeflag)
+{
+  used_prefixes |= (prefixes & (PREFIX_DATA | PREFIX_REPZ));
+  if (prefixes & PREFIX_DATA)
+    strcpy (obuf, "vmclear");
+  else if (prefixes & PREFIX_REPZ)
+    strcpy (obuf, "vmxon");
+  else
+    strcpy (obuf, "vmptrld");
+  OP_E (bytemode, sizeflag);
+}
+
+static void
 REP_Fixup (int bytemode, int sizeflag)
 {
   /* The 0xf3 prefix should be displayed as "rep" for ins, outs, movs,
      lods and stos.  */
+  size_t ilen = 0;
+
   if (prefixes & PREFIX_REPZ)
-    repz_prefix = "rep ";
+    switch (*insn_codep)
+      {
+      case 0x6e:	/* outsb */
+      case 0x6f:	/* outsw/outsl */
+      case 0xa4:	/* movsb */
+      case 0xa5:	/* movsw/movsl/movsq */
+	if (!intel_syntax)
+	  ilen = 5;
+	else
+	  ilen = 4;
+	break;
+      case 0xaa:	/* stosb */
+      case 0xab:	/* stosw/stosl/stosq */
+      case 0xac:	/* lodsb */
+      case 0xad:	/* lodsw/lodsl/lodsq */
+	if (!intel_syntax && (sizeflag & SUFFIX_ALWAYS))
+	  ilen = 5;
+	else
+	  ilen = 4;
+	break;
+      case 0x6c:	/* insb */
+      case 0x6d:	/* insl/insw */
+	if (!intel_syntax)
+	  ilen = 4;
+	else
+	  ilen = 3;
+	break;
+      default:
+	abort ();
+	break;
+      }
+
+  if (ilen != 0)
+    {
+      size_t olen;
+      char *p;
+
+      olen = strlen (obuf);
+      p = obuf + olen - ilen - 1 - 4;
+      /* Handle "repz [addr16|addr32]".  */
+      if ((prefixes & PREFIX_ADDR))
+	p -= 1 + 6;
+
+      memmove (p + 3, p + 4, olen - (p + 3 - obuf));
+    }
 
   switch (bytemode)
     {
diff -Nur binutils-2.18.50.0.1/opcodes/i386-gen.c binutils-stable/opcodes/i386-gen.c
--- binutils-2.18.50.0.1/opcodes/i386-gen.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/i386-gen.c	2007-09-25 15:42:02.000000000 +0200
@@ -45,30 +45,6 @@
   xexit (1);
 }
 
-static void
-process_copyright (FILE *fp)
-{
-  fprintf (fp, "/* This file is automatically generated by i386-gen.  Do not edit!  */\n\
-/* Copyright 2007  Free Software Foundation, Inc.\n\
-\n\
-   This file is part of the GNU opcodes library.\n\
-\n\
-   This library is free software; you can redistribute it and/or modify\n\
-   it under the terms of the GNU General Public License as published by\n\
-   the Free Software Foundation; either version 3, or (at your option)\n\
-   any later version.\n\
-\n\
-   It is distributed in the hope that it will be useful, but WITHOUT\n\
-   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n\
-   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n\
-   License for more details.\n\
-\n\
-   You should have received a copy of the GNU General Public License\n\
-   along with this program; if not, write to the Free Software\n\
-   Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston,\n\
-   MA 02110-1301, USA.  */\n");
-}
-
 /* Remove leading white spaces.  */
 
 static char *
@@ -100,16 +76,16 @@
   while (last != 0);
 }
 
-/* Find next field separated by SEP and terminate it. Return a
+/* Find next field separated by '.' and terminate it. Return a
    pointer to the one after it.  */
 
 static char *
-next_field (char *str, char sep, char **next)
+next_field (char *str, char **next)
 {
   char *p;
 
   p = remove_leading_whitespaces (str);
-  for (str = p; *str != sep && *str != '\0'; str++);
+  for (str = p; *str != ',' && *str != '\0'; str++);
 
   *str = '\0';
   remove_trailing_whitespaces (p);
@@ -120,7 +96,7 @@
 }
 
 static void
-process_i386_opcodes (FILE *table)
+process_i386_opcodes (void)
 {
   FILE *fp = fopen ("i386-opc.tbl", "r");
   char buf[2048];
@@ -130,11 +106,10 @@
   char *cpu_flags, *opcode_modifier, *operand_types [MAX_OPERANDS];
 
   if (fp == NULL)
-    fail (_("can't find i386-opc.tbl for reading, errno = %s\n"),
-	  strerror (errno));
+    fail (_("can't find i386-opc.tbl for reading\n"));
 
-  fprintf (table, "\n/* i386 opcode table.  */\n\n");
-  fprintf (table, "const template i386_optab[] =\n{\n");
+  printf ("\n/* i386 opcode table.  */\n\n");
+  printf ("const template i386_optab[] =\n{\n");
 
   while (!feof (fp))
     {
@@ -154,7 +129,7 @@
       switch (p[0])
 	{
 	case '#':
-	  fprintf (table, "%s\n", p);
+	  printf ("%s\n", p);
 	case '\0':
 	  continue;
 	  break;
@@ -165,37 +140,37 @@
       last = p + strlen (p);
 
       /* Find name.  */
-      name = next_field (p, ',', &str);
+      name = next_field (p, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find number of operands.  */
-      operands = next_field (str, ',', &str);
+      operands = next_field (str, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find base_opcode.  */
-      base_opcode = next_field (str, ',', &str);
+      base_opcode = next_field (str, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find extension_opcode.  */
-      extension_opcode = next_field (str, ',', &str);
+      extension_opcode = next_field (str, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find cpu_flags.  */
-      cpu_flags = next_field (str, ',', &str);
+      cpu_flags = next_field (str, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find opcode_modifier.  */
-      opcode_modifier = next_field (str, ',', &str);
+      opcode_modifier = next_field (str, &str);
 
       if (str >= last)
 	abort ();
@@ -234,7 +209,7 @@
 	      break;
 	    }
 
-	  operand_types [i] = next_field (str, ',', &str);
+	  operand_types [i] = next_field (str, &str);
 	  if (*operand_types[i] == '0')
 	    {
 	      if (i != 0)
@@ -243,13 +218,13 @@
 	    }
 	}
 
-      fprintf (table, "  { \"%s\", %s, %s, %s, %s,\n",
-	       name, operands, base_opcode, extension_opcode,
-	       cpu_flags);
+      printf ("  { \"%s\", %s, %s, %s, %s,\n",
+	      name, operands, base_opcode, extension_opcode,
+	      cpu_flags);
 
-      fprintf (table, "    %s,\n", opcode_modifier);
+      printf ("    %s,\n", opcode_modifier);
 
-      fprintf (table, "    { ");
+      printf ("    { ");
 
       for (i = 0; i < ARRAY_SIZE (operand_types); i++)
 	{
@@ -257,26 +232,24 @@
 	      || *operand_types[i] == '0')
 	    {
 	      if (i == 0)
-		fprintf (table, "0");
+		printf ("0");
 	      break;
 	    }
 
 	  if (i != 0)
-	    fprintf (table, ",\n      ");
+	    printf (",\n      ");
 
-	  fprintf (table, "%s", operand_types[i]);
+	  printf ("%s", operand_types[i]);
 	}
-      fprintf (table, " } },\n");
+      printf (" } },\n");
     }
 
-  fclose (fp);
-
-  fprintf (table, "  { NULL, 0, 0, 0, 0, 0, { 0 } }\n");
-  fprintf (table, "};\n");
+  printf ("  { NULL, 0, 0, 0, 0, 0, { 0 } }\n");
+  printf ("};\n");
 }
 
 static void
-process_i386_registers (FILE *table)
+process_i386_registers (void)
 {
   FILE *fp = fopen ("i386-reg.tbl", "r");
   char buf[2048];
@@ -284,11 +257,10 @@
   char *reg_name, *reg_type, *reg_flags, *reg_num;
 
   if (fp == NULL)
-    fail (_("can't find i386-reg.tbl for reading, errno = %s\n"),
-	  strerror (errno));
+    fail (_("can't find i386-reg.tbl for reading\n"));
 
-  fprintf (table, "\n/* i386 register table.  */\n\n");
-  fprintf (table, "const reg_entry i386_regtab[] =\n{\n");
+  printf ("\n/* i386 register table.  */\n\n");
+  printf ("const reg_entry i386_regtab[] =\n{\n");
 
   while (!feof (fp))
     {
@@ -308,7 +280,7 @@
       switch (p[0])
 	{
 	case '#':
-	  fprintf (table, "%s\n", p);
+	  printf ("%s\n", p);
 	case '\0':
 	  continue;
 	  break;
@@ -319,35 +291,33 @@
       last = p + strlen (p);
 
       /* Find reg_name.  */
-      reg_name = next_field (p, ',', &str);
+      reg_name = next_field (p, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find reg_type.  */
-      reg_type = next_field (str, ',', &str);
+      reg_type = next_field (str, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find reg_flags.  */
-      reg_flags = next_field (str, ',', &str);
+      reg_flags = next_field (str, &str);
 
       if (str >= last)
 	abort ();
 
       /* Find reg_num.  */
-      reg_num = next_field (str, ',', &str);
+      reg_num = next_field (str, &str);
 
-      fprintf (table, "  { \"%s\", %s, %s, %s },\n",
-	       reg_name, reg_type, reg_flags, reg_num);
+      printf ("  { \"%s\", %s, %s, %s },\n",
+	      reg_name, reg_type, reg_flags, reg_num);
     }
 
-  fclose (fp);
-
-  fprintf (table, "};\n");
+  printf ("};\n");
 
-  fprintf (table, "\nconst unsigned int i386_regtab_size = ARRAY_SIZE (i386_regtab);\n");
+  printf ("\nconst unsigned int i386_regtab_size = ARRAY_SIZE (i386_regtab);\n");
 }
 
 /* Program options.  */
@@ -383,7 +353,6 @@
   extern int chdir (char *);
   char *srcdir = NULL;
   int c;
-  FILE *table;
   
   program_name = *argv;
   xmalloc_set_program_name (program_name);
@@ -417,16 +386,28 @@
       fail (_("unable to change directory to \"%s\", errno = %s\n"),
 	    srcdir, strerror (errno));
 
-  table = fopen ("i386-tbl.h", "w");
-  if (table == NULL)
-    fail (_("can't create i386-tbl.h, errno = %s\n"), strerror (errno));
-
-  process_copyright (table);
-
-  process_i386_opcodes (table);
-  process_i386_registers (table);
+  printf ("/* This file is automatically generated by i386-gen.  Do not edit!  */\n");
+  printf ("/* Copyright 2007  Free Software Foundation, Inc.\n\
+\n\
+   This file is part of the GNU opcodes library.\n\
+\n\
+   This library is free software; you can redistribute it and/or modify\n\
+   it under the terms of the GNU General Public License as published by\n\
+   the Free Software Foundation; either version 3, or (at your option)\n\
+   any later version.\n\
+\n\
+   It is distributed in the hope that it will be useful, but WITHOUT\n\
+   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n\
+   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n\
+   License for more details.\n\
+\n\
+   You should have received a copy of the GNU General Public License\n\
+   along with this program; if not, write to the Free Software\n\
+   Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston,\n\
+   MA 02110-1301, USA.  */\n");
 
-  fclose (table);
+  process_i386_opcodes ();
+  process_i386_registers ();
 
   exit (0);
 }
diff -Nur binutils-2.18.50.0.1/opcodes/i386-opc.tbl binutils-stable/opcodes/i386-opc.tbl
--- binutils-2.18.50.0.1/opcodes/i386-opc.tbl	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/i386-opc.tbl	2007-09-25 15:42:02.000000000 +0200
@@ -1460,22 +1460,18 @@
 // AMD Pacifica additions.
 clgi, 0, 0xf01, 0xdd, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
 invlpga, 0, 0xf01, 0xdf, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
-// FIXME: Need to ensure only "invlpga %[re]ax,%ecx" is accepted.
-invlpga, 2, 0xf01, 0xdf, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64, { Reg32|Reg64, Reg32 }
+// Need to ensure only "invlpga ...,%ecx" is accepted.
+invlpga, 2, 0xf01, 0xdf, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { BaseIndex|Disp8|Disp16|Disp32|Disp32S, Reg32 }
 skinit, 0, 0xf01, 0xde, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
-// FIXME: Need to ensure only "skinit %eax" is accepted.
-skinit, 1, 0xf01, 0xde, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { Reg32 }
+skinit, 1, 0xf01, 0xde, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { BaseIndex|Disp8|Disp16|Disp32|Disp32S }
 stgi, 0, 0xf01, 0xdc, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
 vmload, 0, 0xf01, 0xda, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
-// FIXME: Need to ensure only "vmload %[re]ax" is accepted.
-vmload, 1, 0xf01, 0xda, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64, { Reg32|Reg64 }
+vmload, 1, 0xf01, 0xda, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { BaseIndex|Disp8|Disp16|Disp32|Disp32S }
 vmmcall, 0, 0xf01, 0xd9, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
 vmrun, 0, 0xf01, 0xd8, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
-// FIXME: Need to ensure only "vmrun %[re]ax" is accepted.
-vmrun, 1, 0xf01, 0xd8, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64, { Reg32|Reg64 }
+vmrun, 1, 0xf01, 0xd8, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { BaseIndex|Disp8|Disp16|Disp32|Disp32S }
 vmsave, 0, 0xf01, 0xdb, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { 0 }
-// FIXME: Need to ensure only "vmsave %[re]ax" is accepted.
-vmsave, 1, 0xf01, 0xdb, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64, { Reg32|Reg64 }
+vmsave, 1, 0xf01, 0xdb, CpuSVME, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt, { BaseIndex|Disp8|Disp16|Disp32|Disp32S }
 
 
 // SSE4a instructions
diff -Nur binutils-2.18.50.0.1/opcodes/i386-tbl.h binutils-stable/opcodes/i386-tbl.h
--- binutils-2.18.50.0.1/opcodes/i386-tbl.h	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/i386-tbl.h	2007-09-25 15:42:02.000000000 +0200
@@ -4190,15 +4190,15 @@
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
     { 0 } },
   { "invlpga", 2, 0xf01, 0xdf, CpuSVME,
-    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64,
-    { Reg32|Reg64,
+    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
+    { BaseIndex|Disp8|Disp16|Disp32|Disp32S,
       Reg32 } },
   { "skinit", 0, 0xf01, 0xde, CpuSVME,
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
     { 0 } },
   { "skinit", 1, 0xf01, 0xde, CpuSVME,
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
-    { Reg32 } },
+    { BaseIndex|Disp8|Disp16|Disp32|Disp32S } },
   { "stgi", 0, 0xf01, 0xdc, CpuSVME,
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
     { 0 } },
@@ -4206,8 +4206,8 @@
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
     { 0 } },
   { "vmload", 1, 0xf01, 0xda, CpuSVME,
-    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64,
-    { Reg32|Reg64 } },
+    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
+    { BaseIndex|Disp8|Disp16|Disp32|Disp32S } },
   { "vmmcall", 0, 0xf01, 0xd9, CpuSVME,
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
     { 0 } },
@@ -4215,14 +4215,14 @@
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
     { 0 } },
   { "vmrun", 1, 0xf01, 0xd8, CpuSVME,
-    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64,
-    { Reg32|Reg64 } },
+    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
+    { BaseIndex|Disp8|Disp16|Disp32|Disp32S } },
   { "vmsave", 0, 0xf01, 0xdb, CpuSVME,
     No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
     { 0 } },
   { "vmsave", 1, 0xf01, 0xdb, CpuSVME,
-    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt|NoRex64,
-    { Reg32|Reg64 } },
+    No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf|ImmExt,
+    { BaseIndex|Disp8|Disp16|Disp32|Disp32S } },
   { "movntsd", 2, 0xf20f2b, None, CpuSSE4a,
     Modrm|IgnoreSize|No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_xSuf,
     { RegXMM,
diff -Nur binutils-2.18.50.0.1/opcodes/m68k-dis.c binutils-stable/opcodes/m68k-dis.c
--- binutils-2.18.50.0.1/opcodes/m68k-dis.c	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/opcodes/m68k-dis.c	2007-09-25 15:42:02.000000000 +0200
@@ -641,7 +641,7 @@
              {"%urp", 0x806}, {"%srp", 0x807}, {"%pcr", 0x808},
 
 	     /* Fido added these.  */
-             {"%cac", 0xffe}, {"%mbb", 0xfff}};
+             {"%cac", 0xffe}, {"%mbo", 0xfff}};
 
 	val = fetch_arg (buffer, place, 12, info);
 	for (regno = sizeof names / sizeof names[0] - 1; regno >= 0; regno--)
diff -Nur binutils-2.18.50.0.1/opcodes/Makefile.am binutils-stable/opcodes/Makefile.am
--- binutils-2.18.50.0.1/opcodes/Makefile.am	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/Makefile.am	2007-09-25 15:42:02.000000000 +0200
@@ -16,6 +16,9 @@
 bfdlibdir = @bfdlibdir@
 bfdincludedir = @bfdincludedir@
 
+.PHONY: install-pdf
+install-pdf:
+
 .PHONY: install-html
 install-html:
 
@@ -356,7 +359,7 @@
 # that's where the version number in Makefile comes from.
 CONFIG_STATUS_DEPENDENCIES = $(BFDDIR)/configure.in
 
-INCLUDES = -I. -I$(srcdir) -I../bfd -I$(INCDIR) -I$(BFDDIR) @HDEFINES@ @INCINTL@
+INCLUDES = -D_GNU_SOURCE -I. -I$(srcdir) -I../bfd -I$(INCDIR) -I$(BFDDIR) @HDEFINES@ @INCINTL@
 
 disassemble.lo: disassemble.c $(INCDIR)/dis-asm.h
 	$(LIBTOOL) --mode=compile $(COMPILE) -c @archdefs@ $(srcdir)/disassemble.c
@@ -576,7 +579,7 @@
 i386-gen.o: i386-gen.c i386-opc.h
 
 $(srcdir)/i386-tbl.h: @MAINT@ i386-gen i386-opc.tbl i386-reg.tbl
-	./i386-gen --srcdir $(srcdir)
+	./i386-gen --srcdir $(srcdir) > $@
 
 ia64-gen: ia64-gen.o
 	$(LINK) ia64-gen.o $(LIBIBERTY)
diff -Nur binutils-2.18.50.0.1/opcodes/Makefile.in binutils-stable/opcodes/Makefile.in
--- binutils-2.18.50.0.1/opcodes/Makefile.in	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/Makefile.in	2007-09-25 15:42:02.000000000 +0200
@@ -583,7 +583,7 @@
 # We should reconfigure whenever bfd/configure.in changes, because
 # that's where the version number in Makefile comes from.
 CONFIG_STATUS_DEPENDENCIES = $(BFDDIR)/configure.in
-INCLUDES = -I. -I$(srcdir) -I../bfd -I$(INCDIR) -I$(BFDDIR) @HDEFINES@ @INCINTL@
+INCLUDES = -D_GNU_SOURCE -I. -I$(srcdir) -I../bfd -I$(INCDIR) -I$(BFDDIR) @HDEFINES@ @INCINTL@
 libopcodes_la_SOURCES = dis-buf.c disassemble.c dis-init.c
 # It's desirable to list ../bfd/libbfd.la in DEPENDENCIES and LIBADD.
 # Unfortunately this causes libtool to add -L$(libdir), referring to the
@@ -972,6 +972,9 @@
 	uninstall-bfdlibLTLIBRARIES uninstall-info-am
 
 
+.PHONY: install-pdf
+install-pdf:
+
 .PHONY: install-html
 install-html:
 
@@ -1127,7 +1130,7 @@
 i386-gen.o: i386-gen.c i386-opc.h
 
 $(srcdir)/i386-tbl.h: @MAINT@ i386-gen i386-opc.tbl i386-reg.tbl
-	./i386-gen --srcdir $(srcdir)
+	./i386-gen --srcdir $(srcdir) > $@
 
 ia64-gen: ia64-gen.o
 	$(LINK) ia64-gen.o $(LIBIBERTY)
diff -Nur binutils-2.18.50.0.1/opcodes/mips-dis.c binutils-stable/opcodes/mips-dis.c
--- binutils-2.18.50.0.1/opcodes/mips-dis.c	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/opcodes/mips-dis.c	2007-09-25 15:42:02.000000000 +0200
@@ -38,6 +38,9 @@
 #include "elf/mips.h"
 #endif
 
+/* Generate Octeon unaligned load and store instructions. */
+int octeon_use_unalign = 1;
+
 /* Mips instructions are at maximum this many bytes long.  */
 #define INSNLEN 4
 
@@ -295,6 +298,36 @@
   { 29, 3, "c0_datahi_d"	},
 };
 
+static const char * const mips_cp0_names_octeon[32] = {
+  "c0_index",     "c0_random",    "c0_entrylo0",  "c0_entrylo1",
+  "c0_context",   "c0_pagemask",  "c0_wired",     "c0_hwrena",
+  "c0_badvaddr",  "c0_count",     "c0_entryhi",   "c0_compare",
+  "c0_status",    "c0_cause",     "c0_epc",       "c0_prid",
+  "c0_config",    "$17",          "c0_watchlo",   "c0_watchhi",
+  "c0_xcontext",  "$21",          "c0_mdebug",    "c0_debug",
+  "c0_depc",      "c0_perfcnt",   "$26",          "c0_cacheerr",
+  "c0_taglo",     "c0_taghi",     "c0_errorepc",  "c0_desave", 
+};
+
+static const struct mips_cp0sel_name mips_cp0sel_names_octeon[] = {
+  { 5,  1, "c0_pagegrain"		},
+  { 9,  6, "c0_cvmcount"		},
+  { 9,  7, "c0_cvmctl"			},
+  { 11, 7, "c0_cvmmemctl"		},
+  { 12, 1, "c0_intctl"			},
+  { 12, 2, "c0_srsctl"			},
+  { 15, 1, "c0_ebase"			},
+  { 16, 1, "c0_config1",		},
+  { 16, 2, "c0_config2",		},
+  { 16, 3, "c0_config3",		},
+  { 18, 1, "c0_watchlo,1"		},
+  { 19, 1, "c0_watchhi,1"		},
+  { 25, 2, "c0_perfcnt,2"		},
+  { 27, 1, "c0_cacheerr,1"		},
+  { 28, 3, "c0_datalo"			},
+  { 29, 3, "c0_datahi"			},
+};
+
 static const char * const mips_hwr_names_numeric[32] =
 {
   "$0",   "$1",   "$2",   "$3",   "$4",   "$5",   "$6",   "$7",
@@ -426,6 +459,19 @@
     mips_cp0sel_names_sb1, ARRAY_SIZE (mips_cp0sel_names_sb1),
     mips_hwr_names_numeric },
 
+  { "octeon",   1, bfd_mach_mips_octeon, CPU_OCTEON,
+    ISA_MIPS64R2 | INSN_OCTEON, mips_cp0_names_octeon, 
+    mips_cp0sel_names_octeon, ARRAY_SIZE (mips_cp0sel_names_octeon), 
+    mips_hwr_names_numeric }, 
+
+  { "loongson2e",   1, bfd_mach_mips_loongson_2e, CPU_LOONGSON_2E,
+    ISA_MIPS3 | INSN_LOONGSON_2E, mips_cp0_names_numeric, 
+    NULL, 0, mips_hwr_names_numeric },
+
+  { "loongson2f",   1, bfd_mach_mips_loongson_2f, CPU_LOONGSON_2F,
+    ISA_MIPS3 | INSN_LOONGSON_2F, mips_cp0_names_numeric, 
+    NULL, 0, mips_hwr_names_numeric },
+
   /* This entry, mips16, is here only for ISA/processor selection; do
      not print its name.  */
   { "",		1, bfd_mach_mips16, CPU_MIPS16, ISA_MIPS3 | INSN_MIPS16,
@@ -580,7 +626,17 @@
       no_aliases = 1;
       return;
     }
-  
+  if (strcmp ("octeon-useun", option) == 0)
+    {
+      octeon_use_unalign = 1;
+      return;
+    }
+  if (strcmp ("no-octeon-useun", option) == 0)
+    {
+      octeon_use_unalign = 0;
+      return;
+    }
+
   /* Look for the = that delimits the end of the option name.  */
   for (i = 0; i < len; i++)
     if (option[i] == '=')
@@ -1045,6 +1101,11 @@
 				 (l >> OP_SH_SHAMT) & OP_MASK_SHAMT);
 	  break;
 
+	case '^':
+	  (*info->fprintf_func) (info->stream, "0x%lx",
+				 (l >> OP_SH_BITIND) & OP_MASK_BITIND);
+      	  break;
+
 	case 'c':
 	  (*info->fprintf_func) (info->stream, "0x%lx",
 				 (l >> OP_SH_CODE) & OP_MASK_CODE);
@@ -1055,6 +1116,15 @@
 				 (l >> OP_SH_CODE2) & OP_MASK_CODE2);
 	  break;
 
+	case 'y':
+	  {
+	    unsigned long bias = (OP_MASK_CODE2 + 1) / 2;
+	    unsigned long ttt = (l >> OP_SH_CODE2);
+	    (*info->fprintf_func) (info->stream, "%ld",
+				   ((ttt + bias) & OP_MASK_CODE2) - bias);
+	  }
+	  break;
+
 	case 'C':
 	  (*info->fprintf_func) (info->stream, "0x%lx",
 				 (l >> OP_SH_COPZ) & OP_MASK_COPZ);
@@ -1277,6 +1347,27 @@
 		  && strcmp (op->name, "jalx"))
 		continue;
 
+	      if (info->mach == CPU_OCTEON && octeon_use_unalign)
+	        {
+	          if (strcmp (op->name, "lwl") == 0
+	              || strcmp (op->name, "ldl") == 0
+	              || strcmp (op->name, "swl") == 0
+	              || strcmp (op->name, "sdl") == 0
+		      || strcmp (op->name, "lcache") == 0
+		      || strcmp (op->name, "scache") == 0
+		      || strcmp (op->name, "flush") == 0)
+		    continue;
+
+	          if (strcmp (op->name, "ldr") == 0
+		       || strcmp (op->name, "lwr") == 0
+		       || strcmp (op->name, "swr") == 0
+		       || strcmp (op->name, "sdr") == 0)
+		    {
+	      	      (*info->fprintf_func) (info->stream, "nop");
+		      return INSNLEN;
+		    }
+	        }
+
 	      /* Figure out instruction type and branch delay information.  */
 	      if ((op->pinfo & INSN_UNCOND_BRANCH_DELAY) != 0)
 	        {
@@ -2051,6 +2142,12 @@
 with the -M switch (multiple options should be separated by commas):\n"));
 
   fprintf (stream, _("\n\
+  octeon-useun             Disassemble Octeon unaligned load/store instructions.\n"));
+
+  fprintf (stream, _("\n\
+  no-octeon-useun          Disassemble mips unaligned load/store instructions.\n"));
+
+  fprintf (stream, _("\n\
   gpr-names=ABI            Print GPR names according to  specified ABI.\n\
                            Default: based on binary being disassembled.\n"));
 
diff -Nur binutils-2.18.50.0.1/opcodes/mips-opc.c binutils-stable/opcodes/mips-opc.c
--- binutils-2.18.50.0.1/opcodes/mips-opc.c	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/opcodes/mips-opc.c	2007-09-25 15:42:02.000000000 +0200
@@ -89,10 +89,19 @@
 #define I64     INSN_ISA64
 #define I33	INSN_ISA32R2
 #define I65	INSN_ISA64R2
+#define I3_32   INSN_ISA3_32
+#define I3_33   INSN_ISA3_32R2
+#define I4_32   INSN_ISA4_32
+#define I4_33   INSN_ISA4_32R2
+#define I5_33   INSN_ISA5_32R2
 
 /* MIPS16 ASE support.  */
 #define I16     INSN_MIPS16
 
+#define IOCTEON (INSN_OCTEON)
+#define IL2E    (INSN_LOONGSON_2E)
+#define IL2F    (INSN_LOONGSON_2F)
+
 /* MIPS64 MIPS-3D ASE support.  */
 #define M3D     INSN_MIPS3D
 
@@ -174,8 +183,8 @@
    them first.  The assemblers uses a hash table based on the
    instruction name anyhow.  */
 /* name,    args,	match,	    mask,	pinfo,          	pinfo2,		membership */
-{"pref",    "k,o(b)",   0xcc000000, 0xfc000000, RD_b,           	0,		I4|I32|G3	},
-{"prefx",   "h,t(b)",	0x4c00000f, 0xfc0007ff, RD_b|RD_t,		0,		I4|I33	},
+{"pref",    "k,o(b)",   0xcc000000, 0xfc000000, RD_b,           	0,		I4_32|G3	},
+{"prefx",   "h,t(b)",	0x4c00000f, 0xfc0007ff, RD_b|RD_t,		0,		I4_33	},
 {"nop",     "",         0x00000000, 0xffffffff, 0,              	INSN2_ALIAS,	I1      }, /* sll */
 {"ssnop",   "",         0x00000040, 0xffffffff, 0,              	INSN2_ALIAS,	I32|N55	}, /* sll */
 {"ehb",     "",         0x000000c0, 0xffffffff, 0,              	INSN2_ALIAS,	I33	}, /* sll */
@@ -193,16 +202,20 @@
 {"abs",     "d,v",	0,    (int) M_ABS,	INSN_MACRO,		0,		I1	},
 {"abs.s",   "D,V",	0x46000005, 0xffff003f,	WR_D|RD_S|FP_S,		0,		I1	},
 {"abs.d",   "D,V",	0x46200005, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I1	},
-{"abs.ps",  "D,V",	0x46c00005, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I5|I33	},
+{"abs.ps",  "D,V",	0x46c00005, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I5_33|IL2F	},
+{"abs.ps",  "D,V",	0x45600005, 0xffff003f,	WR_D|RD_S|FP_D,		0,		IL2E	},
 {"add",     "d,v,t",	0x00000020, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"add",     "t,r,I",	0,    (int) M_ADD_I,	INSN_MACRO,		0,		I1	},
+{"add",	"D,S,T",	0x45c00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"add",	"D,S,T",	0x4b40000c,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
 {"add.s",   "D,V,T",	0x46000000, 0xffe0003f,	WR_D|RD_S|RD_T|FP_S,	0,		I1	},
 {"add.d",   "D,V,T",	0x46200000, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I1	},
 {"add.ob",  "X,Y,Q",	0x7800000b, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"add.ob",  "D,S,T",	0x4ac0000b, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"add.ob",  "D,S,T[e]",	0x4800000b, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"add.ob",  "D,S,k",	0x4bc0000b, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
-{"add.ps",  "D,V,T",	0x46c00000, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
+{"add.ps",  "D,V,T",	0x46c00000, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33|IL2F	},
+{"add.ps",  "D,V,T",	0x45600000, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		IL2E	},
 {"add.qh",  "X,Y,Q",	0x7820000b, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
 {"adda.ob", "Y,Q",	0x78000037, 0xfc2007ff,	RD_S|RD_T|FP_D,		WR_MACC,	MX|SB1	},
 {"adda.qh", "Y,Q",	0x78200037, 0xfc2007ff,	RD_S|RD_T|FP_D,		WR_MACC,	MX	},
@@ -213,14 +226,18 @@
 {"addr.ps", "D,S,T",	0x46c00018, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		M3D	},
 {"addu",    "d,v,t",	0x00000021, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"addu",    "t,r,I",	0,    (int) M_ADDU_I,	INSN_MACRO,		0,		I1	},
+{"addu",	"D,S,T",	0x45800000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"addu",	"D,S,T",	0x4b00000c,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
 {"alni.ob", "X,Y,Z,O",	0x78000018, 0xff00003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"alni.ob", "D,S,T,%",	0x48000018, 0xff00003f,	WR_D|RD_S|RD_T, 	0,		N54	},
 {"alni.qh", "X,Y,Z,O",	0x7800001a, 0xff00003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
-{"alnv.ps", "D,V,T,s",	0x4c00001e, 0xfc00003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
+{"alnv.ps", "D,V,T,s",	0x4c00001e, 0xfc00003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33	},
 {"alnv.ob", "X,Y,Z,s",	0x78000019, 0xfc00003f,	WR_D|RD_S|RD_T|RD_s|FP_D, 0,		MX|SB1	},
 {"alnv.qh", "X,Y,Z,s",	0x7800001b, 0xfc00003f,	WR_D|RD_S|RD_T|RD_s|FP_D, 0,		MX	},
 {"and",     "d,v,t",	0x00000024, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"and",     "t,r,I",	0,    (int) M_AND_I,	INSN_MACRO,		0,		I1	},
+{"and",	"D,S,T",	0x47c00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"and",	"D,S,T",	0x4bc00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"and.ob",  "X,Y,Q",	0x7800000c, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"and.ob",  "D,S,T",	0x4ac0000c, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"and.ob",  "D,S,T[e]",	0x4800000c, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
@@ -230,18 +247,25 @@
 /* b is at the top of the table.  */
 /* bal is at the top of the table.  */
 /* bc0[tf]l? are at the bottom of the table.  */
+{"baddu",   "d,v,t",    0x70000028, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		IOCTEON },
+{"bbit032", "s,^,p",    0xd8000000, 0xfc000000, CBD|RD_s,		0,		IOCTEON },
+{"bbit0",   "s,;,p",    0xd8000000, 0xfc000000, CBD|RD_s,		0,		IOCTEON }, /* bbit032 */
+{"bbit0",   "s,^,p",    0xc8000000, 0xfc000000, CBD|RD_s,		0,		IOCTEON },
+{"bbit132", "s,^,p",    0xf8000000, 0xfc000000, CBD|RD_s,		0,		IOCTEON },
+{"bbit1",   "s,;,p",    0xf8000000, 0xfc000000, CBD|RD_s,		0,		IOCTEON }, /* bbit132 */
+{"bbit1",   "s,^,p",    0xe8000000, 0xfc000000, CBD|RD_s,		0,		IOCTEON },
 {"bc1any2f", "N,p",	0x45200000, 0xffe30000,	CBD|RD_CC|FP_S,		0,		M3D	},
 {"bc1any2t", "N,p",	0x45210000, 0xffe30000,	CBD|RD_CC|FP_S,		0,		M3D	},
 {"bc1any4f", "N,p",	0x45400000, 0xffe30000,	CBD|RD_CC|FP_S,		0,		M3D	},
 {"bc1any4t", "N,p",	0x45410000, 0xffe30000,	CBD|RD_CC|FP_S,		0,		M3D	},
 {"bc1f",    "p",	0x45000000, 0xffff0000,	CBD|RD_CC|FP_S,		0,		I1	},
-{"bc1f",    "N,p",      0x45000000, 0xffe30000, CBD|RD_CC|FP_S, 	0,		I4|I32	},
+{"bc1f",    "N,p",      0x45000000, 0xffe30000, CBD|RD_CC|FP_S, 	0,		I4_32	},
 {"bc1fl",   "p",	0x45020000, 0xffff0000,	CBL|RD_CC|FP_S,		0,		I2|T3	},
-{"bc1fl",   "N,p",      0x45020000, 0xffe30000, CBL|RD_CC|FP_S, 	0,		I4|I32	},
+{"bc1fl",   "N,p",      0x45020000, 0xffe30000, CBL|RD_CC|FP_S, 	0,		I4_32	},
 {"bc1t",    "p",	0x45010000, 0xffff0000,	CBD|RD_CC|FP_S,		0,		I1	},
-{"bc1t",    "N,p",      0x45010000, 0xffe30000, CBD|RD_CC|FP_S, 	0,		I4|I32	},
+{"bc1t",    "N,p",      0x45010000, 0xffe30000, CBD|RD_CC|FP_S, 	0,		I4_32	},
 {"bc1tl",   "p",	0x45030000, 0xffff0000,	CBL|RD_CC|FP_S,		0,		I2|T3	},
-{"bc1tl",   "N,p",      0x45030000, 0xffe30000, CBL|RD_CC|FP_S, 	0,		I4|I32	},
+{"bc1tl",   "N,p",      0x45030000, 0xffe30000, CBL|RD_CC|FP_S, 	0,		I4_32	},
 /* bc2* are at the bottom of the table.  */
 /* bc3* are at the bottom of the table.  */
 {"beqz",    "s,p",	0x10000000, 0xfc1f0000,	CBD|RD_s,		0,		I1	},
@@ -304,116 +328,132 @@
 {"break",   "c",	0x0000000d, 0xfc00ffff,	TRAP,			0,		I1	},
 {"break",   "c,q",	0x0000000d, 0xfc00003f,	TRAP,			0,		I1	},
 {"c.f.d",   "S,T",	0x46200030, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.f.d",   "M,S,T",    0x46200030, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.f.d",   "M,S,T",    0x46200030, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.f.s",   "S,T",      0x46000030, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.f.s",   "M,S,T",    0x46000030, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.f.ps",  "S,T",	0x46c00030, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.f.ps",  "M,S,T",	0x46c00030, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.f.s",   "M,S,T",    0x46000030, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.f.ps",  "S,T",	0x46c00030, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.f.ps",  "S,T",	0x45600030, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.f.ps",  "M,S,T",	0x46c00030, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.un.d",  "S,T",	0x46200031, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.un.d",  "M,S,T",    0x46200031, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.un.d",  "M,S,T",    0x46200031, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.un.s",  "S,T",      0x46000031, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.un.s",  "M,S,T",    0x46000031, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.un.ps", "S,T",	0x46c00031, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.un.ps", "M,S,T",	0x46c00031, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.un.s",  "M,S,T",    0x46000031, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.un.ps", "S,T",	0x46c00031, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.un.ps", "S,T",	0x45600031, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.un.ps", "M,S,T",	0x46c00031, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.eq.d",  "S,T",	0x46200032, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.eq.d",  "M,S,T",    0x46200032, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.eq.d",  "M,S,T",    0x46200032, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.eq.s",  "S,T",      0x46000032, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.eq.s",  "M,S,T",    0x46000032, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
+{"c.eq.s",  "M,S,T",    0x46000032, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
 {"c.eq.ob", "Y,Q",	0x78000001, 0xfc2007ff,	WR_CC|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"c.eq.ob", "S,T",	0x4ac00001, 0xffe007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
 {"c.eq.ob", "S,T[e]",	0x48000001, 0xfe2007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
 {"c.eq.ob", "S,k",	0x4bc00001, 0xffe007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
-{"c.eq.ps", "S,T",	0x46c00032, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.eq.ps", "M,S,T",	0x46c00032, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.eq.ps", "S,T",	0x46c00032, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.eq.ps", "S,T",	0x45600032, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.eq.ps", "M,S,T",	0x46c00032, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.eq.qh", "Y,Q",	0x78200001, 0xfc2007ff,	WR_CC|RD_S|RD_T|FP_D,	0,		MX	},
 {"c.ueq.d", "S,T",	0x46200033, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.ueq.d", "M,S,T",    0x46200033, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.ueq.d", "M,S,T",    0x46200033, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.ueq.s", "S,T",      0x46000033, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.ueq.s", "M,S,T",    0x46000033, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.ueq.ps","S,T",	0x46c00033, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.ueq.ps","M,S,T",	0x46c00033, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.ueq.s", "M,S,T",    0x46000033, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.ueq.ps","S,T",	0x46c00033, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.ueq.ps","S,T",	0x45600033, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.ueq.ps","M,S,T",	0x46c00033, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.olt.d", "S,T",      0x46200034, 0xffe007ff, RD_S|RD_T|WR_CC|FP_D,   0,		I1      },
-{"c.olt.d", "M,S,T",    0x46200034, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.olt.d", "M,S,T",    0x46200034, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.olt.s", "S,T",	0x46000034, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_S,	0,		I1	},
-{"c.olt.s", "M,S,T",    0x46000034, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.olt.ps","S,T",	0x46c00034, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.olt.ps","M,S,T",	0x46c00034, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.olt.s", "M,S,T",    0x46000034, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.olt.ps","S,T",	0x46c00034, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.olt.ps","S,T",	0x45600034, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.olt.ps","M,S,T",	0x46c00034, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.ult.d", "S,T",	0x46200035, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.ult.d", "M,S,T",    0x46200035, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.ult.d", "M,S,T",    0x46200035, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.ult.s", "S,T",      0x46000035, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.ult.s", "M,S,T",    0x46000035, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.ult.ps","S,T",	0x46c00035, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.ult.ps","M,S,T",	0x46c00035, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.ult.s", "M,S,T",    0x46000035, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.ult.ps","S,T",	0x46c00035, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.ult.ps","S,T",	0x45600035, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.ult.ps","M,S,T",	0x46c00035, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.ole.d", "S,T",      0x46200036, 0xffe007ff, RD_S|RD_T|WR_CC|FP_D,   0,		I1      },
-{"c.ole.d", "M,S,T",    0x46200036, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.ole.d", "M,S,T",    0x46200036, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.ole.s", "S,T",      0x46000036, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.ole.s", "M,S,T",    0x46000036, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.ole.ps","S,T",	0x46c00036, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.ole.ps","M,S,T",	0x46c00036, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.ole.s", "M,S,T",    0x46000036, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.ole.ps","S,T",	0x46c00036, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.ole.ps","S,T",	0x45600036, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.ole.ps","M,S,T",	0x46c00036, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.ule.d", "S,T",	0x46200037, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.ule.d", "M,S,T",    0x46200037, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.ule.d", "M,S,T",    0x46200037, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.ule.s", "S,T",      0x46000037, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.ule.s", "M,S,T",    0x46000037, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.ule.ps","S,T",	0x46c00037, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.ule.ps","M,S,T",	0x46c00037, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.ule.s", "M,S,T",    0x46000037, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.ule.ps","S,T",	0x46c00037, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.ule.ps","S,T",	0x45600037, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.ule.ps","M,S,T",	0x46c00037, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.sf.d",  "S,T",	0x46200038, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.sf.d",  "M,S,T",    0x46200038, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.sf.d",  "M,S,T",    0x46200038, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.sf.s",  "S,T",      0x46000038, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.sf.s",  "M,S,T",    0x46000038, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.sf.ps", "S,T",	0x46c00038, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.sf.ps", "M,S,T",	0x46c00038, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.sf.s",  "M,S,T",    0x46000038, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.sf.ps", "S,T",	0x46c00038, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.sf.ps", "S,T",	0x45600038, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.sf.ps", "M,S,T",	0x46c00038, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.ngle.d","S,T",	0x46200039, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.ngle.d","M,S,T",    0x46200039, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.ngle.d","M,S,T",    0x46200039, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.ngle.s","S,T",      0x46000039, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.ngle.s","M,S,T",    0x46000039, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.ngle.ps","S,T",	0x46c00039, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.ngle.ps","M,S,T",	0x46c00039, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.ngle.s","M,S,T",    0x46000039, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.ngle.ps","S,T",	0x46c00039, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.ngle.ps","S,T",	0x45600039, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.ngle.ps","M,S,T",	0x46c00039, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.seq.d", "S,T",	0x4620003a, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.seq.d", "M,S,T",    0x4620003a, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.seq.d", "M,S,T",    0x4620003a, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.seq.s", "S,T",      0x4600003a, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.seq.s", "M,S,T",    0x4600003a, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.seq.ps","S,T",	0x46c0003a, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.seq.ps","M,S,T",	0x46c0003a, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.seq.s", "M,S,T",    0x4600003a, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.seq.ps","S,T",	0x46c0003a, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.seq.ps","S,T",	0x4560003a, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.seq.ps","M,S,T",	0x46c0003a, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.ngl.d", "S,T",	0x4620003b, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.ngl.d", "M,S,T",    0x4620003b, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.ngl.d", "M,S,T",    0x4620003b, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.ngl.s", "S,T",      0x4600003b, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.ngl.s", "M,S,T",    0x4600003b, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.ngl.ps","S,T",	0x46c0003b, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.ngl.ps","M,S,T",	0x46c0003b, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.ngl.s", "M,S,T",    0x4600003b, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.ngl.ps","S,T",	0x46c0003b, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.ngl.ps","S,T",	0x4560003b, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.ngl.ps","M,S,T",	0x46c0003b, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.lt.d",  "S,T",	0x4620003c, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.lt.d",  "M,S,T",    0x4620003c, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.lt.d",  "M,S,T",    0x4620003c, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.lt.s",  "S,T",	0x4600003c, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_S,	0,		I1	},
-{"c.lt.s",  "M,S,T",    0x4600003c, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
+{"c.lt.s",  "M,S,T",    0x4600003c, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
 {"c.lt.ob", "Y,Q",	0x78000004, 0xfc2007ff,	WR_CC|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"c.lt.ob", "S,T",	0x4ac00004, 0xffe007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
 {"c.lt.ob", "S,T[e]",	0x48000004, 0xfe2007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
 {"c.lt.ob", "S,k",	0x4bc00004, 0xffe007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
-{"c.lt.ps", "S,T",	0x46c0003c, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.lt.ps", "M,S,T",	0x46c0003c, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.lt.ps", "S,T",	0x46c0003c, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.lt.ps", "S,T",	0x4560003c, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.lt.ps", "M,S,T",	0x46c0003c, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.lt.qh", "Y,Q",	0x78200004, 0xfc2007ff,	WR_CC|RD_S|RD_T|FP_D,	0,		MX	},
 {"c.nge.d", "S,T",	0x4620003d, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.nge.d", "M,S,T",    0x4620003d, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.nge.d", "M,S,T",    0x4620003d, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.nge.s", "S,T",      0x4600003d, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.nge.s", "M,S,T",    0x4600003d, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.nge.ps","S,T",	0x46c0003d, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.nge.ps","M,S,T",	0x46c0003d, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.nge.s", "M,S,T",    0x4600003d, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.nge.ps","S,T",	0x46c0003d, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.nge.ps","S,T",	0x4560003d, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.nge.ps","M,S,T",	0x46c0003d, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.le.d",  "S,T",	0x4620003e, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.le.d",  "M,S,T",    0x4620003e, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.le.d",  "M,S,T",    0x4620003e, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.le.s",  "S,T",	0x4600003e, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_S,	0,		I1	},
-{"c.le.s",  "M,S,T",    0x4600003e, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
+{"c.le.s",  "M,S,T",    0x4600003e, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
 {"c.le.ob", "Y,Q",	0x78000005, 0xfc2007ff,	WR_CC|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"c.le.ob", "S,T",	0x4ac00005, 0xffe007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
 {"c.le.ob", "S,T[e]",	0x48000005, 0xfe2007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
 {"c.le.ob", "S,k",	0x4bc00005, 0xffe007ff,	WR_CC|RD_S|RD_T,	0,		N54	},
-{"c.le.ps", "S,T",	0x46c0003e, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.le.ps", "M,S,T",	0x46c0003e, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.le.ps", "S,T",	0x46c0003e, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.le.ps", "S,T",	0x4560003e, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.le.ps", "M,S,T",	0x46c0003e, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"c.le.qh", "Y,Q",	0x78200005, 0xfc2007ff,	WR_CC|RD_S|RD_T|FP_D,	0,		MX	},
 {"c.ngt.d", "S,T",	0x4620003f, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I1	},
-{"c.ngt.d", "M,S,T",    0x4620003f, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4|I32	},
+{"c.ngt.d", "M,S,T",    0x4620003f, 0xffe000ff, RD_S|RD_T|WR_CC|FP_D,   0,		I4_32	},
 {"c.ngt.s", "S,T",      0x4600003f, 0xffe007ff, RD_S|RD_T|WR_CC|FP_S,   0,		I1      },
-{"c.ngt.s", "M,S,T",    0x4600003f, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4|I32	},
-{"c.ngt.ps","S,T",	0x46c0003f, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
-{"c.ngt.ps","M,S,T",	0x46c0003f, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5|I33	},
+{"c.ngt.s", "M,S,T",    0x4600003f, 0xffe000ff, RD_S|RD_T|WR_CC|FP_S,   0,		I4_32	},
+{"c.ngt.ps","S,T",	0x46c0003f, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33|IL2F	},
+{"c.ngt.ps","S,T",	0x4560003f, 0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,		IL2E	},
+{"c.ngt.ps","M,S,T",	0x46c0003f, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		I5_33	},
 {"cabs.eq.d",  "M,S,T",	0x46200072, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		M3D	},
 {"cabs.eq.ps", "M,S,T",	0x46c00072, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_D,	0,		M3D	},
 {"cabs.eq.s",  "M,S,T",	0x46000072, 0xffe000ff,	RD_S|RD_T|WR_CC|FP_S,	0,		M3D	},
@@ -467,10 +507,10 @@
 {"flushd",  "",		0xbc020000, 0xffffffff, 0, 			0,		L1	},
 {"flushid", "",		0xbc030000, 0xffffffff, 0, 			0,		L1	},
 {"wb", 	    "o(b)",	0xbc040000, 0xfc1f0000, SM|RD_b,		0,		L1	},
-{"cache",   "k,o(b)",   0xbc000000, 0xfc000000, RD_b,           	0,		I3|I32|T3},
-{"cache",   "k,A(b)",	0,    (int) M_CACHE_AB, INSN_MACRO,		0,		I3|I32|T3},
-{"ceil.l.d", "D,S",	0x4620000a, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3|I33	},
-{"ceil.l.s", "D,S",	0x4600000a, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I3|I33	},
+{"cache",   "k,o(b)",   0xbc000000, 0xfc000000, RD_b,           	0,		I3_32|T3},
+{"cache",   "k,A(b)",	0,    (int) M_CACHE_AB, INSN_MACRO,		0,		I3_32|T3},
+{"ceil.l.d", "D,S",	0x4620000a, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3_33	},
+{"ceil.l.s", "D,S",	0x4600000a, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I3_33	},
 {"ceil.w.d", "D,S",	0x4620000e, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I2	},
 {"ceil.w.s", "D,S",	0x4600000e, 0xffff003f, WR_D|RD_S|FP_S,		0,		I2	},
 {"cfc0",    "t,G",	0x40400000, 0xffe007ff,	LCD|WR_t|RD_C0,		0,		I1	},
@@ -481,6 +521,9 @@
 {"cftc1",   "d,E",	0x41000023, 0xffe007ff, TRAP|LCD|WR_d|RD_C1|FP_S, 0,		MT32	},
 {"cftc1",   "d,T",	0x41000023, 0xffe007ff, TRAP|LCD|WR_d|RD_C1|FP_S, 0,		MT32	},
 {"cftc2",   "d,E",	0x41000025, 0xffe007ff, TRAP|LCD|WR_d|RD_C2,	0,		MT32	},
+{"cins32",  "t,r,<,h",  0x70000033, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON },
+{"cins",    "t,r,>,h",  0x70000033, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON }, /* cins32 */
+{"cins",    "t,r,<,h",  0x70000032, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON },
 {"clo",     "U,s",      0x70000021, 0xfc0007ff, WR_d|WR_t|RD_s, 	0,		I32|N55 },
 {"clz",     "U,s",      0x70000020, 0xfc0007ff, WR_d|WR_t|RD_s, 	0,		I32|N55 },
 {"ctc0",    "t,G",	0x40c00000, 0xffe007ff,	COD|RD_t|WR_CC,		0,		I1	},
@@ -491,24 +534,26 @@
 {"cttc1",   "t,g",	0x41800023, 0xffe007ff, TRAP|COD|RD_t|WR_CC|FP_S, 0,		MT32	},
 {"cttc1",   "t,S",	0x41800023, 0xffe007ff, TRAP|COD|RD_t|WR_CC|FP_S, 0,		MT32	},
 {"cttc2",   "t,g",	0x41800025, 0xffe007ff, TRAP|COD|RD_t|WR_CC,	0,		MT32	},
-{"cvt.d.l", "D,S",	0x46a00021, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I3|I33	},
+{"cvt.d.l", "D,S",	0x46a00021, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I3_33	},
 {"cvt.d.s", "D,S",	0x46000021, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I1	},
 {"cvt.d.w", "D,S",	0x46800021, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I1	},
-{"cvt.l.d", "D,S",	0x46200025, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I3|I33	},
-{"cvt.l.s", "D,S",	0x46000025, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I3|I33	},
-{"cvt.s.l", "D,S",	0x46a00020, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I3|I33	},
+{"cvt.l.d", "D,S",	0x46200025, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I3_33	},
+{"cvt.l.s", "D,S",	0x46000025, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I3_33	},
+{"cvt.s.l", "D,S",	0x46a00020, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I3_33	},
 {"cvt.s.d", "D,S",	0x46200020, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I1	},
 {"cvt.s.w", "D,S",	0x46800020, 0xffff003f,	WR_D|RD_S|FP_S,		0,		I1	},
-{"cvt.s.pl","D,S",	0x46c00028, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I5|I33	},
-{"cvt.s.pu","D,S",	0x46c00020, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I5|I33	},
+{"cvt.s.pl","D,S",	0x46c00028, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I5_33	},
+{"cvt.s.pu","D,S",	0x46c00020, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I5_33	},
 {"cvt.w.d", "D,S",	0x46200024, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I1	},
 {"cvt.w.s", "D,S",	0x46000024, 0xffff003f,	WR_D|RD_S|FP_S,		0,		I1	},
 {"cvt.ps.pw", "D,S",	0x46800026, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		M3D	},
-{"cvt.ps.s","D,V,T",	0x46000026, 0xffe0003f,	WR_D|RD_S|RD_T|FP_S|FP_D, 0,		I5|I33	},
+{"cvt.ps.s","D,V,T",	0x46000026, 0xffe0003f,	WR_D|RD_S|RD_T|FP_S|FP_D, 0,		I5_33	},
 {"cvt.pw.ps", "D,S",	0x46c00024, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		M3D	},
 {"dabs",    "d,v",	0,    (int) M_DABS,	INSN_MACRO,		0,		I3	},
 {"dadd",    "d,v,t",	0x0000002c, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		I3	},
 {"dadd",    "t,r,I",	0,    (int) M_DADD_I,	INSN_MACRO,		0,		I3	},
+{"dadd",	"D,S,T",	0x45e00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"dadd",	"D,S,T",	0x4b60000c,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"daddi",   "t,r,j",	0x60000000, 0xfc000000, WR_t|RD_s,		0,		I3	},
 {"daddiu",  "t,r,j",	0x64000000, 0xfc000000, WR_t|RD_s,		0,		I3	},
 {"daddu",   "d,v,t",	0x0000002d, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		I3	},
@@ -584,6 +629,7 @@
 /* dmtc2 is at the bottom of the table.  */
 /* dmfc3 is at the bottom of the table.  */
 /* dmtc3 is at the bottom of the table.  */
+{"dmul",    "d,v,t",    0x70000003, 0xfc0007ff, WR_d|RD_s|RD_t|WR_HILO,	0,		IOCTEON },
 {"dmul",    "d,v,t",	0,    (int) M_DMUL,	INSN_MACRO,		0,		I3	},
 {"dmul",    "d,v,I",	0,    (int) M_DMUL_I,	INSN_MACRO,		0,		I3	},
 {"dmulo",   "d,v,t",	0,    (int) M_DMULO,	INSN_MACRO,		0,		I3	},
@@ -594,6 +640,7 @@
 {"dmultu",  "s,t",      0x0000001d, 0xfc00ffff, RD_s|RD_t|WR_HILO,      0,		I3	},
 {"dneg",    "d,w",	0x0000002e, 0xffe007ff,	WR_d|RD_t,		0,		I3	}, /* dsub 0 */
 {"dnegu",   "d,w",	0x0000002f, 0xffe007ff,	WR_d|RD_t,		0,		I3	}, /* dsubu 0*/
+{"dpop",    "d,s",      0x7000002d, 0xfc1f07ff, RD_s|WR_d,		0,		IOCTEON },
 {"drem",    "z,s,t",    0x0000001e, 0xfc00ffff, RD_s|RD_t|WR_HILO,      0,		I3      },
 {"drem",    "d,v,t",	3,    (int) M_DREM_3,	INSN_MACRO,		0,		I3	},
 {"drem",    "d,v,I",	3,    (int) M_DREM_3I,	INSN_MACRO,		0,		I3	},
@@ -621,18 +668,26 @@
 {"dsll",    "d,w,s",	0x00000014, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I3	}, /* dsllv */
 {"dsll",    "d,w,>",	0x0000003c, 0xffe0003f, WR_d|RD_t,		0,		I3	}, /* dsll32 */
 {"dsll",    "d,w,<",	0x00000038, 0xffe0003f,	WR_d|RD_t,		0,		I3	},
+{"dsll",	"D,S,T",	0x45a00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"dsll",	"D,S,T",	0x4b20000e,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"dsrav",   "d,t,s",	0x00000017, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I3	},
 {"dsra32",  "d,w,<",	0x0000003f, 0xffe0003f, WR_d|RD_t,		0,		I3	},
 {"dsra",    "d,w,s",	0x00000017, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I3	}, /* dsrav */
 {"dsra",    "d,w,>",	0x0000003f, 0xffe0003f, WR_d|RD_t,		0,		I3	}, /* dsra32 */
 {"dsra",    "d,w,<",	0x0000003b, 0xffe0003f,	WR_d|RD_t,		0,		I3	},
+{"dsra",	"D,S,T",	0x45e00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"dsra",	"D,S,T",	0x4b60000f,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"dsrlv",   "d,t,s",	0x00000016, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I3	},
 {"dsrl32",  "d,w,<",	0x0000003e, 0xffe0003f, WR_d|RD_t,		0,		I3	},
 {"dsrl",    "d,w,s",	0x00000016, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I3	}, /* dsrlv */
 {"dsrl",    "d,w,>",	0x0000003e, 0xffe0003f, WR_d|RD_t,		0,		I3	}, /* dsrl32 */
 {"dsrl",    "d,w,<",	0x0000003a, 0xffe0003f,	WR_d|RD_t,		0,		I3	},
+{"dsrl",	"D,S,T",	0x45a00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"dsrl",	"D,S,T",	0x4b20000f,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"dsub",    "d,v,t",	0x0000002e, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I3	},
 {"dsub",    "d,v,I",	0,    (int) M_DSUB_I,	INSN_MACRO,		0,		I3	},
+{"dsub",	"D,S,T",	0x45e00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"dsub",	"D,S,T",	0x4b60000d,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"dsubu",   "d,v,t",	0x0000002f, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I3	},
 {"dsubu",   "d,v,I",	0,    (int) M_DSUBU_I,	INSN_MACRO,		0,		I3	},
 {"dvpe",    "",		0x41600001, 0xffffffff, TRAP,			0,		MT32	},
@@ -641,12 +696,15 @@
 {"ei",      "t",	0x41606020, 0xffe0ffff,	WR_t|WR_C0,		0,		I33	},
 {"emt",     "",		0x41600be1, 0xffffffff, TRAP,			0,		MT32	},
 {"emt",     "t",	0x41600be1, 0xffe0ffff, TRAP|WR_t,		0,		MT32	},
-{"eret",    "",         0x42000018, 0xffffffff, 0,      		0,		I3|I32	},
+{"eret",    "",         0x42000018, 0xffffffff, 0,      		0,		I3_32	},
 {"evpe",    "",		0x41600021, 0xffffffff, TRAP,			0,		MT32	},
 {"evpe",    "t",	0x41600021, 0xffe0ffff, TRAP|WR_t,		0,		MT32	},
 {"ext",     "t,r,+A,+C", 0x7c000000, 0xfc00003f, WR_t|RD_s,    		0,		I33	},
-{"floor.l.d", "D,S",	0x4620000b, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3|I33	},
-{"floor.l.s", "D,S",	0x4600000b, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I3|I33	},
+{"exts32",  "t,r,<,h",  0x7000003b, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON },
+{"exts",    "t,r,>,h",  0x7000003b, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON }, /* exts32 */
+{"exts",    "t,r,<,h",  0x7000003a, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON },
+{"floor.l.d", "D,S",	0x4620000b, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3_33	},
+{"floor.l.s", "D,S",	0x4600000b, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I3_33	},
 {"floor.w.d", "D,S",	0x4620000f, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I2	},
 {"floor.w.s", "D,S",	0x4600000f, 0xffff003f, WR_D|RD_S|FP_S,		0,		I2	},
 {"hibernate","",        0x42000023, 0xffffffff,	0, 			0,		V1	},
@@ -703,7 +761,7 @@
 {"ldl",	    "t,A(b)",	0,    (int) M_LDL_AB,	INSN_MACRO,		0,		I3	},
 {"ldr",	    "t,o(b)",	0x6c000000, 0xfc000000, LDD|WR_t|RD_b,		0,		I3	},
 {"ldr",     "t,A(b)",	0,    (int) M_LDR_AB,	INSN_MACRO,		0,		I3	},
-{"ldxc1",   "D,t(b)",	0x4c000001, 0xfc00f83f, LDD|WR_D|RD_t|RD_b|FP_D, 0,		I4|I33	},
+{"ldxc1",   "D,t(b)",	0x4c000001, 0xfc00f83f, LDD|WR_D|RD_t|RD_b|FP_D, 0,		I4_33	},
 {"lh",      "t,o(b)",	0x84000000, 0xfc000000,	LDD|RD_b|WR_t,		0,		I1	},
 {"lh",      "t,A(b)",	0,    (int) M_LH_AB,	INSN_MACRO,		0,		I1	},
 {"lhu",     "t,o(b)",	0x94000000, 0xfc000000,	LDD|RD_b|WR_t,		0,		I1	},
@@ -718,7 +776,7 @@
 {"lld",	    "t,o(b)",	0xd0000000, 0xfc000000, LDD|RD_b|WR_t,		0,		I3	},
 {"lld",     "t,A(b)",	0,    (int) M_LLD_AB,	INSN_MACRO,		0,		I3	},
 {"lui",     "t,u",	0x3c000000, 0xffe00000,	WR_t,			0,		I1	},
-{"luxc1",   "D,t(b)",	0x4c000005, 0xfc00f83f, LDD|WR_D|RD_t|RD_b|FP_D, 0,		I5|I33|N55},
+{"luxc1",   "D,t(b)",	0x4c000005, 0xfc00f83f, LDD|WR_D|RD_t|RD_b|FP_D, 0,		I5_33|N55},
 {"lw",      "t,o(b)",	0x8c000000, 0xfc000000,	LDD|RD_b|WR_t,		0,		I1	},
 {"lw",      "t,A(b)",	0,    (int) M_LW_AB,	INSN_MACRO,		0,		I1	},
 {"lwc0",    "E,o(b)",	0xc0000000, 0xfc000000,	CLD|RD_b|WR_CC,		0,		I1	},
@@ -744,7 +802,7 @@
 {"fork",    "d,s,t",	0x7c000008, 0xfc0007ff, TRAP|WR_d|RD_s|RD_t,	0,		MT32	},
 {"lwu",     "t,o(b)",	0x9c000000, 0xfc000000,	LDD|RD_b|WR_t,		0,		I3	},
 {"lwu",     "t,A(b)",	0,    (int) M_LWU_AB,	INSN_MACRO,		0,		I3	},
-{"lwxc1",   "D,t(b)",	0x4c000000, 0xfc00f83f, LDD|WR_D|RD_t|RD_b|FP_D, 0,		I4|I33	},
+{"lwxc1",   "D,t(b)",	0x4c000000, 0xfc00f83f, LDD|WR_D|RD_t|RD_b|FP_D, 0,		I4_33	},
 {"lwxs",    "d,t(b)",	0x70000088, 0xfc0007ff,	LDD|RD_b|RD_t|WR_d,	0,		SMT	},
 {"macc",    "d,s,t",	0x00000028, 0xfc0007ff, RD_s|RD_t|WR_HILO|WR_d, 0,		N412    },
 {"macc",    "d,s,t",	0x00000158, 0xfc0007ff, RD_s|RD_t|WR_HILO|WR_d,	0,		N5      },
@@ -760,9 +818,15 @@
 {"maccus",  "d,s,t",	0x00000468, 0xfc0007ff,	RD_s|RD_t|WR_HILO|WR_d, 0,		N412    },
 {"mad",     "s,t",      0x70000000, 0xfc00ffff, RD_s|RD_t|MOD_HILO,     0,		P3      },
 {"madu",    "s,t",      0x70000001, 0xfc00ffff, RD_s|RD_t|MOD_HILO,     0,		P3      },
-{"madd.d",  "D,R,S,T",	0x4c000021, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D,    0,		I4|I33	},
-{"madd.s",  "D,R,S,T",	0x4c000020, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S,    0,		I4|I33	},
-{"madd.ps", "D,R,S,T",	0x4c000026, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D,    0,		I5|I33	},
+{"madd.d",  "D,R,S,T",	0x4c000021, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D,    0,		I4_33	},
+{"madd.d",	"D,S,T",	0x46200018,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"madd.d",	"D,S,T",	0x72200018,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"madd.s",  "D,R,S,T",	0x4c000020, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S,    0,		I4_33	},
+{"madd.s",	"D,S,T",	0x46000018,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"madd.s",	"D,S,T",	0x72000018,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
+{"madd.ps", "D,R,S,T",	0x4c000026, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D,    0,		I5_33	},
+{"madd.ps",	"D,S,T",	0x45600018,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"madd.ps",	"D,S,T",	0x71600018,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"madd",    "s,t",      0x0000001c, 0xfc00ffff, RD_s|RD_t|WR_HILO,           0,		L1	},
 {"madd",    "s,t",      0x70000000, 0xfc00ffff, RD_s|RD_t|MOD_HILO,          0,		I32|N55	},
 {"madd",    "s,t",      0x70000000, 0xfc00ffff, RD_s|RD_t|WR_HILO|IS_M,      0,		G1	},
@@ -823,42 +887,50 @@
 {"min.qh",  "X,Y,Q",	0x78200006, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
 {"mov.d",   "D,S",	0x46200006, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I1	},
 {"mov.s",   "D,S",	0x46000006, 0xffff003f,	WR_D|RD_S|FP_S,		0,		I1	},
-{"mov.ps",  "D,S",	0x46c00006, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I5|I33	},
-{"movf",    "d,s,N",    0x00000001, 0xfc0307ff, WR_d|RD_s|RD_CC|FP_S|FP_D, 0,		I4|I32  },
-{"movf.d",  "D,S,N",    0x46200011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,   0,		I4|I32	},
+{"mov.ps",  "D,S",	0x46c00006, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I5_33|IL2F	},
+{"mov.ps",  "D,S",	0x45600006, 0xffff003f,	WR_D|RD_S|FP_D,		0,		IL2E	},
+{"movf",    "d,s,N",    0x00000001, 0xfc0307ff, WR_d|RD_s|RD_CC|FP_S|FP_D, 0,		I4_32  },
+{"movf.d",  "D,S,N",    0x46200011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,   0,		I4_32	},
 {"movf.l",  "D,S,N",	0x46a00011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,	0,		MX|SB1	},
 {"movf.l",  "X,Y,N",	0x46a00011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,	0,		MX|SB1	},
-{"movf.s",  "D,S,N",    0x46000011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_S,   0,		I4|I32	},
-{"movf.ps", "D,S,N",	0x46c00011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,	0,		I5|I33	},
-{"movn",    "d,v,t",    0x0000000b, 0xfc0007ff, WR_d|RD_s|RD_t, 	0,		I4|I32	},
+{"movf.s",  "D,S,N",    0x46000011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_S,   0,		I4_32	},
+{"movf.ps", "D,S,N",	0x46c00011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,	0,		I5_33	},
+{"movn",    "d,v,t",    0x0000000b, 0xfc0007ff, WR_d|RD_s|RD_t, 	0,		I4_32|IL2E|IL2F	},
+{"movnz",   "d,v,t",    0x0000000b, 0xfc0007ff, WR_d|RD_s|RD_t, 	0,		IL2E|IL2F	},
 {"ffc",     "d,v",	0x0000000b, 0xfc1f07ff,	WR_d|RD_s,		0,		L1	},
-{"movn.d",  "D,S,t",    0x46200013, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I4|I32	},
+{"movn.d",  "D,S,t",    0x46200013, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I4_32	},
 {"movn.l",  "D,S,t",    0x46a00013, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		MX|SB1	},
 {"movn.l",  "X,Y,t",    0x46a00013, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		MX|SB1	},
-{"movn.s",  "D,S,t",    0x46000013, 0xffe0003f, WR_D|RD_S|RD_t|FP_S,    0,		I4|I32	},
-{"movn.ps", "D,S,t",    0x46c00013, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I5|I33	},
-{"movt",    "d,s,N",    0x00010001, 0xfc0307ff, WR_d|RD_s|RD_CC|FP_S|FP_D, 0,		I4|I32	},
-{"movt.d",  "D,S,N",    0x46210011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,   0,		I4|I32	},
+{"movn.s",  "D,S,t",    0x46000013, 0xffe0003f, WR_D|RD_S|RD_t|FP_S,    0,		I4_32	},
+{"movn.ps", "D,S,t",    0x46c00013, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I5_33	},
+{"movt",    "d,s,N",    0x00010001, 0xfc0307ff, WR_d|RD_s|RD_CC|FP_S|FP_D, 0,		I4_32	},
+{"movt.d",  "D,S,N",    0x46210011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,   0,		I4_32	},
 {"movt.l",  "D,S,N",    0x46a10011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,   0,		MX|SB1	},
 {"movt.l",  "X,Y,N",    0x46a10011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,   0,		MX|SB1	},
-{"movt.s",  "D,S,N",    0x46010011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_S,   0,		I4|I32	},
-{"movt.ps", "D,S,N",	0x46c10011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,	0,		I5|I33	},
-{"movz",    "d,v,t",    0x0000000a, 0xfc0007ff, WR_d|RD_s|RD_t, 	0,		I4|I32	},
+{"movt.s",  "D,S,N",    0x46010011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_S,   0,		I4_32	},
+{"movt.ps", "D,S,N",	0x46c10011, 0xffe3003f, WR_D|RD_S|RD_CC|FP_D,	0,		I5_33	},
+{"movz",    "d,v,t",    0x0000000a, 0xfc0007ff, WR_d|RD_s|RD_t, 	0,		I4_32|IL2E|IL2F	},
 {"ffs",     "d,v",	0x0000000a, 0xfc1f07ff,	WR_d|RD_s,		0,		L1	},
-{"movz.d",  "D,S,t",    0x46200012, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I4|I32	},
+{"movz.d",  "D,S,t",    0x46200012, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I4_32	},
 {"movz.l",  "D,S,t",    0x46a00012, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		MX|SB1	},
 {"movz.l",  "X,Y,t",    0x46a00012, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		MX|SB1	},
-{"movz.s",  "D,S,t",    0x46000012, 0xffe0003f, WR_D|RD_S|RD_t|FP_S,    0,		I4|I32	},
-{"movz.ps", "D,S,t",    0x46c00012, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I5|I33	},
+{"movz.s",  "D,S,t",    0x46000012, 0xffe0003f, WR_D|RD_S|RD_t|FP_S,    0,		I4_32	},
+{"movz.ps", "D,S,t",    0x46c00012, 0xffe0003f, WR_D|RD_S|RD_t|FP_D,    0,		I5_33	},
 {"msac",    "d,s,t",	0x000001d8, 0xfc0007ff,	RD_s|RD_t|WR_HILO|WR_d,	0,		N5	},
 {"msacu",   "d,s,t",	0x000001d9, 0xfc0007ff,	RD_s|RD_t|WR_HILO|WR_d,	0,		N5	},
 {"msachi",  "d,s,t",	0x000003d8, 0xfc0007ff,	RD_s|RD_t|WR_HILO|WR_d,	0,		N5	},
 {"msachiu", "d,s,t",	0x000003d9, 0xfc0007ff,	RD_s|RD_t|WR_HILO|WR_d,	0,		N5	},
 /* move is at the top of the table.  */
 {"msgn.qh", "X,Y,Q",	0x78200000, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
-{"msub.d",  "D,R,S,T",	0x4c000029, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I4|I33	},
-{"msub.s",  "D,R,S,T",	0x4c000028, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S, 0,		I4|I33	},
-{"msub.ps", "D,R,S,T",	0x4c00002e, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I5|I33	},
+{"msub.d",  "D,R,S,T",	0x4c000029, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I4_33	},
+{"msub.d",	"D,S,T",	0x46200019,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"msub.d",	"D,S,T",	0x72200019,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"msub.s",  "D,R,S,T",	0x4c000028, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S, 0,		I4_33	},
+{"msub.s",	"D,S,T",	0x46000019,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"msub.s",	"D,S,T",	0x72000019,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
+{"msub.ps", "D,R,S,T",	0x4c00002e, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I5_33	},
+{"msub.ps",	"D,S,T",	0x45600019,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"msub.ps",	"D,S,T",	0x71600019,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"msub",    "s,t",      0x0000001e, 0xfc00ffff, RD_s|RD_t|WR_HILO,	0,		L1    	},
 {"msub",    "s,t",      0x70000004, 0xfc00ffff, RD_s|RD_t|MOD_HILO,     0,		I32|N55 },
 {"msub",    "7,s,t",	0x70000004, 0xfc00e7ff, MOD_a|RD_s|RD_t,        0,              D33	},
@@ -883,6 +955,12 @@
 {"mtlo",    "s",	0x00000013, 0xfc1fffff,	RD_s|WR_LO,		0,		I1	},
 {"mtlo",    "s,7",	0x00000013, 0xfc1fe7ff, RD_s|WR_LO,		0,		D32	},
 {"mtlhx",   "s",	0x00000053, 0xfc1fffff,	RD_s|MOD_HILO,		0,		SMT	},
+{"mtm0",    "s",        0x70000008, 0xfc1fffff, RD_s,			0,		IOCTEON },
+{"mtm1",    "s",        0x7000000c, 0xfc1fffff, RD_s,			0,		IOCTEON },
+{"mtm2",    "s",        0x7000000d, 0xfc1fffff, RD_s,			0,		IOCTEON },
+{"mtp0",    "s",        0x70000009, 0xfc1fffff, RD_s,			0,		IOCTEON },
+{"mtp1",    "s",        0x7000000a, 0xfc1fffff, RD_s,			0,		IOCTEON },
+{"mtp2",    "s",        0x7000000b, 0xfc1fffff, RD_s,			0,		IOCTEON },
 {"mttc0",   "t,G",	0x41800000, 0xffe007ff, TRAP|COD|RD_t|WR_C0|WR_CC, 0,		MT32	},
 {"mttc0",   "t,+D",	0x41800000, 0xffe007f8, TRAP|COD|RD_t|WR_C0|WR_CC, 0,		MT32	},
 {"mttc0",   "t,G,H",	0x41800000, 0xffe007f8, TRAP|COD|RD_t|WR_C0|WR_CC, 0,		MT32	},
@@ -907,7 +985,8 @@
 {"mul.ob",  "D,S,T",	0x4ac00030, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"mul.ob",  "D,S,T[e]",	0x48000030, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"mul.ob",  "D,S,k",	0x4bc00030, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
-{"mul.ps",  "D,V,T",	0x46c00002, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
+{"mul.ps",  "D,V,T",	0x46c00002, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33|IL2F	},
+{"mul.ps",  "D,V,T",	0x45600002, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		IL2E	},
 {"mul.qh",  "X,Y,Q",	0x78200030, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
 {"mul",     "d,v,t",    0x70000002, 0xfc0007ff, WR_d|RD_s|RD_t|WR_HILO, 0,		I32|P3|N55},
 {"mul",     "d,s,t",	0x00000058, 0xfc0007ff,	RD_s|RD_t|WR_HILO|WR_d,	0,		N54	},
@@ -956,16 +1035,31 @@
 {"negu",    "d,w",	0x00000023, 0xffe007ff,	WR_d|RD_t,		0,		I1	}, /* subu 0 */
 {"neg.d",   "D,V",	0x46200007, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I1	},
 {"neg.s",   "D,V",	0x46000007, 0xffff003f,	WR_D|RD_S|FP_S,		0,		I1	},
-{"neg.ps",  "D,V",	0x46c00007, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I5|I33	},
-{"nmadd.d", "D,R,S,T",	0x4c000031, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I4|I33	},
-{"nmadd.s", "D,R,S,T",	0x4c000030, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S, 0,		I4|I33	},
-{"nmadd.ps","D,R,S,T",	0x4c000036, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I5|I33	},
-{"nmsub.d", "D,R,S,T",	0x4c000039, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I4|I33	},
-{"nmsub.s", "D,R,S,T",	0x4c000038, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S, 0,		I4|I33	},
-{"nmsub.ps","D,R,S,T",	0x4c00003e, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I5|I33	},
+{"neg.ps",  "D,V",	0x46c00007, 0xffff003f,	WR_D|RD_S|FP_D,		0,		I5_33|IL2F	},
+{"neg.ps",  "D,V",	0x45600007, 0xffff003f,	WR_D|RD_S|FP_D,		0,		IL2E	},
+{"nmadd.d", "D,R,S,T",	0x4c000031, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I4_33	},
+{"nmadd.d",	"D,S,T",	0x4620001a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"nmadd.d",	"D,S,T",	0x7220001a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"nmadd.s", "D,R,S,T",	0x4c000030, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S, 0,		I4_33	},
+{"nmadd.s",	"D,S,T",	0x4600001a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"nmadd.s",	"D,S,T",	0x7200001a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
+{"nmadd.ps","D,R,S,T",	0x4c000036, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I5_33	},
+{"nmadd.ps",	"D,S,T",	0x4560001a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"nmadd.ps",	"D,S,T",	0x7160001a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"nmsub.d", "D,R,S,T",	0x4c000039, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I4_33	},
+{"nmsub.d",	"D,S,T",	0x4620001b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"nmsub.d",	"D,S,T",	0x7220001b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"nmsub.s", "D,R,S,T",	0x4c000038, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_S, 0,		I4_33	},
+{"nmsub.s",	"D,S,T",	0x4600001b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"nmsub.s",	"D,S,T",	0x7200001b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
+{"nmsub.ps","D,R,S,T",	0x4c00003e, 0xfc00003f, RD_R|RD_S|RD_T|WR_D|FP_D, 0,		I5_33	},
+{"nmsub.ps",	"D,S,T",	0x4560001b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"nmsub.ps",	"D,S,T",	0x7160001b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 /* nop is at the start of the table.  */
 {"nor",     "d,v,t",	0x00000027, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"nor",     "t,r,I",	0,    (int) M_NOR_I,	INSN_MACRO,		0,		I1	},
+{"nor",	"D,S,T",	0x47a00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"nor",	"D,S,T",	0x4ba00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"nor.ob",  "X,Y,Q",	0x7800000f, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"nor.ob",  "D,S,T",	0x4ac0000f, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"nor.ob",  "D,S,T[e]",	0x4800000f, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
@@ -974,6 +1068,8 @@
 {"not",     "d,v",	0x00000027, 0xfc1f07ff,	WR_d|RD_s|RD_t,		0,		I1	},/*nor d,s,0*/
 {"or",      "d,v,t",	0x00000025, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"or",      "t,r,I",	0,    (int) M_OR_I,	INSN_MACRO,		0,		I1	},
+{"or",	"D,S,T",	0x45a00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"or",	"D,S,T",	0x4b20000c,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"or.ob",   "X,Y,Q",	0x7800000e, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"or.ob",   "D,S,T",	0x4ac0000e, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"or.ob",   "D,S,T[e]",	0x4800000e, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
@@ -993,11 +1089,12 @@
 {"pickt.ob", "D,S,T[e]",0x48000003, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"pickt.ob", "D,S,k",	0x4bc00003, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"pickt.qh", "X,Y,Q",	0x78200003, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
-{"pll.ps",  "D,V,T",	0x46c0002c, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
-{"plu.ps",  "D,V,T",	0x46c0002d, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
+{"pll.ps",  "D,V,T",	0x46c0002c, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33	},
+{"plu.ps",  "D,V,T",	0x46c0002d, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33	},
   /* pref and prefx are at the start of the table.  */
-{"pul.ps",  "D,V,T",	0x46c0002e, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
-{"puu.ps",  "D,V,T",	0x46c0002f, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
+{"pop",     "d,s",      0x7000002c, 0xfc1f07ff, WR_d|RD_s,		0,		IOCTEON },
+{"pul.ps",  "D,V,T",	0x46c0002e, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33	},
+{"puu.ps",  "D,V,T",	0x46c0002f, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33	},
 {"pperm",   "s,t",	0x70000481, 0xfc00ffff,	MOD_HILO|RD_s|RD_t,	0,		SMT	},
 {"rach.ob", "X",	0x7a00003f, 0xfffff83f,	WR_D|FP_D,		RD_MACC,	MX|SB1	},
 {"rach.ob", "D",	0x4a00003f, 0xfffff83f,	WR_D,			0,		N54	},
@@ -1008,9 +1105,9 @@
 {"racm.ob", "X",	0x7900003f, 0xfffff83f,	WR_D|FP_D,		RD_MACC,	MX|SB1	},
 {"racm.ob", "D",	0x4900003f, 0xfffff83f,	WR_D,			0,		N54	},
 {"racm.qh", "X",	0x7920003f, 0xfffff83f,	WR_D|FP_D,		RD_MACC,	MX	},
-{"recip.d", "D,S",	0x46200015, 0xffff003f, WR_D|RD_S|FP_D,		0,		I4|I33	},
+{"recip.d", "D,S",	0x46200015, 0xffff003f, WR_D|RD_S|FP_D,		0,		I4_33	},
 {"recip.ps","D,S",	0x46c00015, 0xffff003f, WR_D|RD_S|FP_D,		0,		SB1	},
-{"recip.s", "D,S",	0x46000015, 0xffff003f, WR_D|RD_S|FP_S,		0,		I4|I33	},
+{"recip.s", "D,S",	0x46000015, 0xffff003f, WR_D|RD_S|FP_S,		0,		I4_33	},
 {"recip1.d",  "D,S",	0x4620001d, 0xffff003f,	WR_D|RD_S|FP_D,		0,		M3D	},
 {"recip1.ps", "D,S",	0x46c0001d, 0xffff003f,	WR_D|RD_S|FP_S,		0,		M3D	},
 {"recip1.s",  "D,S",	0x4600001d, 0xffff003f,	WR_D|RD_S|FP_S,		0,		M3D	},
@@ -1043,13 +1140,13 @@
 {"rotr",    "d,v,t",	0,    (int) M_ROR,	INSN_MACRO,		0,		I33|SMT	},
 {"rotr",    "d,v,I",	0,    (int) M_ROR_I,	INSN_MACRO,		0,		I33|SMT	},
 {"rotrv",   "d,t,s",	0x00000046, 0xfc0007ff,	RD_t|RD_s|WR_d,		0,		I33|SMT	},
-{"round.l.d", "D,S",	0x46200008, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3|I33	},
-{"round.l.s", "D,S",	0x46000008, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I3|I33	},
+{"round.l.d", "D,S",	0x46200008, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3_33	},
+{"round.l.s", "D,S",	0x46000008, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I3_33	},
 {"round.w.d", "D,S",	0x4620000c, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I2	},
 {"round.w.s", "D,S",	0x4600000c, 0xffff003f, WR_D|RD_S|FP_S,		0,		I2	},
-{"rsqrt.d", "D,S",	0x46200016, 0xffff003f, WR_D|RD_S|FP_D,		0,		I4|I33	},
+{"rsqrt.d", "D,S",	0x46200016, 0xffff003f, WR_D|RD_S|FP_D,		0,		I4_33	},
 {"rsqrt.ps","D,S",	0x46c00016, 0xffff003f, WR_D|RD_S|FP_D,		0,		SB1	},
-{"rsqrt.s", "D,S",	0x46000016, 0xffff003f, WR_D|RD_S|FP_S,		0,		I4|I33	},
+{"rsqrt.s", "D,S",	0x46000016, 0xffff003f, WR_D|RD_S|FP_S,		0,		I4_33	},
 {"rsqrt1.d",  "D,S",	0x4620001e, 0xffff003f,	WR_D|RD_S|FP_D,		0,		M3D	},
 {"rsqrt1.ps", "D,S",	0x46c0001e, 0xffff003f,	WR_D|RD_S|FP_S,		0,		M3D	},
 {"rsqrt1.s",  "D,S",	0x4600001e, 0xffff003f,	WR_D|RD_S|FP_S,		0,		M3D	},
@@ -1089,13 +1186,17 @@
 {"sdl",     "t,A(b)",	0,    (int) M_SDL_AB,	INSN_MACRO,		0,		I3	},
 {"sdr",     "t,o(b)",	0xb4000000, 0xfc000000,	SM|RD_t|RD_b,		0,		I3	},
 {"sdr",     "t,A(b)",	0,    (int) M_SDR_AB,	INSN_MACRO,		0,		I3	},
-{"sdxc1",   "S,t(b)",   0x4c000009, 0xfc0007ff, SM|RD_S|RD_t|RD_b|FP_D,	0,		I4|I33	},
+{"sdxc1",   "S,t(b)",   0x4c000009, 0xfc0007ff, SM|RD_S|RD_t|RD_b|FP_D,	0,		I4_33	},
 {"seb",     "d,w",	0x7c000420, 0xffe007ff,	WR_d|RD_t,		0,		I33	},
 {"seh",     "d,w",	0x7c000620, 0xffe007ff,	WR_d|RD_t,		0,		I33	},
 {"selsl",   "d,v,t",	0x00000005, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		L1	},
 {"selsr",   "d,v,t",	0x00000001, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		L1	},
+{"seq",     "d,v,t",    0x7000002a, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		IOCTEON },
 {"seq",     "d,v,t",	0,    (int) M_SEQ,	INSN_MACRO,		0,		I1	},
 {"seq",     "d,v,I",	0,    (int) M_SEQ_I,	INSN_MACRO,		0,		I1	},
+{"seq",	"S,T",		0x46a00032,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2E	},
+{"seq",	"S,T",		0x4ba0000c,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2F	},
+{"seqi",    "t,r,y",    0x7000002e, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON },
 {"sge",     "d,v,t",	0,    (int) M_SGE,	INSN_MACRO,		0,		I1	},
 {"sge",     "d,v,I",	0,    (int) M_SGE_I,	INSN_MACRO,		0,		I1	},
 {"sgeu",    "d,v,t",	0,    (int) M_SGEU,	INSN_MACRO,		0,		I1	},
@@ -1122,33 +1223,49 @@
 {"shfl.upsl.ob", "X,Y,Z", 0x78c0001f, 0xffe0003f, WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"sle",     "d,v,t",	0,    (int) M_SLE,	INSN_MACRO,		0,		I1	},
 {"sle",     "d,v,I",	0,    (int) M_SLE_I,	INSN_MACRO,		0,		I1	},
+{"sle",	"S,T",		0x46a0003e,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2E	},
+{"sle",	"S,T",		0x4ba0000e,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2F	},
 {"sleu",    "d,v,t",	0,    (int) M_SLEU,	INSN_MACRO,		0,		I1	},
 {"sleu",    "d,v,I",	0,    (int) M_SLEU_I,	INSN_MACRO,		0,		I1	},
+{"sleu",	"S,T",		0x4680003e,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2E	},
+{"sleu",	"S,T",		0x4b80000e,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2F	},
 {"sllv",    "d,t,s",	0x00000004, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I1	},
 {"sll",     "d,w,s",	0x00000004, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I1	}, /* sllv */
 {"sll",     "d,w,<",	0x00000000, 0xffe0003f,	WR_d|RD_t,		0,		I1	},
+{"sll",	"D,S,T",	0x45800002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"sll",	"D,S,T",	0x4b00000e,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"sll.ob",  "X,Y,Q",	0x78000010, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"sll.ob",  "D,S,T[e]",	0x48000010, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"sll.ob",  "D,S,k",	0x4bc00010, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"sll.qh",  "X,Y,Q",	0x78200010, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
 {"slt",     "d,v,t",	0x0000002a, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"slt",     "d,v,I",	0,    (int) M_SLT_I,	INSN_MACRO,		0,		I1	},
+{"slt",	"S,T",		0x46a0003c,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2E	},
+{"slt",	"S,T",		0x4ba0000d,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2F	},
 {"slti",    "t,r,j",	0x28000000, 0xfc000000,	WR_t|RD_s,		0,		I1	},
 {"sltiu",   "t,r,j",	0x2c000000, 0xfc000000,	WR_t|RD_s,		0,		I1	},
 {"sltu",    "d,v,t",	0x0000002b, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"sltu",    "d,v,I",	0,    (int) M_SLTU_I,	INSN_MACRO,		0,		I1	},
+{"sltu",	"S,T",		0x4680003c,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2E	},
+{"sltu",	"S,T",		0x4b80000d,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2F	},
+{"sne",     "d,v,t",    0x7000002b, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		IOCTEON },
 {"sne",     "d,v,t",	0,    (int) M_SNE,	INSN_MACRO,		0,		I1	},
 {"sne",     "d,v,I",	0,    (int) M_SNE_I,	INSN_MACRO,		0,		I1	},
+{"snei",    "t,r,y",    0x7000002f, 0xfc00003f, WR_t|RD_s,		0,		IOCTEON },
 {"sqrt.d",  "D,S",	0x46200004, 0xffff003f, WR_D|RD_S|FP_D,		0,		I2	},
 {"sqrt.s",  "D,S",	0x46000004, 0xffff003f, WR_D|RD_S|FP_S,		0,		I2	},
 {"sqrt.ps", "D,S",	0x46c00004, 0xffff003f, WR_D|RD_S|FP_D,		0,		SB1	},
 {"srav",    "d,t,s",	0x00000007, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I1	},
 {"sra",     "d,w,s",	0x00000007, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I1	}, /* srav */
 {"sra",     "d,w,<",	0x00000003, 0xffe0003f,	WR_d|RD_t,		0,		I1	},
+{"sra",	"D,S,T",	0x45c00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"sra",	"D,S,T",	0x4b40000f,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"sra.qh",  "X,Y,Q",	0x78200013, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
 {"srlv",    "d,t,s",	0x00000006, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I1	},
 {"srl",     "d,w,s",	0x00000006, 0xfc0007ff,	WR_d|RD_t|RD_s,		0,		I1	}, /* srlv */
 {"srl",     "d,w,<",	0x00000002, 0xffe0003f,	WR_d|RD_t,		0,		I1	},
+{"srl",	"D,S,T",	0x45800003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"srl",	"D,S,T",	0x4b00000f,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"srl.ob",  "X,Y,Q",	0x78000012, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"srl.ob",  "D,S,T[e]",	0x48000012, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"srl.ob",  "D,S,k",	0x4bc00012, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
@@ -1157,13 +1274,16 @@
 {"standby", "",         0x42000021, 0xffffffff,	0,			0,		V1	},
 {"sub",     "d,v,t",	0x00000022, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"sub",     "d,v,I",	0,    (int) M_SUB_I,	INSN_MACRO,		0,		I1	},
+{"sub",	"D,S,T",	0x45c00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"sub",	"D,S,T",	0x4b40000d,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
 {"sub.d",   "D,V,T",	0x46200001, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I1	},
 {"sub.s",   "D,V,T",	0x46000001, 0xffe0003f,	WR_D|RD_S|RD_T|FP_S,	0,		I1	},
 {"sub.ob",  "X,Y,Q",	0x7800000a, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"sub.ob",  "D,S,T",	0x4ac0000a, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"sub.ob",  "D,S,T[e]",	0x4800000a, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"sub.ob",  "D,S,k",	0x4bc0000a, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
-{"sub.ps",  "D,V,T",	0x46c00001, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5|I33	},
+{"sub.ps",  "D,V,T",	0x46c00001, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		I5_33|IL2F	},
+{"sub.ps",  "D,V,T",	0x45600001, 0xffe0003f,	WR_D|RD_S|RD_T|FP_D,	0,		IL2E	},
 {"sub.qh",  "X,Y,Q",	0x7820000a, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX	},
 {"suba.ob", "Y,Q",	0x78000036, 0xfc2007ff,	RD_S|RD_T|FP_D,		WR_MACC,	MX|SB1	},
 {"suba.qh", "Y,Q",	0x78200036, 0xfc2007ff,	RD_S|RD_T|FP_D,		WR_MACC,	MX	},
@@ -1171,8 +1291,10 @@
 {"subl.qh", "Y,Q",	0x78200436, 0xfc2007ff,	RD_S|RD_T|FP_D,		WR_MACC,	MX	},
 {"subu",    "d,v,t",	0x00000023, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"subu",    "d,v,I",	0,    (int) M_SUBU_I,	INSN_MACRO,		0,		I1	},
+{"subu",	"D,S,T",	0x45800001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2E	},
+{"subu",	"D,S,T",	0x4b00000d,	0xffe0003f,	RD_S|RD_T|WR_D|FP_S,	0,	IL2F	},
 {"suspend", "",         0x42000022, 0xffffffff,	0,			0,		V1	},
-{"suxc1",   "S,t(b)",   0x4c00000d, 0xfc0007ff, SM|RD_S|RD_t|RD_b,	0,		I5|I33|N55},
+{"suxc1",   "S,t(b)",   0x4c00000d, 0xfc0007ff, SM|RD_S|RD_t|RD_b,	0,		I5_33|N55},
 {"sw",      "t,o(b)",	0xac000000, 0xfc000000,	SM|RD_t|RD_b,		0,		I1	},
 {"sw",      "t,A(b)",	0,    (int) M_SW_AB,	INSN_MACRO,		0,		I1	},
 {"swc0",    "E,o(b)",	0xe0000000, 0xfc000000,	SM|RD_C0|RD_b,		0,		I1	},
@@ -1195,11 +1317,17 @@
 {"swr",     "t,A(b)",	0,    (int) M_SWR_AB,	INSN_MACRO,		0,		I1	},
 {"invalidate", "t,o(b)",0xb8000000, 0xfc000000,	RD_t|RD_b,		0,		I2	}, /* same */
 {"invalidate", "t,A(b)",0,    (int) M_SWR_AB,	INSN_MACRO,		0,		I2	}, /* as swr */
-{"swxc1",   "S,t(b)",   0x4c000008, 0xfc0007ff, SM|RD_S|RD_t|RD_b|FP_S,	0,		I4|I33	},
+{"swxc1",   "S,t(b)",   0x4c000008, 0xfc0007ff, SM|RD_S|RD_t|RD_b|FP_S,	0,		I4_33	},
 {"sync",    "",		0x0000000f, 0xffffffff,	INSN_SYNC,		0,		I2|G1	},
 {"sync.p",  "",		0x0000040f, 0xffffffff,	INSN_SYNC,		0,		I2	},
 {"sync.l",  "",		0x0000000f, 0xffffffff,	INSN_SYNC,		0,		I2	},
 {"synci",   "o(b)",	0x041f0000, 0xfc1f0000,	SM|RD_b,		0,		I33	},
+{"syncio",  "",         0x0000004f, 0xffffffff, INSN_SYNC,		0,		IOCTEON },
+{"synciobdma", "",      0x0000008f, 0xffffffff, INSN_SYNC,		0,		IOCTEON },
+{"syncioall", "",       0x000000cf, 0xffffffff, INSN_SYNC,		0,		IOCTEON },
+{"syncs",   "",         0x0000018f, 0xffffffff, INSN_SYNC,		0,		IOCTEON	},
+{"syncw",   "",         0x0000010f, 0xffffffff, INSN_SYNC,		0,		IOCTEON },
+{"syncws",   "",        0x0000014f, 0xffffffff, INSN_SYNC,		0,		IOCTEON },
 {"syscall", "",		0x0000000c, 0xffffffff,	TRAP,			0,		I1	},
 {"syscall", "B",	0x0000000c, 0xfc00003f,	TRAP,			0,		I1	},
 {"teqi",    "s,j",	0x040c0000, 0xfc1f0000, RD_s|TRAP,		0,		I2	},
@@ -1236,41 +1364,50 @@
 {"tne",     "s,t,q",	0x00000036, 0xfc00003f, RD_s|RD_t|TRAP,		0,		I2	},
 {"tne",     "s,j",	0x040e0000, 0xfc1f0000, RD_s|TRAP,		0,		I2	}, /* tnei */
 {"tne",     "s,I",	0,    (int) M_TNE_I,	INSN_MACRO,		0,		I2	},
-{"trunc.l.d", "D,S",	0x46200009, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3|I33	},
-{"trunc.l.s", "D,S",	0x46000009, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I3|I33	},
+{"trunc.l.d", "D,S",	0x46200009, 0xffff003f, WR_D|RD_S|FP_D,		0,		I3_33	},
+{"trunc.l.s", "D,S",	0x46000009, 0xffff003f,	WR_D|RD_S|FP_S|FP_D,	0,		I3_33	},
 {"trunc.w.d", "D,S",	0x4620000d, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I2	},
 {"trunc.w.d", "D,S,x",	0x4620000d, 0xffff003f, WR_D|RD_S|FP_S|FP_D,	0,		I2	},
 {"trunc.w.d", "D,S,t",	0,    (int) M_TRUNCWD,	INSN_MACRO,		0,		I1	},
 {"trunc.w.s", "D,S",	0x4600000d, 0xffff003f,	WR_D|RD_S|FP_S,		0,		I2	},
 {"trunc.w.s", "D,S,x",	0x4600000d, 0xffff003f,	WR_D|RD_S|FP_S,		0,		I2	},
 {"trunc.w.s", "D,S,t",	0,    (int) M_TRUNCWS,	INSN_MACRO,		0,		I1	},
+{"uld",     "t,o(b)",   0x68000000, 0xfc000000, LDD|WR_t|RD_b,		0,		IOCTEON },
 {"uld",     "t,o(b)",	0,    (int) M_ULD,	INSN_MACRO,		0,		I3	},
 {"uld",     "t,A(b)",	0,    (int) M_ULD_A,	INSN_MACRO,		0,		I3	},
 {"ulh",     "t,o(b)",	0,    (int) M_ULH,	INSN_MACRO,		0,		I1	},
 {"ulh",     "t,A(b)",	0,    (int) M_ULH_A,	INSN_MACRO,		0,		I1	},
 {"ulhu",    "t,o(b)",	0,    (int) M_ULHU,	INSN_MACRO,		0,		I1	},
 {"ulhu",    "t,A(b)",	0,    (int) M_ULHU_A,	INSN_MACRO,		0,		I1	},
+{"ulw",     "t,o(b)",   0x88000000, 0xfc000000, LDD|RD_b|WR_t,		0,		IOCTEON },
 {"ulw",     "t,o(b)",	0,    (int) M_ULW,	INSN_MACRO,		0,		I1	},
 {"ulw",     "t,A(b)",	0,    (int) M_ULW_A,	INSN_MACRO,		0,		I1	},
+{"usd",     "t,o(b)",   0xb0000000, 0xfc000000, SM|RD_t|RD_b,		0,		IOCTEON },
 {"usd",     "t,o(b)",	0,    (int) M_USD,	INSN_MACRO,		0,		I3	},
 {"usd",     "t,A(b)",	0,    (int) M_USD_A,	INSN_MACRO,		0,		I3	},
 {"ush",     "t,o(b)",	0,    (int) M_USH,	INSN_MACRO,		0,		I1	},
 {"ush",     "t,A(b)",	0,    (int) M_USH_A,	INSN_MACRO,		0,		I1	},
+{"usw",     "t,o(b)",   0xa8000000, 0xfc000000, SM|RD_t|RD_b,		0,		IOCTEON },
 {"usw",     "t,o(b)",	0,    (int) M_USW,	INSN_MACRO,		0,		I1	},
 {"usw",     "t,A(b)",	0,    (int) M_USW_A,	INSN_MACRO,		0,		I1	},
+{"v3mulu",  "d,v,t",    0x70000011, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		IOCTEON },
+{"vmm0",    "d,v,t",    0x70000010, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		IOCTEON },
+{"vmulu",   "d,v,t",    0x7000000f, 0xfc0007ff, WR_d|RD_s|RD_t,		0,		IOCTEON },
 {"wach.ob", "Y",	0x7a00003e, 0xffff07ff,	RD_S|FP_D,		WR_MACC,	MX|SB1	},
 {"wach.ob", "S",	0x4a00003e, 0xffff07ff,	RD_S,			0,		N54	},
 {"wach.qh", "Y",	0x7a20003e, 0xffff07ff,	RD_S|FP_D,		WR_MACC,	MX	},
 {"wacl.ob", "Y,Z",	0x7800003e, 0xffe007ff,	RD_S|RD_T|FP_D,		WR_MACC,	MX|SB1	},
 {"wacl.ob", "S,T",	0x4800003e, 0xffe007ff,	RD_S|RD_T,		0,		N54	},
 {"wacl.qh", "Y,Z",	0x7820003e, 0xffe007ff,	RD_S|RD_T|FP_D,		WR_MACC,	MX	},
-{"wait",    "",         0x42000020, 0xffffffff, TRAP,   		0,		I3|I32	},
+{"wait",    "",         0x42000020, 0xffffffff, TRAP,   		0,		I3_32	},
 {"wait",    "J",        0x42000020, 0xfe00003f, TRAP,   		0,		I32|N55	},
 {"waiti",   "",		0x42000020, 0xffffffff,	TRAP,			0,		L1	},
 {"wrpgpr",  "d,w",	0x41c00000, 0xffe007ff, RD_t,			0,		I33	},
 {"wsbh",    "d,w",	0x7c0000a0, 0xffe007ff,	WR_d|RD_t,		0,		I33	},
 {"xor",     "d,v,t",	0x00000026, 0xfc0007ff,	WR_d|RD_s|RD_t,		0,		I1	},
 {"xor",     "t,r,I",	0,    (int) M_XOR_I,	INSN_MACRO,		0,		I1	},
+{"xor",	"D,S,T",	0x47800002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"xor",	"D,S,T",	0x4b800002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
 {"xor.ob",  "X,Y,Q",	0x7800000d, 0xfc20003f,	WR_D|RD_S|RD_T|FP_D,	0,		MX|SB1	},
 {"xor.ob",  "D,S,T",	0x4ac0000d, 0xffe0003f,	WR_D|RD_S|RD_T,		0,		N54	},
 {"xor.ob",  "D,S,T[e]",	0x4800000d, 0xfe20003f,	WR_D|RD_S|RD_T,		0,		N54	},
@@ -1358,8 +1495,10 @@
 {"bc2tl",   "N,p",	0x49030000, 0xffe30000,	CBL|RD_CC,		0,		I32	},
 {"cfc2",    "t,G",	0x48400000, 0xffe007ff,	LCD|WR_t|RD_C2,		0,		I1	},
 {"ctc2",    "t,G",	0x48c00000, 0xffe007ff,	COD|RD_t|WR_CC,		0,		I1	},
+{"dmfc2",   "t,i",      0x48200000, 0xffe00000, LCD|WR_t|RD_C2,         0,		IOCTEON },
 {"dmfc2",   "t,G",	0x48200000, 0xffe007ff,	LCD|WR_t|RD_C2,		0,		I3	},
 {"dmfc2",   "t,G,H",	0x48200000, 0xffe007f8,	LCD|WR_t|RD_C2,		0,		I64	},
+{"dmtc2",   "t,i",      0x48a00000, 0xffe00000, COD|RD_t|WR_C2,         0,		IOCTEON },
 {"dmtc2",   "t,G",	0x48a00000, 0xffe007ff,	COD|RD_t|WR_C2|WR_CC,	0,		I3	},
 {"dmtc2",   "t,G,H",	0x48a00000, 0xffe007f8,	COD|RD_t|WR_C2|WR_CC,	0,		I64	},
 {"mfc2",    "t,G",	0x48000000, 0xffe007ff,	LCD|WR_t|RD_C2,		0,		I1	},
@@ -1388,18 +1527,6 @@
 {"mtc3",    "t,G",	0x4c800000, 0xffe007ff,	COD|RD_t|WR_C3|WR_CC,	0,		I1	},
 {"mtc3",    "t,G,H",    0x4c800000, 0xffe007f8, COD|RD_t|WR_C3|WR_CC,   0,		I32     },
 
-/* No hazard protection on coprocessor instructions--they shouldn't
-   change the state of the processor and if they do it's up to the
-   user to put in nops as necessary.  These are at the end so that the
-   disassembler recognizes more specific versions first.  */
-{"c0",      "C",	0x42000000, 0xfe000000,	0,			0,		I1	},
-{"c1",      "C",	0x46000000, 0xfe000000,	0,			0,		I1	},
-{"c2",      "C",	0x4a000000, 0xfe000000,	0,			0,		I1	},
-{"c3",      "C",	0x4e000000, 0xfe000000,	0,			0,		I1	},
-{"cop0",     "C",	0,    (int) M_COP0,	INSN_MACRO,		0,		I1	},
-{"cop1",     "C",	0,    (int) M_COP1,	INSN_MACRO,		0,		I1	},
-{"cop2",     "C",	0,    (int) M_COP2,	INSN_MACRO,		0,		I1	},
-{"cop3",     "C",	0,    (int) M_COP3,	INSN_MACRO,		0,		I1	},
   /* Conflicts with the 4650's "mul" instruction.  Nobody's using the
      4010 any more, so move this insn out of the way.  If the object
      format gave us more info, we could do this right.  */
@@ -1692,6 +1819,161 @@
 {"bc0fl",   "p",	0x41020000, 0xffff0000,	CBL|RD_CC,		0,		I2|T3	},
 {"bc0t",    "p",	0x41010000, 0xffff0000,	CBD|RD_CC,		0,		I1	},
 {"bc0tl",   "p",	0x41030000, 0xffff0000,	CBL|RD_CC,		0,		I2|T3	},
+/* ST Microelectronics Loongson-2E and -2F.  */
+{"mult.g",	"d,s,t",	0x7c000018,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"mult.g",	"d,s,t",	0x70000010,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"multu.g",	"d,s,t",	0x7c000019,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"multu.g",	"d,s,t",	0x70000012,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"dmult.g",	"d,s,t",	0x7c00001c,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"dmult.g",	"d,s,t",	0x70000011,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"dmultu.g",	"d,s,t",	0x7c00001d,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"dmultu.g",	"d,s,t",	0x70000013,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"div.g",	"d,s,t",	0x7c00001a,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"div.g",	"d,s,t",	0x70000014,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"divu.g",	"d,s,t",	0x7c00001b,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"divu.g",	"d,s,t",	0x70000016,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"ddiv.g",	"d,s,t",	0x7c00001e,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"ddiv.g",	"d,s,t",	0x70000015,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"ddivu.g",	"d,s,t",	0x7c00001f,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"ddivu.g",	"d,s,t",	0x70000017,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"mod.g",	"d,s,t",	0x7c000022,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"mod.g",	"d,s,t",	0x7000001c,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"modu.g",	"d,s,t",	0x7c000023,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"modu.g",	"d,s,t",	0x7000001e,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"dmod.g",	"d,s,t",	0x7c000026,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"dmod.g",	"d,s,t",	0x7000001d,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"dmodu.g",	"d,s,t",	0x7c000027,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2E	},
+{"dmodu.g",	"d,s,t",	0x7000001f,	0xfc0007ff,	RD_s|RD_t|WR_d,	0,	IL2F	},
+{"packsshb",	"D,S,T",	0x47400002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"packsshb",	"D,S,T",	0x4b400002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"packsswh",	"D,S,T",	0x47200002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"packsswh",	"D,S,T",	0x4b200002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"packushb",	"D,S,T",	0x47600002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"packushb",	"D,S,T",	0x4b600002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddb",	"D,S,T",	0x47c00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddb",	"D,S,T",	0x4bc00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddh",	"D,S,T",	0x47400000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddh",	"D,S,T",	0x4b400000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddw",	"D,S,T",	0x47600000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddw",	"D,S,T",	0x4b600000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddd",	"D,S,T",	0x47e00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddd",	"D,S,T",	0x4be00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddsb",	"D,S,T",	0x47800000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddsb",	"D,S,T",	0x4b800000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddsh",	"D,S,T",	0x47000000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddsh",	"D,S,T",	0x4b000000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddusb",	"D,S,T",	0x47a00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddusb",	"D,S,T",	0x4ba00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"paddush",	"D,S,T",	0x47200000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"paddush",	"D,S,T",	0x4b200000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pandn",	"D,S,T",	0x47e00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pandn",	"D,S,T",	0x4be00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pavgb",	"D,S,T",	0x46600000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pavgb",	"D,S,T",	0x4b200008,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pavgh",	"D,S,T",	0x46400000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pavgh",	"D,S,T",	0x4b000008,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pcmpeqb",	"D,S,T",	0x46c00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pcmpeqb",	"D,S,T",	0x4b800009,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pcmpeqh",	"D,S,T",	0x46800001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pcmpeqh",	"D,S,T",	0x4b400009,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pcmpeqw",	"D,S,T",	0x46400001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pcmpeqw",	"D,S,T",	0x4b000009,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pcmpgtb",	"D,S,T",	0x46e00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pcmpgtb",	"D,S,T",	0x4ba00009,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pcmpgth",	"D,S,T",	0x46a00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pcmpgth",	"D,S,T",	0x4b600009,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pcmpgtw",	"D,S,T",	0x46600001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pcmpgtw",	"D,S,T",	0x4b200009,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pextrh",	"D,S,T",	0x45c00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pextrh",	"D,S,T",	0x4b40000e,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pinsrh_0",	"D,S,T",	0x47800003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pinsrh_0",	"D,S,T",	0x4b800003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pinsrh_1",	"D,S,T",	0x47a00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pinsrh_1",	"D,S,T",	0x4ba00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pinsrh_2",	"D,S,T",	0x47c00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pinsrh_2",	"D,S,T",	0x4bc00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pinsrh_3",	"D,S,T",	0x47e00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pinsrh_3",	"D,S,T",	0x4be00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pmaddhw",	"D,S,T",	0x45e00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pmaddhw",	"D,S,T",	0x4b60000e,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pmaxsh",	"D,S,T",	0x46800000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pmaxsh",	"D,S,T",	0x4b400008,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pmaxub",	"D,S,T",	0x46c00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pmaxub",	"D,S,T",	0x4b800008,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pminsh",	"D,S,T",	0x46a00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pminsh",	"D,S,T",	0x4b600008,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pminub",	"D,S,T",	0x46e00000,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pminub",	"D,S,T",	0x4ba00008,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pmovmskb",	"D,S",		0x46a00005,	0xffff003f,	RD_S|WR_D|FP_D,	0,	IL2E	},
+{"pmovmskb",	"D,S",		0x4ba0000f,	0xffff003f,	RD_S|WR_D|FP_D,	0,	IL2F	},
+{"pmulhuh",	"D,S,T",	0x46e00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pmulhuh",	"D,S,T",	0x4ba0000a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pmulhh",	"D,S,T",	0x46a00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pmulhh",	"D,S,T",	0x4b60000a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pmullh",	"D,S,T",	0x46800002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pmullh",	"D,S,T",	0x4b40000a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pmuluw",	"D,S,T",	0x46c00002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pmuluw",	"D,S,T",	0x4b80000a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"pasubub",	"D,S,T",	0x45a00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pasubub",	"D,S,T",	0x4b20000d,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"biadd",	"D,S",		0x46800005,	0xffff003f,	RD_S|WR_D|FP_D,	0,	IL2E	},
+{"biadd",	"D,S",		0x4b80000f,	0xffff003f,	RD_S|WR_D|FP_D,	0,	IL2F	},
+{"pshufh",	"D,S,T",	0x47000002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"pshufh",	"D,S,T",	0x4b000002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psllh",	"D,S,T",	0x46600002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psllh",	"D,S,T",	0x4b20000a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psllw",	"D,S,T",	0x46400002,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psllw",	"D,S,T",	0x4b00000a,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psrah",	"D,S,T",	0x46a00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psrah",	"D,S,T",	0x4b60000b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psraw",	"D,S,T",	0x46800003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psraw",	"D,S,T",	0x4b40000b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psrlh",	"D,S,T",	0x46600003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psrlh",	"D,S,T",	0x4b20000b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psrlw",	"D,S,T",	0x46400003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psrlw",	"D,S,T",	0x4b00000b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubb",	"D,S,T",	0x47c00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubb",	"D,S,T",	0x4bc00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubh",	"D,S,T",	0x47400001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubh",	"D,S,T",	0x4b400001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubw",	"D,S,T",	0x47600001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubw",	"D,S,T",	0x4b600001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubd",	"D,S,T",	0x47e00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubd",	"D,S,T",	0x4be00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubsb",	"D,S,T",	0x47800001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubsb",	"D,S,T",	0x4b800001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubsh",	"D,S,T",	0x47000001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubsh",	"D,S,T",	0x4b000001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubusb",	"D,S,T",	0x47a00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubusb",	"D,S,T",	0x4ba00001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"psubush",	"D,S,T",	0x47200001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"psubush",	"D,S,T",	0x4b200001,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"punpckhbh",	"D,S,T",	0x47600003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"punpckhbh",	"D,S,T",	0x4b600003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"punpckhhw",	"D,S,T",	0x47200003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"punpckhhw",	"D,S,T",	0x4b200003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"punpckhwd",	"D,S,T",	0x46e00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"punpckhwd",	"D,S,T",	0x4ba0000b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"punpcklbh",	"D,S,T",	0x47400003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"punpcklbh",	"D,S,T",	0x4b400003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"punpcklhw",	"D,S,T",	0x47000003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"punpcklhw",	"D,S,T",	0x4b000003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"punpcklwd",	"D,S,T",	0x46c00003,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2E	},
+{"punpcklwd",	"D,S,T",	0x4b80000b,	0xffe0003f,	RD_S|RD_T|WR_D|FP_D,	0,	IL2F	},
+{"sequ",	"S,T",		0x46800032,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2E	},
+{"sequ",	"S,T",		0x4b80000c,	0xffe007ff,	RD_S|RD_T|WR_CC|FP_D,	0,	IL2F	},
+/* No hazard protection on coprocessor instructions--they shouldn't
+   change the state of the processor and if they do it's up to the
+   user to put in nops as necessary.  These are at the end so that the
+   disassembler recognizes more specific versions first.  */
+{"c0",      "C",	0x42000000, 0xfe000000,	0,			0,		I1	},
+{"c1",      "C",	0x46000000, 0xfe000000,	0,			0,		I1	},
+{"c2",      "C",	0x4a000000, 0xfe000000,	0,			0,		I1	},
+{"c3",      "C",	0x4e000000, 0xfe000000,	0,			0,		I1	},
+{"cop0",     "C",	0,    (int) M_COP0,	INSN_MACRO,		0,		I1	},
+{"cop1",     "C",	0,    (int) M_COP1,	INSN_MACRO,		0,		I1	},
+{"cop2",     "C",	0,    (int) M_COP2,	INSN_MACRO,		0,		I1	},
+{"cop3",     "C",	0,    (int) M_COP3,	INSN_MACRO,		0,		I1	}
 };
 
 #define MIPS_NUM_OPCODES \
diff -Nur binutils-2.18.50.0.1/opcodes/po/Make-in binutils-stable/opcodes/po/Make-in
--- binutils-2.18.50.0.1/opcodes/po/Make-in	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/po/Make-in	2007-09-25 15:42:02.000000000 +0200
@@ -113,6 +113,7 @@
 install-exec:
 install-info:
 install-html:
+install-pdf:
 install-data: install-data-@USE_NLS@
 install-data-no: all
 install-data-yes: all
diff -Nur binutils-2.18.50.0.1/opcodes/po/nl.po binutils-stable/opcodes/po/nl.po
--- binutils-2.18.50.0.1/opcodes/po/nl.po	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/po/nl.po	2007-09-25 15:42:02.000000000 +0200
@@ -5,10 +5,10 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: opcodes 2.17.90\n"
+"Project-Id-Version: opcodes 2.16.93\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-05 09:17+0100\n"
-"PO-Revision-Date: 2007-08-27 17:13+0200\n"
+"POT-Creation-Date: 2005-10-25 10:50+0930\n"
+"PO-Revision-Date: 2007-07-12 21:50+0200\n"
 "Last-Translator: Tim Van Holder <tim.van.holder@telenet.be>\n"
 "Language-Team: Dutch <vertaling@vrijschrift.org>\n"
 "MIME-Version: 1.0\n"
@@ -26,115 +26,115 @@
 msgid "jump hint unaligned"
 msgstr "jump-hint niet uitgelijnd"
 
-#: arc-dis.c:77
+#: arc-dis.c:75
 msgid "Illegal limm reference in last instruction!\n"
 msgstr "Ongeldige limm-verwijzing in de laatste instructie!\n"
 
 # klinkt niet echt geweldig...
-#: arc-opc.c:386
+#: arc-opc.c:384
 msgid "unable to fit different valued constants into instruction"
 msgstr "kan constantes met verschillende waarden niet in instructie inpassen"
 
-#: arc-opc.c:395
+#: arc-opc.c:393
 msgid "auxiliary register not allowed here"
 msgstr "hulpregister hier niet toegestaan"
 
-#: arc-opc.c:401 arc-opc.c:418
+#: arc-opc.c:399 arc-opc.c:416
 msgid "attempt to set readonly register"
 msgstr "poging tot het instellen van een alleen-lezen register"
 
-#: arc-opc.c:406 arc-opc.c:423
+#: arc-opc.c:404 arc-opc.c:421
 msgid "attempt to read writeonly register"
 msgstr "poging tot uitlezen van alleen-schrijven register"
 
-#: arc-opc.c:428
+#: arc-opc.c:426
 #, c-format
 msgid "invalid register number `%d'"
 msgstr "Ongeldig registernummer `%d'"
 
-#: arc-opc.c:594 arc-opc.c:645 arc-opc.c:673
+#: arc-opc.c:592 arc-opc.c:643 arc-opc.c:671
 msgid "too many long constants"
 msgstr "te veel lange constantes"
 
 # of "bij opladen" ipv "in load"?
-#: arc-opc.c:668
+#: arc-opc.c:666
 msgid "to many shimms in load"
 msgstr "te veel shimms in load"
 
 #. Do we have a limm already?
-#: arc-opc.c:781
+#: arc-opc.c:779
 msgid "impossible store"
 msgstr "onmogelijke store"
 
-#: arc-opc.c:814
+#: arc-opc.c:812
 msgid "st operand error"
 msgstr "st operand-fout"
 
 # of "terugschrijven van adres"?
-#: arc-opc.c:818 arc-opc.c:860
+#: arc-opc.c:816 arc-opc.c:858
 msgid "address writeback not allowed"
 msgstr "address writeback niet toegestaan"
 
 # of beter 'store-waarde'?
-#: arc-opc.c:822
+#: arc-opc.c:820
 msgid "store value must be zero"
 msgstr "opslagwaarde moet nul zijn"
 
-#: arc-opc.c:847
+#: arc-opc.c:845
 msgid "invalid load/shimm insn"
 msgstr "ongeldige load/shimm insn"
 
-#: arc-opc.c:856
+#: arc-opc.c:854
 msgid "ld operand error"
 msgstr "ld operand-fout"
 
-#: arc-opc.c:943
+#: arc-opc.c:941
 msgid "jump flags, but no .f seen"
 msgstr "jump-vlaggen, maar geen .f gezien"
 
-#: arc-opc.c:946
+#: arc-opc.c:944
 msgid "jump flags, but no limm addr"
 msgstr "jump-vlaggen, maar geen limm addr"
 
-#: arc-opc.c:949
+#: arc-opc.c:947
 msgid "flag bits of jump address limm lost"
 msgstr "vlagbits van jump-adres limm gaan verloren"
 
-#: arc-opc.c:952
+#: arc-opc.c:950
 msgid "attempt to set HR bits"
 msgstr "poging tot instellen van HR bits"
 
-#: arc-opc.c:955
+#: arc-opc.c:953
 msgid "bad jump flags value"
 msgstr "slechte waarde van de jump-vlaggen"
 
-#: arc-opc.c:988
+#: arc-opc.c:986
 msgid "branch address not on 4 byte boundary"
 msgstr "branch-adres niet op 4-byte grens"
 
 # klinkt wankel...
-#: arc-opc.c:1024
+#: arc-opc.c:1022
 msgid "must specify .jd or no nullify suffix"
 msgstr "moet .jd of geen nullify-suffix opgeven"
 
-#: arm-dis.c:1808
+#: arm-dis.c:1302
 msgid "<illegal precision>"
 msgstr "<ongeldige precisie>"
 
 # Hoort set bij 'name', of bij 'register name' - of is het een voltood deelwoord?
 #. XXX - should break 'option' at following delimiter.
-#: arm-dis.c:3818
+#: arm-dis.c:2746
 #, c-format
 msgid "Unrecognised register name set: %s\n"
 msgstr "Registernaam-verzameling niet herkend: %s\n"
 
 #. XXX - should break 'option' at following delimiter.
-#: arm-dis.c:3826
+#: arm-dis.c:2754
 #, c-format
 msgid "Unrecognised disassembler option: %s\n"
 msgstr "Disassembler-optie niet herkend: %s\n"
 
-#: arm-dis.c:4226
+#: arm-dis.c:2916
 #, c-format
 msgid ""
 "\n"
@@ -145,25 +145,25 @@
 "De volgende ARM-specifieke disassembler-opties worden ondersteund voor gebruik\n"
 "via de -M optie:\n"
 
-#: avr-dis.c:115 avr-dis.c:125
+#: avr-dis.c:109 avr-dis.c:119
 #, c-format
 msgid "undefined"
 msgstr "niet gedefinieerd"
 
-#: avr-dis.c:187
+#: avr-dis.c:176
 #, c-format
 msgid "Internal disassembler error"
 msgstr "Interne fout in de disassembler"
 
 # Vertaling voor constraint? 'begrenzing' misschien?
-#: avr-dis.c:236
+#: avr-dis.c:225
 #, c-format
 msgid "unknown constraint `%c'"
 msgstr "onbekende constraint `%c'"
 
-#: cgen-asm.c:336 fr30-ibld.c:200 frv-ibld.c:200 ip2k-ibld.c:200
-#: iq2000-ibld.c:200 m32c-ibld.c:200 m32r-ibld.c:200 mep-ibld.c:200
-#: mt-ibld.c:200 openrisc-ibld.c:200 xc16x-ibld.c:200 xstormy16-ibld.c:200
+#: cgen-asm.c:336 fr30-ibld.c:192 frv-ibld.c:192 ip2k-ibld.c:192
+#: iq2000-ibld.c:192 m32c-ibld.c:192 m32r-ibld.c:192 ms1-ibld.c:192
+#: openrisc-ibld.c:192 xstormy16-ibld.c:192
 #, c-format
 msgid "operand out of range (%ld not between %ld and %ld)"
 msgstr "operand buiten bereik (%ld niet tussen %ld en %ld)"
@@ -173,333 +173,249 @@
 msgid "operand out of range (%lu not between %lu and %lu)"
 msgstr "operand buiten bereik (%lu niet tussen %lu en %lu)"
 
-#: d30v-dis.c:255
+#: d30v-dis.c:252
 #, c-format
 msgid "<unknown register %d>"
 msgstr "<onbekend register %d>"
 
 #. Can't happen.
-#: dis-buf.c:59
+#: dis-buf.c:57
 #, c-format
 msgid "Unknown error %d\n"
 msgstr "Onbekende fout %d\n"
 
 # Slecht vertaald. Wat is de geijkte vertaling voor 'out of bounds'?
-#: dis-buf.c:68
+#: dis-buf.c:66
 #, c-format
 msgid "Address 0x%s is out of bounds.\n"
 msgstr "Adres 0x%s is buiten de perken.\n"
 
-#: fr30-asm.c:93 m32c-asm.c:877 m32c-asm.c:884
+#: fr30-asm.c:92 m32c-asm.c:782 m32c-asm.c:789
 msgid "Register number is not valid"
 msgstr "Registernummer is ongeldig"
 
-#: fr30-asm.c:95
+#: fr30-asm.c:94
 msgid "Register must be between r0 and r7"
 msgstr "Register moet tussen r0 en r7 liggen"
 
-#: fr30-asm.c:97
+#: fr30-asm.c:96
 msgid "Register must be between r8 and r15"
 msgstr "Register moet tussen r8 en r15 liggen"
 
-#: fr30-asm.c:116 m32c-asm.c:915
+#: fr30-asm.c:115 m32c-asm.c:820
 msgid "Register list is not valid"
 msgstr "Registerlijst is ongeldig"
 
 # Klinkt niet echt geweldig, maar ja...
-#: fr30-asm.c:310 frv-asm.c:1263 ip2k-asm.c:511 iq2000-asm.c:459
-#: m32c-asm.c:1589 m32r-asm.c:328 mep-asm.c:1001 mt-asm.c:595
-#: openrisc-asm.c:241 xc16x-asm.c:375 xstormy16-asm.c:276
+#: fr30-asm.c:309 frv-asm.c:1262 ip2k-asm.c:510 iq2000-asm.c:456
+#: m32c-asm.c:1476 m32r-asm.c:323 ms1-asm.c:546 openrisc-asm.c:240
+#: xstormy16-asm.c:275
 #, c-format
 msgid "Unrecognized field %d while parsing.\n"
 msgstr "Veld %d niet herkend tijdens analyse.\n"
 
-#: fr30-asm.c:361 frv-asm.c:1314 ip2k-asm.c:562 iq2000-asm.c:510
-#: m32c-asm.c:1640 m32r-asm.c:379 mep-asm.c:1052 mt-asm.c:646
-#: openrisc-asm.c:292 xc16x-asm.c:426 xstormy16-asm.c:327
+#: fr30-asm.c:357 frv-asm.c:1310 ip2k-asm.c:558 iq2000-asm.c:504
+#: m32c-asm.c:1524 m32r-asm.c:371 ms1-asm.c:594 openrisc-asm.c:288
+#: xstormy16-asm.c:323
 msgid "missing mnemonic in syntax string"
 msgstr "mnemonic ontbreekt in syntaxstring"
 
 #. We couldn't parse it.
-#: fr30-asm.c:496 fr30-asm.c:500 fr30-asm.c:587 fr30-asm.c:688 frv-asm.c:1449
-#: frv-asm.c:1453 frv-asm.c:1540 frv-asm.c:1641 ip2k-asm.c:697 ip2k-asm.c:701
-#: ip2k-asm.c:788 ip2k-asm.c:889 iq2000-asm.c:645 iq2000-asm.c:649
-#: iq2000-asm.c:736 iq2000-asm.c:837 m32c-asm.c:1775 m32c-asm.c:1779
-#: m32c-asm.c:1866 m32c-asm.c:1967 m32r-asm.c:514 m32r-asm.c:518
-#: m32r-asm.c:605 m32r-asm.c:706 mep-asm.c:1187 mep-asm.c:1191 mep-asm.c:1278
-#: mep-asm.c:1379 mt-asm.c:781 mt-asm.c:785 mt-asm.c:872 mt-asm.c:973
-#: openrisc-asm.c:427 openrisc-asm.c:431 openrisc-asm.c:518 openrisc-asm.c:619
-#: xc16x-asm.c:561 xc16x-asm.c:565 xc16x-asm.c:652 xc16x-asm.c:753
-#: xstormy16-asm.c:462 xstormy16-asm.c:466 xstormy16-asm.c:553
-#: xstormy16-asm.c:654
+#: fr30-asm.c:492 fr30-asm.c:496 fr30-asm.c:583 fr30-asm.c:684 frv-asm.c:1445
+#: frv-asm.c:1449 frv-asm.c:1536 frv-asm.c:1637 ip2k-asm.c:693 ip2k-asm.c:697
+#: ip2k-asm.c:784 ip2k-asm.c:885 iq2000-asm.c:639 iq2000-asm.c:643
+#: iq2000-asm.c:730 iq2000-asm.c:831 m32c-asm.c:1659 m32c-asm.c:1663
+#: m32c-asm.c:1750 m32c-asm.c:1851 m32r-asm.c:506 m32r-asm.c:510
+#: m32r-asm.c:597 m32r-asm.c:698 ms1-asm.c:729 ms1-asm.c:733 ms1-asm.c:820
+#: ms1-asm.c:921 openrisc-asm.c:423 openrisc-asm.c:427 openrisc-asm.c:514
+#: openrisc-asm.c:615 xstormy16-asm.c:458 xstormy16-asm.c:462
+#: xstormy16-asm.c:549 xstormy16-asm.c:650
 msgid "unrecognized instruction"
 msgstr "instructie niet herkend"
 
-#: fr30-asm.c:543 frv-asm.c:1496 ip2k-asm.c:744 iq2000-asm.c:692
-#: m32c-asm.c:1822 m32r-asm.c:561 mep-asm.c:1234 mt-asm.c:828
-#: openrisc-asm.c:474 xc16x-asm.c:608 xstormy16-asm.c:509
+#: fr30-asm.c:539 frv-asm.c:1492 ip2k-asm.c:740 iq2000-asm.c:686
+#: m32c-asm.c:1706 m32r-asm.c:553 ms1-asm.c:776 openrisc-asm.c:470
+#: xstormy16-asm.c:505
 #, c-format
 msgid "syntax error (expected char `%c', found `%c')"
 msgstr "syntaxfout (verwachtte `%c', vond `%c')"
 
-#: fr30-asm.c:553 frv-asm.c:1506 ip2k-asm.c:754 iq2000-asm.c:702
-#: m32c-asm.c:1832 m32r-asm.c:571 mep-asm.c:1244 mt-asm.c:838
-#: openrisc-asm.c:484 xc16x-asm.c:618 xstormy16-asm.c:519
+#: fr30-asm.c:549 frv-asm.c:1502 ip2k-asm.c:750 iq2000-asm.c:696
+#: m32c-asm.c:1716 m32r-asm.c:563 ms1-asm.c:786 openrisc-asm.c:480
+#: xstormy16-asm.c:515
 #, c-format
 msgid "syntax error (expected char `%c', found end of instruction)"
 msgstr "syntaxfout (verwachtte `%c', vond het einde van de instructie)"
 
-#: fr30-asm.c:581 frv-asm.c:1534 ip2k-asm.c:782 iq2000-asm.c:730
-#: m32c-asm.c:1860 m32r-asm.c:599 mep-asm.c:1272 mt-asm.c:866
-#: openrisc-asm.c:512 xc16x-asm.c:646 xstormy16-asm.c:547
+#: fr30-asm.c:577 frv-asm.c:1530 ip2k-asm.c:778 iq2000-asm.c:724
+#: m32c-asm.c:1744 m32r-asm.c:591 ms1-asm.c:814 openrisc-asm.c:508
+#: xstormy16-asm.c:543
 msgid "junk at end of line"
 msgstr "rommel aan einde van lijn"
 
-#: fr30-asm.c:687 frv-asm.c:1640 ip2k-asm.c:888 iq2000-asm.c:836
-#: m32c-asm.c:1966 m32r-asm.c:705 mep-asm.c:1378 mt-asm.c:972
-#: openrisc-asm.c:618 xc16x-asm.c:752 xstormy16-asm.c:653
+#: fr30-asm.c:683 frv-asm.c:1636 ip2k-asm.c:884 iq2000-asm.c:830
+#: m32c-asm.c:1850 m32r-asm.c:697 ms1-asm.c:920 openrisc-asm.c:614
+#: xstormy16-asm.c:649
 msgid "unrecognized form of instruction"
 msgstr "instructievorm niet herkend"
 
-#: fr30-asm.c:699 frv-asm.c:1652 ip2k-asm.c:900 iq2000-asm.c:848
-#: m32c-asm.c:1978 m32r-asm.c:717 mep-asm.c:1390 mt-asm.c:984
-#: openrisc-asm.c:630 xc16x-asm.c:764 xstormy16-asm.c:665
+#: fr30-asm.c:695 frv-asm.c:1648 ip2k-asm.c:896 iq2000-asm.c:842
+#: m32c-asm.c:1862 m32r-asm.c:709 ms1-asm.c:932 openrisc-asm.c:626
+#: xstormy16-asm.c:661
 #, c-format
 msgid "bad instruction `%.50s...'"
 msgstr "slechte instructie `%s.50s...'"
 
-#: fr30-asm.c:702 frv-asm.c:1655 ip2k-asm.c:903 iq2000-asm.c:851
-#: m32c-asm.c:1981 m32r-asm.c:720 mep-asm.c:1393 mt-asm.c:987
-#: openrisc-asm.c:633 xc16x-asm.c:767 xstormy16-asm.c:668
+#: fr30-asm.c:698 frv-asm.c:1651 ip2k-asm.c:899 iq2000-asm.c:845
+#: m32c-asm.c:1865 m32r-asm.c:712 ms1-asm.c:935 openrisc-asm.c:629
+#: xstormy16-asm.c:664
 #, c-format
 msgid "bad instruction `%.50s'"
 msgstr "slechte instructie `%s.50s'"
 
 #. Default text to print if an instruction isn't recognized.
 #: fr30-dis.c:41 frv-dis.c:41 ip2k-dis.c:41 iq2000-dis.c:41 m32c-dis.c:41
-#: m32r-dis.c:41 mep-dis.c:41 mmix-dis.c:278 mt-dis.c:41 openrisc-dis.c:41
-#: xc16x-dis.c:41 xstormy16-dis.c:41
+#: m32r-dis.c:41 mmix-dis.c:278 ms1-dis.c:41 openrisc-dis.c:41
+#: xstormy16-dis.c:41
 msgid "*unknown*"
 msgstr "*onbekend*"
 
-#: fr30-dis.c:299 frv-dis.c:396 ip2k-dis.c:288 iq2000-dis.c:189 m32c-dis.c:891
-#: m32r-dis.c:256 mep-dis.c:776 mt-dis.c:290 openrisc-dis.c:135
-#: xc16x-dis.c:375 xstormy16-dis.c:168
+#: fr30-dis.c:299 frv-dis.c:396 ip2k-dis.c:288 iq2000-dis.c:189 m32c-dis.c:860
+#: m32r-dis.c:256 ms1-dis.c:258 openrisc-dis.c:135 xstormy16-dis.c:168
 #, c-format
 msgid "Unrecognized field %d while printing insn.\n"
 msgstr "Veld %d niet herkend bij het afdrukken van een insn.\n"
 
 #: fr30-ibld.c:163 frv-ibld.c:163 ip2k-ibld.c:163 iq2000-ibld.c:163
-#: m32c-ibld.c:163 m32r-ibld.c:163 mep-ibld.c:163 mt-ibld.c:163
-#: openrisc-ibld.c:163 xc16x-ibld.c:163 xstormy16-ibld.c:163
+#: m32c-ibld.c:163 m32r-ibld.c:163 ms1-ibld.c:163 openrisc-ibld.c:163
+#: xstormy16-ibld.c:163
 #, c-format
 msgid "operand out of range (%ld not between %ld and %lu)"
 msgstr "operand buiten bereik (%ld niet tussen %ld en %lu)"
 
-#: fr30-ibld.c:184 frv-ibld.c:184 ip2k-ibld.c:184 iq2000-ibld.c:184
-#: m32c-ibld.c:184 m32r-ibld.c:184 mep-ibld.c:184 mt-ibld.c:184
-#: openrisc-ibld.c:184 xc16x-ibld.c:184 xstormy16-ibld.c:184
-#, c-format
-msgid "operand out of range (0x%lx not between 0 and 0x%lx)"
-msgstr "operand buiten bereik (0x%lx niet tussen 0 en 0x%lx)"
-
-#: fr30-ibld.c:726 frv-ibld.c:852 ip2k-ibld.c:603 iq2000-ibld.c:709
-#: m32c-ibld.c:1727 m32r-ibld.c:661 mep-ibld.c:1024 mt-ibld.c:745
-#: openrisc-ibld.c:629 xc16x-ibld.c:748 xstormy16-ibld.c:674
+#: fr30-ibld.c:176 frv-ibld.c:176 ip2k-ibld.c:176 iq2000-ibld.c:176
+#: m32c-ibld.c:176 m32r-ibld.c:176 ms1-ibld.c:176 openrisc-ibld.c:176
+#: xstormy16-ibld.c:176
+#, c-format
+msgid "operand out of range (%lu not between 0 and %lu)"
+msgstr "operand buiten bereik (%lu niet tussen 0 en %lu)"
+
+#: fr30-ibld.c:719 frv-ibld.c:845 ip2k-ibld.c:596 iq2000-ibld.c:702
+#: m32c-ibld.c:1668 m32r-ibld.c:654 ms1-ibld.c:713 openrisc-ibld.c:622
+#: xstormy16-ibld.c:667
 #, c-format
 msgid "Unrecognized field %d while building insn.\n"
 msgstr "Veld %d niet herkend bij het opbouwen van een insn.\n"
 
-#: fr30-ibld.c:931 frv-ibld.c:1169 ip2k-ibld.c:678 iq2000-ibld.c:884
-#: m32c-ibld.c:2888 m32r-ibld.c:798 mep-ibld.c:1444 mt-ibld.c:965
-#: openrisc-ibld.c:729 xc16x-ibld.c:968 xstormy16-ibld.c:820
+#: fr30-ibld.c:924 frv-ibld.c:1162 ip2k-ibld.c:671 iq2000-ibld.c:877
+#: m32c-ibld.c:2780 m32r-ibld.c:791 ms1-ibld.c:907 openrisc-ibld.c:722
+#: xstormy16-ibld.c:813
 #, c-format
 msgid "Unrecognized field %d while decoding insn.\n"
 msgstr "Veld %d niet herkend bij het decoderen van een insn.\n"
 
-#: fr30-ibld.c:1077 frv-ibld.c:1447 ip2k-ibld.c:752 iq2000-ibld.c:1015
-#: m32c-ibld.c:3505 m32r-ibld.c:911 mep-ibld.c:1737 mt-ibld.c:1165
-#: openrisc-ibld.c:806 xc16x-ibld.c:1189 xstormy16-ibld.c:930
+#: fr30-ibld.c:1070 frv-ibld.c:1440 ip2k-ibld.c:745 iq2000-ibld.c:1008
+#: m32c-ibld.c:3379 m32r-ibld.c:904 ms1-ibld.c:1086 openrisc-ibld.c:799
+#: xstormy16-ibld.c:923
 #, c-format
 msgid "Unrecognized field %d while getting int operand.\n"
 msgstr "Veld %d niet herkend bij het ophalen van een int-operand.\n"
 
-#: fr30-ibld.c:1205 frv-ibld.c:1707 ip2k-ibld.c:808 iq2000-ibld.c:1128
-#: m32c-ibld.c:4104 m32r-ibld.c:1006 mep-ibld.c:2012 mt-ibld.c:1347
-#: openrisc-ibld.c:865 xc16x-ibld.c:1392 xstormy16-ibld.c:1022
+#: fr30-ibld.c:1198 frv-ibld.c:1700 ip2k-ibld.c:801 iq2000-ibld.c:1121
+#: m32c-ibld.c:3960 m32r-ibld.c:999 ms1-ibld.c:1247 openrisc-ibld.c:858
+#: xstormy16-ibld.c:1015
 #, c-format
 msgid "Unrecognized field %d while getting vma operand.\n"
 msgstr "Veld %d niet herkend bij het ophalen van een vma-operand.\n"
 
-#: fr30-ibld.c:1336 frv-ibld.c:1974 ip2k-ibld.c:867 iq2000-ibld.c:1248
-#: m32c-ibld.c:4691 m32r-ibld.c:1107 mep-ibld.c:2271 mt-ibld.c:1536
-#: openrisc-ibld.c:931 xc16x-ibld.c:1596 xstormy16-ibld.c:1121
+#: fr30-ibld.c:1329 frv-ibld.c:1967 ip2k-ibld.c:860 iq2000-ibld.c:1241
+#: m32c-ibld.c:4529 m32r-ibld.c:1100 ms1-ibld.c:1415 openrisc-ibld.c:924
+#: xstormy16-ibld.c:1114
 #, c-format
 msgid "Unrecognized field %d while setting int operand.\n"
 msgstr "Veld %d niet herkend bij het instellen van een int-operand.\n"
 
-#: fr30-ibld.c:1457 frv-ibld.c:2231 ip2k-ibld.c:916 iq2000-ibld.c:1358
-#: m32c-ibld.c:5268 m32r-ibld.c:1198 mep-ibld.c:2520 mt-ibld.c:1715
-#: openrisc-ibld.c:987 xc16x-ibld.c:1790 xstormy16-ibld.c:1210
+#: fr30-ibld.c:1450 frv-ibld.c:2224 ip2k-ibld.c:909 iq2000-ibld.c:1351
+#: m32c-ibld.c:5088 m32r-ibld.c:1191 ms1-ibld.c:1573 openrisc-ibld.c:980
+#: xstormy16-ibld.c:1203
 #, c-format
 msgid "Unrecognized field %d while setting vma operand.\n"
 msgstr "Veld %d niet herkend bij het instellen van een vma-operand.\n"
 
-#: frv-asm.c:608
+#: frv-asm.c:607
 msgid "missing `]'"
 msgstr "`]' ontbreekt"
 
 # of moet 'immediate' behouden worden?
-#: frv-asm.c:611 frv-asm.c:621
+#: frv-asm.c:610 frv-asm.c:620
 msgid "Special purpose register number is out of range"
 msgstr "Nummer van special-purpose register is buiten bereik"
 
-#: frv-asm.c:908
+#: frv-asm.c:907
 msgid "Value of A operand must be 0 or 1"
 msgstr "Waarde van A-operand moet 0 of 1 zijn"
 
-#: frv-asm.c:944
+#: frv-asm.c:943
 msgid "register number must be even"
 msgstr "registernummer moet even zijn"
 
 #. -- assembler routines inserted here.
 #. -- asm.c
-#: frv-asm.c:972 iq2000-asm.c:56 m32c-asm.c:141 m32c-asm.c:237 m32c-asm.c:279
-#: m32c-asm.c:338 m32c-asm.c:360 m32r-asm.c:53 mep-asm.c:232 mep-asm.c:250
-#: mep-asm.c:265 mep-asm.c:280 mep-asm.c:292 openrisc-asm.c:54
+#: frv-asm.c:971 iq2000-asm.c:55 m32c-asm.c:140 m32c-asm.c:211 m32c-asm.c:253
+#: m32c-asm.c:312 m32c-asm.c:334 m32r-asm.c:52 openrisc-asm.c:53
 msgid "missing `)'"
 msgstr "`)' ontbreekt"
 
-#: h8300-dis.c:327
+#: h8300-dis.c:325
 #, c-format
 msgid "Hmmmm 0x%x"
 msgstr "Hmmmm 0x%x"
 
-#: h8300-dis.c:708
+#: h8300-dis.c:706
 #, c-format
 msgid "Don't understand 0x%x \n"
 msgstr "Ik begrijp 0x%x niet\n"
 
-#: h8500-dis.c:124
+#: h8500-dis.c:122
 #, c-format
 msgid "can't cope with insert %d\n"
 msgstr "kan niet omgaan met insert %d\n"
 
 #. Couldn't understand anything.
-#: h8500-dis.c:324
+#: h8500-dis.c:322
 #, c-format
 msgid "%02x\t\t*unknown*"
 msgstr "%02x\t\t*onbekend*"
 
-#: i386-dis.c:3196
+#: i386-dis.c:1742
 msgid "<internal disassembler error>"
 msgstr "<interne fout in de disassembler>"
 
-#: i386-dis.c:3423
-#, c-format
-msgid ""
-"\n"
-"The following i386/x86-64 specific disassembler options are supported for use\n"
-"with the -M switch (multiple options should be separated by commas):\n"
-msgstr ""
-"\n"
-"De volgende i386/x86-64-specifieke disassembler-opties worden ondersteund voor\n"
-"gebruik via de -M optie (meerdere opties moeten door komma's gescheiden\n"
-"worden):\n"
-
-#: i386-dis.c:3427
-#, c-format
-msgid "  x86-64      Disassemble in 64bit mode\n"
-msgstr "  x86-64      Disassembleer in 64-bits modus\n"
-
-#: i386-dis.c:3428
-#, c-format
-msgid "  i386        Disassemble in 32bit mode\n"
-msgstr "  i386        Disassembleer in 32-bits modus\n"
-
-#: i386-dis.c:3429
-#, c-format
-msgid "  i8086       Disassemble in 16bit mode\n"
-msgstr "  i8086       Disassembleer in 16-bits modus\n"
-
-#: i386-dis.c:3430
-#, c-format
-msgid "  att         Display instruction in AT&T syntax\n"
-msgstr "  att         Toon instructie in AT&T syntax\n"
-
-#: i386-dis.c:3431
-#, c-format
-msgid "  intel       Display instruction in Intel syntax\n"
-msgstr "  intel       Toon instructie in Intel syntax\n"
-
-#: i386-dis.c:3432
-#, c-format
-msgid "  addr64      Assume 64bit address size\n"
-msgstr "  addr64      Ga uit van een 64-bits adresgrootte\n"
-
-#: i386-dis.c:3433
-#, c-format
-msgid "  addr32      Assume 32bit address size\n"
-msgstr "  addr32      Ga uit van een 32-bits adresgrootte\n"
-
-#: i386-dis.c:3434
-#, c-format
-msgid "  addr16      Assume 16bit address size\n"
-msgstr "  addr16      Ga uit van een 16-bits adresgrootte\n"
-
-#: i386-dis.c:3435
-#, c-format
-msgid "  data32      Assume 32bit data size\n"
-msgstr "  data32      Ga uit van een 32-bits datagrootte\n"
-
-#: i386-dis.c:3436
-#, c-format
-msgid "  data16      Assume 16bit data size\n"
-msgstr "  data16      Ga uit van een 16-bits datagrootte\n"
-
-#: i386-dis.c:3437
-#, c-format
-msgid "  suffix      Always display instruction suffix in AT&T syntax\n"
-msgstr "  suffix      Toon altijd de instructiesuffix in AT&T syntax\n"
-
-#: i386-gen.c:42 ia64-gen.c:307
+#: ia64-gen.c:297
 #, c-format
 msgid "%s: Error: "
 msgstr "%s: Fout: "
 
-#: i386-gen.c:109
-msgid "can't find i386-opc.tbl for reading\n"
-msgstr "kan invoerbestand i386-opc.tbl niet vinden\n"
-
-#: i386-gen.c:260
-msgid "can't find i386-reg.tbl for reading\n"
-msgstr "kan invoerbestand i386-reg.tbl niet vinden\n"
-
-#: i386-gen.c:386 ia64-gen.c:2841
-#, c-format
-msgid "unable to change directory to \"%s\", errno = %s\n"
-msgstr "kan niet naar directory \"%s\" gaan, errno = %s\n"
-
-#: ia64-gen.c:320
+#: ia64-gen.c:310
 #, c-format
 msgid "%s: Warning: "
 msgstr "%s: Let Op: "
 
-#: ia64-gen.c:506 ia64-gen.c:740
+#: ia64-gen.c:496 ia64-gen.c:730
 #, c-format
 msgid "multiple note %s not handled\n"
 msgstr "meervoudige noot %s wordt niet opgevangen\n"
 
-#: ia64-gen.c:617
+#: ia64-gen.c:607
 msgid "can't find ia64-ic.tbl for reading\n"
 msgstr "kan invoerbestand ia64-ic.tbl niet vinden\n"
 
-#: ia64-gen.c:822
+#: ia64-gen.c:812
 #, c-format
 msgid "can't find %s for reading\n"
 msgstr "kan invoerbestand %s niet vinden\n"
 
-#: ia64-gen.c:1046
+#: ia64-gen.c:1036
 #, c-format
 msgid ""
 "most recent format '%s'\n"
@@ -508,244 +424,235 @@
 "het meest recente formaat '%s'\n"
 "lijkt meer beperkend dan '%s'\n"
 
-#: ia64-gen.c:1057
+#: ia64-gen.c:1047
 #, c-format
 msgid "overlapping field %s->%s\n"
 msgstr "overlappend veld %s->%s\n"
 
-#: ia64-gen.c:1254
+#: ia64-gen.c:1244
 #, c-format
 msgid "overwriting note %d with note %d (IC:%s)\n"
 msgstr "noot %d wordt overschreven door noot %d (IC:%s)\n"
 
-#: ia64-gen.c:1455
+#: ia64-gen.c:1443
 #, c-format
 msgid "don't know how to specify %% dependency %s\n"
 msgstr "ik weet niet hoe ik de %%-dependency %s moet opgeven\n"
 
-#: ia64-gen.c:1477
+#: ia64-gen.c:1465
 #, c-format
 msgid "Don't know how to specify # dependency %s\n"
 msgstr "Ik weet niet hoe ik de #-dependency %s moet opgeven\n"
 
-#: ia64-gen.c:1516
+#: ia64-gen.c:1504
 #, c-format
 msgid "IC:%s [%s] has no terminals or sub-classes\n"
 msgstr "IC:%s [%s] heeft geen eindsymbolen of subklassen\n"
 
-#: ia64-gen.c:1519
+#: ia64-gen.c:1507
 #, c-format
 msgid "IC:%s has no terminals or sub-classes\n"
 msgstr "IC:%s heeft geen eindsymbolen of subklassen\n"
 
-#: ia64-gen.c:1528
+#: ia64-gen.c:1516
 #, c-format
 msgid "no insns mapped directly to terminal IC %s [%s]"
 msgstr "er zijn geen insns die rechtstreeks naar eindsymbool IC %s [%s] vertaald worden"
 
-#: ia64-gen.c:1531
+#: ia64-gen.c:1519
 #, c-format
 msgid "no insns mapped directly to terminal IC %s\n"
 msgstr "er zijn geen insns die rechtstreeks naar eindsymbool IC %s vertaald worden\n"
 
-#: ia64-gen.c:1542
+#: ia64-gen.c:1530
 #, c-format
 msgid "class %s is defined but not used\n"
 msgstr "klasse %s is gedefinieerd maar wordt niet gebruikt\n"
 
-#: ia64-gen.c:1553
+#: ia64-gen.c:1541
 #, c-format
 msgid "Warning: rsrc %s (%s) has no chks%s\n"
 msgstr "Let Op: rsrc %s (%s) heeft geen chks%s\n"
 
-#: ia64-gen.c:1557
+#: ia64-gen.c:1545
 #, c-format
 msgid "rsrc %s (%s) has no regs\n"
 msgstr "rsrc %s (%s) heeft geen regs\n"
 
-#: ia64-gen.c:2469
+#: ia64-gen.c:2444
 #, c-format
 msgid "IC note %d in opcode %s (IC:%s) conflicts with resource %s note %d\n"
 msgstr "IC noot %d in opcode %s (IC:%s) geeft een conflict met resource %s noot %d\n"
 
-#: ia64-gen.c:2497
+#: ia64-gen.c:2472
 #, c-format
 msgid "IC note %d for opcode %s (IC:%s) conflicts with resource %s note %d\n"
 msgstr "IC noot %d voor opcode %s (IC:%s) geeft een conflict met resource %s noot %d\n"
 
-#: ia64-gen.c:2511
+#: ia64-gen.c:2486
 #, c-format
 msgid "opcode %s has no class (ops %d %d %d)\n"
 msgstr "opcode %s heeft geen klasse (ops %d %d %d)\n"
 
+#: ia64-gen.c:2816
+#, c-format
+msgid "unable to change directory to \"%s\", errno = %s\n"
+msgstr "kan niet naar directory \"%s\" gaan, errno = %s\n"
+
 #. We've been passed a w.  Return with an error message so that
 #. cgen will try the next parsing option.
-#: ip2k-asm.c:81
+#: ip2k-asm.c:80
 msgid "W keyword invalid in FR operand slot."
 msgstr "keyword W is ongeldig in operand-slot FR"
 
 #. Invalid offset present.
-#: ip2k-asm.c:106
+#: ip2k-asm.c:105
 msgid "offset(IP) is not a valid form"
 msgstr "offset(IP) is geen geldige vorm"
 
 #. Found something there in front of (DP) but it's out
 #. of range.
-#: ip2k-asm.c:154
+#: ip2k-asm.c:153
 msgid "(DP) offset out of range."
 msgstr "(DP) offset buiten bereik"
 
 #. Found something there in front of (SP) but it's out
 #. of range.
-#: ip2k-asm.c:195
+#: ip2k-asm.c:194
 msgid "(SP) offset out of range."
 msgstr "(SP) offset buiten bereik"
 
-#: ip2k-asm.c:211
+#: ip2k-asm.c:210
 msgid "illegal use of parentheses"
 msgstr "ongeldig gebruik van haakjes"
 
-#: ip2k-asm.c:218
+#: ip2k-asm.c:217
 msgid "operand out of range (not between 1 and 255)"
 msgstr "operand buiten bereik (niet tussen 1 en 255)"
 
 #. Something is very wrong. opindex has to be one of the above.
-#: ip2k-asm.c:242
+#: ip2k-asm.c:241
 msgid "parse_addr16: invalid opindex."
 msgstr "parse_addr16: ongeldige opindex."
 
-#: ip2k-asm.c:296
+#: ip2k-asm.c:295
 msgid "Byte address required. - must be even."
 msgstr "Byte-adres vereist. - moet even zijn."
 
-#: ip2k-asm.c:305
+#: ip2k-asm.c:304
 msgid "cgen_parse_address returned a symbol. Literal required."
 msgstr "cgen_parse_address gaf een symbool terug terwijl een letterlijke waarde vereist is."
 
-#: ip2k-asm.c:360
+#: ip2k-asm.c:359
 msgid "percent-operator operand is not a symbol"
 msgstr "operand van percent-operator is geen symbool"
 
-#: ip2k-asm.c:413
+#: ip2k-asm.c:412
 msgid "Attempt to find bit index of 0"
 msgstr "Poging tot vinden van bit-index van 0"
 
-#: iq2000-asm.c:112 iq2000-asm.c:142
+#: iq2000-asm.c:111 iq2000-asm.c:141
 msgid "immediate value cannot be register"
 msgstr "onmiddellijke waarde kan geen register zijn"
 
 # of moet 'immediate' behouden worden?
-#: iq2000-asm.c:123 iq2000-asm.c:153
+#: iq2000-asm.c:122 iq2000-asm.c:152
 msgid "immediate value out of range"
 msgstr "onmiddellijke waarde is buiten bereik"
 
-#: iq2000-asm.c:182
+#: iq2000-asm.c:181
 msgid "21-bit offset out of range"
 msgstr "21-bit offset is buiten bereik"
 
-#: m10200-dis.c:158 m10300-dis.c:582
+#: m10200-dis.c:156 m10300-dis.c:580
 #, c-format
 msgid "unknown\t0x%04lx"
 msgstr "onbekend\t0x%04lx"
 
-#: m10200-dis.c:328
+#: m10200-dis.c:326
 #, c-format
 msgid "unknown\t0x%02lx"
 msgstr "onbekend\t0x%02lx"
 
 # Correcte vertaling van "imm:6 immediate"?
-#: m32c-asm.c:117
+#: m32c-asm.c:116
 msgid "imm:6 immediate is out of range"
 msgstr "onmiddellijke waarde van imm:6 is buiten bereik"
 
-#: m32c-asm.c:147
+#: m32c-asm.c:146
 #, c-format
 msgid "%dsp8() takes a symbolic address, not a number"
 msgstr "%dsp8() verwacht een symbolisch adres als argument, geen getal"
 
 # Correcte vertaling van "dsp:8 immediate"?
-#: m32c-asm.c:160 m32c-asm.c:164 m32c-asm.c:255
+#: m32c-asm.c:159 m32c-asm.c:163 m32c-asm.c:229
 msgid "dsp:8 immediate is out of range"
 msgstr "onmiddellijke waarde van dsp:8 is buiten bereik"
 
 # of moet 'immediate' behouden worden?
-#: m32c-asm.c:185 m32c-asm.c:189
+#: m32c-asm.c:184 m32c-asm.c:188
 msgid "Immediate is out of range -8 to 7"
 msgstr "onmiddellijke waarde is buiten bereik (-8 tot 7)"
 
-# of moet 'immediate' behouden worden?
-#: m32c-asm.c:210 m32c-asm.c:214
-msgid "Immediate is out of range -7 to 8"
-msgstr "onmiddellijke waarde is buiten bereik (-7 tot 8)"
-
-#: m32c-asm.c:285
+#: m32c-asm.c:259
 #, c-format
 msgid "%dsp16() takes a symbolic address, not a number"
 msgstr "%dsp16() verwacht een symbolisch adres als argument, geen getal"
 
 # Correcte vertaling van "dsp:16 immediate"?
-#: m32c-asm.c:308 m32c-asm.c:315 m32c-asm.c:378
+#: m32c-asm.c:282 m32c-asm.c:289 m32c-asm.c:352
 msgid "dsp:16 immediate is out of range"
 msgstr "onmiddellijke waarde van dsp:16 is buiten bereik"
 
 # Correcte vertaling van "dsp:20 immediate"?
-#: m32c-asm.c:404
+#: m32c-asm.c:378
 msgid "dsp:20 immediate is out of range"
 msgstr "onmiddellijke waarde van dsp:20 is buiten bereik"
 
 # Correcte vertaling van "dsp:24 immediate"?
-#: m32c-asm.c:430 m32c-asm.c:450
+#: m32c-asm.c:404
 msgid "dsp:24 immediate is out of range"
 msgstr "onmiddellijke waarde van dsp:24 is buiten bereik"
 
 # of moet 'immediate' behouden worden?
-#: m32c-asm.c:483
+#: m32c-asm.c:437
 msgid "immediate is out of range 1-2"
 msgstr "onmiddellijke waarde is buiten bereik (1-2)"
 
 # of moet 'immediate' behouden worden?
-#: m32c-asm.c:501
+#: m32c-asm.c:455
 msgid "immediate is out of range 1-8"
 msgstr "onmiddellijke waarde is buiten bereik (1-8)"
 
 # of moet 'immediate' behouden worden?
-#: m32c-asm.c:519
-msgid "immediate is out of range 0-7"
-msgstr "onmiddellijke waarde is buiten bereik (0-7)"
-
-# of moet 'immediate' behouden worden?
-#: m32c-asm.c:555
+#: m32c-asm.c:491
 msgid "immediate is out of range 2-9"
 msgstr "onmiddellijke waarde is buiten bereik (2-9)"
 
 # Is dit de juiste interpretatie van "indexing general register"
-#: m32c-asm.c:573
+#: m32c-asm.c:509
 msgid "Bit number for indexing general register is out of range 0-15"
 msgstr "Bitnummer voor het indexeren van een general register is buiten bereik (0-15)"
 
-#: m32c-asm.c:611 m32c-asm.c:667
+# of moet 'immediate' behouden worden?
+#: m32c-asm.c:541 m32c-asm.c:576
 msgid "bit,base is out of range"
 msgstr "bit,base is buiten bereik"
 
-# klinkt niet geweldig, maar de originele boodschap is ook niet veel soeps :D
-#: m32c-asm.c:618 m32c-asm.c:623 m32c-asm.c:671
-msgid "bit,base out of range for symbol"
-msgstr "bit,base is buiten bereik voor een symbool"
-
-#: m32c-asm.c:807
+#: m32c-asm.c:712
 msgid "not a valid r0l/r0h pair"
 msgstr "geen geldig r0l/r0h koppel"
 
-#: m32c-asm.c:837
+#: m32c-asm.c:742
 msgid "Invalid size specifier"
 msgstr "Ongeldige grootte-specificatie"
 
-#: m68k-dis.c:1163
+#: m68k-dis.c:1162
 #, c-format
 msgid "<function code %d>"
 msgstr "<functie-code %d>"
 
-#: m68k-dis.c:1320
+#: m68k-dis.c:1313
 #, c-format
 msgid "<internal error in opcode table: %s %s>\n"
 msgstr "<interne fout in opcode-tabel: %s %s>\n"
@@ -755,40 +662,26 @@
 msgid "# <dis error: %08lx>"
 msgstr "# <dis fout: %08lx>"
 
-#: mep-asm.c:114
-msgid "Only $tp or $13 allowed for this opcode"
-msgstr "Deze opcode laat alleen $tp of $13 toe"
-
-#: mep-asm.c:128
-msgid "Only $sp or $15 allowed for this opcode"
-msgstr "Deze opcode laat alleen stp of $15 toe"
-
-# "hier" wrong een beetje in dit geval, dus gebruik ik "op deze plek"
-#: mep-asm.c:299 mep-asm.c:455
-#, c-format
-msgid "invalid %function() here"
-msgstr "ongeldige %function() op deze plek"
-
-#: mips-dis.c:745
+#: mips-dis.c:718
 msgid "# internal error, incomplete extension sequence (+)"
 msgstr "# interne fout, onvolledige extension sequence  (+)"
 
-#: mips-dis.c:852
+#: mips-dis.c:805
 #, c-format
 msgid "# internal error, undefined extension sequence (+%c)"
 msgstr "# interne fout, extension sequence (+%c) niet gedefinieerd"
 
-#: mips-dis.c:1211
+#: mips-dis.c:1153
 #, c-format
 msgid "# internal error, undefined modifier(%c)"
 msgstr "# interne fout, modifier(%c) niet gedefinieerd"
 
-#: mips-dis.c:1818
+#: mips-dis.c:1663
 #, c-format
 msgid "# internal disassembler error, unrecognised modifier (%c)"
 msgstr "# interne fout in disassembler, modifier(%c) niet herkend"
 
-#: mips-dis.c:2049
+#: mips-dis.c:1894
 #, c-format
 msgid ""
 "\n"
@@ -799,7 +692,7 @@
 "De volgende MIPS-specifieke disassembler-opties worden ondersteund voor gebruik\n"
 "via de -M optie (meerdere opties moeten door komma's gescheiden worden):\n"
 
-#: mips-dis.c:2053
+#: mips-dis.c:1898
 #, c-format
 msgid ""
 "\n"
@@ -811,7 +704,7 @@
 "                           Standaard: gebaseerd op het binair bestand dat\n"
 "                           gedesassembleerd wordt.\n"
 
-#: mips-dis.c:2057
+#: mips-dis.c:1902
 #, c-format
 msgid ""
 "\n"
@@ -822,7 +715,7 @@
 "  fpr-names=ABI            Druk FPR-namen af volgens de opgegeven ABI.\n"
 "                           Standaard: numeriek.\n"
 
-#: mips-dis.c:2061
+#: mips-dis.c:1906
 #, c-format
 msgid ""
 "\n"
@@ -836,7 +729,7 @@
 "                           Standaard: gebaseerd op het binair bestand dat\n"
 "                           gedesassembleerd wordt.\n"
 
-#: mips-dis.c:2066
+#: mips-dis.c:1911
 #, c-format
 msgid ""
 "\n"
@@ -850,7 +743,7 @@
 "                           gedesassembleerd wordt.\n"
 "\n"
 
-#: mips-dis.c:2071
+#: mips-dis.c:1916
 #, c-format
 msgid ""
 "\n"
@@ -860,7 +753,7 @@
 "\n"
 "  reg-names=ABI            Druk GPR- en FPR-namen af volgens de opgegeven ABI.\n"
 
-#: mips-dis.c:2075
+#: mips-dis.c:1920
 #, c-format
 msgid ""
 "\n"
@@ -871,7 +764,7 @@
 "  reg-names=ARCH           Druk CP0 registernamen en HWR-namen af volgens de\n"
 "                           opgegeven architectuur.\n"
 
-#: mips-dis.c:2079
+#: mips-dis.c:1924
 #, c-format
 msgid ""
 "\n"
@@ -882,12 +775,12 @@
 "  Voor de bovenstaande opties zijn dit de ondersteunde waarden voor \"ABI\":\n"
 "   "
 
-#: mips-dis.c:2084 mips-dis.c:2092 mips-dis.c:2094
+#: mips-dis.c:1929 mips-dis.c:1937 mips-dis.c:1939
 #, c-format
 msgid "\n"
 msgstr "\n"
 
-#: mips-dis.c:2086
+#: mips-dis.c:1931
 #, c-format
 msgid ""
 "\n"
@@ -917,21 +810,21 @@
 msgid "*unknown operands type: %d*"
 msgstr "onbekend type operanden: %d"
 
-#: mt-asm.c:110 mt-asm.c:190
+#: ms1-asm.c:84 ms1-asm.c:162
 msgid "Operand out of range. Must be between -32768 and 32767."
 msgstr "Operand buiten bereik. Moet tussen -32768 en 32767 liggen."
 
 # Should this even be here?
-#: mt-asm.c:149
+#: ms1-asm.c:121
 msgid "Biiiig Trouble in parse_imm16!"
 msgstr "Groooooooot Probleem in parse_imm16!"
 
-#: mt-asm.c:157
+#: ms1-asm.c:129
 #, c-format
 msgid "%operator operand is not a symbol"
 msgstr "operand van %operator is geen symbool"
 
-#: mt-asm.c:395
+#: ms1-asm.c:367
 msgid "invalid operand.  type may have values 0,1,2 only."
 msgstr "ongeldige operand.  type mag alleen 0,1,2 als waarde hebben."
 
@@ -940,80 +833,128 @@
 #. an immediate either. We don't know how much to increase
 #. aoffsetp by since whatever generated this is broken
 #. anyway!
-#: ns32k-dis.c:534
+#: ns32k-dis.c:535
 #, c-format
 msgid "$<undefined>"
 msgstr "$<niet gedefinieerd>"
 
-#: ppc-opc.c:782 ppc-opc.c:810
+#: ppc-opc.c:800 ppc-opc.c:828
 msgid "invalid conditional option"
 msgstr "ongeldige voorwaardelijke optie"
 
 # Dit kan waarschijnlijk beter
-#: ppc-opc.c:812
+#: ppc-opc.c:830
 msgid "attempt to set y bit when using + or - modifier"
 msgstr "poging om y bit in te stellen wanneer + of - modifier gebruikt wordt"
 
-#: ppc-opc.c:844
+#: ppc-opc.c:858
+msgid "offset not a multiple of 16"
+msgstr "offset is geen veelvoud van 16"
+
+#: ppc-opc.c:877
+msgid "offset not a multiple of 2"
+msgstr "offset is geen veelvoud van 2"
+
+#: ppc-opc.c:879
+msgid "offset greater than 62"
+msgstr "offset is groter dan 62"
+
+#: ppc-opc.c:898 ppc-opc.c:943 ppc-opc.c:987
+msgid "offset not a multiple of 4"
+msgstr "offset is geen veelvoud van 4"
+
+#: ppc-opc.c:900
+msgid "offset greater than 124"
+msgstr "offset is groter dan 124"
+
+#: ppc-opc.c:919
+msgid "offset not a multiple of 8"
+msgstr "offset is geen veelvoud van 8"
+
+#: ppc-opc.c:921
+msgid "offset greater than 248"
+msgstr "offset is groter dan 248"
+
+#: ppc-opc.c:964
+msgid "offset not between -2048 and 2047"
+msgstr "offset ligt niet tussen -2048 en 2047"
+
+#: ppc-opc.c:985
+msgid "offset not between -8192 and 8191"
+msgstr "offset ligt niet tussen -8192 en 8191"
+
+#: ppc-opc.c:1013
 msgid "invalid mask field"
 msgstr "ongeldig maskerveld"
 
-#: ppc-opc.c:870
+#: ppc-opc.c:1039
 msgid "ignoring invalid mfcr mask"
 msgstr "ongeldig mfcr-masker wordt genegeerd"
 
-#: ppc-opc.c:920 ppc-opc.c:955
+#: ppc-opc.c:1081
+msgid "ignoring least significant bits in branch offset"
+msgstr "minst significante bits worden genegeerd in branch offset"
+
+#: ppc-opc.c:1111 ppc-opc.c:1146
 msgid "illegal bitmask"
-msgstr "ongeldig bitmasker"
+msgstr "illegaal bitmasker"
+
+#: ppc-opc.c:1211
+msgid "value out of range"
+msgstr "waarde buiten bereik"
 
 # of is laadbereik beter?
-#: ppc-opc.c:1075
+#: ppc-opc.c:1279
 msgid "index register in load range"
 msgstr "indexregister in load-bereik"
 
-#: ppc-opc.c:1091
+#: ppc-opc.c:1295
 msgid "source and target register operands must be different"
 msgstr "bron- en doel-registeroperanden moeten verschillen"
 
-#: ppc-opc.c:1106
+#: ppc-opc.c:1310
 msgid "invalid register operand when updating"
 msgstr "ongeldige register-operand bij update"
 
-#: ppc-opc.c:1188
+#: ppc-opc.c:1349
+msgid "target register operand must be even"
+msgstr "doel-registeroperand moet even zijn"
+
+#: ppc-opc.c:1363
+msgid "source register operand must be even"
+msgstr "bron-registeroperand moet even zijn"
+
+#: ppc-opc.c:1420
 msgid "invalid sprg number"
 msgstr "ongeldig sprg-nummer"
 
-#: score-dis.c:220 score-dis.c:383
-msgid "<illegal instruction>"
-msgstr "<ongeldige instructie>"
-
 # Looks like this is a typo (two spaces after the ':')
-#: sparc-dis.c:282
+#: sparc-dis.c:269
 #, c-format
 msgid "Internal error:  bad sparc-opcode.h: \"%s\", %#.8lx, %#.8lx\n"
 msgstr "Interne fout: sparc-opcode.h is verkeerd: \"%s\", %#.8lx, %#.8lx\n"
 
-#: sparc-dis.c:293
+#: sparc-dis.c:280
 #, c-format
 msgid "Internal error: bad sparc-opcode.h: \"%s\", %#.8lx, %#.8lx\n"
 msgstr "Interne fout: sparc-opcode.h is verkeerd: \"%s\", %#.8lx, %#.8lx\n"
 
-#: sparc-dis.c:343
+#: sparc-dis.c:330
 #, c-format
 msgid "Internal error: bad sparc-opcode.h: \"%s\" == \"%s\"\n"
 msgstr "Interne fout: sparc-opcode.h is verkeerd: \"%s\" == \"%s\"\n"
 
 #. Mark as non-valid instruction.
-#: sparc-dis.c:1013
+#: sparc-dis.c:984
 msgid "unknown"
 msgstr "onbekend"
 
-#: v850-dis.c:239
+#: v850-dis.c:237
 #, c-format
 msgid "unknown operand shift: %x\n"
 msgstr "onbekende operand-shift: %x\n"
 
-#: v850-dis.c:253
+#: v850-dis.c:251
 #, c-format
 msgid "unknown pop reg: %d\n"
 msgstr "onbekend pop reg: %d\n"
@@ -1024,113 +965,91 @@
 #. v850_insert_operand() in gas/config/tc-v850.c.  Error messages
 #. containing the string 'out of range' will be ignored unless a
 #. specific command line option is given to GAS.
-#: v850-opc.c:48
+#: v850-opc.c:46
 msgid "displacement value is not in range and is not aligned"
 msgstr "displacement-waarde is niet in bereik en is niet uitgelijnd"
 
-#: v850-opc.c:49
+#: v850-opc.c:47
 msgid "displacement value is out of range"
 msgstr "displacement-waarde is buiten bereik"
 
-#: v850-opc.c:50
+#: v850-opc.c:48
 msgid "displacement value is not aligned"
 msgstr "displacement-waarde is niet uitgelijnd"
 
 # of moet 'immediate' behouden worden?
-#: v850-opc.c:52
+#: v850-opc.c:50
 msgid "immediate value is out of range"
 msgstr "onmiddellijke waarde is buiten bereik"
 
 # Repeated message..., use 'to an odd...' to merge it
-#: v850-opc.c:60
+#: v850-opc.c:58
 msgid "branch value not in range and to odd offset"
 msgstr "branch-waarde niet in bereik en naar onpare offset"
 
-#: v850-opc.c:62 v850-opc.c:89
+#: v850-opc.c:60 v850-opc.c:87
 msgid "branch value out of range"
 msgstr "branch-waarde buiten bereik"
 
-#: v850-opc.c:65 v850-opc.c:92
+#: v850-opc.c:63 v850-opc.c:90
 msgid "branch to odd offset"
 msgstr "branch naar onpare offset"
 
-#: v850-opc.c:87
+#: v850-opc.c:85
 msgid "branch value not in range and to an odd offset"
 msgstr "branch-waarde niet in bereik en naar een onpare offset"
 
-#: v850-opc.c:279
+#: v850-opc.c:277
 msgid "invalid register for stack adjustment"
 msgstr "ongeldig register voor stack-aanpassing"
 
-#: v850-opc.c:299
+#: v850-opc.c:297
 msgid "immediate value not in range and not even"
 msgstr "onmiddellijke waarde niet in bereik en niet even"
 
-#: v850-opc.c:304
+#: v850-opc.c:302
 msgid "immediate value must be even"
 msgstr "onmiddellijke waarde moet even zijn"
 
-#: xc16x-asm.c:65
-msgid "Missing '#' prefix"
-msgstr "'#' prefix ontbreekt"
-
-#: xc16x-asm.c:81
-msgid "Missing '.' prefix"
-msgstr "'.' prefix ontbreekt"
-
-#: xc16x-asm.c:97
-msgid "Missing 'pof:' prefix"
-msgstr "'pof.' prefix ontbreekt"
-
-#: xc16x-asm.c:113
-msgid "Missing 'pag:' prefix"
-msgstr "'pag:' prefix ontbreekt"
-
-#: xc16x-asm.c:129
-msgid "Missing 'sof:' prefix"
-msgstr "'sof:' prefix ontbreekt"
-
-#: xc16x-asm.c:145
-msgid "Missing 'seg:' prefix"
-msgstr "'seg:' prefix ontbreekt"
-
-#: xstormy16-asm.c:71
+# of is laadbereik beter?
+#: xstormy16-asm.c:70
 msgid "Bad register in preincrement"
 msgstr "Ongeldig register in preincrement"
 
-#: xstormy16-asm.c:76
+#: xstormy16-asm.c:75
 msgid "Bad register in postincrement"
 msgstr "Ongeldig register in postincrement"
 
-#: xstormy16-asm.c:78
+# of is laadbereik beter?
+#: xstormy16-asm.c:77
 msgid "Bad register name"
 msgstr "Ongeldige registernaam"
 
-#: xstormy16-asm.c:82
+#: xstormy16-asm.c:81
 msgid "Label conflicts with register name"
 msgstr "Label geeft conflict met registernaam"
 
-#: xstormy16-asm.c:86
+#: xstormy16-asm.c:85
 msgid "Label conflicts with `Rx'"
 msgstr "Label geeft conflict met `Rx'"
 
-#: xstormy16-asm.c:88
+#: xstormy16-asm.c:87
 msgid "Bad immediate expression"
 msgstr "Slechte onmiddelijke expressie"
 
 # immediate what? 'value' assumed
-#: xstormy16-asm.c:109
+#: xstormy16-asm.c:108
 msgid "No relocation for small immediate"
 msgstr "Geen relocatie voor kleine onmiddelijke waarde"
 
-#: xstormy16-asm.c:119
+#: xstormy16-asm.c:118
 msgid "Small operand was not an immediate number"
 msgstr "Kleine operand was geen onmiddellijk getal"
 
-#: xstormy16-asm.c:157
+#: xstormy16-asm.c:156
 msgid "Operand is not a symbol"
 msgstr "Operand is geen symbool"
 
-#: xstormy16-asm.c:165
+#: xstormy16-asm.c:164
 msgid "Syntax error: No trailing ')'"
 msgstr "Syntaxfout: Geen sluithaakje"
diff -Nur binutils-2.18.50.0.1/opcodes/ppc-dis.c binutils-stable/opcodes/ppc-dis.c
--- binutils-2.18.50.0.1/opcodes/ppc-dis.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/ppc-dis.c	2007-09-25 15:42:02.000000000 +0200
@@ -46,9 +46,6 @@
     dialect |= PPC_OPCODE_64;
 
   if (info->disassembler_options
-      && strstr (info->disassembler_options, "ppcps") != NULL)
-    dialect |= PPC_OPCODE_PPCPS;
-  else if (info->disassembler_options
       && strstr (info->disassembler_options, "booke") != NULL)
     dialect |= PPC_OPCODE_BOOKE | PPC_OPCODE_BOOKE64;
   else if ((info->mach == bfd_mach_ppc_e500)
@@ -368,7 +365,6 @@
   fprintf (stream, "  e500|e500x2              Disassemble the e500 instructions\n");
   fprintf (stream, "  440                      Disassemble the 440 instructions\n");
   fprintf (stream, "  efs                      Disassemble the EFS instructions\n");
-  fprintf (stream, "  ppcps                    Disassemble the PowerPC paired singles instructions\n");
   fprintf (stream, "  power4                   Disassemble the Power4 instructions\n");
   fprintf (stream, "  power5                   Disassemble the Power5 instructions\n");
   fprintf (stream, "  power6                   Disassemble the Power6 instructions\n");
diff -Nur binutils-2.18.50.0.1/opcodes/ppc-opc.c binutils-stable/opcodes/ppc-opc.c
--- binutils-2.18.50.0.1/opcodes/ppc-opc.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/ppc-opc.c	2007-09-25 15:42:02.000000000 +0200
@@ -238,9 +238,7 @@
     PPC_OPERAND_PARENS | PPC_OPERAND_SIGNED | PPC_OPERAND_DS },
 
   /* The E field in a wrteei instruction.  */
-  /* And the W bit in the pair singles instructions.  */
 #define E DS + 1
-#define PSW E
   { 0x1, 15, NULL, NULL, 0 },
 
   /* The FL1 field in a POWER SC form instruction.  */
@@ -521,29 +519,12 @@
 #define WS EVUIMM_8 + 1
   { 0x7, 11, NULL, NULL, 0 },
 
-  /* PowerPC paired singles extensions.  */
-  /* W bit in the pair singles instructions for x type instructions.  */
-#define PSWM WS + 1
-  {  0x1, 10, 0, 0, 0 },
-
-  /* IDX bits for quantization in the pair singles instructions.  */
-#define PSQ PSWM + 1
-  {  0x7, 12, 0, 0, 0 },
-
-  /* IDX bits for quantization in the pair singles x-type instructions.  */
-#define PSQM PSQ + 1
-  {  0x7, 7, 0, 0, 0 },
-
-  /* Smaller D field for quantization in the pair singles instructions.  */
-#define PSD PSQM + 1
-  {  0xfff, 0, 0, 0,  PPC_OPERAND_PARENS | PPC_OPERAND_SIGNED },
-
-#define A_L PSD + 1
+  /* The L field in an mtmsrd or A form instruction or W in an X form.  */
+#define A_L WS + 1
 #define W A_L
-#define MTMSRD_L W
   { 0x1, 16, NULL, NULL, PPC_OPERAND_OPTIONAL },
 
-#define RMC MTMSRD_L + 1
+#define RMC A_L + 1
   { 0x3, 9, NULL, NULL, 0 },
 
 #define R RMC + 1
@@ -1538,12 +1519,6 @@
 /* An XO_MASK with the RB field fixed.  */
 #define XORB_MASK (XO_MASK | RB_MASK)
 
-/* An XOPS form instruction for paired singles.  */
-#define XOPS(op, xop, rc) \
-  (OP (op) | ((((unsigned long)(xop)) & 0x3ff) << 1) | (((unsigned long)(rc)) & 1))
-#define XOPS_MASK XOPS (0x3f, 0x3ff, 1)
-
-
 /* An XS form instruction.  */
 #define XS(op, xop, rc) (OP (op) | ((((unsigned long)(xop)) & 0x1ff) << 2) | (((unsigned long)(rc)) & 1))
 #define XS_MASK XS (0x3f, 0x1ff, 1)
@@ -1576,11 +1551,6 @@
 #define XUC(op, xop)  (OP (op) | (((unsigned long)(xop)) & 0x1f))
 #define XUC_MASK      XUC(0x3f, 0x1f)
 
-/* An XW form instruction.  */
-#define XW(op, xop, rc) (OP (op) | ((((unsigned long)(xop)) & 0x3f) << 1) | ((rc) & 1))
-/* The mask for a G form instruction. rc not supported at present.  */
-#define XW_MASK XW (0x3f, 0x3f, 0)
-
 /* The BO encodings used in extended conditional branch mnemonics.  */
 #define BODNZF	(0x0)
 #define BODNZFP	(0x1)
@@ -1653,7 +1623,6 @@
 #define PPC750	PPC
 #define PPC7450 PPC
 #define PPC860	PPC
-#define PPCPS	PPC_OPCODE_PPCPS
 #define PPCVEC	PPC_OPCODE_ALTIVEC
 #define	POWER   PPC_OPCODE_POWER
 #define	POWER2	PPC_OPCODE_POWER | PPC_OPCODE_POWER2
@@ -1745,65 +1714,6 @@
 { "twi",     OP(3),	OP_MASK,	PPCCOM,		{ TO, RA, SI } },
 { "ti",      OP(3),	OP_MASK,	PWRCOM,		{ TO, RA, SI } },
 
-{ "dcbz_l",    X(4,1014),     XRT_MASK,      PPCPS,  { RA, RB } },
-{ "ps_cmpu0",  X(4 ,0),       X_MASK|(3<<21),PPCPS,  { BF, FRA, FRB } },
-{ "psq_lx",    XW(4,6,0),     XW_MASK,        PPCPS, { FRT, RA, RB, PSWM, PSQM } },
-{ "psq_stx",   XW(4,7,0),     XW_MASK,        PPCPS, { FRS, RA, RB, PSWM, PSQM } },
-{ "ps_sum0",   A(4 ,10,0),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_sum0.",  A(4 ,10,1),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_sum1",   A(4 ,11,0),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_sum1.",  A(4 ,11,1),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_muls0",  A(4 ,12,0),    AFRB_MASK,     PPCPS,  { FRT, FRA, FRC } },
-{ "ps_muls0.", A(4 ,12,1),    AFRB_MASK,     PPCPS,  { FRT, FRA, FRC } },
-{ "ps_muls1",  A(4 ,13,0),    AFRB_MASK,     PPCPS,  { FRT, FRA, FRC } },
-{ "ps_muls1.", A(4 ,13,1),    AFRB_MASK,     PPCPS,  { FRT, FRA, FRC } },
-{ "ps_madds0",  A(4 ,14,0),   A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_madds0.", A(4 ,14,1),   A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_madds1",  A(4 ,15,0),   A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_madds1.", A(4 ,15,1),   A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_div",     A(4,18,0),    AFRC_MASK,     PPCPS,  { FRT, FRA, FRB } },
-{ "ps_div.",    A(4,18,1),    AFRC_MASK,     PPCPS,  { FRT, FRA, FRB } },
-{ "ps_sub",     A(4,20,0),    AFRC_MASK,     PPCPS,  { FRT, FRA, FRB } },
-{ "ps_sub.",    A(4,20,1),    AFRC_MASK,     PPCPS,  { FRT, FRA, FRB } },
-{ "ps_add",     A(4,21,0),    AFRC_MASK,     PPCPS,  { FRT, FRA, FRB } },
-{ "ps_add.",    A(4,21,1),    AFRC_MASK,     PPCPS,  { FRT, FRA, FRB } },
-{ "ps_sel",     A(4,23,0),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_sel.",    A(4,23,1),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_res",     A(4,24,0),    AFRAFRC_MASK,  PPCPS,  { FRT, FRB } },
-{ "ps_res.",    A(4,24,1),    AFRAFRC_MASK,  PPCPS,  { FRT, FRB } },
-{ "ps_mul",     A(4,25,0),    AFRB_MASK,     PPCPS,  { FRT, FRA, FRC } },
-{ "ps_mul.",    A(4,25,1),    AFRB_MASK,     PPCPS,  { FRT, FRA, FRC } },
-{ "ps_rsqrte",  A(4 ,26,0),   AFRAFRC_MASK,  PPCPS,  { FRT, FRB } },
-{ "ps_rsqrte.", A(4 ,26,1),   AFRAFRC_MASK,  PPCPS,  { FRT, FRB } },
-{ "ps_madd",    A(4,29,0),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_madd.",   A(4,29,1),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_msub",    A(4,28,0),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_msub.",   A(4,28,1),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_nmsub",   A(4,30,0),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_nmsub.",  A(4,30,1),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_nmadd",   A(4,31,0),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_nmadd.",  A(4,31,1),    A_MASK,        PPCPS,  { FRT,FRA,FRC,FRB } },
-{ "ps_cmpo0",   X(4 ,32),     X_MASK|(3<<21),PPCPS,  { BF, FRA, FRB } },
-{ "psq_lux",    XW(4,38,0),   XW_MASK,        PPCPS,  { FRT, RA, RB, PSWM, PSQM } },
-{ "psq_stux",   XW(4,39,0),   XW_MASK,        PPCPS,  { FRS, RA, RB, PSWM, PSQM } },
-{ "ps_neg",     XRC(4 ,40,0), XRA_MASK,      PPCPS,  { FRT, FRB } },
-{ "ps_neg.",    XRC(4 ,40,1), XRA_MASK,      PPCPS,  { FRT, FRB } },
-{ "ps_cmpu1",   X(4 ,64),   X_MASK|(3<<21),  PPCPS,  { BF, FRA, FRB } },
-{ "ps_mr",      XRC(4 ,72,0), XRA_MASK,      PPCPS,  { FRT, FRB } },
-{ "ps_mr.",     XRC(4 ,72,1), XRA_MASK,      PPCPS,  { FRT, FRB } },
-{ "ps_cmpo1",   X(4 ,96),   X_MASK|(3<<21),  PPCPS,  { BF, FRA, FRB } },
-{ "ps_nabs",    XRC(4 ,136,0), XRA_MASK,     PPCPS,  { FRT, FRB } },
-{ "ps_nabs.",   XRC(4 ,136,1), XRA_MASK,     PPCPS,  { FRT, FRB } },
-{ "ps_abs",     XRC(4,264,0), XRA_MASK,      PPCPS,  { FRT, FRB } },
-{ "ps_abs.",    XRC(4,264,1), XRA_MASK,      PPCPS,  { FRT, FRB } },
-{ "ps_merge00", XOPS(4,528,0), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
-{ "ps_merge00.",XOPS(4,528,1), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
-{ "ps_merge01", XOPS(4,560,0), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
-{ "ps_merge01.",XOPS(4,560,1), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
-{ "ps_merge10", XOPS(4,592,0), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
-{ "ps_merge10.",XOPS(4,592,1), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
-{ "ps_merge11", XOPS(4,624,0), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
-{ "ps_merge11.",XOPS(4,624,1), XOPS_MASK,    PPCPS,  { FRT, FRA, FRB } },
 { "macchw",	XO(4,172,0,0), XO_MASK,	PPC405|PPC440,	{ RT, RA, RB } },
 { "macchw.",	XO(4,172,0,1), XO_MASK,	PPC405|PPC440,	{ RT, RA, RB } },
 { "macchwo",	XO(4,172,1,0), XO_MASK,	PPC405|PPC440,	{ RT, RA, RB } },
@@ -4427,12 +4337,8 @@
 
 { "lfq",     OP(56),	OP_MASK,	POWER2,		{ FRT, D, RA0 } },
 
-{ "psq_l",   OP(56),    OP_MASK,        PPCPS,          { FRT, PSD, RA, PSW, PSQ } },
-
 { "lfqu",    OP(57),	OP_MASK,	POWER2,		{ FRT, D, RA0 } },
 
-{ "psq_lu",   OP(57),    OP_MASK,       PPCPS,          { FRT, PSD, RA, PSW, PSQ } },
-
 { "lfdp",    OP(57),	OP_MASK,	POWER6,		{ FRT, D, RA0 } },
 
 { "lbze",    DEO(58,0), DE_MASK,	BOOKE64,	{ RT, DE, RA0 } },
@@ -4495,9 +4401,6 @@
 { "fnmadds", A(59,31,0), A_MASK,	PPC,		{ FRT,FRA,FRC,FRB } },
 { "fnmadds.",A(59,31,1), A_MASK,	PPC,		{ FRT,FRA,FRC,FRB } },
 
-{ "psq_st",  OP(60),    OP_MASK,        PPCPS,          { FRS, PSD, RA, PSW, PSQ } },
-{ "psq_stu", OP(61),    OP_MASK,        PPCPS,          { FRS, PSD, RA, PSW, PSQ } },
-
 { "dmul",    XRC(59,34,0), X_MASK,	POWER6,		{ FRT, FRA, FRB } },
 { "dmul.",   XRC(59,34,1), X_MASK,	POWER6,		{ FRT, FRA, FRB } },
 
diff -Nur binutils-2.18.50.0.1/opcodes/s390-mkopc.c binutils-stable/opcodes/s390-mkopc.c
--- binutils-2.18.50.0.1/opcodes/s390-mkopc.c	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/s390-mkopc.c	2007-09-25 15:42:02.000000000 +0200
@@ -115,123 +115,6 @@
   no_ops++;
 }
 
-struct s390_cond_ext_format
-{
-  char nibble;
-  char extension[4];
-};
-
-#define NUM_COND_EXTENSIONS 20
-
-const struct s390_cond_ext_format s390_cond_extensions[NUM_COND_EXTENSIONS] =
-  {
-    { '1', "o" },    /* jump on overflow / if ones */
-    { '2', "h" },    /* jump on A high */
-    { '2', "p" },    /* jump on plus */
-    { '3', "nle" },  /* jump on not low or equal */
-    { '4', "l" },    /* jump on A low */
-    { '4', "m" },    /* jump on minus / if mixed */
-    { '5', "nhe" },  /* jump on not high or equal */
-    { '6', "lh" },   /* jump on low or high */
-    { '7', "ne" },   /* jump on A not equal B */
-    { '7', "nz" },   /* jump on not zero / if not zeros */
-    { '8', "e" },    /* jump on A equal B */
-    { '8', "z" },    /* jump on zero / if zeros */
-    { '9', "nlh" },  /* jump on not low or high */
-    { 'a', "he" },   /* jump on high or equal */
-    { 'b', "nl" },   /* jump on A not low */
-    { 'b', "nm" },   /* jump on not minus / if not mixed */
-    { 'c', "le" },   /* jump on low or equal */
-    { 'd', "nh" },   /* jump on A not high */
-    { 'd', "np" },   /* jump on not plus */
-    { 'e', "no" },   /* jump on not overflow / if not ones */
-  };
-
-/* As with insertOpcode instructions are added to the sorted opcode
-   array.  Additionally mnemonics containing the '*<number>' tag are
-   expanded to the set of conditional instructions described by
-   s390_cond_extensions with the '*<number>' tag replaced by the
-   respective mnemonic extensions.  */
-
-static void
-expandConditionalJump (char *opcode, char *mnemonic, char *format,
-		       int min_cpu, int mode_bits)
-{
-  char prefix[5];
-  char suffix[5];
-  char number[5];
-  int mask_start, i = 0, star_found = 0, reading_number = 0;
-  int number_p = 0, suffix_p = 0, prefix_p = 0;
-
-  while (mnemonic[i] != '\0')
-    {
-      switch (mnemonic[i])
-	{
-	case '*':
-	  if (star_found)
-	    goto malformed_mnemonic;
-
-	  star_found = 1;
-	  reading_number = 1;
-	  break;
-
-	case '0': case '1': case '2': case '3': case '4':
-	case '5': case '6': case '7': case '8': case '9':
-	  if (!star_found || !reading_number)
-	    goto malformed_mnemonic;
-
-	  number[number_p++] = mnemonic[i];
-	  break;
-
-	default:
-	  if (reading_number)
-	    {
-	      if (!number_p)
-		goto malformed_mnemonic;
-	      else
-		reading_number = 0;
-	    }
-
-	  if (star_found)
-	    suffix[suffix_p++] = mnemonic[i];
-	  else
-	    prefix[prefix_p++] = mnemonic[i];
-	}
-      i++;
-    }
-
-  prefix[prefix_p] = '\0';
-  suffix[suffix_p] = '\0';
-  number[number_p] = '\0';
-
-  if (sscanf (number, "%d", &mask_start) != 1)
-    goto malformed_mnemonic;
-
-  if (mask_start & 3)
-    {
-      fprintf (stderr, "Conditional mask not at nibble boundary in: %s\n",
-	       mnemonic);
-      return;
-    }
-
-  mask_start >>= 2;
-
-  for (i = 0; i < NUM_COND_EXTENSIONS; i++)
-    {
-      char new_mnemonic[15];
-
-      strcpy (new_mnemonic, prefix);
-      strcat (new_mnemonic, s390_cond_extensions[i].extension);
-      strcat (new_mnemonic, suffix);
-      opcode[mask_start] = s390_cond_extensions[i].nibble;
-      insertOpcode (opcode, new_mnemonic, format, min_cpu, mode_bits);
-    }
-  return;
-
- malformed_mnemonic:
-  fprintf (stderr, "Malformed mnemonic: %s\n", mnemonic);
-}
-
 static char file_header[] =
   "/* The opcode table. This file was generated by s390-mkopc.\n\n"
   "   The format of the opcode table is:\n\n"
@@ -342,12 +225,7 @@
 	    if (*str == ',')
 	      str++;
 	  } while (*str != 0);
-
-	  if (!strchr (mnemonic, '*'))
-	    insertOpcode (opcode, mnemonic, format, min_cpu, mode_bits);
-	  else
-	    expandConditionalJump (opcode, mnemonic, format,
-				   min_cpu, mode_bits);
+	  insertOpcode (opcode, mnemonic, format, min_cpu, mode_bits);
 	}
       else
         fprintf (stderr, "Couldn't scan line %s\n", currentLine);
diff -Nur binutils-2.18.50.0.1/opcodes/s390-opc.txt binutils-stable/opcodes/s390-opc.txt
--- binutils-2.18.50.0.1/opcodes/s390-opc.txt	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/s390-opc.txt	2007-09-25 15:42:02.000000000 +0200
@@ -262,13 +262,70 @@
 a700 tmh RI_RU "test under mask high" g5 esa,zarch
 a701 tml RI_RU "test under mask low" g5 esa,zarch
 0700 nopr RR_0R "no operation" g5 esa,zarch
-0700 b*8r RR_0R "conditional branch" g5 esa,zarch
+0710 bor RR_0R "branch on overflow / if ones" g5 esa,zarch
+0720 bhr RR_0R "branch on high" g5 esa,zarch
+0720 bpr RR_0R "branch on plus" g5 esa,zarch
+0730 bnler RR_0R "branch on not low or equal" g5 esa,zarch
+0740 blr RR_0R "branch on low" g5 esa,zarch
+0740 bmr RR_0R "branch on minus / if mixed" g5 esa,zarch
+0750 bnher RR_0R "branch on not high or equal" g5 esa,zarch
+0760 blhr RR_0R "branch on low or high" g5 esa,zarch
+0770 bner RR_0R "branch on not equal" g5 esa,zarch
+0770 bnzr RR_0R "branch on not zero / if not zeros" g5 esa,zarch
+0780 ber RR_0R "branch on equal" g5 esa,zarch
+0780 bzr RR_0R "branch on zero / if zeros" g5 esa,zarch
+0790 bnlhr RR_0R "branch on not low or high" g5 esa,zarch
+07a0 bher RR_0R "branch on high or equal" g5 esa,zarch
+07b0 bnlr RR_0R "branch on not low" g5 esa,zarch
+07b0 bnmr RR_0R "branch on not minus / if not mixed" g5 esa,zarch
+07c0 bler RR_0R "brach on low or equal" g5 esa,zarch
+07d0 bnhr RR_0R "branch on not high" g5 esa,zarch
+07d0 bnpr RR_0R "branch on not plus" g5 esa,zarch
+07e0 bnor RR_0R "branch on not overflow / if not ones" g5 esa,zarch
 07f0 br RR_0R "unconditional branch" g5 esa,zarch
 4700 nop RX_0RRD "no operation" g5 esa,zarch
-4700 b*8 RX_0RRD "conditional branch" g5 esa,zarch
+4710 bo RX_0RRD "branch on overflow / if ones" g5 esa,zarch
+4720 bh RX_0RRD "branch on high" g5 esa,zarch
+4720 bp RX_0RRD "branch on plus" g5 esa,zarch
+4730 bnle RX_0RRD "branch on not low or equal" g5 esa,zarch
+4740 bl RX_0RRD "branch on low" g5 esa,zarch
+4740 bm RX_0RRD "branch on minus / if mixed" g5 esa,zarch
+4750 bnhe RX_0RRD "branch on not high or equal" g5 esa,zarch
+4760 blh RX_0RRD "branch on low or high" g5 esa,zarch
+4770 bne RX_0RRD "branch on not equal" g5 esa,zarch
+4770 bnz RX_0RRD "branch on not zero / if not zeros" g5 esa,zarch
+4780 be RX_0RRD "branch on equal" g5 esa,zarch
+4780 bz RX_0RRD "branch on zero / if zeros" g5 esa,zarch
+4790 bnlh RX_0RRD "branch on not low or high" g5 esa,zarch
+47a0 bhe RX_0RRD "branch on high or equal" g5 esa,zarch
+47b0 bnl RX_0RRD "branch on not low" g5 esa,zarch
+47b0 bnm RX_0RRD "branch on not minus / if not mixed" g5 esa,zarch
+47c0 ble RX_0RRD "branch on low or equal" g5 esa,zarch
+47d0 bnh RX_0RRD "branch on not high" g5 esa,zarch
+47d0 bnp RX_0RRD "branch on not plus" g5 esa,zarch
+47e0 bno RX_0RRD "branch on not overflow / if not ones" g5 esa,zarch
 47f0 b RX_0RRD "unconditional branch" g5 esa,zarch
-a704 j*8 RI_0P "conditional jump" g5 esa,zarch
-a7f4 j RI_0P "unconditional jump" g5 esa,zarch
+a714 jo RI_0P "jump on overflow / if ones" g5 esa,zarch
+a724 jh RI_0P "jump on A high" g5 esa,zarch
+a724 jp RI_0P "jump on plus" g5 esa,zarch
+a734 jnle RI_0P "jump on not low or equal" g5 esa,zarch
+a744 jl RI_0P "jump on A low" g5 esa,zarch
+a744 jm RI_0P "jump on minus / if mixed" g5 esa,zarch
+a754 jnhe RI_0P "jump on not high or equal" g5 esa,zarch
+a764 jlh RI_0P "jump on low or high" g5 esa,zarch
+a774 jne RI_0P "jump on A not equal B" g5 esa,zarch
+a774 jnz RI_0P "jump on not zero / if not zeros" g5 esa,zarch
+a784 je RI_0P "jump on A equal B" g5 esa,zarch
+a784 jz RI_0P "jump on zero / if zeros" g5 esa,zarch
+a794 jnlh RI_0P "jump on not low or high" g5 esa,zarch
+a7a4 jhe RI_0P "jump on high or equal" g5 esa,zarch
+a7b4 jnl RI_0P "jump on A not low" g5 esa,zarch
+a7b4 jnm RI_0P "jump on not minus / if not mixed" g5 esa,zarch
+a7c4 jle RI_0P "jump on low or equal" g5 esa,zarch
+a7d4 jnh RI_0P "jump on A not high" g5 esa,zarch
+a7d4 jnp RI_0P "jump on not plus" g5 esa,zarch
+a7e4 jno RI_0P "jump on not overflow / if not ones" g5 esa,zarch
+a7f4 j RI_0P "jump" g5 esa,zarch
 b34a axbr RRE_FF "add extended bfp" g5 esa,zarch
 b31a adbr RRE_FF "add long bfp" g5 esa,zarch
 ed000000001a adb RXE_FRRD "add long bfp" g5 esa,zarch
@@ -463,8 +520,27 @@
 a702 tmhh RI_RU "test under mask high high" z900 zarch
 a703 tmhl RI_RU "test under mask high low" z900 zarch
 c004 brcl RIL_UP "branch relative on condition long" z900 esa,zarch
-c004 jg*8 RIL_0P "conditional jump long" z900 esa,zarch
-c0f4 jg RIL_0P "unconditional jump long" z900 esa,zarch
+c014 jgo RIL_0P "jump long on overflow / if ones" z900 esa,zarch
+c024 jgh RIL_0P "jump long on high" z900 esa,zarch
+c024 jgp RIL_0P "jump long on plus" z900 esa,zarch
+c034 jgnle RIL_0P "jump long on not low or equal" z900 esa,zarch
+c044 jgl RIL_0P "jump long on low" z900 esa,zarch
+c044 jgm RIL_0P "jump long on minus / if mixed" z900 esa,zarch
+c054 jgnhe RIL_0P "jump long on not high or equal" z900 esa,zarch
+c064 jglh RIL_0P "jump long on low or high" z900 esa,zarch
+c074 jgne RIL_0P "jump long on not equal" z900 esa,zarch
+c074 jgnz RIL_0P "jump long on not zero / if not zeros" z900 esa,zarch
+c084 jge RIL_0P "jump long on equal" z900 esa,zarch
+c084 jgz RIL_0P "jump long on zero / if zeros" z900 esa,zarch
+c094 jgnlh RIL_0P "jump long on not low or high" z900 esa,zarch
+c0a4 jghe RIL_0P "jump long on high or equal" z900 esa,zarch
+c0b4 jgnl RIL_0P "jump long on not low" z900 esa,zarch
+c0b4 jgnm RIL_0P "jump long on not minus / if not mixed" z900 esa,zarch
+c0c4 jgle RIL_0P "jump long on low or equal" z900 esa,zarch
+c0d4 jgnh RIL_0P "jump long on not high" z900 esa,zarch
+c0d4 jgnp RIL_0P "jump long on not plus" z900 esa,zarch
+c0e4 jgno RIL_0P "jump long on not overflow / if not ones" z900 esa,zarch
+c0f4 jg RIL_0P "jump long" z900 esa,zarch
 c005 brasl RIL_RP "branch relative and save long" z900 esa,zarch
 a707 brctg RI_RP "branch relative on count 64" z900 zarch
 a709 lghi RI_RI "load halfword immediate 64" z900 zarch
diff -Nur binutils-2.18.50.0.1/opcodes/sysdep.h binutils-stable/opcodes/sysdep.h
--- binutils-2.18.50.0.1/opcodes/sysdep.h	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/opcodes/sysdep.h	2007-09-25 15:42:02.000000000 +0200
@@ -42,7 +42,3 @@
 #include <strings.h>
 #endif
 #endif
-
-#if !HAVE_DECL_STPCPY
-extern char *stpcpy (char *__dest, const char *__src);
-#endif
diff -Nur binutils-2.18.50.0.1/patches/bfd-kept-4.patch binutils-stable/patches/bfd-kept-4.patch
--- binutils-2.18.50.0.1/patches/bfd-kept-4.patch	2006-05-26 18:34:07.000000000 +0200
+++ binutils-stable/patches/bfd-kept-4.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,60 +0,0 @@
-2006-04-24  Michael Matz  <matz@suse.de>
-	    H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf-bfd.h (bfd_elf_section_data): Add kept_section.
-	(elf_kept_section): New.
-
-	* elflink.c (_bfd_elf_check_kept_section): Cache the result in
-	elf_kept_section.
-
---- bfd/elf-bfd.h.kept	2006-03-16 12:37:42.000000000 -0800
-+++ bfd/elf-bfd.h	2006-04-24 20:11:00.000000000 -0700
-@@ -1168,6 +1168,10 @@ struct bfd_elf_section_data
-      the linker.  */
-   asection *next_in_group;
- 
-+  /* The pointer to the real kept section. It is computed from the
-+     kept_section field in asection due to section group.  */ 
-+  asection *kept_section;
-+
-   /* A pointer used for various section optimizations.  */
-   void *sec_info;
- };
-@@ -1180,6 +1184,7 @@ struct bfd_elf_section_data
- #define elf_group_id(sec)      (elf_section_data(sec)->group.id)
- #define elf_next_in_group(sec) (elf_section_data(sec)->next_in_group)
- #define elf_sec_group(sec)	(elf_section_data(sec)->sec_group)
-+#define elf_kept_section(sec) (elf_section_data(sec)->kept_section)
- 
- /* Return TRUE if section has been discarded.  */
- #define elf_discarded_section(sec)				\
---- bfd/elflink.c.kept	2006-04-24 15:36:18.000000000 -0700
-+++ bfd/elflink.c	2006-04-24 20:18:03.000000000 -0700
-@@ -6798,7 +6799,14 @@ _bfd_elf_check_kept_section (asection *s
- {
-   asection *kept;
- 
-+  kept = elf_kept_section (sec);
-+  if (kept)
-+    return kept;
-+
-   kept = sec->kept_section;
-+  if (!kept)
-+    return kept;
-+
-   if (kept != NULL)
-     {
-       if (elf_sec_group (sec) != NULL)
-@@ -6806,6 +6814,12 @@ _bfd_elf_check_kept_section (asection *s
-       if (kept != NULL && sec->size != kept->size)
- 	kept = NULL;
-     }
-+
-+  if (kept)
-+    elf_kept_section (sec) = kept;
-+  else
-+    sec->kept_section = NULL;
-+
-   return kept;
- }
- 
diff -Nur binutils-2.18.50.0.1/patches/bfd-ref_addr-6.patch binutils-stable/patches/bfd-ref_addr-6.patch
--- binutils-2.18.50.0.1/patches/bfd-ref_addr-6.patch	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/patches/bfd-ref_addr-6.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,165 +0,0 @@
-2006-09-29  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/3191
-	* dwarf2.c (find_abstract_instance_name): Pass a pointer to
-	attribute instead of offset.  For DW_FORM_ref_addr, get the
-	entry at the offset from the .debug_info section.
-	(scan_unit_for_symbols): Updated.
-	(_bfd_dwarf2_find_nearest_line): Adjust debug_info
-	section vma when needed.
-
---- bfd/dwarf2.c.ref_addr	2007-06-22 09:49:46.000000000 -0700
-+++ bfd/dwarf2.c	2007-06-22 09:53:00.000000000 -0700
-@@ -1558,16 +1558,30 @@ lookup_symbol_in_variable_table (struct 
- }
- 
- static char *
--find_abstract_instance_name (struct comp_unit *unit, bfd_uint64_t die_ref)
-+find_abstract_instance_name (struct comp_unit *unit,
-+			     struct attribute *attr_ptr)
- {
-   bfd *abfd = unit->abfd;
-   bfd_byte *info_ptr;
-   unsigned int abbrev_number, bytes_read, i;
-   struct abbrev_info *abbrev;
-+  bfd_uint64_t die_ref = attr_ptr->u.val;
-   struct attribute attr;
-   char *name = 0;
- 
--  info_ptr = unit->info_ptr_unit + die_ref;
-+  /* DW_FORM_ref_addr can reference an entry in a different CU. It
-+     is an offset from the .debug_info section, not the current CU.  */
-+  if (attr_ptr->form == DW_FORM_ref_addr)
-+    {
-+      /* FIXME: How to handle DW_FORM_ref_addr references an entry in
-+	 a different file?  */ 
-+      if (!die_ref)
-+	abort ();
-+
-+      info_ptr = unit->stash->sec_info_ptr + die_ref;
-+    }
-+  else 
-+    info_ptr = unit->info_ptr_unit + die_ref;
-   abbrev_number = read_unsigned_leb128 (abfd, info_ptr, &bytes_read);
-   info_ptr += bytes_read;
- 
-@@ -1593,7 +1607,7 @@ find_abstract_instance_name (struct comp
- 		    name = attr.u.str;
- 		  break;
- 		case DW_AT_specification:
--		  name = find_abstract_instance_name (unit, attr.u.val);
-+		  name = find_abstract_instance_name (unit, &attr);
- 		  break;
- 		case DW_AT_MIPS_linkage_name:
- 		  name = attr.u.str;
-@@ -1753,7 +1767,7 @@ scan_unit_for_symbols (struct comp_unit 
- 		  break;
- 
- 		case DW_AT_abstract_origin:
--		  func->name = find_abstract_instance_name (unit, attr.u.val);
-+		  func->name = find_abstract_instance_name (unit, &attr);
- 		  break;
- 
- 		case DW_AT_name:
-@@ -2404,6 +2418,11 @@ _bfd_dwarf2_find_nearest_line (bfd *abfd
-       bfd *debug_bfd = abfd;
-       bfd_size_type total_size;
-       asection *msec;
-+      bfd_vma last_vma;
-+      bfd_size_type size;
-+      asection *first_msec;
-+      asection **msecs = NULL;
-+      unsigned int i, count;
- 
-       *pinfo = stash;
- 
-@@ -2423,9 +2442,28 @@ _bfd_dwarf2_find_nearest_line (bfd *abfd
- 	 Read them all in and produce one large stash.  We do this in two
- 	 passes - in the first pass we just accumulate the section sizes.
- 	 In the second pass we read in the section's contents.  The allows
--	 us to avoid reallocing the data as we add sections to the stash.  */
-+	 us to avoid reallocing the data as we add sections to the stash.
-+       
-+	 We may need to adjust debug_info section vmas since we will
-+	 concatenate them together.  Otherwise relocations may be
-+	 incorrect.  */
-+      first_msec = msec;
-+      last_vma = 0;
-+      count = 0;
-       for (total_size = 0; msec; msec = find_debug_info (debug_bfd, msec))
--	total_size += msec->size;
-+	{
-+	  size = msec->size;
-+	  if (size == 0)
-+	    continue;
-+
-+	  total_size += size;
-+
-+	  BFD_ASSERT (msec->vma == 0 && msec->alignment_power == 0);
-+
-+	  msec->vma = last_vma;
-+	  last_vma += size;
-+	  count++;
-+	}
- 
-       stash->info_ptr = bfd_alloc (debug_bfd, total_size);
-       if (stash->info_ptr == NULL)
-@@ -2433,17 +2471,27 @@ _bfd_dwarf2_find_nearest_line (bfd *abfd
- 
-       stash->info_ptr_end = stash->info_ptr;
- 
--      for (msec = find_debug_info (debug_bfd, NULL);
-+      if (count > 1)
-+	{
-+	  count--;
-+	  msecs = (asection **) bfd_malloc2 (count, sizeof (*msecs));
-+	}
-+
-+      for (i = 0, msec = first_msec;
- 	   msec;
- 	   msec = find_debug_info (debug_bfd, msec))
- 	{
--	  bfd_size_type size;
- 	  bfd_size_type start;
- 
- 	  size = msec->size;
- 	  if (size == 0)
- 	    continue;
- 
-+	  if (i && msecs)
-+	    msecs [i - 1] = msec;
-+
-+	  i++;
-+
- 	  start = stash->info_ptr_end - stash->info_ptr;
- 
- 	  if ((bfd_simple_get_relocated_section_contents
-@@ -2453,9 +2501,27 @@ _bfd_dwarf2_find_nearest_line (bfd *abfd
- 	  stash->info_ptr_end = stash->info_ptr + start + size;
- 	}
- 
-+      /* Restore section vma. */
-+      if (count)
-+	{
-+	  if (msecs)
-+	    {
-+	      for (i = 0; i < count; i++)
-+		msecs [i]->vma = 0;
-+	      free (msecs);
-+	    }
-+	  else
-+	    {
-+	      for (msec = find_debug_info (debug_bfd, first_msec);
-+		   msec;
-+		   msec = find_debug_info (debug_bfd, msec))
-+		msec->vma = 0;
-+	    }
-+	}
-+
-       BFD_ASSERT (stash->info_ptr_end == stash->info_ptr + total_size);
- 
--      stash->sec = find_debug_info (debug_bfd, NULL);
-+      stash->sec = first_msec;
-       stash->sec_info_ptr = stash->info_ptr;
-       stash->syms = symbols;
-       stash->bfd = debug_bfd;
diff -Nur binutils-2.18.50.0.1/patches/binutils-error-3.patch binutils-stable/patches/binutils-error-3.patch
--- binutils-2.18.50.0.1/patches/binutils-error-3.patch	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/patches/binutils-error-3.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,956 +0,0 @@
-bfd/
-
-2007-07-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4409
-	* elf-bfd.h (RELOC_FOR_GLOBAL_SYMBOL): Add an argument for
-	error ignored.
-	* elf-m10200.c (mn10200_elf_relocate_section): Updated.
-	* elf-m10300.c (mn10300_elf_relocate_section): Likewise.
-	* elf32-arm.c (elf32_arm_relocate_section): Likewise.
-	* elf32-avr.c (elf32_avr_relocate_section): Likewise.
-	* elf32-bfin.c (bfinfdpic_relocate_section): Likewise.
-	(bfin_relocate_section): Likewise.
-	* elf32-cr16.c (elf32_cr16_relocate_section): Likewise.
-	* elf32-cr16c.c (elf32_cr16c_relocate_section): Likewise.
-	* elf32-cris.c (cris_elf_relocate_section): Likewise.
-	* elf32-crx.c (elf32_crx_relocate_section): Likewise.
-	* elf32-d10v.c (elf32_d10v_relocate_section): Likewise.
-	* elf32-fr30.c (fr30_elf_relocate_section): Likewise.
-	* elf32-frv.c (elf32_frv_relocate_section): Likewise.
-	* elf32-h8300.c (elf32_h8_relocate_section): Likewise.
-	* elf32-hppa.c (elf32_hppa_relocate_section): Likewise.
-	* elf32-i386.c (elf_i386_relocate_section): Likewise.
-	* elf32-i860.c (elf32_i860_relocate_section): Likewise.
-	* elf32-ip2k.c (ip2k_elf_relocate_section): Likewise.
-	* elf32-iq2000.c (iq2000_elf_relocate_section): Likewise.
-	* elf32-m68hc1x.c (elf32_m68hc11_relocate_section): Likewise.
-	* elf32-m68k.c (elf_m68k_relocate_section): Likewise.
-	* elf32-mcore.c (mcore_elf_relocate_section): Likewise.
-	* elf32-msp430.c (elf32_msp430_relocate_section): Likewise.
-	* elf32-mt.c (mt_elf_relocate_section): Likewise.
-	* elf32-openrisc.c (openrisc_elf_relocate_section): Likewise.
-	* elf32-ppc.c (ppc_elf_relocate_section): Likewise.
-	* elf32-s390.c (elf_s390_relocate_section): Likewise.
-	* elf32-spu.c (spu_elf_relocate_section): Likewise.
-	* elf32-v850.c (v850_elf_relocate_section): Likewise.
-	* elf32-vax.c (elf_vax_relocate_section): Likewise.
-	* elf32-xc16x.c (elf32_xc16x_relocate_section): Likewise.
-	* elf32-xstormy16.c (xstormy16_elf_relocate_section): Likewise.
-	* elf32-xtensa.c (elf_xtensa_relocate_section): Likewise.
-	* elf64-alpha.c (elf64_alpha_relocate_section): Likewise.
-	* elf64-mmix.c (mmix_elf_relocate_section): Likewise.
-	* elf64-ppc.c (ppc64_elf_relocate_section): Likewise.
-	* elf64-s390.c (elf_s390_relocate_section): Likewise.
-	* elf64-x86-64.c (elf64_x86_64_relocate_section): Likewise.
-	* elfxx-sparc.c (_bfd_sparc_elf_relocate_section): Likewise.
-
-	* elfxx-ia64.c (elfNN_ia64_relocate_section): Skip if error
-	from RELOC_FOR_GLOBAL_SYMBOL in executable is ignored.
-
-ld/
-
-2007-07-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4409
-	* ldmain.c (how_to_report_unresolved_symbols): New.
-	(main): Set link_info.unresolved_syms_in_objects and
-	link_info.unresolved_syms_in_shared_libs if they aren't set
-	yet.
-
-	* ldmain.h (how_to_report_unresolved_symbols): New.
-
-	* lexsup.c (how_to_report_unresolved_symbols): Removed.
-	(parse_args): Set link_info.pie to FALSE for -shared. Don't
-	set default values for link_info.unresolved_syms_in_objects nor
-	link_info.unresolved_syms_in_shared_libs.
-
-ld/testsuite/
-
-2007-07-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/4409
-	* ld-ia64/error1.d: New file.
-	* ld-ia64/error1.s: Likewise.
-	* ld-ia64/error2.d: Likewise.
-	* ld-ia64/error3.d: Likewise.
-	* ld-ia64/error4.d: Likewise.
-
---- binutils/bfd/elf-bfd.h.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/bfd/elf-bfd.h	2007-07-10 09:02:12.000000000 -0700
-@@ -2096,7 +2096,7 @@ extern bfd_boolean _sh_elf_set_mach_from
- #define RELOC_FOR_GLOBAL_SYMBOL(info, input_bfd, input_section, rel,	\
- 				r_symndx, symtab_hdr, sym_hashes,	\
- 				h, sec, relocation,			\
--				unresolved_reloc, warned)		\
-+				unresolved_reloc, warned, ignored)	\
-   do									\
-     {									\
-       /* It seems this can happen with erroneous or unsupported		\
-@@ -2111,6 +2111,7 @@ extern bfd_boolean _sh_elf_set_mach_from
- 	h = (struct elf_link_hash_entry *) h->root.u.i.link;		\
- 									\
-       warned = FALSE;							\
-+      ignored = FALSE;							\
-       unresolved_reloc = FALSE;						\
-       relocation = 0;							\
-       if (h->root.type == bfd_link_hash_defined				\
-@@ -2133,7 +2134,7 @@ extern bfd_boolean _sh_elf_set_mach_from
- 	;								\
-       else if (info->unresolved_syms_in_objects == RM_IGNORE		\
- 	       && ELF_ST_VISIBILITY (h->other) == STV_DEFAULT)		\
--	;								\
-+	ignored = TRUE;							\
-       else if (!info->relocatable)					\
- 	{								\
- 	  bfd_boolean err;						\
---- binutils/bfd/elf-m10200.c.error	2007-07-03 10:50:57.000000000 -0700
-+++ binutils/bfd/elf-m10200.c	2007-07-10 09:02:12.000000000 -0700
-@@ -392,12 +392,12 @@ mn10200_elf_relocate_section (output_bfd
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf-m10300.c.error	2007-07-03 10:50:57.000000000 -0700
-+++ binutils/bfd/elf-m10300.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1417,13 +1417,13 @@ mn10300_elf_relocate_section (output_bfd
-       else
- 	{
- 	  bfd_boolean unresolved_reloc;
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 	  struct elf_link_hash_entry *hh;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   hh, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  h = (struct elf32_mn10300_link_hash_entry *) hh;
- 
---- binutils/bfd/elf32-arm.c.error	2007-07-10 07:40:58.000000000 -0700
-+++ binutils/bfd/elf32-arm.c	2007-07-10 09:02:12.000000000 -0700
-@@ -6447,12 +6447,12 @@ elf32_arm_relocate_section (bfd *       
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  sym_type = h->type;
- 	}
---- binutils/bfd/elf32-avr.c.error	2007-07-03 10:50:58.000000000 -0700
-+++ binutils/bfd/elf32-avr.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1204,12 +1204,12 @@ elf32_avr_relocate_section (bfd *output_
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  name = h->root.root.string;
- 	}
---- binutils/bfd/elf32-bfin.c.error	2007-07-03 10:50:58.000000000 -0700
-+++ binutils/bfd/elf32-bfin.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2197,13 +2197,13 @@ bfinfdpic_relocate_section (bfd * output
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 	  bfd_boolean unresolved_reloc;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	  osec = sec;
- 	}
- 
-@@ -2895,12 +2895,12 @@ bfin_relocate_section (bfd * output_bfd,
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-cr16.c.error	2007-07-10 09:05:25.000000000 -0700
-+++ binutils/bfd/elf32-cr16.c	2007-07-10 09:03:20.000000000 -0700
-@@ -837,12 +837,12 @@ elf32_cr16_relocate_section (bfd *output
-         }
-       else
-         {
--          bfd_boolean unresolved_reloc, warned;
-+          bfd_boolean unresolved_reloc, warned, ignored;
- 
-           RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
-                                    r_symndx, symtab_hdr, sym_hashes,
-                                    h, sec, relocation,
--                                   unresolved_reloc, warned);
-+                                   unresolved_reloc, warned, ignored);
-         }
- 
-       r = cr16_elf_final_link_relocate (howto, input_bfd, output_bfd,
---- binutils/bfd/elf32-cr16c.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-cr16c.c	2007-07-10 09:02:12.000000000 -0700
-@@ -718,12 +718,12 @@ elf32_cr16c_relocate_section (bfd *outpu
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-cris.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-cris.c	2007-07-10 09:02:12.000000000 -0700
-@@ -996,13 +996,13 @@ cris_elf_relocate_section (output_bfd, i
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 	  bfd_boolean unresolved_reloc;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  if (unresolved_reloc
- 	      /* Perhaps we should detect the cases that
---- binutils/bfd/elf32-crx.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-crx.c	2007-07-10 09:02:12.000000000 -0700
-@@ -869,12 +869,12 @@ elf32_crx_relocate_section (bfd *output_
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-d10v.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-d10v.c	2007-07-10 09:02:12.000000000 -0700
-@@ -456,12 +456,12 @@ elf32_d10v_relocate_section (bfd *output
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-fr30.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-fr30.c	2007-07-10 09:02:12.000000000 -0700
-@@ -567,12 +567,12 @@ fr30_elf_relocate_section (output_bfd, i
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  name = h->root.root.string;
- 	}
---- binutils/bfd/elf32-frv.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-frv.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2813,13 +2813,13 @@ elf32_frv_relocate_section (output_bfd, 
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 	  bfd_boolean unresolved_reloc;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	  osec = sec;
- 	}
- 
---- binutils/bfd/elf32-h8300.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-h8300.c	2007-07-10 09:02:12.000000000 -0700
-@@ -452,12 +452,12 @@ elf32_h8_relocate_section (bfd *output_b
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-hppa.c.error	2007-07-03 10:50:59.000000000 -0700
-+++ binutils/bfd/elf32-hppa.c	2007-07-10 09:02:12.000000000 -0700
-@@ -3676,13 +3676,14 @@ elf32_hppa_relocate_section (bfd *output
-       else
- 	{
- 	  struct elf_link_hash_entry *eh;
--	  bfd_boolean unresolved_reloc;
-+	  bfd_boolean unresolved_reloc, ignored;
- 	  struct elf_link_hash_entry **sym_hashes = elf_sym_hashes (input_bfd);
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rela,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   eh, sym_sec, relocation,
--				   unresolved_reloc, warned_undef);
-+				   unresolved_reloc, warned_undef,
-+				   ignored);
- 
- 	  if (!info->relocatable
- 	      && relocation == 0
---- binutils/bfd/elf32-i386.c.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/bfd/elf32-i386.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2362,12 +2362,12 @@ elf_i386_relocate_section (bfd *output_b
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-i860.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-i860.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1120,12 +1120,12 @@ elf32_i860_relocate_section (bfd *output
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-ip2k.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-ip2k.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1449,13 +1449,13 @@ ip2k_elf_relocate_section (bfd *output_b
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 	  bfd_boolean unresolved_reloc;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  name = h->root.root.string;
- 	}
---- binutils/bfd/elf32-iq2000.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-iq2000.c	2007-07-10 09:02:12.000000000 -0700
-@@ -586,12 +586,12 @@ iq2000_elf_relocate_section (bfd *		    
-       else
- 	{
- 	  bfd_boolean unresolved_reloc;
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  name = h->root.root.string;
- 	}
---- binutils/bfd/elf32-m68hc1x.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-m68hc1x.c	2007-07-10 09:02:12.000000000 -0700
-@@ -945,12 +945,12 @@ elf32_m68hc11_relocate_section (bfd *out
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation, unresolved_reloc,
--				   warned);
-+				   warned, ignored);
- 
- 	  is_far = (h && (h->other & STO_M68HC12_FAR));
- 	  stub_name = h->root.root.string;
---- binutils/bfd/elf32-m68k.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-m68k.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1646,12 +1646,12 @@ elf_m68k_relocate_section (output_bfd, i
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-mcore.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-mcore.c	2007-07-10 09:02:12.000000000 -0700
-@@ -458,12 +458,12 @@ mcore_elf_relocate_section (bfd * output
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-msp430.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-msp430.c	2007-07-10 09:02:12.000000000 -0700
-@@ -450,12 +450,12 @@ elf32_msp430_relocate_section (bfd * out
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-mt.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-mt.c	2007-07-10 09:02:12.000000000 -0700
-@@ -344,12 +344,12 @@ mt_elf_relocate_section
-       else
- 	{
- 	  bfd_boolean unresolved_reloc;
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  name = h->root.root.string;
- 	}
---- binutils/bfd/elf32-openrisc.c.error	2007-07-03 10:51:00.000000000 -0700
-+++ binutils/bfd/elf32-openrisc.c	2007-07-10 09:02:12.000000000 -0700
-@@ -365,12 +365,12 @@ openrisc_elf_relocate_section (bfd *outp
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-ppc.c.error	2007-07-10 07:40:58.000000000 -0700
-+++ binutils/bfd/elf32-ppc.c	2007-07-10 09:02:12.000000000 -0700
-@@ -5718,10 +5718,12 @@ ppc_elf_relocate_section (bfd *output_bf
- 	}
-       else
- 	{
-+	  bfd_boolean ignored;
-+
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  sym_name = h->root.root.string;
- 	}
---- binutils/bfd/elf32-s390.c.error	2007-07-03 10:51:01.000000000 -0700
-+++ binutils/bfd/elf32-s390.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2311,11 +2311,12 @@ elf_s390_relocate_section (output_bfd, i
-       else
- 	{
- 	  bfd_boolean warned ATTRIBUTE_UNUSED;
-+	  bfd_boolean ignored ATTRIBUTE_UNUSED;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-spu.c.error	2007-07-03 10:51:01.000000000 -0700
-+++ binutils/bfd/elf32-spu.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2724,10 +2724,12 @@ spu_elf_relocate_section (bfd *output_bf
- 	}
-       else
- 	{
-+	  bfd_boolean ignored;
-+
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	  sym_name = h->root.root.string;
- 	}
- 
---- binutils/bfd/elf32-v850.c.error	2007-07-03 10:51:01.000000000 -0700
-+++ binutils/bfd/elf32-v850.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1624,7 +1624,7 @@ v850_elf_relocate_section (bfd *output_b
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  /* Note - this check is delayed until now as it is possible and
- 	     valid to have a file without any symbols but with relocs that
-@@ -1641,7 +1641,7 @@ v850_elf_relocate_section (bfd *output_b
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-vax.c.error	2007-07-03 10:51:02.000000000 -0700
-+++ binutils/bfd/elf32-vax.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1415,12 +1415,12 @@ elf_vax_relocate_section (bfd *output_bf
-       else
- 	{
- 	  bfd_boolean unresolved_reloc;
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  if ((h->root.type == bfd_link_hash_defined
- 	      || h->root.type == bfd_link_hash_defweak)
---- binutils/bfd/elf32-xc16x.c.error	2007-07-03 10:51:02.000000000 -0700
-+++ binutils/bfd/elf32-xc16x.c	2007-07-10 09:02:12.000000000 -0700
-@@ -374,12 +374,12 @@ elf32_xc16x_relocate_section (bfd *outpu
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-xstormy16.c.error	2007-07-03 10:51:02.000000000 -0700
-+++ binutils/bfd/elf32-xstormy16.c	2007-07-10 09:02:12.000000000 -0700
-@@ -821,12 +821,12 @@ xstormy16_elf_relocate_section (bfd *   
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc, warned;
-+	  bfd_boolean unresolved_reloc, warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf32-xtensa.c.error	2007-07-03 10:51:03.000000000 -0700
-+++ binutils/bfd/elf32-xtensa.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2055,10 +2055,12 @@ elf_xtensa_relocate_section (bfd *output
- 	}
-       else
- 	{
-+	  bfd_boolean ignored;
-+
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  if (relocation == 0
- 	      && !unresolved_reloc
---- binutils/bfd/elf64-alpha.c.error	2007-07-10 07:40:58.000000000 -0700
-+++ binutils/bfd/elf64-alpha.c	2007-07-10 09:02:12.000000000 -0700
-@@ -4176,7 +4176,7 @@ elf64_alpha_relocate_section (bfd *outpu
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 	  bfd_boolean unresolved_reloc;
- 	  struct elf_link_hash_entry *hh;
- 	  struct elf_link_hash_entry **sym_hashes = elf_sym_hashes (input_bfd);
-@@ -4184,7 +4184,7 @@ elf64_alpha_relocate_section (bfd *outpu
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   hh, sec, value,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  if (warned)
- 	    continue;
---- binutils/bfd/elf64-mmix.c.error	2007-07-03 10:51:04.000000000 -0700
-+++ binutils/bfd/elf64-mmix.c	2007-07-10 09:02:12.000000000 -0700
-@@ -1402,12 +1402,13 @@ mmix_elf_relocate_section (output_bfd, i
- 	}
-       else
- 	{
--	  bfd_boolean unresolved_reloc;
-+	  bfd_boolean unresolved_reloc, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, undefined_signalled);
-+				   unresolved_reloc, undefined_signalled,
-+				   ignored);
- 	  name = h->root.root.string;
- 	}
- 
---- binutils/bfd/elf64-ppc.c.error	2007-07-03 10:51:05.000000000 -0700
-+++ binutils/bfd/elf64-ppc.c	2007-07-10 09:02:12.000000000 -0700
-@@ -9900,10 +9900,12 @@ ppc64_elf_relocate_section (bfd *output_
- 	}
-       else
- 	{
-+	  bfd_boolean ignored;
-+
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h_elf, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	  sym_name = h_elf->root.root.string;
- 	  sym_type = h_elf->type;
- 	}
---- binutils/bfd/elf64-s390.c.error	2007-07-10 07:40:58.000000000 -0700
-+++ binutils/bfd/elf64-s390.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2285,11 +2285,12 @@ elf_s390_relocate_section (output_bfd, i
-       else
- 	{
- 	  bfd_boolean warned ATTRIBUTE_UNUSED;
-+	  bfd_boolean ignored ATTRIBUTE_UNUSED;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elf64-x86-64.c.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/bfd/elf64-x86-64.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2124,12 +2124,12 @@ elf64_x86_64_relocate_section (bfd *outp
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	}
- 
-       if (sec != NULL && elf_discarded_section (sec))
---- binutils/bfd/elfxx-ia64.c.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/bfd/elfxx-ia64.c	2007-07-10 09:02:12.000000000 -0700
-@@ -4742,17 +4742,17 @@ elfNN_ia64_relocate_section (output_bfd,
-       else
- 	{
- 	  bfd_boolean unresolved_reloc;
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 	  struct elf_link_hash_entry **sym_hashes = elf_sym_hashes (input_bfd);
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sym_sec, value,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 
- 	  if (h->root.type == bfd_link_hash_undefweak)
- 	    undef_weak_ref = TRUE;
--	  else if (warned)
-+	  else if (warned || (ignored && info->executable))
- 	    continue;
- 	}
- 
---- binutils/bfd/elfxx-sparc.c.error	2007-07-03 10:51:09.000000000 -0700
-+++ binutils/bfd/elfxx-sparc.c	2007-07-10 09:02:12.000000000 -0700
-@@ -2533,12 +2533,12 @@ _bfd_sparc_elf_relocate_section (bfd *ou
- 	}
-       else
- 	{
--	  bfd_boolean warned;
-+	  bfd_boolean warned, ignored;
- 
- 	  RELOC_FOR_GLOBAL_SYMBOL (info, input_bfd, input_section, rel,
- 				   r_symndx, symtab_hdr, sym_hashes,
- 				   h, sec, relocation,
--				   unresolved_reloc, warned);
-+				   unresolved_reloc, warned, ignored);
- 	  if (warned)
- 	    {
- 	      /* To avoid generating warning messages about truncated
---- binutils/ld/ldmain.c.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/ld/ldmain.c	2007-07-10 09:02:12.000000000 -0700
-@@ -103,6 +103,9 @@ bfd_boolean add_needed = TRUE;
- /* TRUE if we should demangle symbol names.  */
- bfd_boolean demangling;
- 
-+/* How to report unresolved symbols.  */
-+enum report_method how_to_report_unresolved_symbols = RM_GENERATE_ERROR;
-+
- args_type command_line;
- 
- ld_config_type config;
-@@ -388,6 +391,27 @@ main (int argc, char **argv)
-   if (! link_info.shared || link_info.pie)
-     link_info.executable = TRUE;
- 
-+  /* When creating a shared library, the default behaviour is to
-+     ignore any unresolved references.  */
-+
-+  if (link_info.unresolved_syms_in_objects == RM_NOT_YET_SET)
-+    {
-+      if (link_info.shared && !link_info.pie)
-+	link_info.unresolved_syms_in_objects = RM_IGNORE;
-+      else
-+	link_info.unresolved_syms_in_objects
-+	  = how_to_report_unresolved_symbols;
-+    }
-+
-+  if (link_info.unresolved_syms_in_shared_libs == RM_NOT_YET_SET)
-+    {
-+      if (link_info.shared && !link_info.pie)
-+	link_info.unresolved_syms_in_shared_libs = RM_IGNORE;
-+      else
-+	link_info.unresolved_syms_in_shared_libs
-+	  = how_to_report_unresolved_symbols;
-+    }
-+
-   /* Treat ld -r -s as ld -r -S -x (i.e., strip all local symbols).  I
-      don't see how else this can be handled, since in this case we
-      must preserve all externally visible symbols.  */
---- binutils/ld/ldmain.h.error	2007-07-06 13:12:24.000000000 -0700
-+++ binutils/ld/ldmain.h	2007-07-10 09:02:12.000000000 -0700
-@@ -35,6 +35,7 @@ extern bfd_boolean whole_archive;
- extern bfd_boolean as_needed;
- extern bfd_boolean add_needed;
- extern bfd_boolean demangling;
-+extern enum report_method how_to_report_unresolved_symbols;
- extern int g_switch_value;
- extern const char *output_filename;
- extern struct bfd_link_info link_info;
---- binutils/ld/lexsup.c.error	2007-07-06 13:12:25.000000000 -0700
-+++ binutils/ld/lexsup.c	2007-07-10 09:02:12.000000000 -0700
-@@ -567,7 +567,6 @@ parse_args (unsigned argc, char **argv)
-   struct option *longopts;
-   struct option *really_longopts;
-   int last_optind;
--  enum report_method how_to_report_unresolved_symbols = RM_GENERATE_ERROR;
- 
-   shortopts = xmalloc (OPTION_COUNT * 3 + 2);
-   longopts = xmalloc (sizeof (*longopts) * (OPTION_COUNT + 1));
-@@ -1113,12 +1112,7 @@ parse_args (unsigned argc, char **argv)
- 	  if (config.has_shared)
- 	    {
- 	      link_info.shared = TRUE;
--	      /* When creating a shared library, the default
--		 behaviour is to ignore any unresolved references.  */
--	      if (link_info.unresolved_syms_in_objects == RM_NOT_YET_SET)
--		link_info.unresolved_syms_in_objects = RM_IGNORE;
--	      if (link_info.unresolved_syms_in_shared_libs == RM_NOT_YET_SET)
--		link_info.unresolved_syms_in_shared_libs = RM_IGNORE;
-+	      link_info.pie = FALSE;
- 	    }
- 	  else
- 	    einfo (_("%P%F: -shared not supported\n"));
-@@ -1444,14 +1438,6 @@ parse_args (unsigned argc, char **argv)
-       set_default_dirlist (default_dirlist);
-       free (default_dirlist);
-     }
--
--  if (link_info.unresolved_syms_in_objects == RM_NOT_YET_SET)
--    /* FIXME: Should we allow emulations a chance to set this ?  */
--    link_info.unresolved_syms_in_objects = how_to_report_unresolved_symbols;
--
--  if (link_info.unresolved_syms_in_shared_libs == RM_NOT_YET_SET)
--    /* FIXME: Should we allow emulations a chance to set this ?  */
--    link_info.unresolved_syms_in_shared_libs = how_to_report_unresolved_symbols;
- }
- 
- /* Add the (colon-separated) elements of DIRLIST_PTR to the
---- binutils/ld/testsuite/ld-ia64/error1.d.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/ld/testsuite/ld-ia64/error1.d	2007-07-10 09:02:12.000000000 -0700
-@@ -0,0 +1,7 @@
-+#source: error1.s
-+#ld: -unresolved-symbols=ignore-all
-+#readelf: -s
-+
-+#...
-+[ 	]+[0-9]+:[ 	]+[0]+[ 	]+0[ 	]+NOTYPE[ 	]+GLOBAL DEFAULT[ 	]+UND[ 	]+foo
-+#pass
---- binutils/ld/testsuite/ld-ia64/error1.s.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/ld/testsuite/ld-ia64/error1.s	2007-07-10 09:02:12.000000000 -0700
-@@ -0,0 +1,30 @@
-+	.explicit
-+	.pred.safe_across_calls p1-p5,p16-p63
-+	.text
-+	.align 16
-+	.global _start#
-+	.proc _start#
-+_start:
-+	.prologue 12, 32
-+	.mii
-+	.save ar.pfs, r33
-+	alloc r33 = ar.pfs, 0, 3, 0, 0
-+	.save rp, r32
-+	mov r32 = b0
-+	mov r34 = r1
-+	.body
-+	;;
-+	.bbb
-+	nop 0
-+	nop 0
-+	br.call.sptk.many b0 = foo#
-+	;;
-+	.mmi
-+	nop 0
-+	mov r1 = r34
-+	mov b0 = r32
-+	.mib
-+	nop 0
-+	mov ar.pfs = r33
-+	br.ret.sptk.many b0
-+	.endp _start#
---- binutils/ld/testsuite/ld-ia64/error2.d.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/ld/testsuite/ld-ia64/error2.d	2007-07-10 09:02:12.000000000 -0700
-@@ -0,0 +1,7 @@
-+#source: error1.s
-+#ld: -pie -unresolved-symbols=ignore-all
-+#readelf: -s
-+
-+#...
-+[ 	]+[0-9]+:[ 	]+[0]+[ 	]+0[ 	]+NOTYPE[ 	]+GLOBAL DEFAULT[ 	]+UND[ 	]+foo
-+#pass
---- binutils/ld/testsuite/ld-ia64/error3.d.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/ld/testsuite/ld-ia64/error3.d	2007-07-10 09:02:12.000000000 -0700
-@@ -0,0 +1,7 @@
-+#source: error1.s
-+#ld: -pie -shared
-+#readelf: -s
-+
-+#...
-+[ 	]+[0-9]+:[ 	]+[0]+[ 	]+0[ 	]+NOTYPE[ 	]+GLOBAL DEFAULT[ 	]+UND[ 	]+foo
-+#pass
---- binutils/ld/testsuite/ld-ia64/error4.d.error	2007-07-10 09:02:12.000000000 -0700
-+++ binutils/ld/testsuite/ld-ia64/error4.d	2007-07-10 09:02:12.000000000 -0700
-@@ -0,0 +1,3 @@
-+#source: error1.s
-+#ld: -shared -pie
-+#error: .*undefined reference to `foo'
diff -Nur binutils-2.18.50.0.1/patches/binutils-hash-2.patch binutils-stable/patches/binutils-hash-2.patch
--- binutils-2.18.50.0.1/patches/binutils-hash-2.patch	2007-05-11 17:23:21.000000000 +0200
+++ binutils-stable/patches/binutils-hash-2.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,406 +0,0 @@
-binutils/
-
-2007-05-09  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/4476
-	* readelf.c (print_dynamic_symbol): New.
-	(process_symbol_table): Handle DT_GNU_HASH for dynamic symbols.
-
-ld/testsuite/
-
-2007-05-09  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/4476
-	* ld-elf/hash.d: Check "-s -D" for readelf.
-
---- binutils/binutils/readelf.c.hash	2007-05-09 10:54:22.000000000 -0700
-+++ binutils/binutils/readelf.c	2007-05-09 17:24:46.000000000 -0700
-@@ -7033,6 +7033,39 @@ get_dynamic_data (FILE *file, unsigned i
-   return i_data;
- }
- 
-+static void
-+print_dynamic_symbol (bfd_vma si, unsigned long hn)
-+{
-+  Elf_Internal_Sym *psym;
-+  int n;
-+
-+  psym = dynamic_symbols + si;
-+
-+  n = print_vma (si, DEC_5);
-+  if (n < 5)
-+    fputs ("     " + n, stdout);
-+  printf (" %3lu: ", hn);
-+  print_vma (psym->st_value, LONG_HEX);
-+  putchar (' ');
-+  print_vma (psym->st_size, DEC_5);
-+
-+  printf ("  %6s", get_symbol_type (ELF_ST_TYPE (psym->st_info)));
-+  printf (" %6s",  get_symbol_binding (ELF_ST_BIND (psym->st_info)));
-+  printf (" %3s",  get_symbol_visibility (ELF_ST_VISIBILITY (psym->st_other)));
-+  /* Check to see if any other bits in the st_other field are set.
-+     Note - displaying this information disrupts the layout of the
-+     table being generated, but for the moment this case is very
-+     rare.  */
-+  if (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other))
-+    printf (" [%s] ", get_symbol_other (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other)));
-+  printf (" %3.3s ", get_symbol_index_type (psym->st_shndx));
-+  if (VALID_DYNAMIC_NAME (psym->st_name))
-+    print_symbol (25, GET_DYNAMIC_NAME (psym->st_name));
-+  else
-+    printf (" <corrupt: %14ld>", psym->st_name);
-+  putchar ('\n');
-+}
-+
- /* Dump the symbol table.  */
- static int
- process_symbol_table (FILE *file)
-@@ -7045,12 +7078,14 @@ process_symbol_table (FILE *file)
-   bfd_vma ngnubuckets = 0;
-   bfd_vma *gnubuckets = NULL;
-   bfd_vma *gnuchains = NULL;
-+  bfd_vma gnusymidx = 0;
- 
-   if (! do_syms && !do_histogram)
-     return 1;
- 
--  if (dynamic_info[DT_HASH] && ((do_using_dynamic && dynamic_strings != NULL)
--				|| do_histogram))
-+  if (dynamic_info[DT_HASH]
-+      && (do_histogram
-+	  || (do_using_dynamic && dynamic_strings != NULL)))
-     {
-       unsigned char nb[8];
-       unsigned char nc[8];
-@@ -7094,54 +7129,157 @@ process_symbol_table (FILE *file)
- 	return 0;
-     }
- 
--  if (do_syms
--      && dynamic_info[DT_HASH] && do_using_dynamic && dynamic_strings != NULL)
-+  if (dynamic_info_DT_GNU_HASH
-+      && (do_histogram
-+	  || (do_using_dynamic && dynamic_strings != NULL)))
-     {
--      unsigned long hn;
--      bfd_vma si;
-+      unsigned char nb[16];
-+      bfd_vma i, maxchain = 0xffffffff, bitmaskwords;
-+      bfd_vma buckets_vma;
-+
-+      if (fseek (file,
-+		 (archive_file_offset
-+		  + offset_from_vma (file, dynamic_info_DT_GNU_HASH,
-+				     sizeof nb)),
-+		 SEEK_SET))
-+	{
-+	  error (_("Unable to seek to start of dynamic information\n"));
-+	  return 0;
-+	}
-+
-+      if (fread (nb, 16, 1, file) != 1)
-+	{
-+	  error (_("Failed to read in number of buckets\n"));
-+	  return 0;
-+	}
- 
--      printf (_("\nSymbol table for image:\n"));
-+      ngnubuckets = byte_get (nb, 4);
-+      gnusymidx = byte_get (nb + 4, 4);
-+      bitmaskwords = byte_get (nb + 8, 4);
-+      buckets_vma = dynamic_info_DT_GNU_HASH + 16;
-       if (is_32bit_elf)
--	printf (_("  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"));
-+	buckets_vma += bitmaskwords * 4;
-       else
--	printf (_("  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"));
-+	buckets_vma += bitmaskwords * 8;
- 
--      for (hn = 0; hn < nbuckets; hn++)
-+      if (fseek (file,
-+		 (archive_file_offset
-+		  + offset_from_vma (file, buckets_vma, 4)),
-+		 SEEK_SET))
- 	{
--	  if (! buckets[hn])
--	    continue;
-+	  error (_("Unable to seek to start of dynamic information\n"));
-+	  return 0;
-+	}
-+
-+      gnubuckets = get_dynamic_data (file, ngnubuckets, 4);
-+
-+      if (gnubuckets == NULL)
-+	return 0;
-+
-+      for (i = 0; i < ngnubuckets; i++)
-+	if (gnubuckets[i] != 0)
-+	  {
-+	    if (gnubuckets[i] < gnusymidx)
-+	      return 0;
-+
-+	    if (maxchain == 0xffffffff || gnubuckets[i] > maxchain)
-+	      maxchain = gnubuckets[i];
-+	  }
-+
-+      if (maxchain == 0xffffffff)
-+	return 0;
- 
--	  for (si = buckets[hn]; si < nchains && si > 0; si = chains[si])
-+      maxchain -= gnusymidx;
-+
-+      if (fseek (file,
-+		 (archive_file_offset
-+		  + offset_from_vma (file, buckets_vma
-+					   + 4 * (ngnubuckets + maxchain), 4)),
-+		 SEEK_SET))
-+	{
-+	  error (_("Unable to seek to start of dynamic information\n"));
-+	  return 0;
-+	}
-+
-+      do
-+	{
-+	  if (fread (nb, 4, 1, file) != 1)
- 	    {
--	      Elf_Internal_Sym *psym;
--	      int n;
-+	      error (_("Failed to determine last chain length\n"));
-+	      return 0;
-+	    }
- 
--	      psym = dynamic_symbols + si;
-+	  if (maxchain + 1 == 0)
-+	    return 0;
- 
--	      n = print_vma (si, DEC_5);
--	      if (n < 5)
--		fputs ("     " + n, stdout);
--	      printf (" %3lu: ", hn);
--	      print_vma (psym->st_value, LONG_HEX);
--	      putchar (' ');
--	      print_vma (psym->st_size, DEC_5);
-+	  ++maxchain;
-+	}
-+      while ((byte_get (nb, 4) & 1) == 0);
- 
--	      printf ("  %6s", get_symbol_type (ELF_ST_TYPE (psym->st_info)));
--	      printf (" %6s",  get_symbol_binding (ELF_ST_BIND (psym->st_info)));
--	      printf (" %3s",  get_symbol_visibility (ELF_ST_VISIBILITY (psym->st_other)));
--	      /* Check to see if any other bits in the st_other field are set.
--	         Note - displaying this information disrupts the layout of the
--	         table being generated, but for the moment this case is very rare.  */
--	      if (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other))
--		printf (" [%s] ", get_symbol_other (psym->st_other ^ ELF_ST_VISIBILITY (psym->st_other)));
--	      printf (" %3.3s ", get_symbol_index_type (psym->st_shndx));
--	      if (VALID_DYNAMIC_NAME (psym->st_name))
--		print_symbol (25, GET_DYNAMIC_NAME (psym->st_name));
--	      else
--		printf (" <corrupt: %14ld>", psym->st_name);
--	      putchar ('\n');
-+      if (fseek (file,
-+		 (archive_file_offset
-+		  + offset_from_vma (file, buckets_vma + 4 * ngnubuckets, 4)),
-+		 SEEK_SET))
-+	{
-+	  error (_("Unable to seek to start of dynamic information\n"));
-+	  return 0;
-+	}
-+
-+      gnuchains = get_dynamic_data (file, maxchain, 4);
-+
-+      if (gnuchains == NULL)
-+	return 0;
-+    }
-+
-+  if ((dynamic_info[DT_HASH] || dynamic_info_DT_GNU_HASH)
-+      && do_syms
-+      && do_using_dynamic
-+      && dynamic_strings != NULL)
-+    {
-+      unsigned long hn;
-+
-+      if (dynamic_info[DT_HASH])
-+	{
-+	  bfd_vma si;
-+
-+	  printf (_("\nSymbol table for image:\n"));
-+	  if (is_32bit_elf)
-+	    printf (_("  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"));
-+	  else
-+	    printf (_("  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"));
-+
-+	  for (hn = 0; hn < nbuckets; hn++)
-+	    {
-+	      if (! buckets[hn])
-+		continue;
-+
-+	      for (si = buckets[hn]; si < nchains && si > 0; si = chains[si])
-+		print_dynamic_symbol (si, hn);
- 	    }
- 	}
-+
-+      if (dynamic_info_DT_GNU_HASH)
-+	{
-+	  printf (_("\nSymbol table of `.gnu.hash' for image:\n"));
-+	  if (is_32bit_elf)
-+	    printf (_("  Num Buc:    Value  Size   Type   Bind Vis      Ndx Name\n"));
-+	  else
-+	    printf (_("  Num Buc:    Value          Size   Type   Bind Vis      Ndx Name\n"));
-+
-+	  for (hn = 0; hn < ngnubuckets; ++hn)
-+	    if (gnubuckets[hn] != 0)
-+	      {
-+		bfd_vma si = gnubuckets[hn];
-+		bfd_vma off = si - gnusymidx;
-+
-+		do
-+		  {
-+		    print_dynamic_symbol (si, hn);
-+		    si++;
-+		  }
-+		while ((gnuchains[off++] & 1) == 0);
-+	      }
-+	}
-     }
-   else if (do_syms && !do_using_dynamic)
-     {
-@@ -7426,108 +7564,12 @@ process_symbol_table (FILE *file)
- 
-   if (do_histogram && dynamic_info_DT_GNU_HASH)
-     {
--      unsigned char nb[16];
--      bfd_vma i, maxchain = 0xffffffff, symidx, bitmaskwords;
-       unsigned long *lengths;
-       unsigned long *counts;
-       unsigned long hn;
-       unsigned long maxlength = 0;
-       unsigned long nzero_counts = 0;
-       unsigned long nsyms = 0;
--      bfd_vma buckets_vma;
--
--      if (fseek (file,
--		 (archive_file_offset
--		  + offset_from_vma (file, dynamic_info_DT_GNU_HASH,
--				     sizeof nb)),
--		 SEEK_SET))
--	{
--	  error (_("Unable to seek to start of dynamic information\n"));
--	  return 0;
--	}
--
--      if (fread (nb, 16, 1, file) != 1)
--	{
--	  error (_("Failed to read in number of buckets\n"));
--	  return 0;
--	}
--
--      ngnubuckets = byte_get (nb, 4);
--      symidx = byte_get (nb + 4, 4);
--      bitmaskwords = byte_get (nb + 8, 4);
--      buckets_vma = dynamic_info_DT_GNU_HASH + 16;
--      if (is_32bit_elf)
--	buckets_vma += bitmaskwords * 4;
--      else
--	buckets_vma += bitmaskwords * 8;
--
--      if (fseek (file,
--		 (archive_file_offset
--		  + offset_from_vma (file, buckets_vma, 4)),
--		 SEEK_SET))
--	{
--	  error (_("Unable to seek to start of dynamic information\n"));
--	  return 0;
--	}
--
--      gnubuckets = get_dynamic_data (file, ngnubuckets, 4);
--
--      if (gnubuckets == NULL)
--	return 0;
--
--      for (i = 0; i < ngnubuckets; i++)
--	if (gnubuckets[i] != 0)
--	  {
--	    if (gnubuckets[i] < symidx)
--	      return 0;
--
--	    if (maxchain == 0xffffffff || gnubuckets[i] > maxchain)
--	      maxchain = gnubuckets[i];
--	  }
--
--      if (maxchain == 0xffffffff)
--	return 0;
--
--      maxchain -= symidx;
--
--      if (fseek (file,
--		 (archive_file_offset
--		  + offset_from_vma (file, buckets_vma
--					   + 4 * (ngnubuckets + maxchain), 4)),
--		 SEEK_SET))
--	{
--	  error (_("Unable to seek to start of dynamic information\n"));
--	  return 0;
--	}
--
--      do
--	{
--	  if (fread (nb, 4, 1, file) != 1)
--	    {
--	      error (_("Failed to determine last chain length\n"));
--	      return 0;
--	    }
--
--	  if (maxchain + 1 == 0)
--	    return 0;
--
--	  ++maxchain;
--	}
--      while ((byte_get (nb, 4) & 1) == 0);
--
--      if (fseek (file,
--		 (archive_file_offset
--		  + offset_from_vma (file, buckets_vma + 4 * ngnubuckets, 4)),
--		 SEEK_SET))
--	{
--	  error (_("Unable to seek to start of dynamic information\n"));
--	  return 0;
--	}
--
--      gnuchains = get_dynamic_data (file, maxchain, 4);
--
--      if (gnuchains == NULL)
--	return 0;
- 
-       lengths = calloc (ngnubuckets, sizeof (*lengths));
-       if (lengths == NULL)
-@@ -7545,7 +7587,7 @@ process_symbol_table (FILE *file)
- 	  {
- 	    bfd_vma off, length = 1;
- 
--	    for (off = gnubuckets[hn] - symidx;
-+	    for (off = gnubuckets[hn] - gnusymidx;
- 		 (gnuchains[off] & 1) == 0; ++off)
- 	      ++length;
- 	    lengths[hn] = length;
---- binutils/ld/testsuite/ld-elf/hash.d.hash	2006-09-15 07:55:42.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/hash.d	2007-05-09 15:46:56.000000000 -0700
-@@ -1,5 +1,5 @@
- #source: start.s
--#readelf: -d 
-+#readelf: -d -s -D
- #ld: -shared --hash-style=gnu
- #target: *-*-linux*
- #notarget: mips*-*-*
-@@ -7,3 +7,11 @@
- #...
- [ 	]*0x[0-9a-z]+[ 	]+\(GNU_HASH\)[ 	]+0x[0-9a-z]+
- #...
-+[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] _start
-+#...
-+[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] main
-+#...
-+[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] start
-+#...
-+[ 	]+[0-9]+[ 	]+[0-9]+:[ 	]+[0-9a-f]+[ 	]+[0-9]+[ 	]+NOTYPE[	 ]+GLOBAL DEFAULT[ 	]+[1-9] __start
-+#...
diff -Nur binutils-2.18.50.0.1/patches/binutils-indirect-1.patch binutils-stable/patches/binutils-indirect-1.patch
--- binutils-2.18.50.0.1/patches/binutils-indirect-1.patch	2006-10-20 20:51:01.000000000 +0200
+++ binutils-stable/patches/binutils-indirect-1.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,532 +0,0 @@
-bfd/
-
-2006-10-17  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/3351
-	* elflink.c (_bfd_elf_update_dynamic_flags): New.
-	(_bfd_elf_merge_symbol): Update both real and indirect symbol
-	dynamic flags.
-	(_bfd_elf_add_default_symbol): Make the real symbol dynamic if
-	the indirect symbol is defined in a shared library.
-	(elf_link_add_object_symbols): Likewise.  If the indirect
-	symbol has been forced local, don't make the real symbol
-	dynamic.
-	(elf_link_check_versioned_symbol): Check indirect symbol.
-	(elf_link_output_extsym): Use real symbol definition when
-	reporting indirect symbol error.  Check version info for
-	dynamic versioned symbol.
-
-ld/testsuite/
-
-2006-10-17  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR ld/3351
-	* ld-elf/indirect.exp: New file.
-	* ld-elf/indirect1a.c: Likewise.
-	* ld-elf/indirect1b.c: Likewise.
-	* ld-elf/indirect1c.c: Likewise.
-	* ld-elf/indirect2.c: Likewise.
-	* ld-elf/indirect3.out: Likewise.
-	* ld-elf/indirect3a.c: Likewise.
-	* ld-elf/indirect3b.c: Likewise.
-	* ld-elf/indirect3c.c: Likewise.
-	* ld-elf/indirect4.out: Likewise.
-	* ld-elf/indirect4a.c: Likewise.
-	* ld-elf/indirect4b.c: Likewise.
-	* ld-elf/indirect4c.c: Likewise.
-
---- binutils/bfd/elflink.c.indirect	2006-10-18 09:25:03.000000000 -0700
-+++ binutils/bfd/elflink.c	2006-10-18 17:50:21.000000000 -0700
-@@ -801,6 +801,33 @@ _bfd_elf_link_renumber_dynsyms (bfd *out
-   return dynsymcount;
- }
- 
-+/* Mark if a symbol has a definition in a dynamic object or is
-+   weak in all dynamic objects.  */
-+
-+static void
-+_bfd_elf_mark_dynamic_def_weak (struct elf_link_hash_entry *h,
-+				asection *sec, int bind)
-+{
-+  if (!h->dynamic_def)
-+    {
-+      if (!bfd_is_und_section (sec))
-+	h->dynamic_def = 1;
-+      else
-+	{
-+	  /* Check if this symbol is weak in all dynamic objects. If it
-+	     is the first time we see it in a dynamic object, we mark
-+	     if it is weak. Otherwise, we clear it.  */
-+	  if (!h->ref_dynamic)
-+	    {
-+	      if (bind == STB_WEAK)
-+		h->dynamic_weak = 1;
-+	    }
-+	  else if (bind != STB_WEAK)
-+	    h->dynamic_weak = 0;
-+	}
-+    }
-+}
-+
- /* This function is called when we want to define a new symbol.  It
-    handles the various cases which arise when we find a definition in
-    a dynamic object, or when there is already a definition in a
-@@ -829,6 +856,7 @@ _bfd_elf_merge_symbol (bfd *abfd,
- {
-   asection *sec, *oldsec;
-   struct elf_link_hash_entry *h;
-+  struct elf_link_hash_entry *hi;
-   struct elf_link_hash_entry *flip;
-   int bind;
-   bfd *oldbfd;
-@@ -865,8 +893,9 @@ _bfd_elf_merge_symbol (bfd *abfd,
-   if (info->hash->creator != abfd->xvec)
-     return TRUE;
- 
--  /* For merging, we only care about real symbols.  */
--
-+  /* For merging, we only care about real symbols.  But we need to make
-+     sure that indirect symbol dynamic flags are updated.  */
-+  hi = h;
-   while (h->root.type == bfd_link_hash_indirect
- 	 || h->root.type == bfd_link_hash_warning)
-     h = (struct elf_link_hash_entry *) h->root.u.i.link;
-@@ -1018,23 +1047,11 @@ _bfd_elf_merge_symbol (bfd *abfd,
-   /* We need to remember if a symbol has a definition in a dynamic
-      object or is weak in all dynamic objects. Internal and hidden
-      visibility will make it unavailable to dynamic objects.  */
--  if (newdyn && !h->dynamic_def)
-+  if (newdyn)
-     {
--      if (!bfd_is_und_section (sec))
--	h->dynamic_def = 1;
--      else
--	{
--	  /* Check if this symbol is weak in all dynamic objects. If it
--	     is the first time we see it in a dynamic object, we mark
--	     if it is weak. Otherwise, we clear it.  */
--	  if (!h->ref_dynamic)
--	    {
--	      if (bind == STB_WEAK)
--		h->dynamic_weak = 1;
--	    }
--	  else if (bind != STB_WEAK)
--	    h->dynamic_weak = 0;
--	}
-+      _bfd_elf_mark_dynamic_def_weak (h, sec, bind);
-+      if (h != hi)
-+	_bfd_elf_mark_dynamic_def_weak (hi, sec, bind);
-     }
- 
-   /* If the old symbol has non-default visibility, we ignore the new
-@@ -1046,6 +1063,7 @@ _bfd_elf_merge_symbol (bfd *abfd,
-       *skip = TRUE;
-       /* Make sure this symbol is dynamic.  */
-       h->ref_dynamic = 1;
-+      hi->ref_dynamic = 1;
-       /* A protected symbol has external availability. Make sure it is
- 	 recorded as dynamic.
- 
-@@ -1572,6 +1590,7 @@ _bfd_elf_add_default_symbol (bfd *abfd,
- 	  if (! dynamic)
- 	    {
- 	      if (info->shared
-+		  || hi->def_dynamic
- 		  || hi->ref_dynamic)
- 		*dynsym = TRUE;
- 	    }
-@@ -3644,6 +3663,7 @@ elf_link_add_object_symbols (bfd *abfd, 
-       flagword flags;
-       const char *name;
-       struct elf_link_hash_entry *h;
-+      struct elf_link_hash_entry *hi;
-       bfd_boolean definition;
-       bfd_boolean size_change_ok;
-       bfd_boolean type_change_ok;
-@@ -3934,6 +3954,9 @@ elf_link_add_object_symbols (bfd *abfd, 
- 	goto error_free_vers;
- 
-       h = *sym_hash;
-+      /* We need to make sure that indirect symbol dynamic flags are
-+	 updated.  */
-+      hi = h;
-       while (h->root.type == bfd_link_hash_indirect
- 	     || h->root.type == bfd_link_hash_warning)
- 	h = (struct elf_link_hash_entry *) h->root.u.i.link;
-@@ -4137,22 +4160,36 @@ elf_link_add_object_symbols (bfd *abfd, 
- 		}
- 	      else
- 		h->def_regular = 1;
--	      if (! info->executable
--		  || h->def_dynamic
--		  || h->ref_dynamic)
-+
-+	      /* If the indirect symbol has been forced local, don't
-+		 make the real symbol dynamic.  */
-+	      if ((h == hi || !hi->forced_local)
-+		  && (! info->executable
-+		      || h->def_dynamic
-+		      || h->ref_dynamic))
- 		dynsym = TRUE;
- 	    }
- 	  else
- 	    {
- 	      if (! definition)
--		h->ref_dynamic = 1;
-+		{
-+		  h->ref_dynamic = 1;
-+		  hi->ref_dynamic = 1;
-+		}
- 	      else
--		h->def_dynamic = 1;
--	      if (h->def_regular
--		  || h->ref_regular
--		  || (h->u.weakdef != NULL
--		      && ! new_weakdef
--		      && h->u.weakdef->dynindx != -1))
-+		{
-+		  h->def_dynamic = 1;
-+		  hi->def_dynamic = 1;
-+		}
-+
-+	      /* If the indirect symbol has been forced local, don't
-+		 make the real symbol dynamic.  */
-+	      if ((h == hi || !hi->forced_local)
-+		  && (h->def_regular
-+		      || h->ref_regular
-+		      || (h->u.weakdef != NULL
-+			  && ! new_weakdef
-+			  && h->u.weakdef->dynindx != -1)))
- 		dynsym = TRUE;
- 	    }
- 
-@@ -6729,6 +6766,10 @@ elf_link_check_versioned_symbol (struct 
-   if (!is_elf_hash_table (info->hash))
-     return FALSE;
- 
-+  /* Check indirect symbol.  */
-+  while (h->root.type == bfd_link_hash_indirect)
-+    h = (struct elf_link_hash_entry *) h->root.u.i.link;
-+
-   switch (h->root.type)
-     {
-     default:
-@@ -6937,11 +6978,17 @@ elf_link_output_extsym (struct elf_link_
-       && !h->dynamic_weak
-       && ! elf_link_check_versioned_symbol (finfo->info, bed, h))
-     {
-+      struct elf_link_hash_entry *hi = h;
-+
-+      /* Check indirect symbol.  */
-+      while (hi->root.type == bfd_link_hash_indirect)
-+	hi = (struct elf_link_hash_entry *) hi->root.u.i.link;
-+
-       (*_bfd_error_handler)
- 	(_("%B: %s symbol `%s' in %B is referenced by DSO"),
- 	 finfo->output_bfd,
--	 h->root.u.def.section == bfd_abs_section_ptr
--	 ? finfo->output_bfd : h->root.u.def.section->owner,
-+	 hi->root.u.def.section == bfd_abs_section_ptr
-+	 ? finfo->output_bfd : hi->root.u.def.section->owner,
- 	 ELF_ST_VISIBILITY (h->other) == STV_INTERNAL
- 	 ? "internal"
- 	 : ELF_ST_VISIBILITY (h->other) == STV_HIDDEN
-@@ -7137,6 +7184,23 @@ elf_link_output_extsym (struct elf_link_
-     {
-       bfd_byte *esym;
- 
-+      /* Since there is no version information in the dynamic string,
-+	 if there is no version info in symbol version section, we will
-+	 have a run-time problem.  */
-+      if (h->verinfo.verdef == NULL)
-+	{
-+	  char *p = strrchr (h->root.root.string, ELF_VER_CHR);
-+
-+	  if (p && p [1] != '\0')
-+	    {
-+	      (*_bfd_error_handler)
-+		(_("%B: No symbol version section for versioned symbol `%s'"),
-+		 finfo->output_bfd, h->root.root.string);
-+	      eoinfo->failed = TRUE;
-+	      return FALSE;
-+	    }
-+	}
-+
-       sym.st_name = h->dynstr_index;
-       esym = finfo->dynsym_sec->contents + h->dynindx * bed->s->sizeof_sym;
-       if (! check_dynsym (finfo->output_bfd, &sym))
---- binutils/ld/testsuite/ld-elf/indirect.exp.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect.exp	2006-10-18 16:13:52.000000000 -0700
-@@ -0,0 +1,126 @@
-+# Expect script for various indirect symbol tests.
-+#   Copyright 2006 Free Software Foundation, Inc.
-+#
-+# This file is free software; you can redistribute it and/or modify
-+# it under the terms of the GNU General Public License as published by
-+# the Free Software Foundation; either version 2 of the License, or
-+# (at your option) any later version.
-+#
-+# This program is distributed in the hope that it will be useful,
-+# but WITHOUT ANY WARRANTY; without even the implied warranty of
-+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-+# GNU General Public License for more details.
-+#
-+# You should have received a copy of the GNU General Public License
-+# along with this program; if not, write to the Free Software
-+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.
-+#
-+
-+#
-+# Written by H.J. Lu (hongjiu.lu@intel.com)
-+#
-+
-+# Exclude non-ELF targets.
-+
-+if ![is_elf_format] {
-+    return
-+}
-+
-+# Check if compiler works
-+if { [which $CC] == 0 } {
-+    return
-+}
-+
-+proc check_link_message { cmd string testname } {
-+    send_log "$cmd\n"
-+    verbose "$cmd"
-+    catch "exec $cmd" exec_output
-+    send_log "$exec_output\n"
-+    verbose "$exec_output"
-+
-+    foreach str $string {
-+	if [string match "*$str*" $exec_output] {
-+	    pass "$testname: $str"
-+	} else {
-+	    fail "$testname: $str"
-+	}
-+    }
-+}
-+
-+if { ![ld_compile $CC $srcdir/$subdir/indirect1a.c tmpdir/indirect1a.o]
-+     || ![ld_compile $CC $srcdir/$subdir/indirect1b.c tmpdir/indirect1b.o]
-+     || ![ld_compile "$CC -fPIC" $srcdir/$subdir/indirect2.c tmpdir/indirect2.o]
-+     || ![ld_compile $CC $srcdir/$subdir/indirect3a.c tmpdir/indirect3a.o]
-+     || ![ld_compile $CC $srcdir/$subdir/indirect3b.c tmpdir/indirect3b.o]
-+     || ![ld_compile $CC $srcdir/$subdir/indirect4a.c tmpdir/indirect4a.o]
-+     || ![ld_compile $CC $srcdir/$subdir/indirect4b.c tmpdir/indirect4b.o] } {
-+    unresolved "Indirect symbol tests"
-+    return
-+}
-+
-+set build_tests {
-+  {"Build libindirect1c.so"
-+   "-shared" "-fPIC"
-+   {indirect1c.c} {} "libindirect1c.so"}
-+  {"Build libindirect3c.so"
-+   "-shared" "-fPIC"
-+   {indirect3c.c} {} "libindirect3c.so"}
-+  {"Build libindirect4c.so"
-+   "-shared" "-fPIC"
-+   {indirect4c.c} {} "libindirect4c.so"}
-+}
-+
-+run_cc_link_tests $build_tests
-+
-+global ld
-+
-+set string ": final link failed: Nonrepresentable section on output"
-+
-+set string1 ": local symbol \`foo\' in tmpdir/indirect1b.o is referenced by DSO"
-+
-+set testname "Indirect symbol 1a"
-+set cmd "$ld -e start -o tmpdir/indirect1 tmpdir/indirect1a.o tmpdir/indirect1b.o tmpdir/libindirect1c.so"
-+check_link_message "$cmd" [list $string1 $string] "$testname"
-+
-+set testname "Indirect symbol 1b"
-+set cmd "$ld -e start -o tmpdir/indirect1 tmpdir/indirect1a.o tmpdir/libindirect1c.so tmpdir/indirect1b.o"
-+check_link_message "$cmd" [list $string1 $string] "$testname"
-+
-+set string2 ": No symbol version section for versioned symbol \`foo@FOO\'"
-+set testname "Indirect symbol 2"
-+set cmd "$ld -shared  -o tmpdir/indirect2.so tmpdir/indirect2.o"
-+check_link_message "$cmd" [list $string2 $string] "$testname"
-+
-+# The following tests require running the executable generated by ld.
-+if ![isnative] {
-+    return
-+}
-+
-+set run_tests {
-+    {"Run with libindirect3c.so 1"
-+     "tmpdir/indirect3a.o tmpdir/indirect3b.o tmpdir/libindirect3c.so" ""
-+     {dummy.c} "indirect3a" "indirect3.out"}
-+    {"Run with libindirect3c.so 2"
-+     "tmpdir/indirect3a.o tmpdir/libindirect3c.so tmpdir/indirect3b.o" ""
-+     {dummy.c} "indirect3b" "indirect3.out"}
-+    {"Run with libindirect3c.so 3"
-+     "tmpdir/indirect3b.o tmpdir/libindirect3c.so tmpdir/indirect3a.o" ""
-+     {dummy.c} "indirect3c" "indirect3.out"}
-+    {"Run with libindirect3c.so 4"
-+     "tmpdir/libindirect3c.so tmpdir/indirect3b.o tmpdir/indirect3a.o" ""
-+     {dummy.c} "indirect3d" "indirect3.out"}
-+    {"Run with libindirect4c.so 1"
-+     "tmpdir/indirect4a.o tmpdir/indirect4b.o tmpdir/libindirect4c.so" ""
-+     {dummy.c} "indirect4a" "indirect4.out"}
-+    {"Run with libindirect4c.so 2"
-+     "tmpdir/indirect4a.o tmpdir/libindirect4c.so tmpdir/indirect4b.o" ""
-+     {dummy.c} "indirect4b" "indirect4.out"}
-+    {"Run with libindirect4c.so 3"
-+     "tmpdir/indirect4b.o tmpdir/libindirect4c.so tmpdir/indirect4a.o" ""
-+     {dummy.c} "indirect4c" "indirect4.out"}
-+    {"Run with libindirect4c.so 4"
-+     "tmpdir/libindirect4c.so tmpdir/indirect4b.o tmpdir/indirect4a.o" ""
-+     {dummy.c} "indirect4d" "indirect4.out"}
-+}
-+
-+run_ld_link_exec_tests [] $run_tests
---- binutils/ld/testsuite/ld-elf/indirect1a.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect1a.c	2006-10-18 11:31:17.000000000 -0700
-@@ -0,0 +1,8 @@
-+extern void bar (void);
-+
-+int
-+start (void)
-+{
-+  bar ();
-+  return 0;
-+}
---- binutils/ld/testsuite/ld-elf/indirect1b.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect1b.c	2006-10-18 11:31:28.000000000 -0700
-@@ -0,0 +1,6 @@
-+void
-+foo (void)
-+{
-+}
-+
-+asm (".symver foo,foo@FOO");
---- binutils/ld/testsuite/ld-elf/indirect1c.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect1c.c	2006-10-18 11:31:11.000000000 -0700
-@@ -0,0 +1,7 @@
-+extern void foo (void);
-+
-+void
-+bar (void)
-+{
-+  foo ();
-+}
---- binutils/ld/testsuite/ld-elf/indirect2.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect2.c	2006-10-18 14:42:01.000000000 -0700
-@@ -0,0 +1,9 @@
-+extern void foo (void);
-+
-+asm (".symver foo,foo@@@FOO");
-+
-+void
-+bar (void)
-+{
-+  foo ();
-+}
---- binutils/ld/testsuite/ld-elf/indirect3.out.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect3.out	2006-10-18 15:43:56.000000000 -0700
-@@ -0,0 +1,2 @@
-+MAIN
-+DSO
---- binutils/ld/testsuite/ld-elf/indirect3a.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect3a.c	2006-10-18 15:41:03.000000000 -0700
-@@ -0,0 +1,10 @@
-+extern void bar (void);
-+extern void foo (void);
-+
-+int
-+main (void)
-+{
-+  foo ();
-+  bar ();
-+  return 0;
-+}
---- binutils/ld/testsuite/ld-elf/indirect3b.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect3b.c	2006-10-18 15:41:11.000000000 -0700
-@@ -0,0 +1,9 @@
-+#include <stdio.h>
-+
-+void
-+foo (void)
-+{
-+  printf ("MAIN\n");
-+}
-+
-+asm (".symver foo,foo@FOO");
---- binutils/ld/testsuite/ld-elf/indirect3c.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect3c.c	2006-10-18 15:41:17.000000000 -0700
-@@ -0,0 +1,15 @@
-+#include <stdio.h>
-+
-+extern void foo (void);
-+
-+void
-+foo (void)
-+{
-+  printf ("DSO\n");
-+}
-+
-+void
-+bar (void)
-+{
-+  foo ();
-+}
---- binutils/ld/testsuite/ld-elf/indirect4.out.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect4.out	2006-10-18 16:14:07.000000000 -0700
-@@ -0,0 +1,2 @@
-+MAIN2
-+MAIN2
---- binutils/ld/testsuite/ld-elf/indirect4a.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect4a.c	2006-10-18 16:11:52.000000000 -0700
-@@ -0,0 +1,10 @@
-+extern void bar (void);
-+extern void foo (void);
-+
-+int
-+main (void)
-+{
-+  foo ();
-+  bar ();
-+  return 0;
-+}
---- binutils/ld/testsuite/ld-elf/indirect4b.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect4b.c	2006-10-18 16:12:05.000000000 -0700
-@@ -0,0 +1,17 @@
-+#include <stdio.h>
-+
-+void
-+foo2 (void)
-+{
-+  printf ("MAIN2\n");
-+}
-+
-+asm (".symver foo2,foo@@FOO2");
-+
-+void
-+foo1 (void)
-+{
-+  printf ("MAIN1\n");
-+}
-+
-+asm (".symver foo1,foo@FOO1");
---- binutils/ld/testsuite/ld-elf/indirect4c.c.indirect	2006-10-18 17:53:28.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/indirect4c.c	2006-10-18 16:12:11.000000000 -0700
-@@ -0,0 +1,15 @@
-+#include <stdio.h>
-+
-+extern void foo (void);
-+
-+void
-+foo (void)
-+{
-+  printf ("DSO\n");
-+}
-+
-+void
-+bar (void)
-+{
-+  foo ();
-+}
diff -Nur binutils-2.18.50.0.1/patches/binutils-shr-83.patch binutils-stable/patches/binutils-shr-83.patch
--- binutils-2.18.50.0.1/patches/binutils-shr-83.patch	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/patches/binutils-shr-83.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,1186 +0,0 @@
-bfd/
-
-2007-01-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elf-bfd.h (_bfd_elf_sharable_com_section): New.
-	(_bfd_elf_add_sharable_symbol): Likewise.
-	(_bfd_elf_sharable_section_from_bfd_section): Likewise.
-	(_bfd_elf_sharable_symbol_processing): Likewise.
-	(_bfd_elf_sharable_common_definition): Likewise.
-	(_bfd_elf_sharable_common_section_index): Likewise.
-	(_bfd_elf_sharable_common_section): Likewise.
-	(_bfd_elf_sharable_merge_symbol): Likewise.
-
-	* elf.c (special_sections_g): Add ".gnu.linkonce.shrb" and
-	".gnu.linkonce.shrd".
-	(special_sections_s): Add ".sharable_bss" and ".sharable_data".
-	(get_program_header_size): Handle PT_GNU_SHR segment.
-	(_bfd_elf_map_sections_to_segments): Likewise.
-	(assign_file_positions_for_load_sections): Likewise.
-
-	* elf32-i386.c (elf_i386_link_hash_table): Add sdynsharablebss
-	and srelsharablebss fields.
-	(elf_i386_link_hash_table_create): Initialize sdynsharablebss
-	and srelsharablebss.
-	(elf_i386_create_dynamic_sections): Handle sdynsharablebss and
-	srelsharablebss.
-	(elf_i386_adjust_dynamic_symbol): Likewise.
-	(elf_i386_size_dynamic_sections): Likewise.
-	(elf_i386_finish_dynamic_symbol): Likewise.
-	(elf_backend_add_symbol_hook): Defined.
-	(elf_backend_section_from_bfd_section): Likewise.
-	(elf_backend_symbol_processing): Likewise.
-	(elf_backend_common_section_index): Likewise.
-	(elf_backend_common_section): Likewise.
-	(elf_backend_common_definition): Likewise.
-	(elf_backend_merge_symbol): Likewise.
-
-	* elf64-x86-64.c (elf64_x86_64_link_hash_table): Add
-	sdynsharablebss and srelsharablebss fields.
-	(elf64_x86_64_link_hash_table_create): Initialize sdynsharablebss
-	and srelsharablebss.
-	(elf64_x86_64_create_dynamic_sections): Handle sdynsharablebss
-	and srelsharablebss.
-	(elf64_x86_64_adjust_dynamic_symbol): Likewise.
-	(elf64_x86_64_size_dynamic_sections): Likewise.
-	(elf64_x86_64_finish_dynamic_symbol): Likewise.
-	(elf64_x86_64_add_symbol_hook): Handle sharable symbols.
-	(elf64_x86_64_elf_section_from_bfd_section): Likewise.
-	(elf64_x86_64_symbol_processing): Likewise.
-	(elf64_x86_64_merge_symbol): Likewise.
-	(elf64_x86_64_common_definition): Handle sharable sections.
-	(elf64_x86_64_common_section_index): Likewise.
-	(elf64_x86_64_common_section): Likewise.
-
-	* elflink.c (_bfd_elf_create_dynamic_sections): Handle
-	.dynsharablebss section.
-	(_bfd_elf_sharable_com_section): New.
-	(get_sharable_common_section): Likewise.
-	(_bfd_elf_add_sharable_symbol): Likewise.
-	(_bfd_elf_sharable_section_from_bfd_section): Likewise.
-	(_bfd_elf_sharable_symbol_processing): Likewise.
-	(_bfd_elf_sharable_common_definition): Likewise.
-	(_bfd_elf_sharable_common_section_index): Likewise.
-	(_bfd_elf_sharable_common_section): Likewise.
-	(_bfd_elf_sharable_merge_symbol): Likewise.
-
-	* elfxx-ia64.c (elfNN_ia64_add_symbol_hook): Handle sharable
-	symbols.
-	(elf_backend_add_symbol_hook): Defined.
-	(elf_backend_section_from_bfd_section): Likewise.
-	(elf_backend_symbol_processing): Likewise.
-	(elf_backend_common_section_index): Likewise.
-	(elf_backend_common_section): Likewise.
-	(elf_backend_common_definition): Likewise.
-	(elf_backend_merge_symbol): Likewise.
-
-binutils/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* readelf.c (dump_relocations): Handle sharable sections.
-	(get_segment_type): Handle sharable segment.
-	(get_symbol_index_type): Handle sharable sections.
-
-gas/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* config/obj-elf.c (obj_elf_sharable_common): New.
-	(elf_pseudo_table): Add "sharable_common".
-	(obj_elf_change_section): Handle sharable sections.
-
-include/
-
-2007-01-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* bfdlink.h (bfd_link_info): Add sharable_sections.
-
-include/elf/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* common.h (PT_GNU_SHR): New.
-	(SHF_GNU_SHARABLE): Likewise.
-	(SHN_GNU_SHARABLE_COMMON): Likewise.
-
-ld/
-
-2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* emulparams/elf64_ia64.sh (SHARABLE_SECTIONS): Set to yes.
-	* emulparams/elf_i386.sh (SHARABLE_SECTIONS): Likewise.
-	* emulparams/elf_x86_64.sh (SHARABLE_SECTIONS): Likewise.
-
-	* emultempl/elf32.em (gld${EMULATION_NAME}_before_parse): Set
-	link_info.sharable_sections based on $SHARABLE_SECTIONS.
-	(gld${EMULATION_NAME}_place_orphan): Don't allow orphaned
-	sharable sections.
-
-	* ldmain.c (main): Initialize link_info.sharable_sections.
-	* scripttempl/elf.sc: Support sharable sections.
-
---- binutils/bfd/elf-bfd.h.shr	2007-06-02 07:39:38.000000000 -0700
-+++ binutils/bfd/elf-bfd.h	2007-06-02 07:39:38.000000000 -0700
-@@ -1856,6 +1856,28 @@ extern bfd_boolean bfd_elf_link_add_symb
-   (bfd *, struct bfd_link_info *);
- extern bfd_boolean _bfd_elf_add_dynamic_entry
-   (struct bfd_link_info *, bfd_vma, bfd_vma);
-+extern asection _bfd_elf_sharable_com_section;
-+extern bfd_boolean _bfd_elf_add_sharable_symbol
-+  (bfd *, struct bfd_link_info *, Elf_Internal_Sym *, const char **,
-+   flagword *, asection **, bfd_vma *);
-+extern bfd_boolean _bfd_elf_sharable_section_from_bfd_section
-+  (bfd *, asection *, int *);
-+extern void _bfd_elf_sharable_symbol_processing
-+  (bfd *, asymbol *);
-+extern bfd_boolean _bfd_elf_sharable_common_definition
-+  (Elf_Internal_Sym *);
-+extern unsigned int _bfd_elf_sharable_common_section_index
-+  (asection *);
-+extern asection *_bfd_elf_sharable_common_section
-+  (asection *);
-+extern bfd_boolean _bfd_elf_sharable_merge_symbol
-+  (struct bfd_link_info *, struct elf_link_hash_entry **,
-+   struct elf_link_hash_entry *, Elf_Internal_Sym *, asection **,
-+   bfd_vma *, unsigned int *, bfd_boolean *, bfd_boolean *,
-+   bfd_boolean *, bfd_boolean *, bfd_boolean *, bfd_boolean *,
-+   bfd_boolean *, bfd_boolean *, bfd *, asection **,
-+   bfd_boolean *, bfd_boolean *, bfd_boolean *, bfd_boolean *,
-+   bfd *, asection **);
- 
- extern bfd_boolean bfd_elf_link_record_dynamic_symbol
-   (struct bfd_link_info *, struct elf_link_hash_entry *);
---- binutils/bfd/elf.c.shr	2007-06-02 07:39:38.000000000 -0700
-+++ binutils/bfd/elf.c	2007-06-02 07:39:38.000000000 -0700
-@@ -2343,6 +2343,8 @@ static const struct bfd_elf_special_sect
-   { STRING_COMMA_LEN (".gnu.liblist"),     0, SHT_GNU_LIBLIST, SHF_ALLOC },
-   { STRING_COMMA_LEN (".gnu.conflict"),    0, SHT_RELA,        SHF_ALLOC },
-   { STRING_COMMA_LEN (".gnu.hash"),        0, SHT_GNU_HASH,    SHF_ALLOC },
-+  { STRING_COMMA_LEN (".gnu.linkonce.shrb"), -2, SHT_NOBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
-+  { STRING_COMMA_LEN (".gnu.linkonce.shrd"), -2, SHT_PROGBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
-   { NULL,                        0,        0, 0,               0 }
- };
- 
-@@ -2397,6 +2399,8 @@ static const struct bfd_elf_special_sect
-   /* See struct bfd_elf_special_section declaration for the semantics of
-      this special case where .prefix_length != strlen (.prefix).  */
-   { ".stabstr",			5,  3, SHT_STRTAB, 0 },
-+  { STRING_COMMA_LEN (".sharable_bss"), -2, SHT_NOBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
-+  { STRING_COMMA_LEN (".sharable_data"), -2, SHT_PROGBITS, SHF_ALLOC + SHF_WRITE + SHF_GNU_SHARABLE},
-   { NULL,                       0,  0, 0,          0 }
- };
- 
-@@ -3694,6 +3698,32 @@ get_program_header_size (bfd *abfd, stru
- 	}
-     }
- 
-+  /* Check to see if we need a PT_GNU_SHR segment for sharable data
-+     sections.  */
-+  for (s = abfd->sections; s != NULL; s = s->next)
-+    {
-+      if ((elf_section_flags (s) & SHF_GNU_SHARABLE) != 0
-+	  && elf_section_type (s) == SHT_PROGBITS)
-+	{
-+	  /* We need a PT_GNU_SHR segment.  */
-+	  ++segs;
-+	  break;
-+	}
-+    }
-+
-+  /* Check to see if we need a PT_GNU_SHR segment for sharable bss
-+     sections.  */
-+  for (s = abfd->sections; s != NULL; s = s->next)
-+    {
-+      if ((elf_section_flags (s) & SHF_GNU_SHARABLE) != 0
-+	  && elf_section_type (s) == SHT_NOBITS)
-+	{
-+	  /* We need a PT_GNU_SHR segment.  */
-+	  ++segs;
-+	  break;
-+	}
-+    }
-+
-   /* Let the backend count up any program headers it might need.  */
-   bed = get_elf_backend_data (abfd);
-   if (bed->elf_backend_additional_program_headers)
-@@ -3834,6 +3864,8 @@ _bfd_elf_map_sections_to_segments (bfd *
-       bfd_boolean phdr_in_segment = TRUE;
-       bfd_boolean writable;
-       int tls_count = 0;
-+      int sharable_data_count = 0, sharable_bss_count = 0;
-+      asection *first_sharable_data = NULL, *first_sharable_bss = NULL;
-       asection *first_tls = NULL;
-       asection *dynsec, *eh_frame_hdr;
-       bfd_size_type amt;
-@@ -4083,6 +4115,22 @@ _bfd_elf_map_sections_to_segments (bfd *
- 		first_tls = s;
- 	      tls_count++;
- 	    }
-+	  if (elf_section_flags (s) & SHF_GNU_SHARABLE)
-+	    {
-+	      if (elf_section_type (s) == SHT_PROGBITS)
-+		{
-+		  if (! sharable_data_count)
-+		    first_sharable_data = s;
-+		  sharable_data_count++;
-+		}
-+	      else
-+		{
-+		  BFD_ASSERT (elf_section_type (s) == SHT_NOBITS);
-+		  if (! sharable_bss_count)
-+		    first_sharable_bss = s;
-+		  sharable_bss_count++;
-+		}
-+	    }
- 	}
- 
-       /* If there are any SHF_TLS output sections, add PT_TLS segment.  */
-@@ -4112,6 +4160,60 @@ _bfd_elf_map_sections_to_segments (bfd *
- 	  pm = &m->next;
- 	}
- 
-+      /* If there are any output SHF_GNU_SHARABLE data sections, add a
-+	 PT_GNU_SHR segment.  */
-+      if (sharable_data_count > 0)
-+	{
-+	  int i;
-+
-+	  amt = sizeof (struct elf_segment_map);
-+	  amt += (sharable_data_count - 1) * sizeof (asection *);
-+	  m = bfd_zalloc (abfd, amt);
-+	  if (m == NULL)
-+	    goto error_return;
-+	  m->next = NULL;
-+	  m->p_type = PT_GNU_SHR;
-+	  m->count = sharable_data_count;
-+	  /* Mandated PF_R.  */
-+	  m->p_flags = PF_R;
-+	  m->p_flags_valid = 1;
-+	  for (i = 0; i < sharable_data_count; ++i)
-+	    {
-+	      m->sections[i] = first_sharable_data;
-+	      first_sharable_data = first_sharable_data->next;
-+	    }
-+
-+	  *pm = m;
-+	   pm = &m->next;
-+	}
-+
-+      /* If there are any output SHF_GNU_SHARABLE bss sections, add a
-+	 PT_GNU_SHR segment.  */
-+      if (sharable_bss_count > 0)
-+	{
-+	  int i;
-+
-+	  amt = sizeof (struct elf_segment_map);
-+	  amt += (sharable_bss_count - 1) * sizeof (asection *);
-+	  m = bfd_zalloc (abfd, amt);
-+	  if (m == NULL)
-+	    goto error_return;
-+	  m->next = NULL;
-+	  m->p_type = PT_GNU_SHR;
-+	  m->count = sharable_bss_count;
-+	  /* Mandated PF_R.  */
-+	  m->p_flags = PF_R;
-+	  m->p_flags_valid = 1;
-+	  for (i = 0; i < sharable_bss_count; ++i)
-+	    {
-+	      m->sections[i] = first_sharable_bss;
-+	      first_sharable_bss = first_sharable_bss->next;
-+	    }
-+
-+	  *pm = m;
-+	   pm = &m->next;
-+	}
-+
-       /* If there is a .eh_frame_hdr section, throw in a PT_GNU_EH_FRAME
- 	 segment.  */
-       eh_frame_hdr = elf_tdata (abfd)->eh_frame_hdr;
-@@ -4531,6 +4633,7 @@ assign_file_positions_for_load_sections 
- 	  align = (bfd_size_type) 1 << bfd_get_section_alignment (abfd, sec);
- 
- 	  if (p->p_type == PT_LOAD
-+	      || p->p_type == PT_GNU_SHR
- 	      || p->p_type == PT_TLS)
- 	    {
- 	      bfd_signed_vma adjust = sec->lma - (p->p_paddr + p->p_memsz);
---- binutils/bfd/elf32-i386.c.shr	2007-05-15 07:35:03.000000000 -0700
-+++ binutils/bfd/elf32-i386.c	2007-06-02 07:39:38.000000000 -0700
-@@ -660,6 +660,8 @@ struct elf_i386_link_hash_table
-   asection *srelplt;
-   asection *sdynbss;
-   asection *srelbss;
-+  asection *sdynsharablebss;
-+  asection *srelsharablebss;
- 
-   /* The (unloaded but important) .rel.plt.unloaded section on VxWorks.  */
-   asection *srelplt2;
-@@ -752,6 +754,8 @@ elf_i386_link_hash_table_create (bfd *ab
-   ret->srelplt = NULL;
-   ret->sdynbss = NULL;
-   ret->srelbss = NULL;
-+  ret->sdynsharablebss = NULL;
-+  ret->srelsharablebss = NULL;
-   ret->tls_ldm_got.refcount = 0;
-   ret->next_tls_desc_index = 0;
-   ret->sgotplt_jump_table_size = 0;
-@@ -812,10 +816,19 @@ elf_i386_create_dynamic_sections (bfd *d
-   htab->srelplt = bfd_get_section_by_name (dynobj, ".rel.plt");
-   htab->sdynbss = bfd_get_section_by_name (dynobj, ".dynbss");
-   if (!info->shared)
--    htab->srelbss = bfd_get_section_by_name (dynobj, ".rel.bss");
-+    {
-+      htab->srelbss = bfd_get_section_by_name (dynobj, ".rel.bss");
-+      htab->sdynsharablebss
-+	= bfd_get_section_by_name (dynobj, ".dynsharablebss");
-+      htab->srelsharablebss
-+	= bfd_get_section_by_name (dynobj, ".rel.sharable_bss");
-+    }
- 
-   if (!htab->splt || !htab->srelplt || !htab->sdynbss
--      || (!info->shared && !htab->srelbss))
-+      || (!info->shared
-+	  && (!htab->srelbss
-+	      || !htab->sdynsharablebss
-+	      || !htab->srelsharablebss)))
-     abort ();
- 
-   if (htab->is_vxworks
-@@ -1529,17 +1542,23 @@ elf_i386_adjust_dynamic_symbol (struct b
-      both the dynamic object and the regular object will refer to the
-      same memory location for the variable.  */
- 
-+  s = htab->sdynbss;
-+
-   /* We must generate a R_386_COPY reloc to tell the dynamic linker to
-      copy the initial value out of the dynamic object and into the
-      runtime process image.  */
-   if ((h->root.u.def.section->flags & SEC_ALLOC) != 0)
-     {
--      htab->srelbss->size += sizeof (Elf32_External_Rel);
-+      if (elf_section_flags (h->root.u.def.section) & SHF_GNU_SHARABLE)
-+	{
-+	  htab->srelsharablebss->size += sizeof (Elf32_External_Rel);
-+	  s = htab->sdynsharablebss;
-+	}
-+      else
-+	htab->srelbss->size += sizeof (Elf32_External_Rel);
-       h->needs_copy = 1;
-     }
- 
--  s = htab->sdynbss;
--
-   return _bfd_elf_adjust_dynamic_copy (h, s);
- }
- 
-@@ -1993,7 +2012,8 @@ elf_i386_size_dynamic_sections (bfd *out
-       if (s == htab->splt
- 	  || s == htab->sgot
- 	  || s == htab->sgotplt
--	  || s == htab->sdynbss)
-+	  || s == htab->sdynbss
-+	  || s == htab->sdynsharablebss)
- 	{
- 	  /* Strip this section if we don't need it; see the
- 	     comment below.  */
-@@ -3531,21 +3551,27 @@ elf_i386_finish_dynamic_symbol (bfd *out
-     {
-       Elf_Internal_Rela rel;
-       bfd_byte *loc;
-+      asection *s;
-+
-+      if (h->root.u.def.section == htab->sdynsharablebss)
-+	s = htab->srelsharablebss;
-+      else
-+	s = htab->srelbss;
- 
-       /* This symbol needs a copy reloc.  Set it up.  */
- 
-       if (h->dynindx == -1
- 	  || (h->root.type != bfd_link_hash_defined
- 	      && h->root.type != bfd_link_hash_defweak)
--	  || htab->srelbss == NULL)
-+	  || s == NULL)
- 	abort ();
- 
-       rel.r_offset = (h->root.u.def.value
- 		      + h->root.u.def.section->output_section->vma
- 		      + h->root.u.def.section->output_offset);
-       rel.r_info = ELF32_R_INFO (h->dynindx, R_386_COPY);
--      loc = htab->srelbss->contents;
--      loc += htab->srelbss->reloc_count++ * sizeof (Elf32_External_Rel);
-+      loc = s->contents;
-+      loc += s->reloc_count++ * sizeof (Elf32_External_Rel);
-       bfd_elf32_swap_reloc_out (output_bfd, &rel, loc);
-     }
- 
-@@ -3833,6 +3859,21 @@ elf_i386_hash_symbol (struct elf_link_ha
- #define elf_backend_plt_sym_val		      elf_i386_plt_sym_val
- #define elf_backend_hash_symbol		      elf_i386_hash_symbol
- 
-+#define elf_backend_add_symbol_hook \
-+  _bfd_elf_add_sharable_symbol
-+#define elf_backend_section_from_bfd_section \
-+  _bfd_elf_sharable_section_from_bfd_section
-+#define elf_backend_symbol_processing \
-+  _bfd_elf_sharable_symbol_processing
-+#define elf_backend_common_section_index \
-+  _bfd_elf_sharable_common_section_index
-+#define elf_backend_common_section \
-+  _bfd_elf_sharable_common_section
-+#define elf_backend_common_definition \
-+  _bfd_elf_sharable_common_definition
-+#define elf_backend_merge_symbol \
-+  _bfd_elf_sharable_merge_symbol
-+
- #include "elf32-target.h"
- 
- /* FreeBSD support.  */
---- binutils/bfd/elf64-x86-64.c.shr	2007-05-15 07:35:03.000000000 -0700
-+++ binutils/bfd/elf64-x86-64.c	2007-06-02 07:39:38.000000000 -0700
-@@ -469,6 +469,8 @@ struct elf64_x86_64_link_hash_table
-   asection *srelplt;
-   asection *sdynbss;
-   asection *srelbss;
-+  asection *sdynsharablebss;
-+  asection *srelsharablebss;
- 
-   /* The offset into splt of the PLT entry for the TLS descriptor
-      resolver.  Special values are 0, if not necessary (or not found
-@@ -556,6 +558,8 @@ elf64_x86_64_link_hash_table_create (bfd
-   ret->srelplt = NULL;
-   ret->sdynbss = NULL;
-   ret->srelbss = NULL;
-+  ret->sdynsharablebss = NULL;
-+  ret->srelsharablebss = NULL;
-   ret->sym_sec.abfd = NULL;
-   ret->tlsdesc_plt = 0;
-   ret->tlsdesc_got = 0;
-@@ -614,10 +618,19 @@ elf64_x86_64_create_dynamic_sections (bf
-   htab->srelplt = bfd_get_section_by_name (dynobj, ".rela.plt");
-   htab->sdynbss = bfd_get_section_by_name (dynobj, ".dynbss");
-   if (!info->shared)
--    htab->srelbss = bfd_get_section_by_name (dynobj, ".rela.bss");
-+    {
-+      htab->srelbss = bfd_get_section_by_name (dynobj, ".rela.bss");
-+      htab->sdynsharablebss
-+	= bfd_get_section_by_name (dynobj, ".dynsharablebss");
-+      htab->srelsharablebss
-+	= bfd_get_section_by_name (dynobj, ".rela.sharable_bss");
-+    }
- 
-   if (!htab->splt || !htab->srelplt || !htab->sdynbss
--      || (!info->shared && !htab->srelbss))
-+      || (!info->shared
-+	  && (!htab->srelbss
-+	      || !htab->sdynsharablebss
-+	      || !htab->srelsharablebss)))
-     abort ();
- 
-   return TRUE;
-@@ -1395,17 +1408,23 @@ elf64_x86_64_adjust_dynamic_symbol (stru
- 
-   htab = elf64_x86_64_hash_table (info);
- 
-+  s = htab->sdynbss;
-+
-   /* We must generate a R_X86_64_COPY reloc to tell the dynamic linker
-      to copy the initial value out of the dynamic object and into the
-      runtime process image.  */
-   if ((h->root.u.def.section->flags & SEC_ALLOC) != 0)
-     {
--      htab->srelbss->size += sizeof (Elf64_External_Rela);
-+      if (elf_section_flags (h->root.u.def.section) & SHF_GNU_SHARABLE)
-+	{
-+	  htab->srelsharablebss->size += sizeof (Elf64_External_Rela);
-+	  s = htab->sdynsharablebss;
-+	}
-+      else
-+	htab->srelbss->size += sizeof (Elf64_External_Rela);
-       h->needs_copy = 1;
-     }
- 
--  s = htab->sdynbss;
--
-   return _bfd_elf_adjust_dynamic_copy (h, s);
- }
- 
-@@ -1853,7 +1872,8 @@ elf64_x86_64_size_dynamic_sections (bfd 
-       if (s == htab->splt
- 	  || s == htab->sgot
- 	  || s == htab->sgotplt
--	  || s == htab->sdynbss)
-+	  || s == htab->sdynbss
-+	  || s == htab->sdynsharablebss)
- 	{
- 	  /* Strip this section if we don't need it; see the
- 	     comment below.  */
-@@ -3192,13 +3212,19 @@ elf64_x86_64_finish_dynamic_symbol (bfd 
-     {
-       Elf_Internal_Rela rela;
-       bfd_byte *loc;
-+      asection *s;
-+
-+      if (h->root.u.def.section == htab->sdynsharablebss)
-+	s = htab->srelsharablebss;
-+      else
-+	s = htab->srelbss;
- 
-       /* This symbol needs a copy reloc.  Set it up.  */
- 
-       if (h->dynindx == -1
- 	  || (h->root.type != bfd_link_hash_defined
- 	      && h->root.type != bfd_link_hash_defweak)
--	  || htab->srelbss == NULL)
-+	  || s == NULL)
- 	abort ();
- 
-       rela.r_offset = (h->root.u.def.value
-@@ -3206,8 +3232,8 @@ elf64_x86_64_finish_dynamic_symbol (bfd 
- 		       + h->root.u.def.section->output_offset);
-       rela.r_info = ELF64_R_INFO (h->dynindx, R_X86_64_COPY);
-       rela.r_addend = 0;
--      loc = htab->srelbss->contents;
--      loc += htab->srelbss->reloc_count++ * sizeof (Elf64_External_Rela);
-+      loc = s->contents;
-+      loc += s->reloc_count++ * sizeof (Elf64_External_Rela);
-       bfd_elf64_swap_reloca_out (output_bfd, &rela, loc);
-     }
- 
-@@ -3471,9 +3497,12 @@ elf64_x86_64_add_symbol_hook (bfd *abfd,
- 	}
-       *secp = lcomm;
-       *valp = sym->st_size;
-+      return TRUE;
-       break;
-     }
--  return TRUE;
-+
-+  return _bfd_elf_add_sharable_symbol (abfd, info, sym, namep, flagsp,
-+				       secp, valp);
- }
- 
- 
-@@ -3489,7 +3518,7 @@ elf64_x86_64_elf_section_from_bfd_sectio
-       *index = SHN_X86_64_LCOMMON;
-       return TRUE;
-     }
--  return FALSE;
-+  return _bfd_elf_sharable_section_from_bfd_section (abfd, sec, index);
- }
- 
- /* Process a symbol.  */
-@@ -3507,22 +3536,26 @@ elf64_x86_64_symbol_processing (bfd *abf
-       asym->value = elfsym->internal_elf_sym.st_size;
-       /* Common symbol doesn't set BSF_GLOBAL.  */
-       asym->flags &= ~BSF_GLOBAL;
-+      return;
-       break;
-     }
-+  
-+  _bfd_elf_sharable_symbol_processing (abfd, asym);
- }
- 
- static bfd_boolean
- elf64_x86_64_common_definition (Elf_Internal_Sym *sym)
- {
-   return (sym->st_shndx == SHN_COMMON
--	  || sym->st_shndx == SHN_X86_64_LCOMMON);
-+	  || sym->st_shndx == SHN_X86_64_LCOMMON
-+	  || _bfd_elf_sharable_common_definition (sym));
- }
- 
- static unsigned int
- elf64_x86_64_common_section_index (asection *sec)
- {
-   if ((elf_section_flags (sec) & SHF_X86_64_LARGE) == 0)
--    return SHN_COMMON;
-+    return _bfd_elf_sharable_common_section_index (sec);
-   else
-     return SHN_X86_64_LCOMMON;
- }
-@@ -3531,7 +3564,7 @@ static asection *
- elf64_x86_64_common_section (asection *sec)
- {
-   if ((elf_section_flags (sec) & SHF_X86_64_LARGE) == 0)
--    return bfd_com_section_ptr;
-+    return _bfd_elf_sharable_common_section (sec);
-   else
-     return &_bfd_elf_large_com_section;
- }
-@@ -3568,7 +3601,8 @@ elf64_x86_64_merge_symbol (struct bfd_li
-       && h->root.type == bfd_link_hash_common
-       && !*newdyn
-       && bfd_is_com_section (*sec)
--      && *oldsec != *sec)
-+      && *oldsec != *sec
-+      && _bfd_elf_sharable_common_section_index (*oldsec) == SHN_COMMON)
-     {
-       if (sym->st_shndx == SHN_COMMON
- 	  && (elf_section_flags (*oldsec) & SHF_X86_64_LARGE) != 0)
-@@ -3576,13 +3610,26 @@ elf64_x86_64_merge_symbol (struct bfd_li
- 	  h->root.u.c.p->section
- 	    = bfd_make_section_old_way (oldbfd, "COMMON");
- 	  h->root.u.c.p->section->flags = SEC_ALLOC;
-+	  return TRUE;
- 	}
-       else if (sym->st_shndx == SHN_X86_64_LCOMMON
- 	       && (elf_section_flags (*oldsec) & SHF_X86_64_LARGE) == 0)
--	*psec = *sec = bfd_com_section_ptr;
-+	{
-+	  *psec = *sec = bfd_com_section_ptr; 
-+	  return TRUE;
-+	}
-     }
- 
--  return TRUE;
-+  return _bfd_elf_sharable_merge_symbol (info, sym_hash, h, sym,
-+					 psec, pvalue, pold_alignment,
-+					 skip, override,
-+					 type_change_ok, size_change_ok,
-+					 newdyn, newdef,
-+					 newdyncommon, newweak,
-+					 abfd, sec,
-+					 olddyn, olddef,
-+					 olddyncommon, oldweak,
-+					 oldbfd, oldsec);
- }
- 
- static int
---- binutils/bfd/elflink.c.shr	2007-06-02 07:39:38.000000000 -0700
-+++ binutils/bfd/elflink.c	2007-06-02 07:39:38.000000000 -0700
-@@ -352,6 +352,27 @@ _bfd_elf_create_dynamic_sections (bfd *a
- 	  if (s == NULL
- 	      || ! bfd_set_section_alignment (abfd, s, bed->s->log_file_align))
- 	    return FALSE;
-+
-+	  if (info->sharable_sections)
-+	    {
-+	      s = bfd_make_section (abfd, ".dynsharablebss");
-+	      if (s == NULL
-+		  || ! bfd_set_section_flags (abfd, s,
-+					      (SEC_ALLOC
-+					       | SEC_LINKER_CREATED)))
-+		return FALSE;
-+
-+	      s = bfd_make_section (abfd,
-+				    (bed->default_use_rela_p
-+				     ? ".rela.sharable_bss"
-+				     : ".rel.sharable_bss"));
-+	      if (s == NULL
-+		  || ! bfd_set_section_flags (abfd, s,
-+					      flags | SEC_READONLY)
-+		  || ! bfd_set_section_alignment (abfd, s,
-+						  bed->s->log_file_align))
-+		return FALSE;
-+	    }
- 	}
-     }
- 
-@@ -11533,3 +11554,219 @@ _bfd_elf_common_section (asection *sec A
- {
-   return bfd_com_section_ptr;
- }
-+
-+asection _bfd_elf_sharable_com_section
-+  = BFD_FAKE_SECTION (_bfd_elf_sharable_com_section, SEC_IS_COMMON,
-+		      NULL, "SHARABLE_COMMON", 0);
-+ 
-+static asection *
-+get_sharable_common_section (bfd *abfd)
-+{
-+  asection *scomm = bfd_get_section_by_name (abfd, "SHARABLE_COMMON");
-+
-+  if (scomm == NULL)
-+    {
-+      scomm = bfd_make_section_with_flags (abfd,
-+					   "SHARABLE_COMMON",
-+					   (SEC_ALLOC
-+					    | SEC_IS_COMMON
-+					    | SEC_LINKER_CREATED));
-+      if (scomm == NULL)
-+	return scomm;
-+      elf_section_flags (scomm) |= SHF_GNU_SHARABLE;
-+    }
-+
-+  return scomm;
-+}
-+
-+bfd_boolean
-+_bfd_elf_add_sharable_symbol (bfd *abfd ATTRIBUTE_UNUSED,
-+			      struct bfd_link_info *info ATTRIBUTE_UNUSED,
-+			      Elf_Internal_Sym *sym,
-+			      const char **namep ATTRIBUTE_UNUSED,
-+			      flagword *flagsp ATTRIBUTE_UNUSED,
-+			      asection **secp,
-+			      bfd_vma *valp)
-+{
-+  asection *scomm;
-+
-+  switch (sym->st_shndx)
-+    {
-+    case SHN_GNU_SHARABLE_COMMON:
-+      scomm = get_sharable_common_section (abfd);
-+      if (scomm == NULL)
-+	return FALSE;
-+      *secp = scomm;
-+      *valp = sym->st_size;
-+      break;
-+    }
-+  return TRUE;
-+}
-+
-+bfd_boolean
-+_bfd_elf_sharable_section_from_bfd_section
-+  (bfd *abfd ATTRIBUTE_UNUSED, asection *sec, int *index)
-+{
-+  if (sec == &_bfd_elf_sharable_com_section)
-+    {
-+      *index = SHN_GNU_SHARABLE_COMMON;
-+      return TRUE;
-+    }
-+  return FALSE;
-+}
-+
-+void
-+_bfd_elf_sharable_symbol_processing (bfd *abfd ATTRIBUTE_UNUSED,
-+				     asymbol *asym)
-+{
-+  elf_symbol_type *elfsym = (elf_symbol_type *) asym;
-+
-+  switch (elfsym->internal_elf_sym.st_shndx)
-+    {
-+    case SHN_GNU_SHARABLE_COMMON:
-+      asym->section = &_bfd_elf_sharable_com_section;
-+      asym->value = elfsym->internal_elf_sym.st_size;
-+      asym->flags &= ~BSF_GLOBAL;
-+      break;
-+    }
-+}
-+
-+bfd_boolean
-+_bfd_elf_sharable_common_definition (Elf_Internal_Sym *sym)
-+{
-+  return (sym->st_shndx == SHN_COMMON
-+	  || sym->st_shndx == SHN_GNU_SHARABLE_COMMON);
-+}
-+
-+unsigned int
-+_bfd_elf_sharable_common_section_index (asection *sec)
-+{
-+  if ((elf_section_flags (sec) & SHF_GNU_SHARABLE) == 0)
-+    return SHN_COMMON;
-+  else
-+    return SHN_GNU_SHARABLE_COMMON;
-+}
-+
-+asection *
-+_bfd_elf_sharable_common_section (asection *sec)
-+{
-+  if ((elf_section_flags (sec) & SHF_GNU_SHARABLE) == 0)
-+    return bfd_com_section_ptr;
-+  else
-+    return &_bfd_elf_sharable_com_section;
-+}
-+
-+bfd_boolean
-+_bfd_elf_sharable_merge_symbol
-+  (struct bfd_link_info *info ATTRIBUTE_UNUSED,
-+   struct elf_link_hash_entry **sym_hash ATTRIBUTE_UNUSED,
-+   struct elf_link_hash_entry *h,
-+   Elf_Internal_Sym *sym ATTRIBUTE_UNUSED,
-+   asection **psec,
-+   bfd_vma *pvalue ATTRIBUTE_UNUSED,
-+   unsigned int *pold_alignment ATTRIBUTE_UNUSED,
-+   bfd_boolean *skip ATTRIBUTE_UNUSED,
-+   bfd_boolean *override ATTRIBUTE_UNUSED,
-+   bfd_boolean *type_change_ok ATTRIBUTE_UNUSED,
-+   bfd_boolean *size_change_ok ATTRIBUTE_UNUSED,
-+   bfd_boolean *newdef ATTRIBUTE_UNUSED,
-+   bfd_boolean *newdyn,
-+   bfd_boolean *newdyncommon ATTRIBUTE_UNUSED,
-+   bfd_boolean *newweak ATTRIBUTE_UNUSED,
-+   bfd *abfd,
-+   asection **sec,
-+   bfd_boolean *olddef ATTRIBUTE_UNUSED,
-+   bfd_boolean *olddyn,
-+   bfd_boolean *olddyncommon ATTRIBUTE_UNUSED,
-+   bfd_boolean *oldweak ATTRIBUTE_UNUSED,
-+   bfd *oldbfd,
-+   asection **oldsec)
-+{
-+  /* Check sharable symbol.  If one is undefined, it is OK.  */
-+  if (*oldsec && !bfd_is_und_section (*sec))
-+    {
-+      bfd_boolean sharable, oldsharable;
-+     
-+      sharable = (elf_section_data (*sec)
-+		  && (elf_section_flags (*sec) & SHF_GNU_SHARABLE));
-+      oldsharable = (elf_section_data (*oldsec)
-+		     && (elf_section_flags (*oldsec)
-+			 & SHF_GNU_SHARABLE));
-+
-+      if (sharable != oldsharable)
-+	{
-+	  bfd *nsbfd, *sbfd;
-+	  asection *nssec, *ssec;
-+	  bfd_boolean nsdyn, sdyn, nsdef, sdef;
-+
-+	  if (oldsharable)
-+	    {
-+	      sbfd = oldbfd;
-+	      nsbfd = abfd;
-+	      ssec = *oldsec;
-+	      nssec = *sec;
-+	      sdyn = *olddyn;
-+	      nsdyn = *newdyn;
-+	      sdef = *olddef;
-+	      nsdef = *newdef;
-+	    }
-+	  else
-+	    {
-+	      sbfd = abfd;
-+	      nsbfd = oldbfd;
-+	      ssec = *sec;
-+	      nssec = *oldsec;
-+	      sdyn = *newdyn;
-+	      nsdyn = *olddyn;
-+	      sdef = *newdef;
-+	      nsdef = *olddef;
-+	    }
-+
-+	  if (sdef && !sdyn)
-+	    {
-+	      /* If the sharable definition comes from a relocatable
-+		 file, it will override the non-sharable one in DSO. */
-+	      return TRUE;
-+	    }
-+	  else if (!nsdef
-+		   && !nsdyn
-+		   && (h->root.type == bfd_link_hash_common
-+		       || bfd_is_com_section (nssec)))
-+	    {
-+	      asection *scomm;
-+
-+	      /* When the non-sharable common symbol in a relocatable
-+		 file, we can turn it into sharable.  If the sharable
-+		 symbol isn't common, the non-sharable common symbol
-+		 will be overidden.  We only need to handle the
-+		 sharable common symbol and the non-sharable common
-+		 symbol.  We just turn the non-sharable common symbol
-+		 into the sharable one. */
-+	      if (sym->st_shndx == SHN_GNU_SHARABLE_COMMON)
-+		{
-+		  scomm = get_sharable_common_section (oldbfd);
-+		  if (scomm == NULL)
-+		    return FALSE;
-+		  h->root.u.c.p->section = scomm;
-+		}
-+	      else
-+		{
-+		  scomm = get_sharable_common_section (abfd);
-+		  if (scomm == NULL)
-+		    return FALSE;
-+		  *psec = *sec = scomm;
-+		}
-+
-+	      return TRUE;
-+	    }
-+
-+	  (*_bfd_error_handler)
-+	    (_("%s: sharable symbol in %B section %A mismatches non-shrable symbol in %B section %A"),
-+	     sbfd, ssec, nsbfd, nssec, h->root.root.string);
-+	  bfd_set_error (bfd_error_bad_value);
-+	  return FALSE;
-+	}
-+    }
-+
-+  return TRUE;
-+}
---- binutils/bfd/elfxx-ia64.c.shr	2007-04-27 05:25:13.000000000 -0700
-+++ binutils/bfd/elfxx-ia64.c	2007-06-02 07:39:38.000000000 -0700
-@@ -1636,7 +1636,8 @@ elfNN_ia64_add_symbol_hook (abfd, info, 
-       *valp = sym->st_size;
-     }
- 
--  return TRUE;
-+  return _bfd_elf_add_sharable_symbol (abfd, info, sym, namep, flagsp,
-+				       secp, valp);
- }
- 
- /* Return the number of additional phdrs we will need.  */
-@@ -5822,6 +5823,19 @@ elfNN_hpux_backend_symbol_processing (bf
- #define elf_backend_special_sections	elfNN_ia64_special_sections
- #define elf_backend_default_execstack	0
- 
-+#define elf_backend_section_from_bfd_section \
-+  _bfd_elf_sharable_section_from_bfd_section
-+#define elf_backend_symbol_processing \
-+  _bfd_elf_sharable_symbol_processing
-+#define elf_backend_common_section_index \
-+  _bfd_elf_sharable_common_section_index
-+#define elf_backend_common_section \
-+  _bfd_elf_sharable_common_section
-+#define elf_backend_common_definition \
-+  _bfd_elf_sharable_common_definition
-+#define elf_backend_merge_symbol \
-+  _bfd_elf_sharable_merge_symbol
-+
- /* FIXME: PR 290: The Intel C compiler generates SHT_IA_64_UNWIND with
-    SHF_LINK_ORDER. But it doesn't set the sh_link or sh_info fields.
-    We don't want to flood users with so many error messages. We turn
---- binutils/binutils/readelf.c.shr	2007-06-02 07:38:12.000000000 -0700
-+++ binutils/binutils/readelf.c	2007-06-02 07:39:38.000000000 -0700
-@@ -1262,6 +1262,8 @@ dump_relocations (FILE *file,
- 			sec_name = "ABS";
- 		      else if (psym->st_shndx == SHN_COMMON)
- 			sec_name = "COMMON";
-+		      else if (psym->st_shndx == SHN_GNU_SHARABLE_COMMON)
-+			sec_name = "GNU_SHARABLE_COMMON";
- 		      else if (elf_header.e_machine == EM_MIPS
- 			       && psym->st_shndx == SHN_MIPS_SCOMMON)
- 			sec_name = "SCOMMON";
-@@ -2459,6 +2461,7 @@ get_segment_type (unsigned long p_type)
-     case PT_SHLIB:	return "SHLIB";
-     case PT_PHDR:	return "PHDR";
-     case PT_TLS:	return "TLS";
-+    case PT_GNU_SHR:	return "GNU_SHR";
- 
-     case PT_GNU_EH_FRAME:
- 			return "GNU_EH_FRAME";
-@@ -6966,6 +6969,8 @@ get_symbol_index_type (unsigned int type
-     case SHN_UNDEF:	return "UND";
-     case SHN_ABS:	return "ABS";
-     case SHN_COMMON:	return "COM";
-+    case SHN_GNU_SHARABLE_COMMON:
-+			return "GNU_SHARABLE_COM";
-     default:
-       if (type == SHN_IA_64_ANSI_COMMON
- 	  && elf_header.e_machine == EM_IA_64
---- binutils/gas/config/obj-elf.c.shr	2007-03-01 15:11:20.000000000 -0800
-+++ binutils/gas/config/obj-elf.c	2007-06-02 07:39:38.000000000 -0700
-@@ -72,6 +72,7 @@ static void obj_elf_symver (int);
- static void obj_elf_subsection (int);
- static void obj_elf_popsection (int);
- static void obj_elf_tls_common (int);
-+static void obj_elf_sharable_common (int);
- static void obj_elf_lcomm (int);
- static void obj_elf_struct (int);
- 
-@@ -129,6 +130,8 @@ static const pseudo_typeS elf_pseudo_tab
- 
-   {"tls_common", obj_elf_tls_common, 0},
- 
-+  {"sharable_common", obj_elf_sharable_common, 0},
-+
-   /* End sentinel.  */
-   {NULL, NULL, 0},
- };
-@@ -373,6 +376,39 @@ obj_elf_tls_common (int ignore ATTRIBUTE
- }
- 
- static void
-+obj_elf_sharable_common (int ignore ATTRIBUTE_UNUSED)
-+{
-+  static segT sharable_bss_section;
-+  asection *saved_com_section_ptr = elf_com_section_ptr;
-+  asection *saved_bss_section = bss_section;
-+
-+  if (sharable_bss_section == NULL)
-+    {
-+      flagword applicable;
-+      segT seg = now_seg;
-+      subsegT subseg = now_subseg;
-+
-+      /* The .sharable_bss section is for local .sharable_common
-+	 symbols.  */
-+      sharable_bss_section = subseg_new (".sharable_bss", 0);
-+      applicable = bfd_applicable_section_flags (stdoutput);
-+      bfd_set_section_flags (stdoutput, sharable_bss_section,
-+			     applicable & SEC_ALLOC);
-+      seg_info (sharable_bss_section)->bss = 1;
-+
-+      subseg_set (seg, subseg);
-+    }
-+
-+  elf_com_section_ptr = &_bfd_elf_sharable_com_section;
-+  bss_section = sharable_bss_section;
-+
-+  s_comm_internal (0, elf_common_parse);
-+
-+  elf_com_section_ptr = saved_com_section_ptr;
-+  bss_section = saved_bss_section;
-+}
-+
-+static void
- obj_elf_lcomm (int ignore ATTRIBUTE_UNUSED)
- {
-   symbolS *symbolP = s_comm_internal (0, s_lcomm_internal);
-@@ -586,11 +622,17 @@ obj_elf_change_section (const char *name
- 
- 		 .section .lbss,"aw",@progbits
- 
-+		 "@progbits" is incorrect.  Also for sharable bss
-+		 sections, gcc, as of 2005-07-06, will emit
-+
-+		 .section .sharable_bss,"aw",@progbits
-+
- 		 "@progbits" is incorrect.  */
- #ifdef TC_I386
- 	      && (bed->s->arch_size != 64
- 		  || !(ssect->attr & SHF_X86_64_LARGE))
- #endif
-+	      && !(ssect->attr & SHF_GNU_SHARABLE)
- 	      && ssect->type != SHT_INIT_ARRAY
- 	      && ssect->type != SHT_FINI_ARRAY
- 	      && ssect->type != SHT_PREINIT_ARRAY)
---- binutils/include/bfdlink.h.shr	2007-06-02 07:38:14.000000000 -0700
-+++ binutils/include/bfdlink.h	2007-06-02 07:39:38.000000000 -0700
-@@ -347,6 +347,9 @@ struct bfd_link_info
-      --dynamic-list command line options.  */
-   unsigned int dynamic: 1;
- 
-+  /* TRUE if sharables sections may be created.  */
-+  unsigned int sharable_sections: 1;
-+
-   /* What to do with unresolved symbols in an object file.
-      When producing executables the default is GENERATE_ERROR.
-      When producing shared libraries the default is IGNORE.  The
---- binutils/include/elf/common.h.shr	2007-04-27 05:25:14.000000000 -0700
-+++ binutils/include/elf/common.h	2007-06-02 07:39:38.000000000 -0700
-@@ -308,6 +308,7 @@
- #define PT_SUNW_EH_FRAME PT_GNU_EH_FRAME      /* Solaris uses the same value */
- #define PT_GNU_STACK	(PT_LOOS + 0x474e551) /* Stack flags */
- #define PT_GNU_RELRO	(PT_LOOS + 0x474e552) /* Read-only after relocation */
-+#define PT_GNU_SHR	(PT_LOOS + 0x474e554) /* Sharable segment */
- 
- /* Program segment permissions, in program header p_flags field.  */
- 
-@@ -379,6 +380,8 @@
- #define SHF_MASKOS	0x0FF00000	/* New value, Oct 4, 1999 Draft */
- #define SHF_MASKPROC	0xF0000000	/* Processor-specific semantics */
- 
-+#define SHF_GNU_SHARABLE 0x01000000	/* sharable section */
-+
- /* Values of note segment descriptor types for core files.  */
- 
- #define NT_PRSTATUS	1		/* Contains copy of prstatus struct */
-@@ -499,6 +502,9 @@
- #define SHN_HIRESERVE	0xFFFF		/* End range of reserved indices */
- #define SHN_BAD		((unsigned) -1) /* Used internally by bfd */
- 
-+/* Associated symbol is in common sharable */
-+#define SHN_GNU_SHARABLE_COMMON (SHN_LOOS + 10)
-+
- /* The following constants control how a symbol may be accessed once it has
-    become part of an executable or shared library.  */
- 
---- binutils/ld/emulparams/elf64_ia64.sh.shr	2006-09-18 10:08:08.000000000 -0700
-+++ binutils/ld/emulparams/elf64_ia64.sh	2007-06-02 07:39:38.000000000 -0700
-@@ -37,3 +37,4 @@ OTHER_READONLY_SECTIONS="${OTHER_READONL
- # .dtors.  They have to be next to .sbss/.sbss2/.sdata/.sdata2.
- SMALL_DATA_CTOR=" "
- SMALL_DATA_DTOR=" "
-+SHARABLE_SECTIONS=yes
---- binutils/ld/emulparams/elf_i386.sh.shr	2006-09-18 10:08:08.000000000 -0700
-+++ binutils/ld/emulparams/elf_i386.sh	2007-06-02 07:39:38.000000000 -0700
-@@ -12,3 +12,4 @@ GENERATE_SHLIB_SCRIPT=yes
- GENERATE_PIE_SCRIPT=yes
- NO_SMALL_DATA=yes
- SEPARATE_GOTPLT=12
-+SHARABLE_SECTIONS=yes
---- binutils/ld/emulparams/elf_x86_64.sh.shr	2006-10-18 20:47:43.000000000 -0700
-+++ binutils/ld/emulparams/elf_x86_64.sh	2007-06-02 07:39:38.000000000 -0700
-@@ -14,6 +14,7 @@ GENERATE_PIE_SCRIPT=yes
- NO_SMALL_DATA=yes
- LARGE_SECTIONS=yes
- SEPARATE_GOTPLT=24
-+SHARABLE_SECTIONS=yes
- 
- if [ "x${host}" = "x${target}" ]; then
-   case " $EMULATION_LIBPATH " in
---- binutils/ld/emultempl/elf32.em.shr	2007-04-27 05:25:14.000000000 -0700
-+++ binutils/ld/emultempl/elf32.em	2007-06-02 07:39:38.000000000 -0700
-@@ -97,6 +97,7 @@ gld${EMULATION_NAME}_before_parse (void)
-   ldfile_set_output_arch ("${OUTPUT_ARCH}", bfd_arch_`echo ${ARCH} | sed -e 's/:.*//'`);
-   config.dynamic_link = ${DYNAMIC_LINK-TRUE};
-   config.has_shared = `if test -n "$GENERATE_SHLIB_SCRIPT" ; then echo TRUE ; else echo FALSE ; fi`;
-+  link_info.sharable_sections = `if test "$SHARABLE_SECTIONS" = "yes" ; then echo TRUE ; else echo FALSE ; fi`;
- }
- 
- EOF
-@@ -1456,6 +1457,12 @@ gld${EMULATION_NAME}_place_orphan (asect
- 
-   secname = bfd_get_section_name (s->owner, s);
- 
-+  /* Orphaned sharable sections won't have correct page
-+     requirements.  */
-+  if (elf_section_flags (s) & SHF_GNU_SHARABLE)
-+    einfo ("%F%P: unable to place orphaned sharable section %A (%B)\n",
-+	   s, s->owner);
-+
-   if (! link_info.relocatable
-       && link_info.combreloc
-       && (s->flags & SEC_ALLOC))
---- binutils/ld/ldmain.c.shr	2007-06-02 07:38:14.000000000 -0700
-+++ binutils/ld/ldmain.c	2007-06-02 07:40:46.000000000 -0700
-@@ -275,6 +275,7 @@ main (int argc, char **argv)
-   link_info.relax_pass = 1;
-   link_info.pei386_auto_import = -1;
-   link_info.spare_dynamic_tags = 5;
-+  link_info.sharable_sections = FALSE;
- 
-   ldfile_add_arch ("");
-   emulation = get_emulation (argc, argv);
---- binutils/ld/scripttempl/elf.sc.shr	2007-05-03 20:14:32.000000000 -0700
-+++ binutils/ld/scripttempl/elf.sc	2007-06-02 07:39:38.000000000 -0700
-@@ -236,6 +236,40 @@ STACK="  .stack        ${RELOCATING-0}${
-     ${RELOCATING+_stack = .;}
-     *(.stack)
-   }"
-+test "${SHARABLE_SECTIONS}" = "yes" && OTHER_READWRITE_SECTIONS="
-+  ${OTHER_READWRITE_SECTIONS}
-+  /* Sharable data sections.  */
-+  .sharable_data ${RELOCATING-0} : ${RELOCATING+ALIGN(${MAXPAGESIZE})}
-+  {
-+    ${RELOCATING+PROVIDE_HIDDEN (__sharable_data_start = .);}
-+    *(.sharable_data${RELOCATING+ .sharable_data.* .gnu.linkonce.shrd.*})
-+    /* Align here to ensure that the sharable data section ends at the
-+       page boundary.  */
-+    ${RELOCATING+. = ALIGN(. != 0 ? ${MAXPAGESIZE} : 1);}
-+    ${RELOCATING+PROVIDE_HIDDEN (__sharable_data_end = .);}
-+  }
-+"
-+test "${SHARABLE_SECTIONS}" = "yes" && OTHER_BSS_SECTIONS="
-+  ${OTHER_BSS_SECTIONS}
-+  /* Sharable bss sections  */
-+  .sharable_bss ${RELOCATING-0} : ${RELOCATING+ALIGN(${MAXPAGESIZE})}
-+  {
-+    ${RELOCATING+PROVIDE_HIDDEN (__sharable_bss_start = .);}
-+    *(.dynsharablebss)
-+    *(.sharable_bss${RELOCATING+ .sharable_bss.* .gnu.linkonce.shrb.*}) 
-+    *(SHARABLE_COMMON)
-+    /* Align here to ensure that the sharable bss section ends at the
-+       page boundary.  */
-+    ${RELOCATING+. = ALIGN(. != 0 ? ${MAXPAGESIZE} : 1);}
-+    ${RELOCATING+PROVIDE_HIDDEN (__sharable_bss_end = .);}
-+  }
-+"
-+test "${SHARABLE_SECTIONS}" = "yes" && REL_SHARABLE="
-+  .rel.sharable_data	${RELOCATING-0} : { *(.rel.sharable_data${RELOCATING+ .rel.sharable_data.* .rel.gnu.linkonce.shrd.*}) }
-+  .rela.sharable_data	${RELOCATING-0} : { *(.rela.sharable_data${RELOCATING+ .rela.sharable_data.* .rela.gnu.linkonce.shrd.*}) }
-+  .rel.sharable_bss	${RELOCATING-0} : { *(.rel.sharable_bss${RELOCATING+ .rel.sharable_bss.* .rel.gnu.linkonce.shrb.*}) }
-+  .rela.sharable_bss	${RELOCATING-0} : { *(.rela.sharable_bss${RELOCATING+ .rela.sharable_bss.* .rela.gnu.linkonce.shrb.*}) }
-+"
- 
- # if this is for an embedded system, don't add SIZEOF_HEADERS.
- if [ -z "$EMBEDDED" ]; then
-@@ -305,6 +339,7 @@ eval $COMBRELOCCAT <<EOF
-   .rel.got      ${RELOCATING-0} : { *(.rel.got) }
-   .rela.got     ${RELOCATING-0} : { *(.rela.got) }
-   ${OTHER_GOT_RELOC_SECTIONS}
-+  ${REL_SHARABLE}
-   ${REL_SDATA}
-   ${REL_SBSS}
-   ${REL_SDATA2}
diff -Nur binutils-2.18.50.0.1/patches/binutils-signed-2.patch binutils-stable/patches/binutils-signed-2.patch
--- binutils-2.18.50.0.1/patches/binutils-signed-2.patch	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/patches/binutils-signed-2.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,673 +0,0 @@
-binutils/
-
-2007-06-22  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* objdump.c (disassemble_bytes): Print addend as signed.
-	(dump_reloc_set): Likewise.
-
-gas/testsuite/
-
-2007-06-22  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* gas/alpha/elf-reloc-1.d: Expect addend as signed.
-	* gas/i386/mixed-mode-reloc64.d: Likewise.
-	* gas/i386/reloc64.d: Likewise.
-	* gas/ia64/pcrel.d: Likewise.
-	* gas/mips/branch-misc-2-64.d: Likewise.
-	* gas/mips/branch-misc-2pic-64.d: Likewise.
-	* gas/mips/ldstla-n64-sym32.d: Likewise.
-	* gas/mips/mips16-hilo-n32.d: Likewise.
-	* gas/ppc/astest.d: Likewise.
-	* gas/ppc/astest2.d: Likewise.
-	* gas/ppc/astest2_64.d: Likewise.
-	* gas/ppc/astest64.d: Likewise.
-	* gas/ppc/test1elf32.d: Likewise.
-	* gas/ppc/test1elf64.d: Likewise.
-	* gas/sparc/reloc64.d: Likewise.
-
---- binutils/binutils/objdump.c.signed	2007-06-19 15:24:14.000000000 -0700
-+++ binutils/binutils/objdump.c	2007-06-26 08:20:38.000000000 -0700
-@@ -1648,8 +1648,15 @@ disassemble_bytes (struct disassemble_in
- 
- 	      if (q->addend)
- 		{
--		  printf ("+0x");
--		  objdump_print_value (q->addend, info, TRUE);
-+		  bfd_signed_vma addend = q->addend;
-+		  if (addend < 0)
-+		    {
-+		      printf ("-0x");
-+		      addend = -addend;
-+		    }
-+		  else
-+		    printf ("+0x");
-+		  objdump_print_value (addend, info, TRUE);
- 		}
- 
- 	      printf ("\n");
-@@ -2709,8 +2716,15 @@ dump_reloc_set (bfd *abfd, asection *sec
- 
-       if (q->addend)
- 	{
--	  printf ("+0x");
--	  bfd_printf_vma (abfd, q->addend);
-+	  bfd_signed_vma addend = q->addend;
-+	  if (addend < 0)
-+	    {
-+	      printf ("-0x");
-+	      addend = -addend;
-+	    }
-+	  else
-+	    printf ("+0x");
-+	  bfd_printf_vma (abfd, addend);
- 	}
- 
-       printf ("\n");
---- binutils/gas/testsuite/gas/alpha/elf-reloc-1.d.signed	2003-06-17 04:16:16.000000000 -0700
-+++ binutils/gas/testsuite/gas/alpha/elf-reloc-1.d	2007-06-26 10:01:33.000000000 -0700
-@@ -16,6 +16,6 @@ OFFSET           TYPE              VALUE
- 0*000001c GPRELHIGH         d
- 0*0000020 GPRELLOW          e
- 0*0000024 GPDISP            \.text\+0x0*0000008
--0*0000030 GPDISP            \.text\+0xf*ffffff8
-+0*0000030 GPDISP            \.text-0x0*0000008
- 
- 
---- binutils/gas/testsuite/gas/i386/mixed-mode-reloc64.d.signed	2005-09-28 08:31:21.000000000 -0700
-+++ binutils/gas/testsuite/gas/i386/mixed-mode-reloc64.d	2007-06-26 08:20:38.000000000 -0700
-@@ -7,8 +7,8 @@
- RELOCATION RECORDS FOR \[.text\]:
- OFFSET[ 	]+TYPE[ 	]+VALUE[ 	]*
- [0-9a-f]+[ 	]+R_X86_64_GOT32[ 	]+xtrn[ 	]*
--[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c[ 	]*
-+[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4[ 	]*
- [0-9a-f]+[ 	]+R_X86_64_GOT32[ 	]+xtrn[ 	]*
--[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c[ 	]*
-+[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4[ 	]*
- [0-9a-f]+[ 	]+R_X86_64_GOT32[ 	]+xtrn[ 	]*
--[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c[ 	]*
-+[0-9a-f]+[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4[ 	]*
---- binutils/gas/testsuite/gas/i386/reloc64.d.signed	2007-05-03 17:57:26.000000000 -0700
-+++ binutils/gas/testsuite/gas/i386/reloc64.d	2007-06-26 08:20:38.000000000 -0700
-@@ -16,31 +16,31 @@ Disassembly of section \.text:
- .*[ 	]+R_X86_64_PC32[ 	]+xtrn\+0x0*2
- .*[ 	]+R_X86_64_PC16[ 	]+xtrn\+0x0*2
- .*[ 	]+R_X86_64_PC8[ 	]+xtrn\+0x0*1
--.*[ 	]+R_X86_64_PC32[ 	]+xtrn\+0xf+c
--.*[ 	]+R_X86_64_PC32[ 	]+xtrn\+0xf+c
--.*[ 	]+R_X86_64_PC8[ 	]+xtrn\+0xf+f
-+.*[ 	]+R_X86_64_PC32[ 	]+xtrn-0x0*4
-+.*[ 	]+R_X86_64_PC32[ 	]+xtrn-0x0*4
-+.*[ 	]+R_X86_64_PC8[ 	]+xtrn-0x0*1
- .*[ 	]+R_X86_64_GOT64[ 	]+xtrn
- .*[ 	]+R_X86_64_GOT32[ 	]+xtrn
- .*[ 	]+R_X86_64_GOT32[ 	]+xtrn
- .*[ 	]+R_X86_64_GOTOFF64[ 	]+xtrn
- .*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn
- .*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn
--.*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn\+0xf+c
-+.*[ 	]+R_X86_64_GOTPCREL[ 	]+xtrn-0x0*4
- .*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_\+0x0*2
--.*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_\+0xf+c
-+.*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_-0x0*4
- .*[ 	]+R_X86_64_GOTPC32[ 	]+_GLOBAL_OFFSET_TABLE_\+0x0*2
- .*[ 	]+R_X86_64_PLT32[ 	]+xtrn
- .*[ 	]+R_X86_64_PLT32[ 	]+xtrn
--.*[ 	]+R_X86_64_PLT32[ 	]+xtrn\+0xf+c
-+.*[ 	]+R_X86_64_PLT32[ 	]+xtrn-0x0*4
- .*[ 	]+R_X86_64_TLSGD[ 	]+xtrn
- .*[ 	]+R_X86_64_TLSGD[ 	]+xtrn
--.*[ 	]+R_X86_64_TLSGD[ 	]+xtrn\+0xf+c
-+.*[ 	]+R_X86_64_TLSGD[ 	]+xtrn-0x0*4
- .*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn
- .*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn
--.*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn\+0xf+c
-+.*[ 	]+R_X86_64_GOTTPOFF[ 	]+xtrn-0x0*4
- .*[ 	]+R_X86_64_TLSLD[ 	]+xtrn
- .*[ 	]+R_X86_64_TLSLD[ 	]+xtrn
--.*[ 	]+R_X86_64_TLSLD[ 	]+xtrn\+0xf+c
-+.*[ 	]+R_X86_64_TLSLD[ 	]+xtrn-0x0*4
- .*[ 	]+R_X86_64_DTPOFF64[ 	]+xtrn
- .*[ 	]+R_X86_64_DTPOFF32[ 	]+xtrn
- .*[ 	]+R_X86_64_DTPOFF32[ 	]+xtrn
---- binutils/gas/testsuite/gas/ia64/pcrel.d.signed	2005-03-28 14:34:20.000000000 -0800
-+++ binutils/gas/testsuite/gas/ia64/pcrel.d	2007-06-26 08:20:38.000000000 -0700
-@@ -9,28 +9,28 @@ OFFSET[[:space:]]+TYPE[[:space:]]+VALUE[
- 0+10[[:space:]]+PCREL22[[:space:]]+esym
- 0+20[[:space:]]+PCREL22[[:space:]]+esym\+0x0+20
- 0+30[[:space:]]+PCREL22[[:space:]]+esym
--0+40[[:space:]]+PCREL22[[:space:]]+esym\+0xf+e0
-+0+40[[:space:]]+PCREL22[[:space:]]+esym-0x0+20
- 
- RELOCATION RECORDS FOR \[\.movl\]:
- OFFSET[[:space:]]+TYPE[[:space:]]+VALUE[[:space:]]*
- 0+12[[:space:]]+PCREL64I[[:space:]]+esym
- 0+22[[:space:]]+PCREL64I[[:space:]]+esym\+0x0+20
- 0+32[[:space:]]+PCREL64I[[:space:]]+esym
--0+42[[:space:]]+PCREL64I[[:space:]]+esym\+0xf+e0
-+0+42[[:space:]]+PCREL64I[[:space:]]+esym-0x0+20
- 
- RELOCATION RECORDS FOR \[\.data8\]:
- OFFSET[[:space:]]+TYPE[[:space:]]+VALUE[[:space:]]*
- 0+10[[:space:]]+PCREL64[LM]SB[[:space:]]+esym
- 0+20[[:space:]]+PCREL64[LM]SB[[:space:]]+esym\+0x0+20
- 0+30[[:space:]]+PCREL64[LM]SB[[:space:]]+esym
--0+40[[:space:]]+PCREL64[LM]SB[[:space:]]+esym\+0xf+e0
-+0+40[[:space:]]+PCREL64[LM]SB[[:space:]]+esym-0x0+20
- 
- RELOCATION RECORDS FOR \[\.data4\]:
- OFFSET[[:space:]]+TYPE[[:space:]]+VALUE[[:space:]]*
- 0+10[[:space:]]+PCREL32[LM]SB[[:space:]]+esym
- 0+20[[:space:]]+PCREL32[LM]SB[[:space:]]+esym\+0x0+20
- 0+30[[:space:]]+PCREL32[LM]SB[[:space:]]+esym
--0+40[[:space:]]+PCREL32[LM]SB[[:space:]]+esym\+0xf+e0
-+0+40[[:space:]]+PCREL32[LM]SB[[:space:]]+esym-0x0+20
- 
- 
- Contents of section \.mov:
---- binutils/gas/testsuite/gas/mips/branch-misc-2-64.d.signed	2005-11-23 06:04:18.000000000 -0800
-+++ binutils/gas/testsuite/gas/mips/branch-misc-2-64.d	2007-06-26 09:21:37.000000000 -0700
-@@ -12,51 +12,51 @@ Disassembly of section .text:
- 	\.\.\.
- 	\.\.\.
- 0+003c <[^>]*> 04110000 	bal	0000000000000040 <x\+0x4>
--[ 	]*3c: R_MIPS_PC16	g1\+0xfffffffffffffffc
--[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*3c: R_MIPS_PC16	g1-0x4
-+[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
- 0+0040 <[^>]*> 00000000 	nop
- 0+0044 <[^>]*> 04110000 	bal	0000000000000048 <x\+0xc>
--[ 	]*44: R_MIPS_PC16	g2\+0xfffffffffffffffc
--[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*44: R_MIPS_PC16	g2-0x4
-+[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
- 0+0048 <[^>]*> 00000000 	nop
- 0+004c <[^>]*> 04110000 	bal	0000000000000050 <x\+0x14>
--[ 	]*4c: R_MIPS_PC16	g3\+0xfffffffffffffffc
--[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*4c: R_MIPS_PC16	g3-0x4
-+[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
- 0+0050 <[^>]*> 00000000 	nop
- 0+0054 <[^>]*> 04110000 	bal	0000000000000058 <x\+0x1c>
--[ 	]*54: R_MIPS_PC16	g4\+0xfffffffffffffffc
--[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*54: R_MIPS_PC16	g4-0x4
-+[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
- 0+0058 <[^>]*> 00000000 	nop
- 0+005c <[^>]*> 04110000 	bal	0000000000000060 <x\+0x24>
--[ 	]*5c: R_MIPS_PC16	g5\+0xfffffffffffffffc
--[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*5c: R_MIPS_PC16	g5-0x4
-+[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
- 0+0060 <[^>]*> 00000000 	nop
- 0+0064 <[^>]*> 04110000 	bal	0000000000000068 <x\+0x2c>
--[ 	]*64: R_MIPS_PC16	g6\+0xfffffffffffffffc
--[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*64: R_MIPS_PC16	g6-0x4
-+[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
- 0+0068 <[^>]*> 00000000 	nop
- 	\.\.\.
- 	\.\.\.
- 	\.\.\.
- 0+00a8 <[^>]*> 10000000 	b	00000000000000ac <g6\+0x4>
--[ 	]*a8: R_MIPS_PC16	x1\+0xfffffffffffffffc
--[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*a8: R_MIPS_PC16	x1-0x4
-+[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
- 0+00ac <[^>]*> 00000000 	nop
- 0+00b0 <[^>]*> 10000000 	b	00000000000000b4 <g6\+0xc>
--[ 	]*b0: R_MIPS_PC16	x2\+0xfffffffffffffffc
--[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*b0: R_MIPS_PC16	x2-0x4
-+[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
- 0+00b4 <[^>]*> 00000000 	nop
- 0+00b8 <[^>]*> 10000000 	b	00000000000000bc <g6\+0x14>
--[ 	]*b8: R_MIPS_PC16	\.data\+0xfffffffffffffffc
--[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*b8: R_MIPS_PC16	\.data-0x4
-+[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
- 0+00bc <[^>]*> 00000000 	nop
- 	\.\.\.
---- binutils/gas/testsuite/gas/mips/branch-misc-2pic-64.d.signed	2005-11-23 06:04:18.000000000 -0800
-+++ binutils/gas/testsuite/gas/mips/branch-misc-2pic-64.d	2007-06-26 09:21:44.000000000 -0700
-@@ -12,51 +12,51 @@ Disassembly of section .text:
- 	\.\.\.
- 	\.\.\.
- 0+003c <[^>]*> 04110000 	bal	0000000000000040 <x\+0x4>
--[ 	]*3c: R_MIPS_PC16	g1\+0xfffffffffffffffc
--[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*3c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*3c: R_MIPS_PC16	g1-0x4
-+[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*3c: R_MIPS_NONE	\*ABS\*-0x4
- 0+0040 <[^>]*> 00000000 	nop
- 0+0044 <[^>]*> 04110000 	bal	0000000000000048 <x\+0xc>
--[ 	]*44: R_MIPS_PC16	g2\+0xfffffffffffffffc
--[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*44: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*44: R_MIPS_PC16	g2-0x4
-+[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*44: R_MIPS_NONE	\*ABS\*-0x4
- 0+0048 <[^>]*> 00000000 	nop
- 0+004c <[^>]*> 04110000 	bal	0000000000000050 <x\+0x14>
--[ 	]*4c: R_MIPS_PC16	g3\+0xfffffffffffffffc
--[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*4c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*4c: R_MIPS_PC16	g3-0x4
-+[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*4c: R_MIPS_NONE	\*ABS\*-0x4
- 0+0050 <[^>]*> 00000000 	nop
- 0+0054 <[^>]*> 04110000 	bal	0000000000000058 <x\+0x1c>
--[ 	]*54: R_MIPS_PC16	g4\+0xfffffffffffffffc
--[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*54: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*54: R_MIPS_PC16	g4-0x4
-+[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*54: R_MIPS_NONE	\*ABS\*-0x4
- 0+0058 <[^>]*> 00000000 	nop
- 0+005c <[^>]*> 04110000 	bal	0000000000000060 <x\+0x24>
--[ 	]*5c: R_MIPS_PC16	g5\+0xfffffffffffffffc
--[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*5c: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*5c: R_MIPS_PC16	g5-0x4
-+[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*5c: R_MIPS_NONE	\*ABS\*-0x4
- 0+0060 <[^>]*> 00000000 	nop
- 0+0064 <[^>]*> 04110000 	bal	0000000000000068 <x\+0x2c>
--[ 	]*64: R_MIPS_PC16	g6\+0xfffffffffffffffc
--[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*64: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*64: R_MIPS_PC16	g6-0x4
-+[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*64: R_MIPS_NONE	\*ABS\*-0x4
- 0+0068 <[^>]*> 00000000 	nop
- 	\.\.\.
- 	\.\.\.
- 	\.\.\.
- 0+00a8 <[^>]*> 10000000 	b	00000000000000ac <g6\+0x4>
--[ 	]*a8: R_MIPS_PC16	x1\+0xfffffffffffffffc
--[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*a8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*a8: R_MIPS_PC16	x1-0x4
-+[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*a8: R_MIPS_NONE	\*ABS\*-0x4
- 0+00ac <[^>]*> 00000000 	nop
- 0+00b0 <[^>]*> 10000000 	b	00000000000000b4 <g6\+0xc>
--[ 	]*b0: R_MIPS_PC16	x2\+0xfffffffffffffffc
--[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*b0: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*b0: R_MIPS_PC16	x2-0x4
-+[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*b0: R_MIPS_NONE	\*ABS\*-0x4
- 0+00b4 <[^>]*> 00000000 	nop
- 0+00b8 <[^>]*> 10000000 	b	00000000000000bc <g6\+0x14>
--[ 	]*b8: R_MIPS_PC16	\.data\+0xfffffffffffffffc
--[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
--[ 	]*b8: R_MIPS_NONE	\*ABS\*\+0xfffffffffffffffc
-+[ 	]*b8: R_MIPS_PC16	\.data-0x4
-+[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
-+[ 	]*b8: R_MIPS_NONE	\*ABS\*-0x4
- 0+00bc <[^>]*> 00000000 	nop
- 	\.\.\.
---- binutils/gas/testsuite/gas/mips/ldstla-n64-sym32.d.signed	2005-03-04 01:51:11.000000000 -0800
-+++ binutils/gas/testsuite/gas/mips/ldstla-n64-sym32.d	2007-06-26 10:06:52.000000000 -0700
-@@ -196,19 +196,19 @@ Disassembly .*:
- .*: R_MIPS_NONE	.*
- .*	daddu	a0,a0,v1
- .*	lui	a0,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	d?addiu	a0,a0,0
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	lui	a0,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	d?addiu	a0,a0,0
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	daddu	a0,a0,v1
-@@ -406,20 +406,20 @@ Disassembly .*:
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	lui	a0,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	lw	a0,0\(a0\)
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	lui	a0,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	daddu	a0,a0,v1
- .*	lw	a0,0\(a0\)
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- #
-@@ -616,20 +616,20 @@ Disassembly .*:
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	lui	at,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	sw	a0,0\(at\)
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	lui	at,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	daddu	at,at,v1
- .*	sw	a0,0\(at\)
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- #
-@@ -880,21 +880,21 @@ Disassembly .*:
- .*	swl	a0,0\(at\)
- .*	swr	a0,3\(at\)
- .*	lui	at,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	d?addiu	at,at,0
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	swl	a0,0\(at\)
- .*	swr	a0,3\(at\)
- .*	lui	at,0x0
--.*: R_MIPS_HI16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_HI16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	d?addiu	at,at,0
--.*: R_MIPS_LO16	extern\+0xfffffffffffcc000
-+.*: R_MIPS_LO16	extern-0x34000
- .*: R_MIPS_NONE	.*
- .*: R_MIPS_NONE	.*
- .*	daddu	at,at,v1
---- binutils/gas/testsuite/gas/mips/mips16-hilo-n32.d.signed	2005-02-15 11:57:53.000000000 -0800
-+++ binutils/gas/testsuite/gas/mips/mips16-hilo-n32.d	2007-06-26 10:08:22.000000000 -0700
-@@ -141,45 +141,45 @@ Disassembly of section \.text:
-  13c:	f400 3480 	sll	a0,16
-  140:	f010 4c00 	addiu	a0,-32768
-  144:	f000 6c00 	li	a0,0
--			144: R_MIPS16_HI16	\.data\+0xffff8000
-+			144: R_MIPS16_HI16	\.data-0x8000
-  148:	f400 3480 	sll	a0,16
-  14c:	f000 4c00 	addiu	a0,0
--			14c: R_MIPS16_LO16	\.data\+0xffff8000
-+			14c: R_MIPS16_LO16	\.data-0x8000
-  150:	f000 6c00 	li	a0,0
--			150: R_MIPS16_HI16	\.data\+0xffff8004
-+			150: R_MIPS16_HI16	\.data-0x7ffc
-  154:	f400 3480 	sll	a0,16
-  158:	f000 4c00 	addiu	a0,0
--			158: R_MIPS16_LO16	\.data\+0xffff8004
-+			158: R_MIPS16_LO16	\.data-0x7ffc
-  15c:	f000 6c00 	li	a0,0
--			15c: R_MIPS16_HI16	big_external_data_label\+0xffff8000
-+			15c: R_MIPS16_HI16	big_external_data_label-0x8000
-  160:	f400 3480 	sll	a0,16
-  164:	f000 4c00 	addiu	a0,0
--			164: R_MIPS16_LO16	big_external_data_label\+0xffff8000
-+			164: R_MIPS16_LO16	big_external_data_label-0x8000
-  168:	f000 6c00 	li	a0,0
--			168: R_MIPS16_HI16	small_external_data_label\+0xffff8000
-+			168: R_MIPS16_HI16	small_external_data_label-0x8000
-  16c:	f400 3480 	sll	a0,16
-  170:	f000 4c00 	addiu	a0,0
--			170: R_MIPS16_LO16	small_external_data_label\+0xffff8000
-+			170: R_MIPS16_LO16	small_external_data_label-0x8000
-  174:	f000 6c00 	li	a0,0
--			174: R_MIPS16_HI16	big_external_common\+0xffff8000
-+			174: R_MIPS16_HI16	big_external_common-0x8000
-  178:	f400 3480 	sll	a0,16
-  17c:	f000 4c00 	addiu	a0,0
--			17c: R_MIPS16_LO16	big_external_common\+0xffff8000
-+			17c: R_MIPS16_LO16	big_external_common-0x8000
-  180:	f000 6c00 	li	a0,0
--			180: R_MIPS16_HI16	small_external_common\+0xffff8000
-+			180: R_MIPS16_HI16	small_external_common-0x8000
-  184:	f400 3480 	sll	a0,16
-  188:	f000 4c00 	addiu	a0,0
--			188: R_MIPS16_LO16	small_external_common\+0xffff8000
-+			188: R_MIPS16_LO16	small_external_common-0x8000
-  18c:	f000 6c00 	li	a0,0
--			18c: R_MIPS16_HI16	\.bss\+0xffff8000
-+			18c: R_MIPS16_HI16	\.bss-0x8000
-  190:	f400 3480 	sll	a0,16
-  194:	f000 4c00 	addiu	a0,0
--			194: R_MIPS16_LO16	\.bss\+0xffff8000
-+			194: R_MIPS16_LO16	\.bss-0x8000
-  198:	f000 6c00 	li	a0,0
--			198: R_MIPS16_HI16	\.sbss\+0xffff8000
-+			198: R_MIPS16_HI16	\.sbss-0x8000
-  19c:	f400 3480 	sll	a0,16
-  1a0:	f000 4c00 	addiu	a0,0
--			1a0: R_MIPS16_LO16	\.sbss\+0xffff8000
-+			1a0: R_MIPS16_LO16	\.sbss-0x8000
-  1a4:	6c01      	li	a0,1
-  1a6:	f400 3480 	sll	a0,16
-  1aa:	4c00      	addiu	a0,0
-@@ -399,45 +399,45 @@ Disassembly of section \.text:
-  3b4:	f400 35a0 	sll	a1,16
-  3b8:	f010 9d80 	lw	a0,-32768\(a1\)
-  3bc:	f000 6d00 	li	a1,0
--			3bc: R_MIPS16_HI16	\.data\+0xffff8000
-+			3bc: R_MIPS16_HI16	\.data-0x8000
-  3c0:	f400 35a0 	sll	a1,16
-  3c4:	f000 9d80 	lw	a0,0\(a1\)
--			3c4: R_MIPS16_LO16	\.data\+0xffff8000
-+			3c4: R_MIPS16_LO16	\.data-0x8000
-  3c8:	f000 6d00 	li	a1,0
--			3c8: R_MIPS16_HI16	\.data\+0xffff8004
-+			3c8: R_MIPS16_HI16	\.data-0x7ffc
-  3cc:	f400 35a0 	sll	a1,16
-  3d0:	f000 9d80 	lw	a0,0\(a1\)
--			3d0: R_MIPS16_LO16	\.data\+0xffff8004
-+			3d0: R_MIPS16_LO16	\.data-0x7ffc
-  3d4:	f000 6d00 	li	a1,0
--			3d4: R_MIPS16_HI16	big_external_data_label\+0xffff8000
-+			3d4: R_MIPS16_HI16	big_external_data_label-0x8000
-  3d8:	f400 35a0 	sll	a1,16
-  3dc:	f000 9d80 	lw	a0,0\(a1\)
--			3dc: R_MIPS16_LO16	big_external_data_label\+0xffff8000
-+			3dc: R_MIPS16_LO16	big_external_data_label-0x8000
-  3e0:	f000 6d00 	li	a1,0
--			3e0: R_MIPS16_HI16	small_external_data_label\+0xffff8000
-+			3e0: R_MIPS16_HI16	small_external_data_label-0x8000
-  3e4:	f400 35a0 	sll	a1,16
-  3e8:	f000 9d80 	lw	a0,0\(a1\)
--			3e8: R_MIPS16_LO16	small_external_data_label\+0xffff8000
-+			3e8: R_MIPS16_LO16	small_external_data_label-0x8000
-  3ec:	f000 6d00 	li	a1,0
--			3ec: R_MIPS16_HI16	big_external_common\+0xffff8000
-+			3ec: R_MIPS16_HI16	big_external_common-0x8000
-  3f0:	f400 35a0 	sll	a1,16
-  3f4:	f000 9d80 	lw	a0,0\(a1\)
--			3f4: R_MIPS16_LO16	big_external_common\+0xffff8000
-+			3f4: R_MIPS16_LO16	big_external_common-0x8000
-  3f8:	f000 6d00 	li	a1,0
--			3f8: R_MIPS16_HI16	small_external_common\+0xffff8000
-+			3f8: R_MIPS16_HI16	small_external_common-0x8000
-  3fc:	f400 35a0 	sll	a1,16
-  400:	f000 9d80 	lw	a0,0\(a1\)
--			400: R_MIPS16_LO16	small_external_common\+0xffff8000
-+			400: R_MIPS16_LO16	small_external_common-0x8000
-  404:	f000 6d00 	li	a1,0
--			404: R_MIPS16_HI16	\.bss\+0xffff8000
-+			404: R_MIPS16_HI16	\.bss-0x8000
-  408:	f400 35a0 	sll	a1,16
-  40c:	f000 9d80 	lw	a0,0\(a1\)
--			40c: R_MIPS16_LO16	\.bss\+0xffff8000
-+			40c: R_MIPS16_LO16	\.bss-0x8000
-  410:	f000 6d00 	li	a1,0
--			410: R_MIPS16_HI16	\.sbss\+0xffff8000
-+			410: R_MIPS16_HI16	\.sbss-0x8000
-  414:	f400 35a0 	sll	a1,16
-  418:	f000 9d80 	lw	a0,0\(a1\)
--			418: R_MIPS16_LO16	\.sbss\+0xffff8000
-+			418: R_MIPS16_LO16	\.sbss-0x8000
-  41c:	6d01      	li	a1,1
-  41e:	f400 35a0 	sll	a1,16
-  422:	9d80      	lw	a0,0\(a1\)
---- binutils/gas/testsuite/gas/ppc/astest.d.signed	2005-03-02 05:25:01.000000000 -0800
-+++ binutils/gas/testsuite/gas/ppc/astest.d	2007-06-26 09:34:51.000000000 -0700
-@@ -52,11 +52,11 @@ Disassembly of section \.text:
-   60:	00 00 00 00 	\.long 0x0
- 			60: R_PPC_ADDR32	z
-   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			64: R_PPC_ADDR32	x\+0xf+ffffffc
-+			64: R_PPC_ADDR32	x-0x4
-   68:	00 00 00 00 	\.long 0x0
- 			68: R_PPC_ADDR32	\.data
-   6c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			6c: R_PPC_ADDR32	z\+0xf+ffffffc
-+			6c: R_PPC_ADDR32	z-0x4
-   70:	ff ff ff 9c 	\.long 0xffffff9c
-   74:	ff ff ff 9c 	\.long 0xffffff9c
-   78:	00 00 00 00 	\.long 0x0
---- binutils/gas/testsuite/gas/ppc/astest2.d.signed	2005-03-02 05:25:01.000000000 -0800
-+++ binutils/gas/testsuite/gas/ppc/astest2.d	2007-06-26 09:35:10.000000000 -0700
-@@ -48,11 +48,11 @@ Disassembly of section \.text:
-   60:	00 00 00 00 	\.long 0x0
- 			60: R_PPC_ADDR32	z
-   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			64: R_PPC_ADDR32	x\+0xf+ffffffc
-+			64: R_PPC_ADDR32	x-0x4
-   68:	00 00 00 00 	\.long 0x0
- 			68: R_PPC_ADDR32	\.data
-   6c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			6c: R_PPC_ADDR32	z\+0xf+ffffffc
-+			6c: R_PPC_ADDR32	z-0x4
-   70:	00 00 00 08 	\.long 0x8
-   74:	00 00 00 08 	\.long 0x8
- 
---- binutils/gas/testsuite/gas/ppc/astest2_64.d.signed	2005-03-02 05:25:01.000000000 -0800
-+++ binutils/gas/testsuite/gas/ppc/astest2_64.d	2007-06-26 09:32:48.000000000 -0700
-@@ -45,11 +45,11 @@ Disassembly of section \.text:
-   58:	00 00 00 00 	\.long 0x0
- 			58: R_PPC64_ADDR32	z
-   5c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			5c: R_PPC64_ADDR32	x\+0xfffffffffffffffc
-+			5c: R_PPC64_ADDR32	x-0x4
-   60:	00 00 00 00 	\.long 0x0
- 			60: R_PPC64_ADDR32	\.data
-   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			64: R_PPC64_ADDR32	z\+0xfffffffffffffffc
-+			64: R_PPC64_ADDR32	z-0x4
-   68:	00 00 00 08 	\.long 0x8
-   6c:	00 00 00 08 	\.long 0x8
- 
---- binutils/gas/testsuite/gas/ppc/astest64.d.signed	2005-03-02 05:25:01.000000000 -0800
-+++ binutils/gas/testsuite/gas/ppc/astest64.d	2007-06-26 09:32:19.000000000 -0700
-@@ -49,11 +49,11 @@ Disassembly of section \.text:
-   58:	00 00 00 00 	\.long 0x0
- 			58: R_PPC64_ADDR32	z
-   5c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			5c: R_PPC64_ADDR32	x\+0xfffffffffffffffc
-+			5c: R_PPC64_ADDR32	x-0x4
-   60:	00 00 00 00 	\.long 0x0
- 			60: R_PPC64_ADDR32	\.data
-   64:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			64: R_PPC64_ADDR32	z\+0xfffffffffffffffc
-+			64: R_PPC64_ADDR32	z-0x4
-   68:	ff ff ff a4 	\.long 0xffffffa4
-   6c:	ff ff ff a4 	\.long 0xffffffa4
-   70:	00 00 00 00 	\.long 0x0
---- binutils/gas/testsuite/gas/ppc/test1elf32.d.signed	2005-03-02 05:25:01.000000000 -0800
-+++ binutils/gas/testsuite/gas/ppc/test1elf32.d	2007-06-26 09:35:43.000000000 -0700
-@@ -79,7 +79,7 @@ Disassembly of section \.data:
- 
- 0+000c <dat0>:
-    c:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			c: R_PPC_REL32	jk\+0xf+fffc
-+			c: R_PPC_REL32	jk-0x4
- 
- 0+0010 <dat1>:
-   10:	00 00 00 00 	\.long 0x0
---- binutils/gas/testsuite/gas/ppc/test1elf64.d.signed	2005-03-02 05:25:01.000000000 -0800
-+++ binutils/gas/testsuite/gas/ppc/test1elf64.d	2007-06-26 09:33:14.000000000 -0700
-@@ -114,7 +114,7 @@ Disassembly of section \.data:
- 
- 0000000000000014 <dat0>:
-   14:	ff ff ff fc 	fnmsub  f31,f31,f31,f31
--			14: R_PPC64_REL32	jk\+0xfffffffffffffffc
-+			14: R_PPC64_REL32	jk-0x4
- 
- 0000000000000018 <dat1>:
-   18:	00 00 00 00 	\.long 0x0
---- binutils/gas/testsuite/gas/sparc/reloc64.d.signed	1999-06-10 14:08:04.000000000 -0700
-+++ binutils/gas/testsuite/gas/sparc/reloc64.d	2007-06-26 09:20:45.000000000 -0700
-@@ -35,13 +35,13 @@ Disassembly of section .text:
- 			44: R_SPARC_LO10	.text
-   48:	01 00 00 00 	nop 
-   4c:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
--			4c: R_SPARC_HH22	.text\+0xfedcba9876543210
-+			4c: R_SPARC_HH22	.text\-0x123456789abcdf0
-   50:	82 10 60 00 	mov  %g1, %g1	! 0 <foo>
--			50: R_SPARC_HM10	.text\+0xfedcba9876543210
-+			50: R_SPARC_HM10	.text\-0x123456789abcdf0
-   54:	05 00 00 00 	sethi  %hi\((0x|)0\), %g2
--			54: R_SPARC_LM22	.text\+0xfedcba9876543210
-+			54: R_SPARC_LM22	.text\-0x123456789abcdf0
-   58:	84 10 60 00 	mov  %g1, %g2
--			58: R_SPARC_LO10	.text\+0xfedcba9876543210
-+			58: R_SPARC_LO10	.text\-0x123456789abcdf0
-   5c:	01 00 00 00 	nop 
-   60:	03 2a 61 d9 	sethi  %hi\(0xa9876400\), %g1
-   64:	82 10 61 43 	or  %g1, 0x143, %g1.*
-@@ -70,7 +70,7 @@ Disassembly of section .text:
- 			a0: R_SPARC_LOX10	.text
-   a4:	01 00 00 00 	nop 
-   a8:	03 00 00 00 	sethi  %hi\((0x|)0\), %g1
--			a8: R_SPARC_HIX22	.text\+0xffffffff76543210
-+			a8: R_SPARC_HIX22	.text-0x89abcdf0
-   ac:	82 18 60 00 	xor  %g1, 0, %g1
--			ac: R_SPARC_LOX10	.text\+0xffffffff76543210
-+			ac: R_SPARC_LOX10	.text-0x89abcdf0
-   b0:	01 00 00 00 	nop 
diff -Nur binutils-2.18.50.0.1/patches/binutils-tls-relro-14.patch binutils-stable/patches/binutils-tls-relro-14.patch
--- binutils-2.18.50.0.1/patches/binutils-tls-relro-14.patch	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/patches/binutils-tls-relro-14.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,551 +0,0 @@
-bfd/
-
-2007-01-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* elf-bfd.h (elf_obj_tdata): Remove relro.
-
-	* elf.c (get_program_header_size): Check info->relro instead
-	of elf_tdata (abfd)->relro.
-	(_bfd_elf_map_sections_to_segments): Likewise.
-	(assign_file_positions_for_load_sections): Don't set
-	PT_GNU_RELRO segment alignment here.
-	(assign_file_positions_for_non_load_sections): Properly set up
-	PT_GNU_RELRO segment for copying executable/shared library.
-	(elf_section_status): New enum.
-	(rewrite_elf_program_header): Add elf_section_status. Remove
-	PT_GNU_RELRO segment if a section is modified.
-	(copy_private_bfd_data): Updated rewrite_elf_program_header
-	call.
-
-include/elf/
-
-2006-10-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* internal.h (ELF_IS_SECTION_IN_SEGMENT): Allow SHF_TLS
-	sections in PT_GNU_RELRO segments.
-
-ld/
-
-2006-10-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* ldexp.h (ldexp_control): Add relro, relro_start_stat and
-	relro_end_stat.
-
-	* ldexp.c (fold_binary): Set expld.dataseg.relro to
-	exp_dataseg_relro_start or exp_dataseg_relro_end when
-	seeing DATA_SEGMENT_ALIGN or DATA_SEGMENT_RELRO_END,
-	respectively.
-
-	* ldlang.c (lang_size_sections_1): Properly set
-	expld.dataseg.relro_start_stat and
-	expld.dataseg.relro_end_stat.
-	(find_relro_section_callback): New function.
-	(lang_find_relro_sections_1): Likewise.
-	(lang_find_relro_sections): Likewise.
-	(lang_process): Call lang_find_relro_sections for
-	non-relocatable link.
-
-ld/testsuite/
-
-2006-10-20  H.J. Lu  <hongjiu.lu@intel.com>
-
-	PR binutils/3281
-	* ld-elf/binutils.exp: Update "-z relro" tests to use relro.s.
-	Add "-z relro" tests with TLS for objcopy.
-
-	* ld-elf/relro.s: New file.
-
---- binutils/bfd/elf-bfd.h.relro	2007-06-29 11:40:54.000000000 -0700
-+++ binutils/bfd/elf-bfd.h	2007-07-02 09:11:20.000000000 -0700
-@@ -1425,9 +1425,6 @@ struct elf_obj_tdata
-   /* Segment flags for the PT_GNU_STACK segment.  */
-   unsigned int stack_flags;
- 
--  /* Should the PT_GNU_RELRO segment be emitted?  */
--  bfd_boolean relro;
--
-   /* Symbol version definitions in external objects.  */
-   Elf_Internal_Verdef *verdef;
- 
---- binutils/bfd/elf.c.relro	2007-07-02 08:49:37.000000000 -0700
-+++ binutils/bfd/elf.c	2007-07-02 09:12:22.000000000 -0700
-@@ -3667,7 +3667,7 @@ get_program_header_size (bfd *abfd, stru
-       /* We need a PT_DYNAMIC segment.  */
-       ++segs;
- 
--      if (elf_tdata (abfd)->relro)
-+      if (info->relro)
- 	{
- 	  /* We need a PT_GNU_RELRO segment only when there is a
- 	     PT_DYNAMIC segment.  */
-@@ -4159,7 +4159,7 @@ _bfd_elf_map_sections_to_segments (bfd *
- 	  pm = &m->next;
- 	}
- 
--      if (dynsec != NULL && elf_tdata (abfd)->relro)
-+      if (dynsec != NULL && info->relro)
- 	{
- 	  /* We make a PT_GNU_RELRO segment only when there is a
- 	     PT_DYNAMIC segment.  */
-@@ -4634,12 +4634,10 @@ assign_file_positions_for_load_sections 
- 		    p->p_memsz += this_hdr->sh_size;
- 		}
- 
--	      if (p->p_type == PT_GNU_RELRO)
--		p->p_align = 1;
--	      else if (align > p->p_align
--		       && !m->p_align_valid
--		       && (p->p_type != PT_LOAD
--			   || (abfd->flags & D_PAGED) == 0))
-+	      if (align > p->p_align
-+		  && !m->p_align_valid
-+		  && (p->p_type != PT_LOAD
-+		      || (abfd->flags & D_PAGED) == 0))
- 		p->p_align = align;
- 	    }
- 
-@@ -4788,18 +4786,53 @@ assign_file_positions_for_non_load_secti
-       if (m->count != 0)
- 	{
- 	  if (p->p_type != PT_LOAD
--	      && (p->p_type != PT_NOTE || bfd_get_format (abfd) != bfd_core))
-+	      && (p->p_type != PT_NOTE
-+		  || bfd_get_format (abfd) != bfd_core))
- 	    {
- 	      Elf_Internal_Shdr *hdr;
-+	      asection *sect;
-+
- 	      BFD_ASSERT (!m->includes_filehdr && !m->includes_phdrs);
- 
--	      hdr = &elf_section_data (m->sections[m->count - 1])->this_hdr;
--	      p->p_filesz = (m->sections[m->count - 1]->filepos
--			     - m->sections[0]->filepos);
-+	      sect = m->sections[m->count - 1];
-+	      hdr = &elf_section_data (sect)->this_hdr;
-+	      p->p_filesz = sect->filepos - m->sections[0]->filepos;
- 	      if (hdr->sh_type != SHT_NOBITS)
- 		p->p_filesz += hdr->sh_size;
- 
--	      p->p_offset = m->sections[0]->filepos;
-+	      if (p->p_type == PT_GNU_RELRO)
-+		{
-+		  /* When we get here, we are copying executable
-+		     or shared library. But we need to use the same
-+		     linker logic.  */
-+		  Elf_Internal_Phdr *lp;
-+
-+		  for (lp = phdrs; lp < phdrs + count; ++lp)
-+		    {
-+		      if (lp->p_type == PT_LOAD
-+			  && lp->p_paddr == p->p_paddr)
-+			break;
-+		    }
-+	  
-+		  if (lp < phdrs + count)
-+		    {
-+		      /* The end of PT_GNU_RELRO segment is the next
-+			 SEC_ALLOC section after it if it exists.  */
-+		      if (sect->next != NULL
-+			  && (sect->next->flags & SEC_ALLOC) != 0)
-+			p->p_filesz = sect->next->lma - lp->p_vaddr;
-+		      else
-+			p->p_filesz += p->p_vaddr - lp->p_vaddr;
-+		      p->p_vaddr = lp->p_vaddr;
-+		      p->p_offset = lp->p_offset;
-+		      p->p_memsz = p->p_filesz;
-+		      p->p_align = 1;
-+		    }
-+		  else
-+		    abort ();
-+		}
-+	      else
-+		p->p_offset = m->sections[0]->filepos;
- 	    }
- 	}
-       else
-@@ -5227,8 +5260,17 @@ _bfd_elf_symbol_from_bfd_symbol (bfd *ab
- 
- /* Rewrite program header information.  */
- 
-+enum elf_section_status
-+{
-+  unknown,
-+  added,
-+  removed,
-+  modified
-+};
-+
- static bfd_boolean
--rewrite_elf_program_header (bfd *ibfd, bfd *obfd)
-+rewrite_elf_program_header (bfd *ibfd, bfd *obfd,
-+			    enum elf_section_status status)
- {
-   Elf_Internal_Ehdr *iehdr;
-   struct elf_segment_map *map;
-@@ -5381,7 +5423,14 @@ rewrite_elf_program_header (bfd *ibfd, b
- 	    }
- 
-       if (segment->p_type != PT_LOAD)
--	continue;
-+	{
-+	  /* If a section is added or mofied, remove PT_GNU_RELRO
-+	     segment.  */
-+	  if (status != removed &&
-+	      segment->p_type == PT_GNU_RELRO)
-+	    segment->p_type = PT_NULL;
-+	  continue;
-+	}
- 
-       /* Determine if this segment overlaps any previous segments.  */
-       for (j = 0, segment2 = elf_tdata (ibfd)->phdr; j < i; j++, segment2 ++)
-@@ -5958,6 +6007,12 @@ copy_elf_program_header (bfd *ibfd, bfd 
- static bfd_boolean
- copy_private_bfd_data (bfd *ibfd, bfd *obfd)
- {
-+  enum elf_section_status status;
-+  Elf_Internal_Phdr *segment;
-+  asection *section, *osec;
-+  unsigned int i, num_segments;
-+  Elf_Internal_Shdr *this_hdr;
-+
-   if (bfd_get_flavour (ibfd) != bfd_target_elf_flavour
-       || bfd_get_flavour (obfd) != bfd_target_elf_flavour)
-     return TRUE;
-@@ -5965,16 +6020,13 @@ copy_private_bfd_data (bfd *ibfd, bfd *o
-   if (elf_tdata (ibfd)->phdr == NULL)
-     return TRUE;
- 
-+  status = unknown;
-   if (ibfd->xvec == obfd->xvec)
-     {
--      /* Check to see if any sections in the input BFD
--	 covered by ELF program header have changed.  */
--      Elf_Internal_Phdr *segment;
--      asection *section, *osec;
--      unsigned int i, num_segments;
--      Elf_Internal_Shdr *this_hdr;
-+      /* Check to see if any sections in the input BFD covered by ELF
-+	 program header have changed.
- 
--      /* Initialize the segment mark field.  */
-+	 Initialize the segment mark field.  */
-       for (section = obfd->sections; section != NULL;
- 	   section = section->next)
- 	section->segment_mark = FALSE;
-@@ -6026,7 +6078,10 @@ copy_private_bfd_data (bfd *ibfd, bfd *o
- 	   section = section->next)
- 	{
- 	  if (section->segment_mark == FALSE)
--	    goto rewrite;
-+	    { 
-+	      status = added;
-+	      goto rewrite;
-+	    }
- 	  else
- 	    section->segment_mark = FALSE;
- 	}
-@@ -6035,7 +6090,42 @@ copy_private_bfd_data (bfd *ibfd, bfd *o
-     }
- 
- rewrite:
--  return rewrite_elf_program_header (ibfd, obfd);
-+  if (status == unknown)
-+    {
-+      /* We need to find out how we are changed.  */
-+      num_segments = elf_elfheader (ibfd)->e_phnum;
-+      for (i = 0, segment = elf_tdata (ibfd)->phdr;
-+	   i < num_segments;
-+	   i++, segment++)
-+	{
-+	  for (section = ibfd->sections;
-+	       section != NULL; section = section->next)
-+	    {
-+	      osec = section->output_section;
-+
-+	      /* Check if this section is covered by the segment.  */
-+	      this_hdr = &(elf_section_data(section)->this_hdr);
-+	      if (ELF_IS_SECTION_IN_SEGMENT_FILE (this_hdr, segment))
-+		{
-+		  if (osec == NULL)
-+		    status = removed;
-+		  else if (section->flags != osec->flags
-+			   || section->lma != osec->lma
-+			   || section->vma != osec->vma
-+			   || section->size != osec->size
-+			   || section->rawsize != osec->rawsize
-+			   || section->alignment_power != osec->alignment_power)
-+		    {
-+		      /* Stop if a section is modified.  */
-+		      status = modified;
-+		      break;
-+		    }
-+		}
-+	    }
-+	}
-+    }
-+  BFD_ASSERT (status != unknown);
-+  return rewrite_elf_program_header (ibfd, obfd, status);
- }
- 
- /* Initialize private output section information from input section.  */
---- binutils/bfd/elflink.c.relro	2007-07-02 09:11:20.000000000 -0700
-+++ binutils/bfd/elflink.c	2007-07-02 09:11:20.000000000 -0700
-@@ -5347,7 +5347,6 @@ bfd_elf_size_dynamic_sections (bfd *outp
-     return TRUE;
- 
-   bed = get_elf_backend_data (output_bfd);
--  elf_tdata (output_bfd)->relro = info->relro;
-   if (info->execstack)
-     elf_tdata (output_bfd)->stack_flags = PF_R | PF_W | PF_X;
-   else if (info->noexecstack)
---- binutils/include/elf/internal.h.relro	2007-05-03 17:57:25.000000000 -0700
-+++ binutils/include/elf/internal.h	2007-07-02 09:11:20.000000000 -0700
-@@ -266,11 +266,12 @@ struct elf_segment_map
-      || segment->p_type == PT_TLS) ? sec_hdr->sh_size : 0)
- 
- /* Decide if the given sec_hdr is in the given segment.  PT_TLS segment
--   contains only SHF_TLS sections.  Only PT_LOAD and PT_TLS segments
--   can contain SHF_TLS sections.  */
-+   contains only SHF_TLS sections.  Only PT_LOAD, PT_GNU_RELRO and
-+   and PT_TLS segments can contain SHF_TLS sections.  */
- #define ELF_IS_SECTION_IN_SEGMENT(sec_hdr, segment)			\
-   (((((sec_hdr->sh_flags & SHF_TLS) != 0)				\
-      && (segment->p_type == PT_TLS					\
-+	 || segment->p_type == PT_GNU_RELRO				\
- 	 || segment->p_type == PT_LOAD))				\
-     || ((sec_hdr->sh_flags & SHF_TLS) == 0				\
- 	&& segment->p_type != PT_TLS))					\
---- binutils/ld/ldexp.c.relro	2007-06-18 12:04:12.000000000 -0700
-+++ binutils/ld/ldexp.c	2007-07-02 09:11:20.000000000 -0700
-@@ -389,6 +389,7 @@ fold_binary (etree_type *tree)
- 	      break;
- 
- 	    case DATA_SEGMENT_ALIGN:
-+	      expld.dataseg.relro = exp_dataseg_relro_start;
- 	      if (expld.phase != lang_first_phase_enum
- 		  && expld.section == bfd_abs_section_ptr
- 		  && (expld.dataseg.phase == exp_dataseg_none
-@@ -424,6 +425,7 @@ fold_binary (etree_type *tree)
- 	      break;
- 
- 	    case DATA_SEGMENT_RELRO_END:
-+	      expld.dataseg.relro = exp_dataseg_relro_end;
- 	      if (expld.phase != lang_first_phase_enum
- 		  && (expld.dataseg.phase == exp_dataseg_align_seen
- 		      || expld.dataseg.phase == exp_dataseg_adjust
---- binutils/ld/ldexp.h.relro	2007-04-02 09:32:42.000000000 -0700
-+++ binutils/ld/ldexp.h	2007-07-02 09:11:20.000000000 -0700
-@@ -98,6 +98,8 @@ typedef enum {
-   lang_final_phase_enum
- } lang_phase_type;
- 
-+union lang_statement_union;
-+
- struct ldexp_control {
-   /* Modify expression evaluation depending on this.  */
-   lang_phase_type phase;
-@@ -125,6 +127,15 @@ struct ldexp_control {
-     } phase;
- 
-     bfd_vma base, min_base, relro_end, end, pagesize, maxpagesize;
-+
-+    enum {
-+      exp_dataseg_relro_none,
-+      exp_dataseg_relro_start,
-+      exp_dataseg_relro_end,
-+    } relro;
-+
-+    union lang_statement_union *relro_start_stat;
-+    union lang_statement_union *relro_end_stat;
-   } dataseg;
- };
- 
---- binutils/ld/ldlang.c.relro	2007-06-01 09:30:19.000000000 -0700
-+++ binutils/ld/ldlang.c	2007-07-02 09:11:20.000000000 -0700
-@@ -4630,10 +4630,32 @@ lang_size_sections_1
- 	    bfd_vma newdot = dot;
- 	    etree_type *tree = s->assignment_statement.exp;
- 
-+	    expld.dataseg.relro = exp_dataseg_relro_none;
-+
- 	    exp_fold_tree (tree,
- 			   output_section_statement->bfd_section,
- 			   &newdot);
- 
-+	    if (expld.dataseg.relro == exp_dataseg_relro_start)
-+	      {
-+		if (!expld.dataseg.relro_start_stat)
-+		  expld.dataseg.relro_start_stat = s;
-+		else
-+		  {
-+		    ASSERT (expld.dataseg.relro_start_stat == s);
-+		  }
-+	      }
-+	    else if (expld.dataseg.relro == exp_dataseg_relro_end)
-+	      {
-+		if (!expld.dataseg.relro_end_stat)
-+		  expld.dataseg.relro_end_stat = s;
-+		else
-+		  {
-+		    ASSERT (expld.dataseg.relro_end_stat == s);
-+		  }
-+	      }
-+	    expld.dataseg.relro = exp_dataseg_relro_none;
-+
- 	    /* This symbol is relative to this section.  */
- 	    if ((tree->type.node_class == etree_provided
- 		 || tree->type.node_class == etree_assign)
-@@ -5659,6 +5681,81 @@ lang_gc_sections (void)
-     bfd_gc_sections (output_bfd, &link_info);
- }
- 
-+/* Worker for lang_find_relro_sections_1.  */
-+
-+static void
-+find_relro_section_callback (lang_wild_statement_type *ptr ATTRIBUTE_UNUSED,
-+			     struct wildcard_list *sec ATTRIBUTE_UNUSED,
-+			     asection *section,
-+			     lang_input_statement_type *file ATTRIBUTE_UNUSED,
-+			     void *data)
-+{
-+  /* Discarded, excluded and ignored sections effectively have zero
-+     size.  */
-+  if (section->output_section != NULL
-+      && section->output_section->owner == output_bfd
-+      && (section->output_section->flags & SEC_EXCLUDE) == 0
-+      && !IGNORE_SECTION (section)
-+      && section->size != 0)
-+    {
-+      bfd_boolean *has_relro_section = (bfd_boolean *) data;
-+      *has_relro_section = TRUE;
-+    }
-+}
-+
-+/* Iterate over sections for relro sections.  */
-+
-+static void
-+lang_find_relro_sections_1 (lang_statement_union_type *s,
-+			    bfd_boolean *has_relro_section)
-+{
-+  if (*has_relro_section)
-+    return;
-+
-+  for (; s != NULL; s = s->header.next)
-+    {
-+      if (s == expld.dataseg.relro_end_stat)
-+	break;
-+
-+      switch (s->header.type)
-+	{
-+	case lang_wild_statement_enum:
-+	  walk_wild (&s->wild_statement,
-+		     find_relro_section_callback,
-+		     has_relro_section);
-+	  break;
-+	case lang_constructors_statement_enum:
-+	  lang_find_relro_sections_1 (constructor_list.head,
-+				      has_relro_section);
-+	  break;
-+	case lang_output_section_statement_enum:
-+	  lang_find_relro_sections_1 (s->output_section_statement.children.head,
-+				      has_relro_section);
-+	  break;
-+	case lang_group_statement_enum:
-+	  lang_find_relro_sections_1 (s->group_statement.children.head,
-+				      has_relro_section);
-+	  break;
-+	default:
-+	  break;
-+	}
-+    }
-+}
-+
-+static void
-+lang_find_relro_sections (void)
-+{
-+  bfd_boolean has_relro_section = FALSE;
-+
-+  /* Check all sections in the link script.  */
-+
-+  lang_find_relro_sections_1 (expld.dataseg.relro_start_stat,
-+			      &has_relro_section);
-+
-+  if (!has_relro_section)
-+    link_info.relro = FALSE;
-+}
-+
- /* Relax all sections until bfd_relax_section gives up.  */
- 
- static void
-@@ -5786,6 +5883,10 @@ lang_process (void)
-      section positions, since they will affect SIZEOF_HEADERS.  */
-   lang_record_phdrs ();
- 
-+  /* Check relro sections.  */
-+  if (link_info.relro && ! link_info.relocatable)
-+    lang_find_relro_sections ();
-+
-   /* Size up the sections.  */
-   lang_size_sections (NULL, !command_line.relax);
- 
---- binutils/ld/testsuite/ld-elf/binutils.exp.relro	2007-03-02 13:00:10.000000000 -0800
-+++ binutils/ld/testsuite/ld-elf/binutils.exp	2007-07-02 09:11:20.000000000 -0700
-@@ -101,24 +101,33 @@ binutils_test strip "-shared" maxpage1
- binutils_test objcopy "" maxpage1
- binutils_test objcopy "-shared" maxpage1
- 
--binutils_test strip "-z relro" maxpage1
--binutils_test strip "-z relro -shared" maxpage1
--binutils_test objcopy "-z relro" maxpage1
--binutils_test objcopy "-z relro -shared" maxpage1
-+binutils_test strip "-z relro" relro
-+binutils_test strip "-z relro -shared" relro
-+binutils_test objcopy "-z relro" relro
-+binutils_test objcopy "-z relro -shared" relro
- 
- binutils_test objcopy "" tbss1
-+binutils_test objcopy "-z relro" tbss1
- binutils_test objcopy "-shared" tbss1
-+binutils_test objcopy "-shared -z relro" tbss1
- binutils_test objcopy "-z max-page-size=0x100000" tbss1
- binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tbss1
- binutils_test objcopy "" tdata1
-+binutils_test objcopy "-z relro" tdata1
- binutils_test objcopy "-shared" tdata1
-+binutils_test objcopy "-shared -z relro" tdata1
- binutils_test objcopy "-z max-page-size=0x100000" tdata1
- binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tdata1
- binutils_test objcopy "" tbss2
-+binutils_test objcopy "-z relro" tbss2
- binutils_test objcopy "-shared" tbss2
-+binutils_test objcopy "-shared -z relro" tbss2
- binutils_test objcopy "-z max-page-size=0x100000" tbss2
- binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tbss2
--binutils_test objcopy "-z max-page-size=0x100000" tdata2
-+
- binutils_test objcopy "" tdata2
-+binutils_test objcopy "-z relro" tdata2
- binutils_test objcopy "-shared" tdata2
-+binutils_test objcopy "-shared -z relro" tdata2
-+binutils_test objcopy "-z max-page-size=0x100000" tdata2
- binutils_test objcopy "-z max-page-size=0x100000 -z common-page-size=0x1000" tdata2
---- binutils/ld/testsuite/ld-elf/relro.s.relro	2007-07-02 09:11:20.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/relro.s	2007-07-02 09:11:20.000000000 -0700
-@@ -0,0 +1,14 @@
-+	.globl main
-+	.globl start
-+	.globl _start
-+	.globl __start
-+	.text
-+main:
-+start:
-+_start:
-+__start:
-+	.long	0
-+	.data
-+	.long	0
-+	.section .data.rel.ro,"aw",%progbits
-+	.long	0
diff -Nur binutils-2.18.50.0.1/patches/binutils-weakdef-1.patch binutils-stable/patches/binutils-weakdef-1.patch
--- binutils-2.18.50.0.1/patches/binutils-weakdef-1.patch	2007-08-01 15:11:55.000000000 +0200
+++ binutils-stable/patches/binutils-weakdef-1.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,99 +0,0 @@
-bfd/
-
-2007-07-19  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* elflink.c (elf_link_add_object_symbols): Check symbol type
-	for symbol alias in a dynamic object.
-
-ld/testsuite/
-
-2007-07-19  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* ld-elf/data2.c: New.
-	* ld-elf/weakdef1.c: Likewise.
-
-	* ld-elf/shared.exp: Add tests for libdata2 and weakdef1.
-
---- binutils/bfd/elflink.c.weakdef	2007-07-19 08:12:55.000000000 -0700
-+++ binutils/bfd/elflink.c	2007-07-19 10:24:57.000000000 -0700
-@@ -4585,6 +4585,7 @@ elf_link_add_object_symbols (bfd *abfd, 
- 	  asection *slook;
- 	  bfd_vma vlook;
- 	  long ilook;
-+	  int tlook;
- 	  size_t i, j, idx;
- 
- 	  hlook = weaks;
-@@ -4597,6 +4598,7 @@ elf_link_add_object_symbols (bfd *abfd, 
- 		      || hlook->root.type == bfd_link_hash_indirect);
- 	  slook = hlook->root.u.def.section;
- 	  vlook = hlook->root.u.def.value;
-+	  tlook = hlook->type;
- 
- 	  ilook = -1;
- 	  i = 0;
-@@ -4634,9 +4636,10 @@ elf_link_add_object_symbols (bfd *abfd, 
- 	    {
- 	      h = sorted_sym_hash [i];
- 
--	      /* Stop if value or section doesn't match.  */
-+	      /* Stop if value, section or type doesn't match.  */
- 	      if (h->root.u.def.value != vlook
--		  || h->root.u.def.section != slook)
-+		  || h->root.u.def.section != slook
-+		  || h->type != tlook)
- 		break;
- 	      else if (h != hlook)
- 		{
---- binutils/ld/testsuite/ld-elf/data2.c.weakdef	2007-07-19 10:22:33.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/data2.c	2007-07-19 10:16:33.000000000 -0700
-@@ -0,0 +1,9 @@
-+int foo = 0;
-+extern int foo_alias __attribute__ ((weak, alias ("foo")));
-+
-+void
-+bar (void)
-+{
-+  foo = -1;
-+}
-+
---- binutils/ld/testsuite/ld-elf/shared.exp.weakdef	2007-07-06 13:12:26.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/shared.exp	2007-07-19 10:20:15.000000000 -0700
-@@ -123,6 +123,9 @@ set build_tests {
-   {"Build libdata1.so"
-    "-shared" "-fPIC"
-    {data1.c} {} "libdata1.so"}
-+  {"Build libdata2.so"
-+   "-shared" "-fPIC"
-+   {data2.c} {} "libdata2.so"}
- }
- 
- set run_tests {
-@@ -235,6 +238,9 @@ set run_tests {
-     {"Run with libdata1.so"
-      "tmpdir/libdata1.so" ""
-      {dynbss1.c} "dynbss1" "pass.out"}
-+    {"Run with libdata2.so"
-+     "tmpdir/libdata2.so" ""
-+     {weakdef1.c} "weakdef1" "pass.out"}
- }
- 
- run_cc_link_tests $build_tests
---- binutils/ld/testsuite/ld-elf/weakdef1.c.weakdef	2007-07-19 10:21:52.000000000 -0700
-+++ binutils/ld/testsuite/ld-elf/weakdef1.c	2007-07-19 10:21:28.000000000 -0700
-@@ -0,0 +1,15 @@
-+#include <stdio.h>
-+#include <stdlib.h>
-+
-+extern int foo_alias;
-+extern void bar (void);
-+
-+int
-+main (void)
-+{
-+  bar ();
-+  if (foo_alias != -1)
-+    abort ();
-+  printf ("PASS\n");
-+  return 0;
-+}
diff -Nur binutils-2.18.50.0.1/patches/ChangeLog binutils-stable/patches/ChangeLog
--- binutils-2.18.50.0.1/patches/ChangeLog	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/patches/ChangeLog	1970-01-01 01:00:00.000000000 +0100
@@ -1,549 +0,0 @@
-2007-08-23  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-shr-83.patch: New file. Replace ...
-	* binutils-shr-82.patch: This. Removed.
-	* README: Likewise.
-
-2007-08-11  H.J. Lu  <hjl@gnu.org>
-
-	* ld-env-7.patch: New file. Replace ...
-	* ld-env-6.patch: This. Removed.
-	* README: Likewise.
-
-2007-08-03  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-pe-align-2.patch: Removed.
-	* README: Don't apply it.
-
-2007-07-29  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-pe-align-2.patch: New file.
-	* README: Apply it.
-
-2007-07-23  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-weakdef-1.patch: New file.
-	* README: Apply it.
-
-2007-07-10  H.J. Lu  <hjl@gnu.org>
-
-	* ld-env-6.patch: New file. Replace ...
-	* ld-env-4.patch: This. Removed.
-	* README: Likewise.
-
-2007-07-10  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-error-3.patch: New file. Replace ...
-	* binutils-error-1.patch: This. Removed.
-	* README: Likewise.
-
-2007-07-04  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-tls-relro-14.patch: New file. Replace ...
-	* binutils-tls-relro-13.patch: This. Removed.
-	* README: Likewise.
-
-2007-06-30  H.J. Lu  <hjl@gnu.org>
-
-	* ld-env-4.patch: New file. Replace ...
-	* ld-env-3.patch: This. Removed.
-	* README: Likewise.
-
-2007-06-26  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-signed-2.patch: New file.
-	* README: Apply it.
-
-	* bfd-ref_addr-6.patch: New file. Replace ...
-	* bfd-ref_addr-5.patch: This. Removed.
-	* README: Likewise.
-
-2007-06-19  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-mixed-efi-4.patch: Removed.
-	* binutils-ia64-merge-11.patch: Likewise.
-	* README: Don't apply them.
-
-2007-06-15  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-ia64-merge-11.patch: New file.
-	* README: Apply it.
-
-2007-06-09  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-mixed-efi-4.patch: New file.
-	* README: Apply it.
-
-2007-06-02  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-shr-82.patch: New file. Replace ...
-	* binutils-shr-81.patch: This. Removed.
-	* README: Likewise.
-
-2007-05-30  H.J. Lu  <hjl@gnu.org>
-
-	* libtool-archive-1.patch: Removed.
-	* libtool-relink-1.patch: Likewise.
-	* README: Don't apply them.
-
-2007-05-15  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-shr-81.patch: New file. Replace ...
-	* binutils-shr-80.patch: This. Removed.
-	* README: Likewise.
-
-2007-05-11  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-hash-2.patch: New file.
-	* binutils-error-1.patch: Likewise.
-	* README: Apply them.
-
-2007-05-09  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-shr-80.patch: New file. Replace ...
-	* binutils-shr-79.patch: This. Removed.
-	* ld-env-3.patch: New file. Replace ...
-	* ld-env-2.patch: This. Removed.
-	* README: Updated.
-
-2007-05-03  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-tls-relro-13.patch: New file. Replace ...
-	* binutils-tls-relro-12.patch: This. Removed.
-	* README: Likewise.
-
-2007-03-31  H.J. Lu  <hjl@gnu.org>
-
-	* ld-env-2.patch: New file. Replace ...
-	* ld-env-1.patch: This. Removed.
-	* README: Likewise.
-
-2007-03-22  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-pe-size-1.patch: Removed.
-	* binutils-check-phdr-2.patch: Likewise.
-	* README: Don't apply them.
-
-2007-03-19  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-pe-size-1.patch: New file.
-	* README: Apply it.
-
-2007-03-15  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-check-phdr-2.patch: New file. Replace ...
-	* binutils-check-phdr-1.patch: This. Removed.
-	* README: Likewise.
-
-2007-03-15  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-version-1.patch: Removed.
-	* binutils-bugs-4.patch: Likewise.
-	* README: Don't apply them.
-
-2007-03-14  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-version-1.patch: New file.
-	* binutils-bugs-4.patch: Likewise.
-	* README: Apply them.
-
-2007-03-13  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-osabi-3.patch: Removed.
-	* README: Don't apply it.
-
-2007-03-11  H.J. Lu  <hjl@gnu.org>
-
-	* gas-relax-4.patch: Removed.
-	* README: Don't apply it.
-
-2007-03-07  H.J. Lu  <hjl@gnu.org>
-
-	* gas-relax-4.patch: New file.
-	* binutils-check-phdr-1.patch: Likewise.
-	* README: Apply them.
-
-2007-03-01  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-tls-relro-12.patch: New file. Replace ...
-	* binutils-tls-relro-10.patch: This. Removed.
-	* README: Likewise.
-
-2007-01-30  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-speed-3.patch: Removed.
-	* README: Don't apply it.
-
-2007-01-28  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-osabi-3.patch: New file. Replace ...
-	* bfd-elf-osabi-2.patch: This. Removed.
-	* README: Likewise.
-
-2007-01-25  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-speed-3.patch: New file.
-	* ld-env-1.patch: Likewise.
-	* README: Apply them.
-
-2007-01-23  H.J. Lu  <hjl@gnu.org>
-
-	* README: Use patch -E.
-
-2007-01-23  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-shr-79.patch: New file. Replace ...
-	* binutils-shr-78.patch: This. Removed.
-	* binutils-tls-relro-10.patch: New file. Replace ...
-	* binutils-tls-relro-9.patch: This. Removed.
-	* README: Updated.
-
-2007-01-23  H.J. Lu  <hjl@gnu.org>
-
-	* README: Create ChangeLog.patches when applying patches cleanly.
-
-2007-01-22  H.J. Lu  <hjl@gnu.org>
-
-	* README: Support applying patches cleanly.
-
-2007-01-19  H.J. Lu  <hjl@gnu.org>
-
-	* ld-symbolic-4.patch: Removed.
-	* README: Don't apply it.
-
-2007-01-17  H.J. Lu  <hjl@gnu.org>
-
-	* ld-symbolic-4.patch: New file.
-	* README: Apply it.
-
-2007-01-16  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-dynamic-data-7.patch: Removed.
-	* README: Don't apply it.
-
-2007-01-14  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-osabi-2.patch: New file.
-	* binutils-dynamic-data-7.patch: Likewise.
-	* binutils-shr-78.patch: Likewise.
-	* README: Apply them.
-
-2006-12-28  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-tls-relro-9.patch: New file. Replace ...
-	* binutils-tls-relro-6.patch: This. Removed.
-	* README: Likewise.
-
-2006-12-25  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-tls-relro-6.patch: New file. Replace ...
-	* binutils-tls-relro-5.patch: This. Removed.
-	* README: Likewise.
-
-2006-11-17  H.J. Lu  <hjl@gnu.org>
-
-	* README: Don't apply bfd-kept-4.patch.
-
-2006-10-31  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-symtab-4.patch: Removed.
-	* README: Don't apply it.
-
-2006-10-26  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-flags-1.patch: Removed.
-	* README: Don't apply it.
-
-2006-10-20  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-ref_addr-5.patch: New file.
-	* binutils-indirect-1.patch: Likewise.
-	* bfd-flags-1.patch: Likewise.
-	* binutils-tls-relro-5.patch: Likewise.
-	* README: Apply them.
-
-2006-10-20  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-stabs-3.patch: Removed.
-	* README: Don't apply it.
-
-2006-09-24  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-symtab-4.patch: Include regenerated header files.
-
-2006-09-24  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-symtab-4.patch: New file.
-	* README: Apply it.
-
-2006-09-18  H.J. Lu  <hjl@gnu.org>
-
-	* libtool-archive-1.patch: New file.
-	* libtool-relink-1.patch: Likewise.
-	* README: Apply them.
-
-2006-07-15  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-version-exec-3.patch: Removed.
-	* README: Don't apply it.
-
-2006-06-07  H.J. Lu  <hjl@gnu.org>
-
-	* intl-info-1.patch: Removed.
-	* README: Don't apply it.
-
-2006-06-01  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-stabs-3.patch: New file. Replace ...
-	* bfd-stabs-2.patch: This. Removed.
-	* README: Likewise.
-
-	* binutils-phdr-2.patch: Removed.
-	* README: Don't apply it.
-
-2006-05-26  H.J. Lu  <hjl@gnu.org>
-
-	* intl-info-1.patch: New file.
-	* README: Apply it.
-
-2006-05-26  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-kept-4.patch: New file.
-	* bfd-stabs-2.patch: Likewise.
-	* binutils-phdr-2.patch: Likewise.
-	* README: Apply them.
-
-2006-05-10  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-linkonce-2342-1.patch: Removed.
-	* README: Don't apply it.
-
-2006-04-05  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-64k-4.patch: Removed.
-	* bfd-elf-mis-3.patch: Likewise.
-	* README: Don't apply them.
-
-2006-03-17  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-64k-4.patch: New file.
-	* bfd-elf-mis-3.patch: Likewise.
-	* bfd-linkonce-2342-1.patch: Likewise.
-	* README: Apply them.
-
-2006-02-17  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-error-2.patch: Removed.
-	* bfd-pie-4.patch: Likewise.
-	* README: Don't apply them.
-
-2006-02-13  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-error-2.patch: New file.
-	* bfd-pie-4.patch: New file.
-	* README: Apply them.
-
-2005-11-16  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-version-exec-3.patch: New file. Replace ...
-	* binutils-version-exec-2.patch: This. Removed.
-	* README: Likewise.
-
-2005-08-17  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-adjust-3.patch: Removed.
-	* README: Don't apply it.
-
-2005-08-15  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-adjust-3.patch: New file.
-	* README: Apply it.
-
-2005-07-11  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-provide-5.patchh: Removed.
-
-	* README: Don't apply binutils-provide-5.patch.
-
-2005-07-08  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-provide-5.patch: New file. Replace ...
-	* binutils-provide-4.patch: This. Removed.
-	* README: Likewise.
-
-2005-07-07  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-elf-vsb-1.patch: Removed.
-
-	* README: Don't apply bfd-elf-vsb-1.patch.
-
-2005-07-06  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-dwarf-addr-3.patch: Removed.
-
-	* README: Don't apply bfd-dwarf-addr-3.patch.
-
-2005-06-30  H.J. Lu  <hjl@gnu.org>
-
-	* binutils-provide-4.patch: New file. Replace ...
-	* binutils-provide-3.patch: This. Removed.
-	* README: Likewise.
-
-2005-06-22  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-dwarf-addr-3.patch: New file. Fix DWARF 2 address.
-
-	* bfd-elf-vsb-1.patch: New file. Fix undefined symbol with
-	non-default visibility.
-
-	* binutils-provide-3.patch: New file. Fix provided symbols with
-	relaxation.
-
-	* binutils-version-exec-2.patch: New file. Support selectly
-	--export-dynamic and -Bsymbolic.
-
-	* README: Apply bfd-dwarf-addr-3.patch, bfd-elf-vsb-1.patch,
-	binutils-provide-3.patch and binutils-version-exec-2.patch.
-
-2004-08-13  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-abort.patch: Removed.
-
-	* README: Don't apply bfd-abort.patch.
-
-2004-05-29  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-ia64-merge.patch: Removed.
-
-	* README: Don't apply bfd-ia64-merge.patch.
-
-2004-05-28  H.J. Lu  <hjl@gnu.org>
-
-	* gas-ia64-auto.patch: Removed.
-	* gas-ia64-ar.patch: Likewise.
-
-	* README: Don't apply gas-ia64-auto.patch and gas-ia64-ar.patch.
-
-2004-05-27  H.J. Lu  <hjl@gnu.org>
-
-	* apply_demangler: Removed.
-	* demangler.patch: Likewise.
-	* ld-test-link.patch: Likewise.
-
-	* bfd-ia64-merge.patch: New file.
-	* gas-ia64-auto.patch: Likewise.
-	* gas-ia64-ar.patch: Likewise.
-
-	* README: Apply bfd-ia64-merge.patch, gas-ia64-auto.patch and
-	gas-ia64-ar.patch.
-
-2004-05-19  H.J. Lu  <hjl@gnu.org>
-
-	* ld-eh-frame-ro.patch: Removed.
-
-	* README: Don't apply ld-eh-frame-ro.patch.
-
-2004-05-14  H.J. Lu  <hjl@gnu.org>
-
-	* ld-eh-frame-ro.patch: Updated.
-
-2004-05-14  H.J. Lu  <hjl@gnu.org>
-
-	* ld-eh-frame-ro.patch: New. Handle RO/RW .eh_frame and
-	.gcc_except_table sections.
-
-	* README: Apply ld-eh-frame-ro.patch.
-
-2004-04-23  H.J. Lu  <hjl@gnu.org>
-
-	* README: Don't apply bfd-elf-mix.patch.
-
-2004-04-22  H.J. Lu  <hjl@gnu.org>
-
-	* bfd-abort.patch: New file. Abort on NULL BFD.
-
-	* bfd-elf-mix.patch: New file. Improve ELF linker with non-ELF
-	inputs.
-
-	* README: Apply bfd-abort.patch and bfd-elf-mix.patch.
-
-2004-01-07  H.J. Lu  <hjl@gnu.org>
-
-	* README: Don't apply libtool-dso.patch.
-
-2003-12-04  H.J. Lu  <hjl@gnu.org>
-
-	* libtool-dso.patch: Updated.
-
-2003-10-14  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Updated.
-
-2003-10-01  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Updated.
-
-2003-09-30  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Fix multilib support.
-
-2003-09-03  H.J. Lu  <hjl@gnu.org>
-
-	* libtool-dso.patch: Updated.
-
-2003-08-28  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Updated.
-
-	* apply_demangler: Use autoconf instead of autoconf-2.13.
-
-2003-08-15  H.J. Lu  <hjl@gnu.org>
-
-	* libtool-dso.patch: Updated.
-
-2003-08-12  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Updated.
-
-2003-07-23  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Updated.
-
-2003-07-22  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Support relative source directory.
-
-2003-07-22  H.J. Lu  <hjl@gnu.org>
-
-	* demangler.patch: Support single directory build.
-
-2003-07-21  H.J. Lu <hjl@gnu.org>
-
-	* demangler.patch: New. A new C++ demangler.
-
-	* apply_demangler: New. A script to apply the new demangler.
-
-2003-07-14  H.J. Lu <hjl@gnu.org>
-
-	* libtool-dso.patch: Updated.
-
-2003-06-11  H.J. Lu <hjl@gnu.org>
-
-	* libtool-dso.patch: Updated.
-
-2003-05-30  H.J. Lu <hjl@gnu.org>
-
-	* README: Don't apply ld-test-link.patch.
-
-2003-05-25  H.J. Lu <hjl@gnu.org>
-
-	* libtool-dso.patch: New. Fix brain dead libtool.
-
-	* README: Apply libtool-dso.patch.
-
-2003-05-23  H.J. Lu <hjl@gnu.org>
-
-	* ld-test-link.patch: New file. Fix "make check" in ld for
-	non-system compiler.
-
-	* README: New file. Apply ld-test-link.patch.
diff -Nur binutils-2.18.50.0.1/patches/ld-env-7.patch binutils-stable/patches/ld-env-7.patch
--- binutils-2.18.50.0.1/patches/ld-env-7.patch	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/patches/ld-env-7.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,59 +0,0 @@
-2007-01-24  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* NEWS: Mention LD_SYMBOLIC and LD_SYMBOLIC_FUNCTIONS.
-
-	* ld.texinfo: Document LD_SYMBOLIC and LD_SYMBOLIC_FUNCTIONS.
-
-	* ldmain.c (main): Handle LD_SYMBOLIC and
-	LD_SYMBOLIC_FUNCTIONS.
-
---- ld/NEWS.env	2007-08-11 06:29:46.000000000 -0700
-+++ ld/NEWS	2007-08-11 06:31:10.000000000 -0700
-@@ -1,4 +1,7 @@
- -*- text -*-
-+* ELF: Support environment variables, LD_SYMBOLIC for -Bsymbolic and
-+  LD_SYMBOLIC_FUNCTIONS for -Bsymbolic-functions.
-+
- Changes in 2.18:
- 
- * Linker sources now released under version 3 of the GNU General Public
---- ld/ld.texinfo.env	2007-07-26 16:16:54.000000000 -0700
-+++ ld/ld.texinfo	2007-08-11 06:30:21.000000000 -0700
-@@ -1142,14 +1142,21 @@ When creating a shared library, bind ref
- definition within the shared library, if any.  Normally, it is possible
- for a program linked against a shared library to override the definition
- within the shared library.  This option is only meaningful on ELF
--platforms which support shared libraries.
-+platforms which support shared libraries.  If @option{-Bsymbolic} is not
-+used when linking a shared library, the linker will also turn on this
-+option if the environment variable @code{LD_SYMBOLIC} is set.
- 
- @kindex -Bsymbolic-functions
- @item -Bsymbolic-functions
- When creating a shared library, bind references to global function
- symbols to the definition within the shared library, if any.
- This option is only meaningful on ELF platforms which support shared
--libraries.
-+libraries.  If @option{-Bsymbolic-functions} is not used when linking a
-+shared library, the linker will also turn on this option if the
-+environment variable @code{LD_SYMBOLIC_FUNCTIONS} is set.  When
-+both environment variables @code{LD_SYMBOLIC} and
-+@code{LD_SYMBOLIC_FUNCTIONS} are set, @code{LD_SYMBOLIC} will take
-+precedent.
- 
- @kindex --dynamic-list=@var{dynamic-list-file}
- @item --dynamic-list=@var{dynamic-list-file}
---- ld/ldmain.c.env	2007-08-11 06:30:21.000000000 -0700
-+++ ld/ldmain.c	2007-08-11 06:30:21.000000000 -0700
-@@ -254,6 +254,11 @@ main (int argc, char **argv)
-   command_line.warn_search_mismatch = TRUE;
-   command_line.check_section_addresses = TRUE;
- 
-+  if (getenv ("LD_SYMBOLIC") != NULL)
-+    command_line.symbolic = symbolic;
-+  else if (getenv ("LD_SYMBOLIC_FUNCTIONS") != NULL)
-+    command_line.symbolic = symbolic_functions;
-+
-   /* We initialize DEMANGLING based on the environment variable
-      COLLECT_NO_DEMANGLE.  The gcc collect2 program will demangle the
-      output of the linker, unless COLLECT_NO_DEMANGLE is set in the
diff -Nur binutils-2.18.50.0.1/patches/ld-multilib.patch binutils-stable/patches/ld-multilib.patch
--- binutils-2.18.50.0.1/patches/ld-multilib.patch	2003-01-21 19:21:34.000000000 +0100
+++ binutils-stable/patches/ld-multilib.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,633 +0,0 @@
-2001-08-17  H.J. Lu  <hjl@gnu.org>
-
-	* ldfile.h (ldfile_open_command_file): Return void again;
-	* ldfile.c (ldfile_open_command_file): Return if failed to open
-	the file and command_line.multilib_dir is not NULL.
-
-2001-06-29  H.J. Lu  <hjl@gnu.org>
-
-	* ldfile.c (ldfile_open_file_search): Don't try
-	command_line.multilib_dir if it starts with a `slash'.
-	* emultempl/elf32.em (gld${EMULATION_NAME}_after_open):
-	Likewise.
-
-	* ldmain.c (set_scripts_dir): Allow the absolute path.
-
-2001-04-25  H.J. Lu  <hjl@gnu.org>
-
-	* ldfile.h (ldfile_open_command_file): Return FILE *;
-	* ldfile.c (ldfile_open_command_file): Return NULL if failed
-	to open the file and command_line.multilib_dir is not NULL.
-	Return ldlex_input_stack if ok.
-
-	* ldmain.c (main): Print out the external linker script for
-	--verbose. Try internal linker script if the external linker
-	script doesn't exist.
-
-2001-04-24  H.J. Lu  <hjl@gnu.org>
-
-	* emultempl/elf32.em (gld${EMULATION_NAME}_after_open): Search
-	command_line.multilib_dir first if it is not NULL.
-
-2001-04-24  H.J. Lu  <hjl@gnu.org>
-
-	* ldfile.h (slash): Declared.
-
-	* ldfile.c (ldfile_try_open_file): New functon. Try to open
-	a file in a search directory.
-	(ldfile_open_file_search): Search command_line.multilib_dir
-	first if it is not NULL.
-
-	* ldmain.c (set_scripts_dir): Use the relative path only.
-
-Thu Sep 24 21:06:07 1998  H.J. Lu  (hjl@gnu.org)
-
-	From "Brad M. Garcia" <bgarcia@fore.com> on Wed Sep 23 10:21:17 1998.
-	* emultempl/sunos.em (gld${EMULATION_NAME}_set_symbols):
-	Calling ldfile_add_library_path with one more argument, true.
-	* emultempl/gld960.em (gld960_before_parse): Likewise.
-	* emultempl/gld960c.em (gld960_before_parse): Likewise.
-	* emultempl/lnk960.em (lnk960_before_parse): Likewise.
-	
-Wed Sep 16 07:32:44 1998  H.J. Lu  (hjl@gnu.org)
-
-	* ld.h (args_type): Add one field, multilib_dir.
-
-	* ldfile.c (ldfile_add_library_path): Add one argument, append.
-	* ldfile.h (ldfile_add_library_path): Likewise.
-
-	* ldgram.y: Calling ldfile_add_library_path with one more
-	argument, true.
-	* ldmain.c: Likewise.
-	* lexsup.c: Likewise.
-
-	* ldmain.c (check_for_scripts_dir): Add one argument, append.
-	(main): Initialize command_line.multilib_dir to NULL.
-	(set_scripts_dir): If command_line.multilib_dir is not NULL,
-	prepend it to search path.
-
-	* lexsup.c (OPTION_MULTILIB_DIR): New.
-	(parse_args): Handle OPTION_MULTILIB_DIR.
-
-	* emultempl/elf32.em (gld${EMULATION_NAME}_get_script): If
-	command_line.multilib_dir != NULL, get linker scripts from
-	files.
-
---- ld/emultempl/elf32.em.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/emultempl/elf32.em	Fri Jan 17 09:33:31 2003
-@@ -704,6 +704,22 @@ cat >>e${EMULATION_NAME}.c <<EOF
- 
- 	      if (search->cmdline)
- 		continue;
-+
-+	      if (command_line.multilib_dir != NULL
-+		  && *command_line.multilib_dir != '/')
-+	        {
-+		  filename = (char *) xmalloc (strlen (search->name)
-+					       + strlen (command_line.multilib_dir)
-+					       + len
-+					       + 3);
-+		  sprintf (filename, "%s/%s/%s", search->name,
-+			   command_line.multilib_dir, l->name);
-+
-+		  if (gld${EMULATION_NAME}_try_needed (filename, force))
-+		    break;
-+		  free (filename);
-+		}
-+
- 	      filename = (char *) xmalloc (strlen (search->name) + len + 2);
- 	      sprintf (filename, "%s/%s", search->name, l->name);
- 	      if (gld${EMULATION_NAME}_try_needed (filename, force))
-@@ -1413,10 +1429,12 @@ sc="-f stringify.sed"
- 
- cat >>e${EMULATION_NAME}.c <<EOF
- {
--  *isfile = 0;
-+  if (command_line.multilib_dir == NULL)
-+    {
-+      *isfile = 0;
- 
--  if (link_info.relocateable && config.build_constructors)
--    return
-+      if (link_info.relocateable && config.build_constructors)
-+	return
- EOF
- sed $sc ldscripts/${EMULATION_NAME}.xu                 >> e${EMULATION_NAME}.c
- echo '  ; else if (link_info.relocateable) return'     >> e${EMULATION_NAME}.c
-@@ -1443,11 +1461,17 @@ echo '  ; else return'                  
- sed $sc ldscripts/${EMULATION_NAME}.x                  >> e${EMULATION_NAME}.c
- echo '; }'                                             >> e${EMULATION_NAME}.c
- 
--else
-+fi
- # Scripts read from the filesystem.
- 
-+if test -z "$COMPILE_IN"
-+then
- cat >>e${EMULATION_NAME}.c <<EOF
- {
-+EOF
-+fi
-+
-+cat >>e${EMULATION_NAME}.c <<EOF
-   *isfile = 1;
- 
-   if (link_info.relocateable && config.build_constructors)
-@@ -1466,7 +1490,6 @@ cat >>e${EMULATION_NAME}.c <<EOF
- 
- EOF
- fi
--fi
- 
- if test -n "$PARSE_AND_LIST_ARGS_CASES" -o x"$GENERATE_SHLIB_SCRIPT" = xyes; then
- 
---- ld/emultempl/gld960.em.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/emultempl/gld960.em	Fri Jan 17 09:33:31 2003
-@@ -59,7 +59,7 @@ gld960_before_parse()
-       ldfile_add_library_path (concat (env,
- 				       "/lib/libbout",
- 				       (const char *) NULL),
--			       FALSE);
-+			       FALSE, TRUE);
-     }
-   }
-   ldfile_output_architecture = bfd_arch_i960;
-@@ -72,11 +72,12 @@ static void gld960_before_parse()
-   char *env ;
-   env =  getenv("G960LIB");
-   if (env) {
--    ldfile_add_library_path(env, FALSE);
-+    ldfile_add_library_path(env, FALSE, TRUE);
-   }
-   env = getenv("G960BASE");
-   if (env)
--    ldfile_add_library_path (concat (env, "/lib", (const char *) NULL), FALSE);
-+    ldfile_add_library_path (concat (env, "/lib", (const char *) NULL),
-+			     FALSE, TRUE);
-   ldfile_output_architecture = bfd_arch_i960;
- }
- 
---- ld/emultempl/gld960c.em.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/emultempl/gld960c.em	Fri Jan 17 09:33:31 2003
-@@ -61,7 +61,7 @@ gld960_before_parse()
-       ldfile_add_library_path (concat (env,
- 				       "/lib/libcoff",
- 				       (const char *) NULL),
--			       FALSE);
-+			       FALSE, TRUE);
-     }
-   }
-   ldfile_output_architecture = bfd_arch_i960;
-@@ -74,12 +74,12 @@ static void gld960_before_parse()
-   char *env ;
-   env =  getenv("G960LIB");
-   if (env) {
--    ldfile_add_library_path(env, FALSE);
-+    ldfile_add_library_path(env, FALSE, TRUE);
-   }
-   env = getenv("G960BASE");
-   if (env)
-     ldfile_add_library_path (concat (env, "/lib", (const char *) NULL),
--			     FALSE);
-+			     FALSE, TRUE);
-   ldfile_output_architecture = bfd_arch_i960;
- }
- 
---- ld/emultempl/lnk960.em.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/emultempl/lnk960.em	Fri Jan 17 09:33:31 2003
-@@ -110,12 +110,13 @@ lnk960_before_parse ()
-     {
-       env = (char *) getenv (*p);
-       if (env)
--	ldfile_add_library_path (concat (env, "/lib/libcoff", ""), FALSE);
-+	ldfile_add_library_path (concat (env, "/lib/libcoff", ""),
-+				 FALSE, TRUE);
-     }
- 
-   env = (char *) getenv ("I960BASE");
-   if (env)
--    ldfile_add_library_path(concat (env, "/lib", ""), FALSE);
-+    ldfile_add_library_path(concat (env, "/lib", ""), FALSE, TRUE);
- 
-   ldfile_output_architecture = bfd_arch_i960;
-   ldfile_output_machine = bfd_mach_i960_core;
-@@ -136,7 +137,7 @@ lnk960_before_parse ()
-     }
- 
- 
--  ldfile_add_library_path (concat (name, "/lib", ""), FALSE);
-+  ldfile_add_library_path (concat (name, "/lib", ""), FALSE, TRUE);
-   ldfile_output_architecture = bfd_arch_i960;
-   ldfile_output_machine = bfd_mach_i960_core;
- }
---- ld/emultempl/sunos.em.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/emultempl/sunos.em	Fri Jan 17 09:33:31 2003
-@@ -131,7 +131,7 @@ cat >>e${EMULATION_NAME}.c <<EOF
- 	  if (c != NULL)
- 	    *c++ = '\0';
- 	  if (*l != '\0')
--	    ldfile_add_library_path (l, FALSE);
-+	    ldfile_add_library_path (l, FALSE, TRUE);
- 	  if (c == NULL)
- 	    break;
- 	  l = c;
---- ld/ld.h.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/ld.h	Fri Jan 17 09:33:31 2003
-@@ -154,6 +154,8 @@ typedef struct {
-      input files.  */
-   bfd_boolean accept_unknown_input_arch;
- 
-+  /* It is used to specify where to find some multilib files. */
-+  char *multilib_dir;
- } args_type;
- 
- extern args_type command_line;
---- ld/ldfile.c.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/ldfile.c	Fri Jan 17 09:33:31 2003
-@@ -71,11 +71,16 @@ static search_arch_type *search_arch_hea
- static search_arch_type **search_arch_tail_ptr = &search_arch_head;
- 
- static FILE *try_open PARAMS ((const char *name, const char *exten));
-+static bfd_boolean ldfile_try_open_file
-+  PARAMS ((const char *arch, lang_input_statement_type *entry,
-+	   search_dirs_type *search, const char *lib,
-+	   const char *suffix));
- 
- void
--ldfile_add_library_path (name, cmdline)
-+ldfile_add_library_path (name, cmdline, append)
-      const char *name;
-      bfd_boolean cmdline;
-+     bfd_boolean append;
- {
-   search_dirs_type *new;
- 
-@@ -83,11 +88,21 @@ ldfile_add_library_path (name, cmdline)
-     return;
- 
-   new = (search_dirs_type *) xmalloc (sizeof (search_dirs_type));
--  new->next = NULL;
-   new->name = name;
-   new->cmdline = cmdline;
--  *search_tail_ptr = new;
--  search_tail_ptr = &new->next;
-+  if (append)
-+    {
-+      new->next = NULL;
-+      *search_tail_ptr = new;
-+      search_tail_ptr = &new->next;
-+    }
-+  else
-+    {
-+      new->next = search_head;
-+      search_head = new;
-+      if (search_tail_ptr == &search_head)
-+	search_tail_ptr = &new->next;
-+    }
- }
- 
- /* Try to open a BFD for a lang_input_statement.  */
-@@ -244,6 +259,55 @@ ldfile_try_open_bfd (attempt, entry)
-   return TRUE;
- }
- 
-+static bfd_boolean
-+ldfile_try_open_file (arch, entry, search, lib, suffix)
-+     const char *arch;
-+     lang_input_statement_type *entry;
-+     search_dirs_type *search;
-+     const char *lib;
-+     const char *suffix;
-+{
-+  char *string;
-+
-+  if (entry->dynamic && ! link_info.relocateable)
-+    {
-+      if (ldemul_open_dynamic_archive (arch, search, entry))
-+	return TRUE;
-+    }
-+
-+  string = (char *) xmalloc (strlen (search->name)
-+			     + strlen (slash)
-+			     + strlen (lib)
-+			     + strlen (entry->filename)
-+			     + strlen (arch)
-+			     + strlen (suffix)
-+			     + 1);
-+
-+  if (entry->is_archive)
-+    sprintf (string, "%s%s%s%s%s%s", search->name, slash,
-+	     lib, entry->filename, arch, suffix);
-+  else if (entry->filename[0] == '/' || entry->filename[0] == '.'
-+#if defined (__MSDOS__) || defined (_WIN32)
-+	   || entry->filename[0] == '\\'
-+	   || (ISALPHA (entry->filename[0])
-+	       && entry->filename[1] == ':')
-+#endif
-+      )
-+    strcpy (string, entry->filename);
-+  else
-+    sprintf (string, "%s%s%s", search->name, slash, entry->filename);
-+
-+  if (ldfile_try_open_bfd (string, entry))
-+    {
-+      entry->filename = string;
-+      return TRUE;
-+    }
-+
-+  free (string);
-+
-+  return FALSE;
-+}
-+
- /* Search for and open the file specified by ENTRY.  If it is an
-    archive, use ARCH, LIB and SUFFIX to modify the file name.  */
- 
-@@ -268,43 +332,33 @@ ldfile_open_file_search (arch, entry, li
-        search != (search_dirs_type *) NULL;
-        search = search->next)
-     {
--      char *string;
--
--      if (entry->dynamic && ! link_info.relocateable)
-+      if (command_line.multilib_dir != NULL
-+	  && *command_line.multilib_dir != *slash)
- 	{
--	  if (ldemul_open_dynamic_archive (arch, search, entry))
--	    return TRUE;
--	}
-+	  const char *saved_name;
-+	  char *name;
-+	  bfd_boolean found;
-+
-+	  saved_name = search->name;
-+	  name = (char *) xmalloc (strlen (search->name)
-+				   + strlen (slash)
-+				   + strlen (command_line.multilib_dir)
-+				   + 1);
-+	  sprintf (name, "%s%s%s", saved_name, slash,
-+		   command_line.multilib_dir);
-+
-+	  search->name = name;
-+	  found = ldfile_try_open_file (arch, entry, search, lib,
-+					suffix);
-+	  search->name = saved_name;
- 
--      string = (char *) xmalloc (strlen (search->name)
--				 + strlen (slash)
--				 + strlen (lib)
--				 + strlen (entry->filename)
--				 + strlen (arch)
--				 + strlen (suffix)
--				 + 1);
--
--      if (entry->is_archive)
--	sprintf (string, "%s%s%s%s%s%s", search->name, slash,
--		 lib, entry->filename, arch, suffix);
--      else if (entry->filename[0] == '/' || entry->filename[0] == '.'
--#if defined (__MSDOS__) || defined (_WIN32)
--	       || entry->filename[0] == '\\'
--	       || (ISALPHA (entry->filename[0])
--	           && entry->filename[1] == ':')
--#endif
--	  )
--	strcpy (string, entry->filename);
--      else
--	sprintf (string, "%s%s%s", search->name, slash, entry->filename);
--
--      if (ldfile_try_open_bfd (string, entry))
--	{
--	  entry->filename = string;
--	  return TRUE;
-+	  free (name);
-+	  if (found)
-+	    return found;
- 	}
- 
--      free (string);
-+      if (ldfile_try_open_file (arch, entry, search, lib, suffix))
-+	return TRUE;
-     }
- 
-   return FALSE;
-@@ -442,8 +496,14 @@ ldfile_open_command_file (name)
- 
-   if (ldlex_input_stack == (FILE *) NULL)
-     {
--      bfd_set_error (bfd_error_system_call);
--      einfo (_("%P%F: cannot open linker script file %s: %E\n"), name);
-+      if (command_line.multilib_dir == NULL)
-+	{
-+	  bfd_set_error (bfd_error_system_call);
-+	  einfo (_("%P%F: cannot open linker script file %s: %E\n"),
-+		name);
-+	}
-+      else
-+	return;
-     }
- 
-   lex_push_file (ldlex_input_stack, name);
---- ld/ldfile.h.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/ldfile.h	Fri Jan 17 09:33:31 2003
-@@ -21,6 +21,7 @@
- #ifndef LDFILE_H
- #define LDFILE_H
- 
-+extern char *slash;
- extern const char *ldfile_input_filename;
- extern bfd_boolean ldfile_assumed_script;
- extern unsigned long ldfile_output_machine;
-@@ -44,7 +45,7 @@ extern search_dirs_type *search_head;
- extern void ldfile_add_arch
-   PARAMS ((const char *));
- extern void ldfile_add_library_path
--  PARAMS ((const char *, bfd_boolean cmdline));
-+  PARAMS ((const char *, bfd_boolean cmdline, bfd_boolean append));
- extern void ldfile_open_command_file
-   PARAMS ((const char *name));
- extern void ldfile_open_file
---- ld/ldgram.y.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/ldgram.y	Fri Jan 17 09:33:31 2003
-@@ -319,7 +319,7 @@ ifile_p1:
- 	|	TARGET_K '(' NAME ')'
- 		{ lang_add_target($3); }
- 	|	SEARCH_DIR '(' filename ')'
--		{ ldfile_add_library_path ($3, FALSE); }
-+		{ ldfile_add_library_path ($3, FALSE, TRUE); }
- 	|	OUTPUT '(' filename ')'
- 		{ lang_add_output($3, 1); }
-         |	OUTPUT_FORMAT '(' NAME ')'
---- ld/ldmain.c.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/ldmain.c	Fri Jan 17 09:33:31 2003
-@@ -95,7 +95,7 @@ args_type command_line;
- ld_config_type config;
- 
- static void remove_output PARAMS ((void));
--static bfd_boolean check_for_scripts_dir PARAMS ((char *dir));
-+static bfd_boolean check_for_scripts_dir PARAMS ((char *dir, bfd_boolean append));
- static bfd_boolean add_archive_element PARAMS ((struct bfd_link_info *, bfd *,
- 					    const char *));
- static bfd_boolean multiple_definition PARAMS ((struct bfd_link_info *,
-@@ -221,6 +221,7 @@ main (argc, argv)
-   command_line.warn_mismatch = TRUE;
-   command_line.check_section_addresses = TRUE;
-   command_line.accept_unknown_input_arch = FALSE;
-+  command_line.multilib_dir = NULL;
- 
-   /* We initialize DEMANGLING based on the environment variable
-      COLLECT_NO_DEMANGLE.  The gcc collect2 program will demangle the
-@@ -331,12 +332,34 @@ main (argc, argv)
-       char *s = ldemul_get_script (&isfile);
- 
-       if (isfile)
--	ldfile_open_command_file (s);
--      else
--	{
-+        {
-+	  ldfile_open_command_file (s);
-+
-+	  if (saved_script_handle == NULL)
-+	    {
-+	      /* We thought there was an external linker script. But
-+		 we couldn't find it. Let's try again for the internal
-+		 one without command_line.multilib_dir.  */
-+	      char *saved = command_line.multilib_dir;
-+	      command_line.multilib_dir = NULL;
-+	      s = ldemul_get_script (&isfile);
-+	      command_line.multilib_dir = saved;
-+	      if (isfile)
-+		{
-+		  /* It should never happen.  */
-+		  bfd_set_error (bfd_error_system_call);
-+		  einfo (_("%P%F: cannot open linker script file %s: %E\n"),
-+			 s);
-+		}
-+	    }
-+	}
-+
-+      if (!isfile)
-+	{	
- 	  lex_string = s;
- 	  lex_redirect (s);
- 	}
-+
-       parser_input = input_script;
-       yyparse ();
-       lex_string = NULL;
-@@ -587,8 +610,9 @@ get_emulation (argc, argv)
-    else return FALSE.  */
- 
- static bfd_boolean
--check_for_scripts_dir (dir)
-+check_for_scripts_dir (dir, append)
-      char *dir;
-+     bfd_boolean append;
- {
-   size_t dirlen;
-   char *buf;
-@@ -603,7 +627,7 @@ check_for_scripts_dir (dir)
-   res = stat (buf, &s) == 0 && S_ISDIR (s.st_mode);
-   free (buf);
-   if (res)
--    ldfile_add_library_path (dir, FALSE);
-+    ldfile_add_library_path (dir, FALSE, append);
-   return res;
- }
- 
-@@ -621,7 +645,32 @@ set_scripts_dir ()
-   char *end, *dir;
-   size_t dirlen;
- 
--  if (check_for_scripts_dir (SCRIPTDIR))
-+  if (command_line.multilib_dir != NULL)
-+    {
-+      bfd_boolean found;
-+
-+      if (*command_line.multilib_dir == *slash)
-+        {
-+	  found = check_for_scripts_dir (command_line.multilib_dir,
-+					 FALSE);
-+	}
-+      else
-+	{
-+	  dir = xmalloc (strlen (SCRIPTDIR)
-+			  + strlen (slash)
-+			  + strlen (command_line.multilib_dir) + 1);
-+	  sprintf (dir, "%s%s%s", SCRIPTDIR, slash,
-+		   command_line.multilib_dir);
-+
-+	  found = check_for_scripts_dir (dir, FALSE);
-+	  free (dir);
-+	}
-+
-+      if (found)
-+	return;
-+    }
-+
-+  if (check_for_scripts_dir (SCRIPTDIR, TRUE))
-     /* We've been installed normally.  */
-     return;
- 
-@@ -650,13 +699,13 @@ set_scripts_dir ()
-   strncpy (dir, program_name, dirlen);
-   dir[dirlen] = '\0';
- 
--  if (check_for_scripts_dir (dir))
-+  if (check_for_scripts_dir (dir, TRUE))
-     /* Don't free dir.  */
-     return;
- 
-   /* Look for "ldscripts" in <the dir where our binary is>/../lib.  */
-   strcpy (dir + dirlen, "/../lib");
--  if (check_for_scripts_dir (dir))
-+  if (check_for_scripts_dir (dir, TRUE))
-     return;
- 
-   /* Well, we tried.  */
---- ld/lexsup.c.multilib	Fri Jan 17 09:23:13 2003
-+++ ld/lexsup.c	Fri Jan 17 09:33:31 2003
-@@ -138,6 +138,7 @@ int parsing_defsym = 0;
- #define OPTION_NO_STRIP_DISCARDED	(OPTION_STRIP_DISCARDED + 1)
- #define OPTION_ACCEPT_UNKNOWN_INPUT_ARCH    (OPTION_NO_STRIP_DISCARDED + 1)
- #define OPTION_NO_ACCEPT_UNKNOWN_INPUT_ARCH (OPTION_ACCEPT_UNKNOWN_INPUT_ARCH + 1)
-+#define OPTION_MULTILIB_DIR		(OPTION_NO_ACCEPT_UNKNOWN_INPUT_ARCH + 1)
- 
- /* The long options.  This structure is used for both the option
-    parsing and the help text.  */
-@@ -329,6 +330,8 @@ static const struct ld_option ld_options
-      '\0', N_("SYMBOL"), N_("Call SYMBOL at load-time"), ONE_DASH },
-   { {"Map", required_argument, NULL, OPTION_MAP},
-       '\0', N_("FILE"), N_("Write a map file"), ONE_DASH },
-+  { {"multilib-dir", required_argument, NULL, OPTION_MULTILIB_DIR},
-+      '\0', N_("PATH"), N_("Specify a target directory"), TWO_DASHES },
-   { {"no-define-common", no_argument, NULL, OPTION_NO_DEFINE_COMMON},
-       '\0', NULL, N_("Do not define Common storage"), TWO_DASHES },
-   { {"no-demangle", no_argument, NULL, OPTION_NO_DEMANGLE },
-@@ -739,7 +742,7 @@ parse_args (argc, argv)
- 	  xexit (0);
- 	  break;
- 	case 'L':
--	  ldfile_add_library_path (optarg, TRUE);
-+	  ldfile_add_library_path (optarg, TRUE, TRUE);
- 	  break;
- 	case 'l':
- 	  lang_add_input_file (optarg, lang_input_file_is_l_enum,
-@@ -962,6 +965,9 @@ parse_args (argc, argv)
- 	  parser_input = input_script;
- 	  yyparse ();
- 	  break;
-+	case OPTION_MULTILIB_DIR:
-+	  command_line.multilib_dir = xstrdup (optarg);
-+	  break;
- 	case OPTION_SECTION_START:
- 	  {
- 	    char *optarg2;
-@@ -1195,7 +1201,7 @@ set_default_dirlist (dirlist_ptr)
-       if (p != NULL)
- 	*p = '\0';
-       if (*dirlist_ptr != '\0')
--	ldfile_add_library_path (dirlist_ptr, TRUE);
-+	ldfile_add_library_path (dirlist_ptr, TRUE, TRUE);
-       if (p == NULL)
- 	break;
-       dirlist_ptr = p + 1;
diff -Nur binutils-2.18.50.0.1/patches/libtool-dso.patch binutils-stable/patches/libtool-dso.patch
--- binutils-2.18.50.0.1/patches/libtool-dso.patch	2004-01-14 22:07:55.000000000 +0100
+++ binutils-stable/patches/libtool-dso.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,94 +0,0 @@
-2003-05-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* ltmain.sh: Make symlink for shared library if needed.
-
-opcodes/
-
-2003-12-04  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.in: Regenerated.
-
-2003-09-03  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.in: Regenerated.
-
-2003-08-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.in: Regenerated.
-
-2003-07-14  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.in: Regenerated.
-
-2003-06-11  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.in: Regenerated.
-
-2003-05-23  H.J. Lu  <hongjiu.lu@intel.com>
-
-	* Makefile.am (libopcodes_la_LIBADD): Use "-L../bfd -lbfd"
-	instead of "../bfd/libbfd.la".
-	* Makefile.in: Regenerated.
-
---- binutils/ltmain.sh.dso	2002-03-22 00:16:20.000000000 -0800
-+++ binutils/ltmain.sh	2003-12-04 10:49:04.000000000 -0800
-@@ -4413,6 +4413,10 @@ relink_command=\"$relink_command\""
-       # LD_LIBRARY_PATH before the program is installed.
-       $show "(cd $output_objdir && $rm $outputname && $LN_S ../$outputname $outputname)"
-       $run eval '(cd $output_objdir && $rm $outputname && $LN_S ../$outputname $outputname)' || exit $?
-+      if test -n "$linkname"; then
-+        $show "(cd $output_objdir && $rm ../$linkname && $LN_S $output_objdir/$linkname ../$linkname)"
-+        $run eval '(cd $output_objdir && $rm ../$linkname && $LN_S $output_objdir/$linkname ../$linkname)' || exit $?
-+      fi
-       ;;
-     esac
-     exit 0
---- binutils/opcodes/Makefile.am.dso	2003-12-04 10:43:28.000000000 -0800
-+++ binutils/opcodes/Makefile.am	2003-12-04 10:49:04.000000000 -0800
-@@ -284,7 +284,7 @@ disassemble.lo: disassemble.c $(INCDIR)/
- 
- libopcodes_la_SOURCES =  dis-buf.c disassemble.c dis-init.c
- libopcodes_la_DEPENDENCIES = $(OFILES) ../bfd/libbfd.la
--libopcodes_la_LIBADD = $(OFILES) @WIN32LIBADD@ ../bfd/libbfd.la
-+libopcodes_la_LIBADD = $(OFILES) @WIN32LIBADD@ -L../bfd -lbfd
- libopcodes_la_LDFLAGS = -release $(VERSION) @WIN32LDFLAGS@
- 
- # libtool will build .libs/libopcodes.a.  We create libopcodes.a in
---- binutils/opcodes/Makefile.in.dso	2003-12-04 10:43:28.000000000 -0800
-+++ binutils/opcodes/Makefile.in	2003-12-04 10:50:11.000000000 -0800
-@@ -394,7 +394,7 @@ INCLUDES = -D_GNU_SOURCE -I. -I$(srcdir)
- 
- libopcodes_la_SOURCES = dis-buf.c disassemble.c dis-init.c
- libopcodes_la_DEPENDENCIES = $(OFILES) ../bfd/libbfd.la
--libopcodes_la_LIBADD = $(OFILES) @WIN32LIBADD@ ../bfd/libbfd.la
-+libopcodes_la_LIBADD = $(OFILES) @WIN32LIBADD@ -L../bfd -lbfd
- libopcodes_la_LDFLAGS = -release $(VERSION) @WIN32LDFLAGS@
- 
- # libtool will build .libs/libopcodes.a.  We create libopcodes.a in
-@@ -468,7 +468,7 @@ acinclude.m4 aclocal.m4 config.in config
- 
- DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
- 
--TAR = tar
-+TAR = gtar
- GZIP_ENV = --best
- SOURCES = libopcodes.a.c $(libopcodes_la_SOURCES)
- OBJECTS = libopcodes.a.$(OBJEXT) $(libopcodes_la_OBJECTS)
-@@ -593,7 +593,7 @@ libopcodes.la: $(libopcodes_la_OBJECTS) 
- all-recursive install-data-recursive install-exec-recursive \
- installdirs-recursive install-recursive uninstall-recursive install-info-recursive \
- check-recursive installcheck-recursive info-recursive dvi-recursive:
--	@set fnord $(MAKEFLAGS); amf=$$2; \
-+	@set fnord $$MAKEFLAGS; amf=$$2; \
- 	dot_seen=no; \
- 	target=`echo $@ | sed s/-recursive//`; \
- 	list='$(SUBDIRS)'; for subdir in $$list; do \
-@@ -613,7 +613,7 @@ check-recursive installcheck-recursive i
- 
- mostlyclean-recursive clean-recursive distclean-recursive \
- maintainer-clean-recursive:
--	@set fnord $(MAKEFLAGS); amf=$$2; \
-+	@set fnord $$MAKEFLAGS; amf=$$2; \
- 	dot_seen=no; \
- 	rev=''; list='$(SUBDIRS)'; for subdir in $$list; do \
- 	  rev="$$subdir $$rev"; \
diff -Nur binutils-2.18.50.0.1/patches/libtool-gnu.patch binutils-stable/patches/libtool-gnu.patch
--- binutils-2.18.50.0.1/patches/libtool-gnu.patch	2003-05-05 23:46:51.000000000 +0200
+++ binutils-stable/patches/libtool-gnu.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,36 +0,0 @@
-2002-02-03  H.J. Lu <hjl@gnu.org>
-
-	* libtool.m4 (lt_cv_deplibs_check_method): Updated for
-	Linux/mips.
-
-2001-10-22  H.J. Lu <hjl@gnu.org>
-
-	* ltmain.sh: Allow link against an archive when building a
-	shared library.
-
-	* libtool.m4 (lt_cv_deplibs_check_method): Always use
-	file_magic for Linux ELF.
-
-Index: libtool.m4
-===================================================================
-RCS file: /export//cvs/gnu/binutils/libtool.m4,v
-retrieving revision 1.1.1.9
-retrieving revision 1.7
-diff -u -p -r1.1.1.9 -r1.7
---- libtool.m4	27 Feb 2003 18:48:53 -0000	1.1.1.9
-+++ libtool.m4	27 Feb 2003 19:27:35 -0000	1.7
-@@ -635,13 +635,7 @@ irix5* | irix6*)
- 
- # This must be Linux ELF.
- linux-gnu*)
--  case $host_cpu in
--  alpha* | hppa* | i*86 | powerpc* | sparc* | ia64* )
--    lt_cv_deplibs_check_method=pass_all ;;
--  *)
--    # glibc up to 2.1.1 does not perform some relocations on ARM
--    lt_cv_deplibs_check_method=['file_magic ELF [0-9][0-9]*-bit [LM]SB (shared object|dynamic lib )'] ;;
--  esac
-+  lt_cv_deplibs_check_method=['file_magic ELF [0-9][0-9]*-bit [LM]SB( .*|) (shared object|dynamic lib )']
-   lt_cv_file_magic_test_file=`echo /lib/libc.so* /lib/libc-*.so`
-   ;;
- 
diff -Nur binutils-2.18.50.0.1/patches/README binutils-stable/patches/README
--- binutils-2.18.50.0.1/patches/README	2007-09-08 19:33:37.000000000 +0200
+++ binutils-stable/patches/README	1970-01-01 01:00:00.000000000 +0100
@@ -1,56 +0,0 @@
-#! /bin/sh
-
-# If you don't use rpm, you can use this file to apply additional Linux
-# patches. At the top level of the binutils source tree, do
-#
-# /bin/sh patches/README
-#
-# You may have to do
-#
-# cd bfd
-# make headers
-#
-# if the build fails.
-
-dir=`dirname $0`
-clean=$1
-
-patches="
-	bfd-ref_addr-6.patch
-	binutils-indirect-1.patch
-	binutils-tls-relro-14.patch
-	binutils-shr-83.patch
-	ld-env-7.patch
-	binutils-hash-2.patch
-	binutils-error-3.patch
-	binutils-signed-2.patch
-	binutils-weakdef-1.patch
-"
-
-if [ -n "$clean" ]
-then
-  rm -f ChangeLog.patches
-  touch ChangeLog.patches
-fi
-
-for p in $patches
-do
-  if [ -n "$clean" ]
-  then
-    sed -e "/^---/,\$d" $dir/$p >> ChangeLog.patches
-  else
-    suffix=$(echo $p | sed -e "s/.*-\([^-]\+\)-[0-9]\+.patch/\1/")
-    backup="-b --suffix .$suffix"
-  fi
-  case $p in
-  binutils*)
-    level=1
-    ;;
-  *)
-    level=0
-    ;;
-  esac
-  patch -E -p$level $backup < $dir/$p || exit 1
-done
-find -name "*.orig" | xargs rm -fv
-find -name "*.gmo" | xargs rm -fv
diff -Nur binutils-2.18.50.0.1/release-notes-csl.xml binutils-stable/release-notes-csl.xml
--- binutils-2.18.50.0.1/release-notes-csl.xml	1970-01-01 01:00:00.000000000 +0100
+++ binutils-stable/release-notes-csl.xml	2007-09-25 15:42:07.000000000 +0200
@@ -0,0 +1,359 @@
+<!-- This file contains a series of release note fragments processed
+     by gnu-notes.  To add a note to it, use "gnu-notes -a
+     $release_config binutils".  The TARGET line should contain a
+     list of shell glob patterns for target names to which the note is
+     relevant; it may be removed if it is relevant to all targets.
+ -->
+
+      <!-- UUID: 35b7e99d-cceb-428b-bd75-f5db3d814bee -->
+      <!-- TARGET: mips*-* -->
+      <formalpara>
+        <title>Linker errors for large programs</title>
+        <para>
+          A bug causing linker errors for some programs with hundreds
+          of megabytes of statically-allocated data has been fixed.
+        </para>
+      </formalpara>
+
+      <!-- UUID: ecb4ca3e-8e43-4022-b018-2b4894079777 -->
+      <!-- TARGET: m68k-* -->
+      <formalpara>
+        <title>ColdFire 51QE processor support</title>
+        <para>
+          &csl_prod; now supports Freescale ColdFire 51QE processor.
+          You can specify the <option>-mcpu=51qe</option> option to
+          GCC and GAS to generate code for this processor.
+        </para>
+      </formalpara>
+
+      <!-- UUID: a8d562ca-0233-46a4-9b3d-c3a438779de2 -->
+      <!-- TARGET: mips*-* -->
+      <formalpara>
+        <title>Loongson-2E and Loongson-2F processor support</title>
+        <para>
+          The binutils package now supports the ST Microelectronics
+	  Loongson-2E processor and has preliminary support for the
+	  Loongson-2F.  To assemble for these processors, invoke the
+	  assembler with <option>-march=loongson2e</option> or
+	  <option>-march=loongson2f</option> as appropriate.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 7257b2a0-4646-4a7c-a8c6-acc633c90287 -->
+      <!-- TARGET: * -->
+      <formalpara>
+        <title>Binutils update</title>
+        <para>
+          The binutils package has been updated to the 2007-08-19
+	  version of the pre-2.18 FSF trunk.  This contains many
+	  new improvements and bug fixes.  For more information,
+	  refer to the manuals for the individual utilities, and
+	  to the binutils web site at
+	  <uri>http://www.gnu.org/software/binutils/</uri>.
+        </para>
+      </formalpara>
+
+      <!-- UUID: b9965b8f-e631-4713-b412-18bc0c5f4762 -->
+      <!-- TARGET: * -->
+      <formalpara>
+        <title>Improved diagnostics for region overflow</title>
+        <para>
+          The linker will now give more helpful diagnostics when
+	  the object files being linked are too big for one of the
+	  memory regions defined in the linker script.
+        </para>
+      </formalpara>
+
+      <!-- UUID: f6f8acf9-5194-417c-8b38-8f50cf2a7232 -->
+      <!-- TARGET: mips*-* -->
+      <formalpara>
+        <title>ABI markings for MIPS binaries</title>
+        <para>
+	  GCC and Binutils now mark MIPS binaries according to their
+	  floating point calling convention.  The linker reads this
+	  information and warns when mismatched object files are
+	  linked together.  For example, the linker warns if
+	  <option>-msoft-float</option> objects are linked to a
+	  <option>-mhard-float</option> C library.
+	  GDB uses the same information to correctly call
+	  functions from the command line and display return values
+	  after <command>finish</command>.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 3753b4bf-ad3f-4a51-9be0-eb8dad79ca7e -->
+      <!-- TARGET: *-mingw32 -->
+      <formalpara>
+        <title>C++ exception handling with relocatable links</title>
+        <para>
+          A defect in relocatable linking (<command>&csl_target;-ld
+          -r</command>) of C++ programs using exception handling has
+          been fixed.  Such programs formerly appeared to link
+          correctly, but handlers established by
+          <literal>try</literal>/<literal>catch</literal> blocks
+          failed to execute.
+        </para> 
+      </formalpara>
+
+      <!-- UUID: db59863a-55e8-4917-9497-cdb5a7aaff41 -->
+      <!-- TARGET: fido*-* -->
+      <formalpara>
+        <title><code>movec</code> instruction</title>
+        <para>
+          The assembler now accepts <code>%mbo</code> for Memory Base
+          Offset register in the <code>movec</code> instruction.
+          <code>%mbb</code> continues to be accepted as a synonym of
+          <code>%mbo</code> for backward compatibility.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 75767301-8648-49ff-a31d-ed709f5425f0 -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Calls to undefined weak symbols</title>
+        <para>
+	  The linker now implements semantics that comply to the ARM EABI for
+	  <literal>R_ARM_CALL</literal> and <literal>T_ARM_THM_CALL</literal>
+	  relocations against undefined weak symbols.  These now result
+	  in a jump to the next instruction.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 177f6281-7b20-4273-b1fa-bd3e6c3b7ecd -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>NEON coprocessor system registers</title>
+        <para>
+	  The assembler now accepts the <literal>MVFR0</literal> and
+	  <literal>MVFR1</literal> coprocessor registers in
+	  <code>fmrx</code> and <code>fmxr</code> instructions.
+        </para>
+      </formalpara>
+
+      <!-- UUID: bf6c6f88-5172-42e9-ae88-35fb5cf18534 -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>EABI object attribute merging</title>
+        <para>
+          The linker now properly merges EABI object attributes into
+          its output file.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 8bef0c36-4ea4-48f3-be35-7ec5dd43e08b -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Thumb-2 shift instruction aliases</title>
+        <para>
+	  The assembler now accepts <literal>mov</literal> with shifted
+	  operands as an alias for Thumb-2 shift instructions.
+	  For example <code>mov r0, r1, lsl r2</code> is encoded as
+	  <code>lsl r0, r1, r2</code>.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 2174187c-835b-4c02-95a8-d355eea6aa80 -->
+      <!-- TARGET: m68k-* -->
+      <formalpara>
+        <title>Coprocessor instructions</title>
+        <para>
+          Support has been added for ColdFire coprocessor instructions.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 2cf1292a-f39a-4f5d-93e4-83197fef71ea -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Thumb-2 doubleword writeback addressing modes</title>
+        <para>
+	  An assembler bug that caused writeback addressing modes for
+	  <literal>ldrd</literal> and <literal>strd</literal> to be
+	  incorrectly encoded has been fixed.
+        </para>
+      </formalpara>
+
+      <!-- UUID: afd0d3e6-b375-4842-bc26-5f2d03d0f830 -->
+      <!-- TARGET: * -->
+      <formalpara>
+        <title>Assembler skipping <literal>\</literal> characters</title>
+        <para>
+          A bug is fixed where the assembler would skip <literal>\</literal>
+          characters when they appeared at certain positions in the
+          input file.  This bug primarily affected assembler macros.
+        </para>
+      </formalpara>
+
+      <!-- UUID: bf7881b7-bc58-40b5-bad8-467af6fb0fd1 -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Thumb-2 exception return instructions</title>
+        <para>
+	  An assembler bug that caused <code>subs pc, lr, #const</code> and
+	  <code>movs pc, lr</code> to be incorrectly encoded has been fixed.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 180be6f1-8efa-41a9-991f-ff55ac12b6ea -->
+      <!-- TARGET: mips*-* -->
+      <formalpara>
+        <title>MIPS <code>.set</code> directives</title>
+        <para>
+          The assembler now accepts <code>.set <replaceable>symbol</replaceable>,<replaceable>value</replaceable></code>
+          directives in addition to MIPS-specific uses of
+          <code>.set</code>.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 960d8ae2-0da1-42ca-93d3-33d442c0e05a -->
+      <!-- TARGET: arm*-linux* -->
+      <formalpara>
+        <title>Thumb-2 branches to shared libraries</title>
+        <para>
+	  The linker can now generate PLT stubs for
+	  <literal>R_ARM_THM_JUMP24</literal> and
+	  <literal>R_ARM_THM_JUMP19</literal> relocations.
+	  This occurs when Thumb-2 branch instructions refer to
+	  symbols imported from shared libraries.
+        </para>
+      </formalpara>
+
+      <!-- UUID: e1bb874b-011a-41e7-afb5-5a1ed27669dc -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Uppercase special register names</title>
+        <para>
+	  The assembler now accepts both uppercase and lowercase
+	  special register names when assembling <literal>msr</literal>
+	  and <literal>mrs</literal> instructions for the Microcontroller
+	  profile of the ARM Architecture.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 8eb49223-2b34-4001-82fa-c6c25187dcd8 -->
+      <!-- TARGET: m68k-* -->
+      <formalpara>
+        <title>ColdFire <code>wdebug.l</code> instructions</title>
+        <para>
+          The assembler now correctly recognizes <code>wdebug.l</code>
+          mnemonics.  Previously only <code>wdebug</code> variants
+          were allowed.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 46f50791-532d-4090-85f9-8df897f8df7e -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+	<title>ARM EABI compliance</title>
+	<para>
+	 Objects produced by &csl_prod; are now marked as ARM ELF 
+	 version 5 rather than ARM ELF version 4.  This reflects 
+	 compliance with recent revisions of the ARM EABI.
+	 &csl_prod; still accepts objects marked with version 4.
+	</para>
+      </formalpara>
+
+      <!-- UUID: ab551837-8693-472f-87ee-4324473ee45b -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Conditional Thumb-2 branch instructions</title>
+        <para>
+	  A linker bug that could cause objects involving conditional
+	  Thumb-2 branch instructions to be incorrectly rejected has
+	  been fixed.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 57c7f878-b1d6-4a76-89a0-e56638a45554 -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Linking of non-ELF images</title>
+        <para>
+          A linker bug that could cause a crash when linking non-ELF
+	  objects for ARM targets has been fixed.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 137779dc-f8f0-4255-8481-9347cb648b74 -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>Improved assembler diagnostics for 8-bit offsets</title>
+        <para>
+          The assembler now correctly diagnoses out-of-range offsets to
+	  instructions such as <literal>LDRD</literal> as 8-bit rather
+	  than half-word offsets.
+        </para>
+      </formalpara>
+
+      <!-- UUID: 1ecbee14-e384-45e2-a840-ccc48ee695ee -->
+      <!-- TARGET: arm*-* -->
+      <formalpara>
+        <title>The <literal>\@</literal> assembler pseudo-variable</title>
+        <para>
+	  A bug in the assembler that caused uses of the <literal>\@</literal>
+	  pseudo-variable to be mis-parsed as comments has been fixed.
+        </para>
+      </formalpara>
+
+      <!-- UUID: f794bd84-ab3f-495f-a994-904fdc95c7ed -->
+      <!-- TARGET: * -->
+      <formalpara>
+        <title>Binutils update</title>
+        <para>
+	  The binutils package has been updated from 
+	  version 2.17 to the pre-2.18 FSF trunk.  This is a significant
+	  update with many improvements and bug fixes.
+        </para>
+      </formalpara>
+      <para>
+	Changes to the assembler (<command>as</command>) include:
+        <itemizedlist>
+          <listitem>
+            On MIPS targets, support for additional processors
+            and the SmartMIPS and DSP Release 2 extensions has been added.
+          </listitem>
+        </itemizedlist>
+      </para>
+      <para>
+	New linker (<command>ld</command>) features include:
+        <itemizedlist>
+          <listitem>
+            A new command-line option <option>--default-script</option>
+            has been added to give more precise control over linker script
+            processing.
+          </listitem>
+          <listitem>
+            There are new command-line options
+            <option>-Bsymbolic-functions</option>,
+            <option>--dynamic-list</option>,
+            <option>--dynamic-list-cpp-new</option>, and
+            <option>--dynamic-list-data</option> to control symbols
+            that should be dynamically linked.
+          </listitem>
+          <listitem>
+            The new <option>--print-gc-sections</option> option lists
+            sections removed by garbage collection.
+          </listitem>
+        </itemizedlist>
+      </para>
+      <para>
+	Other changes include:
+        <itemizedlist>
+          <listitem>
+            The <command>objcopy</command> utility has a new
+            <option>--extract-symbol</option> option to extract only
+            symbol table information from the input file.
+          </listitem>
+          <listitem>
+            The <command>gprof</command> utility now allows input files
+            to have histogram records for several memory ranges, provided
+            those ranges are disjoint.
+          </listitem>
+        </itemizedlist>
+      </para>
+      <para>
+	For more information, refer to the manuals for the individual
+        utilities, and the binutils web site at
+        <uri>http://www.gnu.org/software/binutils/</uri>.
+      </para>
+
+<!-- Release notes end here.  -->
